---
layout: post
title: ROS2æœºå™¨äººæ“ä½œç³»ç»Ÿæ•™ç¨‹
tags:
  - ROS
---

> ğŸ“„ æœ¬æ•™ç¨‹å·²å‘å¸ƒäºé£ä¹¦æ–‡æ¡£ï¼š[ç‚¹å‡»æŸ¥çœ‹](https://sdutvincirobot.feishu.cn/wiki/FKEVwIsvKi1yBHkHWqTcn2ZKnNe?from=from_copylink)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzQ3YmUzMWMwNGNhMmVlM2UyYmZjNGU1Nzg0OTc4M2JfSkNvYnZnd1lJY2VIQ3JOdUxmcTF2cmh0TzRpTWoyejZfVG9rZW46VDhCamJQUGswb3NEU3h4eWpobGNDMFFxbnhoXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDE3NjlhZmNiZDg2YzE5NDA5MzIzZDNmYzJhNTg4N2JfdVFqNkNqbkFRR2tFS1pxOFAxSkFkNmNnMU9nUVFBeTlfVG9rZW46WVdhQmI3QTdQb3R0Mmh4eGRTamNoVmZabkpmXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

æ¬¢è¿å„ä½VincièŠ¬å¥‡æœºå™¨äººé˜Ÿæˆå‘˜æ¥è¿›è¡Œå­¦ä¹ ROS2ã€‚

å¦‚æœä½ æƒ³è¦æ‰¾ROS1æ•™ç¨‹ï¼Œè¯·çœ‹[ROSæœºå™¨äººæ“ä½œç³»ç»Ÿæ•™ç¨‹](https://sdutvincirobot.feishu.cn/wiki/W976wTlonibALVkmfIhcdUKYnUV)

1.  # ROS2ä»‹ç»
    

1.  ## ROS2ç®€ä»‹
    

The Robot Operating System (ROS) is a set of software libraries and tools that help you build robot applications. From drivers to state-of-the-art algorithms, and with powerful developer tools, ROS has what you need for your next robotics project. And it's all open source.

æœºå™¨äººæ“ä½œç³»ç»Ÿï¼ˆROSï¼‰æ˜¯ä¸€ç»„è½¯ä»¶åº“å’Œå·¥å…·ï¼Œå¯å¸®åŠ©æ‚¨æ„å»ºæœºå™¨äººåº”ç”¨ç¨‹åºã€‚ä»é©±åŠ¨ç¨‹åºåˆ°æœ€å…ˆè¿›çš„ç®—æ³•ï¼Œå†åŠ ä¸Šå¼ºå¤§çš„å¼€å‘å·¥å…·ï¼ŒROSä¸ºæ‚¨çš„ä¸‹ä¸€ä¸ªæœºå™¨äººé¡¹ç›®æä¾›äº†æ‰€éœ€çš„ä¸œè¥¿ã€‚è€Œä¸”éƒ½æ˜¯å¼€æºçš„ã€‚

2.  ## ROS2æ¡†æ¶
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGM0ZTk0MWQ1ZTgyOWI3NzhkN2JhNzgwZmY1NjAwZTBfV0VJMlFQZHJ1N0JTSHhlbWtzMXd6aW5IcEdSaWRZWUJfVG9rZW46VEphZGJQTVhRbzZOTEt4U3VEbWNIUlhnbnFmXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDIzMGZhY2MxYmNjZjZmZTk3NTMzNzg1ZWRjZTY1YTdfdnpoakJuUG9hMVFzdVB0ZGZlTXQ2VkZQMU9JNTlOemFfVG9rZW46R25MWWIxMDhVb21iVkN4Q2lINmNCYUtKblpjXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

3.  ## ROS2å‚è€ƒèµ„æ–™
    

1.  ### å®˜æ–¹èµ„æ–™
    

ç”±äºROS2å‚è€ƒæ–‡æ¡£å¤ªå°‘ï¼Œæ‰€ä»¥å¾ˆå¤šæ•™ç¨‹è¿˜æ˜¯éœ€è¦çœ‹ROS2å®˜ç½‘ï¼š

https://www.ros.org/

2.  ### **æ¨èçš„è§†é¢‘èµ„æ–™ä¸é…å¥—æ–‡æ¡£**
    

éå¸¸æ¨èä»¥ä¸‹èµ„æ–™ä¸è§†é¢‘

https://www.bilibili.com/video/BV1VB4y137ys

èµµè™šå·¦åŸç‰ˆé…å¥—èµ„æ–™:[ROS2ç†è®ºä¸å®è·µ-èµµè™šå·¦<å¯†ç :qinghuamengshi>.pdf](https://sdutvincirobot.feishu.cn/file/GQgvbWU4UoKhbxx8DjHc9nQ1nWf)

æš‚æ—¶æ— æ³•åœ¨é£ä¹¦æ–‡æ¡£å¤–å±•ç¤ºæ­¤å†…å®¹

1.  ## å­¦ä¹ ROS2éœ€è¦ç”¨åˆ°çš„çŸ¥è¯†å‚¨å¤‡
    

1.  éœ€è¦ç”¨å“ªäº›çŸ¥è¯†ï¼Ÿ
    
    1.  LinuxåŸºæœ¬æ“ä½œä¸Shellè„šæœ¬è¯­è¨€
        
    
    Â Â [LinuxåŸºæœ¬æ•™ç¨‹](https://sdutvincirobot.feishu.cn/docx/ZD0bd33RRovEoIxeBzncdmQEnSg)
    
    https://www.runoob.com/linux/linux-tutorial.html
    
    4.  CmakeåŸºæœ¬ä½¿ç”¨
        
    
    Â Â [Linux C++ç¼–è¯‘ç¯å¢ƒé…ç½®](https://sdutvincirobot.feishu.cn/docx/ANgFdRtvKoCcKDxZ2ehc5Rocnwh)
    
    6.  GitåŸºæœ¬æ“ä½œ
        
    
    Â Â [Vinciæœºå™¨äººé˜ŸGitå…¥é—¨æ•™ç¨‹](https://sdutvincirobot.feishu.cn/docx/B7arde6u0ob5tsxk5QOcFLG7nYd)
    
    8.  C/C++è¯­è¨€
        
    
    Â Â [Vinciæœºå™¨äººé˜Ÿç”µæ§ç»„å…¥é—¨æŒ‡å¯¼](https://sdutvincirobot.feishu.cn/docx/XfSud40MgoxZkQxup0acTf6Znwb)
    
    Â Â [Vinciæœºå™¨äººé˜ŸC/C++èµ„æ–™](https://sdutvincirobot.feishu.cn/docx/N0GAdx6IDoqnRnx1q0TcX1Wfnvc)
    
    11.  Python3è¯­è¨€
        
    
    Â Â [Vinciæœºå™¨äººé˜ŸPython3æ•™ç¨‹](https://sdutvincirobot.feishu.cn/wiki/QZL8wLeewiTmvfkczMyccAdVn0c)
    
    https://www.runoob.com/python3/python3-tutorial.html
    
    14.  XMLè¯­è¨€
        
    
    https://www.runoob.com/xml/xml-tutorial.html
    
    16.  YAMLè¯­è¨€
        
    
    http://www.noobyard.com/article/p-saghdsms-mn.html
    

2.  ## å®‰è£…ROS2
    

ROS1å®‰è£…è¯·çœ‹[ROSæœºå™¨äººæ“ä½œç³»ç»Ÿæ•™ç¨‹](https://sdutvincirobot.feishu.cn/wiki/W976wTlonibALVkmfIhcdUKYnUV)

1.  ### äºŒè¿›åˆ¶åŒ…å®‰è£…ROS2(ä»¥Kubuntu Jammy 22.04å®‰è£… **ROS Humble** ä¸ºä¾‹)
    

æ³¨æ„:

æˆªè‡³2024å¹´12æœˆï¼Œå¼ºçƒˆå»ºè®®å¦‚æœè¦ç”¨ROS2çš„è¯ï¼Œä¸€å®šè¦ç”¨ROS Humble,åˆ«ç”¨ROS Jazzyï¼Œè¿™ç©æ„æœ‰äº›åŒºåˆ«ï¼Œç‰¹åˆ«æ˜¯Gazebo,å‡ ä¹æ²¡å•¥æ•™ç¨‹çš„ã€‚

Ubuntu Jammy 22.04(LTS)è¯·å®‰è£…ROS Humble(LTS)ã€‚å®‰è£…å‘å¯¼ç½‘ç«™:https://docs.ros.org/en/humble/Installation/Ubuntu-Install-Debians.html

Ubuntu Noble 24.04(LTS)è¯·å®‰è£…ROS Jazzy(LTS)ã€‚å®‰è£…å‘å¯¼ç½‘ç«™:https://docs.ros.org/en/jazzy/Installation/Ubuntu-Install-Debians.html

å„ä¸ªROS1ã€ROS2ç‰ˆæœ¬æ‰€æ”¯æŒçš„å‘è¡Œç‰ˆï¼šhttps://www.ros.org/reps/rep-2000.html

1.  #### è¿›å…¥ROSå®˜ç½‘
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MWFlNGVjYjExZjRmZTlmNjZjNDQ2YTJlMmE2YWNkYjlfdVdyaUV0NEZpYnRaekZtanN6SHVnWWtjYTliMThJdGdfVG9rZW46VjE1bWJmUG1kb2lwZFp4RmNrRGN6UlowblByXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjVkNmI4NGFjOTQ5NTc2ZmNiNjAzZDlmYTJjZjliMWZfZXZWcXRiUTlJUE1YUWh2MmVGbVV4YlZabzZTMkhiSlBfVG9rZW46QzA2c2JCVTFCb1JMWGt4cHhuU2NsMFNnbmJnXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

ä¸€å®šè¦å®‰è£…LTSç‰ˆæœ¬çš„ROS2

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzIwMzk0NjQ2YjEyNmE3MmRjNTVmZTQxN2QwZWQ0ZmVfUGlSRnZHVzNQeldKRURIck5VSEFJWkhpVXBTTXRUQ0ZfVG9rZW46Q3ZXb2JrNFpWb3FUbWJ4SzR4YmN5YjhVbjlnXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

2.  #### å®‰è£…ROS2å‰æœŸå‡†å¤‡å·¥ä½œ
    

è£…LTSç‰ˆæœ¬çš„ROS2ç‚¹å‡»ä½¿ç”¨debianåŒ…ç®¡ç†å·¥å…·å®‰è£…ROS2äºŒè¿›åˆ¶æ–‡ä»¶

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTA5MjkxOGY2ZTQxM2QxOWQ2YmNiNjNlMGY1ZTMwOGNfOVBSajlaMkEyYm1CU25mckV1TGFMMFlyVkxoYk5jTHFfVG9rZW46SjVHaGJZV2dGbzlyZVJ4QW5abGNkdXhCbkhoXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

æŒ‰ç…§ROS2å®˜ç½‘æ•™ç¨‹åœ¨ç»ˆç«¯é‡Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjJjNDMxYTQ5ZDUxZDdhNmMwMDdmZjU1NjU4ZTkyYzBfVlpzOVpGRVpSVlhPSkE0ZmlKTGlDQ3liRFg3U0hxdjBfVG9rZW46VkJ6WGJtcUNKbzJqSmt4V2ZTdmN4dXMwbjBjXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2YyY2Y0NGEwNGU2NDkzYTM0NjU5ZjU4MjE5Mzk5OGJfV2EzS1ladk41SG5JRVR0VFJQNHgzOE1ueTdvaXlzanFfVG9rZW46TUJ3N2JYVXFYbzlFeGJ4cmlwSmNXYjdRbm1nXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

ä¾æ—§è¾“å…¥ä»¥ä¸‹å‘½ä»¤å¯åŠ¨Ubuntu Universe Repo

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjU4MzQwZmEwNzFlMGJmM2RjNWZmYTBmMmIwZDUzZGNfalVjS2pMd2FDSDN0elhXSG42bUxodExKMjdNTWJpaEdfVG9rZW46Vnd2YWJrbEZ2bzJYMW94MHNrZmN4bjBxbnI5XzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzE5NDJhMjMxYzgyMTM4YjRiMzQ5YTZiNzZmMzRlZmVfVWpOdmJnWVNYVzVVSnJaU29KZDFRMnFWSmMyUDNqQ1JfVG9rZW46SElES2JUYVBFbzZJSXV4NVRQcWNDYnY5bkRiXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

3.  #### æ¢æº(å›½å†…æº)
    

è¿™ä¸ªæ˜¯å®˜ç½‘çš„æºï¼Œæ˜¯ä»å›½å¤–æœåŠ¡å™¨ä¸‹è½½ROS2äºŒè¿›åˆ¶æ–‡ä»¶çš„ï¼Œå¯¹ç½‘ç»œæœ‰è¦æ±‚ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ç»™æ”¹ä¸ºå›½å†…æºã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTlkYjEwZjg5YmE3MzRhZWY1ODdlODIzZjFiNWMxM2VfTExKZHJDa2M3S2NkU0cyOHJ6SHd3NlhVNXVHRGdOVGJfVG9rZW46T0YwYWJwSldubzRzc1p4dlNxcmNlcDhlblZmXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

ç™¾åº¦æœç´¢åŒ—äº¬å¤–å›½è¯­å¤§å­¦é•œåƒæº(äº²æµ‹ï¼ŒåŒ—æ–¹æœ€å¿«çš„æº)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjZhN2U2ZmFhZDEwNjdlYmQwYmM3MGQwMDk4YjY3NDFfaXhTSVNVY1V4a01UeWlyR0J3WVRITXlvMzB5Q2RaSHpfVG9rZW46VXJ4UmJ3MVhub3BFZHp4U0FRQ2NYNHlRbnVkXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmMwNmI2Zjc2ZjdmOWRmZjI1ZTQxYWQxNjhhNTUxZTBfN1BUVXdJWmZQS0ZIUEZPZm1lY2FiMVNrUmp6NVdodE5fVG9rZW46TXpOQWJ3NkJTb3dDaVF4cXFIRGNxOU9PbjNmXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

æ‰¾åˆ°ROS2ï¼Œç„¶åå‹¾ä¸Šsudoå’Œhttpsï¼Œé€‰æ‹©æ­£ç¡®çš„Linuxå‘è¡Œç‰ˆã€‚åœ¨ä½¿ç”¨è¯¥å‘½ä»¤å‰æœ‰å¯èƒ½ä¼šé‡åˆ°æƒé™ä¸å¤Ÿçš„é—®é¢˜ï¼Œå¯ä»¥å…ˆå¾€ä¸‹çœ‹ï¼Œå¦‚ä½•ä»¥rootæƒé™è¿è¡Œæ‰€æœ‰å‘½ä»¤ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjQzZWMwMTY1MGZhYmIxODA3YTkzMzUwNGM4NTI1OWZfSFFFWGd2Wm96NnY3Sk4xa2c2TzBTN2ZUZkZuY21hM2tfVG9rZW46SE44aGJqTk5Yb044c2V4QVZkcmNPeElhbnJjXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTUyNTZkZGE3NjQ4ZmViNTczMzEwNzZmMjkyMWMwODhfaWQ2WjlQN2lCMVZLSkV0elJCMEs2d1VqYVhBTHBtUTBfVG9rZW46UzQzdGJMUzRqb2twalV4ejc5NGNvUEhtbkRiXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

å…ˆè¾“å…¥sudo passwdè®¾ç½®rootå¯†ç ï¼ˆUbuntuç³»å‘è¡Œç‰ˆè¦å¹²çš„äº‹ï¼‰ï¼ˆdebian,Fedoraç­‰å‘è¡Œç‰ˆåœ¨è£…æœºæ—¶å°±å·²ç»è®¾ç½®è¿‡äº†ï¼Œæ— éœ€è¿è¡Œï¼‰

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTA3NmEzOTBiYmNiOTZiNTMwMDhmN2Q4NWY1ZWJmODVfT3RNQVlyN3k2RHpFYUVFMDBtb0RUeHFFbTRhenhIMDhfVG9rZW46UTAzRGJFak05b3d5OUZ4NndMZGN2Z1pGbm5nXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

```Bash
sudo passwd

su -
```

ç„¶åè¿›å…¥ç®¡ç†å‘˜æƒé™ä¸‹

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTdlMmQ1NWVlMTc1N2ZiOTJiZWNmODMwYTBkNDNiMjBfMWdWTWoybWloYTBVSkw2dEtNNWtPN1I3Q29PQzhNQ2dfVG9rZW46WEROc2JCRnJOb0pMR0J4UDNWcGNzSm5QbmRjXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

æŒ¨è¡Œå¤åˆ¶è¾“å…¥è¿è¡Œ

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTY4ZTUxM2E5YWRmMDExNTZmMjlhNjkyZDM0NGMzOGJfTDcwV3RuaHo4a3M2aEs0VUh3bVR1Q2hLSHB4azlMbmlfVG9rZW46VFpsM2I4b2RRb0JINzN4VEVFVmNqRXk0bnhoXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTJjYjkzYmY0ZTIwN2RiM2NhZTIyOWU5ZDNkYmU0MmVfa0RjaTlVZHk0a2l5ODA3cERaRWhDQ1ozdllCMGEyRktfVG9rZW46TXI1TGJVd2g4bzhseEh4Q0FNcmM4SnFSbkhnXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGQyZTI4MmQxYTk3NjQ4NjVmYTNmZWU0ODgwODQwZjRfTmRCdWczOUQ3RXAxVFM3OXlYNFFQdnVqV1ZGZEhicjZfVG9rZW46RFl4UmJ6ZHhSb3QxVzl4SVB5eWNNWGNTblZjXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

ä¸Šé¢ä¸‹è½½keyçš„æ—¶å€™å¦‚æœå¡ä½äº†ï¼Œé‚£å°±æ˜¯githubåˆæŠ½é£äº†ï¼Œå¾ˆæ­£å¸¸çš„é—®é¢˜ï¼Œå¯ä»¥é€‰æ‹©ç§‘å­¦\*ä¸Šç½‘([ç§‘å­¦æœºåœºæ•™ç¨‹](https://sdutvincirobot.feishu.cn/wiki/HnjswlR8NiVjVgkbn6hcAlwzn2e))è§£å†³ï¼Œå¦‚æœè¿˜è§£å†³ä¸äº†ï¼Œå¯ä»¥é€šè¿‡ä¸‹æ–¹æ•™ç¨‹ä¿®æ”¹hostsã€‚

https://blog.csdn.net/qq\_40584960/article/details/117963644?sharetype=blog&shareId=117963644&sharerefer=APP&sharesource=qq\_33274985&sharefrom=link

  

  

æˆåŠŸä¸‹è½½keyä¹‹åï¼Œç»§ç»­å¾€ä¸‹å¼„ã€‚

è¾“å…¥exité€€å‡ºrootæ¨¡å¼

```Bash
exit
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWMzMjAwODMxZDA0MWYzNGUyM2JhZTRjOWU5MDY0MDBfalZWNWJVZ3praU5WeGZXdFhOWmdrQ3VLQnNaOU02TUdfVG9rZW46TXlmaGJCSk5UbzVDR0F4TjdVZ2NjSFQ5bkVlXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

4.  #### é€šè¿‡aptå®‰è£…ROS2
    

æŠŠä»¥ä¸‹çº¢è‰²æ¡†æ¡†çš„å…¨éƒ¨åœ¨ç»ˆç«¯é‡Œæ•²ä¸€é

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MWJmMGMzZThkMGI5NmYyNzgwMDJiMjUzZjYyMzU2ZTZfbEZjaDZ5V3RDVXNGaWlrVHlTRzdwQTdGN1Jibm1CSzhfVG9rZW46SXQxd2JYSTJXb2hNZkp4TDFSbmNUUkQzbkNmXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

å›½å†…çš„é•œåƒä¸‹è½½è¿˜æ˜¯éå¸¸å¿«çš„ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MThiYWM5ZDJhYzA4NmVmNmVmM2M2ZGU2MmFkY2JmY2VfbUlTZjBheHFoamxyZEx3VkV2azBOdThReW94VnR4N1JfVG9rZW46VWJGYWJxU0dab3BEd3F4Q1d6aGNNWDBzbnRoXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

  

5.  #### ROS2åŸºç¡€ç¯å¢ƒå˜é‡é…ç½®
    

å¤åˆ¶è¯¥è¡Œ

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjVhZDIyNjRlNGMxZTlkNjE0M2FmNmE1NGY0NjUwNjVfb3RJbWRhU21nMmZacmk3ajA1a0haUUVCOEo2NmVJblBfVG9rZW46TEtyUWJNMElDb3ZvWHV4c0JoWmNDVnlGbmxlXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

è¾“å…¥ä»¥ä¸‹å‘½ä»¤

```Bash
sudo apt-get install vim
sudo vim ~/.bashrc
```

åœ¨æœ€åº•éƒ¨æŠŠè¿™è¡ŒåŠ ä¸Šï¼ˆvimä¸ä¼šä½¿ç”¨çš„ï¼Œè¯·è‡ªè¡Œç™¾åº¦ï¼‰

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjJkOGZlOTBhNDI1MzA5MjA4ZWE0YzkzZDEzNGMwMmZfMTZaU0VQa1lRU2ZYQ3huMjl6eHU5aXdIZk1taHpYVU9fVG9rZW46WkZvemJHalk0b0NkS1B4TlZ4Y2NndmFablFiXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

åˆ·æ–°ä»¥ä¸‹å½“å‰ç»ˆç«¯çš„ç¯å¢ƒå˜é‡

```Bash
echo 'export ROSDISTRO_INDEX_URL=https://mirrors.bfsu.edu.cn/rosdistro/index-v4.yaml' >> ~/.bashrc
source ~/.bashrc
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MWUzZjRhM2NkZmUyOWJmOWM5MWQ2MzdkZDhhZTcxY2VfYUVtSkJVb1hvZFZhMVRjaVQwZU9iWnNWckNCMjhqSnBfVG9rZW46REg4RmJTcGNkb0d5MGl4VmZ4dGMwYzlqbkpmXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

6.  #### æµ‹è¯•ROS2
    

è¯·å¾€ä¸‹ç¿»åˆ°**`æµ‹è¯•ROS2`**ç« èŠ‚

  

  

2.  ### ä»æºç å®‰è£…ROS2(éš¾åº¦è¾ƒé«˜ï¼ŒUbuntuç”¨ä¸Šé¢é‚£ä¸ªç®€å•æ–¹æ³•å³å¯ã€‚)
    

1.  #### Fedoraæˆ–è€…Rocky
    

https://www.ros.org/

å…ˆè¿›å®˜ç½‘,é€‰æ‹©å¯¹åº”çš„ç‰ˆæœ¬,æ¯”å¦‚æˆ‘è¿™é‡Œé€‰æ‹©ROS Jazzy.

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGEzZGQwNjA5MDM2Nzk5NWZhNzFjOTAyMTQwZWY5NDdfUUxoV2lWOUhQNlpaWnRZVDRjdlhhQ3FPcThZb0lORlVfVG9rZW46VFB0OGJuNVVUb0NsQVJ4UjUyVWNnajZCbmhoXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

ç„¶åé€‰æ‹©ç”¨æºç è¿›è¡Œç¼–è¯‘,æ‰¾åˆ°å¯¹åº”çš„å‘è¡Œç‰ˆ,æ¯”å¦‚æˆ‘è¿™é‡Œæ˜¯Feodra.

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2VlYmY5NDVhZWMyZGJlOGRiNmQzOTE5ZTFlOWRmZTBfNlpGT2lrY29FdHRyQTBUYzRkU2t1S1VsbXBqWm9wMjhfVG9rZW46UnBQeGJEUTgxb0tuYU14ZXJ5SmNJTE9GbnMxXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

ç„¶åæ ¹æ®å®˜ç½‘æ•™ç¨‹æ¥å°±è¡Œ

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGU4YWE1ZTZiMmMwZTc1OWJjOTZjNTYyMDI1YjM2YjhfTEZmcFpFTFphYjhCWExuZDhOdVlzY0lTTjlNaDMwY0hfVG9rZW46RFhjVmJEUEZsb0swMUJ4dzl6Q2NjRGpzbmNiXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

1.  è®¾ç½®åŒºåŸŸ
    

ç¡®ä¿ä½ çš„ locale æ”¯æŒ `UTF-8`ã€‚å¦‚æœä½ åœ¨ä¸€ä¸ªæœ€å°çš„ç¯å¢ƒï¼ˆæ¯”å¦‚ docker å®¹å™¨ï¼‰ä¸­ï¼Œlocale å¯èƒ½æ˜¯ `C` ç­‰æœ€å°çš„ä¸œè¥¿ã€‚æˆ‘ä»¬ä½¿ç”¨ä»¥ä¸‹è®¾ç½®è¿›è¡Œæµ‹è¯•ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯å…¶ä»–æ”¯æŒ UTF-8 çš„åŒºåŸŸè®¾ç½®ï¼Œåº”è¯¥æ²¡é—®é¢˜ã€‚

```CMake
locale  # check for UTF-8

sudo dnf install langpacks-en glibc-langpack-en
export LANG=en_US.UTF-8

locale  # verify settings
```

2.  å¯ç”¨å¿…é¡»çš„ä»“åº“
    

Fedoraæ— éœ€é¢å¤–å¯ç”¨ä»“åº“,RHELéœ€è¦.

3.  å®‰è£…å¼€å‘å·¥å…·
    

```CMake
sudo dnf install -y \
  cmake \
  gcc-c++ \
  git \
  make \
  patch \
  python3-colcon-common-extensions \
  python3-mypy \
  python3-pip \
  python3-pydocstyle \
  python3-pytest \
  python3-pytest-cov \
  python3-pytest-mock \
  python3-pytest-repeat \
  python3-pytest-rerunfailures \
  python3-pytest-runner \
  python3-rosdep \
  python3-setuptools \
  python3-vcstool \
  wget

# install some pip packages needed for testing and
# not available as RPMs
python3 -m pip install -U --user \
  flake8-blind-except==0.1.1 \
  flake8-class-newline \
  flake8-deprecated
```

4.  æ„å»ºROS2
    
    1.  è·å–ROS2æºç 
        
    
    Â Â æ‰¾ä¸€ä¸ªè¦å­˜æ”¾ROS2çš„æ–‡ä»¶å¤¹,å»ºè®®åœ¨/homeåˆ†åŒºæ‰¾,ç„¶ååœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹æ‰“å¼€ç»ˆç«¯.
    
    ```CMake
    mkdir -p ./ros2_jazzy/src
    cd ./ros2_jazzy
    vcs import --input https://raw.githubusercontent.com/ros2/ros2/jazzy/ros2.repos src
    ```
    
    ![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODVlNmM5NDVmODgyMmIyYTAwMjBkNjE4OGY5ZTFkNmZfZDYxYkJvZUlCRVM2cUhTZEZMQzNlR0UwdFdVbXV3cEtfVG9rZW46UmRrTGIwTlYyb01hYlh4TzZ6MGMzTXdqbkFjXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)
    
    5.  æ›´æ–°ç³»ç»Ÿ
        
    
    Â Â ROS 2 è½¯ä»¶åŒ…æ„å»ºåœ¨ç»å¸¸æ›´æ–°çš„ çº¢å¸½ç³» ç³»ç»Ÿä¸Šã€‚å§‹ç»ˆå»ºè®®æ‚¨åœ¨å®‰è£…æ–°è½¯ä»¶åŒ…ä¹‹å‰ç¡®ä¿æ‚¨çš„ç³»ç»Ÿæ˜¯æœ€æ–°çš„ã€‚
    
    ```CMake
    sudo dnf upgrade
    ```
    8.  åˆå§‹åŒ–å¹¶æ›´æ¢rosdepæº
        
    
    https://mirrors.bfsu.edu.cn/help/rosdistro/
    
    ![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDVjMGJkYWJhZTg3OTYwMjIyMmMxNTM1ODAzNmU3YWJfSlpaMnNZbDZwTWxQbFNqaW1yc0tCQTNFZ1VvcHpjUlRfVG9rZW46RHo5VGJVcml0b2hOSmp4TVp6Y2NWWlh3bkplXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)
    
    ![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGYzNzYwODMzY2E4Y2ZkNTVmMWYzMjlkMjRhYjFjMWZfTkpLeG96OWFqaVplOHNlVTV1WWsyRzZrYVFvckhUWEVfVG9rZW46UEt5Z2JRa2hGb0xVODF4bXIySGN2aFVCblBiXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)
    
    ```CMake
    # æ‰‹åŠ¨æ¨¡æ‹Ÿ rosdep init
    sudo mkdir -p /etc/ros/rosdep/sources.list.d/
    sudo curl -o /etc/ros/rosdep/sources.list.d/20-default.list -L https://mirrors.bfsu.edu.cn/github-raw/ros/rosdistro/master/rosdep/sources.list.d/20-default.list
    # åŠ å…¥ç¯å¢ƒ
    echo 'export ROSDISTRO_INDEX_URL=https://mirrors.bfsu.edu.cn/rosdistro/index-v4.yaml' >> ~/.bashrc
    # åŠ è½½.bashrc
    source ~/.bashrc
    # æ›´æ–°rosdep
    rosdep update
    ```
    
    ![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjVkYjkwODVjODNlZTdmYmExY2VmMjY1ZmE5YjQ1YjhfRFd2OHBsVENYQ2hIaGQwTmRIdFR5WmZBQkdJdVNzSGpfVG9rZW46QnlDWmJjakNRb0FhZ1J4M3VYOWNUSlVibmVmXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)
    
    ![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTg3MWVlM2FhN2E0ZWE5ODQzYWZjZTkxMmFiY2Q1ZTZfQ0lwTnA1N2lzcHZHb21zeUFnamtCNlBOaUtaSVpaWm1fVG9rZW46RThUVGJYUTNFbzd3NUV4eWJnWGNmVHRmbmhnXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)
    
    15.  é€šè¿‡rosdepå®‰è£…ä¾èµ–
        
    ```CMake
    export ROS_PYTHON_VERSION=3
    
    rosdep install --from-paths src --ignore-src -y --skip-keys "fastcdr rti-connext-dds-6.0.1 urdfdom_headers"
    ```
    
    ![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTg1MGY4ZjI2NmRiNTM4ZDBkMGYwNDRmYmQxM2E1MjZfVGR3ZkhVRGNMdTB6dVdPeWZNQXVZS1hZS21tNEFXbWlfVG9rZW46UzNRR2J1V3p3b1VtMUN4cVZYcWNJZHZEbjRnXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)
    
    Â Â å¦‚æœå‡ºç°ä¸Šé¢è¿™ç§é”™è¯¯,ä½¿ç”¨pip3å®‰è£…åŒ….
    
    ```CMake
    sudo pip3 install flake8-docstrings
    ```
    
    Â Â ç„¶å,ä½¿ç”¨ä¸‹é¢å‘½ä»¤å¿½ç•¥æ‰`flake8-docstrings`.
    
    ```CMake
    rosdep install --from-paths src --ignore-src -y \
    --skip-keys "fastcdr rti-connext-dds-6.0.1 urdfdom_headers python3-flake8-docstrings"
    ```
    
    Â Â æ˜¾ç¤ºæˆåŠŸå³å¯
    
    ![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NGJjOGIwNjI0MTAwY2MxZmJmN2VjOGMwZjI2NjAyNTJfOG1sZDV3MkVnZnpzQnNRVEtId3FubE1YZWVna2FLeWJfVG9rZW46T0NVWGJxWUpLb0RHVlV4NUdDRGNCQnNKbnRlXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)
    
    24.  é…ç½®ç¯å¢ƒ(ä¸æ˜¯çº¢å¸½ç³»çš„å‘è¡Œç‰ˆä¸ç”¨å¼„)
        
    
    Â Â å¦‚æœä½ æ˜¯çº¢å¸½ç³»ç³»ç»Ÿéœ€è¦ä¸‹é¢é…ç½®
    
    Â Â å¯ä»¥ç”¨ä¸‹é¢è¿™äº›å‘½ä»¤æš‚æ—¶å®šä¹‰è¿™äº›å®ã€‚
    
    ```Bash
    export RPM_PACKAGE_NAME=qt_gui_cpp   # æ ¹æ®åŒ…åè°ƒæ•´ï¼ˆå¦‚ ros_<package>ï¼‰
    export RPM_PACKAGE_VERSION=1.0.0
    export RPM_PACKAGE_RELEASE=1
    export RPM_ARCH=$(uname -m)
    ```
    
    <!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
    | å˜é‡å | ç¤ºä¾‹å€¼ | ç”¨é€” |
    |:---|:---|:---|
    | RPM_PACKAGE_NAME | qt_gui_cpp | å®šä¹‰ RPM åŒ…å |
    | RPM_PACKAGE_VERSION | 1.0.0 | å®šä¹‰ RPM åŒ…ç‰ˆæœ¬ |
    | RPM_PACKAGE_RELEASE | 1 | å®šä¹‰ RPM åŒ…å‘è¡Œå· |
    | RPM_ARCH | x86_64 æˆ– arm64 | å®šä¹‰ç›®æ ‡ç³»ç»Ÿæ¶æ„ |
    
    ![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2YzZjY3ZDRiYjliZDk0ZGY4MWIzYjYxYWUwOTA4NjZfQ2pLdWtyMkt0UGJ4TmlhSk1YOFNCSEl1TzZ6TnNRbUhfVG9rZW46QVJRbGIzODhOb3phS0t4dmhSUWNvRzI3bmplXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)
    
    30.  ä½¿ç”¨colconæ„å»ºæºç 
        
    ```CMake
    colcon build --symlink-install
    ```
    
    ![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjQ3MjhhYWE0YmQ3YTY3NjhkZGIyNGRlMDY2ZDI5ZWJfclF2RVNBc1ZnelVZUE1VMFJCNVAxYVdoSEFWdDJBNkhfVG9rZW46UG0zd2JrTG1yb2cwaWR4WWVTNmNGYVVPbjM5XzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)
    
    Â Â ç­‰å¾…æ„å»ºå®Œæ¯•,ä¸‹æ–¹å°±æ˜¯æ„å»ºå®Œæ¯•ä¸”æ²¡é”™è¯¯çš„æ ·å­
    
    ![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NGUyMDliNzljODljMmZhODJiODkxY2NkYzEyN2VkODFfeGs2QTJtTFU1bnhzZFBOUUtMOVpTeTJsZ3VGWWhKY1FfVG9rZW46S0psQ2I3ZXRUbzVMeGd4dU5xSGNVWGtybjZxXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)
    
5.  é…ç½®åŸºç¡€ç¯å¢ƒ
    

æ‰¾åˆ°ä¸‹æ–¹æ–‡ä»¶å¤¹,å¹¶å¤åˆ¶è·¯å¾„,æ¯”å¦‚æˆ‘çš„æ˜¯`~/UserFloder/Applications/ros2_jazzy`

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmZmODZlNjIzZGJkY2RiODRiZDZiYzNiOWIzZTNmZTBfYzJYNVh6eldIWHFBRTFlU25XWjB6b1VYT1BRN2lhZXNfVG9rZW46VFVIYmJPbmV5b0xuM3Z4dmpLVWNrbnBubjViXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

ä½¿ç”¨vimä¿®æ”¹bashçš„ç¯å¢ƒ

```CMake
vim ~/.bashrc
```

ä½¿ç”¨InsertæŒ‰é”®è¿›è¡Œè¾“å…¥

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDhmY2U5MWMxMmFjNDE5ODJmZmUwZTIzYzhiNWNhZDhfN3JwTVhLanpmOXNpbEI3aGZ4OGVtMkRnUUVCano1MmNfVG9rZW46RjRVM2JwOXVsb1Fick54d3ZsVWNTUThybmJiXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

æ·»åŠ å®Œè¿™ä¸¤è¡Œå,æŒ‰ESC,ç„¶å`:wq`ä¿å­˜å¹¶é€€å‡º.

```CMake
# åˆ·æ–°å½“å‰ç¯å¢ƒå˜é‡
source ~/.bashrc
```

  

6.  æµ‹è¯•ROS2
    

è¯·å¾€ä¸‹ç¿»åˆ°**`æµ‹è¯•ROS2`**ç« èŠ‚

  

  

2.  #### Debian
    

https://www.ros.org/

å…ˆè¿›å®˜ç½‘,é€‰æ‹©å¯¹åº”çš„ç‰ˆæœ¬,æ¯”å¦‚æˆ‘è¿™é‡Œé€‰æ‹©ROS Jazzy.

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmQ0ZjRiOTlmMjNiZjlkM2E1NjAxM2JlYjFlNjZkMGJfNVFjNHpGNVN5bE5OZWc0ZFhmdHhqNUlZV2NKZm9XNk5fVG9rZW46S1JxUWJtRnJ0b1N4UFF4dmxHa2NIME55bkRoXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

ç„¶åé€‰æ‹©ç”¨æºç è¿›è¡Œç¼–è¯‘,æ‰¾åˆ°å¯¹åº”çš„å‘è¡Œç‰ˆ,æ¯”å¦‚æˆ‘è¿™é‡Œæ˜¯Debian.

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjRhZTkyNjVlM2VhNWY3ODhlY2U0OTRmODc1MWY5N2FfZUhSdDRhYXp0aUlzR0J5blpoOTBYd3h6QnVlcjJzelJfVG9rZW46SXNJcGJnNnpob2Z3QWZ4a0RybGNjU010bk9mXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

æ¥ä¸‹æ¥ï¼Œä»ä¸‹å›¾è¿™é‡Œå¼€å§‹ï¼Œè·Ÿç€å®˜æ–¹æ•™ç¨‹ä¸€è·¯æ•²ï¼Œä½†æ˜¯æœ‰å‡ ä¸ªéœ€è¦æ³¨æ„çš„ç‚¹ï¼Œæˆ‘è¿™é‡Œéƒ½ä¼šå†™å‡ºæ¥ï¼š

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjAyMTdiNzA4ODBkZjg3YjA4MGRiYzgyMGUzYmRmM2ZfOHNhVld5ekhmR2d4dnBPNmp1Wk5QUllreEpoTTNQMmFfVG9rZW46SzRHZGJ4THV6b295U214SDZXbWN2UlUwbmQ5XzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

1.  è®¾ç½®åŒºåŸŸ
    

```Plain Text
locale  # check for UTF-8

sudo apt update && sudo apt install locales
sudo locale-gen en_US en_US.UTF-8
sudo update-locale LC_ALL=en_US.UTF-8 LANG=en_US.UTF-8
export LANG=en_US.UTF-8

locale  # verify settings
```

2.  æ¢æº
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTI3MmRmMDM0Yzk1YzZlNmE2MDgwMWJlMGM0ODc4N2NfWE9KUHY5eEdqMTcxWFJCM1ZiSmI3ZG1uVlZvZnJBN1VfVG9rZW46TWNEWGJhdjRwbzAyYmh4NUlMU2NWVEhUbjFkXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

çº¢è‰²éƒ¨åˆ†æ˜¯Ubuntuè¦åšçš„ï¼Œæˆ‘ä»¬æ˜¯debian,ä¸éœ€è¦åšã€‚

è“è‰²éƒ¨åˆ†æˆ‘ä»¬ä¸è¦ç”¨å®˜æ–¹çš„ï¼Œå®˜æ–¹æ˜¯å›½å¤–æºï¼Œæˆ‘ä»¬æ›¿æ¢æˆå›½å†…æºã€‚

å…ˆå»é•œåƒæºæ¢æºï¼š

https://mirrors.bfsu.edu.cn/help/ros2/

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MWE4YjE2NzU4OGIwMjJkZDNkODMzYWIzNjk5NWNmNGRfSTNQbENieWRCWWthTUtrWm9UdEZURkpYN3JvQzMyWmZfVG9rZW46UHk4amJpRTJTb2pYVzl4MmJNNGNRSjN4bnBiXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

æ¯”å¦‚æˆ‘æ˜¯debian12ï¼š

```Plain Text
sudo apt install curl gnupg2
sudo curl -sSL https://raw.githubusercontent.com/ros/rosdistro/master/ros.key  -o /usr/share/keyrings/ros-archive-keyring.gpg

echo "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/ros-archive-keyring.gpg] https://mirrors.bfsu.edu.cn/ros2/ubuntu bookworm main" | sudo tee /etc/apt/sources.list.d/ros2.list > /dev/null
sudo apt update
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWY4NTQxNzk0YmFjNjUwMTM4MmMxMzY0YTU2NzUxNGZfcGc0RmNaY2NWWm12Q3JZU2VoQ2dpVTZWRkFNOHRqQzFfVG9rZW46UGFzaGJuOU0xb3JMNzF4NnRUcWMzT2p0bm12XzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

3.  ä¸Šå›¾æˆåŠŸæ¢æºåï¼Œå†å®‰è£…rosçš„å·¥å…·ï¼š
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjVkMDA5NmY2NWVkNGU2MjA2NWI5OWJmZjMzMjZkOGVfQUdZM0ZSeXBRTTdUaVgxR0FjdTF2ekxnbEhTa3U1aWVfVG9rZW46UTNMQWJweEM4b2NkQXV4cGhSQ2NsVkl2bkVlXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

```Plain Text
sudo apt update && sudo apt install -y \
  python3-flake8-blind-except \
  python3-flake8-class-newline \
  python3-flake8-deprecated \
  python3-mypy \
  python3-pip \
  python3-pytest \
  python3-pytest-cov \
  python3-pytest-mock \
  python3-pytest-repeat \
  python3-pytest-rerunfailures \
  python3-pytest-runner \
  python3-pytest-timeout \
  ros-dev-tools
```

4.  ä¸‹è½½ROS2æºç 
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmUzMzMxNTVmMzZkOGM5ZmE2ZDM4Zjk0MTBlYmI0NjBfelhFdkRGWkZWemJhS2llYzhEMjIyUm5XQ2wwZHNoeUhfVG9rZW46SDFoQWJWcVdLbzFNOXh4MDRFQmM5Zld6bkllXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

æ‰¾ä¸€ä¸ªè¦å­˜æ”¾ROS2çš„æ–‡ä»¶å¤¹,å»ºè®®åœ¨/homeåˆ†åŒºæ‰¾,ç„¶ååœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹æ‰“å¼€ç»ˆç«¯.

```CMake
mkdir -p ./ros2_jazzy/src
cd ./ros2_jazzy
vcs import --input https://raw.githubusercontent.com/ros2/ros2/jazzy/ros2.repos src
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTEyZmVmMWI1OTYyODZiZTEyOGNlYjBkZjRhZGRlZWFfdlRmRlBaVjI2cU8wR1NNTVpMdzZFSTgxWlZCdzRrSjdfVG9rZW46QjRJbGJPMVhib0dOeFN4S1FTaWNwZjdhbmRiXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

5.  è¡¥ä¾èµ–ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆåˆå§‹åŒ–rosdepå¹¶ç»™rosdepæ¢æºï¼š
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTFmN2ZmY2Q0NTJlYjlmZDk2YWE1NzNjZmVlY2RiM2VfSlk4VG0zNE05dXliUDByV1dBeDZsQmhNbDUyc1NmRDBfVG9rZW46RkxSMGJpdk5Qb2JGakJ4bGg2YmNpMk5NbmNjXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

å›¾ä¸­çº¢è‰²éƒ¨åˆ†ï¼Œä¸è¦è·Ÿç€è¿™ä¸ªæ¥ï¼Œè¿™ä¸ªæ˜¯å®˜æ–¹æºï¼Œä¼šå¾ˆæ…¢å¾ˆæ…¢ï¼Œå»ºè®®ç”¨bfsuçš„ä»“åº“ã€‚

https://mirrors.bfsu.edu.cn/help/rosdistro/

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzcwZTNkODM2NTgyNWE2ZThlOWQ2NWQ3OWFkOTZkMGZfRTgzaTNjTDhqeTV0RENZVGNMZGtqNDE3N2d5RHNXRUJfVG9rZW46QVF4eGJvdlpSb1M2SUN4VWxXNmNsSGRubkZnXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2EwYTZmYWFmZDAwNTQ3ODc4NTA3ZTgyNmQ1YjBmYTFfbmdoVkJXb2toT1FCTGJoQ1N1S2dadVdkdEFTV3Bra3hfVG9rZW46VndQVWIwNE5CbzYzZkR4cVZkdmN1ZUtjbjZjXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

```CMake
# æ‰‹åŠ¨æ¨¡æ‹Ÿ rosdep init
sudo mkdir -p /etc/ros/rosdep/sources.list.d/
sudo curl -o /etc/ros/rosdep/sources.list.d/20-default.list -L https://mirrors.bfsu.edu.cn/github-raw/ros/rosdistro/master/rosdep/sources.list.d/20-default.list
# åŠ å…¥ç¯å¢ƒ
echo 'export ROSDISTRO_INDEX_URL=https://mirrors.bfsu.edu.cn/rosdistro/index-v4.yaml' >> ~/.bashrc
# åŠ è½½.bashrc
source ~/.bashrc
# æ›´æ–°rosdep
rosdep update
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzA1NGE5YjExYmJjMGJlZTEzMTM5M2Q4ZWViNTE2YzhfQlN6UHMzSXFxMWVIQlJUOWw3ZXc3emVBeDJraWpiYnJfVG9rZW46WHkwZGJaRmFDb043UDZ4cUNvN2NOVWRibndjXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGJiZjU4MzE1Yjk0MDMxY2JhNjU1MjFkNDkwMWZiODBfcEVlM3U0OVhMRW1FWm5xQjdaQVhoSjJmRFVGczhQbXFfVG9rZW46WXFYR2JFZGNEb3ZzY2F4dW5jMmN6QzZvbkZjXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

å‡ºç°ä»¥ä¸Šçº¢æ¡†éƒ¨åˆ†ï¼Œå°±æ˜¯æˆåŠŸæ¢æºäº†ã€‚å¦‚æœä½ ä¸æ¢æºï¼Œä¸‹é¢è¡¥ä¾èµ–çš„è¿‡ç¨‹å¯èƒ½ä¼šå·¨æ…¢ï¼ˆæˆ‘å…·ä½“æ²¡è¯•è¿‡ï¼ŒçŒœæµ‹ï¼‰ï¼Œé™¤éä½ ç§‘å­¦äº†ã€‚

```CMake
sudo apt upgrade

export ROS_PYTHON_VERSION=3

rosdep install --from-paths src --ignore-src -y --skip-keys "fastcdr rti-connext-dds-6.0.1 urdfdom_headers"
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmRjMjJjNjJmMzJiMTNmNjYyMjllM2ZmOGY1ODdmNjdfYUdvTWQxdkowQ08zU0JyZnlWM29zMmc0WTJtWjlhY0VfVG9rZW46VkFCTWJFV2tEb2JSME54SUp3d2NiVHM3bjJlXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

  

6.  ç¼–è¯‘ROS2
    

åœ¨ros\_jazzyç›®å½•ä¸‹ï¼Œæ‰“å¼€ç»ˆç«¯ï¼Œè·‘ä¸‹é¢å‘½ä»¤ã€‚

```Plain Text
colcon build --symlink-install
```

colcon buildè¿˜æœ‰ä»¥ä¸‹å‘½ä»¤ï¼Œå¦‚--packages-skipå’Œ--packages-selectç”¨æ¥è·³è¿‡å’Œå•ä¸ªåŠŸèƒ½åŒ…ç¼–è¯‘ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmM0NjYwMDYzODc2ZTFjNGI4MWExNTUwOTkyMDczZjRfbGxkRFo5YWlyWEkxN2tWQWVxT3hxTHA5ZnZqNTdMQVFfVG9rZW46QXI5VmJ5Nzc4b0lxRFN4ZVlGWGM2bHFLbkRlXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

ç­‰å¾…æ„å»ºå®Œæ¯•,ä¸‹æ–¹å°±æ˜¯æ„å»ºå®Œæ¯•ä¸”æ²¡é”™è¯¯çš„æ ·å­

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTVmZWQ1MWJhNTQ4MTYzY2M3NDIxYzY3YWQ0NjM1YzVfbmJBdTlXZkp6SkNlOTExbm1NOVhsNUZjeWh0bkt2TjFfVG9rZW46SHhmbmIxblJMb2plOU94WWU0TmNqalQwbnNmXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

7.  é…ç½®åŸºç¡€ç¯å¢ƒ
    

æ‰¾åˆ°ä¸‹æ–¹æ–‡ä»¶å¤¹,å¹¶å¤åˆ¶è·¯å¾„,æ¯”å¦‚æˆ‘çš„æ˜¯`~/UserFloder/Applications/ros2_jazzy`

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTI5NGY1NTIxM2E2MjMwOWZjZjg4OWU0ZTBhYzA4ZTBfV0hJclhQM1h1NVZzUWdVNHdkVHczbEs2Vm1MOWpma0xfVG9rZW46T1lXUWJUWXRGb3JoQll4Y0ZqWmM0R2Jibm5nXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

ä½¿ç”¨vimä¿®æ”¹bashçš„ç¯å¢ƒ

```CMake
vim ~/.bashrc
```

ä½¿ç”¨InsertæŒ‰é”®è¿›è¡Œè¾“å…¥

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTA3MmI3MDg1YjQ5MTYzMTYyZDA5OWE1MDQyY2QxYWRfWHlKVThFOFNiN1VpaThGbnBxb3pmbzN3eGgyVEVLTXpfVG9rZW46WDZsT2J1djFab1FNa1h4NEdxWWMwN3VKbkoyXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

```Plain Text
# é…ç½®ROS2ç¯å¢ƒ
export ROSDISTRO_INDEX_URL=https://mirrors.bfsu.edu.cn/rosdistro/index-v4.yaml
source ~/UserFloder/Applcations/ros2_jazzy/install/setup.bash
```

æ·»åŠ å®Œè¿™ä¸¤è¡Œå,æŒ‰ESC,ç„¶å`:wq`ä¿å­˜å¹¶é€€å‡º.

```CMake
# åˆ·æ–°å½“å‰ç¯å¢ƒå˜é‡
source ~/.bashrc
```

  

8.  æµ‹è¯•ROS2
    

è¯·å¾€ä¸‹ç¿»åˆ°**`æµ‹è¯•ROS2`**ç« èŠ‚

  

  

3.  ### Dockerå®‰è£…ROS2
    

[Dockeræ•™ç¨‹](https://sdutvincirobot.feishu.cn/wiki/KRSMwKmTvivWRskSRszc2vfNnoc)

  

3.  ## ROS2å®‰è£…è¿›é˜¶(å¯é€‰)
    

ä¸Šé¢åªæ˜¯å®‰è£…äº†æœ€åŸºæœ¬çš„ROS2åŒ…å’Œé…ç½®äº†æœ€åŸºæœ¬çš„ROS2ç¯å¢ƒã€‚

ä½ å®‰è£…å®Œä¸Šé¢çš„å†…å®¹åï¼Œå¯ä»¥é€‰æ‹©æ¥ç€è¿›è¡Œä¸‹é¢çš„è¿›é˜¶é…ç½®ROS2ç¯å¢ƒã€‚

ä¹Ÿå¯ä»¥ä¸å®‰è£…è¿›é˜¶å¾—ä¸œè¥¿ï¼Œå­¦åˆ°å•¥å†å®‰è£…å•¥å°±å¯ä»¥ï¼Œå½“ç„¶ä¹Ÿæœ‰æƒ³ä¸€åŠ³æ°¸é€¸çš„åŒå­¦ï¼Œæ‰€ä»¥ä¸‹é¢ä¹Ÿä¼šåˆ—å‡ºæ¥æœ€å¸¸ç”¨çš„ros2åŒ…å’Œç¯å¢ƒé…ç½®ä¾›å¤§å®¶ä¸€æ¬¡æ€§å®‰è£…ã€‚

https://index.ros.org/?search\_packages=true

1.  ### å®‰è£…è¿›é˜¶çš„åŒ…
    

ä»¥ä¸‹æ˜¯ä¸€äº›ROS2è‡ªå¸¦çš„å¯¼èˆªç®—æ³•å’Œä»¿çœŸç¯å¢ƒç­‰ç­‰çš„åŒ…ï¼Œä¸‹æ–¹å°†åˆ—å‡ºè¿™äº›åŒ…ã€‚

å¦‚æœä½ æ˜¯Ubuntuçš„è¯ï¼š

ä¸‹é¢çš„åŒ…ä½ å…¨éƒ½å¯ä»¥ç”¨aptå®‰è£…ï¼Œä¸ç”¨æ‰‹åŠ¨ç¼–è¯‘ï¼ï¼ï¼

  

å¦‚æœä½ ä¸æ˜¯Ubuntuçš„è¯ï¼š

ç°è‰²çš„æ˜¯ä¸Šé¢åŸºç¡€æ•™ç¨‹å®‰è£…è¿‡çš„åŒ…ï¼Œ

é»„è‰²æ˜¯éœ€è¦æ‰‹åŠ¨ç¼–è¯‘çš„åŒ…ï¼Œ

è“è‰²æ˜¯ä¸ä»…è¦æ‰‹åŠ¨ç¼–è¯‘ï¼Œè¿˜è¦æ‰‹åŠ¨ä¿®æ”¹ä¸€äº›æºç çš„åŒ…ã€‚

<!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
| ROSçš„åŒ…ï¼ˆéUbuntuçš„å‘è¡Œç‰ˆåŸºæœ¬éƒ½éœ€è¦æ‰‹åŠ¨ç¼–è¯‘ï¼‰ |
|:---|
| è½¯ä»¶åŒ…/åº“åç§° | åŠŸèƒ½æè¿° |
| ros-humble-desktop | ROS 2 Jazzyçš„æ ¸å¿ƒæ¡Œé¢å®‰è£…åŒ…ï¼ŒåŒ…å«åŸºç¡€å·¥å…·ã€å®¢æˆ·ç«¯åº“å’Œå¸¸ç”¨åŠŸèƒ½åŒ…ï¼Œé€‚ç”¨äºæ¡Œé¢å¼€å‘ç¯å¢ƒã€‚ |
| ros-humble-xacro | ç”¨äºç®€åŒ–URDFï¼ˆæœºå™¨äººæè¿°æ–‡ä»¶ï¼‰çš„å®è¯­è¨€å·¥å…·ï¼Œæ”¯æŒå®šä¹‰å¸¸é‡ã€æ•°å­¦è¿ç®—å’Œä»£ç å¤ç”¨ï¼Œæå‡å¯ç»´æŠ¤æ€§ã€‚ |
| ros-humble-joint-state-publisher | å‘å¸ƒæœºå™¨äººå…³èŠ‚çŠ¶æ€ï¼ˆå¦‚è§’åº¦ã€é€Ÿåº¦ï¼‰çš„ROSèŠ‚ç‚¹ï¼Œæ”¯æŒç¡¬ä»¶æ¥å£ä¸ä»¿çœŸç¯å¢ƒçš„æ•°æ®åŒæ­¥ã€‚ |
| ros-humble-joint-state-publisher-gui | å¸¦å›¾å½¢ç•Œé¢çš„å…³èŠ‚çŠ¶æ€å‘å¸ƒå·¥å…·ï¼Œå¯é€šè¿‡GUIæ‰‹åŠ¨è°ƒæ•´å…³èŠ‚å‚æ•°ï¼Œå¸¸ç”¨äºè°ƒè¯•å’Œä»¿çœŸå¯è§†åŒ–ã€‚ |
| ros-humble-gazebo-ros | è€ç‰ˆGazebo Classic |
| ros-humble-gazebo-ros-pkgs | è€ç‰ˆGazebo Classicçš„ä¸€äº›æ’ä»¶ |
| ros-humble-ros-gz | ROS2ä¸æ–°ç‰ˆGazeboä»¿çœŸçš„åŒ…ï¼Œæ”¯æŒROS 2ä¸Gazeboï¼ˆå¦‚Harmonicç‰ˆæœ¬ï¼‰çš„é›†æˆï¼Œç”¨äºä¼ æ„Ÿå™¨æ¨¡æ‹Ÿå’Œç‰©ç†å¼•æ“äº¤äº’ã€‚ |
| ros-humble-diagnostic-updater | æä¾›æœºå™¨äººç³»ç»Ÿè¯Šæ–­åŠŸèƒ½çš„å·¥å…·ï¼Œç”¨äºç›‘æ§ç¡¬ä»¶çŠ¶æ€ã€é¢‘ç‡å¼‚å¸¸ç­‰ï¼Œå¹¶é€šè¿‡ROSä¸»é¢˜å‘å¸ƒè¯Šæ–­ä¿¡æ¯ã€‚ |
| ros-humble-teleop-twist-keyboard | ROS2çš„é”®ç›˜æ§åˆ¶èŠ‚ç‚¹ |
| ros-humble-navigation2 | ROS 2çš„å¯¼èˆªæ¡†æ¶ï¼ˆNav2ï¼‰ï¼ŒåŒ…å«è·¯å¾„è§„åˆ’ï¼ˆå…¨å±€/å±€éƒ¨ï¼‰ã€é¿éšœã€è¡Œä¸ºæ ‘æ§åˆ¶ç­‰åŠŸèƒ½ï¼Œæ”¯æŒåŠ¨æ€ç¯å¢ƒä¸‹çš„è‡ªä¸»ç§»åŠ¨ã€‚ |
| ros-humble-nav2-bringup | Nav2çš„å¯åŠ¨å’Œé…ç½®å·¥å…·åŒ…ï¼Œæä¾›é¢„å®šä¹‰çš„å¯åŠ¨æ–‡ä»¶ï¼Œç®€åŒ–å¯¼èˆªç³»ç»Ÿçš„éƒ¨ç½²æµç¨‹ã€‚ |
| ros-humble-slam-toolbox | SLAMï¼ˆåŒæ­¥å®šä½ä¸å»ºå›¾ï¼‰å·¥å…·åŒ…ï¼Œæ”¯æŒå®æ—¶åœ°å›¾æ„å»ºä¸ä¼˜åŒ–ï¼Œå…¼å®¹æ¿€å…‰é›·è¾¾å’Œæ·±åº¦ç›¸æœºæ•°æ®ï¼Œé€‚ç”¨äºåŠ¨æ€ç¯å¢ƒã€‚ |
| ros-humble-cartographer | Googleå¼€æºçš„SLAMç®—æ³•å®ç°ï¼Œä¸“æ³¨äºé«˜ç²¾åº¦2D/3Då»ºå›¾ï¼Œé€‚ç”¨äºå¤§è§„æ¨¡ç¯å¢ƒã€‚ |
| ros-humble-cartographer-ros | Cartographerç®—æ³•çš„ROSå°è£…åŒ…ï¼Œæä¾›ä¸ROS 2çš„æ•°æ®æ¥å£å’Œå¯åŠ¨é…ç½®ã€‚ |
| ros-humble-asio-cmake-module | ç”¨äºé›†æˆASIOï¼ˆå¼‚æ­¥I/Oåº“ï¼‰çš„CMakeæ¨¡å—ï¼Œæ”¯æŒROSä¸­ç½‘ç»œé€šä¿¡å’Œå¼‚æ­¥æ“ä½œçš„å¼€å‘ã€‚ |
| ros-humble-serial-driver | ä¸²å£é€šä¿¡é©±åŠ¨åŒ…ï¼Œæ”¯æŒé€šè¿‡ä¸²å£ä¸ç¡¬ä»¶è®¾å¤‡ï¼ˆå¦‚ä¼ æ„Ÿå™¨ã€æ§åˆ¶å™¨ï¼‰è¿›è¡Œæ•°æ®äº¤äº’ã€‚ |
| ros-humble-pcl-ros | ç‚¹äº‘åº“ï¼ˆPCLï¼‰çš„ROSæ¥å£ï¼Œæä¾›ç‚¹äº‘æ•°æ®å¤„ç†ã€æ»¤æ³¢ã€é…å‡†ç­‰åŠŸèƒ½ï¼Œå¸¸ç”¨äº3Dæ„ŸçŸ¥ä»»åŠ¡ã€‚ |
| ros-humble-pointcloud-to-laserscan | å°†ä¸‰ç»´ç‚¹äº‘è½¬æ¢ä¸ºäºŒç»´æ¿€å…‰æ‰«æã€‚è¿™å¯¹äºä½¿Kinectç­‰è®¾å¤‡çœ‹èµ·æ¥åƒåŸºäº2Dç®—æ³•çš„æ¿€å…‰æ‰«æä»ªï¼ˆä¾‹å¦‚åŸºäºæ¿€å…‰çš„SLAMï¼‰éå¸¸æœ‰ç”¨ã€‚ |
| ros-humble-vision-opencv | OpenCVä¸ROSçš„é›†æˆå·¥å…·åŒ…ï¼Œæ”¯æŒå›¾åƒå¤„ç†ã€ç‰¹å¾æå–ã€ç›¸æœºæ ‡å®šç­‰è®¡ç®—æœºè§†è§‰ä»»åŠ¡ã€‚ |

<!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
| éROSåŒ…ï¼ˆåŸºæœ¬éƒ½å¯ä»¥apt,dnfå®‰è£…ï¼‰ |
|:---|
| è½¯ä»¶åŒ…/åº“åç§° | åŠŸèƒ½æè¿° |
| libpcl-dev | ç‚¹äº‘åº“ï¼ˆPCLï¼‰çš„å¼€å‘æ–‡ä»¶ï¼Œæä¾›ç‚¹äº‘æ•°æ®ç»“æ„çš„æ ¸å¿ƒç®—æ³•ï¼ˆå¦‚åˆ†å‰²ã€é…å‡†ã€æ»¤æ³¢ï¼‰ã€‚ |
| libeigen3-dev | Eigenæ•°å­¦åº“çš„å¼€å‘æ–‡ä»¶ï¼Œç”¨äºçŸ©é˜µè¿ç®—ã€å‡ ä½•å˜æ¢å’Œæ•°å€¼è®¡ç®—ï¼Œæ˜¯SLAMå’Œè¿åŠ¨è§„åˆ’çš„åŸºç¡€ä¾èµ–ã€‚ |
| libpcap-dev | ç½‘ç»œæ•°æ®åŒ…æ•è·åº“çš„å¼€å‘æ–‡ä»¶ï¼Œæ”¯æŒåº•å±‚ç½‘ç»œé€šä¿¡åè®®è§£æï¼Œå¸¸ç”¨äºä¼ æ„Ÿå™¨æ•°æ®æµçš„å®æ—¶æ•è·ã€‚ |
| libboost-dev | è¿™ä¸ªåº“æ˜¯ä¸€ä¸ªå·¨å‹åº“ï¼Œé‡Œé¢æœ‰å¾ˆå¤šä¸œè¥¿ï¼Œæ¯”å¦‚Linuxçš„ä¸²å£ï¼Œä½†æ˜¯ç”±äºROS2çš„ä¸²å£åº“å°±æ˜¯åŸºäºbooståº“çš„ï¼Œæ‰€ä»¥è¯¥åº“ä¸å®‰è£…çš„è¯ä¹Ÿå¯ä»¥æ­£å¸¸è·‘ï¼ŒROS2è·‘çš„æ˜¯å®ƒè‡ªå¸¦çš„booståº•å±‚ã€‚ |
| libogre-1.12-dev | Gazeboçš„æ¸²æŸ“å¼•æ“ï¼Œåœ¨debian12ä¸­ç”¨libogre-devæœä¸åˆ°ï¼Œå¿…é¡»ç”¨libogre-1.12-devæ‰èƒ½æœåˆ°ã€‚ |

ä½†æ˜¯ä¸Šé¢è¿™äº›åŒ…å¯ä»¥ä¾èµ–äºå…¶ä»–çš„åŒ…ï¼Œä¸‹é¢è¿™ä¸ªä»“åº“é‡Œæœ‰å…¨éƒ¨çš„åŒ…çš„ä»“åº“é“¾æ¥ï¼šï¼ˆå¾€åçœ‹å°±çŸ¥é“æ€ä¹ˆç”¨äº†ï¼‰

https://github.com/ros/rosdistro/tree/master

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzJiMTUxZDY1Y2ZhNjNhNTdlNDM0ZTE0MzJhMTdkMzhfalRVSmVjWWxWbkRHZ3kwcUY5OVgwSEx0Y3p6R1l4T3JfVG9rZW46STlxdmJ0aFZUbzJlNjF4QjBKY2NVM09nbnJnXzE3NjA5NTc3NzM6MTc2MDk2MTM3M19WNA)

  

  

1.  #### aptå®‰è£…æ–¹å¼ï¼ˆUbuntuå¼ºçƒˆå»ºè®®ï¼‰
    

```Bash
sudo apt update && sudo apt install \
    ros-humble-desktop \
    ros-dev-tools \
    ros-humble-xacro \
    ros-humble-joint-state-publisher \
    ros-humble-joint-state-publisher-gui \
    ros-humble-ros-gz \
    ros-humble-gazebo-ros \
    ros-humble-gazebo-ros-pkgs \
    ros-humble-imu-tools \
    ros-humble-diagnostic-updater \
    ros-humble-teleop-twist-keyboard \
    ros-humble-navigation2 \
    ros-humble-nav2-bringup \
    ros-humble-slam-toolbox \
    ros-humble-cartographer \
    ros-humble-cartographer-ros \
    ros-humble-asio-cmake-module \
    ros-humble-serial-driver \
    ros-humble-pcl-ros \
    ros-humble-vision-opencv \
    ros-humble-pointcloud-to-laserscan \
    libpcl-dev \
    libeigen3-dev \
    libpcap-dev \
    python3-colcon-common-extensions
```

2.  #### æºç æ–¹å¼ï¼ˆéUbuntuï¼‰
    

ä»¥debian12ä¸ºä¾‹ã€‚

1.  ##### é»„è‰²çš„åŒ…
    

ä»¥å®‰è£…ros-jazzy-xacroï¼Œros-jazzy-joint-state-publisherï¼Œros-jazzy-joint-state-publisher-guiè¿™ä¸‰ä¸ªåŒ…ä¸ºä¾‹ï¼Œå…¶ä»–çš„åŒ…ä¸€æ ·æ“ä½œã€‚

https://index.ros.org/?search\_packages=true

è¿›å…¥ä¸Šé¢çš„ç½‘ç«™ï¼Œåœ¨ä¸‹å›¾ä¸­é€‰æ‹©å¯¹åº”ç‰ˆæœ¬ï¼Œæ¯”å¦‚æˆ‘æ˜¯JAZZYï¼Œç„¶ååœ¨æœç´¢æ¡†ä¸­æœç´¢xacroï¼Œjoint\_state\_publisherï¼Œjoint\_state\_publisher\_gui

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDQ1NWI3MWZhMGJmNjIxYzk3NTRkN2Q3ZTk4MmY0OTJfeDlLZzN5ZVJZcVl1TnJpdnZzWXJ1REZBZXVOOHFkYU1fVG9rZW46TEhucWJXVGhMb2cxWEp4Y0pYT2NWR25WbnhQXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ¯”å¦‚xacro

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjY4NmY1YWM4ZTU1ZmFhOTg2MDhmMDZkNzMxZDA1Y2RfTDR2YzJRMFg1dTRqVktZaFhiWlh1eE45NzQ2Z3NVNXBfVG9rZW46TzQxZWIyRW1Zb3NZYkZ4RW9MY2NzcUV2bkVmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTNhY2ZhMTE5ZjQzZjI3NmQ1MDhjMzFkMjc2YWIxZDZfT2dRdzJjQ0dYckx4MzRFSDFqRU5oYmtOaGR4VTVQMkVfVG9rZW46WHpOS2JFb0Uyb2VvOUJ4NjlBMWNMbXZJbmdmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ‰¾åˆ°å¯¹åº”ç‰ˆæœ¬çš„xacroï¼Œç„¶åä»“åº“åœ°å€æ˜¯checkout URIï¼Œåˆ†æ”¯æ˜¯vcs version,ä½ å¯ä»¥ä½¿ç”¨git cloneä¸€ä¸ªä¸€ä¸ªå…‹éš†ä¸‹æ¥ï¼Œä½†è¿™æ˜¯å·¨éº»çƒ¦çš„ä¸€ä»¶äº‹ï¼Œæ‰€ä»¥æˆ‘ä»¬é€‰æ‹©ROS2æä¾›ç»™æˆ‘ä»¬çš„vcså‘½ä»¤è¿›è¡Œä¸‹è½½åŒ…çš„æºç ã€‚

  

é¦–å…ˆï¼Œè¿›å…¥è‡ªå·±çš„ros2\_jazzyæ–‡ä»¶å¹¶æ‰“å¼€ä¸€ä¸ªç»ˆç«¯

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDFmODVhMjRjNWU2NGI0ZWQ2OTM1YjA1NTVmMjkwMjhfVmRRQUExN0t6ZUUyWmd3SDFSd1VDSXRFTXlSY29vNHJfVG9rZW46WTZKT2JVUkpub2RSVzh4ZnpBZ2NvbjVxbjRiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¹¶åˆ›å»ºä¸€ä¸ª.reposæ–‡ä»¶ï¼Œæ–‡ä»¶åéšä¾¿èµ·ï¼Œæ¯”å¦‚æˆ‘çš„å«my\_ros2\_jazzy\_packages.repos

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmY1NTMyODE1ZmViMmE1OGRiNGExZTUzZTIxZTBkNThfckpTeHF0dWR3aXN3aWtZVFVEbXJKb25jSGwzOUlwRXRfVG9rZW46UHQ3cGJVd2Fab2hrWWp4akxLSGNUem9Obm1mXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ç„¶åç”¨vscodeç¼–è¾‘ï¼Œå› ä¸º.reposä½¿ç”¨çš„æ˜¯yamlè¯­è¨€ï¼Œvscodeå¯ä»¥è¯†åˆ«è¯­æ³•æ­£ç¡®æ€§ï¼š

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjYxZWVjZjM5YWFhOGQyZGNiYTMwN2Q5ZGU2NWE5YzNfcnc2dHJ6blh4Mkx0emE4Y1ZpWWpySVIzYURqS1p3RTJfVG9rZW46QXlDb2JYYVZIb0tlSHF4VHRjR2M4WExWbktmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å°†åˆšæ‰æŸ¥è¯¢çš„ä¿¡æ¯å†™ä¸Šå»ï¼š

```YAML
repositories:
  xacro:
    type: git
    url: https://github.com/ros/xacro.git
    version: ros2
```

ç”¨åŒæ ·çš„æ–¹å¼æ‰¾åˆ°å…¶ä»–åŒ…ï¼š

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmE2OWYzZmM1OWYwMzEwNjZiMmRhOThmYTk3ZTY5MDVfVWFlZEFsT21pZ2lndndUVE00YnVrMk5MQTVQazVySHpfVG9rZW46Q1pCQ2JsclozbzZRek54Q2JGbmNnTmlKbmJkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¸Šå›¾è¯´æ˜joint\_state\_publisherå’Œjoint\_state\_publisher\_guiå…¶å®æ˜¯ä¸€ä¸ªä»“åº“ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦å…‹éš†ä¸€ä¸ªä»“åº“ã€‚

ç„¶åvcs versionä¹Ÿå°±æ˜¯gitçš„åˆ†æ”¯æ˜¯ros2ã€‚

```yaml
repositories:
  xacro:
    type: git
    url: https://github.com/ros/xacro.git
    version: ros2
  joint_state_publisher:
    type: git
    url: https://github.com/ros/joint_state_publisher.git
    version: ros2
```

å…¶ä»–çš„åŒ…å¦‚æ³•ç‚®åˆ¶ã€‚

  

ä½†æˆ‘å…ˆä»¥è¿™ä¿©åŒ…åšä¸ªä¾‹å­ã€‚

åœ¨ros2\_jazzyç›®å½•ä¸‹çš„ç»ˆç«¯ï¼š

```Bash
vcs import src < my_ros2_jazzy_packages.repos
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWIwN2Q3ZDNkMzViNTliOTI4MDAwZTQwNjlhYjQzY2JfNjBoaUp5ZWFyWTY2MmZaRFE1SkNBNzZGVk5CcjFNdmtfVG9rZW46Qmo0OWJEQXJUb1JpdVl4MG40dmNibUZkbnhjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¯ä»¥çœ‹åˆ°ä¸‹å›¾ï¼Œå…‹éš†æˆåŠŸäº†

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWRhNmRkNmExMjY5Zjg0MmJhYWFjMWIzNmE1N2RhNGVfaGRUa0pIWFhWTlhqM3dXYVFreWp1VU53TnV4R0RvZlZfVG9rZW46S252QmJuaDAyb1Z3VzV4cEJ5V2MyY2RGbmhoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

æ¥ä¸‹æ¥è¿›è¡Œè¡¥å……ä¾èµ–ï¼š

```Bash
rosdep install --from-paths src --ignore-src -y --skip-keys "fastcdr rti-connext-dds-6.0.1 urdfdom_headers"
```

æç¤ºä¸‹å›¾å­—æ ·ï¼Œå³æ˜¯æˆåŠŸ

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDE0MTczMzkyNTlmMmUxMjJjMmViNTgzOWYzMmI1ZTBfNUhqdkdSSGRlekUyS3hCZEhlRXJucnNEWGFZN1RmWktfVG9rZW46TEJ5eWJWcWRab3NZRU54eXdoRmM4d0hNbjFmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å†ç¼–è¯‘å®‰è£…å³å¯ï¼š

```Bash
colcon build --symlink-install
# æˆ–ä»…ç¼–è¯‘ç‰¹å®šåŒ…
colcon build --packages-select xacro joint_state_publisher joint_state_publisher_gui
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTNiNTVhMjU5YmMyNmMwZTkzMTAzMzQ1MjM0YWNlMjdfbTJXS3JzYzlnOHVoRzFUQ0ZDb2t1aHV1dzJkdzdnNGVfVG9rZW46TmNDNGJpNjNXb1pCVDF4dzVFbmNSUERTbkdkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å…¶ä»–çš„åŒ…å¦‚æ³•ç‚®åˆ¶ã€‚

  

æµ‹è¯•ï¼š

```Bash
# é‡æ–°åŠ è½½ç¯å¢ƒ
source ~/.bashrc
# æ•²å‘½ä»¤
xacro
```

å¦‚ä¸‹å›¾xacroæç¤ºerrorå³æ˜¯æˆåŠŸï¼Œè¿™æ ·å°±æ˜¯å®‰è£…æˆåŠŸäº†ï¼

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjFhYjk3YTk3ZDc1Y2Q5OWE1NDMyZjM0ZjFmNDEyMWFfbFlmZjFaTHRubmV5RzljczJPRGh4b1R1RDRjakRRM0JfVG9rZW46WTRvR2JRSzlzb29GdTV4R3JBQ2N6MGRTbmhnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å…¶ä»–çš„åŒ…å¦‚æ³•ç‚®åˆ¶ã€‚

  

  

æˆ‘ä¹Ÿæ•´äº†Humbleå’ŒJazzyçš„reposçš„æ–‡ä»¶ï¼Œä»å®˜ç½‘å’Œdistribution.yamlä¸€ä¸ªä¸ªæ‰¾çš„ï¼Œä½ å¯ä»¥å…‹éš†ä¸‹æ¥ç›´æ¥ç”¨æˆ‘æ•´ç†çš„å°±å¯ä»¥ã€‚(ä½†æœ‰å¯èƒ½éƒ¨åˆ†ä»“åº“åˆ†æ”¯ROS2å®˜æ–¹ä¼šåšå‡ºä¿®æ”¹)

https://github.com/tungchiahui/ros-docker/tree/main/repos

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDlhNWQ4NGMzYjgwMDgyMTA0N2Q0ZDZjMjVjZGFlZjBfM3pvRTJBOWg2aVNHTFA0UHZwdTRZOVpsa2tMMENzellfVG9rZW46VkxnbWJlVk1Ub2Fzd3R4alcxNWNBV25ubjRjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

  

2.  ##### è“è‰²çš„åŒ…
    

è“è‰²çš„åŒ…å¤§ä½“çš„æ–¹å¼æ˜¯å’Œé»„è‰²ä¸€æ ·çš„ï¼Œåªä¸è¿‡è“è‰²çš„åŒ…åœ¨ä¸‹è½½å®Œæºç åï¼Œè¿˜éœ€è¦ä¿®æ”¹ä¸‹æºç é‡Œçš„æ–‡ä»¶ï¼Œå†è¿›è¡Œç¼–è¯‘ã€‚

  

å¦‚vision\_opencvçš„cv\_bridge:è¯·çœ‹ä¸‹æ–¹OpenCVç« èŠ‚çš„CV\_Bridgeã€‚

  

  

3.  #### å¸¸è§é—®é¢˜
    

1.  libogre-devæ‰¾ä¸åˆ°
    

Gazeboçš„æ¸²æŸ“å¼•æ“ï¼Œåœ¨debian12ä¸­ç”¨libogre-devæœä¸åˆ°ï¼Œå¿…é¡»ç”¨libogre-1.12-devæ‰èƒ½æœåˆ°ã€‚

  

2.  nav2\_mppi\_controlleré‡Œæœ‰ä¸ªè¢«å½“æˆç©ºæŒ‡é’ˆäº†ï¼Œè­¦å‘Šæˆé”™è¯¯äº†ã€‚
    

è§£å†³åœ¨nav2\_mppi\_controllerçš„cmakelistsé‡Œæ·»åŠ ä¸Š`add_compile_options(-Wno-error=null-dereference)`å³å¯ã€‚

  

3.  nav2\_system\_testsé‡Œæœ‰ä¸ªå†…å­˜é‡å è­¦å‘Šã€‚
    

è§£å†³åœ¨nav2\_system\_testsçš„cmakelistsé‡Œæ·»åŠ ä¸Šä¸‹é¢çš„å‡ è¡Œå³å¯ã€‚

```Bash
if (CMAKE_CXX_COMPILER_ID MATCHES "GNU")
    add_compile_options(-Wno-restrict)
endif()
```

  

4.  æœ‰çš„åº“åœ¨Fedoraæœ€æ–°ç‰ˆæ²¡æœ‰ï¼Œåœ¨æ—§ç‰ˆæœ‰ã€‚
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGI4YzMzNzY4MWY4NjgyMDY0Y2FmOWY5N2RiY2JhZWNfb2R0SzNjM3QxMTBzNWFpdWh1TFZsUHVSMmtndjZpWkpfVG9rZW46TFNZWGIyejh3b0djZE14Q0JrVWNpTDBxbm1lXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

https://src.fedoraproject.org/projects/rpms/%2A

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDU3Njk0ZjU0NmMwOGU0MTBlY2ZkMjIyNGNmYTM0MGFfSVNQSXA3QlBvV204S0ZyNmdyT2VHUURaN2Q1bnJpaEZfVG9rZW46U2tUQWJrWXhYb1lNNlh4QkZoNGNyZ1FUblJmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Plain Text
sudo dnf install python3-pykdl --releasever=41
sudo dnf install orocos-kdl-devel --releasever=41
```

  

5.  æœ‰äº›pythonåº“åœ¨æœ€æ–°ç‰ˆç³»ç»Ÿä¸Šä¸‹ä¸äº†ï¼Œå› ä¸ºpythonç‰ˆæœ¬è¿‡é«˜
    

å¯ä»¥ä½¿ç”¨pip3å®‰è£…è¯¥åº“

```Plain Text
pip3 install flake8-docstrings
```

ä½†åç»­ç¼–è¯‘çš„è¯ï¼Œéœ€è¦æŠŠè¯¥åº“åŠ å…¥rosdepå¿½ç•¥çš„ä¾èµ–ã€‚æ¯”å¦‚python3-flake8-docstringsçš„è¯å°±æ˜¯ä¸‹é¢è¿™è¡Œï¼š

```Plain Text
rosdep install --from-paths src --ignore-src -y --skip-keys "fastcdr rti-connext-dds-6.0.1 urdfdom_headers"
# æ”¹ä¸º
rosdep install --from-paths src --ignore-src -y --skip-keys "fastcdr rti-connext-dds-6.0.1 urdfdom_headers python3-flake8-docstrings"
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTY0MjQ1MDVkOTdiMzM4NDkwNzRlNGY0MTQ2YzFjNGRfVTFtdTdBSFRBSlQzTmp1MW4xbXJlNTl3aDZYTzhVYk5fVG9rZW46Vkg5SmJCQ01WbzlKUUh4UmMxN2NOTUlabjBtXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

  

  

2.  ### ç¯å¢ƒè¿›é˜¶
    

1.  #### Aptæ–¹å¼
    

```javascript
# rosdepæ¢æº
export ROSDISTRO_INDEX_URL=https://mirrors.bfsu.edu.cn/rosdistro/index-v4.yaml
# åŠ è½½ROS2ç¯å¢ƒ
source /opt/ros/jazzy/setup.bash
# é…ç½®ROS2çš„åˆ†å¸ƒå¼
export ROS_DOMAIN_ID=6
# é…ç½®æ–°ç‰ˆGazeboçš„èµ„æºï¼ˆè¿™é‡Œå…ˆæ³¨é‡Šï¼Œç­‰ä½ å­¦åˆ°gazeboå†æ‰“å¼€ï¼‰
#export GZ_SIM_RESOURCE_PATH=$GZ_SIM_RESOURCE_PATH:/home/tungchiahui/UserFloder/MySource/ROS_WS/gazebo_models:/home/tungchiahui/UserFloder/MySource/ROS_WS/ign_models
```

æ³¨æ„ï¼ŒGazeboèµ„æºåŒ…åœ¨ä¸åŒROS2ç‰ˆæœ¬å¯èƒ½å®çš„åç§°ä¸åŒï¼Œå¦‚åœ¨ROS2Humbleé‡Œæ˜¯IGN\_GAZEBO\_RESOURCE\_PATHï¼Œåœ¨ROS2Jazzyé‡Œæ˜¯GZ\_SIM\_RESOURCE\_PATHã€‚ï¼ˆå¾€åçš„ROS2ç‰ˆæœ¬ä¼°è®¡éƒ½æ˜¯GZ\_SIM\_RESOURCE\_PATHï¼‰ï¼ˆè¯¦è§ä¸‹æ–¹Gazeboæ•™ç¨‹ï¼‰

  

2.  #### æºç æ–¹å¼
    

ä¸aptæ–¹å¼ç›¸åŒï¼Œä½†æ˜¯éœ€è¦æŠŠåŠ è½½ROS2ç¯å¢ƒçš„é‚£ä¸ªsetup.bashè·¯å¾„è®¾ç½®ä¸ºä½ çš„ros2å®‰è£…è·¯å¾„ã€‚

```Bash
# åŠ è½½ROS2ç¯å¢ƒ
source ~/UserFloder/Applcations/ros2_jazzy/install/setup.bash
```

  

4.  ## æµ‹è¯•ROS2
    

1.  ### ç¤ºä¾‹1
    

æ‰“å¼€ä¸¤ä¸ªç»ˆç«¯ï¼Œå¹¶åˆ†åˆ«è¾“å…¥å¦‚ä¸‹ä¸¤ä¸ªçº¢æ¡†æ¡†é‡Œçš„å‘½ä»¤

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjAwMmE0ZDQ2ZmUyNzY4ZjcxZDRhNjMzYWM2ZjJiMGFfOVVmUGRMZ28yVjVCdnRZU0hEeHkyUEZSVmVySmcwNG9fVG9rZW46RTh0U2Jaa0Jvb2tuWEt4enVXVWNpV2ppblRlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¼¹å‡ºå¦‚ä¸‹ç¨‹åºï¼Œåˆ™æµ‹è¯•æˆåŠŸã€‚

å¯¹ç€ç»ˆç«¯æŒ‰Ctrl+Cå¯ä»¥ç»ˆæ­¢ç¨‹åºã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmZlZjA0Mjg4MTJmMTFkYmQxZDhkYzllNDZjZmIyYTZfRTFydm9SWGtDOTNSWXBWQWozckFOWTl3eGZGMzNNMzhfVG9rZW46U3hDMGJVMmt4b3huQ0p4VTdNQ2NEdE1pbnljXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

2.  ### ç¤ºä¾‹2
    

ä¹Œé¾Ÿä½œä¸ºROSè€æµ‹è¯•é¡¹ç›®äº†ï¼Œå¿…é¡»æ‹‰å‡ºæ¥æºœæºœï¼

åŒæ ·å¼€ä¸¤ä¸ªç»ˆç«¯ï¼Œå¹¶åˆ†åˆ«è¾“å…¥ä»¥ä¸‹å‘½ä»¤ã€‚

```Bash
ros2 run turtlesim turtlesim_node
ros2 run turtlesim turtle_teleop_key
```

é¼ æ ‡ç‚¹ä»¥ä¸‹çº¢è‰²éƒ¨åˆ†ï¼Œç„¶åé€šè¿‡å°é”®ç›˜çš„æ–¹å‘é”®å¯ä»¥æ§åˆ¶ä¹Œé¾Ÿè¿è¡Œï¼Œå¦‚æœæ²¡æœ‰å°é”®ç›˜ï¼Œå¯ä»¥å°è¯•GBVCDERTç­‰æŒ‰é”®æ“æ§å°ä¹Œé¾Ÿã€‚

åŒæ ·åœ°ï¼Œå¯¹ç€ç»ˆç«¯æŒ‰Ctrl+Cå¯ä»¥ç»ˆæ­¢ç¨‹åºã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2E3YWY5YTU1MGVhNzlhMjJkMmQyOTE2Mzg5NzFjNmZfTG1SZzI3aHdSU1pabjFnaG1Jc0tqdjVJS3RLQXZHajlfVG9rZW46S0xxd2JaSmpxb2pKbzV4ZVpqSWNiRVdIbnZjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

5.  ## å¸¸è§é—®é¢˜
    

1.  ### Rviz2é—ªçƒ
    

å¦‚æœ2K+çš„ç”µè„‘å®‰è£…å®Œrviz2æœ‰æ˜¾ç¤ºé—®é¢˜ï¼Œå¯ä»¥åœ¨.bashrcé‡ŒåŠ ä¸Šä¸‹é¢çš„å†…å®¹ï¼Œç”¨æ¥è®©qtä¸ç¼©æ”¾ã€‚

```Plain Text
export QT_AUTO_SCREEN_SCALE_FACTOR=0
export QT_SCREEN_SCALE_FACTORS=[1.0]
```

  

  

2.  # å…¥é—¨æ“ä½œ
    

1.  ## ç®€ä»‹
    

  

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjI0MmIxN2I3MTdiMjc2ZmNiYWZjNGMwZjg0YjQ4NTRfWGl2c0lXdm5WY21Cck9MbkNzMWhZQXpub1djdjIzNjBfVG9rZW46UG9DSWJXdkNob2pHdjZ4M1dBVmNNeVRlbkFkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTgzYjZiNTFmYWNkNzU3MmRiYmUyNmE5NzI4YmMxZWVfZ25yYVZaMlU3d0lxYUROczltdnROYUhPT2g4a29nczRfVG9rZW46R2lOQ2JkVjd3b3lXY2x4bzFIeWNHOEVqbmIyXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MWU5YTdjY2I3Yjg0OGE5YTY5MzExZjhmZTg1OGRmMGVfc0MxNDNXNW54QzNaSTNvalE2NlA0M2V5b3B0dGpubkNfVG9rZW46RGR0WmJZbHdtb25WeVh4Q09mc2M4bGs2bkFiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmJkYzVjOGI2ZjJjZjI2ZTA1YzQ3OTY5NDI1NDIyOGJfRTcxNml1WnpkY1E0eU5oelRWMndkVkxYNHZ2Z3FGMzdfVG9rZW46U0VIZWJjZmxDbzhGVmF4MlZsdGNPRjAybk9nXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGI4ZWQyMzE0ODNjZmZlZjAyODQxN2NlZTYxMGFiMDBfMGlVWkZieGJsaUhZSEdCYVJ5NHpiekdaVmhkTjJrU2FfVG9rZW46S3hKNWJFY3Nab28wcDB4TDg1dmNlc3NnbmVnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

2.  ## ç»ˆç«¯ç¯å¢ƒæ­å»º
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTgzOWMyYjYxMTc3NDE5NjQ0MDZlZWRjYTVmZjI1YTdfTUFUaGJkcjFmS0lkakoyY3ZXT2ZtUUtEd3BXQ1JqTDVfVG9rZW46VUpWZWJGWGdIb2dNU1B4dkM3NWNCWjJ2bjJUXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¦‚æœåœ¨ä¸Šæ–¹å®‰è£…ROS2çš„æ—¶å€™ï¼Œå·²ç»å°†è¯¥è¯­å¥æ·»åŠ åˆ°`~/.bashrc`äº†ï¼Œåˆ™ä¸å¿…å†è·Ÿç€è¿™æ­¥æ“ä½œäº†ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDY0NTk2MDFiZjVlZTJjMjU0NDcxYzE2YTg0NWViMjBfVGtmOGFZQ0tLUVc5RXJTQnpwelAxSDBKZVJrMlRYTWxfVG9rZW46STJlaGJxQ2c3b1FDTnd4WDc4SWNWMXlwbmxiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Bash
source /opt/ros/humble/setup.bash  #å°†ROS2ç¯å¢ƒå˜é‡é…ç½®åˆ°å½“å‰ä½ç½®
echo " source /opt/ros/humble/setup.bash" >> ~/.bashrc    #æ¯æ¬¡å¯åŠ¨ç»ˆç«¯éƒ½ä¼šè¿è¡Œè¯¥å¥
```

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzhkNzk4ZDBjNmUzNjM2NzA2YmRhYTdlYjYzOWJiZmZfZGIyNDFZQTdjUkZJZVh5ajJZeURjN0VtdzMzUlNvS3NfVG9rZW46SFNWa2JDaWdLb2JHbzR4c2hZV2M0VDhpbkJnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Bash
ros2 run demo_nodes_cpp talker
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2ZlMzFjNzkzNzA2MmFjY2M0MjI2N2ZiMTkzNjE0NDBfazdkMlF5azI1ZFI5ZGRCS29hdHZsdnAzbmRQcldTT1BfVG9rZW46TUdyTGI3NlVrb0NUaXF4SjdMYmNVNnZKbnNoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTM0NjE3NmExNThlZWMzZThhMzA4NWNmMWJkNzVlOTVfaEJOY1RmYlJnS2pZbENBNUIyaDBybXNnQmVXT0tVVXJfVG9rZW46Q21DQWI3a1djb2d5RDB4M1JYaWNYTXBmbjljXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ç”¨ctrl+cæ¥è¿›è¡Œå–æ¶ˆç¨‹åºè¿è¡Œ

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzcxNmZlN2QxNDAzNTY0YjQ5Y2I3YzI1ODk1ODVkYTVfTE5Pb25TM0J0OGdUWU85dmtIU1ExNkRJV0xnY21uaGRfVG9rZW46UUM5bGJiMVJOb3QzUXV4S3lNYWNsTUllbmtkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Bash
ros2 run demo_nodes_py listener
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmU5MGRlY2JlODJkMmNjYThhMjYzNDM0NThjYmVjZmRfRUtlRFRPUVQ5azY4b0gzWGtUVWxPdnZJMGdDR3VxWUdfVG9rZW46VmdYTWJFUHRWb0JFRUt4bzZHd2NldTRRbjdiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTFlNWY4NGQ3YzdkZWRlMWZlMWIwZjEyYjc2NmZmMWVfZ0pwQVFBa1EycnR5VEw0ZUt2djNINlFBa0R6RDZteUVfVG9rZW46V0Zic2JpQUFSb05wVkV4cG9mTGNTbktJbnNWXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

```Bash
ros2 run turtlesim turtlesim_node
ros2 run turtlesim turtle_teleop_key
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTc1YzRmNGVjMjliNzQzZDJiYWU5YTIwMTYyMTNiN2FfQUVFMEttTGdxcWN3eXBNU0Via0JXZEppZExoRDBwRnZfVG9rZW46R29HbWIycXhmb24weWJ4WEs2V2M4MTBJblVIXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

3.  ## å‘½ä»¤è¡Œæ“ä½œ
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Yjk3ZTQ3ZDI3YTkwNDExNDkzOWI2NWM0NGQxNTQ2NGNfd2JxVnFkOUZua3dOaGJwRkdEdWM5NElHbkhtQWZ3MmVfVG9rZW46TzhIM2JkV1V1b1dPckN4R3VwOWN4bWxZbnVZXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

mkdir -p æ–°å»ºæ–‡ä»¶å¤¹

rm -R é€’å½’åˆ é™¤ï¼ˆåˆ æ‰æ–‡ä»¶å¤¹åŠé‡Œé¢åŒ…å«çš„æ–‡ä»¶å¤¹åŠæ–‡ä»¶ï¼‰

touch æ–°å»ºæ–‡ä»¶

rm åˆ é™¤æ–‡ä»¶

cd ..é€€å›ä¸Šçº§ç›®å½•ï¼ˆcd ç‚¹ç‚¹ï¼‰

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODYzYTRlYjMzYjZhZDExYTI1MDg4M2Y5MTgxZjdlZjdfWE93cmozY3lWanFsQVl0bE81b3pxUng1YmVLaWZjemRfVG9rZW46Ums2OWI2bjhRb0RlTFh4SHNTY2NkS1RobjhnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2UzYzZkMTg4NTY2ZjZlNzJlZWVjNjQ1Zjc3NzM1NzlfamZHZk1DTXFzOFZGU08wV3JEUUZxTEMxWkdGSk9OWEdfVG9rZW46TWUzaGJ3dGFQb3hSY3Z4eHF5RWN2alN6bnZnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¼šå¼¹æç¤ºä¿¡æ¯ï¼Œå‘Šè¯‰æˆ‘ä»¬åé¢è¦è·Ÿçš„å‚æ•°

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWEzOTQwYTlkZjM4OWUzYzY3NWQzMzEzYTdlOGNhNzNfamJ6REFlU1hUdGRVNlJBR1dCbFJFS0hoT1dVQjNOZ3ZfVG9rZW46S1hiUWJOcUVibzNDVkp4VHRhMWNBTDEwbkdiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDEzNTgxNzBjMjQ3ZWFjMzc2ZmU4NTA1NDUwMjQ2ZDhfc1lucjdCMGN2anVQbzZpUG1wRmNaVWJHbDdjMDAyRG9fVG9rZW46SnNOaGJ3SnFTbzhCaTB4TW0wd2NPOW9SblBkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ros2 node listä¼šæŠŠå½“å‰ROS2æ­£åœ¨è¿è¡Œçš„èŠ‚ç‚¹åˆ—å‡ºæ¥

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTM3ZTljZmE1ZWY0Yzc0ZjQ0MDlhYzJhY2NkYWFmMmRfRThrTEttSkJNdHJPVURUbzYxQ0ZaejNjZkwzS09WOHZfVG9rZW46RXVuWGJ3bzAzb3FNa3l4NXJjNWN4UTE4blliXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDA3NmI5OTY4YTEyNGIzYjgxYWYwMzRmNGM0NTM3NDBfaFZOS0ZyelRnWWx2eWROMXZhS1hDeVplVnFoT3ZYcURfVG9rZW46T09URmIxWG1nb0xPdWR4MG5nMGNNbFFJbnBiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ros2 node info + /èŠ‚ç‚¹å å¯ä»¥æŸ¥çœ‹ç›®æ ‡èŠ‚ç‚¹çš„è¯¦ç»†æƒ…å†µ

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODE4MGRlOTI2N2MzOGJhMDAyZDdlMWVlNGMyZmMwNjdfN29xRGgxWXFlNXRBdmN0b2dWUUpQSm9YaEZ4MmpJMDBfVG9rZW46VU4wWGIzT1RIb05iOEp4OWVkUWN6bEUxbnFmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¼šå¼¹æç¤ºä¿¡æ¯ï¼Œå‘Šè¯‰æˆ‘ä»¬åé¢è¦è·Ÿçš„å‚æ•°

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDA3MGE0MzVmMGZiOTQ3ZWFiNTE3ZDFkZDViYWNkNWZfOURuWXdVaTFHSGk1WTR2UjMyVVdTeXY0dkNyeEtWbWFfVG9rZW46QUNidWJtaXZQb0NZc2V4eVZTRGMxSWdBbkljXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODljYjdlYzIzNzc5OTlhYTU3ZTQ2OTZhNmIyNjI2NmFfdlVqZXFMT2NXS2Z4TG1jemJQR3pRS2owMURJeUpyaDhfVG9rZW46VGNheGJUcFR0b3JnTjZ4eTl3SGNKeWpObkpkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWIyNWVlNTFmM2Q1ZmJlZmEwYTY0MmFmNDU4MGJhMDVfMXNKNnN6SDlFWndiTHZCWTdzRmNaWUlMZG9QR0VBRlJfVG9rZW46T2M4ZGJuUmVXb295RTF4U0ZkV2Myb2dWbnViXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¯ä»¥é€šè¿‡è¯é¢˜æ¥æ˜¾ç¤ºæœºå™¨äººè¿åŠ¨çš„çŠ¶æ€

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzFkYzNmZTAxNWNhMjA2YmFiZGM4ZTgxY2NlMzE1YWFfdnN6ZU90YWJiNUJGdFRZWWJPOUJyNUhjV3pISFZwV3lfVG9rZW46QmQxemJrZmpJb1N6ekh4Z25yQmNTc3BObm9lXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Bash
ros2 topic pub --rate 1 /turtle1/cmd_vel geometry_msgs/msg/Twist "{linear: {x: 2.0, y: 0.0, z: 0.0}, angular: {x: 0.0, y: 0.0, z: 1.8}}"
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTZhOTc4MDU1Nzk3ZDI0MWY4MDZkY2MyMmVkMjdlMzBfYUllNXg5aHQ0RGRXQ0RCamFFWlFFaUJaeFNvOG9idDBfVG9rZW46Vlp3RGJvTEU2b2VjV0p4REt5RmNoZXRhbmdoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTE0ZWVlNzYzNTJjODBlNWMzYTg4ZjhmZDA2ZjhmOGVfUlBnMTFYS0U0ajREMU9rRGdXb0tUUVl0cnk2RnAyeFRfVG9rZW46VHdvV2JkTDBub3lpMDd4SHBremNiajFubndMXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Bash
ros2 service call /spawn turtlesim/srv/Spawn "{x: 2, y: 2, theta: 0.2, name: ''}"
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTRmNmZjM2E3OWFiMmFiN2I0YTRmN2JhOTYyMmYzY2RfdWxGR2R1UHl2NENoVElhdlh5SEc3bGdVcnVMR2YyVWdfVG9rZW46T1lQOGJwb1FQb1NHUVl4dGpXamNiQ1pmbmZlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NGI0ZGZmYTk2MTM5MDMxNzhkZmNjMTFkYmJiMDE4NTFfeEo1ZWZSTExic1M4dzIwZEx6eEFNVVR2U2pPRkYwemRfVG9rZW46VW81SWIxTldyb0dVODl4Ym1HYmNYc1lrbkhNXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTMzODUyZTBkYTZiZTA0ZjViYjBiZTMyNzk1Nzk1MjlfU2VIZ2lSeHd0dUJTSEtCVE1PMkxweVlhOGgzend4dHVfVG9rZW46UXp3VGJFUXJDb3pIY2t4NzhCZWNPYlRSbnRjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Bash
ros2 bag record /turtle1/cmd_vel
ros2 bag play rosbag2_2022_04_11-17_35_40/rosbag2_2022_04_11-17_35_40_0.db3
```

ros2 bag record + è¯é¢˜

æŒ‰Ctrl+Cç»“æŸï¼Œç„¶åå½•åˆ¶çš„æ•°æ®åœ¨å½“å‰ç»ˆç«¯çš„ç›®å½•ä¸‹

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjY0YTA2NjM5MmJhYzdlMzQ3NjYwZmJiMzM4OTc4N2RfNWFWS05vdE1hQmRnZDJJS3hUTjJMdEhKNFZXUlhUdFpfVG9rZW46UTRTdGJ4UEhKb3pXYW54clA2T2M0dlF3bkYwXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¦‚ä½•å»å¤ç°å‘¢ï¼Ÿ

ros2 bag play + æ–‡ä»¶å¤¹åç§°

  

4.  ## ROS2 HelloWorld(C++)
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Yjc2YjFjYjQxYmU2ODk1OWY5MDRmYTg1MzQyN2M4MTlfOFVNRDNpT1NXZk5rc3h1aE43M0NSSkZwaURQV0RwTXBfVG9rZW46VGcwOGJtRTJqb3FVY2V4aVBFd2NOa0ZibldjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDNlMjRjMmYwZTA4OTVlYjVhMmJiMGQzNWZlMjJlZmVfUUVoTHZlMlYwdXd2UFFTcXBRU0NKV09QbnBNV3JZS1BfVG9rZW46TndHbmJEelNLb1dPTEZ4SHc0M2NRenJJblBnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2NjZWQ5YWMyYTRlMWNjMjI0MWQzMmVjZDU1ZjNlOGNfekI4Rmo5NWVxd3YwZHJoMGZoRnc4aGo5MlNPaTVPRmxfVG9rZW46VG83TWJsd2d0b2Y0SHp4VklHRmNGS2tpbjVmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

1.åˆ›å»ºåŠŸèƒ½åŒ…

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzdkYTM4OWMzNTQyNzhmNjFkMGM5OWRkZjc4MWZkNmZfY25ZMkRINHJCMDcwS1pNazRHYTluSmQ4QUVXU0djQU9fVG9rZW46VkRsR2JiZXdEb3lKcVF4UEt0ZGNKdXRGbjRLXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmJkMGEyM2FjMTczYTkzYTFkNDA1Y2JmZmZjMjU5ODFfYXNLUEdYempoZjF0WE9NRkxTaWFlWGdaMG96M2VFVnNfVG9rZW46T1kwaGJMTmdYb09lUkZ4UEg3VWMyTEdMblJlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æŒ‡ä»¤å°±æ˜¯åˆ›å»ºros2çš„åŠŸèƒ½åŒ…

ros2 pkg create + åŠŸèƒ½åŒ…å + --build-type(æ„å»ºç±»å‹) + ament\_cmake / ament\_python + --dependenciesï¼ˆä¾èµ–ï¼‰ + rclcpp(ROS2çš„CPPå®¢æˆ·ç«¯) + --node-nameï¼ˆèŠ‚ç‚¹åï¼‰ + èŠ‚ç‚¹å

```Bash
ros2 pkg create pkg01_helloworld_cpp --build-type ament_cmake --dependencies rclcpp --node-name helloworld
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDIzN2NhZjQ5ODEzMzhmNTBiMzQ1YjZiNjg3NGViYTZfUzhKZHdNMzlwVGsxWFQwSGhUUGZPVmpsZk14RzRmVVRfVG9rZW46SVkzOWJtZ0Rwb25GVEN4SzJYaWNDM3plblVkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmVjNWQwYmFiYjhkMTE5YzQ5MDgwM2QyNDg3MmQ5NzFfSGFaNlJtSnBVd1hHS3BLQlc0ZnlMZnhpZFRQOUVzTk1fVG9rZW46RU11OWJSWHdOb0ZST2t4aEljNGN4MUczbk1iXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æºæ–‡ä»¶è‡ªåŠ¨ç”Ÿæˆäº†ï¼Œæ–‡ä»¶åå’Œæˆ‘ä»¬æŒ‡å®šçš„node nameæ˜¯ä¸€è‡´çš„ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MWUyMGYxZTIwNzJkZjZiNzI2YzE2NjYyMDM5M2ZmNWFfMm5lUzZXd0wzdDFJQU4zUjl2UDZkUUdVRUl3OVhIZmFfVG9rZW46WkF5QmJ0UVdibzR6cjN4WUpkT2NBNm9FbnplXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„å†…å®¹ï¼Œä½†æ˜¯å’ŒROS2æ²¡æœ‰ä»»ä½•å…³ç³»ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODYyNTM5YzJjMDFlMjFmNjIxMTk4NmZiYzE3ZGRiMTdfYTBkV2QyOXpWRFpIMmxVZVhlbXJ1elo1bkNtenJvZURfVG9rZW46SXRUMGIwVGR6b0wzeHN4TXN4VWM1YzBkbjNmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjEyNDIyMDRhNTU0MTcyYzdiZDhlNjJhZGIzNTgwODZfSjV6OFNNcWxSZDJzWkVOOEpDa21sRG9vU3hyTFJpZ0JfVG9rZW46TGluVWJhMXMxb01MZ0l4Q2hCM2N4ZURPbmpoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDkxMjc5OGUxZDhhN2M1OWUxZDZjMmQ3ZTkxNWVkMTFfS004dnoxVU4xMlhYU1E2U3pmajM5OGh2YkVJQ01TUkhfVG9rZW46RmNLWWIyb0VZb2VqMjB4dUZIUGNiaElyblRmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¦‚æœä¾èµ–çš„åº“ä¸æ­¢è¿™ä¸€ä¸ªï¼Œåˆ™å†å›è½¦ï¼Œ

xxx

å†æ·»åŠ ä¸‹ä¸€ä¸ª

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODI4ZmUxYzBkNTFmNjhmOGY0YWE3ZmNhOTU4ZDAxNzFfaGtLYkZPQnF6OXpIbzYzQ01FMVRsTGlPVzF2UmYyMFJfVG9rZW46SVBsU2I3NW5Sb3BtaGd4UUVVS2NDT2p5bkRiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

10è¡Œæ˜¯æŸ¥æ‰¾åŒ…

12è¡Œæ˜¯æ·»åŠ å¯æ‰§è¡Œçš„

add\_executable çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ å¯æ‰§è¡Œæ–‡ä»¶çš„åå­—ï¼ˆé»˜è®¤å’ŒèŠ‚ç‚¹åä¸€è‡´ï¼Œé»˜è®¤å’Œæºæ–‡ä»¶åä¸€è‡´ï¼‰ ç¬¬äºŒä¸ªå‚æ•°æ˜¯æºæ–‡ä»¶çš„åå­—

17è¡Œæ˜¯ä¸ºæˆ‘ä»¬çš„å¯æ‰§è¡Œç¨‹åºæ·»åŠ ä¾èµ– æˆ‘ä»¬çš„å¯æ‰§è¡Œç¨‹åºä¾èµ–äºRCLCPPè¿™ä¸ªåº“

22è¡Œæ˜¯è¦ä¸ºæˆ‘ä»¬çš„å¯æ‰§è¡Œç¨‹åºè®¾ç«‹ä¸€ä¸ªå®‰è£…ç›®å½•ï¼Œåˆ›å»ºåœ¨äº†å½“å‰åŠŸèƒ½åŒ…ä¸‹çš„libç›®å½•ï¼Œä¹Ÿå°±æ˜¯ å·¥ä½œç©ºé—´å/install/åŠŸèƒ½åŒ…å/lib

ç¼–è¾‘é…ç½®æ–‡ä»¶ä¹‹åç¼–è¯‘ï¼Œç”¨cd..è¿”å›wsç›®å½•

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmFkOTYzNGQ1MmIwZjYwNDljMTYyYzgzMGQzZjI2MTBfemYxc0prZzR0MDlQUHp0NlFybmllZkRjbXZ3enl4eGVfVG9rZW46REdZcmIzSGpKbzlKM254MWI1NmNoektrbnhmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzcwNTYwMzlhZjhiZTE5OTY5OTM3Mjc0MDgzZTQ4MTZfd2ZzMFR3YnliV0ZUdG1lMDVVQ3ZKNVVQeGZXWjhhOExfVG9rZW46R09pWGJ5RE1tb1poT2F4UWl5WWNjRnB2bjBiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å›¾æ ‡ä¸ºç»¿è‰²ï¼Œæ˜¯æ²¡æœ‰è­¦å‘Šä¹Ÿæ²¡æœ‰é”™è¯¯

æ˜¯é»„è‰²çš„åˆ™æœ‰è­¦å‘Š

æ˜¯çº¢è‰²çš„åˆ™æœ‰è‡´å‘½é”™è¯¯

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzQ0MTJjN2ViOTlmZTQwMmFmZjM5Nzg5NDRmMzA0NTRfTHk2OUp2VUJ5R1pmYkhTdW5XcWZNZ2R5NXhlc2VsZ1pfVG9rZW46SmJja2JxeW1Hb3dNc1d4bTZYZmMzY1dSbkZlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¯æ‰§è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶çš„è·¯å¾„

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGIyYWQwZTU2NjQzNTE1MTQ0OGFhN2ZlMGE3OTA4YzVfd0VLQVZiZ1lGSzA4ZEJON3lEV0k0UVlqejU5NlM3bEZfVG9rZW46TU55R2JwN0xhb0kwcUJ4WXYyNWN1eXl6bjBlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Bash
source install/setup.bash #åˆ·æ–°ç¯å¢ƒå˜é‡
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWUyYmE0MTRjODBlNjEyYzZkMDFlZGIzZmFlMzI0NWFfM3N5OEtrbTRpaU4ySUFJMVdIZDEwTUFmRmhEaTJGTlFfVG9rZW46UzBOZWIxRkRCb3BXd2p4OENiVGMzOVpQbnhnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Bash
ros2 run pkg01_helloworld_cpp helloworld
```

ros2 run åŠŸèƒ½åŒ…åç§° å¯æ‰§è¡Œæ–‡ä»¶å(é»˜è®¤å’ŒèŠ‚ç‚¹åä¸€è‡´)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Njg5MGQ2YjQ3N2ZjNjY4MzUzOTgyY2IzMDQzOTYyZmRfSlBnY1dmTklmQUdiOW84cE9JbGpSZm9DSXRTdTYxeFVfVG9rZW46Vzg2NmJMUkpWb0hSSzZ4UHRBNmN4NmJObkxoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ç¼–è¾‘ROS2 C++æºæ–‡ä»¶ï¼š

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmNmZjQ2MzExMGUzY2U3OTE5YjM3ZjdjODYwNjlkOTZfUzlxbzIxSHgzNWYzVnd6YmRPZlVhenF2aTBSOFNNVDhfVG9rZW46T1cwOGJlM1NQb2pBNzh4Uk56UGNDenNPbkNkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```C++
#include "rclcpp/rclcpp.hpp"

int main(int argc, char ** argv)
{
  rclcpp::init(argc,argv);

  auto node = rclcpp::Node::make_shared("helloworld_node");

  RCLCPP_INFO(node->get_logger(),"hello world!");

  rclcpp::shutdown();

  return 0;
}
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjM2MzczZDU1ZmFiODZkYWFhYjQzMjNhYjQzM2MzNzBfWk1yaGxKWnMwRmFZV1VPNVdpOTRFc2ZWcHhNZ0lZUGtfVG9rZW46SFlyU2JNcHJIbzFUTlJ4TGp4Z2MxN0RKbkVlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmMyYWJkMmMwMTdiZGFmNTc1OTY4NTliYWIyZWU3YThfOHh2eDZ2U1RDWTBXZFA1UENrVjI1Y3pHMjBwR1B0OHNfVG9rZW46WUlMV2JZSGxlbzhhUnh4bkJzNmNCVXpXbm1nXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODJhMTEyOWViNzE4ZDQxY2VlYjM5ZDgzOTczMjdkMThfQzM3dnNiekF2YXFRMVF3YW15MW45Y1RqcGg4N0VQN3FfVG9rZW46RGVLMmJwVkpxb3ZjVzV4amlEVmNaa01EbkdjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTczZjY3NWQxZGUzODYzOGRhYWYzYTA0YzA0OWQyNDNfV3pTSllNWm9jb1p6QnI5c0NyYzlOandGTDljRHk1MzJfVG9rZW46Rk80WmJrejVQbzZvOVd4NHI5Y2Nvc2c2bk5oXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

5.  ## ROS2 HelloWorld(Python)
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTFiNmJhZTVkZTRjNDBlNWNhN2FlMjI1M2Y2OWZhMGRfTUlYNDdDdDR2SUREVjVBaHNud0NuTW9KVlVoVlo0ZWJfVG9rZW46WFVwYWJPeGx3b1NXQ1N4WDRLSmNaVVhhbkVlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Bash
ros2 pkg create pkg02_helloworld_py --build-type ament_python --dependencies rclpy --node-name helloworld
```

ros2 pkg create + åŠŸèƒ½åŒ…å + --build-type(æ„å»ºç±»å‹) + ament\_cmake / ament\_python + --dependenciesï¼ˆä¾èµ–ï¼‰ + rclpy(ROS2çš„Pythonå®¢æˆ·ç«¯) + --node-nameï¼ˆèŠ‚ç‚¹åï¼‰ + èŠ‚ç‚¹å

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Yjc0YTY4Y2MzOTljOTJmOWZiNDg4N2ZmOTc5NDY3MDNfQlVDU1U3dHQ1VVVBWUxhYUZ4c25QMWU2ckVkdjBxU2tfVG9rZW46TkJrOWJxZE1rb1hyZVd4MkUwcGNmOExZbmJ6XzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWE2YTljMDM3ZGVlOWI4OTQ1OGJlOTRkYjUwYjc4ZTFfeGFnTE9hR2thcjJaYkYzZHR2SVdCeU55aEQ2Z3Vhc3RfVG9rZW46UEVDeWJSWkNYb0hHSVp4SDNWNmNYSnlYbk1iXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGIzM2Y3YjhmYjgzOWEyNGVlMmE4YzQzZWMzYjg4NDZfS21HS3IyZzZieEVQek8xTjhLc2ljc2xHcGEyWWlVcFFfVG9rZW46WU5ramJLWll2b1hsUnh4VHRiemNiSTE2blRlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¸node nameå’Œå¯æ‰§è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶åŒå

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGFmYzg3YmE4MjJiZThlZWUxODY0MjQ1YjNhNDdmYmFfb0NmdTR3S0ZXS3ZBeHVvWHdMVm1FdlFKZzBhU28zQldfVG9rZW46WG1OOGJRT2JNb1cwU2h4UmFmT2NuMFBObk9kXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

é»˜è®¤è¿™é‡Œé¢å·²ç»æœ‰ä»£ç ï¼Œä½†æ˜¯å’ŒROS2æ— å…³ï¼Œè¿™æ˜¯æ ‡å‡†çš„pythonä»£ç 

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTY5YmEzNzYyYTljMzFkODlmYTJmNzBkYWY1N2YzMmJfTDlUMzhCaU9KWDc2TVJlUjdiaERpUk1Jd2ppSGpmT2xfVG9rZW46TFlvNWJ4cmRTb1RMU3R4ekZqT2NlRUNzbkxlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWQ0Zjg4ZjRhNTZhZDZiNjkyNWNiNmU4ZTcwMjdjYTNfZ2xkbVdUeHFYOU4wVU5qYTQ3V1RKcDBPbHBRa2NjZm1fVG9rZW46VExVeWJvSlJtb2x0Znl4eWQ5UGN2WU1MbkdjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWVmNzk3NDRiZDdhNzRlMTA3MDQ1ZjY1NmViYTdiY2VfeEFEc2V5WmthWEUwNEdNSGxTcUY1NTJab204SlZkT0FfVG9rZW46SUZpc2JNellqbzVJZ054M3pWYmNEdm9JbnFlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ æ˜ å°„åˆ° æºæ–‡ä»¶çš„mainå‡½æ•°

å¦‚ä½•ç¼–è¯‘å‘¢ï¼Ÿ

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmI0NDkwMWVkOTYxM2YwMDY5ZDIwZjYyMmJiM2E4NTRfbHhtSjNJZmN3a21lWnpEdXg4Z1loODBUNFJDbXRnZ3RfVG9rZW46VjZadWJoUHQ0b3VXUEl4SmIzUmNhSzJvbjJnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å…ˆè¿”å›ä¸Šä¸€çº§ï¼Œæ¥åˆ°wsç›®å½•

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjllYTBkYzUwM2ViYjljM2FkNzQxNmJlZTFjMDM3NDdfZnB5eEQzSG1TWjhyVHF4NzBldXFlS3BTdW5qbTNMMkFfVG9rZW46SjloWGJzZmI3b05jODJ4YTVOcGNnOWhNbmZoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzU0ZjQ2YzE3NzNhNjQyNjBlMGI0MzYxNjAzZGIwYTFfcmtSNmswWnVBamFHajEwT25PYXoyMVJJSUFTMTBEYzRfVG9rZW46RUlyRGJlSVMzb2xkRXB4N21HV2M1bUxjbkViXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æœ‰ä¸ªé»„è‰²è­¦å‘Šï¼Œä½†æ˜¯ä¸å½±å“æˆ‘ä»¬ä½¿ç”¨ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NGUzZDUxZDE2ZTBmZDVlZTAyYzU2MTg4ODIwNWU1ZGRfUTRSdzJBSk8wR0l4aHNSOHZhWjJ4RllkaFdrV0JMZnhfVG9rZW46UjBFc2I3RE5Sb0U3aXl4QTJzSmNlTUlEblFmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Bash
source ./install/setup.bash
```

åˆ·æ–°ç¯å¢ƒå˜é‡

```Bash
ros2 run pkg02_helloworld_py helloworld
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGUzOGNkMGNlZTE1ZDhjZGQ3MzVmZjZkM2I0NzBhOTJfMmNTMm1YNEFaNUx0cWxwQ0NlUFk3ZE9Jc3RTejBoRmxfVG9rZW46QWlZMWJFdEY3b0pxVTZ4T0lLVGNERW95bkJjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NGU5NWYwMWNkYTI5ZWJkMTUwMGUzNGUzYWU0Njc0MjNfS0xhZFRNWDNPSkVqY3M4MW1qNVh3dkhkZ1VOdVd4b2VfVG9rZW46QWNCUGJtN2Jvb0tEaXV4V09BZ2N2Q1RIbnJmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Python
import rclpy

def main():
    rclpy.init()
    node = rclpy.create_node("helloworld_py_node")
    node.get_logger().info("hello world by python!")
    rclpy.shutdown()

if name == '__main__':
    main()
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2I2ZGRiY2UyMzU1MzMwMGQ2MGI5ZmI1MmI3OTU2OTBfczFjR003clUzVG9JaGw3M2U1M3FSTmVabmRnYVY0eG9fVG9rZW46VEJ5U2IwSEk4b3BmRnZ4Wll0bWNRd2NjbkpkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzMxYmM0NjdhNTU3YmI2OTc5MDI5MDBjMjg4ZWQzZmVfMGJlOFZWT01QM3Vzd2c2T3o4dXFKM2FidnhDT1IzbWxfVG9rZW46T0NHS2Jrd3ZNbzJUaGp4djFUOGM5RFJhbjVmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTJkZDAyNzNkYmYzZDNhNGVjNjFiNTVmOTJmMzhhYjVfMTdBNUk4dU95Wld2NEd4NExScHFHT3RPUmdZYlRyVHBfVG9rZW46VGRjMWJMZ3dCb1J4RWR4NzBIeWNSejQxbkVkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

6.  ## è¿è¡Œä¼˜åŒ–(bashç»ˆç«¯ç¯å¢ƒ)
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2U0YjZlOTdjNjE1NTAwZWUyY2Q3OGJmNDE1YWZiNGFfQWZZaW4wOWpYZDkwZHVrbEZYaHZBWGJreGtNQUlCbEhfVG9rZW46WWJtR2IxWjlNb3ZqNWx4d3puV2NPelBXbkhCXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDRiOGFkNTkzNmUyYmFlY2VkMGYxN2M1YjYyN2Y1MDZfYzNBSElmYVFKVzhsMGZRU3h6RHBiMUlUc2x0dkVkaUJfVG9rZW46QmYwYmJkYmU3b3dhejV4b082R2NGZVlXbnZKXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¦ä½¿ç”¨ç»å¯¹è·¯å¾„

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzU4ZjY2YWZiODZlM2NkNjdlMDAzMjJjOTRlYWY0MDJfMHRMbTdHblZUZVhlUHFFUmd6eHI0NW5ZODRodUtqbE5fVG9rZW46QmphOGJHdmlxb1JSZDJ4NVlFT2NvVVVtblVKXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGNlMjUzZDI5OTkwYmQ2NGRjYzM5MzcxMDRlYTgwMDhfMGphbzBYZkNvWm16WEtqUFR4SjNtOU11MHZLQjM1a1JfVG9rZW46Sm50OGJ2Vkd0bzJHVEJ4azN5U2MxbXBsbnVkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å°½é‡ä¸è¦è¿™ä¹ˆå¹²ï¼ŒROS2æœ‰ä¸€ä¸ªbugï¼Œå°±æ˜¯ä¸åŒå·¥ä½œç©ºé—´çš„åŠŸèƒ½åŒ…å¯èƒ½ä¼šè°ƒç”¨æ··ä¹±ï¼Œæ‰€ä»¥å…ˆä¸è¦æå…¨å±€çš„è¿è¡Œä¼˜åŒ–ã€‚

7.  ## VScodeç¯å¢ƒæ­å»º
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OThmMmNjMWFhZDY4NzFmODgzZTViMzYzMTkwZTY0NjFfdHZCQXUxdTNWalZpS3lMeGF2dGRKcjRQRkxSWVFMT2xfVG9rZW46Q2Q2Q2J0OG5kb3J2M3F4TEhPZmN2cGJZbndkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2Y0Y2FhYmRlZWU2YzQ0MWQyMmE4Y2FkMGM4MWZhNDNfVGxGR1BvNnZybjFjTWlJbzI5RWhWOFN3YzlWc3psbzJfVG9rZW46UGFnSmJoeFNwb0w2YnJ4Vmh0cWN1MDNKbnpnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjViZTllZGE3MDA2YjdhNWFmOTIxZDM3YjZiNTRhZGJfOVloSUsxa2c4Q0ZOa1BjeGNObGRqQk9vYTlWempjR2xfVG9rZW46QmVTcmJjdDlxb3Uxa3p4MUtSTWNGUzU0bkxiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzEyMDJmYjMwYzIwYWNlNjM0YmQ1YTA1ZWFjNzk5YTFfMFZ5YTdkbHJnckNhbVpIcmtvYkE3TjNKTk03dGhjelRfVG9rZW46UGh2ZmJjbTVBb3hvcjN4eXZCdWNzRHpybkNnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2VlN2Q2OGMwMzNlNWU2NTQ3OTAwYjc2ZTY3NzIzNzJfWmJnVGtsQTNjMDgzaUt2OWF3d1FiVHlXUzFZaWdyYWRfVG9rZW46TzZIT2I4blpsb2YwUU94eXVkN2NsRHEzbjljXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NGIzOTIzNzI3MzQ5ODg3ZDYyMTQyOTUzYTIyZmIxMzVfcm02cVBkV2EwaHpQOFRGamZUcXVYUmN4d3lUSzhPd1RfVG9rZW46R1RnSGJUUDlIb2ZqbDh4ejJiUWNXampTbjBnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmNmNDgzYzIzZDZjNDFhODdjYThlYTNiMDA5ZDNhMTJfMVI0YTNoOFFpMU9DYTNJMlJUbG1acHNGcHVKUlhPU2VfVG9rZW46TUJRS2JaMTE5bzRzY0l4Y21xZ2NncFRabnlwXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

çœ‹C/C++ï¼ŒPythonï¼ŒCMakeï¼ŒXML,YAMLæ–‡ä»¶å°±å¯ä»¥ä»£ç é«˜äº®æ˜¾ç¤º

åœ¨å†™ä¸€äº›ROS2æ¶ˆæ¯çš„ä»£ç å¯ä»¥æä¾›ä»£ç è¡¥é½ç­‰æ“ä½œ

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGM1OTQxYWNmZjM3ZDU2YWU1NTQwOTA4NzQ4MjhiMTFfSlFTYjc3RFppQXdpSTRBVEVJSmwxU3hpckNXSk1vWW9fVG9rZW46Vk5Ub2JoMFJtb2dsSzZ4Y1k2cGNjRFVRbm9lXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ç¼–å†™æœºå™¨äººæ¨¡å‹æ‰€è¦ç”¨çš„æ’ä»¶ï¼Œä¹Ÿå¯ä»¥è¿›è¡Œä»£ç è¡¥é½

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDcxNGZkMTc1ZDcxYTlmODZmZTA2ZDRiYjM4YTI1ZGJfVHFaelp2cThDb2NBeWZxMEZqVkVoUkw3MzdOSzhJemNfVG9rZW46U0RvdGJ5NXZsb3JCWXF4aHFPcmNVeGtnbmllXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ROS2ç»å¸¸ç”ŸæˆPDFæ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªæ’ä»¶æ¥æŸ¥çœ‹

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmJiY2YyZDVjY2RkYTI4MzA1OTk3NTVjM2QwNDdmNzVfc2FleVgzZDI0MG53dk1Bcmw3Rzg0TmMwWGJ2TnhPRm1fVG9rZW46Slh4aGJVT1k4b0pJZlh4U2NmUWNIUmdvbjlnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODIzYjVkN2I0NzQzMDU5NzgwMzRjMjA1YmQxYmE4OGRfanlnNlpCcFNIMlQxRklybVY0TGROcUxGTEJuWjVxbnlfVG9rZW46VHV5aWJrUnptb1ZRYjd4ZHlyVWM4UjVhbmFlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ROS2æ’ä»¶å»ºè®®ç­‰æˆç†Ÿä¹‹åå†è¿›è¡Œå®‰è£…

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjlkZTUwNmI2ODA0YmQ5ZTFiYjMzMDFkMjBjMDU2NzBfOERrNXcwenluZWVsZ2RRUFpHRUc1dE1hMjhDc3hIdk9fVG9rZW46UTVvQmJESnM3b0VwVWl4Uk41b2Nrb2VHblhjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™ä¸ªå®˜æ–¹æ’ä»¶å¯ä»¥å°è¯•å®‰è£…

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmViYTllZTRjODdhZmM3ZGI1YTRmMGRjYThiZDE2ZjJfZGw3QkIyVkNHOFBSVGF1RVBCZUh6VDZjRWFLZ3hlMlNfVG9rZW46Sm13b2JkWUVnb3FVanh4UGhKSWNONTRObkVmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

äººå·¥æ™ºèƒ½ä»£ç è¡¥å…¨

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmMxOWY2OWYzYmY1M2MwODlhZGExNGIzMTUyZjc1NWJfYUROUGRRalRuTEk0OUo4RlRONmtNYzJ4MlA2bUZMbGNfVG9rZW46Uk9LZWJJS3hTb0FoaGN4TWc2VWNlYzBObjljXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

MarkDowné«˜äº®

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTIwMWYwNjVkN2I2NGZjNTE4MGZkMzkyOWQ5ZDYyYTFfU3pyRTFGOTFBZWdDRTBGQnhydm9rSld6aFYzRUlWaERfVG9rZW46VkdIaGJOOHRWb0VjZ0J4M1huemNBNGhTbldnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmJjOWM0MDlmOGE0MDdjMmI1MjcyMTJiYTc3YTg0MmRfYUgwcVlwYWw0ajNtTVpydUVPZHY1cjhSdzBzMmkwck5fVG9rZW46QWZFNmJYTDVRb0U2a1J4SE1KeGNHUjlqbnFjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2I1N2QyNmEwZWFlMGFhMWY1MTc4MzA1YTNhYWJlNTVfa3pMTUgyeUJoU0hZdGNxeTQxemZLMktLSkNjOWt0MHVfVG9rZW46RTRtM2I5RFVzbzRzYmd4ZUVXdWNqaGI5bjZiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è™½ç„¶æŠ¥é”™ï¼Œä½†æ˜¯ç¨‹åºæ˜¯å¯ä»¥æ­£å¸¸è¿è¡Œçš„ã€‚ï¼ˆä¸»è¦æ˜¯vscodeæ‰¾ä¸åˆ°å¤´æ–‡ä»¶ï¼‰

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmU2MTczZWZmZTk2OWVjOWViNWMzZGM3Mjg0N2E2YmFfUXQ5SFZoQUxpUTZJVjZmZDlZcHc2S1h6Rms4Z2tFRWlfVG9rZW46TzJ5M2I0MGFDb3E3aEV4ampORGNvUFY1bnNmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWJiMGFjZmFjMGVmNjA0MTYzZGQ2MjQzODIxNTQyYTFfZjlUNGVZM3d2RHo1NXFST0czMmNlb0F3ODZjREUxdXRfVG9rZW46VzNBZ2JYdWFFb2FuVTl4Sm10UmNkazRDbnhiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTI5ODk5ODZhNWIwYTEwZmZkNmVjZDFiYjg3OWE3MmJfa3JxUHBrQ2NQNEV0ckZ2TVZYcWJ1dUlFUmJwZ2dOeTBfVG9rZW46VXZmMmJ3VWVxb01wVEZ4V1RLT2NmZ01FblVkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTA5N2M5NmQwNDVkMzg4MzA3ZGM5YmVkOTI1OGU1Y2VfdDlob0l5Zk5YdGgwZGhITTY0eWJWMW8yQTUxQnV0NllfVG9rZW46SXhzQmJoMTd5b0hZQVR4bldoM2N1bkJ3bnpkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzM3ZjcxYjFlZTA4MjRhNGFkYzZiZDI0YzlmYTZkYWFfako3Y1BNem9FMjQxakVsUFlwRG5lMW9rMUNVMllTdVlfVG9rZW46V0F4RGIyUVp6b0V5Y2Z4MWV4Q2NJS2ZXblNmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```JSON
            "includePath": [
                "${default}",
                "${workspaceFolder}/**",
                "/opt/ros/humble/include/**"
            ],
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzQ2ODY0Mjk1MjgzNTViNTg0M2ZhOTIyYTc3NTdhNWFfVG9YVGd1Ym92QlJkZzlFUjVqNEphTjRhalRhQ0NPZDVfVG9rZW46TExGRWJ1T2J6b1E4aVF4MGdva2NudmtIbjlmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

/\*\*ä»£è¡¨è¦åŒ…å«è¯¥æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰çš„å­é›†

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmI1YTJiNGIzM2ZkMjY3NzhmNGM4MTFmYzI3NzdmZTlfQkhYbU5uTWxsamJYSzVQVTQ5UWNySXR3THZBSmpqc1pfVG9rZW46T0ZZZ2IyZzBHb0EyNTJ4bUdSMmNOZUNxbm1mXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGY0MWMzNTExNTRhMzE5OGJhYWQ4NzQwZDk0ZDVhNzVfOWNZRk1ZR1ZKOHlRa3BMQkR5dXVLWFhQdzU2ZlJ0bUpfVG9rZW46SWxpVmJ0V3ZlbzNLc0J4MkE5Q2NYS2w4bkVlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

æŒ‰Ctrl + \`ï¼ˆESCåº•ä¸‹çš„æŒ‰é”®ï¼‰æŠŠVSCODEç»ˆç«¯æ‰“å¼€

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWU4OGM1ZjI2YmU1NGJhMTU2YTM3NTcxMjA4MGU4OGNfVzdQWTRqSlAwTWtkMzhWTUhrZzZjeUc5NFJQTEw4ZEZfVG9rZW46RG9PYmJFZlJUbzJDQ2J4WFpIQ2N3Y0IwbkVmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTYwZWMyZjUyMDZlMDc0MTczMWNhM2FhOTRjYWEzZmZfRmd1MWpNWEZjTjZVQlZwMldkdnBTNVFSZ2JwdEZka3FfVG9rZW46TUdvbGJOaWx5b0NUbWl4RWdOQmNjYm1CbjhlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

\--node-nameä¹Ÿæ˜¯å¯é€‰å‚æ•°ï¼Œå¦‚æœä¸é…ç½®ï¼Œåˆ™ä¸ä¼šæœ‰æºæ–‡ä»¶ï¼Œä¹Ÿä¸ä¼šæœ‰å¯æ‰§è¡Œæ–‡ä»¶åˆ°æºæ–‡ä»¶çš„æ˜ å°„

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjJkMjIyNTFjN2IwYmEzMjE4NDRiNzM3ZGE3NmNhOTFfNkdmOGxrdzd6TjFxbmRXSDJ3dENWTUpBSk1STTNPQUlfVG9rZW46TGphNWJMaHhMb3RuVDd4U3NwTmNSOEpzbnZnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmIyMTQxMjc5MjZiNmYzMGNkN2Y3MjUzMDA4YzQ3NDhfQ3hkbkdpWUMzemVQczMwYTgxeGdSQzdyWkdBaTU4eTlfVG9rZW46QVlUeWI3TklOb0h4NWp4dUE1d2NCQ3V2bkViXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzYwOTBmMTcxN2YyYTA2NDQyNWJlY2EzZjBmMGFjZDhfSmpHZ211R2t0S0E1VktiRjlLNjk3aENnS3prQ3hPV0FfVG9rZW46UEVNVmJnRGlCb0xIakV4ZnRHSGN6UTI1bnpnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¸éœ€è¦ä¿®æ”¹ï¼Œå·²ç»é»˜è®¤ç”Ÿæˆå¥½äº†

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzkxNTdkNDI1NjAzN2M3ODQ3MjJiNzRhNTNiMmFjYmJfSUU0dHBFcXdWUmQ3UDZUa3puZ1FFY0VTN2E1Q2lWME9fVG9rZW46VmNpYmI1TXBLbzhyU3Z4dDVJMWM5NDQ2bndoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å†è¿”å›WSç›®å½•è¿›è¡Œç¼–è¯‘ï¼ˆä½†æ˜¯æ­¤æ—¶ç¼–è¯‘æ˜¯ç¼–è¯‘æ•´ä¸ªWSç›®å½•ä¸‹çš„æ‰€æœ‰åŠŸèƒ½åŒ…ï¼‰

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Njc5MDU0ZjljODVlM2MxNTM5MjRkNmMyYjAwNDVmMTlfOEw4YmRCVnhPVlFPYldra2dVN2wxSXg3T0ZsaVFCQ3NfVG9rZW46V2NzVGIzc1Zwb0h3ZzB4OURSMWNQOTN2bnFnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

åˆ·æ–°ç¯å¢ƒå˜é‡å¹¶è¿è¡Œ

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTBmNzQ0ZmQ4ZTY5OTlhNmU4NDg3YjgwNmRiZDE3OGZfWHd6VERMUzZPM0NSWWNLV05TUEZuQnA0SGFQS2VkZjJfVG9rZW46TVpNamJXNDd4b29aQWN4bE9maWN4SUJibk1oXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjM1N2E4OGI3ZGRlNDA1M2VkYjkwMDg1YTg3N2NmMDBfVENRVGEwcHRQNnRzUGdmYW1BZlQ2aFV6YWhUQTY5ZG1fVG9rZW46WXZ2ZGJ6bW1kb1NnR2N4aE9EYmNaM2UxbnZqXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjczNmNkOWQyMDM0MTRiNzQ3YTc1MWZmZWQyZjQ4M2RfdnkzUExHRVVpZ3IxTnBKdWdmQnljMlhKTFl5d3BSUGFfVG9rZW46Uk5ubWJUV3Bab08wdUV4TjdyNWNhVWowbk9nXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGMwM2U2N2Y2YzcwZjA5ODQ1YmQyZjRmYjBkOTVkOGZfMVRxbXFVNmZzMDRjUWVwaXJkYzVVSWZONkNKTTQ3OGNfVG9rZW46RVptMmJiN1gybzJlRFR4Tnk2TWN2Z1BnblhlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWIyZmI3OWZjNTVmZmE2NzBiNDUzMjRjZjdhODJmZmJfd1BMWWcwRkx0SzRUMGY1RVRLa2NtYmFVVWVrM0FnY3dfVG9rZW46VnkxWWJCeUF0b2Fxdll4djUxaWNHUEhhbjZkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

å¦‚ä½•åœ¨ä¸€ä¸ªåŠŸèƒ½åŒ…é‡Œæ·»åŠ å¤šä¸ªæºæ–‡ä»¶å‘¢ï¼Ÿ

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTNlOTNiMzYzMWE5YzU1NmUxYjUxNDZmNDI0NmNmZjhfV1BDaVhQMk9pUGY3S29nVzl0S25yeTk2OUNmdWxDWkxfVG9rZW46T0FrM2JxeFBnb0NoZEl4blhmemNodWcxblBmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ–°å»ºä¸€ä¸ªæ–°æ–‡ä»¶ï¼Œæ¯”å¦‚hellovscode2.cpp

ä½†æ˜¯æ­¤æ—¶è¯¥æ–‡ä»¶æ˜¯ä¸€ä¸ªå­¤é›¶é›¶çš„æ–‡ä»¶ï¼Œä»–æ²¡æœ‰åšä»»ä½•çš„é…ç½®ï¼Œå¯¹åº”çš„ï¼Œç¼–è¯‘å®Œä¹‹åä¹Ÿä¸ä¼šè¢«æ‰§è¡Œã€‚

æˆ‘ä»¬æƒ³ç¼–è¯‘æ‰§è¡Œè¯¥æ–‡ä»¶ï¼Œå¿…é¡»é…ç½®ç›¸å…³çš„é…ç½®æ–‡ä»¶ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWQ4MjMzMTY2ZmZjYWIwZDQ2ZDc2ZjJmY2QzOTY3NmJfeHhrVU1GMmVSQXBaM2I0ODJNcWVlWmZYTWJQVGFldk5fVG9rZW46UEJ0UmI0WkFCbzFZZlF4ZFlYYWN4ano0bmZnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDcwYzQ0MDQxYWY3MWEzMTU5YjdkOTRlMDUzNTBlNTZfdDcyWkxwcWhSUEZTaXFjcXB3OFlzRmVHSUZ1a2UyNTFfVG9rZW46TkZOQmJTZDc4bzB1NkF4Q0hZNGM5TzJpbmVjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

é€‰ä¸­çš„è¿™äº›ç”¨ä¸ç€ï¼Œå¯ä»¥åˆ æ‰

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2E2M2Y3YmEwNTE0ODg1MjkzODcwMDc5NTQzN2E5MDlfdGtBb0tKM0I4d0dTVGdGQUJZZVI2V05HMkV3eUt2MWlfVG9rZW46RnJaOWJSV1FGb1ljdEV4RXc2MmNNdll6bm5jXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmZjOWFkNDM5MmY2N2VmMzliYzMwNzkwM2E0Y2I2MjZfUUxyOXdmRlVRVzJCSXZOMG1QZzF1eXR6U1dOZXh0WXNfVG9rZW46V0xncWI1cUZEb1hwQzV4c2M0c2NUbFRUbkhjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2NjN2Y5NWIwMWJiNWIwNzU5ZTMxNjVmNmZjNTliNjRfdVRGdFBjVkxPWktnY0JsUU94YTFDcUdqcUoySWxodllfVG9rZW46WUw0dWJWR3Vub3RJSXJ4a1dJQmNWZTl6bkFnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjEzMDU1NGM2ZDg2OWQ0NmNhZmZhMmE1YWE0N2FjNThfeVFNMXVGRk1PTVAwYlB2TjdTZXNzMk53Q1ZBazBjWkpfVG9rZW46TUxKVWJTaU44b2dxRnB4RE14SWNKWlRYbnBnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

8.  ## è¿è¡Œä¼˜åŒ–(colcon build)
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmNlZjQzYmUyNjY4NTZhZjVmYTNlZDBkZjZjOGMyYjJfaGR5ck1razF2cGxQREp0YzloOEJLRDJHVWwyWHdXVHRfVG9rZW46SVZ2OGJ6bklhb3lFT3J4d0szWmNmb0dubm9lXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¹³å¸¸ä¼šå…¨ç¼–è¯‘WSç›®å½•ä¸‹çš„æ–‡ä»¶

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDkzYzQ0NjM4MjA4ZDQ1NjUyNTIyNDZhOTIwNGY1MGJfek90TGtsSGVETWt0VmJKRUtaaWtwN0Z4QlFwc1lYZUxfVG9rZW46VVJ0RGJUZzBhb05QeE14OWRYaGNaSnNlbnFnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Bash
colcon build --packages-select xxx xxx xxx #å¯ä»¥æŒ‡å‘å¤šä¸ªåŒ…
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjA1ODgzNjAzOGEwZmEyNmI2YTkxOGU3MDlmNzI5OWRfMjFnWDhYTzE2c0hnZFBlaDVhZWwzWjZZT2FvWWdoRFZfVG9rZW46TlRIMGJzaFdmb1daYWF4Z1g3cmNLYnA4blRnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

9.  ## VScodeç¯å¢ƒè¿›é˜¶
    

1.  ### clangdæ’ä»¶ä»£ç æç¤º(å¯é€‰,ä½†æ˜¯å»ºè®®)
    

https://colcon.readthedocs.io/en/released/index.html

ç”±äºC/C++æ’ä»¶åœ¨å¤§é¡¹ç›®é‡Œçš„è¡¨ç°ç®€ç›´æ‹‰èƒ¯çš„ä¸€æ‰¹ï¼Œæ‰€ä»¥æˆ‘ä»¬é€‰æ‹©ä½¿ç”¨llvmé‡Œçš„clangdæ’ä»¶æ¥è¿›è¡Œä»£ç æç¤ºã€‚

ä½†clangdä¾èµ–äºcmakeç”Ÿæˆä¸€ä¸ªç¼–è¯‘ä¿¡æ¯æ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦ä¸€äº›æ­¥éª¤æ¥ç”Ÿæˆè¯¥æ–‡ä»¶ã€‚

ç”±äºROS2æ²¡æœ‰åƒROS1é‚£æ ·çš„ä¸€ä¸ªæ€»çš„è§„èŒƒçš„CMakeListsï¼Œæ‰€ä»¥é…ç½®èµ·æ¥æ²¡æœ‰ROS1é‚£ä¹ˆæ–¹ä¾¿ã€‚

1.  é…ç½®colcon buildå‚æ•°
    
    1.  æ–¹æ³•ä¸€ï¼šï¼ˆä¸å»ºè®®ï¼‰ **æ¯æ¬¡** ç¼–è¯‘è¦ç”¨è¯¥å‘½ä»¤ï¼š
        
    ```Bash
    colcon build --cmake-args -DCMAKE_EXPORT_COMPILE_COMMANDS=ON
    ```
    
    Â Â ç­‰åŒäºåœ¨cmakeæ–‡ä»¶é‡Œå†™ä¸Šï¼ˆä¸€èˆ¬ä¸å»ºè®®æ”¹cmakelistsï¼‰
    
    ```Bash
    set(CMAKE_EXPORT_COMPILE_COMMANDS ON)
    ```
    5.  æ–¹æ³•äºŒï¼šå…¨å±€å‚æ•°(æ›´åŠ æ¨è)
        

```Bash
mkdir ~/.colcon

vim ~/.colcon/defaults.yaml
```

æŒ‰ä¸‹`insertï¼ˆæ’å…¥ï¼‰`æŒ‰é”®

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2RhMGVjZGU3NjE5YTY2ZDgwZjFmOTYzMGRmZTkzMTFfMEZ3dFo0SFFheTRzV2lrZkd1UXdDT3ZYeThLOUhPaldfVG9rZW46WU1FRGJSOVVCb2NlUVl4cm45TWNsclRVbjNkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¾“å…¥ä¸‹æ–¹å†…å®¹

```Bash
build:
  cmake-args:
    - -DCMAKE_EXPORT_COMPILE_COMMANDS=ON
```

æŒ‰ä¸‹`ESC`ï¼Œå¹¶æŒ‰ä¸‹`:wq`,ç„¶åæŒ‰ä¸‹`Enter(å›è½¦)`å³å¯æˆåŠŸä¿å­˜ã€‚

åœ¨ç¼–è¯‘çš„æ—¶å€™æ­£å¸¸ç”¨`colcon build`å°±å¯ä»¥è‡ªåŠ¨å¯ç”¨CMAKE\_EXPORT\_COMPILE\_COMMANDS=ONå‚æ•°äº†ã€‚

  

2.  ç„¶åå†æ¥é…ç½®clangdæ’ä»¶
    
    1.  å…ˆä¸‹è½½clangdæ’ä»¶
        
        ![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWE1YTkwMTYzMGFmZjdiZmM3MTY5ZDY0NzJhOTEyYWNfV3gzVnVTZmlSNGNYMlpjalkzV1NFNmptQ3h6V2haaFZfVG9rZW46QWNzdGJBR3lUb1NJVUZ4Z2VWQ2MwY3QwbjJkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)
        
    2.  ä¸‹è½½clangdæ–‡ä»¶
        
    
    Â Â æŒ‰ä½Ctrl shift Pæ‰“å¼€æœç´¢æ¡†
    
    Â Â è¾“å…¥clangd æ‰¾åˆ°ä¸‹è½½è¯­è¨€æœåŠ¡å™¨è¿™ä¸€é¡¹ç›®ï¼Œç‚¹å‡»å®‰è£…clangdï¼ˆè¯·ä¿æŒè‰¯å¥½çš„ç½‘ç»œçŠ¶å†µï¼‰
    
    ![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Njg1NjczYmY1MGZkMGFlMmMzYmIwZDk3Mjg2OWUwYzhfcjgyNWxvOXd6VmR5TzFERGlIc2JyVHNnU29aQ2FLbWtfVG9rZW46WmZNa2I4eHptb0ZWMUR4N3BGMWNETjVXbnplXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)
    
    6.  æ¥ç€é…ç½®clangdï¼š
        

ç¦ç”¨C/C++çš„ä»£ç æç¤ºåŠŸèƒ½

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjY5MDY2NzE3ZDAyNzg4YzI3M2EyNTg2ZGZiNGY4ZTdfcmU0aUhETzhkeVNUTTFEdGdtWVM0QW1tMnJNbEJrQktfVG9rZW46SmN4R2JTY3Uxb05nTGx4SDdxQWNieTkxbllVXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¦‚æœæ²¡æœ‰ä¸Šå›¾çš„å¼¹çª—ï¼Œå¯ä»¥è¿›è¡Œæ‰‹åŠ¨å…³é—­ï¼Œä¾ç„¶æ˜¯ctrl shift P,è¾“å…¥settingsç„¶åæ‰¾åˆ°å¦‚ä¸‹å›¾çš„é€‰é¡¹

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjgxMDYwZGYxZGU0YzkyMGE2NDA2MDNlYzNiMTQ5NzFfd3NHTmxWRWtydXJ4NHh1cWJYbGk5WUM4ZzlVY3pydTZfVG9rZW46VmtMOGJZWDdCb1hKM3V4R0IwM2N3dnp1blBiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ‰¾åˆ°ä¸‹å›¾è¿™ä¸ªé€‰é¡¹ï¼Œæ”¹æˆdisabledå³å¯ã€‚

`"C_Cpp.intelliSenseEngine": "disabled"`

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTI5YjUzNmFlYjBkOWI3MzdhYWJiNDY2ZWFkODRjN2NfbVJxU0JrWmJOdmNWeldNODhyYzhjenBtMFI5U2tYdmNfVG9rZW46Sjd5M2JINDVOb0RJVXJ4c3BXbWNmdExObkZkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

4.  é‡å¯clangd
    

ç„¶åctrl shift Pæœç´¢clangdæ‰¾åˆ°å¦‚ä¸‹å›¾çš„é€‰é¡¹ï¼ˆé‡å¯clangdè¯­è¨€æœåŠ¡å™¨å‰ï¼Œè¦å…ˆcolcon buildï¼‰

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjUxNmEzMWE5NjJjM2U2YTBmY2U0NTcxYTYwMjk3YTdfZ2taam1uaU1qV0gwcURuNnNWUVo3WVZPVlpQNFU4NFJfVG9rZW46U2VFMGJaYXZCb0hDc0t4eFNsY2NFYWQwbjhYXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä»£ç æç¤ºå°±æ­£å¸¸å•¦

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2M1MjY3MjJkNmU1ODEyZDMwN2UzODY5YjBhZWFmNDJfbmJZRGJxTVVWNG1uc1NvWk1pbmhzdFBFaU05dXdKNHVfVG9rZW46TmRac2J0cGFNb3VJZGZ4NjhNNWNNQmNnbnhnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

  

  

10.  ## å®‰è£…å…¶ä»–å·¥å…·
    

å®‰è£…terminator(é€‰è£…ï¼Œå»ºè®®ï¼Œå› äººè€Œå¼‚ï¼‰

```Bash
sudo apt install terminator
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWMyYjRlNjc4NDIyMjNkMTQxNjVlNTkzZDY3YjU1YjhfQ0RrQXB4ZVJUbW41NlhsRkpJMFVobWJnb1ZlT2MyUExfVG9rZW46TVYzTmI4TVV1b3lrTzR4dmNHQmNKQ0tTbm5aXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

1ï¼ŒCtrl+Shift+e å‚ç›´å¹³åˆ†çª—å£

è¿™æ ·ä½ å°±æœ‰äº†ä¸¤ä¸ªç‹¬ç«‹çš„å·¥ä½œåŒºè§ï¼Œå¯¹äºå¤§å±å¹•çš„äººæ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚

2ï¼ŒCtrl+Shift+o æ°´å¹³å¹³åˆ†çª—å£

å¦‚æœä½ åˆ†äº†ä¸¤ä¸ªå‚ç›´çš„å·¥ä½œåŒºé—´ä¹‹åå‘ç°å®½åº¦ä¸å¤Ÿäº†æ€ä¹ˆåŠï¼Œæ²¡å…³ç³»ï¼Œè¯•è¯•æŠŠå…¶ä¸­ä¸€ä¸ªåšæ°´å¹³åˆ†å‰²ï¼Œæ©ï¼Œå¾ˆç¬¦åˆç¾å­¦ï¼ˆå‘²ç‰™ç¬‘ï¼‰ã€‚

3ï¼ŒCtrl+Shift+s éšè—/æ¢å¤æ»šåŠ¨æ¡

ä¸€èˆ¬åˆ°äº†è¿™é‡Œï¼Œæˆ‘ä¼šå»æ‰é¸¡è‚‹çš„æ»šåŠ¨æ¡ï¼Œæœç„¶æ¸…çˆ½äº†å¾ˆå¤šï¼Œè‡³ç®€è‡³ä¸Šï¼Œå¦‚æœä½ æƒ³å¿µå®ƒäº†ï¼Œæ²¡å…³ç³»å†æŒ‰ä¸€æ¬¡æ»šåŠ¨æ¡å°±æ„‰å¿«çš„æ»šå›æ¥äº†ã€‚

4ï¼ŒF11 è¿›å…¥é€€å‡ºå…¨å±å¹•

åˆ°äº†è¿™é‡Œä½ ä¼šå‘ç°ï¼Œå¦‚æœå±å¹•ä¸å¤Ÿå¤§ï¼Œç»ˆç«¯æ˜¾ç¤ºéƒ½æŒ¤åœ¨äº†ä¸€èµ·ï¼Œè¿™æ—¶ä½ éœ€è¦ä¸€é”®åˆ‡æ¢é€€å‡ºå…¨å±å¹•ï¼Œç”¨F11ä½“éªŒä¸€ä¸‹æ»¡çœ¼ç»ˆç«¯æ—¶ä¸“æ³¨æ•²ä»£ç çš„æ„Ÿè§‰å§ã€‚

5ï¼ŒCtrl+Tab åœ¨ä¸åŒçš„å·¥ä½œåŒºé—´å¾ªç¯

ç»è¿‡ä¸Šé¢çš„æ“ä½œï¼Œä¸å‡ºæ„å¤–çš„è¯ï¼Œæˆ‘ä»¬ç°åœ¨å·²ç»æœ‰äº†ä¸‰ä¸ªå·¥ä½œåŒºé—´ï¼Œåœ¨ä¸€ä¸ªå·¥ä½œåŒºé—´æ•²å®Œäº†ä»£ç ï¼Œä¹‹åæƒ³è·‘åˆ°å¦ä¸€ä¸ªå·¥ä½œåŒºé—´æ‰§è¡Œï¼Œåˆä¸æƒ³ç”¨é¼ æ ‡ç‚¹å‡»æ€ä¹ˆåŠï¼Œåˆ©ç”¨Ctrl+Tabä½ å¯ä»¥åœ¨ä¸åŒçš„å·¥ä½œåŒºé—´è¿›è¡Œå¾ªç¯ï¼Œä»¥ä¾¿é€ä¸ªåŒºé—´è¿›è¡Œæ“ä½œã€‚

6ï¼ŒCtrl+l æ¸…ç©ºå½“å‰çª—å£

å½“æˆ‘ä»¬æŠŠçª—å£å†™æ»¡æ—¶ï¼Œå°±åªèƒ½åœ¨æ•´ä¸ªçª—å£çš„ä¸‹é¢æ•²å‡»å‘½ä»¤ï¼Œè¿™æ—¶æˆ‘ä»¬éœ€è¦è¿™ä¸ªå‘½ä»¤æŠŠçª—å£æ¸…ç©ºä¸€ä¸‹ï¼Œä½†å…¶å®æˆ‘ä»¬å¹¶ä¸æ˜¯æŠŠå®ƒçœŸæ­£çš„æ¸…ç©ºäº†ï¼Œåªæ˜¯ç›¸å½“äºç¿»åˆ°äº†ä¸€ä¸ªæ–°é¡µé¢ä¸€æ ·ï¼Œå¦‚æœæˆ‘ä»¬ç”¨é¼ æ ‡å¾€ä¸Šæ»šåŠ¨æ—¶ä¼šå‘ç°æ˜¯å¯ä»¥çœ‹åˆ°ä¹‹å‰çš„å†…å®¹çš„ã€‚

7ï¼ŒCtrl+Shift+w å…³é—­å½“å‰å·¥ä½œåŒºé—´

æˆ‘ä»¬ä¸Šé¢æ‰“å¼€äº†ä¸‰ä¸ªå·¥ä½œåŒºé—´ï¼Œå½“æˆ‘ä»¬ä¸éœ€è¦æ“ä½œåˆå«Œå¼ƒå®ƒå ç”¨äº†æ— ç”¨çš„ç©ºé—´æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨è¿™ä¸€å¿«æ·æ–¹å¼æŠŠå®ƒå¿«é€Ÿå…³é—­ã€‚

8ï¼ŒCtrl+Shift+q

è¿™ä¹Ÿæ˜¯æˆ‘æ¯”è¾ƒå–œæ¬¢çš„å‘½ä»¤ï¼Œå½“ä½ å…³æ‰åªå‰©æœ€åä¸€ä¸ªçª—å£æ—¶å°±ç”¨è¿™ä¸€æ–¹å¼é€€å‡ºç»ˆç«¯å§ï¼Œç›¸ä¿¡æˆ‘è¿™æ¯”ä½ ç”¨é¼ æ ‡ç‚¹å‡»é€€å‡ºè¦è¦å¿«çš„å¤šã€‚

è¿˜æœ‰ä¸€äº›é€šç”¨çš„ç»ˆç«¯å¤åˆ¶ç²˜å¸–æ–¹å¼æˆ‘å°±ä¸å¤šè¯´äº†ï¼Œå½“ç„¶è¿˜æœ‰ä¸€äº›å…¶ä»–å¾ˆæœ‰ç”¨çš„å‘½ä»¤ï¼Œä½†æ˜¯æˆ‘åœ¨å®é™…çš„å·¥ä½œä¸­å¹¶æ²¡æœ‰ç”¨åˆ°ï¼Œä¹Ÿå°±æ˜¯æŒæ¡äº†è¿™å‡ ä¸ªå¿«æ·æ–¹å¼å·²ç»å®Œå…¨æ»¡è¶³äº†æˆ‘æ—¥å¸¸çš„å·¥ä½œéœ€æ±‚ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzUwM2EzNzM2YjQ2MWZlMDczY2FlNzQzMzBlMzRlNjVfaWNqd01Mcnd3VUU4UEJIMTNjem1UbGRrWEJpMmJxOGZfVG9rZW46TXdGV2J2QTlxb2kwNEV4VFZuRGNPRFBqbnNjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å’±ä»¬çš„Gitå…¥é—¨æ•™ç¨‹ï¼š[Vinciæœºå™¨äººé˜ŸGitå…¥é—¨æ•™ç¨‹](https://sdutvincirobot.feishu.cn/docx/B7arde6u0ob5tsxk5QOcFLG7nYd)

11.  ## ROS2ä½“ç³»æ¡†æ¶
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjYyMGI0ZjhhNjg3YzA2ODMzYWU0NmQ3YmNiZGM2ZDJfcWIyS3V6MmhtME9RUXVPbDIwcU9LQkI0WE84OU9LcmlfVG9rZW46QUVwemI1ekFHbzBpMmd4d3oyMmN1VkRPbjNkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzNjY2Y4MjkzNjM2MGQ1M2YxZDVjNTVjNzM1MzkwNGFfSklkZUY0aFJCM0F1VkZSMnhsZ3BrcVhQdWZ0a2txMEpfVG9rZW46TVZmeGJuQmRyb0IwcFl4b01TdmNIcEpBbnNiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Mzg1MzdkZmZhN2YxNzE5MDE1YjMxYmE2MzAwMDI5MDhfMjd2R3lwRXJKZkZ2Um1XY1RManVUNGtkWmJ1ZW1ialZfVG9rZW46U2NqamJ0MkFobzNmbFF4OVNUN2NOUWVnbkZiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTJhOWUzMGJmM2Q5YjY2MWJhZDg1Y2VhN2I1Y2U1YjRfdW5TMVNpQUVUS3d2b2FBVlFhOE43TnhTNVVOQmZtNzFfVG9rZW46R01NbmIxZ3NSb2p0SHR4a1NPRWNIeHBsbm1kXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

Client Libraryå°±æ˜¯ROS2çš„å®¢æˆ·ç«¯ï¼Œæ¯”å¦‚rclcppï¼Œrclpyã€‚

Abstract DDS Layeræ˜¯DDSæŠ½è±¡å±‚ï¼Œè¿™æ ·DDSå¯ä»¥å®ç°å¯æ’æ‹”ï¼Œå¯ä»¥éšä¾¿æ›¿æ¢DDSæ¨¡å—ã€‚

Intra-process APIæ˜¯è¿›ç¨‹å†…é€šè®¯APIï¼Œå¯ä»¥æé«˜é€šä¿¡æ•ˆç‡çš„ä¸€ç±»APIã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjdkZDQ1NDQ3NWI0YTEzN2I2NGQyYzVjODYzZmE1NTRfVzVPaERjUTBtU0VoVlFvNm82WElCR3NONUVwZXJ5aFhfVG9rZW46Wk9rRWJOU2tKb3F1WEd4a2FZeWNyVGNRblFiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGNhYzBjM2U4NmIwNjhkYjRkMDE1M2Q2NDIyZGRlNjVfMHM5OGhZa3R2d1JLa3Y5YU1VMEdxeTNwdWR5TFNza3hfVG9rZW46RFZGNGIzTHR1b01xTUF4YmJDVGNSOGxabm9nXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

3.  # å·¥ä½œç©ºé—´ä¸åŠŸèƒ½åŒ…
    

1.  ## å·¥ä½œç©ºé—´ç®€ä»‹
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2M3NjQ3OTQ4MWQyYTJlMmZjMTc2NTNiMThhZGQ4ZWFfR3ZuQkN1MU9rYVgwQ0dhN2x1R25HM1BiQktXZzhYNmlfVG9rZW46WjhHU2JVRmJubzNCdmd4Z3ZFRmNkVFFhbkVlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å·¥ä½œç©ºé—´é‡Œæœ‰4ä¸ªå­ç©ºé—´

æœªæ¥ç¼–å†™çš„ä»£ç å’Œè„šæœ¬éƒ½éœ€è¦äººä¸ºçš„æ”¾å…¥srcç©ºé—´é‡Œï¼Œ

ç¼–è¯‘æ‰€å½¢æˆçš„ä¸­é—´æ–‡ä»¶ä¼šå­˜æ”¾åˆ°buildç©ºé—´é‡Œï¼Œ

å¯æ‰§è¡Œæ–‡ä»¶ä¼šå­˜æ”¾åˆ°installç©ºé—´é‡Œï¼Œ

ç¼–è¯‘è¿‡ç¨‹ä»¥åŠè¿è¡Œä¹‹åå„ç§è­¦å‘Šï¼Œé”™è¯¯ä¿¡æ¯ç­‰ä¼šå­˜æ”¾åˆ°logç©ºé—´é‡Œã€‚

* * *

ç”¨pipå·¥å…·å¯ä»¥å¾ˆæ–¹ä¾¿çš„å®‰è£…å„ç§pythonçš„åŒ…

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTM5MTk3MTJkMzgxNThhY2RkYmQ2Njc3MmI3ZjAwY2ZfQ2h5eHpObVdTa0JSMkxXZTNoc0NGT0RMV0VSM3oyeUJfVG9rZW46VjdTR2Jvd08wb0pmYVJ4R0NidGN3amJxbndnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGI3MTIyYzVjMzk5ZGE3NTMwYjZkNmQ1MDExMmEyZGNfVTRqNWJXbGR1alNLaUUzb0JrTndlTkVyZXBJcWFFb0VfVG9rZW46Vnkya2JrS3hNb21aczV4RUtTVWNtMVNYbkhiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å›½å†…å¼€å‘è€…@é±¼é¦™ROS å¼€å‘çš„ä¸€ä¸ªä¸“é—¨å¤„ç†ROS2ä¾èµ–çš„å·¥å…·

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTA5ZTc0NWIxMGFjNWIxYzZhYTE3NTExZDRkMDEwNTRfMWROYkdhTVgzVkdicFFkdkdCTzhTa1A0NzFwRlRqNkNfVG9rZW46UU9ua2JjeVJDb3hIV0p4T09sUGMxemdmbkVjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzBjNjMwNDJlYWM0NjQwMTI0ZjZiNTkyNzljYzVhNGZfTlUyYmVLVFhONVdjZU5jbmM4TEhZOVRUcVhuWjdiR21fVG9rZW46UmpZVWI3QXl6b3pYaU14b041QmNIb3VnbkJnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmFiZmQ0ODBlZGZkZGFjY2ViNGU1NmZiMGIzMjdhYmZfR0pib3RrOFlTMHlaV2VGTTlDckJvN1RXbDBpOFRxazJfVG9rZW46WnJrRWJDbFc5b2Z4VHp4ZHQ1bGNMWkdkblJiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å®é™…ä¸Šå°±æ˜¯æ‰«æäº†å„ä¸ªåŠŸèƒ½åŒ…é‡Œçš„package.xmlé‡Œçš„dependï¼Œç„¶åæŸ¥æ‰¾æœ¬æœºæ˜¯å¦å«æœ‰è¯¥ä¾èµ–ï¼Œå†å†³å®šæ˜¯å¦å®‰è£…ã€‚

```Bash
sudo rosdepc init
rosdepc update
cd ..
rosdepc install -i --from-path src --rosdistro humble -y  #åœ¨srcæ–‡ä»¶é‡Œçœ‹åŠŸèƒ½åŒ…æ‰€éœ€ä¾èµ–å¹¶æŸ¥æ‰¾å®‰è£…
```

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTBiN2M4ZjI1ZDJiY2U0MDBkZjBkNWFlZmUxZDFmZThfZ05VRjBwTTBCSXZpSXRXaFk3ckxqNUZyNjFRUjIwQVpfVG9rZW46RWJicGJxUFBUb3h1eU54bVhDSGNib3FxbnRoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

åé¢è¿˜éœ€è¦åˆ›å»ºå¥½å‡ ä¸ªç›®å½•ï¼Œè¿™äº›ç›®å½•å¤§å¤šéƒ½æ˜¯å’Œæ¥å£æ–‡ä»¶ç›¸å…³çš„ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTcwODU0MWE2NTgzZjdmZTQyOTBiMTUzMzZjY2E0ODNfWlcwNHdrOEtoWlFDbGRwdTRxSHZzWUFOZERSc3h1V1lfVG9rZW46TGRjcWJsZ2dRb1k1Ynh4TnhBbmNoU2NVbjljXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTE1YjM2YTFlZGU5ZDk4YzdmODk5ZDU5YjBhZTM0OGNfYjlIQXd3Rjl0WXNzSGU1ZWtEQVg1SnQ0UmxIb2ZOSU1fVG9rZW46UDNqZmJTWE9rb0IzUDZ4b3VCSWNPMDVybmhjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

2.  ## æºæ–‡ä»¶ç¼–è¯‘
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjVmMGZlYzU0NzQwODIzZTAyODc2ZjFlNDY1OGY2ZTRfMUhaUzNiekczVThSSW9VaExiTlprOXBVNGNaTDZ1TGNfVG9rZW46SGx3SmJjemk1bzhWMG94Y3dJMWM4d1o0bldmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDU0MmJjNDE2YjAzODg1OTdkNzViZWIxOTZiYjlhODdfOEpnZExNU1VRSzhwc2hYV2w1VjRoenNBMnVsd0FHZVZfVG9rZW46S0drbmJpcnlsb05wanh4TFZreGNTQjlsbm9iXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGQ4NDM1ZTQ1MzEyMWViMmUyMWMzYWY3MDhmZTM4NTNfeXZXSTlyWXphUzg4SEc0amVZdGRzNnBsSmxXbFRxS21fVG9rZW46SjRGaGJsTEZVbzU5RTZ4bk5FMWNidDBCbllkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZThmOWM4Mjk5ZjE3YzRmYjIxZGZjZjk3M2RhOTFlOTRfV0VWckRLRDlGNEJJWFRsdWRPbmRIQjkxUFo0Z1FnVzJfVG9rZW46QWtxSGJOMkx3b3Q3RVh4RU9BdGNBUTg4bkxkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```C++
#include "rclcpp/rclcpp.hpp"

class MyNode: public rclcpp::Node
{
  public:
    MyNode():Node("node_name")
    {
      RCLCPP_INFO(this->get_logger(),"hello world!");
    }
};

int main(int argc,char *argv[])
{
  rclcpp::init(argc,argv);
  auto node = std::make_shared<MyNode>();
  rclcpp::shutdown();
  return 0;
}
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWZiODBjYzhkYzYxNzVmOGFhZGJhMmM5MDU4NWNiZTNfd0Q0TmJHYnczaGdKQ2cxOFhUZG9JenM1aHcwaTN5VGJfVG9rZW46SE1kNGJjUFk0b3dHdzl4UUpRQWNobFRDblFjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTg2Nzc3YzlkOTQ4YWMwNjRiN2UxOWFmOThhMDRiN2ZfZEhCMEtxanJqMkJ3UEladFpCZHBXQ29CMTdOQktkaHlfVG9rZW46TEExMWJROTB2b0ZKdFN4dWo0NGNaT1B2bk1iXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å®ä¾‹åŒ–åªèƒ½ä¸€ä¸ªè¿›ç¨‹ç»„ç»‡ä¸€ä¸ªèŠ‚ç‚¹ï¼Œ

è€Œç»§æ‰¿å¯ä»¥ç»„ç»‡å¤šä¸ªèŠ‚ç‚¹ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTRkMDIxYjViODMxNWY2ZmRkZGQ3OTZlODg3ODBmNTRfT1VJNHBZUDNKcldRWGNrY04yZTlpb1o5QWZGQUNOdDlfVG9rZW46SXhvcmJpQ1ZZb0RFN0F4MnBscGN5aExEbkdtXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjU3MzUwZjEyYzBmOGIyZWQ2MGU2NTA0Mjc4Yjk0YjBfTU1DZTY3cmZNY3dieU1EZmV1cUtIamwzZ040ODF4dkdfVG9rZW46R1JtcmJKWVByb0xVTGN4cEw3ZGN1WEhNbjFkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTFmYWQ5MjA5ZThlODIzNGEyYjRiOWI4NDY0YTc0MjVfUDlUeTlRQmh3ekJkRXpLNU93Zkg2VzNMazBDTlZHdERfVG9rZW46SWFIT2JrZkFBb1dCc014cEhYOWNSRTVXblNlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTcwNmMzZDFmOTJjOTFjYzgxYmM5ODYwNzkwMDhlMTBfVGZvanh1b2JNTGwybEtqM0lJN0VCMVNDOUdBSXE1YjhfVG9rZW46SWgyWGJGaGlnb215SnR4cDBBcGNGU0N3bjdnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

åˆå§‹åŒ–å’Œèµ„æºé‡Šæ”¾çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ

å¯ä»¥å¾€contextå¯¹è±¡é‡Œæ”¾æ•°æ®ï¼Œä¹Ÿå¯ä»¥å–æ•°æ®ï¼Œç±»ä¼¼äºFreeRTOSé‡Œçš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œä½†ä¹Ÿä¸å®Œå…¨ç±»ä¼¼ï¼Œå®ƒå¯ä»¥å­˜å‚¨ä¹‹å‰çš„æ•°æ®ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmJhNGJmMDU1MWNlOTlkNGMxOTFmZDIwODg4MDg4MDZfbnE4ZDRVQTVUdWxCRTlGdm5hRFJweFNjdGU3bWNoT3lfVG9rZW46R2tZTGJxQjFzb0VyRFd4WDRkNmNJY1pvbjFjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

åˆå§‹åŒ–ä¸æ˜¯ä»…ä»…åªåˆ›å»ºcontextå¯¹è±¡ï¼Œè¿™æ˜¯å®ƒçš„å…¶ä¸­ä¸€ä¸ªåŠŸèƒ½ï¼Œå®ƒè¿˜æœ‰å…¶ä»–æ¯”è¾ƒé‡è¦çš„åŠŸèƒ½ã€‚

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDkxZjc5MmUxZDNiNmQ2NmU3OWRjMWZhYWU3MGM3NmRfZ0JJa3JzOXVnSzhyY0FibWUzMmtod2ZDRlVHRmVZd3lfVG9rZW46SjVCTWJZVXRGb2Rrcm54RWQ4cmNWMDJnblZoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmYzNzJhZTg0ZmFkMmVlNTkzZWMxNzJmOTc1ZmZkZDFfY2dMTXRTaUNFZ2RlT2pBRmRENnZLRWxhYUFmMkQ1UHFfVG9rZW46UWpBNmJCaUhJb1NVaHJ4dzBTbGM1a1ZubnJhXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å…ˆåˆå§‹åŒ–çˆ¶ç±»æ„é€ ï¼Œå¹¶ä¼ å…¥ä¸€ä¸ªèŠ‚ç‚¹åç§°ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTE3MjYxNGNiMjgyNWNiN2EyMmNhMzU3YjVkZDdiNThfVW5nd294SHlnRFlEVnNhanVhSkdsRnpxU0l4MktBMWNfVG9rZW46R0pyVmJINjRMb1NteFp4MUFOb2NsV2xjbmRjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ™ºèƒ½æŒ‡é’ˆå¿˜è®°çš„å¯ä»¥çœ‹[Vinciæœºå™¨äººé˜ŸC/C++èµ„æ–™](https://sdutvincirobot.feishu.cn/docx/N0GAdx6IDoqnRnx1q0TcX1Wfnvc)

æ™ºèƒ½æŒ‡é’ˆæ˜¯ä¸€ç§è‡ªåŠ¨ç®¡ç†å†…å­˜çš„æŒ‡é’ˆï¼Œå®ƒä¼šåœ¨ä¸éœ€è¦å¯¹è±¡æ—¶è‡ªåŠ¨é‡Šæ”¾å†…å­˜ã€‚ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆå¯ä»¥é¿å…å†…å­˜æ³„æ¼å’Œç©ºæ‚¬æŒ‡é’ˆç­‰é—®é¢˜ã€‚

æœ€å®‰å…¨çš„åˆ†é…å’Œä½¿ç”¨åŠ¨æ€å†…å­˜çš„æ–¹æ³•æ˜¯è°ƒç”¨ä¸€ä¸ªåä¸º make\_shared çš„æ ‡å‡†åº“å‡½æ•°ã€‚ æ­¤å‡½æ•°åœ¨åŠ¨æ€å†…å­˜ä¸­åˆ†é…ä¸€ä¸ªå¯¹è±¡å¹¶åˆå§‹åŒ–å®ƒï¼Œè¿”å›æŒ‡å‘æ­¤å¯¹è±¡çš„ shared\_ptrã€‚ä¸æ™ºèƒ½æŒ‡é’ˆä¸€æ ·ï¼Œmake\_shared ä¹Ÿå®šä¹‰åœ¨å¤´æ–‡ä»¶ memory ä¸­ã€‚

å½“è¦ç”¨ make\_shared æ—¶ï¼Œå¿…é¡»æŒ‡å®šæƒ³è¦åˆ›å»ºçš„å¯¹è±¡çš„ç±»å‹ã€‚å®šä¹‰æ–¹å¼ä¸æ¨¡æ¿ç±»ç›¸åŒï¼Œ åœ¨å‡½æ•°åä¹‹åè·Ÿä¸€ä¸ªå°–æ‹¬å·ï¼Œåœ¨å…¶ä¸­ç»™å‡ºç±»å‹ï¼š

```C++
// æŒ‡å‘ä¸€ä¸ªå€¼ä¸º42çš„intçš„shared_ptr
shared_ptr<int> p3 = make_shared<int>(42);

// p4 æŒ‡å‘ä¸€ä¸ªå€¼ä¸º"9999999999"çš„string
shared_ptr<string> p4 = make_shared<string>(10,'9');

// p5æŒ‡å‘ä¸€ä¸ªæœªåˆå§‹åŒ–çš„int
shared_ptr<int> p5 = make_shared<int>();
//å½“ç„¶ï¼Œæˆ‘ä»¬é€šå¸¸ç”¨ auto å®šä¹‰ä¸€ä¸ªå¯¹è±¡æ¥ä¿å­˜ make_shared çš„ç»“æœï¼Œè¿™ç§æ–¹å¼è¾ƒä¸ºç®€å•ï¼š

// p6æŒ‡å‘ä¸€ä¸ªåŠ¨æ€åˆ†é…çš„ç©ºvector<string>
auto p6 = make_shared<vector>();
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Yzk5ZDUxMTYyMGYzMjUzOGVjNzZkM2U4ZDRlYTdlYmZfNGhialpqSUdWWTk3YnNkWGQyNnZheDVaRkZlclFkS0dfVG9rZW46WlRhQmJMYVUyb2xGU0V4UWlNdWNsYnQ4bkZkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ç”¨make\_sharedå¯ä»¥åˆ†é…å †åŒºå†…å­˜ã€‚

3.  ## é…ç½®æ–‡ä»¶
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjhkZDljZTNkNjhjYjNmNDIyZGU1MGQyMmFjMjE0OGJfdjBvUVlSSElONUxJbjJpdGYwN2x2YzBEdFdFdEo1QjZfVG9rZW46RGExSmIwTXRtbzJHdFl4ZkJKQmNKN1cybmNiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

C++

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWUyNmI0OWM2NTlhMGUzM2RmOGMzNzcyYzRmNmEyMjhfSmZSVTlXcTkyeDFsaEZTMnhBZUZucEJUcVB6NjRjbzhfVG9rZW46WTU5UGJKR2lRb0hkS2N4N1k3dWN6ekNNbmNmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

Python

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmMwNjliNTA4YTg0MWUzMTJmNjg1NDMzZGJhOGVkNWRfc1dYUmtUUWFOUTJ5dHRRZzB2ZFpSTUVtMmxtb0FzdjZfVG9rZW46WENNcGJZVFhxb0QydGN4T0hqa2NsSTZ6bnpnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDgyMzE0NmFlMGUyZmQ3NmFhOTljMzYyYTcxMTFhNDdfUWtuWExmTkxPdkhrVHM5REI1UjJPSWZtQzExRUR0TEZfVG9rZW46RXVWaWJhRlh4b0Y0RW14ZmJFN2NtV1N1bjRjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Mzc4YTM3OGJiMDBlNDkxMWEzNzc3N2ZmMmNiODU1N2NfbHltTjhFMHRiM0NDSUgwWkx0RTlwd1plbGtNYlZqdGZfVG9rZW46SVhBT2J6bTVnb2NXZVl4MEJlQWMxNm9lblVlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

nameæ˜¯åŠŸèƒ½åŒ…åç§°

versionæ˜¯åŒ…çš„ç‰ˆæœ¬

descriptionæ˜¯æè¿°åŒ…çš„ä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯åŒ…æ˜¯å¹²å˜›çš„

emailæ˜¯ç»´æŠ¤è€…çš„é‚®ç®±åœ°å€

licenseæ˜¯æˆ‘ä»¬çš„åŠŸèƒ½åŒ…ä½¿ç”¨çš„è½¯ä»¶åè®®

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjJmYTFjMzAyY2I0OTY5YjJiNjIxMWM4NTFjODIxZDRfV0FoRTZSWmdmMXNNd1BkdXpDamxpRXR2aGNVUDVsVUFfVG9rZW46Q054d2JEcnJSb21tOGZ4ZHBMQ2NCSHhhbnVmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTM3ZWM2MTBmNzRkYTUxNGY0YmYxNTdkNDQzYzc2ZDhfRnZrRTlYOXdRaDdEMTJNM1VNU3ZMYUZhMTRkTVpTUGRfVG9rZW46UGFweWIyb1Fqb2pSZ1B4dVluQmNodm5kbldnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTQ1MzgxMWY5NDdkZDUxNTFjMWVmYzZjMDAxN2ZjNzNfNVN2ck9jODBrTnlFOTJiMHl1OEYwS3pvNGZjNHQ3VkZfVG9rZW46SEU5V2JMbE1qb0lqWXB4WWo0VGNrYmY5blBkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjQ2ODUwYjZlMzc3ZTMxMjZjYWExOWY1MTYwNTMyOWRfdjhhYTNLQVZFSWxIQnVFZm80QkJkbkhMd3dJMVo3ZVBfVG9rZW46V21DRGJodXVQb3EyWUl4aHdvN2M0UndCbnRnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2FkNTYxMjA0YTAwNjI5OGJiYjVlYTg1MDZlMGMxNjFfNDRqUWo0ck14MTlETTZzd01NN0xuYUVVaDJzNUF6RGVfVG9rZW46VGVXWGIyOVYxb043a0t4eXJ6NGNnUkJubm9TXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODZhYTBjMDk2MGNkZGE4NTY4MzFlYWUxOWJmOTlhZDFfYm1wSWdLdmlTbFhZaEVCWjlwdm9YVnA1Q3JPeVdkYTFfVG9rZW46Sk1FNGI0UFk2b3JkWnB4c2N6bGNya1ltbmhnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmZlMWVjOWFjOGI3ZjRkYjE4ZGRmNWU1ZTJiYmM5YzdfRGp6ZXRoVHR4bUpiZ3dtUHdtS2xYZ3FNYVdjMlZHbVRfVG9rZW46Q1lHNGJERTdJb2phUDN4cFowamM4WkdQbjFtXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzIxNWQ2ZWI4ZGI5YzExYmJjOTE5NGIzNWE0ZGQxMzRfVVpRUG11VGFKNGVHYVNCVlZuZk1nOUlCTDBnbzBNTGlfVG9rZW46QkV0VWJHR2hzb0xrTnV4S29NeWN6M0pRbnRiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NGYyZmYzNDE4MWYxZjU0NmRiZDY2MjkwYzQ3ZjVmNDVfd0txbVB5NFNMdUxNdGxaYllkdWtUU2JISERBckJ0djVfVG9rZW46QTZsT2JsN21Db2NWZnR4MEJyd2NUU3NSbmRiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¸å»ºè®®ç›´æ¥é‡å‘½ååŠŸèƒ½åŒ…çš„åå­—ï¼Œå½“ä¿®æ”¹äº†æ–‡ä»¶å¤¹åç§°ï¼Œåˆ™é‡Œé¢å¾ˆå¤šæ–‡ä»¶é‡Œçš„é…ç½®å†…å®¹ä¹Ÿéœ€è¦è¢«ä¿®æ”¹ã€‚å»ºè®®é‡æ–°å»ºã€‚

4.  ## å¸¸ç”¨æ“ä½œå‘½ä»¤
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDE2NTcwMWI0NmQ2MDA4MGI4MDY4MWZhMWJkZjZlY2Ffb041bWlPVmZFbnVCRnVhUW1aRFBITjFPY0l0NXhVdndfVG9rZW46UGdLQmJIWkNwb21jOWZ4Nk1HaGNEblJobjZjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzgzMmZlYTJiNzcyMmQwMmJmMTA5MTZjZjlhNzBiY2NfeVdEMWU2T1JiQmZDYXZCS0Zyb2FMNWhCZ1owTFBOQlVfVG9rZW46SnBSdmJzSUlpb09JQ3V4anRBMWM2QnZ2bkdmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ament\_cmakeæ˜¯cmakeçš„å¢å¼ºç‰ˆ

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTlmYWVjYTE1N2RmOWY2YzM0NmY5MTgzOWJlYmU5OGFfMzNnU21WMXNMcDdYd1V4a2NkRVI3cjVKUVBYZDNxS3RfVG9rZW46SWFVdWI4VTM1b2JHQ3F4UWtLbWNmRDdsbjJiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MWE0NzY5NjI1NjA3YjFhZGYzMjU4ODRmNmI5Y2UzMmNfaWh5ZmN6NjlCYm9XaVhpY3U4S0syN1AwbjdHMTJJZFlfVG9rZW46VHVyM2I1TnNlbzYxUVJ4NnNScGNVR0VkblFnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDk2YzYyNzc2MzllOTI0MWM5OWMyMTUwNGI5Y2E1NGFfVnNvSG1mRGVSN0dlMTZmbFhGeUJDWXFvTzlSREJ6YTBfVG9rZW46QjMzWWJDUTM1b3FadzB4WUtTbWNCSHJBbjViXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

\-h æ˜¯æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmY2MmZhYTA1Y2I2MmY3MWQ0MTE1ODYwY2YwOWJmNGJfYXpjMWwyckZaQlZqQU9VQ3VQQ2VtUkIyV1M4QzM1TnZfVG9rZW46Sk9LNWI1em9sbzRIcVN4UmV1dGN5TTZ1blFoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Bash
ros2 pkg executables #è¾“å‡ºå½“å‰ç³»ç»Ÿå¯æ‰§è¡Œçš„åŠŸèƒ½åŒ…å’ŒèŠ‚ç‚¹
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzliN2VhNTAzYjQ1Yzk1MjNhNjQ1MjBiOGVhZWM2MmVfVVdVdmt0OUtKTUpPMDd1dlhrUjE3MExDRGhJMlgzV0FfVG9rZW46T2FjUGJPVU1nb0JydW54R0RENmM3REM4bllnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODRhNWI1MDg0OWZiZjI4OWU5NTY1Y2RlOTgzZThhNThfUTFtWTM5Ym5uaXhuYWdTM3BsUWJBeDJncHJ3U243ckNfVG9rZW46STlObGIzWkdSb1V3dmV4bk1xN2NNTzZWbmNoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Bash
ros2 pkg executables åŠŸèƒ½åŒ…å         #æ˜¯è¾“å‡ºå½“å‰åŒ…ä¸‹å¯æ‰§è¡Œçš„åŠŸèƒ½åŒ…å’ŒèŠ‚ç‚¹
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTE2MmE2NTg1MmU0MjM3ZTQ5MzVjYWY5YTU5N2U1NWFfQjUzeVlVQ0hZdlVCZkc5WjBVQ1A0eVZJUXkwbG9FdmxfVG9rZW46RG1TUmJQYk5rb2kzbU94cExleGN0NnR4bnNkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Bash
ros2 pkg list #æ˜¯è¾“å‡ºå½“å‰ç³»ç»Ÿå¯æ‰§è¡Œçš„åŠŸèƒ½åŒ…
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWVjZjg2M2FiY2Q2NDNlNjFmMjc3ZTEyZjg0YjJkZTVfc2pTSUpybmtKSW5uZDJtSW9pOUNENUwwaThHWXY1c0xfVG9rZW46VW12T2JsUjRqb3VMZFF4czlXc2NGY3F2bkNhXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Bash
ros2 pkg prefix + åŠŸèƒ½åŒ…å   #æ˜¯è¾“å‡ºè¯¥åŠŸèƒ½åŒ…çš„è·¯å¾„(é‡è¦ï¼Œåé¢ç»å¸¸è¦ç”¨)
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjQ0ZWY0NWNmZDk1MzgyMTYyZDY0MDQwODkzMDkzOGZfWHdLZW9IQkpmekQ2WHBkM0hTRmVsMTM1clB0RG11ZjNfVG9rZW46SUxPWWJXTkJJb1RjWFV4MUN4eWNsUnpabnViXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDdjMWYyNjk1NDIzZjQ4MWFjOTAyNWU0YjUzMmE3ODRfNzhmSUtWQ2pVQjYxUnViYVBFbE5TQTNEYjNGdlFvVGpfVG9rZW46TVUya2JyQmQ0b01PM0x4a284M2N6czhZbmRmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Bash
ros2 pkg xml + åŠŸèƒ½åŒ…å   #æ˜¯è¾“å‡ºè¯¥åŠŸèƒ½åŒ…é‡Œçš„packages.xmlçš„å†…å®¹
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2I0MTZiYTE1Y2FkYjE0NjIyMzI0NzMzMWMwZDRlODVfM09kbTFrVUg2Z2U2MUp1Ymh6dTlEWTVINEE1Sk5leTdfVG9rZW46Qlh1amIyRlhLbzRQeWV4ZmhIQ2NTREUwbklnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

5.  ## æ ¸å¿ƒæ¨¡å—\_é€šä¿¡ç›¸å…³
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDVhYTIzNDg3OTAzYWM1ODI2NjFhYjRjMTA4YmM0Y2VfbEhxeTYxOHdTdm5DYWNObWtiYnVoMjRPTG9qS1kyN2xfVG9rZW46UG5QTGJtYmtnb0JLVFV4czIxdGN3RzNMbmxlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTZmNWIxZGFhMTFlYWU1NjA4M2JiYTMxM2M5NTc3YzNfdGpFaXpIc2NsRmNjdlFqRlRWQVFhQWRHQW5rQ0FDSjJfVG9rZW46SXpkVmJJUXA4b2phY1p4aDgwamNYTWhublliXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

é€šä¿¡æ¨¡å—è¢«å°è£…è¿›äº†åŠŸèƒ½åŒ…

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2E1Mzc1YzVkZWU2NWFiN2QwZDYyOWFmZjMyNjk2ODdfQ3U1OHJwOTd1WGJxTzlOZkdTSjRmckpTMjhkUnkydE1fVG9rZW46UnlNa2JPZGVQb0haRVN4bFdtR2NFaUlIbkxmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGZmYjNhZWYzNjYxMDMyN2RmNDY0ZGFiMzM2ZDNlZGNfdTdEV0xMQ0doUE85Y1lwUzJSM0xmTVFwMmJnZmdlSFBfVG9rZW46QXJsRWJLWDZHb1d0ekh4dGhhMmNsZUtIbnFkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ¯”å¦‚ï¼ˆä¾‹å­ï¼‰

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDViNTdkYTZjNmZlMDc2NWI4OGY2ZWM0ZDViYmQ3ZmVfc0RseHJrb2J3QlMzWHhkbXlLME1uOVZ6dUhCUVZtQ1NfVG9rZW46R2FGWWJYQ3RXb0hrMGh4S1pDMGNKSGdDbjNmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Nzk3ZDBlZjBiODE2MTY5MDk4NTM5ZGE5ZGU3NDVhMWJfQnZVTnVFbzZiMjFTdWtwT29QUDdYa2xCOWtub2x2SGxfVG9rZW46UlZQS2JzSXZFb0xpU3F4SFlCamMyQjdjblRjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¼šæœåˆ°å·¨å¤šçš„å†…å®¹ï¼Œå¯ä»¥ç”¨grepè¿›ä¸€æ­¥æœç´¢

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTVlODE5M2U1NDIwNWIwMDlmYTJkOTBkMTIyNjQzNGNfNEluakQxN3JRdENVTFlmZ3hEakVicW1XOXR4bVdrR01fVG9rZW46UXdPMWI5UnlLb2tIY2d4M29HTWNPOEk2bkVKXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTA0OGFiNzA4NzFmMGQ2MWIxOWU5YThmMzc2MjRhNmVfR0V1bDZZcWpGUzlrSm9HYzJncG5iWW5qOVROcDU1YWVfVG9rZW46QUYzZGJXelg3b25xdmh4dm1jNWNNNkJobjhmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTA3OGUwMTVkNDVlOWJmOTJkMTRkNGEwN2IyMWJhZDVfMlVvN3dhVkVhMHhsR0ZHcTN3Z2pGQVN2MGt0b29ZN1FfVG9rZW46SnFLbGJ1MWNOb0ZYS1p4aURsN2NhalBxbk1kXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWI1NmU1ZjZiMWVjMWYzY2M2OWVjZDU2OWQ1YzJlOGZfRVlaRjJWNjRLSmJPc3p5S2c1dzZGbTU3c2s0UlFYMnZfVG9rZW46RzdHamJacFppb2JuQzV4ajcwWGMydTBObklkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmMxNjg3NDY0ZjEyYThhYzE0ZGRkNTBkYjQzODI5N2NfQ1g3MWZYejVkQ1pEQ3VNSmdlQUtyclpRS1JaOE14TXNfVG9rZW46WERlQWJoeEZybzF2eU54dG9tRWNZaE81bmNmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¸‹è½½åˆ†æ”¯ç”¨ -b

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2ZlMGU4M2JjMjQxZDY1YmNlNzU2ZTE0OTNlMmYxNzVfZ2M2U1JtTXBiZWoxeGlvSHNDMXBnR05CVW1LNlJGMVJfVG9rZW46WEFXYWJUQUROb1pkUUV4TUJvWmN2QWVWbnBjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWE4MDVmODcwODcwMjVjNWJjMjcxZmFkNTRhMTA2NjJfTEUxSlNtOVpJSzViWVdaSEpJRWFreWRmeGFUQUtWYXpfVG9rZW46RlJlOGJmckZkb0ZNYWN4clAxVmNzZkdkblpkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æœ‰ä¸ªè­¦å‘Šï¼Œå› ä¸ºæœ‰ä¸¤ä¸ªåŠŸèƒ½åŒ…éƒ½å«humbleäº†

å¦‚æœå…è®¸è¦†ç›–éœ€è¦åŠ å‚æ•° --allow-overriding

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjQ1MWU4MGI1ZjI5M2NhNzg0ZmNjOGVlYjVjZWU2OTBfVGZyVDVBQnIwdUhWNTcyTVU1M3ozbGdBMFhEdEI5ZXRfVG9rZW46V2tYRWJoc0lGb3hkVzd4ekFMNWNZcVFDbkpkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWViODZlZWQ1NGQ2MTRhYTNjYWMyZjBmZTdhODJhN2ZfN29NeHNOTDZwN1VkbFJqcXJvdldKWXNsbnVBNHFzT1JfVG9rZW46UnRPTmJXNmxmb2hhYm94Wmt5RGNYZE9ubkRoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODFmMjZlYjc1MDM5NDE3Njk2ODViOTgxM2NkMmUyMTFfMFN0dm0xbm9kZ1hFV2ltOFIwcUhlMHpGdWJpM0sxTXdfVG9rZW46VW5RdmIzOWl0bzlSckp4MlgzS2NuSFRKbnViXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmZhODMzODQxNmVmODcwMTZhM2E5ODkzODZkZGNlYjlfZWxWbUlUTzc0VmxEbGZCd3BiaWRzR0EwQTlZVFVtaXZfVG9rZW46STJiSGJpQUhKb3JYbnh4TnRrVWNNOGJhbkFnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¹Ÿå°±æ˜¯helloworldé‚£æ ·çš„

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDk2NzdmYWE1MDRmMzViZjAxNzY0Zjg4YjI5OTAwMWFfSFc1clVFWHRTc0dxNkFtc2dsT1VFcVMwSHNjcE9mRW5fVG9rZW46S1FaY2JqYnAzb2dHYTR4ZGZwUGNrMGRjbkZkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

6.  ## æ ¸å¿ƒæ¨¡å—\_å·¥å…·ç›¸å…³
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTljNGE5ZjZlYzAzOGMxYWUyZTA4MmIzMGM1ODMwZDhfN21GblZ2QUx1aWhlRGVsa1NkNEYxaTB4YWZEaWc1SXBfVG9rZW46QktvZWJ1Vkw2b0plRGl4UFJhVGNlNEF1bm1oXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTEwMzRlODNjYTczYzhiMDllZjhjMDM2OTMzNTY0MGJfMUQ1Qlo2ZlNZdFE5MTVaemkxWVBhVTlnTUZPNHV0eHdfVG9rZW46TEpoWWJzWVh6b0FMeTJ4STJOdmNkUTRrblVoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzQ5MDdiMmE2NGI5NjUwZjBiNTZlNTNiNzQyY2U1Y2ZfeG9JSDZOTjl6amFoWHVJcUdSU0wyejZ6cWRjdzhrVlVfVG9rZW46UTQ2Y2JUZG5Xb0pCeWp4anFFSWNzSmxLbnVnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGJkNDg4M2JjOGZmZjZiMWM4NmFmMzg3NDA0NjJlZmJfQ3NMbmlUQ1hXSXpGYlFSNzduckNpc21BMnJPWVg2TlJfVG9rZW46QlpnT2JMdmdwbzhXVlV4cWdVMWMzSklWbnJiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWE5ZjQ2NDk3M2IyM2NmNzdlZWJjN2E4MjIwZjg5M2RfTWRIcEpMSlBjaWxIekZldWpVemtoTFgzZXJ3Ykh6elBfVG9rZW46SnZvVmJwN3pobzNqMkR4aFJqOWNiUEdwbnllXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjdjMDhmNDdiMmQ2NDJmMTZjNDlkNDk1Zjk1ODU1ODhfZTRtTEJHU1pFVlEyYlF4NDVZMFRXVlJaUjB4WEliM1JfVG9rZW46WFlWS2JobmtIbzFMN1V4ZFdsMWMyZEdpbkNiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å‘½ä»¤è¡Œåœ¨æŸäº›åœ°æ–¹æ¯”å›¾å½¢åŒ–å·¥å…·æ¯”è¾ƒå¥½ç”¨ï¼Œåœ¨è¿œç¨‹ç™»å½•æ—¶åªèƒ½ç”¨å‘½ä»¤è¡Œ

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDBmMDY5ZmQ2YWFiN2NmYWM5NWViNmNjMDJhNTkzZDVfaE5CbXVWZFhFNWN1eGxUVTRueUJNQ05XOHlhOWZUZFhfVG9rZW46UHFQYmJRT29Pb1RVV1J4UWdFbGNxUTFHbnNmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGQ1NjJjZjA1MGY2N2FiZjM2MjY1OGQ1OTM4NDg0YjNfSGZpQjVjdFpzNHBNWkdlUmZ1M1dWQWRrNzU5QzVVejZfVG9rZW46VTRVNGJQdnZ1b0hlMm54SDZ6bWN3SGZDbkZiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

Lanuchæ–‡ä»¶ç°åœ¨åœ¨ROS2é‡Œæ˜¯ä¸€ä¸ªPythonæ–‡ä»¶äº†ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NGE3OWMxYzBlZTBiODU1M2ZhYmZkODBiMWJjMDExM2NfUElmSHZ6ZUs5eW94a0dNelltS1pWWjNDZUpEeVFMdG1fVG9rZW46VDVUZ2JYRkJ6b1V1WEN4dWI1b2M4Z3JpbkhlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

Cameraæ˜¯æ‘„åƒå¤´ä½ç½®ï¼ŒBase\_Linkæ˜¯è½¦ä½“çš„ä½ç½®ï¼ŒLaseræ˜¯æ¿€å…‰é›·è¾¾çš„ä½ç½®ã€‚

é›·è¾¾æ£€æµ‹çš„è·ç¦»ä¿¡æ¯ï¼Œä¼šè½¬åŒ–æˆè½¦ä½“çš„ä½ç½®ä¿¡æ¯ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2I1YmEyMmJlNjUzMWFiNDVkMTY5MmYxYjZiZTI3MzBfUnhxNG1sRHhjN01FSXp0SmRVdEo1dDF4aVc3NTV0WU5fVG9rZW46WkdtV2JnQjZib0tGZlF4OWRtbmNISW51bmV2XzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWRhMGFmNDg3NTM3ZjA4ZDYyNTAzNTY0ZWI0Zjc3M2RfNUM0ME91T2w4Z3N0cE5OT0luMlBHcXRKOFVSSVFjdWVfVG9rZW46TmI5dmJNZGRpbzVOZzB4S2FmSGNaNkVobldoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTM5ZjkzYzAyNjRlOGVmOWQ2YjczYThhNzRmYTU1MGFfTlN1RWQ0ZGhMenNpWEx2S2RxcU9ZVWx1VFBHN2VkZ2NfVG9rZW46TUNENWJ3a0xmb1lnOU14bTVjamMyOU9ZblhiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTQ3YmI5NTI5M2FmODU0ZmFmMDZjMzc2ZjEyMWY0MWJfODRGYmVZb3ZNS3dFdXA4eHp1c2RJNWFtaHZnRDRmMVNfVG9rZW46VVZoYWJCNDVob2JIc0t4YzFQN2NNbFlnbnhiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

7.  ## åŠŸèƒ½åŒ…
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjI5NWQyMWFiYmYwYmI1NjM1ZmU3ODNkNGZiNmZhNGJfVkFkeGNVZVJzSUdWQjhreEh3djNXamx3QUx1QWc2cE9fVG9rZW46Rzd3T2JZYkxRb1NUeld4RWQxeGN4b29vbmdlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjdkNTc2YTRmMjJmNmU2ZmI0ZTk4YzA4YTQyMGJlYzNfMDhSTTVDdFBKR0hJcXpvRzhwT3lLWUp3bkEybWlvdGRfVG9rZW46WUYxSGJ4dm1Pb0lOYmp4SW15T2NNcGlmbm1lXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWM0YWNhYjNlMmE3ZDQwYmE4ZjUyZDk0ODA2NmZhYzFfbkpXZEU0UjM2U2gwdUJ4OTBJMXBod3RrMjljVVpBR3lfVG9rZW46S20yV2JWSndXb2F5cGp4UlFHbGNpcjN4bnVnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTgwNmY3OTgxN2ZiOGEyNWJkZTlkZGIzMDFhNGVjNmNfckNOY0U4WVRiaUk3cFFlYUdDZ0hDaUNZZDBDRERKZzJfVG9rZW46QVNtUmJ1Mlkxb2hpa014dElydGMxQVlhbjhjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDBlMzY2ZDc1ZGNkZTY0NmY3MTc3ZjJkNDBhY2IzMDRfa295M21mUGFMY0pidnZpMm51M3R3ZGphR1NwTGVDdFZfVG9rZW46WkY5cmJTakxob0RHUzR4REYza2NzTG5DbmpjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDAxZjE2Yzg0YzNmZjZmZDVmODRhYmFjZDJmODc3MGZfZGcxeGtwMmNtOFc5d1pxajk3enFaVndKTkF0WXlJa2pfVG9rZW46UWt4NWJGb3lTb0RhalJ4S0dUR2NDUVZVbnVlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmI1MTVjMTdlOTBkYjIxMDU5ODYxMjc5YjA4YjE1NjBfaGFhZ1RlVGt4SVN6QVFQWmEwSGpXemY1VDN3aVpCNVFfVG9rZW46VVNXZGJHWDhGbzVxd0R4WENtR2MxbzFzblViXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmRlYzA5ZDA5ZmIyNzQyZDAyYTA2NmI1MGViMmFlZTdfeHlWTk9KOEFkaU5CTUhDeGlERW41dDZaZDVWaFBEQjlfVG9rZW46WlBBemJIcWtKb1NtdDd4VmowTWNTN0U4blBnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

pythonæ˜¯è§£æå‹è¯­è¨€ï¼Œä¸ç”¨ç¼–è¯‘ï¼Œä½†æ˜¯éœ€è¦setup.pyæ–‡ä»¶ï¼Œsetup.pyä¸»è¦åŠŸèƒ½æ˜¯æŠŠå¯æ‰§è¡Œæ–‡ä»¶ç§»åŠ¨åˆ°installçš„ã€‚

  

8.  ## ROS2æŠ€æœ¯æ”¯æŒ
    

ROS2\_Wikiå®˜ç½‘:

http://wiki.ros.org/

ROS2\_Wikiä¸­æ–‡å®˜ç½‘(ROS2ç»´åŸºç™¾ç§‘ç°å·²æ”¯æŒç®€ä½“ä¸­æ–‡):

http://wiki.ros.org/cn

ROS2ç®€ä½“ä¸­æ–‡ç¤¾åŒºï¼š

http://wiki.ros.org/cn/community

ROS2æ’ä»¶ç´¢å¼•ç½‘å€:

https://index.ros.org/packages/

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzVlZmRjMWY5ZTlhZDRkY2Y4NzAyMWJhZmIzZGY2Y2ZfYWxhNzZWVUp5NnE4bTd3M2xadWxKVHdBZUNiNm51VENfVG9rZW46R3Zzb2IwN0pRb0FobE14OURabmN3WDBsbmRiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2U5ZTE0ZmM0M2MyMTJjNmI0NzRiZTM2NWRiZmZkZDNfUWg1SWxld1NyQ3VLaHBtVFFnU0hwdDlMRHNDYnJEb3BfVG9rZW46U09tY2JnVHhDb2xJdkJ4aVViNmNpZFJhbnNlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODUzNTM1NjIyMmQ2ZjhlZDc1ZDk0MjUyMDIyY2FmMThfeFBTSWpmaklQR1pIU25sWnVnSnBxamhPOThZYkFCMFBfVG9rZW46RlJBTWI2UHllb2NZNE54czA1VGNJU2p6bmVoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTI4MDhhNmNlZTBkZjUzZGUyODhiODU5ZWFjOWI4YWVfclduWjlTekd0dmtSUHhOcGtxWVZyOEVncUQ0QVR0WDRfVG9rZW46T3N2OGJBc1BpbzFGbGF4ZGNBdGM2UXBQbmdkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDE5YTZjNjU5Zjg3MDQ1Yjc5Yjg0M2ZmNjYxZGE0MDVfWWpVcEJ6OFJ6VnRzOEZlekJpbWJyWURRbVBLdFJWelRfVG9rZW46WmZ0OWJ0TEpzb0tudE14cndGd2N3N2VYbnlnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjczOTI4YTI5NDFmZmExM2RlZTI3NDc4NTI5NDE5NTZfTzRWcXJaWTRraWp0N2I3WWdsUmxWQjNTT3VLRk1ZWWNfVG9rZW46UmpZVGJuYm5ab3RJSG54clhnRGNSNll6blc0XzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2ViYjM1MzE3NjhhMmRhMTFjMGQxOTZiNzk4YzM4OGZfZ2FEYW5DcFlSZzhsaktaRW5USVFWczh0OExmM0NZdE5fVG9rZW46QXlncmJ4NlNsb29HOFR4eVhIVmNYRU1Rbk1mXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2JjODQ2NWM0MzUyYzQ4NDNlZmE1YzkwOWJlZmExZjNfNlpRaEc0clhBNFRmbGVlc0NxU0czTm5Sd0ppZHdYTHdfVG9rZW46TnBKMGJMQ3BpbzlvZFh4R2lCYmNMTnZ3bmlnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjMyMDYxM2Q5Yjc3MTBiOGM4Nzg1ZjhkNjFiODQwMmZfV0tuNmY1UzI4R25BUTNRblVidWpyaXFkSE9kUlo0aGxfVG9rZW46S3lZMGJrYk1tb0luUkR4YldyaWN1enNtblVoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzdjYmFlZDAzYjhhOGM3NjY4MTQzYzBjNmM0MjUzZDVfR3NRZHhwbXJOMElHbXZuZnNSN3NMQnNOZEZNMjlCdnlfVG9rZW46QkJoNWJBZWFobzBQZGl4ZzV6MmNaYW91bjZlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

9.  ## ROS2åº”ç”¨æ–¹å‘
    

è®¸å¤šROSå›¢é˜Ÿä¼´éšROSæˆé•¿åˆ°ä»Šæ—¥ï¼Œå…¶è§„æ¨¡å·²ç»å‘å±•åˆ°è¶³ä»¥è¢«è®¤ä¸ºæ˜¯ç‹¬ç«‹ç»„ç»‡çš„ç¨‹åº¦äº†ã€‚åœ¨å¯¼èˆªã€æœºæ¢°è‡‚ã€æ— äººé©¾é©¶ã€æ— äººæœºç­‰è¯¸å¤šé¢†åŸŸå¤§æ”¾å¼‚å½©ï¼Œä¸‹é¢åˆ—å‡ºäº†å…¶ä¸­çš„ä¸€äº›å›¢é˜Ÿé¡¹ç›®ï¼Œè¿™äº›é¡¹ç›®å¯¹æˆ‘ä»¬ä»¥åçš„è¿›é˜¶å‘å±•ï¼Œä¹Ÿæä¾›äº†æŒ‡å¯¼ã€‚

ROS2ç¤¾åŒºï¼š

https://www.ros.org/blog/community/

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTQzZjQyMDhkNDVhNzc0MGI3MGI4YTBkYmNjMGVlODBfQVpGWDFKa1hBNFpESjVYek54Z2xHaEJOcDYwTnZvbUxfVG9rZW46U0hpNWJxek1Bb053amF4d2F6bGNCWmJKbnVmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

* * *

1.  ### **NAV2**
    

Nav2é¡¹ç›®ç»§æ‰¿è‡ªROS Navigation Stackã€‚è¯¥é¡¹ç›®æ—¨åœ¨å¯ä»¥è®©ç§»åŠ¨æœºå™¨äººä»Aç‚¹å®‰å…¨çš„ç§»åŠ¨åˆ°Bç‚¹ã€‚å®ƒä¹Ÿå¯ä»¥åº”ç”¨äºæ¶‰åŠæœºå™¨äººå¯¼èˆªçš„å…¶ä»–åº”ç”¨ï¼Œä¾‹å¦‚è·ŸéšåŠ¨æ€ç‚¹ã€‚Nav2å°†ç”¨äºå®ç°è·¯å¾„è§„åˆ’ã€è¿åŠ¨æ§åˆ¶ã€åŠ¨æ€é¿éšœå’Œæ¢å¤è¡Œä¸ºç­‰ä¸€ç³»åˆ—åŠŸèƒ½ã€‚

NAV2å®˜ç½‘ï¼š

https://navigation.ros.org/

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWY4MjU3MGI1NjMxMTEyOWMxNDMzOWQ1YmRkZDg1ZjRfbG5EMExNTUphMlNYS2U1MW9lMjZuRmptbUZ4akJ1VUpfVG9rZW46QkdMamJTc0Nrb0pRQ3J4YVVkM2NtU3ppblljXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

* * *

2.  ### **OpenCV**
    

OpenCVï¼ˆOpen Source Computer Vision Libraryï¼‰æ˜¯ä¸€ä¸ªå¼€æºçš„è®¡ç®—æœºè§†è§‰å’Œæœºå™¨å­¦ä¹ è½¯ä»¶åº“ã€‚OpenCVæ—¨åœ¨ä¸ºè®¡ç®—æœºè§†è§‰åº”ç”¨ç¨‹åºæä¾›é€šç”¨åŸºç¡€æ¶æ„ï¼Œå¹¶åŠ é€Ÿæœºå™¨æ„ŸçŸ¥åœ¨å•†ä¸šäº§å“ä¸­çš„ä½¿ç”¨ã€‚OpenCVå…è®¸ä¼ä¸šè½»æ¾åœ°ä½¿ç”¨å’Œä¿®æ”¹ä»£ç ã€‚

OpenCVå®˜ç½‘ï¼š

https://opencv.org/

æ•™ç¨‹ï¼š[OpenCVæ•™ç¨‹](https://sdutvincirobot.feishu.cn/docx/K7gxdJjSFoAjerxTzaNcH3ufnpb)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2MxOTQwNTA2YjI2ZTUzZWVhZDg5NDM2N2RkNTkxYjRfOXVnRDFMMklzTm5JNU1nV0M0eFByWHZoWE15ck0xRVNfVG9rZW46WnhPSGJ0YTNYb3pFVlB4R1k3NmNESkRwbmFjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

* * *

3.  ### **MoveIt**
    

MoveItæ˜¯ä¸€ç»„ROSè½¯ä»¶åŒ…ï¼Œ ä¸»è¦åŒ…å«è¿åŠ¨è§„åˆ’ã€ç¢°æ’æ£€æµ‹ã€è¿åŠ¨å­¦ã€3Dæ„ŸçŸ¥ã€æ“ä½œæ§åˆ¶ç­‰åŠŸèƒ½ã€‚å®ƒå¯ä»¥ç”¨äºæ„å»ºæœºæ¢°è‡‚çš„é«˜çº§è¡Œä¸ºã€‚MoveItç°åœ¨å¯ä»¥ç”¨äºå¸‚é¢ä¸Šçš„å¤§å¤šæ•°æœºæ¢°è‡‚ï¼Œå¹¶è¢«è®¸å¤šå¤§å…¬å¸ä½¿ç”¨ã€‚

https://moveit.ros.org/

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmVkMmU3MTVjNmZhZmQxZDUwYTEyNmEwOWQ3MTgwZTNfQktOOFZHNWdHNFFwRVFpTFBFTWszVGhtS2ZnQ0lEd0RfVG9rZW46S2JQZGJVcmZ1b2hsRVh4T2lTRWNyWVRIbkdnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

4.  ### **The Autoware Foundation**
    

Autoware Foundationæ˜¯ROSä¸‹å±çš„éè¥åˆ©ç»„ç»‡ï¼Œæ”¯æŒå®ç°è‡ªåŠ¨é©¾é©¶çš„å¼€æºé¡¹ç›®ã€‚AutowareåŸºé‡‘ä¼šåœ¨ä¼ä¸šå‘å±•å’Œå­¦æœ¯ç ”ç©¶ä¹‹é—´åˆ›é€ ååŒæ•ˆåº”ï¼Œä¸ºæ¯ä¸ªäººæä¾›è‡ªåŠ¨é©¾é©¶æŠ€æœ¯ã€‚

TAFå®˜ç½‘:

https://www.autoware.org/

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGY1ODc1ZTlhYTM2MDAyZGM0NWYwODY1MzYzMzFlMWVfT0VEWngwYWVKWXlSZGxJOHdXR1NJcGVjQWpQSlNSNnJfVG9rZW46Qmp1RmJKMHRpb3lQdTV4Mm5XbGNuSk5mbnhVXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

* * *

5.  ### **F1 Tenth**
    

F1 Tenthæ˜¯å°†æ¨¡å‹è½¦æ”¹ä¸ºæ— äººè½¦çš„ç«é€Ÿèµ›äº‹ï¼Œæ˜¯ä¸€ä¸ªç”±ç ”ç©¶äººå‘˜ã€å·¥ç¨‹å¸ˆå’Œè‡ªä¸»ç³»ç»Ÿçˆ±å¥½è€…ç»„æˆçš„å›½é™…ç¤¾åŒºã€‚å®ƒæœ€åˆäº 2016 å¹´åœ¨å®¾å¤•æ³•å°¼äºšå¤§å­¦æˆç«‹ï¼Œä½†åæ¥æ‰©å±•åˆ°å…¨çƒè®¸å¤šå…¶ä»–æœºæ„ã€‚

F1 Tenthå®˜ç½‘:

https://f1tenth.org/

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Mjc1MjEyNDAzZDMxOWZkNTQwOTlhNzIzZmI3NjViNzhfQkpQNkRPcU5lQ2V1ZWdWUzluSGQ3UVIzTEZTNHhCZW9fVG9rZW46TjlET2JnU0Y0b291YWZ4ZllmTmNDUWdwbkNnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

6.  ### **microROS**
    

åœ¨åŸºäºROSçš„æœºå™¨äººåº”ç”¨ä¸­ï¼Œmicro-ROSæ­£åœ¨å¼¥åˆæ€§èƒ½æœ‰é™çš„å¾®æ§åˆ¶å™¨å’Œä¸€èˆ¬å¤„ç†å™¨ä¹‹é—´çš„å·®è·ã€‚micro-ROSåœ¨å„ç§åµŒå…¥å¼ç¡¬ä»¶ä¸Šè¿è¡Œï¼Œä½¿ROSèƒ½ç›´æ¥åº”ç”¨äºæœºå™¨äººç¡¬ä»¶ã€‚

MicroROSå®˜ç½‘:

https://micro.ros.org/

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmNiY2I3MWU3OGQxZTJkODdkMjNmNWI3ZTM3MTc2ZmNfVGtnckY5MTluQzVOQmFVSW9vSzNCaHNiVUJuVlpDem1fVG9rZW46UmRPeGJ4RFJib0t4Rk54V0FzTWNscEFEbjdjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

* * *

7.  ### **Open Robotics**
    

Open Roboticsä¸å…¨çƒROSç¤¾åŒºåˆä½œï¼Œä¸ºæœºå™¨äººåˆ›å»ºå¼€æ”¾çš„è½¯ä»¶å’Œç¡¬ä»¶å¹³å°ï¼ŒåŒ…æ‹¬ ROS1ã€ROS2ã€Gazeboæ¨¡æ‹Ÿå™¨å’ŒIgnitionæ¨¡æ‹Ÿå™¨ã€‚Open Roboticsä½¿ç”¨è¿™äº›å¹³å°è§£å†³ä¸€äº›é‡è¦é—®é¢˜ï¼Œå¹¶é€šè¿‡ä¸ºå„ç§å®¢æˆ·ç»„ç»‡æä¾›è½¯ä»¶å’Œç¡¬ä»¶å¼€å‘æœåŠ¡æ¥å¸®åŠ©å…¶ä»–äººåšåŒæ ·çš„äº‹æƒ…ã€‚

Open Roboticså®˜ç½‘:

https://www.openrobotics.org/

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWUxYmJhNjNiMWVkZWQ0NjU5ZTgzNTdmNWEwYzFmYmZfb2xIYU45NUFDckd5MmFEWUpmaWhseGlZOEN3UE5XS0tfVG9rZW46RkE1QWI4RmdSbzdzZGd4SkRYa2NlVUtLbnplXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

* * *

8.  ### **PX4**
    

PX4æ˜¯ä¸€æ¬¾ç”¨äºæ— äººæœºå’Œå…¶ä»–æ— äººé©¾é©¶è½¦è¾†çš„å¼€æºé£è¡Œæ§åˆ¶è½¯ä»¶ã€‚è¯¥é¡¹ç›®ä¸ºæ— äººæœºå¼€å‘äººå‘˜æä¾›äº†ä¸€å¥—çµæ´»çš„å·¥å…·ï¼Œç”¨äºå…±äº«æŠ€æœ¯å¹¶ä¸ºæ— äººæœºåº”ç”¨ç¨‹åºåˆ›å»ºé‡èº«å®šåˆ¶è§£å†³æ–¹æ¡ˆã€‚

PX4å®˜ç½‘:

https://px4.io/

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjNjZmYxMDAwNDExMDNhNTdkZjA0YzNiMmRlODI4ZWFfeFV4YXpqajhua0RoaklCZ1diUld3WG03YU52TFoxQk9fVG9rZW46V0ROamJRQXFDb25Oak14MTVCT2NXU3J2bmxoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

* * *

9.  ### **ROS-Industrial**
    

ROS-Industrialæ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œå°† ROS è½¯ä»¶çš„é«˜çº§åŠŸèƒ½æ‰©å±•åˆ°å·¥ä¸šç›¸å…³ç¡¬ä»¶å’Œåº”ç”¨ç¨‹åºã€‚

https://rosindustrial.org/

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmNhYzU1ZGI4MTA0NGE1ODlhZWM4OWFiODk2YTRjYzlfT0NpY3NYRk5WYlJhUnlVM0FwWE11dnc3dEg5SmZDenJfVG9rZW46RnFCeGI4a0lOb1JlTjZ4eElpUWNVSDg3bmJoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

4.  # å››å¤§é€šä¿¡
    

1.  ## é€šä¿¡æœºåˆ¶ç®€ä»‹ä¸ä»£ç æ¨¡æ¿
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGIzNDA5ZGI4YTEyNzBlZGYyZDFlMmMxOTA3ZmYxMmRfM2tSZ2NLTVF5ek5XQkZNYTNxZWFLcEgxY2pOSFNjbjNfVG9rZW46T2l0RGJiN3QxbzVjTkV4b2F1YmNqQXY3bjhlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```C++
#include "rclcpp/rclcpp.hpp"

class MyNode: public rclcpp::Node
{
  public:
    MyNode():Node("mynode_node_cpp")
    {
      RCLCPP_INFO(this->get_logger(),"Hello World!");
    }
};

int main(int argc, char ** argv)
{
  rclcpp::init(argc,argv);

  rclcpp::spin(std::make_shared<MyNode>());

  rclcpp::shutdown();
  return 0;
}
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Yjk5YTM0NzkzMTg0MjQyMzZjMzRiNDdlOTFhN2M5ZGFfSDBnbXVnV1h6cFhiSU9ud1pLeGRtSzFia3VJUU56VVJfVG9rZW46RkRlaWIzd1BCb3N4dkR4akxjTGNIZXJ0blZGXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODlmZWRhZDBmNjRlNzM5MWMwOTcyMjg0MWNhZWVjODBfRzFWejBJVE56clcyS1M1c2tOY2R5RXlMM3FwNjlrSXBfVG9rZW46TWFMYmJRSGdVb0RGY0N4NHJIeGNFZlowbjhjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

https://snippet-generator.app/

  

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDJhMTZkZjg3NjNiY2ExNGQ0ODI4ODY2ZTZmYWVhN2JfeHdZd2x0RWszQW5lMmNHektJNGg2Y0NYTmVURUVqRVpfVG9rZW46UnV3NWJvWVo5b2pYanB4dGczSmN0V1JqblRuXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2NiZmU0OWE2MjIyZWJlZDhkODA4ZDAxNGE0NTEwNDFfWjVTTFJ0bTV1UVU1QlFuSnRGWkZSUWt5cWdpY241cWdfVG9rZW46WEE3MGJhTXNNbzA5ZDl4b2JmYWM5T09PblJnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGVmNzc1NjQyZmUzMzhkOWU3NzAzYTVhZGQ1ZDY1ODBfMEJ0M1NjTjFxcHVnRUdoVEVNVktSaWNvR3ZrQ2JWeFFfVG9rZW46TUE2M2JCSVBXb3pGSlR4WnFueWN4VG9kbkplXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```JSON
{
"ROS2èŠ‚ç‚¹æ¨¡æ¿(C++)": {
    "prefix": "ros2_node_cpp",
    "body": [
      "#include \"rclcpp/rclcpp.hpp\"",
      "",
      "class MyNode: public rclcpp::Node",
      "{",
      "  public:",
      "    MyNode():Node(\"mynode_node_cpp\")",
      "    {",
      "      RCLCPP_INFO(this->get_logger(),\"Hello World!\");",
      "    }",
      "};",
      "",
      "int main(int argc, char ** argv)",
      "{",
      "  rclcpp::init(argc,argv);",
      "",
      "  rclcpp::spin(std::make_shared<MyNode>());",
      "",
      "  rclcpp::shutdown();",
      "  return 0;",
      "}"
    ],
    "description": "ROS2èŠ‚ç‚¹æ¨¡æ¿(C++)"
  }
}
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjdhZGUzYWM2N2ZjMGMwYTlmZDFjY2EwZTJlMzI4MGRfREliWFlCcXRpbldxdEFic3ZZY1hCVXlJQmg3S0RwaGtfVG9rZW46WnVzRmJMM3Zzb3NVU3R4dXR6a2NHalcxbnh5XzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTZkYzA5ZjcyNmU0ODE3OTNmMjNjNWZkOGNkNjNjNjFfMlNBdkhvZDJ5cUVsc3ZWRDlKNWEwbUpnbGdnREE1YzhfVG9rZW46RXl3V2JmY2hzb0Q2M2x4cElmY2NkTlR6bkhmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDY3YmM1NjllNGM5ODhjNDUxMzY0YmNiNmFmNmIyN2ZfV0ZST09SckpGVXBHY0ltSW5HbnNOUHlHejI4YUc5cWFfVG9rZW46QUF1emJYR0dNb3llbWN4dlZjQ2M5SDB5bmFoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWM3ZDBjMDk3NTU0ZGQ5YzExNDViZjM0MzNiMzljZDBfbElINTVHV2ZrTkJDRkFyWlpWOEJ2OUhCd3NpRTN4MEdfVG9rZW46VGpEb2IyajhUb2NyTG94TnJGRGNuS2FvbjZnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzA3ZGY2OGVhOWQ4ODU0ZTRlZTU5NzdmNjhjNmI5MjBfa0VmVW1Nam9LVGlrd1F1R2k2UEN5QXNpVHF2MnVSZ1ZfVG9rZW46VHZ4M2JUMFZ3b0xtRVR4SmlNSmNDeEZGbmRmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ç¬¬ä¸€ä¸ªçª—å£æ˜¯æœåŠ¡ç«¯ï¼Œç¬¬äºŒä¸ªçª—å£æ˜¯å®¢æˆ·ç«¯ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTk0NWY3YzQyMjcxZjU1N2IxNjEyMTcwOTk3NjlmMTJfV2NVZmd2SXJNOG81UlVVckZ5STBPR3NzRWpzSzhlMXJfVG9rZW46TWZMUWIyZDlUb2lLbFh4b2JVc2M1TVd0bk9lXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTczYWFiM2NiMWM1MDJkZDJmODVjYjBkNzZjNjMzYmJfcmp1eWlHN3paM0MwWUN4dEdZaW9PaXgxQVFzcENKSFhfVG9rZW46UWw1MmIxeFc0b1hIUmt4bHFrUWNHZ3VwbjIwXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

é€šä¿¡è‡³å°‘è¦æ¶‰åŠä¸¤æ–¹ï¼Œåªæ˜¯ä¸€ä¸ªäººç®—ä¸ä¸Šé€šä¿¡ã€‚

  

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDk3Y2U3NjgyN2Y4ZDdmMzc2YWVmNTYzMTdhYmViMzZfaEh3ZjNnV3YyUXV5NWV1T0x2NHJRaUtjWnNCQUc1U2dfVG9rZW46Q1JoemJOMThhb2x0b1R4cnl1RWNDRVF3bnJiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDkzYTEyNDlmMDVjODE4ZTU1ODYyYjlhNDA0ZjMzZDJfQWQzZEFKVGxsY0tXd1dQNkRLaXdlSm53NDhYWHZlMmpfVG9rZW46U0ZWVGJBMk5jbzNNdDJ4aWQzcGM3OTZ5bnhrXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjYxMzk3Y2VmNTJjMTVmN2FjYjYxMzVkMGRkNDQxNDZfcHpiOU9vZG1aWUQ2b1p2aExjamx3eTdkRVMwWVN2RmJfVG9rZW46QnlBS2JsQ0JQbzlQMVN4T0JNRGNPcnBmbkViXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

é¢å‘æ¥å£ï¼Œè¯é¢˜æ˜¯ä¸€è‡´çš„ï¼Œæ•°æ®è½½ä½“ä¹Ÿæ˜¯ä¸€è‡´çš„ï¼Œå°±å¯ä»¥æ— ç¼å¯¹æ¥

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmVlNmFmODU4ZTBjNmM5NjI4ODc1NTUyMjQzMDE0YmNfM0NIRHdzSkR1N1I3Z3JZTlRUbXNOSnFGRWh5MVRGTTJfVG9rZW46Rk5admJwS213b0MzTkR4WjRaeGMzREM3bm9kXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTk4NWNkZGRkYzE3Njk4Y2UxZDcwNDA4MTQ3YzRiOWRfRE9QVXJ1cWJIUDJ4dTNwckNETXJWS2tQanByNjJUc0pfVG9rZW46QWwzVmJZM1dwb2FkOFB4dzE2dGNSUjJybmgzXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¯é¢˜é€šä¿¡ï¼šåªèƒ½å•å‘ä¼ è¾“æ•°æ®

æœåŠ¡é€šä¿¡ï¼šåŒå‘é€šä¿¡ï¼Œå¯ä»¥äº’ä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ï¼Œå®¢æˆ·ç«¯ç»™æœåŠ¡ç«¯å‘æ•°æ®ï¼ŒæœåŠ¡ç«¯ç»™å®¢æˆ·ç«¯å“åº”

åŠ¨ä½œé€šä¿¡ï¼šå’ŒæœåŠ¡é€šä¿¡å¾ˆåƒï¼Œæœ‰æœåŠ¡ç«¯ç»™å®¢æˆ·ç«¯å‘çš„æœ€ç»ˆå“åº”ï¼Œä½†æ˜¯ä¸­é—´ä¹Ÿä¼šè¿ç»­å‘é€åé¦ˆç»™å®¢æˆ·ç«¯ã€‚

å‚æ•°æœåŠ¡ï¼šå‚æ•°æœåŠ¡æ˜¯åŸºäº**æœåŠ¡é€šä¿¡**çš„ï¼Œå‚æ•°å®¢æˆ·å…ˆå‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œç„¶åä»å‚æ•°æœåŠ¡çš„æ•°æ®æ± é‡Œæ‹¿èµ°æ•°æ®ã€‚ä¹Ÿå¯ä»¥æ›´æ”¹æ•°æ®æ± é‡Œçš„ä¸œè¥¿ï¼Œä½†æ˜¯ä¸èƒ½åˆ é™¤ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzgwNWQ1ZTBjMjgyYWExYTU4YjEwODFiN2I3Y2UyZWVfNnZMNDJtaEF5d2JxNmthUjQxQWJjVXlqVHZtbGJoZVBfVG9rZW46SnhJSGJSRnpjb1IzaDR4QXphaWNWNkR0bmdiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2MzZjlmNDg4YzBlODJiZmZlMTFjNzlkYjFiMTA1N2ZfNUxFQ1gwSzVOTkcxZnlXcU9xTHpsUFV0ODloQ0JKRGlfVG9rZW46WGFhNWI0MG5NbzZSYWx4OGZzc2NTY2pnbmJnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmE2MjUyMzUzMTdiZTM0NDg2NWY3NmJjMzM5NDhhOGFfbXhnemI2QXdCQk5kTm1aSjlQZlZWZ3pGVUkyajJ2UnpfVG9rZW46S084VWJQTTJXbzFHRWR4TDNxbWNDRHBrbmVlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODUxZjQ3MjhjMTBmNzdlNzdiNDgwMTU0ZTI4MjU0NTFfM29CT1hPcE12TkQ0ZEhJWjhzRGpSMW1HTEVPcUNReUdfVG9rZW46TEphbGI3RGNkbzNKaXl4WlFMUWNMSDRCblZjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTAxNWUxYTU1NjkxZGViZGViMDliZDk3YTViNzZkNjVfUDFlRDZEdzZFTW5JRVVIeWlQTDkwblhmNW03VGdTdG1fVG9rZW46U21tdGJsb1Y4b0VWYlZ4R25jNWNOT1RYbkFnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWI0ZmRkMDczODRiMTIxYjA1NWJiYzlmN2U1YTgyZDdfRTl4VGJoR0NHNE1lWmU0Nk1Ed2lUcmQ2THZNOG50bEJfVG9rZW46UlNnWWJvMkJmb2daeGJ4b0tHWGNLZHJTbkRlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTA0YjRmYTFhMzQwMjQxNmQxNWNhMmEzMTFiZjc2NzJfOE9RRzhyMlYxWFJabkZIT1VvM3Y5ZnNxUXBNc29DSE1fVG9rZW46WVhmTGJDakk2b3RseFF4OXl6cmN1MjFZbnFjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å‚æ•°é€šä¿¡ä¸ç”¨è‡ªå·±å®šä¹‰æ¥å£æ–‡ä»¶ï¼Œç³»ç»Ÿä¼šè‡ªå·±å¼„æ¥å£æ–‡ä»¶ï¼Œä½†æ˜¯å¼€å‘è€…æ˜¯çœ‹ä¸åˆ°è¯¥æ–‡ä»¶çš„ï¼Œè¯¥æ–‡ä»¶è¢«å°è£…äº†ã€‚

æˆ‘ä»¬æ“ä½œçš„æ•°æ®è¢«å°è£…æˆå‚æ•°å¯¹è±¡äº†ã€‚

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDAyZjBiNjBmYjdjMjllNGVhMjA3ZjRhMjM5ZmFkYzlfWEdpQjFlemI4YVhXWXdQM1RyQndDdFRUTm04ZkpkZXNfVG9rZW46TUVSeWIzTTdob0RETzh4TmRicGM3VHRQbnI5XzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ros2 pkg create + åŠŸèƒ½åŒ…åï¼ˆå¯ä»¥å†™åœ¨å‰é¢æˆ–è€…ï¼‰ + --build-type(æ„å»ºç±»å‹) + ament\_cmake / ament\_python + --dependenciesï¼ˆä¾èµ–ï¼‰ + rclcpp(ROS2çš„CPPå®¢æˆ·ç«¯) + --node-nameï¼ˆèŠ‚ç‚¹åï¼‰ + èŠ‚ç‚¹å

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmRlMTA3ODI3ZmVkNTQ3OTQ0Nzc0NmY5MTk0M2FmNTRfWHZxVjhVdElTMXN6ZFdZdmd5VDVrU3gwZEt2MVlpb3pfVG9rZW46UlljNWJ6UHdJb0RFOEx4Zk1IN2NzM2ZKbjNkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

åœ¨srcé‡Œåˆ›å»ºåŠŸèƒ½åŒ…

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjA3MzMwOWViMDBlYjQ1NjgxYzQ5NzVjM2MzY2QxM2RfOWl4U21peVZaaTdERldlMUtjeU9jVEw4MmkwUzZqbnhfVG9rZW46SEZzSWJ3Tnlwb29TamZ4OWUzbWNzb2pTbkFlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

2.  ## è¯é¢˜é€šä¿¡\_ç†è®º
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTQ4MDAyMmRjZWZmNTY4ZTkxNGIwYjJhNjJjNGYxYWNfT1lwZmJZME1nTGxRTkhsSlpOMmF4VXdZVk1PeG52ckRfVG9rZW46WUgwbGJEUTV4b0k5SlR4QlhDU2NDVjlMbktjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTgxNjA1NjNjYmUyN2FhZjA5ZDk0NmM4ZGE0OWU5M2Zfamw3OWNxZGlKTzZqWXhDRDhldlFHV2VJcHNnYm1GemxfVG9rZW46V0dob2JGcVE0b2xhTDh4SkNLRWNQbWlqbnljXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDNkMDk3N2EyNjM2YTJkY2ZlYzYxOTA4ODM5NzUxOWJfem9iTTlHREFOVEs4Wk5rVnlMQ0dCYk1EUEV4VXhJdllfVG9rZW46SzdXcmJzakd1bzJTY094OTkwamNXcUxSblRiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjNjZGM1YjRiYTNmN2VlZTFmYjY3Zjc4NDJmNjUwOTRfRFQ1RUdtcWc1eUNFNmdTQlBlVXNTNXpraXV5WG5jTDhfVG9rZW46R0IydGJXWXNlb3lJOWt4dnVlbWNTN25vblhkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

åœ¨ROS1é‡Œï¼Œnodeå’Œnodeä¹‹é—´é€šä¿¡éœ€è¦ç»è¿‡masterï¼Œæ¯ä¸ªä¼ è¾“æ•°æ®çš„nodeéƒ½éœ€è¦åœ¨masteré‡Œæ³¨å†Œç›¸å…³æ•°æ®ï¼Œmasterå†å°†ä¿¡æ¯è¿›è¡ŒåŒ¹é…ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDlkNzEyNjkzOTU3ZmZhNWNiZTBiNzYzMWUwY2IwMGNfeXV2SFI4clM0NUpQREo2eHRBcDFISzc4UW1KTmNVcnhfVG9rZW46T1hhUGJBS3NDb3pjRjJ4SUszMmN2WlpJbjZkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2MzZDM5MDZhMjFjZjljY2RkMjA2M2RlOGNkODRiNDdfY3YyRXhHM2xYc043NExZbGpUVmRMSG8weFN2elNNRGhfVG9rZW46SW9ObmJ0Z3d5bzlPU0t4cXFTVGM3eE5PblVkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¸€ä¸ªpublisherå‘å¸ƒæ•°æ®ï¼Œä¸¤ä¸ªsubscriberéƒ½ä¼šæ¥æ”¶åˆ°æ•°æ®ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmYzZGM1YjUyZmZmZDA5ZDc5NjEzMTEzODE5Zjc0MGFfVDI3VTVuOGZaMzVyazlPWlQxbHhialVhcnliRUo4azJfVG9rZW46U2o1YmJtMHZSb3JMT1J4YlpmcmMzMUhRbmJmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjdjNjEyOGFiMWUzODUwNWM1MjYyZjdhOTVjMzM3MzNfeE1PY3hBYnNTWW9XMXpxaTIyU1E0cnZzMjA3VGhZdmtfVG9rZW46Vm1CZWJnUWdBb0JRSml4a0hXWGNYZk9XbmlkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2I0ZTExNTAyYzMzNDRiNWQ0Zjk4OWMzMzYxZWRlMmZfRHZub0FabW0ycXZUbzg4d3M5Q214S2FZTmFpaWNPeEJfVG9rZW46UWtQZmJ1cThjb3BZU2V4bE1nUWNmblNDbnZkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

3.  ## è¯é¢˜é€šä¿¡\_å®éªŒ1(C++)
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmFhZGQ5YjQxNGE2NmZkMmQ2YTJlODNiOWI4NzRlYWZfRm5yNDNUbkVqNFE3Z0FZR2NhMUF2YW5aZUhINXBxbVFfVG9rZW46WlZiUGJNdXMyb1BmQ0p4NHVQamNiVEVybnRnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjU1NmRkN2I3OWU2NWVlZDA3YzcxNzg0ZjcyMWJiYTdfVjQ3eEh4YzJza1lYM21ZODZ1Z3pBNlpPNHFRVjl2R1VfVG9rZW46U0g0OWJ2NHZtb3ZsN1d4ZnlBY2NxM3lJbk9kXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTg4ODE5OTljNTQ5Njk5OWRkNGE0NzZmNWJmMjVkMDZfVTlnSEpzMU1lYUdHT1VBMUVMNXdJNGFNNFl1TUdNNGhfVG9rZW46VUt2QWJ6ZmtkbzFkZGd4cXl0N2M4SDE5bmhmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTY2NzU5NDNlMTIyOTBlZGU1NDk0NmYxOWFjMGEzNzlfUDl6TXBoOFdnYVpsc2d1RVgxcVdTZXJ0RFN0WnBLR2hfVG9rZW46VkRmWWI3UFlab3ZtMVl4SFNSNGMwT3Z6bjdkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Zjc5NmIwYmMxMmFiMjM3OTMzOWUyMTI2NzVlODdjOGFfSEkwQk1BSFc3eWtnWGtVRkF6eE12Y1pFN0J4Zng2SkpfVG9rZW46RE5uOGI1UkdEb1IxcHN4WThuNGNFc2t6bk9mXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTcyYzk1ODk0ZDU3MDhiZGU0ZGI5ZjAzODQ4OTQ2YjRfYWRneFhWcXV6ck5wckNVWmRjRlBIQWVCaUFyM2xyelRfVG9rZW46RVB6cWJFM0JUb2k1T1N4VGtYWmNUY1hubm9oXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```JSON
ros2 pkg create cpp01_topic --build-type ament_cmake --dependencies rclcpp std_msgs base_interfaces_demo
```

ä¾èµ–è¿˜éœ€è¦std\_msgsï¼Œbase\_interfaces\_demoï¼ˆè¿™é‡Œé¢å­˜æ”¾äº†æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„æ‰€éœ€çš„æ¥å£ï¼‰

ros2 pkg create + åŠŸèƒ½åŒ…åï¼ˆå¯ä»¥å†™åœ¨å‰é¢æˆ–è€…æœ€åé¢ï¼‰ + --build-type(æ„å»ºç±»å‹) + ament\_cmake / ament\_python + --dependenciesï¼ˆä¾èµ–ï¼‰ + rclcpp(ROS2çš„CPPå®¢æˆ·ç«¯) + --node-nameï¼ˆèŠ‚ç‚¹åï¼‰ + èŠ‚ç‚¹å

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjMwMGE3ZDY1NDU3NDc0MTc3MTdhNTJiM2QxNzE3ZjZfTkNJUUtEUXNZWklPZkpYY0dWU1RRdDIxaWg4S1daR3FfVG9rZW46SDFtd2JUcTFkb3YzN1V4MENyTGNpUjBSbkliXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODI2NTA5ZGE2OGJkNDBmYTgyOWNjMzhkOTAwM2IxN2VfYVdqRzc4cDFGenVGT29hT01UcWF5QjVWVk81bnpsZFNfVG9rZW46RGVMQ2JnVDdSb2dYemh4bG5mZWNVUFg0bnpmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGQ3OWVkOWE2NGNjNjBiZWJjYTk2NTQ3YTFlNTk4MjRfcDBQaXFzeDBIZ1M1SDZrS2h1RGtlTHR4SHVraThMZkZfVG9rZW46UGpPc2JmT2ZWb2lGdXJ4aENUVWNEbmpRbk00XzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

å‘å¸ƒæ–¹

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmZlZWEyNmEyZDc2MjI0ZDczNjIyMGEwMDIyMzU5MDNfdk9LZllwbHpHemdWeWE3aWNpa081TUxlTzM0MXE0amdfVG9rZW46UFNsYWI4ODYyb05CTEF4bU5QM2NFWG9RbnhlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å®šæ—¶å™¨æ˜¯ç”¨æ¥æ§åˆ¶å‘é€é¢‘ç‡çš„ï¼Œå®šæ—¶å™¨é‡Œè¿˜ä¼šæ‰§è¡Œä¸€ä¸ªå›è°ƒå‡½æ•°timer\_callbackã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2QzNTk1ZDM5MDdkNWY5ODU4Y2Q1MzJiZDRjMjFlOGJfWnI2cnZWQUQ0aE9YbkxYMXMwdXlSaXc2Z1B2cHBnazVfVG9rZW46RVlUQ2JKSDNxb0xBSUp4VTZtcmNRTWRYblljXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

count\_æ˜¯è®¡æ•°å™¨ï¼Œæ¯æ‰§è¡Œä¸€æ¬¡è¿™ä¸ªå›è°ƒå‡½æ•°ï¼Œcount\_å°±++ï¼›

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjQ3OTcwMjFiODQ4MWQzMjM0OGM2YWNmNjNjZmFjMzNfS2NCbm5ZcXVPclBZVEZ4dEcwUHM1QWNON0pnZzhIM3RfVG9rZW46R1dlZGI2eTZyb0FTNVB4YWxQZWNLbkZabldQXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

spinå‡½æ•°æ˜¯ï¼Œç¨‹åºä¸€æ—¦æ‰§è¡Œåˆ°è¿™é‡Œï¼Œå°±è¿”å›åˆ°ä¸Šé¢ï¼Œè¿”å›åˆ°ä¸Šé¢æ˜¯ä¸ºäº†è°ƒç”¨å›è°ƒå‡½æ•°ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªspinå‡½æ•°ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¿™ä¸ªå›è°ƒå‡½æ•°æ˜¯ä¸ä¼šè¢«æ‰§è¡Œçš„ã€‚

ä»¥ååªè¦æˆ‘ä»¬åˆ›å»ºå®ŒèŠ‚ç‚¹ç±»å¯¹è±¡æŒ‡é’ˆï¼Œå°±è¦æŠŠè¯¥æŒ‡é’ˆä¼ å…¥spin()å‡½æ•°é‡Œã€‚

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2E4NzI3Zjc5Njg2ODQ4MzBjMzg4NWZjNmIyNzE2YzZfQW10ZkViaTJCeFZBaDNiY2ZmUVEyQ3dFOVVSWHEyeTVfVG9rZW46S0gyNWJEQ25Mb0huM0R4RXUzcGNNdmhsbjNkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDYxYTY0YTY5ZGM4N2RmZmZlM2IxMWQ5ZjI1ZjNkNDBfZm8xbHkzdW1pYkhkVUNqWFdEU0Y4NGJ1cnpyb0tMVDlfVG9rZW46QzBqVWJKYWVqb3JMZ2t4QVowOGM0QWFrbnJjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2ExYmQyZmVjMDBiYzA0ODJkZTJiMDY3N2U2YjdjNDVfczlHUFcwVnh2SFVNWHBXSDM3WGZKYkFjRWNSbmVWQzJfVG9rZW46QXc4WmJlQ29Lb1BCVVh4Vjd1dWM0R1h5bmpnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTZhN2I5NDQ5YTU1NWIwZTk0ZDU0ZjM1NGRhNjI3ZTNfSVFRQjVaU0VQZ05sZkR1MGxsVFFKYThoR3JKNURJU0RfVG9rZW46SHVFRWI0ZFJBb1BCNVh4d3hNSmNXa2JObk1jXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjQ3MjllOWI4ZjEwODkzOTYwMzcwYzRiZmEwMTM2ZTNfcmY0WU8yOFIzVUJTRjhNSnJTb0JQdXBrdjFaY0J1RXZfVG9rZW46SVpsSmJYTG1Cb21Qcnd4Y3lqNmMzTWpTbjVlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2EwOTc1YjVmMjhjNWU0OWZmMzJmNzU1OTZlODM3ODFfa0dQTXN0VFlUQ1JzQjVnTlFsdXA4Q1liT0xldGZoUThfVG9rZW46REFUcWJiQmlIb2lKU3F4MHpQZWM5Y1dtbnBEXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```C++
#include "rclcpp/rclcpp.hpp"

class Talker: public rclcpp::Node
{
  public:
    Talker():Node("talker_node_cpp")
    {
      RCLCPP_INFO(this->get_logger(),"å‘å¸ƒèŠ‚ç‚¹åˆ›å»ºï¼");
    }
};


int main(int argc, char ** argv)
{
  rclcpp::init(argc,argv);

  rclcpp::spin(std::make_shared<Talker>());

  rclcpp::shutdown();
  return 0;
}
```

æ­¤æ—¶ç¨‹åºå¤„äºæŒ‚èµ·çŠ¶æ€ï¼Œä¼šä¸€ç›´è¿è¡Œï¼Œå› ä¸ºspinå‡½æ•°ã€‚

æƒ³ç»“æŸå¾—æŒ‰Ctrl+Cã€‚

æˆ‘ä»¬æƒ³è¦çš„ç±»å‹åœ¨std\_msgsé‡Œï¼Œæ‰€ä»¥è¦åŠ å¤´æ–‡ä»¶ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmI1ZTM2NDdjNjdhN2NhNGE0Mjg1ZGQ4MjhjMmRjMmNfTGlQblp6MFhoMzVRdlczZ3RNTEtvRHFOMjhzZVZqQkdfVG9rZW46VlVicGJRUlBWb200SmJ4U25MWmMwN1FlbkxiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

create\_publisher()ç¬¬ä¸€ä¸ªå…¥å£å‚æ•°æ˜¯è¯é¢˜åç§°ï¼Œæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²

create\_publisher()ç¬¬äºŒä¸ªå…¥å£å‚æ•°æ˜¯QOSæœåŠ¡è´¨é‡æœ‰å…³çš„ï¼Œæ˜¯é˜Ÿåˆ—æ·±åº¦æ˜¯ä¸€ä¸²æ•°å­—ï¼Œæš‚æ—¶å¯ä»¥å…ˆå¡«10æˆ–è€…20ç­‰ã€‚

ä¹Ÿå°±æ˜¯å½“ç½‘ç»œè´¨é‡ä¸å¥½çš„æ—¶å€™ï¼Œæ¶ˆæ¯å‘ä¸å‡ºå»äº†ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ•°æ®å…ˆå­˜åˆ°é˜Ÿåˆ—é‡Œï¼Œå‡è®¾å¡«10ï¼Œæœ€å¤šå°±å¯ä»¥å­˜10ä¸ªæ•°ï¼Œå½“ç½‘ç»œæ¢å¤äº†ï¼Œæˆ‘ä»¬å°±ä»é˜Ÿåˆ—é‡Œå–æ•°æ®ï¼Œå°†å…¶å‘å‡ºã€‚

å…¶ä»–å…¥å£å‚æ•°æœ‰é»˜è®¤å€¼ï¼Œå¯ä»¥æš‚æ—¶å…ˆä¸ç®¡ã€‚

è¿”å›å€¼æ˜¯ä¸€ä¸ªpublisherçš„æŒ‡é’ˆã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmQ5OTg5YWY1NTg3ZGQxMDZkOTZiNWRmODA1YzRjMjFfYnJYSjhlTkJMNnY0cGZhaEFydWtlVmZtVE1VZllubnRfVG9rZW46SkpwY2JnVnN6b3VIUDl4MEFsTmNRYXMzbjBjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NGUwM2FlYWRkYThhMzBlNzhkMjA2YjQ1NGJlN2ZlNjVfZTU3UXNMTkFQU2ZuZGFvU2VoR0w3WVRSRERxYzZnZ0FfVG9rZW46SmtLNGJPa0E3b29hejJ4SnlJa2NiTDVRbjdlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2U3NmViMjkwYjI3ODljZWVhNTJiYzUxNDFkMTAyY2VfY2JRU1h4dVZLbmI1cjV2QnQwaFkwdHZObnZGOHh1OUlfVG9rZW46SUhzM2JTbktZb2I4Qkh4OGY1SGN4d1I2blBnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmUzYTY2ZWU2NGJiNzUzMTcwYmQyMDAyZmM4OTIyZDBfR2VOZzBHOFJYUmQxSmY0bDZmNEJMYVRjVDhES1Y3bWVfVG9rZW46VndxaGJsc1RMb1NrZDl4Q3A3S2NmWDQxbkplXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

åˆ›å»ºå®šæ—¶å™¨ï¼Œè¿™ä¸ªå‡½æ•°æœ‰æ¨¡æ¿ï¼Œä½†æ˜¯æ¨¡æ¿æœ‰é»˜è®¤å€¼å¯ä»¥ä¸è®¾ç½®ï¼Œ

ç„¶åä¸‰ä¸ªå…¥å£å‚æ•°ï¼Œ

ç¬¬ä¸€ä¸ªå…¥å£å‚æ•°æ˜¯æŒç»­æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯å‘¨æœŸï¼›

ç¬¬äºŒä¸ªå…¥å£å‚æ•°æ˜¯å›è°ƒå‡½æ•°ï¼›

ç¬¬ä¸‰ä¸ªå…¥å£å‚æ•°æœ‰é»˜è®¤å€¼ï¼Œå…ˆä¸ç®¡ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Njg1NzRiZTE5MjE1ZDRmNTVlODFlNmY2MDA3YzhhOTZfSVpGMDhHVFR4cW5UNzdrZzhkZzIyaEFMclJxeTlWTFFfVG9rZW46TDFqT2JTcG5kb01TWjd4SFZjQWM4Yk5yblZjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä½¿ç”¨è¯¥å‘½åç©ºé—´çš„ä¼˜åŠ¿æ˜¯ï¼Œåœ¨ç¬¬ä¸€ä¸ªå…¥å£å‚æ•°ï¼Œå¯ä»¥ç›´æ¥å¡«æ—¶é—´+å•ä½ã€‚

å¦‚æœæ˜¯1så°±å†™1sï¼Œæ˜¯100mså°±å¡«100msã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWU4NDlkMWJkMzMyZTcyNjcwNzRiMGYzZWE3OTA5OGRfdVdVemE3M3NrT1BkZW16SUtYYWFuRXBxdFZyYnVadEVfVG9rZW46QTAzQWJESm0yb3BCOXN4U0FEZ2NGNVJTbjRkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzRjMjU0ZGY3YmZhMjIwNTQ5Y2RmYTk5ODdmMmY1ZTVfdjM0aHplNHlzNHpMWVNSU01KZDJadHBqa0doZHE5RGxfVG9rZW46WFY1M2JFMWlNb1hpcGx4SDRWOWNWRXhWbnZoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¯¥å‡½æ•°è¿˜æœ‰ä¸ªè¿”å›å€¼ï¼Œè¿”å›å€¼æ˜¯å®šæ—¶å™¨ç›¸å…³çš„ä¸€ä¸ªæŒ‡é’ˆã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTdlODM3YjVmODc3ZTBhZTlhMDBjMDgxMTFjM2EyNzBfQ3o0b0w2MzZCeURET3NsaDAxZjZXYkdnZXNUMTN4eTJfVG9rZW46TmxFN2JEZnVXb0FGa1V4R0hzeGNnRDIwbkZnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODU1MDIzZmM2NjQxODE1OTk3ODQwMWM2NTJlMzA0MjlfaVd0SkJha2hHNzZKTDFRRXpLalhYajVqVFdGVll6YTZfVG9rZW46R1dtM2JCSkpVb0ZlUlN4SHZ5SmNOQXRSblZiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2JjZTVhMTMxNGM3ZTQ1ZGNhYjIyYjc0ZmE2OWM5YzJfOW1HNkdDN1ppNlZmUENCV09qNEFSakp6ZnluQzNDbmxfVG9rZW46QVlEQmJ1c2tZb3VyQTF4aGgydWNWcU5EbmtlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¯¥å‡½æ•°æœ‰å¤šä¸ªé‡è½½ï¼Œé€‰æ‹©é€‚åˆè‡ªå·±çš„ä¸€ä¸ªå‡½æ•°ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODYwZmJmY2QwMjllYTMxMDdlNzFlYzg2MzI0NDEwODBfUTVDeGN1bUx5ajB1Y3RNNHltVzUwVVlxUzM4bUZiTURfVG9rZW46UnNJT2J6TDNTb2VxTWN4clVEOWNrS3J3bmlmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å‘å¸ƒå¯¹è±¡å¾—å…ˆåˆ›å»ºå¯¹è±¡ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTgxYWE5ZDg2YjRhNzEzNWQ5ZGI5ODI5ZWI0OGNjY2JfVXJoVHFyZzkxY1g0VHZUajdhdGVLRno2VEhiWTdzRWFfVG9rZW46VTlOUGJIRFJDb0xhalh4bXVGWWN6ekxHbnlUXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NGQyZWMxY2Y0ZWQzNzdjNGEyZmRkNWEyN2U5MDZlNWFfMUtiY2dQVWxsMDVHenFDeUwwU0FSUld0MTU3OHZqdHBfVG9rZW46U1V3cmJJRXZQb1o4eVp4cmNLaGNIc0FPbjJkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDZmYjZmNGU4Zjc5YzVkMWUyYmViOWIwYTNiMWYxZGVfa3VDOTk5STFTUThyclMyclZldExjbjBPdldoazVMUTZfVG9rZW46QzJRcmJHcHUwbzJmZHB4aFVnU2N6ekt4bmNoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æŠŠcountè½¬åŒ–æˆå­—ç¬¦ä¸²å¹¶å‘é€ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTMyMDNiNmY4ODdiNDM5ZjEwNGQ4ZDQ2N2ViMTM2ODJfNVVaU3Z5c1F5dWFLUHhHQ0dlVW1jT3IwTWdkWjJONjRfVG9rZW46R2VGaWJxZTFJb21CdTR4M0ZNV2M1eXN0bnZkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å› ä¸ºå®ƒæ˜¯ä¸€ä¸ªstd::stringç±»å‹çš„ï¼Œæˆ‘ä»¬è¦è½¬åŒ–æˆcé£æ ¼çš„å­—ç¬¦ä¸²ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWM1MmY1MjJlYjhmNmI4MDY5NDdjYmY5ZGNkODk1ODJfNDhhcWdNdGFVZDlpc2J4WURBaDRpam1waHZNWHNEb09fVG9rZW46RUN4TGJveFdwbzl3d1V4djlOU2NmZEVGblpiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2VjYTdlY2Y5NWMwNTAxNTNiZjgxZDA0Y2E3NDU4N2Rfd2N4TldySHBySVI4NU5SVHNKd0I0UlFtbUoweE1aR0VfVG9rZW46SUczY2JFM3lYb3JmSmx4MjBOMGNoNEM3bmpiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2FiOGM3MjVjNzE3YWEzZDJmODA4MWQ5MDA4NjM0NWRfTlZ4UmVmbDBDcTNkOVcyRG1hTVMxdGhNQ0tjNmZ1WlVfVG9rZW46Vkx4NGJTWFNHb3laVkx4VGZZVmNOSmdPblRmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å°½é‡åœ¨æ„é€ å‡½æ•°çš„æ—¶å€™ï¼Œç»™countèµ‹åˆå€¼0.

```C++
#include "rclcpp/rclcpp.hpp"
#include "std_msgs/msg/string.hpp"

using namespace std::chrono_literals;

class Talker: public rclcpp::Node
{
  public:
    Talker():Node("talker_node_cpp")ï¼Œcount(0)
    {
      RCLCPP_INFO(this->get_logger(),"å‘å¸ƒèŠ‚ç‚¹åˆ›å»ºï¼");
      publisher_ = this->create_publisher<std_msgs::msg::String>("chatter",10);
      timer_ = this->create_wall_timer(1s,std::bind(&Talker::on_timer,this));
    }
  private:
    void on_timer()
    {
      auto message = std_msgs::msg::String();
      message.data = "hello world!" + std::to_string(count++);
      RCLCPP_INFO(this->get_logger(),"å‘å¸ƒæ–¹å‘å¸ƒçš„æ¶ˆæ¯ï¼š%s",message.data.c_str());
      publisher_->publish(message);
    }
    rclcpp::Publisher<std_msgs::msg::String>::SharedPtr publisher_;
    rclcpp::TimerBase::SharedPtr timer_;
    size_t count;
};

int main(int argc, char ** argv)
{
  rclcpp::init(argc,argv);

  rclcpp::spin(std::make_shared<Talker>());

  rclcpp::shutdown();
  return 0;
}
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGQ2NzlhYzlhMWQzNGYzY2I4OTRkM2UwMGZiMzQwNWRfOXk1NjB4ZEtHT2lBazk2aUoydlkyczhRQXhqclRncmJfVG9rZW46WHVlNWJ5bFJpb0hUbG54cm8wemNMWklnblhrXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä½†æ˜¯ä¸ä¸€å®šæ¶ˆæ¯çœŸçš„å‘å¸ƒå‡ºå»äº†ã€‚

éªŒè¯æ–¹æ³•ï¼š

```Bash
ros2 topic echo /xxx
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWQ0NDZjZjBhY2U0NjBmNTgyNGY1ZDllZjdjODJkMDJfaUVEc0dnWHZtVDBwZUgzdnozZ0FFRGl3YmFKWXN6OUhfVG9rZW46V3hFcmJ1dTBjb0d6QmZ4ZVNkSmNsQnRTbk5oXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™æ ·æ‰èƒ½ç¡®å®šæ¶ˆæ¯è¢«å‘åˆ°chatterè¯é¢˜ä¸Šäº†ã€‚

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODQ3NGVmM2Y5YzE1OTMzYzhkMWQzNzZhMjhlYzZhZmNfaEJxQ0NHeEZXWXR6VE4wOHhJemNtN2dJYmM1S2Q2R3lfVG9rZW46SnJ1cGI3a1N0b2wzTGZ4cUxTT2NrTXVBbmlmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTIxNTI2ZjEwZDY1NmZjNzQyNGVkMjlkZjI3MzBlMTBfSEsxMGJMTlpGbktwS2FXQ1JQcU96MFhZNjVYUUJ5U1pfVG9rZW46VFRKaWJPY045b1NXQkJ4Rno5MmNEMUkybnRmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjJlNWFhODZlM2YzZGJkMjhiYmMxNGUxYzRkNmYyOTRfdTZ1WmdUYjFWMHplZFFlQW1uQ1RWQmNhN1c0UGZPMzVfVG9rZW46SXR0b2JQeDJHb0l3Q1p4V2ZIemNhUTJxbkZnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MWZiNzE1ODcwNTNiOTRlMTY3Nzc1M2MzYmI2NTljMmVfSVBsbTcxZW1hNHhPWHNoSE9icDhYa0drWEs1UDR5ZHhfVG9rZW46Tk13YWJMRFVzb3JOMDF4T2twYWM3U0h1bk9mXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2FiMGRiYjczYjYwNzA3N2Q5NjRiMGU0OWM2YjUzODFfTVhzMThlWHBvVzIyMzJqb1FnaWlVaDhhT2JTWVZDTW1fVG9rZW46Q0JNTWJvd2s4b01XZVp4N00xMGM5ampvbkFoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjUyZmNhMmUyMTc4ZDcyZjZlNzE3OGI1OWMyMThiMGVfTjhTQWdiYTIycUNsalo3emtlNkFZMWRLeGl2VjJkTVpfVG9rZW46VXJqYWJJYnZjbzg2cFV4bUt1OGN1ZXBPblZkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjYwOGMwNWZlOGIyNDY4ZjlkYTY4YjcwYWEzNzVhMzNfWkVhZlIxYmFlTllZM0dwdUR2a2dlcHlsRDExZ1lDOWNfVG9rZW46RXN0VmJqdnhIb3M0SlN4TmxPcWNoQkxobnhjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NThjZDkyNmYyZjg4NjdmMTEyOTdhMWI5MjZjMzY0Yzhfd05nNUl2eGNIMEIzeTc2REJyUTJIMHNyT25FM2s3dU5fVG9rZW46TEdiNGIxRE8xb3c4OUd4bmtib2N0V2FJbmxlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjUzMzk1ODQwMTEwYjdjY2U3ZGYxMmY4NzRhMDYxMmFfZ0R1bmFYclo5OXRnd2ZqNlc3MlVBY3hURnpyeGpqb2lfVG9rZW46TzJrQWJrUVg3b1dUeGF4cVo2TGNVSVpnbmdkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTI1ZDdlYjg3MDRmOGZlNzYwNzE5ODk5ZTgwNzRlZDZfaUU3c1Znb0ZNczBCa1FmVFlnTmFTSWp4dXZZSDVMWTZfVG9rZW46TE0wRGJoZEdOb0tmcjd4MFN2SWM4VFY2bmplXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```C++
#include "rclcpp/rclcpp.hpp"

class Listener: public rclcpp::Node
{
public:
    Listener():Node("listener_node_cpp")
    {
        RCLCPP_INFO(this->get_logger(),"è®¢é˜…æ–¹åˆ›å»º!");
    }
};


int main(int argc, char * argv[])
{
    rclcpp::init(argc,argv);

    rclcpp::spin(std::make_shared<Listener>());

    rclcpp::shutdown();
    return 0;
}
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWVlODUyYjk0N2YwNmZhZTU2NDY3NzAwMWQ4NDQ0YjdfdTl5eEpDaU90RTlJT3lhT3ZrSlBBNTVJS3ZWNjdDcUlfVG9rZW46SUFWYWJpNUNtb1BuOVd4eFY5Y2NOOHE2bjBlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ç¼–è¯‘ä¹‹å‰åˆ«å¿˜äº†ç¼–è¾‘é…ç½®æ–‡ä»¶

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzdkNTU4NmI0YjIwYTFkMjM2OWNjMTk1MWI0MGJiYWNfMThRb2VrYzFMdzI0enRjU2wyS1RDWW53UGV3YmdvMEJfVG9rZW46STdDM2JabmhXbzJVcHR4aWYwUmN3YnZybnRjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¾èµ–åŒ…å·²ç»è‡ªåŠ¨ç”Ÿæˆäº†ï¼Œä¸ç”¨ç®¡ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTBjYTNmMGMyZmY0NTU5MzA5ZWUxZGJhNDhmOGQxZTNfcThmamdHRlJKeDczSmNxcnRDSzJNYnEwM2EzS3hsNHdfVG9rZW46U2JLN2JMa3l0b2lLYlF4SVRhMmN2Mm91blViXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¸»è¦æ”¹è¿™ä¸‰å¤§éƒ¨åˆ†

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MWVkZGRiNGViMDgxMDExNWExOGM5ZmNjYzZjNmJiZDVfeThPN2d1RG83T3pibXkyTmF2VW1WOVBkZWlHbUxXRG1fVG9rZW46S1BCTmJFN3JPb2lnaHd4UmRUOGNLSFhEbmloXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODFlMjI0NjJjOGE0Mjk5MjczZmQwYjE2YzY0OTUwZjRfOTVORk1GOWVXUVFIazhxVGNPYklCS3NSbXZLNHJ6YkFfVG9rZW46R2FuRmIzQUs5b3U3aTF4Qkd5QWNvVUZVbmZjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWUwNDhkYzUyMjJlMzIxMDQ5MzI1OTA5ODBhMTk0NTdfOFBJT2NnYzlHT3pOTTU2RU0wMnlIQkRLMWhkcWxMMk9fVG9rZW46WVl6d2I2YjVXb2I2VkF4dDhLeWNxaEJqbjhiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODA3OWFmYjc1OGUxZGUxYTY3MGU3OTQyYjU3YmJhOWNfZ1ZsRm9UcndnOWQwbWluc2NtTEdsdmQ2cUpZc3hhREdfVG9rZW46TWYzU2JZM3RCbzU1ZXJ4cDB5TGN3T2Q1blA5XzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWFiYTFiYzJlNWYyNjhkODA5NDBlZDZlNzA0YzFjMmNfQWZYQlFhb1FqQVZGTFRDUGg5NVJ6emhKWWF0WG1pcXlfVG9rZW46VVRVVmJrSUo4b3RraDd4c0ozZGNRekRZbktkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¸€å…±æœ‰5ä¸ªå…¥å£å‚æ•°ï¼Œåé¢ä¸¤ä¸ªå…¥å£å‚æ•°æœ‰é»˜è®¤å€¼ã€‚

ç¬¬ä¸€ä¸ªå…¥å£å‚æ•°æ˜¯è¯é¢˜åç§°ï¼Œè¦ä¿è¯å’Œå‘å¸ƒæ–¹ä¸€è‡´ï¼›

ç¬¬äºŒä¸ªå…¥å£å‚æ•°æ˜¯QoSï¼Œå°±æ˜¯æœåŠ¡è´¨é‡ç®¡ç†ï¼Œé˜Ÿåˆ—æ·±åº¦ï¼Œ10æˆ–è€…20æš‚æ—¶éšä¾¿è®¾ç½®ï¼Œå¯ä»¥çœ‹çœ‹å‘å¸ƒæ–¹é‚£è¾¹çš„QoSçš„è§£é‡Š;

ç¬¬ä¸‰ä¸ªå…¥å£å‚æ•°æ˜¯å›è°ƒå‡½æ•°ï¼Œä¸€æ—¦æ¥æ”¶åˆ°æ•°æ®ï¼Œå°±è§¦å‘è¯¥å›è°ƒå‡½æ•°ã€‚

è¿”å›å€¼æ˜¯ä¸€ä¸ªè®¢é˜…å¯¹è±¡çš„æŒ‡é’ˆã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTBhNTQyZGIxMzJhOTQ2ZDhlN2UxOTdiMzYyYzE5NDFfRkdpb2I1eXFkeGFUTDlvYU8xSHhZSXRnM3Q4Q05yeklfVG9rZW46V3NIcGJsWXcxb1Zrekx4V3NwVGNKU0NQblhnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODczODQxNWUzZTY4MTYxYjQ4OWFhMTVlZmNhMWFhNjdfNVJuc0pQeDdMOWdFa28xdDNvZWNDSDZNNENGMFhhdndfVG9rZW46QnBaM2JOSWpDb2V1Rmp4WHR1VmN4b1RsbjZkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

std::placeholders::\_1è¿™ä¸ªæ˜¯å ä½ç¬¦ï¼Œ\_1æ˜¯æŒ‡ä¸€ä¸ªã€‚è¿™ä¸ªåœ°æ–¹æœ¬åº”è¯¥å¡«å…¥æ¶ˆæ¯ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWJjMzIyNzMwOTY0NmNjZjcxMjBjNWFiMmZiNGE1ZjVfZ3REWEdQTW9xUDVHZFhBcXk3MGt3ck8wUURHRWF6UnFfVG9rZW46VnFLR2JMZkdLb0RUUlR4S2NZTGNsUkkxbmFmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTc1NmNmMjA4Yzk3Mzc5YmE2YTZhOTg1ZmZmOWJhZmVfNGN2cEg0dDhPNEdnTks0VmhUWHczTnBEc2E4RXZ1OERfVG9rZW46SjVPOGJUWVNxb1hudk14RjNJNWNLdEJubmhjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTY4NzA3NDJhOWIzZTczOWMwMjQxYjM4MDlhMWI3MWNfT3BjZ1FUN3VxZTA0blg5S25YUWpuTk1uRnVvS1Zmc3lfVG9rZW46Q0xiVWJEZlBkb0JBaHd4d3ZTNmNGSGFibjBmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MThlZDJiYWU1NmI0YTdhMjU3OTZkZGVhN2NjNjlmZjdfUHVDTWtrWE9sMXJnNU1zUWxxamtieUJ3RnM4dWd3MjFfVG9rZW46RmNkemJjc3FOb2s0WWt4T0xUNGNjaDQ0bk5kXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```C++
#include "rclcpp/rclcpp.hpp"
#include "std_msgs/msg/string.hpp"

class Listener: public rclcpp::Node
{
public:
    Listener():Node("listener_node_cpp")
    {
        RCLCPP_INFO(this->get_logger(),"è®¢é˜…æ–¹åˆ›å»º!");
        subscription_ = this->create_subscription<std_msgs::msg::String>("chatter",10,std::bind(&Listener::do_callback,this,std::placeholders::_1));

    }
private:
    void do_callback(const std_msgs::msg::String &msg)
    {
        RCLCPP_INFO(this->get_logger(),"è®¢é˜…åˆ°çš„æ¶ˆæ¯æ˜¯:%s",msg.data.c_str());
    }
    rclcpp::Subscription<std_msgs::msg::String>::SharedPtr subscription_;
};


int main(int argc, char * argv[])
{
    rclcpp::init(argc,argv);

    rclcpp::spin(std::make_shared<Listener>());

    rclcpp::shutdown();
    return 0;
}
```

4.  ## è¯é¢˜é€šä¿¡\_è‡ªå®šä¹‰æ¥å£ä¿¡æ¯
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmZhYTg5ZGZiZmE0NjBiODEwYzhlZTNjYmE2NDdkNGNfc1c1Um9ubG9iS2xyUGx1dmRmYVJ2SXVXZUt1alpwY3FfVG9rZW46Q29xeGJxZlZlb1RWVmt4RVU3aGNxODl5bkxlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzhkODkxMTU5ZDJhYzc5M2M3NTcyZWVkNDZmZjFmZGZfb3BwR081ZTFqZjVONm8ybkczRHR5MUVLaE96TW5EWHJfVG9rZW46RktVbWJqbzlhb2ZCek94N1NGVGN5U0NDbkRmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmFmMTcxMmI5MWNkZGY0ODE4MzdmZTUwMWFlMjliZWZfd1hoNmJHVzE3dm5qS3JtU0tReWdyOElpT2FWbFdLY2NfVG9rZW46TENlOWJvOUE1b1dmUE54bjg2VWNqMlozblFmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjU2MjMxOTFlOTA1ZDBkNTFkYmVhNmNiODhhYjhjODRfY2xsaU12WW16WGZHR0hYUEx6T2VGaE14ZW9HbDlMeVlfVG9rZW46RGFSUGJhUHRyb2VaSFp4ZExQWmNVVXMwbjNkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ„å»ºä¾èµ–

æ‰§è¡Œä¾èµ–

å½“å‰åŠŸèƒ½åŒ…æ‰€å±çš„åŠŸèƒ½åŒ…ç»„

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmFjODYzMjI4MWY1MzczZjRhM2ZhOTVhNmQ2YmZhYTVfak05M2hSOWNqYmJmNWowbXhKYll5a3h0bHQwZ2RONFNfVG9rZW46V1hLcGIwMTBVbzdSbXF4SFlhVGNralowbkVoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

find\_packageæ˜¯è¦æŠŠæ„å»ºä¾èµ–ä¼ é€’è¿‡æ¥

ç„¶åè¿˜è¦æŒ‡å®šå½“å‰è¢«æ„å»ºçš„æ¥å£æ–‡ä»¶çš„è·¯å¾„ï¼ˆé€šè¿‡è¿™ä¸ªè®¾ç½®ï¼Œå°±å¯ä»¥æŠŠ.msgè½¬åŒ–æˆå¯¹åº”çš„C++å’ŒPythonä»£ç äº†ï¼‰

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MWNhZjQyMzBlY2Q0MWEwNGZlYjQ0ZWEzOGQ5NzE5MjlfRnNsUGFaNGtNQ0tqYlpKcnN1dmF5OWZCMjBPVXhHZGpfVG9rZW46UlRxN2JNcEpKb3lvaVN4ZmxUWWNSVUlPbkdlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmQzZWU1YjFmZGNhY2NlMTFmZmEzMTAyOTY1MDAwOTNfRFZTYWRZQ0pqTG5ZeWR2OFBWWGtyWWRwZXhmdkxGcFdfVG9rZW46WWtyVGJtNTBGb0dPTGp4N3VYNGN0cmlrbk9iXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmI0ZTlmN2ZhZDAwNTZhYTlmZmUyODU1NzI0MDE4ZjhfUk5naE13ZUE0b2JCYlQ1eHhzZzJIaUYwOG1SaUR4YU9fVG9rZW46RHpWdmJsRmhqb3V5UDh4VDAyWGMwOVNObkJnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ–‡ä»¶åå¯ä»¥è‡ªå®šä¹‰ï¼Œä½†æ˜¯é¦–å­—æ¯å¿…é¡»å¤§å†™

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjZkYzA3YjRkOWM5NzAyMGZlNGQyY2EzYWQ2NTBkMWVfeWlyUGhMVnNWeXIyS0lGNjRmNjB0bGs2SFlQMUpHRm5fVG9rZW46S211NGJPM0FTb2xhaHJ4OG1YTmN1aHRSbmhlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjVmZWY0OTY3ZWFmMGE0ODRlNDI3Nzg3N2JjZjA5MGVfQWVqRE9ndkVkbGR6SFYyUjMzcE90bHlLV2NPWFdaY0JfVG9rZW46UXVzTGJoRVI1b0lFaVB4NHhBeGM5amFmblFjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGRlMmFlZjVkYThmOWU5MzgzZTUyZjI1NjYyMWViYTdfMWtydTM2UTI4SFN6MjFyRlZnM09XUEtoZG9kb1dKR3lfVG9rZW46TGxzemIweVhzb3hBckR4TXVGaWNpbnhhbkdnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å†™å®Œä¹‹åtest\_dependæŠ¥é”™äº†

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjcyZGY3NjIyZTcyMmJmOGIwNTFlMGVhNDQxNjY2NjBfSWFLQjNnekFEb3RrVVF0aDBwNTJTTzRDdWxVYjVHTG5fVG9rZW46TjUzeWJGUVFub3N1Skt4d1p4d2N0TTRPbm9mXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

åˆ æ‰å³å¯

ç¼–è¯‘ä¾èµ–æ˜¯rosidlå¼€å¤´çš„ï¼Œæˆ‘ä»¬é€šè¿‡grepæŸ¥è¯¢ä¸€ä¸‹

```Bash
ros2 pkg list | grep -i rosidl
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTVkN2EwMGNhODI4NWEwYzFiOTIyNjU1MzQyNjZmZjdfZnFvSDdNcUtHYnYycFIzWW9aa09udHVMYmFVdjZDblNfVG9rZW46UkEyZWJ6WVNlbzZ5VXN4TXQxU2NZZG5wbkhnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWE2MTcyN2JhNDBjMzE1N2ZmMzI4NTM1ODg5OTY4YTFfZ0NkZm9jR1Q0cDhzVm1SVk9UN0NleWc5aFduRDl4aTRfVG9rZW46TFdyQ2JqeFVab0FEUW94RHBjRmNtdVBlbmlmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æˆ‘ä»¬ç”¨çš„æ˜¯è¿™ä¸€ä¸ªï¼Œç›´æ¥å¤åˆ¶è¿‡æ¥

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzdmY2FlYWMyNmZhMzFjMGQ1YzhmYzE1N2Q2ZGE5ZmFfR0NCTkRIZ2dURERQY0JRRWFSaFFVNGlUWDE5RnZGNzFfVG9rZW46T0NTemJEN1pKb0pScGd4N3dhZWN6eUNabk1jXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzQ5ZGJiNGM0MzNkZjkwMGZhMDM1NWJiYzBiZWExNjNfV3VDcGRyTFpQMVdEUEF2eGtEWXNWWkdsVTZMSlQzd2tfVG9rZW46WGhmWWJ1RXF1b2hta3B4Z05iZ2NJeE1NbnpTXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmFlNTk3ZDJjZTExMTNiNjI1Y2MxZWMwMzhiZTg2Y2JfSU9mMFpYblhFajFpUkVBRE5jVnh2UlNZSW1xNkR6VVVfVG9rZW46Sm9FeGJLa3VVbzQ1WW54blZVZ2N1dlNLbmZiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGUyYWZkMDgxYzE3NDNiMzMxMjg1OTdhYWQzMTI0ZDBfSDVjZHpxZTF1N0lGcTh5T0o2aEE3RnBzR0VYbmF4NzBfVG9rZW46SnE0ZWI4SXdpb1NFRmR4UG5PVmNDVFBSblBoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

åœ¨listé‡Œè¿™ä¸ªæ‰€å±çš„åŠŸèƒ½åŒ…ç»„å°±æ²¡æœ‰äº†ï¼Œéœ€è¦è‡ªå·±å†™rosidl\_interface\_packages

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjVjMmFlYTI2MGQwMzI1Yzc4YjE1MGNlNzljZGQ5NWNfU1BvNHl3eXN5MkxzeUY5YjJkNmgyMWtwZUZlU0t3bTFfVG9rZW46V2R5dGJLTm0zb1VWdWx4Q0FtOGM2NWFUbjdiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjFhZGQxOTViM2M4MDk4MjAzNzU0OGRkOWU4MTkxNzBfZ25VTUJadFNnb0dFaVk2WVN2OFJac2Vudlo5NlYzTDJfVG9rZW46S3dydGJmWkxDb0NPTjl4M3NEMGNtZzlObjdnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™ä¸ªä¾èµ–è¦å’Œæ„å»ºä¾èµ–ä¸€æ ·

ç„¶åæˆ‘ä»¬è¦ä¸ºæ¥å£æ–‡ä»¶ç”Ÿæˆæºç 

éœ€è¦ä½¿ç”¨rosidl\_generate\_interfaceså‡½æ•°

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzhiZmE1MWE5MmNmMTNiYTg2NWIxNWY0NGU0MjUxMDRfVU5uRkhkbGxUcHJNekVON3YzNUJUdnBWM3pKdnpzQXdfVG9rZW46VFdWdmJhc2tPb1ZSZEF4dTZuOGM2MWowbkNoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2VjOTBkOTBjMzU3OTk5MzcxOGVlYWU3YjVmMWVjY2ZfSHo5c3lvTEs4RXJNanVOdlA5NjVKYzl4a0xHd1JJaVZfVG9rZW46SXdnaGJoTEJ5bzB6UEt4aU1CNmN0UHF4blliXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Bash
colcon build --packages-select base_interfaces_demo
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzhjNmE2NTNiYWVmZDAyZjgwNDNkNzk2Mjg4OGE3ODlfaGhab3lSUlFrd2g4UmV2Ykt1V25MZ2VDTWpnR09DRWFfVG9rZW46UnBXZWJicEp0bzROdXh4dk83M2NFTEl4bkprXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGFjYmM4ZmU2MTg1MzhjMzRhNWFiN2MyNzIzODUyY2RfRHJLZW5GYm52d2JGT0VwTjZKUFFyRmt5M0J1RzFYYTFfVG9rZW46SGdhemJ0c1Z5b3A3RTd4UksyS2M1OUZobmhmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¼šåœ¨installç©ºé—´ä¸‹ç”Ÿæˆstudent.hppä»£ç 

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDAzNGY1ZmJhNjZjY2Y2MTJlNmQxYzQ5ZGQ4MzlmYzBfOFBLeWsxMDZXTGNMemRDYWFnWDRHeWRXQmZtS05mZ1FfVG9rZW46UVBIYWJtd2Uzb0JwN2d4SEVPQmNVb3FubkNjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä»¥ä¸Š.msgç”ŸæˆC++çš„

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTY3Y2ZjMTJkOTBlN2EyZmNlMWQyNDllNzIwMTkwYzZfdmFpZzk0RjRQOXpOaGxsV3FuVnRQWTE5WDd1VGdYeVBfVG9rZW46TmJvdGJoclc1b3pJc0h4WDY3MGN2ZTRubmhiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ç„¶åè¿™ä¸ªæ˜¯.msgç”Ÿæˆçš„Pythonçš„æºç 

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGY2MWQxZjBlNzAwMjA5MzA2ODAyOTNiODBkNjkwNzJfd0hwbTZITmREQzd3cVZDWGx5Qjc4WUpObEdSTnVtek5fVG9rZW46VlNkVGI0Wllkb2pxUzd4NHltaGN1dlhXbm1jXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¹Ÿå¯ä»¥é€šè¿‡è¿™ä¸ªæ–¹å¼æ¥æ£€æµ‹æ˜¯å¦ç¼–è¯‘æ­£å¸¸

interfaceæ˜¯æ¥å£

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmE1ZGU4MWUwMTJmNzhmM2QzZjkzYzFkMjBhMjJiY2FfSGgyZ21Yb1c4YjB2OUM3ZHFXUDR6T3JsRXFLUXBXaDFfVG9rZW46TFVidGJyWnZ3b1E5SVN4NXJpQWNVQk1lbmlmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

5.  ## è¯é¢˜é€šä¿¡\_å®éªŒ2(C++)
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDkzYWQ0MzExNTU2NTliNjk5YzgzYTQ2YjdkZmJjZDdfcTNhYXFhNXhiM0w1eFhaUTIzMDV2dlIweFNBUER0ZTNfVG9rZW46Uk9uSGJ4ZnFmb0lRSGR4WGVORGNIM09TblpjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGZkNmYwM2E3ZTNhYmJhMDY0YjM1ZjJhMmI1ZjNlMmVfSWh4ekxVTEJHN2xFS1BVMWVLMmR6UEVXajJNZU9MMUhfVG9rZW46QUlCb2JxRFJnb3M5MjV4REVQdWNDOVZmbkdiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjYzNTUyYzY0MzU3YmI0ZDQ3ODg1MjA5NjY4MWVjMmRfUmdCbjBBR2xMVjNxanZIS0k0YjFwam80SU04b3hJODdfVG9rZW46RkM1dmJIS3NJb1BGeVZ4bFhrMmNXUEE3bmtiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ–°å»ºå®Œæºæ–‡ä»¶ä¹‹åï¼Œè¦é…ç½®CMakeLists

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODFmZmM4M2FhNmJjMGQ5MWViODI1OGE0MjAxZmUzMThfRVRtczBuZWZQbGFUR1B0bnFzTnVXcWU5RkU3b3Y4SDFfVG9rZW46T1U5U2JDWUJpb3BBaWx4dW9HeWNnMXNEbk1iXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTJiNTYwOTcxNTllMjM4ODY3YjhlYTY3YjQ3NWNlNWNfaG1iQVdNQ2FEV3Q3T0Jyd0t0V3JNclJBQnZJMFJscUZfVG9rZW46Qnc1bGJSdGxGb21YMnp4SjNUZWNTSDhTbkhiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjVkZjFhYTUyYjRkZmY1YTczYjkzZWZhODMxOThhYTJfUUpzUXFBbGtZdDB3VUNHTEEyVmdSRUhvakJ6cnlEd1ZfVG9rZW46VUl5S2JjbTZnb0VWQmZ4Y3ozdmNHZU02bmhkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTIwZDBjOWE1ODEzYmVkNzI5YmI1Y2Y2YzM5MWZhM2FfQXZYcWFFVTVOQTlNellMNEN6emE4RmdvQUNvSkw2ZmRfVG9rZW46U3JPamIzdFRXb3dJQkp4U3MydmNCeWlpbk1jXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å°†æœ€åŸºæœ¬çš„æ¡†æ¶ç›´æ¥å¤åˆ¶è¿‡æ¥

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWU5MzMzNjc2YjJmYzNmNjljZTk5MzU1ZmI4MDhhNjdfVDFHcnhoWlN2MGkwZEpDVk5jSGVQRjhNT0k4UzBJdDRfVG9rZW46WjhxWWJnVGh0b2tGZ0t4WDAydGNSbExEbjZxXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ç„¶åæ›¿æ¢ç±»çš„åç§°

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjIyZDRjMTAwM2JkMTVhOWM4NzlmNDU0YWE2ZjU5NmFfUjR2SnMwcFpkMVhyNE1qeU1jUGlBSXdER2YxM1lSQmtfVG9rZW46R0lMaGJZTG5sb3VkcHR4S2dTSmNoVERKbk9lXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```C++
#include "rclcpp/rclcpp.hpp"

class TalkerStu: public rclcpp::Node
{
  public:
    TalkerStu():Node("talkerstu_node_cpp")
    {
      RCLCPP_INFO(this->get_logger(),"å‘å¸ƒèŠ‚ç‚¹åˆ›å»ºï¼");
    }
};


int main(int argc, char ** argv)
{
  rclcpp::init(argc,argv);

  rclcpp::spin(std::make_shared<TalkerStu>());

  rclcpp::shutdown();
  return 0;
}
```

ä¸ºäº†ç¼–ç è§„èŒƒï¼ŒæŠŠtalkerstu\_node\_cppæ”¹æˆå°å†™

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTQ5ZmE1N2JhMWQ5MDE0Y2UxNDVkNzU0NjhhYzMyMGJfdzBTdTBHRU1id3VMYzBYVjY3WkFZUWRGems0dHNvcnBfVG9rZW46VndxTmIzaTQ3b2JMYXN4YTZoRWNjZ096blJjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

åŒæ ·çš„ï¼Œè®¢é˜…æ–¹ä¹Ÿæ˜¯éœ€è¦è¿™æ ·æ“ä½œ

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWJkOWM1YmEyZThjMjMyZWVhOWIxNWRmMjYwNTkwZWVfOHRtUFNoMWF2NGJQbkxvY3RGOTQ2M3E5S1RMeUh2a0RfVG9rZW46UFIzWWJOMzVCb0p2cEF4RmNwZmNzUnN4bmFiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```C++
#include "rclcpp/rclcpp.hpp"

class ListenerStu: public rclcpp::Node
{
public:
    ListenerStu():Node("listenerstu_node_cpp")
    {
        RCLCPP_INFO(this->get_logger(),"è®¢é˜…æ–¹åˆ›å»º!");
    }
};


int main(int argc, char * argv[])
{
    rclcpp::init(argc,argv);

    rclcpp::spin(std::make_shared<ListenerStu>());

    rclcpp::shutdown();
    return 0;
}
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWMyNDA5NDAzMmY5ZTM1NTVjN2Q2OTJhNTMwYTliYmZfd2Y5QUNqM1lCeEI4ZXh6eVhLZlZ1dnZyS3dSUWE3VzdfVG9rZW46UFZ2WWIwY3pEb3ZETkt4RFRGdmNEWmJNbmdwXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```JSON
{
  "configurations": [
    {
      "browse": {
        "databaseFilename": "${default}",
        "limitSymbolsToIncludedHeaders": false
      },
      "includePath": [
        "/opt/ros/humble/include/**",
        "/home/tungchiahui/mysource/ros2src/3.ws01_plumbing/src/base_interfaces_demo/include/**",
        "/usr/include/**",
        "${workspaceFolder}/",
**        "${workspaceFolder}/install/base_interfaces_demo/include/**"
      ],
      "name": "ROS",
      "intelliSenseMode": "gcc-x64",
      "compilerPath": "/usr/bin/gcc",
      "cStandard": "gnu11",
      "cppStandard": "c++14"
    }
  ],
  "version": 4
}
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTQ4MDk3N2E0ZmI5ZjM3YTVmMDc2YWRlNDJhY2ViODFfdkZjNkQ2ZXhSQUs2RlJ0RVZhUm5MYnFjVnV5NGZRQjRfVG9rZW46QkVYUmJJSU5Qb2trNXd4U21hS2NsT2xpbnc1XzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjI5ZjFiZjU1MDc4ZjY1ZjI2Y2EzOGYyMTAwNTg5YmJfaGpkUFB3VUNZcDZjdW5RZndBaTlhcXpRdXdlaUJuWEdfVG9rZW46QURTcWJGVXhGbzlOaVZ4N0pFUWN5OGdQbjJiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGQzYjNjOGFjZDI5NTQwZjY1NjE0ZDliZTNiNWZkYjFfZ2FTWnE1RXBUWFBIZDhveW1MVWNTd2c3ZHAwNXpwdjNfVG9rZW46SDZYZGJmNzZ6b1lhZnl4cXpGc2NSYWhnbkNmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzBhNWE0ODdkMDkwM2YwNWFlMDcxNjgwZWM5YjMyYTlfc3hPU0FkVmZYSGNSc0VzbEtiRU9vdmd4b3lrbVNWM3pfVG9rZW46VnVIRWJHR2hlb0Joc2p4Z1lCamN0eEFVbjFiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2Y0M2ZkNTU1NmZiNjYwYzdmNmQyYmIzYTVlNTRmZjFfamlKR3g3dmxDU2JudDRUdDAyMUlIYkFNaXg0dG40VWxfVG9rZW46U3hVTGJIQUNIbzU4NWJ4MTd6TmNIVkFLbkVkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGNiYWJkYjBhYjI3NjRmYTkxNjhlMzAzYmU4MjU5YTJfMUdxS3dvQ0tVYmZKUHR2MFY3M1l1SjJWM283WE1VWVhfVG9rZW46S3c2NmJaRlBQb0FHNzJ4TTdQaWNnOGtmbkNmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjNjNDAyNzNhMzA5ZjE4MDJhYWI2NDdhNjIyZWYxNDNfdHZ2cVU2WDdaWmFydHBwQjkxMHZwYVB3WlpTaTNoV0ZfVG9rZW46VExoSWJQTllCb3BwMjN4aE1JN2N4MlhsbjNmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2U3NmE0YWVmZDFjYWM5YTNkYWM3ZDFkZDljMmNkZTVfU0FSRXdXYVVXUHFmdlFTdnNGOVVianEydmdzUkEzWmtfVG9rZW46TnI3TWJsNFBDb2ZoQ3B4YWpiSGNxa2FUbmdiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¸è¦å¿˜è®°å­—ç¬¦ä¸²è½¬æˆCé£æ ¼çš„ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjM5YWE0ODUxYTMxYTMzNTBhNjVhNDExNmQ4YjJlY2RfQ2dpRFZFNU1uTkpLWmNmSGtnYXlibE5yc1RRc0lodkNfVG9rZW46VGd5N2J4UHA1bzNpb2l4M1RwOGM0cTJybldmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```C++
#include "rclcpp/rclcpp.hpp"
#include "base_interfaces_demo/msg/student.hpp"

using namespace std::chrono_literals;

class TalkerStu: public rclcpp::Node
{
public:
    TalkerStu():Node("talkerstu_node_cpp"),age(0)
    {
      RCLCPP_INFO(this->get_logger(),"å‘å¸ƒèŠ‚ç‚¹åˆ›å»ºï¼");
      publisher_ = this->create_publisher<base_interfaces_demo::msg::Student>("chatter_stu",10);
      timer_ = this->create_wall_timer(500ms,std::bind(&TalkerStu::on_timer_callback,this));
    }
private:
    void on_timer_callback()
    {
        auto stu = base_interfaces_demo::msg::Student();
        stu.name = "è‘«èŠ¦å¨ƒ";
        stu.age = age;
        stu.height = 2.20f;
        age++;
        publisher_->publish(stu);
        RCLCPP_INFO(this->get_logger(),"å‘å¸ƒçš„æ¶ˆæ¯:(%s,%d,%.2f)",stu.name.c_str(),stu.age,stu.height);
    }
    rclcpp::Publisher<base_interfaces_demo::msg::Student>::SharedPtr publisher_;
    rclcpp::TimerBase::SharedPtr timer_;
    int32_t age;
};


int main(int argc, char ** argv)
{
  rclcpp::init(argc,argv);

  rclcpp::spin(std::make_shared<TalkerStu>());

  rclcpp::shutdown();
  return 0;
}
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGJmY2ViNmVjZjI2N2M1ODk4NzIwZmYwMjk5NWEwZjhfVWg1UjAwc0kyMlN0a05HbVROMlV3dDFJbDRvZEhLRVhfVG9rZW46Q1BYcWI5RGQ1b3YwUDV4dTV0WWNvYWFVbldkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDMwMzZiZWMyYWIyYTVjODBiZWMwNzc2ZTIyZDVhODhfM2pVQkdHZVBlS3J5bDlsUGlxZUM1N1IzUWNVS3R3RG9fVG9rZW46VWY4NmJDVGdxb0xXa0Z4dUdSbGNBUkZKbkVlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTBjNzg5NzVkY2ZlN2I4YjFmN2FmNjk5NWQxOTgyZmFfVjBCZGRNcXpJWXNRYzFRaG93Tm9SakxhRHpZb2xueWVfVG9rZW46RnJlS2JDbWpJb2pRdFR4enNXcmN0SVpCbm9LXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è™½ç„¶å‘å¸ƒæ–¹å¯ä»¥æ‰“å°æ—¥å¿—ï¼Œä½†æ˜¯ä¸ä»£è¡¨ä¿¡æ¯è¢«æ­£å¸¸å‘å‡ºå»äº†ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWZlZWQ2NWFhZTA2OWNlMDkzZTc4NWVhMzM3NGZhODVfWmNFSUVNakh4UlJiNHBSWTZkMG02R2tNUDFWeUozQ0xfVG9rZW46R2MxVWJ1UWc2b2lCbGd4RDAzWGNHcUZQbnBjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™æ ·æ£€éªŒæ‰æ˜¯çœŸèƒ½ç¡®å®šæ•°æ®è¢«å‘é€å‡ºå»äº†ã€‚

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzgzZDcyMDZhM2YyODdjMTY2ZGRhYTE0NzIzYjkzYTJfaFFxc2pUQ0lMQWtTWjJqNmF4aG9OYzdDc1JNUEJYczJfVG9rZW46SFRMMGJKcVZ6b1hPdzl4MWRnamNpSDBjbmxjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTVhOGQ5OTBjMDhiZTIyZDZiOGY1MWYxZTYzZjVlMWFfQ1hCZXlBZWRYd1RoVjhWSVZ4WU9OT1FkOGtUV2g1eTRfVG9rZW46VUYwV2I1V3hGb0VjaWJ4WmRmeGN6V1Y2bkRjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```C++
#include "rclcpp/rclcpp.hpp"
#include "base_interfaces_demo/msg/student.hpp"

using base_interfaces_demo::msg::Student;

class ListenerStu: public rclcpp::Node
{
public:
    ListenerStu():Node("listenerstu_node_cpp")
    {
        RCLCPP_INFO(this->get_logger(),"è®¢é˜…æ–¹åˆ›å»º!");
        Subscription_ = this->create_subscription<Student>("chatter_stu",10,std::bind(&ListenerStu::do_callback,this,std::placeholders::1));
    }
private:
    void do_callback(const Student &stu)
    {
        RCLCPP_INFO(this->get_logger(),"è®¢é˜…çš„å­¦ç”Ÿä¿¡æ¯:name=%s,age=%d,height=%.2f",stu.name.c_str(),stu.age,stu.height);
    }
_    rclcpp::Subscription<Student>::SharedPtr Subscription_;
};


int main(int argc, char * argv[])
{
    rclcpp::init(argc,argv);

    rclcpp::spin(std::make_shared<ListenerStu>());

    rclcpp::shutdown();
    return 0;
}
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmI3MjJjOGJhZTVhZDYzYTkwNGUyZWEwYTA3ZDIxNjJfd1dVNk5yU01hNXZZYlVYRDIyMEVOaXV6THNINzkzeUxfVG9rZW46QUFwS2JCS3lSb2M5dXN4dzAycmM5TU5RbnRkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2RiN2ZlNjNiMTk0OGFlOTY5ZDUwMjVhOTc2YjEzMTJfUTRXeXhwU1ppbGkwTDdRMVNpUXMxRE5CdklMMmhrbEpfVG9rZW46SllSRWJ5Q2Zib0RvT0x4ZmpwTWNhVDJtbmljXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

6.  ## è¯é¢˜é€šä¿¡\_rqtæŸ¥çœ‹è®¡ç®—å›¾
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzZiYTFmNTBjY2VjM2NhMmFmY2RkOTRmNDMxOWY1NDFfekZKSWk0T2FlbjdDRHFZMWFNTTgwM284YU9KOVNqQ05fVG9rZW46V0hhZWJmOERob1NJZTR4WlNDMWNnb1J1blpnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2RkYjdmOWU3MjYyM2JhZWViMGZhMWU5NjNhMjUwM2RfTGg1ckNBRkgwVXFuR3hlMHA2VXVNUUtzQUQxQ0EwcHlfVG9rZW46TjNzNGJKa1ZSbzRlSjJ4a2Z4MWNaWFZYbm1kXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWViZmRkYmM5Y2ZlYWUwZDNiODVhY2QwMmZmZDNkMDRfWlhaRm03bWRSWDdlZEhsdGpXYjhzaEVxUDJveUtZM0FfVG9rZW46S1hIUmIyZG1Eb0lpNzh4WXpsTWNlTE5abkFmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDE1NDI1ZGIzOGU0YjJmZGNiYjJhOWNkYTg4Mjg1NDJfOVY0QllCRXg0RlRYRWFGTHZMd2lHUlVSU1pURFd3SVNfVG9rZW46TktqcmJXUzdQb3BZRkx4SlZZZWN4UldJbm9lXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGEwMzY2OTllMGQwZjUzZTcxZjUyMmYxNWExZWRmZjBfZ1lxUXB2NENyc2oxdjFZWFdKVUFleEhsSVlRS2VrS2pfVG9rZW46SmtESmJxSWNUb2VuWU54bHFCV2N5VEJLbnplXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å›¾å½¢åŒ–å·¥å…·RQT

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDNhMzc2MDNjZjE1YWU3MTcxZmRhMDllYTBlNTY0ZTJfOVJVbnNUUVJNb1ZkWHBBaWhmZUpKWEtncDBjbmRrQkpfVG9rZW46SVJRUWJFZDNzb0k0Q1R4UHhoeWNhWEdDbnFoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MWI3NWZmMzkzZjQ1Yjg1NTFmZjY5ZGJhMWFmMGZjM2JfcE5HS1BTRnlkbTg3QjhjQmM3a05tMEZmMmNsT2RHWmdfVG9rZW46SGlCY2JGODR0b1F4dkJ4dXVCd2NuR1pxbmZjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjE1MzVjODk5Zjg0YTMwYWNmYzVjYjEwYTc1OGYwZmFfeFN4alQ3NTRtMGl6dk5KMHZWVzJ5NzVVUVRGTGVZT2VfVG9rZW46UERvcmJOOGZjb3Q1N0h4MEMxVWNiUjVtblljXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmY3NGNlMjcwN2NhMjIzZTgzMDMwMTA2NjRiNDJmNGFfeFhYcHBtVmt3Vm5kbHdzMUh2Y2NLT2s0Mnl4bVFmbUpfVG9rZW46VVZOTmJLaHlib3pkbTZ4ZEtHV2NhYmQ5bjRkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2EwNDdmOGQ2MzUzMjZiZTJmYmViZTU1NmI2Y2I4NTFfN2t0eWllUHdiSHluTDVIUnB6Y0ZqNjhWTjM0TnNUeE9fVG9rZW46RHdGZWJNakN0bzZXanN4WktEbWNyMUZIblZkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

7.  ## æœåŠ¡é€šä¿¡\_ç†è®º
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MWZkMzViYTFjMmY5NzkzZDA2YjQ2N2UxZDJhZTEzMzFfeFN0MkNDdm9OaGVVNkZqdGljRmN5YzBjbWt0VXBKOUtfVG9rZW46UWNUOWJBdXV4b1FhdlR4U05CcWM4bUR4bjBSXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTc1NjBlZTA5NzU1MWE4YmFkMWU4ODEyOTJkMGFhZDVfNjdmZGFyOXBjRjlqTk8ydmdQOFpjcWx1YlJnSFRIOXRfVG9rZW46SlZVVmI0R0NmbzRadkl4dzVhTmNhWTlMbmRnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjRkYzgzYWQ5NGZjYTFiZGU1OTdhMmRiYzVmNTkyN2JfWVZTR2YwejdlbVpTQVFQaTJPM3VTSkg1NUdhMkE3d1hfVG9rZW46SjAzZGI3cm5NbzBFVzV4MGkyWWNsM2M5bmtlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

åªèƒ½æœ‰ä¸€ä¸ªæœåŠ¡ç«¯ï¼Œå¯ä»¥æœ‰å¤šä¸ªå®¢æˆ·ç«¯ï¼Œæ¯ä¸ªå®¢æˆ·ç«¯éƒ½å¯ä»¥å‘æœåŠ¡ç«¯å‘é€è¯·æ±‚ã€‚ï¼ˆå½“ç„¶å¯ä»¥æœ‰å¤šä¸ªæœåŠ¡ç«¯ï¼Œä½†æ˜¯ä¼šå‡ºå¾ˆå¤šé€»è¾‘é—®é¢˜ï¼Œè¿™æ˜¯æå…¶ä¸åˆç†çš„ï¼Œç¦æ­¢ä½¿ç”¨ï¼‰

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjE2NzE1NWVjZTg5Mjc5N2RhMjU3NTZiMTBhOTgyZjlfaVhKZ0ZkUXNiOXRLVTJjSjlzMWh2dkxJMHJtWGNCS2VfVG9rZW46Rm1xa2JsWDc4b2ZXY1V4eVhpdmNTanhPbnpmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

8.  ## æœåŠ¡é€šä¿¡\_å®éªŒ1\_æœåŠ¡ç«¯å®ç°(C++)
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjIwNTFhNDMyOTg4ZjkyNGRiYTdhMDcyMDk1MTQzNTBfaU9hVm9sRFRIa1VCUzI0M1k2ZGxud2djZG9tdnNZY3dfVG9rZW46WEtQZGIwSFlKb1U4VFR4eDhmbmM2Q25GbkdiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzY4ZDFjYjVlYTNmYWJhYjhhMGUxMTUyZTIxMzU1MmVfWkQ4R2dIS3Z0NWI2Q1pZb2RpRkowU0R1dGtzZTBKRVZfVG9rZW46SFVjUWJVZ2Nvb1Q5dDJ4TmhweGNwSVI2bk5iXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å…ˆå¼€æœåŠ¡ç«¯ï¼Œç„¶åä»å®¢æˆ·ç«¯æäº¤ä¸¤ä¸ªæ•´æ•°ï¼Œåˆ°æœåŠ¡ç«¯ä¹‹åï¼ŒæœåŠ¡ç«¯ä¼šè§£ææ•°æ®ï¼Œç„¶åæ±‚å’Œï¼Œå¹¶è¿”å›ç»™å®¢æˆ·ç«¯ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGQyYzdlM2Q5Mzk4YzZlYWM0MDdlMWEyMjE3NjVhZDlfMmcycG12ZXZkelBmRUsxSW1oVUNvWGphTEQxQWhCNHJfVG9rZW46R1Z0bGJ1V3NHb2JqaFV4QmUzM2M0dENEbjBlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGZlYTYzNmIwOTViZGZiNDBmMmE2YzJhZjBhMzIwMzBfaVV2WXJQbXFmR3l1cmtQUTBqWU9lWmIwVDk1SkxlVEpfVG9rZW46SHFVRmJZUlZqb2p5T2R4Z0tRamNtMlR4bnZoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGFlOWY3MTJjODkyYzA2NDgwNjU5MmEzODk3OGEwNmZfdDRENndZdFRjYVIxdlRwdzJFb1JnRTNFSjVjMVVncW1fVG9rZW46VGNLbmJrcGd5b1N1bXV4VGpoMWNzalpibkpoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Nzc4N2UxMzVhN2YzYzBkYWMwODMxMjg5ZTFhNjM1YjlfMW5WdFk0WXByMmU3dDMxTnNTZXhUbDVEUlFLdUNhRG1fVG9rZW46T2FYZWJjSXZRb3BheEZ4MDd5dGNsU1RIbmJlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Bash
ros2 pkg create cpp02_service --build-type ament_cmake --dependencies rclcpp base_interfaces_demo --node-name demo01_server
```

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDM3YmVjZTBlOGI1ODNmNTMwZjNhOTdmMzkzNjQ1NTRfNVdQejduM3VjZlJ0am5EaWRXc0t1MHA4NXdEYW01bGNfVG9rZW46SWczYmJmV09Db1RtYnZ4cDZqb2NreVY3bnpkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTVkODg1ZjYzMjQzN2QyNmQ1NTFjNWYyNTEzOTYyYmVfUWw3Ymt0Vk5qeWZvbEFOSlVqN3VsNGhsWjJnWXh1TnNfVG9rZW46VnlxUWI0NGdBb3MyMGR4UHF2OGNrRkFKbnVnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDI1ZDhiNzM4YzgxNGIyNGU1ZGIwY2NmZDFlYmM0NjZfZlBENDllOUN3MUxkb2poekdRU2xCNnhteDFXOHRER3dfVG9rZW46R3FaNGI4Mzlrb0Fjaml4RERiYmMwRTQzbmtoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¦‚æœä¹‹å‰ç”¨è¿‡demo\_interfaces\_demoï¼Œé‚£ä¹ˆä¸€èˆ¬æ˜¯ä¸ç”¨å†é…ç½®package.xmläº†ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzQ3MzUyNmRkMTYzMzFhYWFlMWU5MjY2MDJiNmZjMTVfcUpOdFlPaGtwQ3oyVmxDZWh6S3hUNHZEY0V6MU9WMTFfVG9rZW46TUhXa2J6eUdRb2JYNld4dktQc2NyaEhpbkJlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2VjOTVjYWExYmY1OGM1MzI2ZjI5ZjRiYmUyMWVjYjlfZ0Ewd0hsZTU5ZTkySlJkTWZXRWxDdnVhQ096c3hnMkVfVG9rZW46UWNuVWJsTkNhbzhydWl4Zmc0SGN2OTBjblVoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2JjMDA0Y2Q0MWMxNmI1MDE3OWZjNDE2M2Y3NzI4YzlfaE9HZzZyOE1DbENtSWJMelhLM0VxZmpmMDZmUEoyRjZfVG9rZW46QWxYcmJwNUs4b1BpUER4b3NRUWNLdG9ibldoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTFhMzNlMTEwMjNhZDg0ZGExMjhiNjNhNTAzMWVkZDFfdXl6R3dXczBHczNadXc2eVJYdnMzb2duQkU5QXlBa3FfVG9rZW46WnlORGI1M3Npb0x5Y2h4NUJqZ2NwMERubm1nXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NGI2ZDYzNDExYTJjYjlkMmQ5OWQ0NTZhZGYxYTBiMGRfU1IwcGl1eGl6eXlaTVdDNWdpN012Q1pEeWxJUkwwbmRfVG9rZW46S3dwZGIxZlh1b0pCRUR4T1RtVWNkVlBTbkdlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è®°å¾—æ–‡ä»¶åé¦–å­—æ¯è¦å¤§å†™ï¼

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTI0ZjQ4ZDM2ZDY2OGNmMzA2YWE3Y2RhNGE5MmVhZjFfUWVqVTlLejZvbExSNU9QSGMzemlmSVV3UEhlU2NWdExfVG9rZW46WEVVcmJrSlVGb0R5Qzh4TGRudGNIbGZHblRoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTM2MmYzOGMzNzdiMGMwYzVlYTdhZmVhMWZiMzQyODBfaFc3NHJlZVg0WDU4bU1DZUZmWXJqUHBINVo0bnM0bHBfVG9rZW46R0tLbmJhcVdvb282Q0J4VmhIWmNwTlhCbkdHXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGVjOWFmY2Y5YjM0MTY5Y2ZkZmI4NjFjMzk3OTk2MGNfZmVESHpFS3lIbFB6M3hoV25iSXczeTFYT2d6bVNxY0RfVG9rZW46WGFxTmJLd24zb2s2NnJ4Zk55NGNGVnlrbjllXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDE2YmVmZTEzZjExZDkyOGFhZTdlNTJmMTM5YTU1MTBfTVZ2eDdCNkdzY3ZmUVY0UFdScDVJUWV0UzU2aG9YZGtfVG9rZW46WHlHdWJSR0ZTb1RnaGh4RzV4bmMxRE5lbkhlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjM0Nzg2YWU4NWQ4ZDEwOGFkM2I5ZTYxYmQ4NzI4MjlfZ3NuZ21mRGd0aUE5bUJGWmdaYTJ1WGlabkhpSjVWTDlfVG9rZW46VElLM2JTbWI2b09nNXB4VklwVWNLSjEzbnFnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2ZmMDFkNGFjMGM2NjYxZDA5YTJhNTdmNmUyNDM0YTZfZ1BqZHp3S2RpRkFqeGxXTUJtclBBSEVIeHZlZ2FWYmxfVG9rZW46TjdIZmJ5cG1Hb2I5MHZ4a3RBdWN3QXdwblRkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjY1Zjk3NGQ2NmE5MzUwMTJiOGE0ZjE1OTA2NDY1NTdfeXRBd2xYT050aHA4MGNCTHU4ZDNJQXNPMXRQQWNnQUlfVG9rZW46T3ZSSGJod2pTbzVIelV4WVRydmNlZ0FrblViXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGVhYzhjZmI0ZWZiNDAzNzVjZDNkZTNkZGM5OWNiZDFfM09OT2pBdGZOTXJ4SlM3dWE0aHhTRkR3V3NkanlJb0ZfVG9rZW46RjVLeGJRcUp2b1RqenV4dWNQTGNlVXhibkNjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODM4M2E4MjFkMjZlYjAwNzE0OTFmM2M0MzVlNDViMTJfOWkzbzliOHg5ZExLMFQ3SEt1TXlqeDhGWjlaWmswNlVfVG9rZW46SzlCM2JqWmdob0kyY3h4TWJqOGNSeW5hblllXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTJmODhkODc4OGY0NzdlMGM1OGU0MzEwODdjNWRmNmZfdkdNOGZDdmkweUlVNEV5OW9HVE9vV0pUZmNtMlNtUkJfVG9rZW46STN5eWJ1U3lzb1NEdHN4WWNkTGNMSUVxbmpoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTA5MTZjMzUzMGE5MWU1MTRlNGY4YjIzNGI2OWFkOWRfSXk2UzlFVTFtbzJMREhySGY1SDd2bmRPMWFqMTF1WTlfVG9rZW46T3Q2aWI4M3htb1I1RnN4NnppR2N3eFNqbnNkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™æ˜¯å¦ä¸€ä¸ªéªŒè¯æ–¹å¼

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzBjNGZjZTcxMWFmOWZhMmE5ZmQyZjM4OTcxNjQxNjRfVFlpUnFOQU1vQlNRYWV6ZWlQTDBXSVN5YVRGT1hMREpfVG9rZW46Wm5tdmJSU3l3b2dKclF4VlB3T2NoTVJ2bmhoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDdlMTJkNzgwZDE0Nzk4NDVhN2NjZGE0MGQ2YjA0OTlfWEF4TDlnVUw2TW83N0tKdWdPNkFzUld2SGd5YTJidFdfVG9rZW46QWd5eGJyNXJxb2lSSTd4YTdSdWN5eEc5bjlmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```C++
#include "rclcpp/rclcpp.hpp"

class AddIntsServer: public rclcpp::Node
{
  public:
    AddIntsServer():Node("add_ints_server_node_cpp")
    {
      RCLCPP_INFO(this->get_logger(),"æœåŠ¡ç«¯èŠ‚ç‚¹åˆ›å»ºï¼");
    }
};

int main(int argc, char ** argv)
{
  rclcpp::init(argc,argv);

  rclcpp::spin(std::make_shared<AddIntsServer>());

  rclcpp::shutdown();
  return 0;
}
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTg2ZjVjN2Y2OGQyYTJkY2Q3ZWZmZDkzZGE1ZDIyMjVfWXpxMWxFeGJ6ajBNWGJzelluRWVvc0tvZm9rV00wVTlfVG9rZW46QUl4SmI0eFV3b2hKT2l4SXhKUWNpVGtxbjZmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDI4ZmQ3M2UxYzBlODQxNGM4YzlhZDg0ZDdiZTJjMDdfT1JYZTBJTG5IUFJrdXhKaVFWT2w1YUZvNkllcUp0c2NfVG9rZW46RjFkbmJrcGRib0tiZWJ4ZWJEUmNQQUhubjdkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æœåŠ¡ç«¯æ˜¯ä¸€ç›´è¦æŒ‚èµ·çš„

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2Q2YTUyOTRiMmRhNjk5ZjIzODA2MzNmM2RkOThlMzNfNmNsdXJYRUVpVlE1Vkprd004RXgxdFVSSVplZFBRelVfVG9rZW46SDFjWmJsV0dqb1lKTUF4cTVlNWM1SkIyblRjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å®¢æˆ·ç«¯æ˜¯æ‰§è¡Œå®Œæ¯•å°±ç»“æŸè¿”å›åˆ°ç»ˆç«¯çš„

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NGVkMzAxZThiZmU5YjIyN2YxY2ZjZDBmODRiMjE4ODRfUE0xb1RabkU1S0ttSnVZN2JqSVpxNUp2dVE2cGFmTHpfVG9rZW46UFkyVWJBSWl2b1dUU3p4WGczcGNFMEI4bjdiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ‰€ä»¥å®¢æˆ·ç«¯ä¸ç”¨è°ƒç”¨spinå‡½æ•°ï¼Œç›´æ¥åˆ›å»ºå¯¹è±¡å³å¯ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzdiMjZlZGYwYmRiMTQ4ODQyMmI4OWU4ZjkyODYzODFfTGdEb2xjSGNXWDJ0UUxPVnZvUVFYdnczTm93TzBsZW9fVG9rZW46WGI3TWJpdHBib3FJOFp4Z3JrVWNDYmkxbnRsXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```C++
#include "rclcpp/rclcpp.hpp"

class AddIntsClient: public rclcpp::Node
{
  public:
    AddIntsClient():Node("add_ints_client_node_cpp")
    {
      RCLCPP_INFO(this->get_logger(),"å®¢æˆ·ç«¯èŠ‚ç‚¹åˆ›å»ºï¼");
    }
};

int main(int argc, char ** argv)
{
  rclcpp::init(argc,argv);

//   rclcpp::spin(std::make_shared<AddIntsClient>());
  auto client = std::make_shared<AddIntsClient>();

  rclcpp::shutdown();
  return 0;
}
```

ç„¶åè¿˜è¦ç¼–è¾‘é…ç½®æ–‡ä»¶

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2I0OTE2MWI4OTc1MjVlMjMzMzFiZjVhNGJkYWJhMzlfTXRwUkc0OGJTVk5GV3g3eHZNWmZHaUlCMnRVM0tRM3FfVG9rZW46Q0ZkYWJSR0h2b25JQnZ4QTVJdmNzZlp4bkdoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

package.xmlç°åœ¨ä¸ç”¨ä¿®æ”¹

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzVkNDU5MWExMDg2ZDIzMjUwY2YwMWUyNzVlNjlhODVfR2l5Z2FrM1ZOaHRkUW1GWklPTGxxcmJBbmx2ZjBDT29fVG9rZW46VUJFb2JPMWhOb28wMXB4MDNJcGNiTEtIbjJnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjdiZjY1ZmJiNzAxMThiZmQ4YjgxMzAzYTdkYmZjMzRfSlVjR1oxN2xsYVQ1M0RRQWcxdzdrR2ttQkIyZWdwRzNfVG9rZW46WlpCQWJpNHVlb1ZaSk14Wkxhb2NjVUFObkZnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmMzNmQ4ODllN2FlZDZlMDZjYTMyMTYyMWQ3ZTUyYmZfdW5jSlN0ZVlSVVJFcGV1dDdmT0gyVG1RVEpONURUY1ZfVG9rZW46WWMzY2JBeWVPb1E0eDV4RG1NemNJMEEybkxlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTFmNTBiMDg1YzAwZWU1ZDU3YTYyNjRiM2I4N2VmYjRfcnlJNTJ1SWY4RjlQOFNGdHdJM3JvZkFheHYwRGFuUHRfVG9rZW46UlhmVWJONXBEb2h1VWh4ZWhtc2NQOXY0blhlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGZmOWNjNmNiNjVkY2RkNWY0M2Q4Y2UzY2JiMWQzNWFfS1g5V3lQUUQ1Nk5QMjBtQzJ0OFlESXJURk5TMlJlQUhfVG9rZW46VGhiVGJYOVk2b0NEc1B4bXNtWmNXMXRCbndjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWZiYmQyMTQ0OTk5NDhmMTExNmUzYTk5MjFmYWZkOTVfOWJ2a1NWaGIxUGNuUFRWNTBYRUY4dktIQm8wUjFpUGRfVG9rZW46WERVamIzNlkxb2I2aWZ4VVRxb2N0ZzBxblVSXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWNlNDJlZmFhZGMyZDEzNWQwZmNiNWY5MjVjZWFlMzlfRFFOUHZHMXV2Q0M5TkZHN1NGZndIRkdlNjFRb2toZmdfVG9rZW46WEk5bGJINGhFb3lJaTJ4cGtVVmNMUVVCblZlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODAyNjllODgzZjJhNTg5Y2E1ODVjOGM1MTRlMzE2ODJfeFNzMWlJTFpmTWpMaW1rMkVBZHNsbTRhbUhnZUVTMUpfVG9rZW46WEVBVWJMdlQ4b0c1THZ4NWVKdGNObmtQbkRjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTZlNzVkNzRlYzhkNzI4MjY2N2FhZmEwMzZlZThjZThfa25ySERyMjlDWU1DZmFpbTJXS09QempqMkg5Y01MbXNfVG9rZW46Wm9tRWJkYzlnb0dGRHd4SnVrMGM3QXJzblh4XzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YThlOTRmNTUyOTA5YWUzMWI1NzY4NjBiYWQ3YzBhMjBfd1hNaTdVTGduM0NERWdRcHJ4N255ZWsyRTBQRG1ieW1fVG9rZW46RXhLNmJOVmRqb0tQTnl4cnJuZGNUTjd1bkpnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æœ‰4ä¸ªå…¥å£å‚æ•°ï¼Œä½†æ˜¯åä¸¤ä¸ªæœ‰é»˜è®¤å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬åªç”¨ç®¡å‰2ä¸ªã€‚

ç¬¬ä¸€ä¸ªå…¥å£å‚æ•°å°±æ˜¯ä¸€ä¸ªè¯é¢˜åç§°ï¼Œå­—ç¬¦ä¸²

ç¬¬äºŒä¸ªå…¥å£å‚æ•°æ˜¯å›è°ƒå‡½æ•°

è¿”å›å€¼æ˜¯ä¸€ä¸ªserviceç±»å‹çš„æ™ºèƒ½æŒ‡é’ˆ

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmE2YjBhYmM1YzlhMWI4NmY1MmFmYzA1YzkyYzdhZDZfMDJmT0o5VzkwYllaUFV0Smo1SzMyQzgwQkdmWk9MaVVfVG9rZW46WGVjd2JxN1VXb1RLZ3l4bWZrUGNWWTZYbk5iXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODFiNTQzNWIwNGZmYzU5YTZjYjVmZDRiYzM2MGJmOGFfeUU0dzhxcjJRcUlnWXN0NlRRaGtLbUo5MTN3YzhGWnBfVG9rZW46WVhjZWIweFdSb2xhYkF4dlJFOWNKUjhUbmhnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzZmN2Q1ZjY3YmFkZmY0OWFmYTg3OWRhYTkyYzgyN2FfcFpPazZ2Y0FlNWVsM3B1aThXTEtHVkZsT0Z5c2Z6Z3hfVG9rZW46QnJGcGJGSEU1b2gzQlB4ZWdPM2N6WEhIblFJXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWNmNGI1NWFhYTQwNGMzNmI5MDNkYzFhYTNlYTA4M2NfQkZQVjhRc01tUFdGQ1d5cHdybUJlNEY2YnZFOEdBd05fVG9rZW46UVl4RWJTT2NYb0xPTkR4NHZVNWNsSEhFbnFiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzliOTQyYjUyYmViMWE5Zjg1MWNmYThmYWE4Yjc3YzlfVTlYNVc0YlBnY0RSOG1XcUFWeGVJeExJVHFyalc2MGVfVG9rZW46QTRObWJEN3hOb2V6WG14MGNKYmNXMjRxbkZ1XzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTJhOTgyNjE0NDRiZmY3ZmRhOTliNzNhZTFjOTY1MDJfczhsR1BUMXlrc0p2TjdlRDJ2TlI0aGdHSk13bUVqbElfVG9rZW46RHVJOGJKYzJ1b2Q1cjV4Z3d5NmNRcGRxbmJmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWMzNjA1NDM0YzE5ZTNkYTg4YmVhZDI0NzRiNzNiZmJfRmtVN0x0WlhDelpZYWk0MElOa0tweFNZSmtOQVVmbjNfVG9rZW46Rmh3YmJieklwb0k5U3p4dU5rdGM0NkxHbjBlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTFmNjFmMDkyNmI3OTYyMTI1MWNjNjA2NDA0ODAxYzJfb1gzSG81QjAxb2VrejRadENGWGRocEl4OHNTc0E0UVZfVG9rZW46Tm9Ha2JBdDQzb09MMHd4VldTa2NOemw2bjd2XzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```C++
#include "rclcpp/rclcpp.hpp"
#include "base_interfaces_demo/srv/add_ints.hpp"

using base_interfaces_demo::srv::AddInts;

class AddIntsServer: public rclcpp::Node
{
  public:
    AddIntsServer():Node("add_ints_server_node_cpp")
    {
      RCLCPP_INFO(this->get_logger(),"æœåŠ¡ç«¯èŠ‚ç‚¹åˆ›å»ºï¼");
      server_ = this->create_service<base_interfaces_demo::srv::AddInts>("add_ints",std::bind(&AddIntsServer::add_callback,this,std::placeholders::_1,std::placeholders::2));
    }
  private:
    void add_callback(const AddInts::Request::SharedPtr req,AddInts::Response::SharedPtr res)
    {
      res->sum = req->num1 + (*req).num2;
      RCLCPP_INFO(this->get_logger(),"%d + %d = %d",req->num1,req->num2,res->sum);
    }
_    rclcpp::Service<base_interfaces_demo::srv::AddInts>::SharedPtr server_;
};

int main(int argc, char ** argv)
{
  rclcpp::init(argc,argv);

  rclcpp::spin(std::make_shared<AddIntsServer>());

  rclcpp::shutdown();
  return 0;
}
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTEwNzJkNmFhZWFmYjI0NzY5N2E4MzIxYjg3ZTY1ODJfNzVYc2JpU244NUx1R2dMV2NMTExKT1ZleE9WV3ppUmhfVG9rZW46Tmp5ZGJqaDUyb29OVmN4U3hNMmN6cUVEblJnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGVlNjNiNTI4NGQwNjRkOGZlOTE0YWNiMmUwZGM2YmJfbkZ0bGVtM3ZMb0tyR1J6blpZaGhyZG5jc1F2ZXQ0cU5fVG9rZW46UFl1MGJKSTN3b0dOTVN4NWpXeGNvOUNNbmZTXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å› ä¸ºæˆ‘ä»¬çš„å®¢æˆ·ç«¯è¿˜æ²¡å†™ï¼Œæ‰€ä»¥å…ˆæš‚æ—¶ç”¨ros2 service callè¿™ä¸ªå°å·¥å…·æ¥æŸ¥çœ‹æœåŠ¡ç«¯çš„æƒ…å†µ

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODk4YmNmNWVjNjU1MzQ4MWNmM2M2NTE3ZjZlMGM2OWZfUkcxUnN5cDNxaERCbXRBTlVjZG43RzVEdFdnODh6TFNfVG9rZW46WFBNMWI3U1Nab09hTzl4UEIyNWN3eGZ6bjRiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Bash
ros2 service call /add_ints base_interfaces_demo/srv/AddInts "{'num1': 10,'num2': 30}"
```

ros2 service call + è¯é¢˜å + æ¥å£æ•°æ®ç±»å‹ + jsonä»£ç (ä¹Ÿå¯ä»¥ç†è§£æˆyamlæ ¼å¼çš„)

æ­¤jsonä»£ç (yamlæ ¼å¼)æ ¼å¼: "{'ç¬¬ä¸€ä¸ªæ•°çš„å': **ç©ºæ ¼** +å¯¹åº”æ•°å€¼,'ç¬¬äºŒä¸ªæ•°çš„å': **ç©ºæ ¼** +å¯¹åº”æ•°çš„æ•°å€¼}"

9.  ## æœåŠ¡é€šä¿¡\_å®éªŒ1\_å®¢æˆ·ç«¯å®ç°(C++)
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWVlM2RiMzY5NWEyMDg2NjVkODg4MTMzZDZlMmNmNzRfZGNmUHZWV2tSczl5ZjRXRFp4MXFnYnJxSVhGc0J6OHhfVG9rZW46VnBRSGI1dklkb1lsZ3F4NUJwd2NMUFBibnJlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzE5Zjk4YjEzYjYzMjc4NmVmN2Q4MmY0NzY2MGQ3N2Vfd1JoOUhrVTZaZzZtOTU1VG8wQXpTS2pvRUg4TmxNeFBfVG9rZW46V29Ud2JJdHRSb1RUMFh4TU40cWNtakQ3bnRlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmZiNWJjZjYyNDA0ZTNmZTdiMTE4ZGNiYjQwMjlhMDRfM2xiR0FwMmUweEF5akdBd0EweHZUbU1oc2xHVzRtcW9fVG9rZW46SXgycWJXNUNjb01adTF4NXF1aWN0WlFybmxjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGQ4ODYxYzcwZDQ1Yzk3OTMxZGUzYmE5MTM2MTAwZGZfMjdPZncwNGRDUWI4dTdQeXZ1V2I2WWxSN2JkbkdNQ1dfVG9rZW46UUFZM2JieHdKb3VIdzZ4R3RqVGMxbnVFblZiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿è¡Œçš„æ—¶å€™åé¢è·Ÿäº†ä¸¤ä¸ªæ•´å½¢æ•°æ®ï¼Œ

æ‰€ä»¥è¿™ä¸ªargcåº”è¯¥æ˜¯ç­‰äº3çš„ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWM5NTIwYmYyOWVmNGQ2YjdmMjlmNDRiNDU4Yzk0YzlfZ3NvOHppVml0VGVYc0dzTkRpWTFOa0FTTUh1OXhNU1RfVG9rZW46UU5PVGJsSVdJb25VS3d4VzlzQmN0ZEdEbkNmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTFmYTcwNWYzMDFlYjJjNThiYmQ0ZTExZmUxZTZhZmVfYXhmckl0Z0dpR0VFNWNuc3hvV0huNTJuNHFVMVVDWjBfVG9rZW46VVdaYmJkeDNVb2tWaGZ4eTI4dmNsRHRMblM2XzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzRmZjJmOTk4MDVlYjM2ZTc1NGZmYmQ4NjE0ZWM5MDRfUEZYZ1Q5YzFRc0NlWG95NzI5OG96MkRIWTNoMFQwMGlfVG9rZW46TTFaN2JLWFY3b3d0QTB4dVVnR2NiMzFkbjFlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

**argv\[\]:æ¥æ”¶ç¼–è¯‘æ—¶çš„è¿”å›çš„argcçš„å‚æ•°**

**argcæ˜¯å‘½ä»¤è¡Œæ€»çš„å‚æ•°ä¸ªæ•°**

**argv\[\]æ˜¯argcä¸ªå‚æ•°ï¼Œå…¶ä¸­ç¬¬0ä¸ªå‚æ•°æ˜¯ç¨‹åºçš„å…¨åï¼Œä»¥åçš„å‚æ•°**

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjRhMTAxMmYzZDI0NWU5ODIwMmMyNDNkZDFhOTg0NWRfMURhSk1nWUtSUnkzcDBjbnVrS3IxaVFMRDcxTUZPQWpfVG9rZW46WXV4amJUbnFwb2swb2N4bXF2VWNFUmxNbnhkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjlhMTI2MzcyYjU2YjQ4MzVhNjgyNDhiODdmN2RmNDRfSnB0SUF5VGMwYTJaUmpmTHMyNG9RWXlJNmpkOXNxb1lfVG9rZW46SmIxRmI4Y1Ztb3JoMFF4d3pNYWNldkZDbldnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¿…é¡»å¾—ä¿è¯æœåŠ¡å™¨å¼€ç€ï¼Œå¹¶ä¸”å®¢æˆ·ç«¯èƒ½å¤Ÿè¿æ¥æœåŠ¡å™¨ï¼Œå¦‚æœæœåŠ¡å™¨æ²¡å¼€ï¼Œé‚£ä¹ˆå‘é€çš„æ•°æ®ä¼šä¸¢å¤±ï¼Œä½†æ˜¯ä¸€èˆ¬ä½¿ç”¨æœåŠ¡é€šä¿¡çš„éƒ½æ˜¯æ¯”è¾ƒé‡è¦çš„ä¿¡æ¯ï¼Œä¸€å®šä¸è¦ä¸¢å¤±äº†ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGIzYjVlNjVjYzA1OWZjM2IzMmIzODFmYmIyOTIyYzdfN3pKNG5wc0NoZWtRMmtWaENVS1RrZW1taklUSkhlMjhfVG9rZW46WjBQVmJ3eElDb1lKMk94eEZaYmNBSTR2bkFlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å®¢æˆ·ç«¯å‘é€å®Œæ•°æ®åï¼Œä¼šäº§ç”Ÿä¸€ä¸ªå“åº”ï¼Œè¿™é‡Œç›´æ¥å½“å‡½æ•°çš„è¿”å›å€¼ç»™è¿”å›äº†ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDY3NjdlYTQwZWQzNDI2NmEzMGM4MzgzN2NkZjBlZTVfbU5sN0tBc2xYWWxnMjRUSjhuVmtQclNDd09uNmVEUFFfVG9rZW46VWFKQ2J3N3h4b3hJZTB4elZsbmMxQU14blhlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjM3NDllMTdmMDQzZjA5NmMwNzQyNjAxMzk1NzM3MGRfdnc4Y1I0cmF1WjBwUUJxOGdJcWpFRlZVbjZyd1BkNnpfVG9rZW46RHpEUWJRN3dkbzBscEF4d0Zjb2NwVnNrbms2XzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTU0ZjVmZTVmNDc5YjYwMmM5MTg4MmQ0MjUwMmI0NjdfZEFaQzdOVGRsUXphTTRZQWRZZmRmNnI1ZWhxUDdSdEJfVG9rZW46UVhTWmJzNk1lbzdSZE94UFBpMmNyeERvblZiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjhlMTdkN2QwOGVlMTFjNGE3MjYzYmJmZWMyMWQ3MDFfbzlQTzAzaG42VHJadnpaU2xVc3Bhc3ZoVXptRVBRZEhfVG9rZW46VzhYTWJhNVJNb1VXOEN4VHRVWmNCYlpXbmNiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjRkNzA2YjgyNzZkYzk2NDNhZDQ5OTQ3MTI0NTYyYWNfU1U0ZUhLQzRpN0dycE9mRTcyeUNaaUFDQTdUTXBJcXlfVG9rZW46R09rRmIxTWZOb2YxbFp4TkZ2SGNCbUZWbnpmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjhhMGEzYjVmMjgyZDk3NDEwOTYzODJlNWJlNWZmYWFfeDA5NUlNd0lnSXVnaTQwdWRrWFVHTWxoSURLbG1oVGZfVG9rZW46R1YxcGJYZVhSb0lFZU54RUR2TmMyYVVObjljXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```C++
#include "rclcpp/rclcpp.hpp"

class AddIntsClient: public rclcpp::Node
{
  public:
    AddIntsClient():Node("add_ints_client_node_cpp")
    {
      RCLCPP_INFO(this->get_logger(),"å®¢æˆ·ç«¯èŠ‚ç‚¹åˆ›å»ºï¼");
    }
};

int main(int argc, char ** argv)
{
  rclcpp::init(argc,argv);

//   rclcpp::spin(std::make_shared<AddIntsClient>());
  auto client = std::make_shared<AddIntsClient>();

  rclcpp::shutdown();
  return 0;
}
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTkxYjE5Y2ZiZmJjMjEwNzQ1MzYyNzBlOTVhMWQ3MDZfYjJIbnY5SUQxRnNRTzN3Q0dlT01iUjhKSU13UDJ6dWdfVG9rZW46SVBlWmJKTkNtb2dvY1R4RGQ0R2Nua1ZJbkVYXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™ä¸€æ®µå°±åº”è¯¥æ”¾åœ¨èŠ‚ç‚¹åˆå§‹åŒ–å‰é¢ï¼Œé˜²æ­¢å¤šä½œä¸€äº›è€—èµ„æºçš„æ“ä½œå†è¿›è¡Œåˆ¤æ–­ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTFmZDU0NzJlMzM0NDJmNjU3YzgzYWU0MGJiNGU1YmNfM2xndW9ZYm1RM3FIUUJiWGRqbVhGWnExMnVGNnRvSVdfVG9rZW46V3FET2JpVXJwb3RRUDJ4RVA3TmNwbFVtbk9MXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å› ä¸ºRCLCPP\_INFOåœ¨èŠ‚ç‚¹åˆ›å»ºçš„å‰é¢ï¼Œæ— æ³•ä½¿ç”¨ç±»å’Œå®ä¾‹åŒ–æ–¹å¼è¿›è¡Œget\_loggerï¼Œä¹Ÿå°±æ˜¯æ— æ³•ä½¿ç”¨thisæŒ‡é’ˆå’ŒèŠ‚ç‚¹æ™ºèƒ½æŒ‡é’ˆæ¥è·å–ã€‚

æ‰€ä»¥æˆ‘ä»¬é‡‡ç”¨ä»¥ä¸‹æ–¹å¼ï¼š

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWE5ZGU5M2I0Yjg4NjUxOWJiODdiMjBlMDdlNDMxMGZfMTlxTWh1dG04UGJBeHFZTm1BQXg4OEJkektlSlB4NXVfVG9rZW46RXVIV2JQVVRlb3hpSmJ4bEFaQ2NIZUFyblVkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™ç§æ–¹å¼é€šè¿‡rclcppé‡Œçš„get\_loggerï¼Œä½†æ˜¯éœ€è¦ç»™æ—¥å¿—èµ·ä¸ªåå­—ï¼Œæ”¾åˆ°å…¥å£å‚æ•°é‡Œï¼Œæˆ‘ä»¬å°±å«rclcppå§ã€‚

```C++
#include "rclcpp/rclcpp.hpp"

class AddIntsClient: public rclcpp::Node
{
  public:
    AddIntsClient():Node("add_ints_client_node_cpp")
    {
      RCLCPP_INFO(this->get_logger(),"å®¢æˆ·ç«¯èŠ‚ç‚¹åˆ›å»ºï¼");
    }
};

int main(int argc, char ** argv)
{
  if(argc != 3)
  {
    RCLCPP_INFO(rclcpp::get_logger("rclcpp"),"è¯·æäº¤ä¸¤ä¸ªæ•´å½¢æ•°å­—!");
    return 1;
  }
  rclcpp::init(argc,argv);

  auto client = std::make_shared<AddIntsClient>();

  rclcpp::shutdown();
  return 0;
}
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWUzYzU4MzE2NTlhZWI4ZGY1M2RlZGRmZmY5ODk1YjdfMUlrcG8wd0tYeVRHeHlaSjVaRFFoMGJ4czFHdkM2aVFfVG9rZW46SEVSWWJCVFlnb2lXOUp4dHZOZmN4YnhPbm5VXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjQ2NTg1NWIxOGFkMjY5Njc1OGQ2NjQxNjY3N2U4MGFfWXJ1ZWRYQ3A4cU9QN3ZTWGpHaUJmRm1DQWlhdWhva3JfVG9rZW46UGNZWGJGQUVrb21LMVp4NVJvYWNwdkx4bm5iXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzQ4NTMyNTE3ZmEwOTY5NmUwZTc1ZWZmOTZlOTI2MzZfWTRxUzB2Z3dBQjVCYmt2ODhRMXhpekhYT2ltOTE2SGhfVG9rZW46WHFVQmJIRUswb3hFTVR4amtwUWNTQ3VEblFjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¦‚æœæˆ‘ä¸æäº¤å‚æ•°ï¼Œç›´æ¥å›è½¦ï¼Œç„¶åè¿™æ˜¯ä¸€ä¸ªå¼‚å¸¸ï¼Œä¸»å‡½æ•°è¿”å›å€¼ä¸æ˜¯0

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjE4MTNiMDFkZWIxZDdiNDgzNGZhZjM1NGMzZWI3YWVfVVdIVDZTYmY1c3dXbXpqREI5TFJxNzk2STY1UTBYR21fVG9rZW46SFhMUmIwYlowb1BlZFp4NUVGdmNBTVJvbnRnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWYxMmQwNWNmMTZhYTJiYmFjZWY2MGZmY2FkZDNiMzNfU216N2RtUFZiQVZ2WVZOVEZkUThjS0laVUp6Y0c1SGJfVG9rZW46V2Y3UWJ6bE12b3ZZVGJ4cW9Ec2NTU2V1bnVkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¹Ÿå¯ä»¥æŠŠINFOæ”¹æˆERROR

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODNmZmE0NjA4YmVlNGE0NDEwMDI2M2ExM2RmZTRiZDhfclJ6cndTWGtTS095cVFzQzA4aWRsY05rZUtaZzlvYkJfVG9rZW46UUtITmJQdlBRbzd5VDB4cldTNWNpR2l4blhkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```C++
#include "rclcpp/rclcpp.hpp"

class AddIntsClient: public rclcpp::Node
{
  public:
    AddIntsClient():Node("add_ints_client_node_cpp")
    {
      RCLCPP_INFO(this->get_logger(),"å®¢æˆ·ç«¯èŠ‚ç‚¹åˆ›å»ºï¼");
    }
};

int main(int argc, char ** argv)
{
  if(argc != 3)
  {
    RCLCPP_ERROR(rclcpp::get_logger("rclcpp"),"è¯·æäº¤ä¸¤ä¸ªæ•´å½¢æ•°å­—!");
    return 1;
  }
  rclcpp::init(argc,argv);

  auto client = std::make_shared<AddIntsClient>();

  rclcpp::shutdown();
  return 0;
}
```

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2I0YmJjYTRjOTcxYWViNmUxOTEwNGU5MGFkODgxMDJfcHVkR0xoRUQ5a3ZxQmtsQndzYU83cEY3dzFMOTJVSkxfVG9rZW46U2J1dWJGam95b0R2YkR4cWZUU2NUSUJqbjJlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¸€å…±3ä¸ªå…¥å£å‚æ•°ï¼Œ

ç¬¬ä¸€ä¸ªå…¥å£å‚æ•°æ˜¯è¯é¢˜åç§°ï¼Œæ˜¯å­—ç¬¦ä¸²;

ç¬¬äºŒä¸ªå…¥å£å‚æ•°å’Œç¬¬ä¸‰ä¸ªå…¥å£å‚æ•°æœ‰é»˜è®¤å€¼ï¼Œå…ˆä¸ç”¨ç®¡;

è¿”å›å€¼æ˜¯å®¢æˆ·ç«¯çš„æ™ºèƒ½æŒ‡é’ˆã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTliMWRhYzI5MWQzZjdhYTI5MzBkZTcyYWI5YzUxMTJfVjdaVFFsaDh0UUJzUEplWDk0OXJCMlBaa3RlQ01MVUNfVG9rZW46THNGNWJhdFMxb0NCMjJ4N1VwcWNpN2l1bnJ4XzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTI2ZmQ0MzBhNWEzYTg3Yjc2MjRlYjMxNjg0MWYzYzFfOUVmandsdDNBdmN0SlFnOHRWb3J1R2d1WjFOczU1a0NfVG9rZW46WkpGYWI1clVRb1gzMzF4bkJiYWNMTXRpblplXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjE0ZDQ1NDA5ZmMyZGQ5MzQ1YjJlNzNiNjZjNWNhZWVfNzNJNG55NzFJUmZOWEVZb0R0ZElwU1BrMkZrcUZ0QkZfVG9rZW46VklDemJGcTk5b2FqaGR4MWRtcGNITnhObm9mXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzQxOTMwMGJiM2JlZjUxZTAzMDM5MThhMWZjODE0MDBfVElTOWhYbEN3NEtvNGNCQ3FQWDh4MTRwNkp4Z3Q5VGlfVG9rZW46WldmVGJtMFp1b2xPV0R4UnNIMGNqSUI0bnpkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGViMDQ5ZjJiMmVmMWFkNTI3NDVjZDk3ZmRmNTU5NGVfZTZRaThKWWR2UzRobkV3aFZqcmZaYVIzbmU1YWhuZ1dfVG9rZW46VVo2MmI1a001bzR2Mjl4ajJtdmNMcW1ubkdnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2M2YzQ3NTg5OTgxNmE4ZTI3N2UwYzM4YWNiODFkMTNfTXpNOVdCMldRd3FOVllhaXVYajBiQmY4OUVScHptWWpfVG9rZW46RmJGNWJPTHZnb1BuUWR4cTQxcGNlMXExbm9iXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTAwNDg2ODJhYzkyYzVhMWQyNzFiODFkYzc2MDUzNDhfdEJSTm9VNHB6Z2tRaDdRNWwxbThyZWs0clVFN2NyZ2FfVG9rZW46WGJnSWJZR053b3R6amd4aVBOUGNPVWlzbjFjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2FiZDM2MmE3ODMwOTkzOGI3N2NhNDE2NGU1MDEyMDJfTDM5cmJQaERrajdIRWs0c1VGbWRUOVNlcDV0TVZCR1FfVG9rZW46VXlhTWI4NWJTb0FTZEN4ZjJ0bWNubHFDblNoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDIwNTliYzE5NjYyYzQzMWVjMDEwNzY5Y2ZhNThkYjhfNVpXVnlKSVc5OVNCNkF0a1pxeDV6ZUFRVTRlNkxJd1dfVG9rZW46QWEwV2I4VVlCb0pNeVp4dlQ3MWNranBxblhkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzZiNTliODIwMjdiY2Y5YWU1NTgzMTA4YTUxODQxOTZfNHZTdmJSclpNNUFSQ2JUMnpwc0llMmZjMW5aRFNQblNfVG9rZW46UXQzdmJtREhMb2JQWXF4TmQwa2M4ZVZvbldiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTIyMjQzZmNhNDQwMWQ1MDkyZDFmY2JhOTg5NDI2MGRfMjBqbzhwYWdxRXFJQzkxWmNuUHFGaVU3RzVRS0ZoNFRfVG9rZW46SmpUcWJaNXY2b2ZjNVh4eEtRbGNWRXhRblFCXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¸€æ—¦Ctrl+Cå…³é—­ï¼Œåˆ™ä¼šç–¯ç‹‚çˆ†INFOï¼Œä¸”ç¨‹åºæ— æ³•åœæ­¢ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjVjOTMxMjY1Njk3MmFhNThmYTYxNWNhYWY0OGNkNTFfcGNDOUtCbkh0MnBhWURabDdZcklaWFYzVmpIdlVLS1JfVG9rZW46WjAzdGJoWXF2bzduanZ4Z1lpZ2M1cEY2bldjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDY3MjBhODIyZDc5ZmM2ZGY5YWI0OTc5ZTk5NDY0MzdfTFpDcVpEaUNRbHRoajloS1NyYzY1UDFxTGpzQkc3V3BfVG9rZW46V2xYbGJKdHdGb1RVSHZ4cDhUUGM4bzhRbkpiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å†æŒ‰Ctrl+Zå¯ä»¥åœæ­¢ç¨‹åºè¿›è¡Œã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MWI4YTgxZDFiMmQzNzdjNGU3ZDFmNjNiMjcyOWNmYmVfb1lSeHZTdlhsbWVWeFJxTnFLUkp2eFQ0NEowY0hqTVJfVG9rZW46QnRCcmJOYlR6b2d4NG54SndKSWNsWHcybmJjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDNlNWYxNGMyMmYyNDc2YmRmYTk1ZDRjYzdlZjVhYTFfeDdCcTlIc2ZlM1RFTU9YRWpUdTBsVjN2eUtQUFVGZXpfVG9rZW46WjRNZ2JOeUxQbzZ5bDB4Q2htdGNuTDR3bndjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è§£å†³ä¸Šé¢Ctrl+Cçš„bugï¼š

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTE4M2FiN2U1Yjc1OGU0YWM4ZDFhMzExOTRkYTRjYzVfeUFVSDYyekxFQUN5RzNIc09pMHR6ckxEY2R6dUhXUFdfVG9rZW46U0Y2dGJpSFFLbzlTY214ZmY4VGNDckg1bnZnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

rclcpp::ok()è¿™ä¸ªæ˜¯åˆ¤æ–­å½“å‰ç¨‹åºæ˜¯å¦æ­£å¸¸è¿è¡Œï¼Œå¦‚æœæ­£å¸¸è¿è¡Œï¼Œåˆ™è¿”å›trueï¼Œå¦‚æœä¸æ­£å¸¸è¿è¡Œåˆ™è¿”å›falseï¼Œæ¯”å¦‚æŒ‰ä¸‹Ctrl+Cå°±æ˜¯ä¸æ­£å¸¸è¿è¡Œã€‚

å½“rclcpp::ok() != trueçš„æ—¶å€™ï¼Œå°±æ˜¯ctrl+cæŒ‰ä¸‹äº†ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2VjZTAyYzBmYjVjMGQ5ZDA0NDVkYzc0NWYxZjA3YzZfR3ZJOElxbnU0N0V3R0VVOW5mcWNBR0ZpOVJPSk9OT0pfVG9rZW46TFlCVmJMUjlKb2xoRHp4d2JkWGNwRXFwbmtnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™æ ·ç›´æ¥å¯ä»¥è®©å‡½æ•°ç»“æŸã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDExZDk5YTMyNzk0MmNmZThjMDVlMDIyNGZkOWQ1NWFfMEdNald1eXRmQkh0aWdUV280SW9LTTlYVldmYkxBa0dfVG9rZW46V2lFZmJYRnl1b0txcEp4azVxc2M3ZkR6bkFiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDBlZmFiZTA2MTkwYTU1MThiOGQ4Yzk5N2NiMjQyYWFfZXp3TTFneHNSR3hmajRINk9jTTVRV3djSGZ4eVVOa0dfVG9rZW46SzF0YWJ3YVNJb0RXYmR4QUJKb2MxSnlhbkxoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™æ—¶æŒ‰ä¸‹ctrl+cä¼šçˆ†å¾ˆå¤šé”™è¯¯

è¿™æ˜¯å› ä¸º

this->get\_logger()

client->get\_logger()

rclcpp::get\_logger()

çš„ä¸åŒ

è¿™ä¸ªå¼‚å¸¸å’Œcontextæœ‰å…³ï¼Œåˆå§‹åŒ–çš„æ—¶å€™ä¼šåˆ›å»ºcontextå¯¹è±¡ï¼Œç›¸å½“äºæ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œå¯ä»¥å¾€å®¹å™¨é‡Œæ”¾æ•°æ®ï¼Œä¹Ÿå¯ä»¥åœ¨å®¹å™¨é‡Œå–æ•°æ®ã€‚

å½“å‰ï¼Œå¦‚æœæˆ‘ä»¬è¿æ¥å¤±è´¥çš„è¯ï¼Œæ‰“å°æ—¥å¿—ã€‚

æŒ‰ä¸‹ctrl+cä¼šç»“æŸæˆ‘ä»¬çš„ROS2ç¨‹åºï¼Œè¦é‡Šæ”¾èµ„æºï¼Œæ¯”å¦‚è¦å…³é—­contextï¼Œè¿™æ—¶å·²ç»å…³æ‰äº†contextï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬å†ä»clientå’Œthisæ¥è·å–æ—¥å¿—ï¼Œå°±ä¸è¡Œäº†ï¼Œæ‰€ä»¥å»ºè®®ç”¨rclcpp::get\_logger()ã€‚

å› ä¸ºrclcpp::get\_logger()çš„è°ƒç”¨å’Œcontextæ²¡æœ‰å…³ç³»ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzZlYmJhYTZkOGMyOGQ4ZGVmMDczM2U0NmJmOTc4ZGNfQVBKT0xDUHVzcWJiSUpJYzhIalo2S3lJR24xTE43YXFfVG9rZW46VURSZmJwbVJKb1A0anh4NVFnUGNUN0FQbkRiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™æ ·ç¨‹åºå°±æ­£å¸¸äº†ï¼

```C++
#include "rclcpp/rclcpp.hpp"
#include "base_interfaces_demo/srv/add_ints.hpp"

using base_interfaces_demo::srv::AddInts;
using namespace std::chrono_literals;

class AddIntsClient: public rclcpp::Node
{
  public:
    AddIntsClient():Node("add_ints_client_node_cpp")
    {
      RCLCPP_INFO(rclcpp::get_logger("rclcpp"),"å®¢æˆ·ç«¯èŠ‚ç‚¹åˆ›å»ºï¼");
      client_ = this->create_client<AddInts>("add_ints");
    }

    bool connect_server()
    {
      while(client_->wait_for_service(1s) != true)
      {
        RCLCPP_INFO(rclcpp::get_logger("rclcpp"),"æœåŠ¡è¿æ¥ä¸­!");

        if (rclcpp::ok() != true)
        {
          RCLCPP_INFO(rclcpp::get_logger("rclcpp"),"å¼ºè¡Œç»ˆæ­¢å®¢æˆ·ç«¯!");
          return false;
        }
      }
      return true;
    }

  private:
    rclcpp::Client<AddInts>::SharedPtr client_;
};

int main(int argc, char ** argv)
{
  if(argc != 3)
  {
    RCLCPP_ERROR(rclcpp::get_logger("rclcpp"),"è¯·æäº¤ä¸¤ä¸ªæ•´å½¢æ•°å­—!");
    return 1;
  }
  rclcpp::init(argc,argv);

  auto client = std::make_shared<AddIntsClient>();

  bool flag = client->connect_server();

  if (flag != true)
  {
    RCLCPP_INFO(rclcpp::get_logger("rclcpp"),"æœåŠ¡å™¨è¿æ¥å¤±è´¥ï¼Œç¨‹åºé€€å‡º!");
    return 0;
  }
  

  rclcpp::shutdown();
  return 0;
}
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWM0YmU4MGMyMGUyODZlOWNjMzMyMmQ1MzE4NGI5NTZfdkxEdlVQYUhtWFhWTTJQQlMxNzUxS0JVTVNNOW9qZWxfVG9rZW46VlBCNmJvRWRCb3BpZUt4TGtVQ2NVcnNJbk9nXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzFhMzRmZWQ2MjY0NGJhNTc1OWE5YzE0MzcwZGE0ZGVfZmR5M3h3T3VsUU9rZEc0anZydnZVNUhNTk96TnJuMVRfVG9rZW46R2V1WmJsOUVFb0k4bjR4TDBRTWNOWm1sbmFiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWM3ZDQxYjI5ZGFjNzA0MmJkMmYwMzEwMTZlNDcyNTNfVlVCYmlqQTM3S25RdVhmbzdVaHVOeGZMT3p1WGRueThfVG9rZW46TmxvRmJCQU5lbzF1R3J4RFAwamNkRTVkbjFmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzhmZmEzZDQ2YzNlMTMxNjhlYWFlZjAwYjgwNmI3ZTlfYWtrdHY1SnN3YjlNVklwdGNWWVNmaTV5RFlFakN3dTNfVG9rZW46QkREMGJZcktwb3JRZ3Z4eTZydGNoVks5bkUxXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿”å›å€¼ç±»å‹æœ‰äº†ï¼Œæˆ‘ä»¬å°±ç²˜è´´è¿‡å»ï¼Œ

å› ä¸ºusing base\_interfaces\_demo::srv::AddIntsæ‰€ä»¥å¯ä»¥çœç•¥æˆAddInts

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2RlM2MxNDE2MTgwYjRiYTljZWNhYWIyYzAyNjc2NzBfVHpaaEt1UVRRd1JLRjVHM1pkMUl3SnhoZ2FZU3NCZTBfVG9rZW46U1lGUWJXYjlsb3BSa0Z4eXFQVWN3Y2dsblRlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmM0ZWFkNTgzOGRhNGFjMDhjZDc4OTcyZGY4MjQ0NjFfeUtCUzFOa1k3d2hTaU9QTWVTTjkyYWsxWEhkR3p2TTRfVG9rZW46UHlDM2J5bUJXb3lFQVZ4cFNEeGNDRzM2blZkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODQ3MTQ4ZTUzMjQ1MjhlODYzMWMwY2FhOTM3NzFmY2FfZ1RoWkZ4eG5HSTAyZ3J1aVltdGZNd2JHR0VDU2VpUnlfVG9rZW46U0k4c2JlNzhob3VCN0R4c0I5VmNvUnJXbjFnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

åœ¨ä¸»å‡½æ•°é‡Œè¦è°ƒç”¨å‡½æ•°ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2U2MDc3Njg3N2NiNDdkMTZkMzI4NTVmNzkzMWUzZmFfRW1XTUd3bTdlRkF4Y3gxSHJKN3FsbHFOeExWVk9nSndfVG9rZW46UjVJTWJnREhVb3lHMFB4TTlEVGNBR0JYbmZoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

atoi()æ˜¯æŠŠæ•°æ®è½¬åŒ–æˆæ•´å½¢

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTliOTA4ZjAxNGUxOTkzODg0NTUwN2Q5NTEyZTdjZTVfRjZkUURJN3VNdTZCdE9UTlZ0QjZ0Rm9qUml0UmRabVFfVG9rZW46VVl6aWJmamVmb1N1RjZ4SG9VWGMwVDh3bm5mXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æˆ‘ä»¬è¿˜è¦å¤„ç†å“åº”ï¼Œå“åº”æœ‰3ä¸ª

ç¬¬ä¸€ä¸ªæ˜¯ä¸­æ–­ï¼Œç¬¬äºŒä¸ªæ˜¯æˆåŠŸï¼Œç¬¬ä¸‰ä¸ªæ˜¯è¶…æ—¶;

æˆ‘ä»¬ä¸€èˆ¬åªåˆ¤æ–­æˆåŠŸï¼Œå…¶ä»–ä¸¤ç§æƒ…å†µéƒ½è®¤ä¸ºæ˜¯å¤±è´¥ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzNjOGRmYjRmZTY0NTUyMGM4ZTIzOWYyYzI3ZWJmMjlfa0hVdFpOYTNtcXA4Tmg1WXdoUGJsYWkwbG1QR2oydXFfVG9rZW46SGo2Y2JmMzZXb09JN2R4anFtTGNtNVMybnZoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ç¬¬ä¸€ä¸ªå…¥å£å‚æ•°æ˜¯ èŠ‚ç‚¹çš„æ™ºèƒ½æŒ‡é’ˆ

ç¬¬äºŒä¸ªå…¥å£å‚æ•°æ˜¯future

ç¬¬ä¸‰ä¸ªå…¥å£å‚æ•°æœ‰é»˜è®¤å€¼ï¼Œå…ˆä¸ç”¨ç®¡

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWI4YjMwZTYxMDA2ZDgwNTc0MGM2YmQ1NDMyODFiNzBfMGxJOWtPUjREb3pxWDNGRlVDNzVqUzBHdTBiQnk3aDdfVG9rZW46VlhzOWI5djFjb2hONkd4YU1kSGNHd3JSbmRBXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWMxZjBlNjQ2Mjg1NThhMDQyY2QyODUyOGVhZmZhMGFfZ1NYTGdLTzE2RGN4S05TR3dxOGtXcUJ0Z3pWM3RHME1fVG9rZW46UTN2cGJvaXpZb0V3MzN4TU5VSGNxbEhobjVmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWM4MjhkNjJlYmFlMzhlN2Y4MWRiYmVlZDBiY2UwYjZfY1lWMkZhTEFIQ2M5NzFNN210bG5wdTFLbnVFMFBMaGRfVG9rZW46UHZHM2JFcEoxb0ZXcnJ4UGlQZmMwcGJpbkRmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmQwZmNkN2JkNjdmZWY5ODJmODFjMzg4ZGUwZWNhMzRfbU9xTml4R3dUMzVjenltOTlqUXA4R1dpRE1sTTZmZUVfVG9rZW46UVpTbWJXcE1Hb0dITUJ4UTJ1VWNCQXdJblJlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjlmMWZkYzczZGNmMDBiOTNjZTUxNDcxODI3YjhmZDNfRHpSS0VJeVhuN1Z6ejQxYjIzMlB3UTg1SkZsVDhtcjBfVG9rZW46QXI1U2IwaVpHb2g2Zmh4SnhZcGNUekh6bnNkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```C++
#include "rclcpp/rclcpp.hpp"
#include "base_interfaces_demo/srv/add_ints.hpp"

using base_interfaces_demo::srv::AddInts;
using namespace std::chrono_literals;

class AddIntsClient: public rclcpp::Node
{
  public:
    AddIntsClient():Node("add_ints_client_node_cpp")
    {
      RCLCPP_INFO(rclcpp::get_logger("rclcpp"),"å®¢æˆ·ç«¯èŠ‚ç‚¹åˆ›å»ºï¼");
      client_ = this->create_client<AddInts>("add_ints");
    }

    bool connect_server()
    {
      while(client_->wait_for_service(1s) != true)
      {
        RCLCPP_INFO(rclcpp::get_logger("rclcpp"),"æœåŠ¡è¿æ¥ä¸­!");

        if (rclcpp::ok() != true)
        {
          RCLCPP_INFO(rclcpp::get_logger("rclcpp"),"å¼ºè¡Œç»ˆæ­¢å®¢æˆ·ç«¯!");
          return false;
        }
      }
      return true;
    }

    rclcpp::Client<AddInts>::FutureAndRequestId send_request(int32_t num1,int32_t num2)
    {
      /*
        è¿”å›å€¼ rclcpp::Client<base_interfaces_demo::srv::AddInts>::FutureAndRequestId
        å…¥å£å‚æ•° async_send_request(std::shared_ptr<base_interfaces_demo::srv::AddInts_Request> request)  //å…¶å®å°±ç›¸å½“äºAddInts::Requestç±»å‹
      */
      auto request = std::make_sharedautolinkAddInts::Requestautolink();
      request->num1 = num1;
      request->num2 = num2;
      return client_->async_send_request(request);
    }

  private:
    rclcpp::Client<AddInts>::SharedPtr client_;
};

int main(int argc, char ** argv)
{
  if(argc != 3)
  {
    RCLCPP_ERROR(rclcpp::get_logger("rclcpp"),"è¯·æäº¤ä¸¤ä¸ªæ•´å½¢æ•°å­—!");
    return 1;
  }
  rclcpp::init(argc,argv);

  auto client = std::make_shared<AddIntsClient>();

  bool flag = client->connect_server();

  if (flag != true)
  {
    RCLCPP_INFO(rclcpp::get_logger("rclcpp"),"æœåŠ¡å™¨è¿æ¥å¤±è´¥ï¼Œç¨‹åºé€€å‡º!");
    return 0;
  }
  auto future = client->send_request(atoi(argv[1]),atoi(argv[2]));

  if (rclcpp::spin_until_future_complete(client,future) == rclcpp::FutureReturnCode::SUCCESS)
  {
    RCLCPP_INFO(client->get_logger(),"å“åº”æˆåŠŸ! sum = %d",future.get()->sum);
  }
  else
  {
    RCLCPP_INFO(client->get_logger(),"å“åº”å¤±è´¥!");
  }

  rclcpp::shutdown();
  return 0;
}
```

  

10.  ## åŠ¨ä½œé€šä¿¡\_ç†è®º
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTM1YjhkZmE4YmRmZjEyOWZkODkyN2FhOTVmMmEzZDFfbkF4MEhmWjZzcElXb014R2JlUk5qMU41OG84b1ZQc3RfVG9rZW46VElUT2JwR3VJb0lvSGp4WHVvZmN6cmlnbnZiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è®©Bä¸€ç›´ç»™Aè¿”å›å½“å‰æœºå™¨äººçš„çŠ¶æ€ä¿¡æ¯ï¼Œè¿™æ ·çš„è¡Œä¸ºé€šä¿¡æ›´ç¬¦åˆæˆ‘ä»¬æ“æ§æœºå™¨äººçš„å¯¼èˆªéœ€æ±‚ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGYxNWFhOTQ5YWRmOGM5ODc4ZDU0NGU1NDRmZjdkZjJfb0JVTll1NUhpMG9vSlM1TXViYXhtdDNhOXF2VU1HNkJfVG9rZW46RTRBV2J2Y05Wb2ZudkV4N1pTemNzR1V4bmpjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¾“å…¥10ï¼Œä¼šç´¯åŠ 1-10çš„æ‰€æœ‰æ•°ï¼Œå¹¶ä¸”ä¼šéå†1-10æ‰€æœ‰çš„æ•°ï¼Œå¹¶è¿›è¡Œç´¯åŠ ï¼Œç´¯åŠ æ˜¯éœ€è¦è€—æ—¶çš„ï¼Œå‡è®¾æ¯ç´¯åŠ ä¸€æ¬¡ï¼Œè€—æ—¶ä¸€ç§’ï¼Œ

ç„¶åä¸ºäº†å¥½çœ‹å‡ºæ¥ç¨‹åºè¿è¡Œæƒ…å†µï¼Œåœ¨æ¯ç´¯åŠ çš„æ—¶å€™ï¼Œéƒ½å‘ä¸€ä¸ªINFOï¼Œä»£è¡¨å½“å‰è¿›åº¦ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmRlZGZjZjY4ZmNkMmJiZGE0MTQ0ZWNmNWU2MGU4OWNfeEJ4R0x5Q3dKRlhVRGdETGMwN0prZUJpQlN5dnVjR1FfVG9rZW46VG9WUWJDcHhvb25NY294Uld4UWMxMGo4bmZjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¯ä»¥åœ¨è¿›è¡Œä»»åŠ¡æ—¶ï¼ŒæŠŠä»»åŠ¡å–æ¶ˆæ‰ã€‚

ç¬¬ä¸€æ­¥ï¼Œå®¢æˆ·ç«¯ç»™æœåŠ¡ç«¯å‘ç›®æ ‡æ•°æ®

ç¬¬äºŒæ­¥ï¼ŒæœåŠ¡ç«¯è¯„ä¼°ç›®æ ‡æ•°æ®ï¼Œå¹¶åé¦ˆç»™å®¢æˆ·ç«¯è¿™ä¸ªè¯„ä¼°ç»“æœ(æ˜¯å¦èƒ½å¤Ÿè¾¾åˆ°ç›®æ ‡)

ç¬¬ä¸‰æ­¥ï¼Œå®¢æˆ·ç«¯å†ç»™æœåŠ¡ç«¯å‘æœ€ç»ˆç¡®å®šçš„ç›®æ ‡æ•°æ®

ç¬¬å››æ­¥ï¼ŒæœåŠ¡ç«¯ä¸€ç›´åé¦ˆç»™å®¢æˆ·ç«¯æ‰§è¡Œçš„è¿‡ç¨‹æ•°æ®

ç¬¬äº”æ­¥ï¼Œç»“æŸä¹‹åï¼ŒæœåŠ¡ç«¯åé¦ˆç»™å®¢æˆ·ç«¯æœ€ç»ˆçš„ç»“æœ

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODhmYmIzMGY2MWQ1N2FiYzE1ZWU4YjE3NzFjNDgyOWVfVUhXc1hMZmVMN3A3bFgybXprWkV3WEwxR0o2Y29rQ2pfVG9rZW46Q3pnbWJDaU15b2xXY3l4WmR5bmNOSlJ3bjJnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWY4NGVhOTU2YTRkNGNhMWRlNjU5OTgwNTI5NDczOWNfemtRSEFqMUMwZmpaUEVLQmhVSmw0djdCcnlkTmVWRjZfVG9rZW46UWpkU2JqVjc0bzRwRFp4alg1OGNCaTQ5bkVkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjExMzdlNmZiZGIwYjRiOWJjZjAzZTg2YzM0YWQ3NzBfZnZReXRXU1NuWTg2WVVna0IwN09WdWM2WUtHTGVYWHJfVG9rZW46TlNSVmI0aTJ2bzE5RVp4Q2RXWWNoNkdXbnhlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjM2MmU5YTkxODZlYWUxODAxNzQyN2RmNzM5NGVlNWZfdTg4SjVDdG1rbHVJaDVYN0FmZGM2ZWxwUXNSRkZ5V2lfVG9rZW46TlZ0YmJzczdtb3V1Nk14bnpNWGNHSDdkbnF0XzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTE4YmE1MzMzZTE2NTgzNGY4NzVhNzEyZGFkNGZkMjNfQWpKOTNwRW5VWTRaaU1OUjFyd0ZGYjdYM2J5VGhFY21fVG9rZW46VmpOZGJabUx1b0NaRVF4dDRrdGNKT2NvbmxiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDQwYWFkZjJiMjZhZDdlNjI0NDcwN2Q4MjJhNGY1NGFfMXRzWjZDdXZaODFNa3pSSXRMM1NHZnhVSWhobFNYNm9fVG9rZW46S1hzb2JXa3FLb3BmTnV4OEQ1S2NSbTRWblljXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ros2 pkg create cpp03\_action --build-type ament\_cmake --dependencies rclcpp rclcpp\_action base\_interfaces\_demo --node-name demo01\_action\_server

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDQ0OWNmNzBmMjU3MGEyNzY0NGY0Mzc1OGM0NTU1NDdfM3RVbndtbVg3cVpPUGdYNzRVZ1BGTWZRTkJoclZBTUpfVG9rZW46SFhTWGJnbmpZb0dDQ3l4eG1ZTGNMTEZtbkNmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWI3MmUyMTQwZmNiNTU0MWJjYTgwZjAwZDdmZjFkYzBfSVZueXEwMzFMOFlQMVZZemtTQVRDRmt1dnBoUmFiUUVfVG9rZW46Wmx3cmJJY0Y0bzZDN3d4YTNqNGNCbUJabmljXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æœ€é¡¶ä¸Šæ˜¯è¯·æ±‚æ•°æ®ï¼Œ

ä¸­é—´æ˜¯æœ€ç»ˆå“åº”ç»“æœçš„æ•°æ®ï¼Œ

æœ€åº•ä¸‹æ˜¯è¿ç»­åé¦ˆçš„æ•°æ®ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTNlNDk1ZTdlZDJhYTM1ZmUwNjViNmI3ZWIyNjI3NDRfRklScVpmaEpTRnJkaDdUZnJiVGpGQzZ5N1NUcFZsRkpfVG9rZW46WnNNYWIzbUxnbzVUM1Z4RmFuM2NkOVdlbkxCXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDE0YjcxZGQ5NDE0NGE2NTY0YzI3NzAwZGViYWIxNGFfdXFnMUtjTm9sSUZac0hsTmpHek85d0pXZ0k1ak5sSzlfVG9rZW46VTlmTWJ3YUU5b0phS1B4OTN4RmM2T3hEbm5nXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTk1YjdiYjc0NDlmMGM5YzA4ZDc3ZjFlYjc3ZTAzMzlfTnRkdUNua2luWHM0cFlEMDVkNGxUV3hsUEpEVThOaXNfVG9rZW46Q2Fhd2IwbFN0b1JzbEx4aVFrcGNuWEdDbjdlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2VhMTNkMDE2MzMxNDFhODk0ZTM1ZmI0MTI3YmM3ZDVfYmNSWjdxWDBYdUlSUFU3YW1YRmpRQVpDZ0M3amJWMmlfVG9rZW46TzB1N2JLaU5Nb0NLR0V4eUhaVWNDbXhJbjhkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

dependæ˜¯build depend,exe depend,export dependä¸‰è€…çš„é›†æˆã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzZkOTQ2YTk3ZjU2ODI4ODg4NTVjOTYwOGE1NDA2NmZfaXdPR3FzZFlzZGNNOXlWRVBwR3RHSnVHQWEwWFYzckRfVG9rZW46VlpKN2IzTGUyb01tVGt4bEluRGNUMzdubkxoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NGJkNWU5YWFiODg0YWMwNjZiMWY4NzQxN2Y2M2M2MWJfSmZSOERldjB3M2p0anNMVzQ5b2FlOXRSZFlseWNOaXRfVG9rZW46Q2ZDY2JERXlyb0lSSFB4OW81M2NRZ3VvbkNiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTVlNDNhNmVkODc0YWU1OTQ5MWY2MzNhYTFiZDhlYmVfdWNYT091TEFYVlF4Zm50V3RZNWxxczVuUFhGdlRLRXNfVG9rZW46V2lUSGJBSTEwbzJxbHh4V01ZZ2NYeWpxbmI5XzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjYzZGRkNTZlMjFkZWY1OWQwYTExOGRkZGYxODVlZTVfbmZBSzJTdlJkcEVmR053ejg4YUthTUpPNnZVejJNSHpfVG9rZW46QmNNdWJRWjgzbzAxUUp4TlB6cmNDRG5hbk5oXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWI4ZmI2ZmY0NDRhMDQyMzQ4ZDVmOTAwNGRmYTc0ZDhfRHlwTk5hcEpsY3pXV2tiNGpzd3V0SzM5N3NOSVBqa2JfVG9rZW46THZDemJFMUFRbzJlWnF4SXQ4N2N2djlabjliXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzFlZDczMDY5Zjc4ODdkOTFmYmYzYzNkNTk2MDIyNWRfcVc5OHVDeWlmNVJTOTk1UXBBcm9tQ0ZsdldydVMxWVBfVG9rZW46WmtGNGJJTXRMb3FiVm54bnE2VWM4YUhhblViXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmU4YWI3MDkyYTVhZjkzMGE3ZDVhNWU4MjY4ZTE0NzBfcXRUMExqdkY0TE9EUWVSMEo4WXVwcU9nZWg4Mjh5bmZfVG9rZW46RGxDZ2I4MEVyb1pJS0Z4OGtFaWNNaEZEbkdlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTZiMDQyMjVhZjI0YzAxMWUzMmEzMTk1NzgzY2NlM2VfNk5KTUlhdUU4ckpxaExUT0dGVlN4blpTSjVTZW16b3lfVG9rZW46SUNQN2Joc2xnbzRNMFB4WWNqNmNESmpPbmJGXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ros2 interface show base\_interfaces\_demo/action/Progress

11.  ## åŠ¨ä½œé€šä¿¡\_å®éªŒ1\_æœåŠ¡ç«¯å®ç°(C++)
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTg1NDJkMDA4ZmY2OTg1ZjE5NzgwODE4YTE0NmI5MzNfQ1NpOGlUNnBqbkJRQ3lqODg3UzlKYmNYemh2TmlscWhfVG9rZW46QTkzU2JrWW53b2tJeEl4VnQ0Q2NYcTBMbjBnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```C++
#include "rclcpp/rclcpp.hpp"

class ProgressActionServer: public rclcpp::Node
{
  public:
    ProgressActionServer():Node("progress_action_server_node_cpp")
    {
      RCLCPP_INFO(this->get_logger(),"actionæœåŠ¡ç«¯åˆ›å»º!");
    }
};

int main(int argc, char ** argv)
{
  rclcpp::init(argc,argv);

  rclcpp::spin(std::make_shared<ProgressActionServer>());

  rclcpp::shutdown();
  return 0;
}
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTBiM2MzYmU3NjJjZTk5OGZiMmNiYmVmODAxNjZiMDhfanNwdE9NbVNOaFhDYmhyQzBJb2lEdTJ0ZTd5VWlxaW5fVG9rZW46TXpRVmJrSGxQb0RaTXh4eGt6MWNhU2lDblZnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```C++
#include "rclcpp/rclcpp.hpp"

class ProgressActionClient: public rclcpp::Node
{
  public:
    ProgressActionClient():Node("progress_action_server_node_cpp")
    {
      RCLCPP_INFO(this->get_logger(),"actionå®¢æˆ·ç«¯åˆ›å»º!");
    }
};

int main(int argc, char ** argv)
{
  rclcpp::init(argc,argv);

  rclcpp::spin(std::make_shared<ProgressActionClient>());

  rclcpp::shutdown();
  return 0;
}
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzhjN2JlMDk4ZTBhOWI2ZjliMTM5NDI5YTYwZTBhNzBfUnZjSWNPNFFwU3ExazFHbnFaVEJwem1pYTVLejM3QnpfVG9rZW46TlczRGIyekk4b3NVdHh4bHRYRmNSaUhpbnFTXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzQ1YWQxYjkzZDJkYjZiYmNjMGVhODk2NmZhODUwOTZfN0JnOEUzVFR3a3FsUG5maXlFMTRzZlFyNW9OZ1dvNTBfVG9rZW46WHFpQWJVTnJsb2plR0h4UmFUUmNWWXd1bjJRXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjFlYmIyODcxYjdjNmZkYzMwZDZjODM5ZmI2ZGRhY2VfOEtWbU81T2NtVE9oZUxWVHQyNzdzTUhFRDFLN3NRWDJfVG9rZW46VGlwM2J0aTBwb3JnSER4MHkwaGNsaVN6bmJkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGE3ZTk3YmIyN2E4MzdhMWE2ZDY4M2E2YjFkYzk3MGFfb0d6R2Q5b2xraUV0Q0RPVzFpdnJoMVp2RlZmY2diaW5fVG9rZW46WUtBTWJ2VDJtb3IwSmx4NE8zZGNWV1hobm1kXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2YyNmJkZWY0Y2E4MzgxNThkNTMzZDg2MDRkY2JlMzZfM1pHaHdCUVBOUElubWxrQmpKVmdVeXNHaXNCRExNUkhfVG9rZW46VDl4OGI1ZE8zb1RNanJ4eGwwbWM1UlU3bmZmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MWRjMTFjNjJjYTcwYzM1NjhjN2YxZDgyOTFhYjJmNDZfYXY5MXpaWFFPSTYza1ZwbkhPWGdMWUlsY1ljR3hyY3NfVG9rZW46UFhNRWJBWHl4b1drejh4UldEQ2NKQUtjblBiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MWU2ODczNTgyN2Q4M2FhMzY5ZWMxMjg1MzI0NjljYmFfVzZkVFBodGQyZG54eDh0VDdaQW05TDd2c01RM1d2N01fVG9rZW46U25IMmI0VmQzb3lEV3V4NnhtaWNBdnJnbjZiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æœ‰ä¿©æ¨¡æ¿ï¼Œæˆ‘ä»¬åªéœ€è¦è®¾ç½®actionå°±è¡Œäº†ï¼Œå°±æ˜¯æˆ‘ä»¬çš„åŠ¨ä½œæ¥å£ç±»å‹ã€‚

ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯nodeï¼Œåœ¨classé‡Œå°±ç”¨thisæŒ‡é’ˆï¼Œ

ç¬¬äºŒä¸ªå‚æ•°æ˜¯è¯é¢˜ï¼Œå­—ç¬¦ä¸²ï¼Œ

ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯å›è°ƒå‡½æ•°ç”¨æ¥å¤„ç†ç›®æ ‡å€¼çš„ï¼Œ

ç¬¬å››ä¸ªå‚æ•°æ˜¯å›è°ƒå‡½æ•°ç”¨æ¥å¤„ç†å–æ¶ˆè¯·æ±‚çš„ï¼Œ

ç¬¬äº”ä¸ªå‚æ•°æ˜¯æ¥æ”¶ç›®æ ‡å€¼ä¹‹åï¼Œè¯¥å›è°ƒå‡½æ•°ç”Ÿæˆè¿ç»­åé¦ˆï¼Œ

ç¬¬å…­ã€ç¬¬ä¸ƒä¸ªå‚æ•°æœ‰é»˜è®¤å€¼ï¼Œå…ˆä¸ç®¡ï¼Œ

è¿”å›å€¼æ˜¯actionæ™ºèƒ½æŒ‡é’ˆã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWU3YmVkMGMwMmU2ODc4Yzc5NThjOTI3YjlmZTc4ODdfTnFZQ2RZR0dyNm5YbElOUkZmWE0xUmZ0N3lveVM5T05fVG9rZW46RHFndWJLeFZSb1RjRWN4Z1RGTGNIdzJEbkNlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWJlMDg4NzM0ZGIzOWMwMjQ1YTg0YmY1OTFiNDY5MmJfS0dSUFc5S3RaTEVSM0Y5SVNVR01UM2VOaHFPYkJDWDdfVG9rZW46SzlZS2JaT0Frb0ZuSkp4eEdFUmMyWFR1bmFiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjFhMGNiMmZkNDM5ZjBjN2Y3MzM5MjI5OGQxNzllYWVfWnlFbUtSTml3VEtKTzVneTUxaXlwNkZJWm9TbHZNQ3FfVG9rZW46Tk5rbWJhOEtTb2lYS3V4cVNoRGNCOHdXbjhnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGYyNWQ1NjRhNWNmZGIyZGVlZDJkNjM3YTFiNTMzMmVfQ3N0VEdVYVJ4R1NwcTV0Ymhsdkg1RGxXaXZwYTAzY2hfVG9rZW46QTdkUmJVZmJTb015MGx4cXozemNxY21yblFlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmJjMDBmMmJiNTlmNmYxZjkzODI1YzJkMTYxNWJiOTdfRFZ2ZWZTc244SDNpTm1EbnNSaWY2OElQWjN0YklncmFfVG9rZW46WnRCQ2I1N3Ayb1R4ekd4ZFBqYmNlV29zbk5nXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWRmNmVhMzYwMDk0NzQyMDUwMDkxNmJmMDU1OTFkNGZfY1A5amZrT01hckdKWkdaVXpYeTN5YkJWQUNPYjlyTVJfVG9rZW46UFV2eGIxcWlob0pJUDZ4NFVBZmMyZWcwbmpoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

Goal\_callbackè§£æï¼š

ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯GoalUUIDï¼Œ

ç¬¬äºŒä¸ªå‚æ•°æ˜¯æˆ‘ä»¬åŠ¨ä½œæ¥å£ä¸‹çš„Goalï¼Œ

è¿”å›å€¼æ˜¯goalresponseï¼Œç”¨çš„å‘½åç©ºé—´æ˜¯rclcpp\_actionï¼Œåº•ä¸‹å°è£…äº†3ä¸ªå¸¸é‡ï¼Œ

ç¬¬ä¸€ä¸ªæ˜¯æ¥æ”¶å¹¶é©¬ä¸Šæ‰§è¡Œï¼Œ

ç¬¬äºŒä¸ªæ˜¯æ¥æ”¶å¹¶æ¨è¿Ÿæ‰§è¡Œï¼Œ

ç¬¬ä¸‰ä¸ªæ˜¯æ‹’ç»ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGUxZGEzN2E3YzJmMWM0YjQyYWY2MjZhMmU1YmI3MWRfTEMwZG5BT2tocm8yTFdQYTk4aEZoUnVkUUpnc2RiR1hfVG9rZW46V3pqNmJFdmNSb2lvRm14UExyUmNESHZubkRjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzhiZDJhOWY3NDVjNjM5NjAwN2UyMjVmYTAxOGY2NGRfM1Q5dGxyTldaVVREMThkUmRxVjF2eTkxWVJrRzlEenNfVG9rZW46RVNtc2J6Ylh0b3VaZFp4QmdYdGNvMHl1bkFnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGQ3ODk4YWM4MTQxN2MwNGFhMDg4MzFhZWJiM2RlY2Ffck1SMk96VnZHc2s4RDJ0SGxqdWVrRDJOaUI0ZXpaa1hfVG9rZW46VEN2amJndUk3b0xWTE14cHE3VGMxZW8wbkhiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjQ4NDFjZjlkNTBlZTFlZGI3ZjViODIzMWE3OTkzMjhfampUZXM3N2RhRGdCaWJod0tsMkE0UHVzcU8wUFRiTnZfVG9rZW46UDVnNmJiQWhYb0NpM1h4RHBVRmNLcEN5bk5lXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2Q5ZTM3YmIzNTA1ODFiNmZmMGY0ZGVjZDEwODI0MzlfRHB4bU12Q0MzcThsc0ZsMUw3U1RVOEROWUpLbmN1YThfVG9rZW46WHJKemJQbXN6b2g1Nm94YjFqSWMySnpQbjViXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æŠ¥é”™åŸå› æ˜¯æ²¡åŠ å ä½ç¬¦

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTM0Yzc5YTI0ZjY0YzVjOWZjMTA1ZjZhYzNkMGI0MzdfODlMZ1Y5ZkZXNnhGb3ZKOWVtb1hHMGxMVk5PTmNOT3hfVG9rZW46UEl1OWJlSXdHbzAyWmF4SnZXcGMxN1pTblhjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Mzk0NmI5ZDZkYmE4YzNlNTUzNTA1MWMxOWRhNDc1MDZfT01ScmRFVEx3Qm1UWTJWYWpSSEtjOG91NFA2OWwxOFpfVG9rZW46RFdOU2JscTNxbzVPVGJ4VTJPb2NwM3pxblBjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```C++
#include "rclcpp/rclcpp.hpp"
#include "rclcpp_action/rclcpp_action.hpp"
#include "base_interfaces_demo/action/progress.hpp"

using base_interfaces_demo::action::Progress;
using std::placeholders::_1;
using std::placeholders::_2;


class ProgressActionServer: public rclcpp::Node
{
  public:
    ProgressActionServer():Node("progress_action_server_node_cpp")
    {
      RCLCPP_INFO(this->get_logger(),"actionæœåŠ¡ç«¯åˆ›å»º!");
      /*
      rclcpp_action::Server<ActionT>::SharedPtr create_server<ActionT,
      NodeT>(NodeT node,
      const std::string &name,
      rclcpp_action::Server<ActionT>::GoalCallback handle_goal,
      rclcpp_action::Server<ActionT>::CancelCallback handle_cancel,
      rclcpp_action::Server<ActionT>::AcceptedCallback handle_accepted,
      const rcl_action_server_options_t &options = rcl_action_server_get_default_options(),
      rclcpp::CallbackGroup::SharedPtr group = nullptr)
      */
      server_ = rclcpp_action::create_server<Progress>(
        this,
        "get_sum_topic",
        std::bind(&ProgressActionServer::handle_goal_callback,this,_1,_2),
        std::bind(&ProgressActionServer::handle_cancel_callback,this,_1),
        std::bind(&ProgressActionServer::handle_accepted_callback,this,_1)
        );
    }
    //std::function<GoalResponse(const GoalUUID &, std::shared_ptr<const typename ActionT::Goal>)>
    rclcpp_action::GoalResponse handle_goal_callback(const rclcpp_action::GoalUUID &, std::shared_ptr<const Progress::Goal>)
    {

      return rclcpp_action::GoalResponse::ACCEPT_AND_EXECUTE;
    }

    //std::function<CancelResponse(std::shared_ptr<ServerGoalHandle<ActionT>>)>
    rclcpp_action::CancelResponse handle_cancel_callback(std::shared_ptr<rclcpp_action::ServerGoalHandle<Progress>> goal_handle)
    {

      return rclcpp_action::CancelResponse::ACCEPT;
    }

    //std::function<void (std::shared_ptr<ServerGoalHandle<ActionT>>)>
    void handle_accepted_callback(std::shared_ptr<rclcpp_action::ServerGoalHandle<Progress>> goal_handle)
    {
    }

  private:
    rclcpp_action::Server<Progress>::SharedPtr server_;
};

int main(int argc, char ** argv)
{
  rclcpp::init(argc,argv);

  rclcpp::spin(std::make_shared<ProgressActionServer>());

  rclcpp::shutdown();
  return 0;
}
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjNlMDJmY2M4YmIyYjVjOWY3ODVmYjE4Yzc3NWFiMDRfdTU5RWViWG5zVEtBV252ZVNHWlFybnJxUnpCMXBSdWRfVG9rZW46TlpxRGJXZTdBb1JIWUV4SFpZU2NiMHhyblBiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTExZTQyZTYzMzI0MjIyOWNmNGEyZTYyMTAyYmY4YzdfbTFPUFQ1Rm82WFV6Q2lscnlJc290bFV2clVmU3c5WHlfVG9rZW46UFBhS2JJd1M0b2dvY3h4OTZ5ZmNXRGdFbklXXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDFiMDI1ODBiN2RiMjE3ZmU5OWVjMjczYmYwMjYxODNfU1NCMFBMcDBJSVZhZEtBTk1zeTdaaDBldzJhRGlNbmtfVG9rZW46R0NHbmJ6OVM2b1dDWGV4ZEpxcWNOTzVXbmFlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzYyZTk4ZjNhYTk1ODU0MmQxMjAyNjY3YThhOTA3MzJfam9PUzBsS0RTd1pzTzJmT1JtRk9QNWxVTW1Sd3d3SjBfVG9rZW46RVJuT2J6VUpwb3hnc1B4NjliRGNLMUZ6bnlmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Bash
ros2 action send_goal /get_sum_topic base_interfaces_demo/action/Progress -f "{'num': 10}"
```

ros2 action send\_goal /è¯é¢˜åç§° + æ¥å£ç±»å‹ + -f + å‚æ•°

\-fæ˜¯è¿ç»­åé¦ˆï¼Œå°±æ˜¯å¯ä»¥è·å–è¿ç»­åé¦ˆã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjI2OTg0MTExYmExYTBlNjczMDVkYzM0ZmY0ZWZlNTlfOFY2cWFJRm9QcFUybG92clNmQU5HZUhodk11dGhYUHdfVG9rZW46UENjeWJIcm96b2MwS2V4UzJHVWN1MHl1bllTXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å‘é€ç›®æ ‡å€¼ä¸º10

ç„¶åä¸ºæˆ‘ä»¬å®¢æˆ·ç«¯è®¾ç½®äº†ä¸€ä¸ªIDï¼Œå› ä¸ºå¯èƒ½æœ‰å¤šä¸ªå®¢æˆ·ç«¯éƒ½è®¿é—®è¿™ä¸ªæœåŠ¡ç«¯ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ç»™æ¯ä¸ªå®¢æˆ·ç«¯éƒ½è®¾ç½®ä¸€ä¸ªå”¯ä¸€çš„ID

ç„¶åç»“æœæ˜¯0

å› ä¸ºæˆ‘ä»¬ç¨‹åºæš‚æ—¶å•¥éƒ½è¿˜æ²¡å†™ã€‚

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzQ3OTgyZGE5MjlhYmRmY2E3NDJiZTQwOTM4NGM1MTdfSk5WeUxzQkpTZUgyMFJpMTRZdmFQd0VmeENQMThoSm1fVG9rZW46RUNuNWJwVUxxb2RlVEl4bjVYNWNpSEczbmZlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

uuidå°±æ˜¯å®¢æˆ·ç«¯IDï¼Œåœ¨æ­¤æ—¶æ²¡æœ‰ä½¿ç”¨ï¼Œé‚£å°±ç”¨(void)uuidï¼Œå› ä¸ºå¦‚æœä¸ç”¨ï¼Œç¼–è¯‘å™¨å¯èƒ½æŠ¥è­¦å‘Šã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmRjYmRmYjYyNTczZGI3NjM3MjAwNjZiYzQ3ODZhZDNfTFFWOUNsc1hvMmFlNk9JbFhtNGhhYzJKNkI5Q1I4b3BfVG9rZW46Tm9tUWJiWWxab3lFZFZ4TGkwS2N6V0NVbmllXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWExM2Y4OTY3N2QyMzgyNTkxMjE0M2ZhZWZkMjYxNzRfTlRDdjV4TzZUSmdoZmtaOHRSN1F3RE40bGJ2SFBSNTlfVG9rZW46V1EzTGJWNzdOb3lBWjR4NkNOdWMyOEVwbkFiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWIzMjlmYWFkODZkNGY5ZjhlY2QxMmIwMGIyYjMyM2Zfb05BR0dxS1phWnFHR1NHc1JES3RSYzEzb3ZqMmhzYVZfVG9rZW46U1h4M2JyUUt2bzNqUTd4M3l5Q2MyVTBRbndnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjI0NDVkZjQ4ZTBmM2VmNDI2ZDlkYmE1NmNmY2FkZjdfUmN6OHh4UDhVSjRWYmRaOUx0dEh3eGxwOWJlWUtnaTJfVG9rZW46V3loZGJZVWU4b05KbXZ4OTF3MmNwTGZ2bnRmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDg5NzI0YjZlMzkzYzk3ZTI0ZjUxNWRjMzY1ZDgzNGFfc2pzSVE2ZFFSa2RKUkc1SnZRWnlWMmxWUWFEcDlxSGVfVG9rZW46STR0bmIxNXdhb3RGN094SE0yQ2NXZExjblRkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

æˆ‘ä»¬çš„è¿™ä¸ªä»»åŠ¡æ˜¯å¯ä»¥æ­£å¸¸è¢«å–æ¶ˆçš„ï¼Œæ‰€ä»¥ç›´æ¥return acceptå°±å¯ä»¥ï¼Œæ ¹æ®ä¸åŒä»»åŠ¡éœ€æ±‚æ¥åœ¨å‡½æ•°é‡Œåšä¸åŒçš„äº‹ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Nzk4ZDdjNDlmMGQzZWY5YmVjYWZkYmQyZjBjMGI0YjNfZU96Q2liOVFCTEJZeEllclFjaGZJQWE1b20zMmJubFhfVG9rZW46T3VJVmJNenVob0ZLbXZ4NXh2WWNqaDA5blJJXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDkyMjVkZWY2OGUxZTg1NDM0OGNiNjMwNDAyZjJmMTVfd2VDWDlBbk9mNHAzNkhwb0swNEhVVHhqNkJXc1hxaEJfVG9rZW46SUpHcWJLYTdHb21hM1l4YW1pQmNFclNSbmhjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

å› ä¸ºæˆ‘ä»¬çš„è¿ç»­åé¦ˆå’Œæœ€ç»ˆå“åº”çš„ç”Ÿæˆæ˜¯è€—æ—¶æ“ä½œï¼Œä¸ºäº†é¿å…ä¸»é€»è¾‘å‡ºç°é˜»å¡ï¼Œå»ºè®®å•ç‹¬å†å¼€ä¸€ä¸ªçº¿ç¨‹ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODcyZTAwZGQ5M2U4ZDA5YTkwMDEyYmZhOTViZTQ2M2FfVll5VXR1cXljaGpkRXZjeDRUNWFid1ZGODFvZmI3cU1fVG9rZW46RkRBcGJMS3Nib3JhWDd4RWdGbGNNNmNTblhjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGQ3MjdmMjBhYjQ4ZjFhMzg3NWQyZDE0YjNlMDc5Y2Zfb0dRbW91MVFpelF1OGRWSGxIUkE2NXhyRFlJWWJLMGpfVG9rZW46UjRFbGJFU0NEb2ZpSVV4ME1nSWNPWXhQbnhjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NGNlNTQ4YTk5Y2YzOGYzMTRkNDc3NTBkMzcxMWNjNTlfNWhVZUV4UU9RYjNXaWJWNFFOVGhuZTlZenFBOEEyWlRfVG9rZW46T09NM2JnWE9wbzlTZ2V4N1lHNGNHcmVybnJiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGE3N2RmYTBlYTdkZDhiZmEzYTZkYzYwZjNmZmNiNmVfMHNGaVA1c3RZeTZIWWVzSE5zVzBpcEdZSHdINzRoNnVfVG9rZW46VTlSSWJueVh1b3VkeWV4WVZqbmN0YUhBbmVjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Mzk0ZjVkMDdlMzQxMWRlN2Y5ZTZlYjgxZTViNjdlODFfbU5zUGhObGdWZGpvYnpoNDNnMlViS1JZNnA2WGxsdWVfVG9rZW46SW5FaGJwc05Yb2htVEx4MHowR2N4S3habmhLXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ç”Ÿæˆè¿ç»­åé¦ˆçš„APIï¼Œéœ€è¦ä¼ å‚ï¼Œä¼ å…¥çš„å‚æ•°å°±æ˜¯Progressé‡Œçš„Feedbackå¯¹è±¡ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODFkNzU3NTJkOGM4NzU0ZDY5YTFmYTYzZjZlMjY2OGVfNmVXOENiU3RncTB6cUZCR3NnTlhzbnpSN1ExOU84UUJfVG9rZW46RlA5MmJkajA3b0EyZFp4OUwzOWNYaWFNbmcxXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

get\_goal()å¯ä»¥è·å–ç›®æ ‡å€¼

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzQyN2IzYzkzMDNkYTcyNjY0MzY4YWUyYmFlNjlhODlfYzdrTUg4ZHlkdGtuYkMxc0ltYXZ5VWc0UTI3VWZrcTRfVG9rZW46VnVqcWJ3b29mb1pmQlR4Y3lSMmNUeXMzbnZjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzdkMDY5ZTVhNzk3NDA3Mjk1N2EzZTY4OWFjMWRjMTdfVVhlVlVndG5DODFOMWs2VEFYa0d2NVU3NE5aNXRVaXpfVG9rZW46Tm05c2I4djBpbzZXSzN4cXV1ZmNIcG5kbmZnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å› ä¸ºè¿™æ˜¯ä¸ªè€—æ—¶æ“ä½œï¼Œä¸ºäº†çœ‹å‡ºæ•ˆæœæ¥ï¼Œæ‰€ä»¥å’±ä»¬æ¯æ¬¡å¾ªç¯çš„æ—¶å€™éƒ½ç»™è®¾ç½®ä¸€ä¸‹ä¼‘çœ ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDk0YzJjYjAxNTEwODNiM2NiYzFjZWY1Zjc4N2E5YmFfY2pJS3ZPMzZJNEw0Y0R2cU1Lc2E2VTFmVjVMUUFpbWpfVG9rZW46TW5JSmI1bDFNb1hsR0N4UlBmQWMzcFhEblljXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

1.0æ˜¯æŒ‡1Hzï¼Œä¹Ÿå°±æ˜¯æ¯éš”1ç§’æ‰§è¡Œä¸€æ¬¡ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmRlNTQyMGE3OWU1MGExYWNiMzFmYWIzNzhmMDFiNzZfNDUzRUgybHFXYW1XSGk0ZldENWd1dkRXZUZBcE53UkRfVG9rZW46RVZZOWJvV3ZLb1Vrdmx4VlRPbWNxMlBzbnJlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å› ä¸º1Hzï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™ä¸ªrate.sleep()æ¯æ¬¡éƒ½ä¼šä¼‘çœ 1ç§’é’Ÿ;

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmIyNWMzNjc1ZmZhYmZjNTQ0YjgyNzYxNjc0NTlhNmVfZHVNMjQwa1NVeE1SWUNYMXhCM2lQOHFMUEFQdnFocURfVG9rZW46SXpsU2JyWXBBbzVSME14ME1Jc2NacWJxblRmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ç”Ÿæˆæœ€ç»ˆç»“æœçš„APIï¼Œéœ€è¦ä¼ å‚ï¼Œä¼ å…¥çš„å‚æ•°å°±æ˜¯Progressé‡Œçš„Resultå¯¹è±¡ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmJlN2QxYmZjNmE5NjBkZmIyYTA2YTU2NWU5ZTkyYzVfcmQxdVNxUTBRa01NRzE4VnhkWmE4eUd6YnZxQTRwWHFfVG9rZW46RXhXS2JZQUFtb1kydnF4YVpZZ2NZdHAybnJkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ok()å‡½æ•°çš„è¿”å›å€¼ï¼šå¦‚æœæ­£å¸¸è¿è¡Œï¼Œåˆ™è¿”å›trueï¼Œå¦‚æœä¸æ­£å¸¸è¿è¡Œåˆ™è¿”å›false

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjM0Zjk1MTJhMTM5OWJiMDIxMzk3YmQ1NTk0Y2JiMGVfY1l4ck5ZblBqclpKUnF4bkpRcjZETURHVTFOaThIYVBfVG9rZW46TWlpS2JBaGt5b3l5Zzl4UWZXemNNQnZvbmJiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTM1YWEzOGI5ZTQwM2RhZmEzM2E0MDJjODcxZTM5NzVfdnpSS2cxU1NCUHFoNW1NMXBlc1RGY3RiMHhlajdpc1JfVG9rZW46WU9IaGIxb1pUbzc2Tmt4MzRMRmNBQUF6blZlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWQ1YjNiMjE2MTZjMGUwZTE0MzU4OGZjODVkZmRlNDlfZlBtMldQenRBajRiREdaSEJKY1V4NHZDZVl5T0NvRHVfVG9rZW46TGFTNmJwS2xNb1JMbUt4T3JPTmM2SU00blhlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjgyOTFiN2QxMTJlNzVkNDE4MmFmZTFlMDkzZmMzMWZfa2kzYVE4YnFTS0dZb1AxM3BVY3pnTTF4aGxpTVozWmNfVG9rZW46Vk9DcGJ3akRjb2JWTHh4YVdnSmNHMGJzbkdnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDQ4MzgzNzMyYmRmMjliZGVhMTcyYmI1MmMxYzMyNDlfOEZNd0lQM25YZXRqZHhWZjN5ZU5SR01mMEdVODhzZU9fVG9rZW46TjhQaGJ3Nkt2b3ZhY0h4WW5NZWNJU2JHbnJnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzliNDI2ZDU4YmZjYjZhOGMyNTBiMzRjNzUwMDhiMjJfS0FHajZHOWFsd0xDYVlUb1BnTGtNUm1VWWFFTXl6N1JfVG9rZW46VFBqQ2JzeFo0b0xWdEN4cThkWmNXeGhYblFjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2UzMjVkOThmYWU2YTNhYTgxZDBhMDc5ZjNjNDY3MzFfclRwcXFrRTBEMEo2RkRmVTNnZXMxTlJBM3Q2UkVQRktfVG9rZW46VDREeWJ0dEdjb3pLN1h4d1RicmN0MWVGbk1oXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGYwN2MxY2YyMGFiMDdkYTI1M2QyNzdhNTEwY2Q1YTRfVzI1a0kzQkE4WUtQUFJzZ3pJeTlrdmR6enE5bkxWc3ZfVG9rZW46VzB2emJ3ZU9Bb2YyRUJ4Q1pzWWM4a0NWbnJGXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MWFkN2QyNjE2YWU0NTU0YmIwOGQ1MjE2ZDEzMzY0ZDlfWUdoN3ZCSjVtS3dPNW9jZUF1YTFKYklzajJSYlFQZ3RfVG9rZW46UUptTGJ5U3FubzNZb3Z4Tm9sR2MyM29ablNmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjI2NTk2ZWFkZmJmOTU5MDBiOWE5ZTZmZjI1MzZjNzZfc1FYeUk5djU0WE1UMWNMN0U5d1V3VEhBem9QN2dDSndfVG9rZW46UWtZNWJvQU9PbzRFb3l4RklZTWNjVkRZbjhjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

bugï¼šå½“æˆ‘ä»¬ç»ˆæ­¢å®¢æˆ·ç«¯ä¹‹åï¼ŒæœåŠ¡ç«¯æ²¡æœ‰åœæ­¢è¿è¡Œã€‚æœåŠ¡ç«¯è¦ä¸€ç›´æ‰§è¡Œåˆ°ç¨‹åºç»“æŸã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDFiZjk4MDY5MWM2ZmQ5NDdjNjFmZWM3MDVhNzVjYWNfemN4NVUxYUk2NlpsOVNmT2FsMGNPU2NGV3RUbkpvNTJfVG9rZW46VHloMmJrVXl1b09aUjh4UFBGamNSNlRwbmloXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

bugè§£å†³æ€è·¯ï¼š

æ¥æ”¶åˆ°å–æ¶ˆè¯·æ±‚åï¼Œå°±æ˜¯ä¸­æ–­æˆ‘çš„ä¸»é€»è¾‘ï¼Œä¹Ÿå°±æ˜¯execute\_callbackè¢«å…³é—­ï¼Œ

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTQwN2VmM2FiOWViMmMxZmIwYjcxNDhkNjdkN2I4ZDBfUFgxcklHc3hlZlQxT0wwNTd4M3ByMzVLbFpseUtqbzFfVG9rZW46SGdsSGJUZUpFbzhHcnl4c3NWMmNINkVHblllXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™ä¸ªå‡½æ•°è¿”å›å€¼æ˜¯å¸ƒå°”å€¼ï¼Œå¦‚æœæ¥æ”¶åˆ°äº†å–æ¶ˆè¯·æ±‚å°±è¿”å›trueï¼Œå¦åˆ™è¿”å›falseï¼Œ

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmU5MjQ1ZDhiZjI4YjExMmQwMzk0NDEzODdjZWVmZTNfRWxUcjVmY3JvYnlrNzllbUJYQ3dLZUp5ckExOUtNaHdfVG9rZW46VFZOVGJxYUJxb3B4bWx4c2J1Y2M4dUNrbmNkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æˆ‘ä»¬å–æ¶ˆä¹‹åï¼Œå…¶å®ä»ç„¶å¯ä»¥å‘å®¢æˆ·ç«¯ååº”æœ€ç»ˆçš„ç»“æœï¼Œç”¨canceledå‡½æ•°ï¼Œ

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2U1MzNjYzE3ZjM4MTZlMjUzODIyODk2YWViNzlmNjRfVW1kdXlYcVd3SnllbDdLaGJTUTdiNXJEUXFqRFBRT0RfVG9rZW46WEpaZWJuYlJqb2NFWlZ4a0ZwYWNvTTBDbldiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGQ2MjZjMjRmMzUyNWJkOGExOWE1MjEwYTIwMmU3YmFfellqTGY4UzJRVjBNSmdkNFJpVVF6dTdkTTUwU1VDQmdfVG9rZW46REFLWGJTVUhVb2IwbkZ4Nm5IUGNuQ0RvblljXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzJhZmI1ZmRjZmI0MmViNmNhNTcyYzQ3ZmQ1MzUxNWJfQzNGendrR2RKNHFWSTNhcWRXSkQ5dlk5ODRKT29ZdHpfVG9rZW46UXY0bGJES1RPbzRlSWF4TExRb2NXbEVxbjFlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¦æŠŠå®šä¹‰resultæ”¾åœ¨å‰é¢ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Mzg0NzFkZTliNmY1ODMyYWQ5NzcyOWE1OGZhNTAwYmVfcEVOOWxtU2NhNm9aaVJmTVdaNld5bVpuSTFUNUFjSHJfVG9rZW46Q0N6UmI4NHpXb1BUTFJ4Zktxa2NYWWVLbmNlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzkwZDAxNzU1YTg2NDY0YzY3MmViODQ2NjJjYWY2YTJfeE55TFRwWVNRc1gyb0RZYUV1WGx2aUQwTjluTmdSU0JfVG9rZW46SUxlM2JhMm5ib3BWOVR4ZVdvUWNVNVhybmhkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZThiNmQ5MDJjNTM3MGE2MDlmYmE1YjBmNjc5MTc5YTVfeFc0V05FOEFNTFZ5VDhQRlJhSW5LbUJlMTcxMVNQWnpfVG9rZW46REJnMWI0Z1dCbzVWN1N4bzVPeGNsN3o4bmVtXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```C++
#include "rclcpp/rclcpp.hpp"
#include "rclcpp_action/rclcpp_action.hpp"
#include "base_interfaces_demo/action/progress.hpp"

using base_interfaces_demo::action::Progress;
using std::placeholders::_1;
using std::placeholders::_2;


class ProgressActionServer: public rclcpp::Node
{
  public:
    ProgressActionServer():Node("progress_action_server_node_cpp")
    {
      RCLCPP_INFO(this->get_logger(),"actionæœåŠ¡ç«¯åˆ›å»º!");
      /*
      rclcpp_action::Server<ActionT>::SharedPtr create_server<ActionT,
      NodeT>(NodeT node,
      const std::string &name,
      rclcpp_action::Server<ActionT>::GoalCallback handle_goal,
      rclcpp_action::Server<ActionT>::CancelCallback handle_cancel,
      rclcpp_action::Server<ActionT>::AcceptedCallback handle_accepted,
      const rcl_action_server_options_t &options = rcl_action_server_get_default_options(),
      rclcpp::CallbackGroup::SharedPtr group = nullptr)
      */
      server_ = rclcpp_action::create_server<Progress>(
        this,
        "get_sum_topic",
        std::bind(&ProgressActionServer::handle_goal_callback,this,_1,_2),
        std::bind(&ProgressActionServer::handle_cancel_callback,this,_1),
        std::bind(&ProgressActionServer::handle_accepted_callback,this,_1)
        );
    }

    //std::function<GoalResponse(const GoalUUID &, std::shared_ptr<const typename ActionT::Goal>)>
    rclcpp_action::GoalResponse handle_goal_callback(const rclcpp_action::GoalUUID &uuid, std::shared_ptr<const Progress::Goal> goal)
    {
      (void)uuid;
      if(goal->num <= 1)
      {
        RCLCPP_INFO(this->get_logger(),"æäº¤çš„ç›®æ ‡å€¼å¿…é¡»å¤§äº1!");
        return rclcpp_action::GoalResponse::REJECT;
      }
      RCLCPP_INFO(this->get_logger(),"æäº¤çš„ç›®æ ‡å€¼åˆæ³•!");
      return rclcpp_action::GoalResponse::ACCEPT_AND_EXECUTE;
    }

    //std::function<CancelResponse(std::shared_ptr<ServerGoalHandle<ActionT>>)>
    rclcpp_action::CancelResponse handle_cancel_callback(std::shared_ptr<rclcpp_action::ServerGoalHandle<Progress>> goal_handle)
    {
      (void)goal_handle;
      RCLCPP_INFO(this->get_logger(),"æ¥æ”¶åˆ°ä»»åŠ¡å–æ¶ˆè¯·æ±‚!");
      return rclcpp_action::CancelResponse::ACCEPT;
    }


    //std::function<void (std::shared_ptr<ServerGoalHandle<ActionT>>)>
    void execute_callback(std::shared_ptr<rclcpp_action::ServerGoalHandle<Progress>> goal_handle)
    {
      //void publish_feedback(std::shared_ptr<base_interfaces_demo::action::Progress_Feedback> feedback_msg)
      //goal_handle->publish_feedback();
      int num = goal_handle->get_goal()->num;
      int sum = 0;
      auto feedback = std::make_sharedautolinkProgress::Feedbackautolink();
      auto result = std::make_sharedautolinkProgress::Resultautolink();
      rclcpp::Rate rate(1.0);
      for (int32_t i = 1; i <= num; i++)
      {
        sum += i;
        double progress = i / (double)num;
        feedback->progress = progress;

        goal_handle->publish_feedback(feedback);
        RCLCPP_INFO(this->get_logger(),"è¿ç»­åé¦ˆä¸­ï¼Œå½“å‰è¿›åº¦ä¸º:%.2f",progress);

        if(goal_handle->is_canceling() == true)
        {
          result->sum = sum;
          goal_handle->canceled(result);
          RCLCPP_INFO(this->get_logger(),"ä»»åŠ¡è¢«å–æ¶ˆäº†!");
          return;
        }

        rate.sleep();
      }
      

      //void succeed(std::shared_ptr<base_interfaces_demo::action::Progress_Result> result_msg)
      //goal_handle->succeed();

      if(rclcpp::ok() == true)
      {
        result->sum = sum;
        goal_handle->succeed(result);
        RCLCPP_INFO(this->get_logger(),"æœ€ç»ˆå“åº”ç»“æœä¸º:%d",sum);
      }

    }

    void handle_accepted_callback(std::shared_ptr<rclcpp_action::ServerGoalHandle<Progress>> goal_handle)
    {
      std::thread(std::bind(&ProgressActionServer::execute_callback,this,goal_handle)).detach();
    }

  private:
    rclcpp_action::Server<Progress>::SharedPtr server_;
};

int main(int argc, char ** argv)
{
  rclcpp::init(argc,argv);

  rclcpp::spin(std::make_shared<ProgressActionServer>());

  rclcpp::shutdown();
  return 0;
}
```

  

12.  ## åŠ¨ä½œé€šä¿¡\_å®éªŒ1\_å®¢æˆ·ç«¯å®ç°(C++)
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmI5Y2MxMGU5NDdiN2I2NjlkMDI3NTI1MGEzMmE0YmVfNjBkSFNpdWNqQ3NDVEFnVktDNWR1UHZDZzhtaXdzVUhfVG9rZW46UWFZTWJ2T21Ob3FXZ0J4ZkZxSmNnQlQyblFlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™æ¡çº¢è‰²çš„çº¿æ˜¯åœ¨action\_clientå¸®æˆ‘ä»¬å°è£…å¥½çš„ï¼Œæ‰€ä»¥å¯ä»¥ä¸ç”¨ç®¡ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTk5ZjI1NzZlZTU1YzgxNDhiNDU2MWY1OGU2ODU3Yzhfc1FQcE5YdU9BZlBBUGVCdGVEbGlBWXdTWmphM05zT3RfVG9rZW46SnFCQWJqOFhib3FBQml4dlBndmNCdWdhbjllXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```C++
#include "rclcpp/rclcpp.hpp"

class ProgressActionClient: public rclcpp::Node
{
  public:
    ProgressActionClient():Node("progress_action_server_node_cpp")
    {
      RCLCPP_INFO(this->get_logger(),"actionå®¢æˆ·ç«¯åˆ›å»º!");
    }
};

int main(int argc, char ** argv)
{
  if(argc != 2)
  {
    RCLCPP_INFO(rclcpp::get_logger("rclcppp"),"è¯·è¾“å…¥ä¸€ä¸ªæ•´å½¢æ•°å­—!");
    return 1;
  }
  rclcpp::init(argc,argv);

  rclcpp::spin(std::make_shared<ProgressActionClient>());

  rclcpp::shutdown();
  return 0;
}
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTU0ZmEyZWM1ZTE5ZjQ5MTIyM2IyYjUwNWNiYmU0ZDlfT0lraUJwaUw2cUZaZVozeWZsV3VJWlNmcXd3bXlvaUJfVG9rZW46TE5TMmJYNENib2UzVXd4V1pQaGN2dWc2blBSXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWRhZTdlNGRkOWNjMWIxYTg2YjZiNzJmNDg3OTczYzJfeDlQNHhENXZuaEwwaUczVlVjcDh6UDB4RUU4MmxyWmFfVG9rZW46WFlROWIxbHEzb2s3VVR4WTg4TmNaMFJHbjZkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDY4ZDE1YTUxMWM1NzJkZDUyOTlkNzk0ZmVlNjhjZTZfaURUd1p2M3JxNGxBNDRpZXRnWTNyT3V1QmVMOXFDbGVfVG9rZW46R0h6QmJlNklYbzRocXd4ZjlrdWMwWkp5bldlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDVkNTkxMTBmYWNhMGI4OGFiYTQ2NDZiODJmYmVkZWVfSjV3RGpTVVNjUXA4SjcyNDVrMW41RWhyV0hBSW0yZUNfVG9rZW46RkNrcWJrQVNOb0FuY0t4WGRVUWNjWjlGbmFjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ç¬¬ä¸€ä¸ªå…¥å£å‚æ•°æ˜¯node

ç¬¬äºŒä¸ªå…¥å£å‚æ•°æ˜¯è¯é¢˜åç§°ï¼Œå­—ç¬¦ä¸²

ç¬¬ä¸‰ä¸ªå…¥å£å‚æ•°å’Œç¬¬å››ä¸ªå…¥å£å‚æ•°éƒ½æœ‰é»˜è®¤å€¼

è¿”å›å€¼æ˜¯å®¢æˆ·ç«¯æ™ºèƒ½æŒ‡é’ˆã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWFmZDMxYWNhYTAyODQ5OTFkMzZmNmI1NjkxMTcwYzFfOWdENWM1S3BFanBQYnNmaDVmeXI0bGtma2RvaU9GWFBfVG9rZW46RjF1d2I2MmhGb1lRZ0Z4czlYUWN1SjI0bktmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGM4NzYyOTU4NDg3ZDkzOTMwYzRjMGViMGE2ZDQ4Nzhfbk9mR2UyM2JnSGFoMTdUSHU5NFBkZWpWWjBKOW1DeEhfVG9rZW46RTI2bmJvY2xpb2lUQlR4dlM5NGNKcmNVbnVnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODEyZDc4OWZkMmUzNmE5NTkwMTM5YTA1OTNmZTRhYjJfMDQ2SGRXZUdwWkNNMmFOc0E3R1ZDbkNwQjRkYkxXT09fVG9rZW46WXFudWJpWDNFb21ISHl4U3N6TWNxOU9CbkVkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2VjNzk5NGIzMDlhYTgwNmNjYTFmNDUzNGQwZGMwZTdfcmhPRXFJR1JzekZnYXN1WEJyNnNGY1hLZEdWQ0FlSlJfVG9rZW46WjFxaGJ3RzE5b3pwbHN4OE5qNGNMZFp1bldiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

éœ€è¦æŠŠä¸€æ­¥åˆ†æˆä¸¤æ­¥ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTdkMTZlYjIxNTMzMGFhZmFmY2NlZWQxMTFjZDE4ZDFfcDlCblNWWWVKRmdia0RVRmV2d041Rm5TSTlmemlKMGJfVG9rZW46U2l6OGJVQmZrb3JPa2Z4VkdrZ2NKQ0NXbjJnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å†æŠŠsend\_goalå‡½æ•°è°ƒç”¨ä¸€ä¸‹ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzRjYzFlNmRiY2MwYzViOGRmNjlmNTY2YzhjMjI3NDhfaUxJMjRDY28wQlNMb3pTbDVBWFRGaWN5MHpLS1o2cU1fVG9rZW46RTNEaWJKdGllb3dLejN4MjNGOGNEY3I2bkFiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmI5MDllN2MyOWJkNDQ2NDk1ODU0YmYzYzY5NzJjY2Vfc2doR1FXQzEyR0gxanZpMnZ6UU9GdW0zS0ZuRjBRYUJfVG9rZW46TWxGNGJwUGZib0R2clZ4S0NDdmNHakFCblBjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

async\_send\_goalæ˜¯å¼‚æ­¥å‘é€ç›®æ ‡å€¼

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzUxODI4MDY2ZGU2MjI2NTJlODRlMmM4MzllYmE2YzNfVzlKMHNZbXBCUm1pbmtGb0RrZFFybm5zR2FrMk44TG9fVG9rZW46WFZHZ2JhSExYbzljZ3F4UVdBTGNLSnBvbm1iXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ç¬¬ä¸€ä¸ªå…¥å£å‚æ•°æ˜¯æˆ‘ä»¬æ¥å£æ–‡ä»¶é‡Œçš„ç›®æ ‡å€¼

ç¬¬äºŒä¸ªå…¥å£å‚æ•°æ˜¯å‘é€ç›®æ ‡é€‰é¡¹å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®è¿™ä¸ªç›®æ ‡å‘é€è¿‡å»ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦å¤„ç†çš„ä¸€äº›å›è°ƒå‡½æ•°

è¿”å›å€¼æ˜¯

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NGY1YzI1MDU3MTM5ZDg5N2U4ZDgzZjgxYzFiYzFhMTNfOVFEZVNPdzJQVW1PRDlEamh3OXZWbWJwdGFOazRoMGlfVG9rZW46WGpDWWJLMTIyb0pyQkl4Vmlja2N3RHNYbjhnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDc0ZjcxYTBkM2RhYzE2NTgxMTNhMmJjMDE5YTU2NzhfTkpIOXM1czh6TVBDU1Btb0xGaDdLdUxWVGthdWxmZ1lfVG9rZW46VVJWTGJ4SFJOb3BXYTd4V0txRGNJSWV3bldjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Yzg0YjhkZDVmMWI0ZmJmZjg2ZGFjMWRiYTAxZDBlNGVfSWtMN2tRMjYwc3Jzc0hYeUlnRFlMN1NYeDg4aUVMQmlfVG9rZW46U2FVdmJEcGpQb2M5YzZ4R3pyTWNEWmtGbnBoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmZiOWVhZjRkN2NiZGY4Y2I2MTZkOTQ2NGJiOTBlZmFfN2hNY0VIOXo2Nnk2b25pQlE4U2YzVENvRk4xWjcyc2FfVG9rZW46WHljWWJZUEpDb3dJclN4Y2FGU2NxQUZkbjlnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å…ˆä¸ç®¡å…¶ä»–çš„ï¼Œå…ˆæŠŠå‡½æ•°éšä¾¿å®šä¹‰ä¸Šï¼Œä»€ä¹ˆè¿”å›å€¼ï¼Œå…¥å£å‚æ•°éƒ½æ˜¯voidï¼Œå…ˆä¸è®©ç¨‹åºæŠ¥é”™ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTgwODc1NDM1ZTMyNGQ5ODg2Mzg3OTFlN2FhMTIwMDJfaHRYbDBDTVR6Z21PZUNVb0lHY0dBRFAzWk9aaDJKQUtfVG9rZW46WHdRSWJMVXV0b2ZMTjB4MncxaGNWSlpBbm1mXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTZlMzk4N2NlNjUxMDE4ZDQ5YmVhZGViYjQxOTE4NjBfNTZQT0t5Q3F4S0J5QlFDQkdxQ0R3TnEzS2tLVGQwcFNfVG9rZW46TE5rRWJ4SWxab1RuUDB4NGlOVmNJRnFGbldkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjA5YWM5MzA5OTBhMGFmYzBiZjY4NDMzMTUzNGE2M2ZfR2QweTRZcThQMEdhbzg3aVVoVllvbXYwMWVYeWJNNkdfVG9rZW46VGVQZmJrMU5jb3p3Rkd4dG5sbGNvS1FqbnRmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¾—çŸ¥ï¼Œ

GoalResponseCallbackè¿”å›å€¼æ˜¯voidï¼Œå…¥å£å‚æ•°æ˜¯goalhandleï¼Œgoalhandleåœ¨æœ¬å›¾çš„ä¸Šé¢ï¼Œæ˜¯clientgoalhandleï¼Œç„¶åè¿™ä¸ªclientgoalhandleå±äºrclcpp\_actionå·¥ä½œç©ºé—´

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzRlMGRkM2M5MWQ5YTRjZWY5ZDk3N2NlNjhlYzYyZTlfVFdhVDkyODNCNHpRWUwwQmdkNlFNTlJ2bWEzdXFwZm9fVG9rZW46TmJQWmJJaEU4b29CcE14dW83TmNicjZPbmpnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjUzMDhkZTQ0MDdhOWM3NmY5YjhkZmExOGIzMzI5NjBfbWdTWjdQcjdPMEVUVVBudnBPSTdpSkpaZUgwOVN4bGNfVG9rZW46RHVMR2JEcGNib0RyYTF4ZkdUYmMzVzdjbkVmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzJkZGNiYzMxNDAxZWQ2ZjNjMGE2ODk2MWVhYmE2YWJfZnY5ZGlzU0hmTHRrMkpEY05hQjYzM1pqcDBVMHNLcFNfVG9rZW46UFBubmJHQzFGb1pUdGx4S09Qc2NteGpobkJiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmE1NTljZmUzNTRlODg3NTFhN2RjNWU3YTI4ZWRmZDhfYnhUWnVvenFrdVpwWXlvV21yRllydTJaUEx0MnRuU0RfVG9rZW46UXVnQmJ0R1lobzN4UW94SlY3TGNhWG5nbkpoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2Y4N2ZmMDU2Mzc5N2Q4ODlhMTNhZDI0YjA2ZjM1ODhfV2g3Q1BKNU9sMTV2MlhjR1dmVG0wMDZTajNPSWFmMEFfVG9rZW46RnJaTGIyYmVFb1RmRWx4bGprZmMwZUtCbkFkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿”å›å€¼æ˜¯void

ç¬¬ä¸€ä¸ªå…¥å£å‚æ•°æ˜¯clientgoalhandle

ç¬¬äºŒä¸ªå…¥å£å‚æ•°æ˜¯feedback

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmRlZDA3ZWE1MzA0ODI4ZjgyZmE4MDJiMWI4MWFiNjBfMnVzR3RzdlJ4aVRXOXlvZWEyT2R3YmQyN1pBR2xzSVlfVG9rZW46QnBjemJHSXpkb2RJalZ4WHlMYmNTUmcwbkdnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2IxOGMyNWZkOGFhNzU5Yzc2ODEwYTQzZThkZGUwM2JfU1o1MkR6UFJIczl1UVpyRGZ0Y0hUbDloMmVlY2J1VElfVG9rZW46THZZbGJVM1dhb0Raeml4UnJHRmM5NFkybm9FXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjI5ZGM5ZDMyYjdkZjcyOWZlZTU0NDhiY2UwYzQwNDlfZ0tBQ0pmUDBiejhvRm9NMWd0U3A0VjU0ODJzOFNabHhfVG9rZW46QTZMcGJmRmVCb2tiMWF4WWQwN2NRME5DblNnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzQ2ZWNiZjI1NGI3MmU3YTZhMGFkYmFiZWMwZDUwYjdfNjdRTVp2SWxTYU96V3pqT3pRSmh1SWxSbmE0eW5CdTJfVG9rZW46SXNWdWJpVjJ2b0d5TG54ZW1acmNSMzBZbnNkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWZhOTlkN2E1ZmY5ZmEzYmJkOWM5NjIyODk2MGZjZTZfV2lPSmwxRFliWGZWcERjRlluSnp4RktBVFlTZGEySm9fVG9rZW46S0NOWGI1RGRkb0RHU2l4ZmhMaGM0bzU5blRoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzM4YWUyMWFjOWZkMjUzYTM1ODc1NmQwYTQyNTZiMzJfN3g1Ym1JUktnMHR2WWlCT0pHZmtQODVHNXJ0eElXZlhfVG9rZW46UnpXQmJaSnhDb1IzWEN4a001NWMxRDZYbnZSXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å‘é€ä¸€ä¸ªæ•°å€¼ç»™æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯è¦å…ˆæ‹¿åˆ°ç›®æ ‡å€¼è¿›è¡Œåˆ¤æ–­ï¼Œåˆ¤æ–­è¯¥ç›®æ ‡å€¼æ˜¯å¦å¯ä»¥è¢«æ¥æ”¶ï¼Œæˆ–è€…è¢«æ‹’ç»ï¼Œå†æŠŠå¤„ç†ç»“æœå“åº”ç»™å®¢æˆ·ç«¯ã€‚

å¦‚æœè¯´è¿™ä¸ªç›®æ ‡å€¼å¯å¤„ç†ï¼Œé‚£ä¹ˆgoal\_handleé‡Œæ˜¯æœ‰å†…å®¹çš„;

å¦‚æœä¸å¯ä»¥è¢«å¤„ç†ï¼Œé‚£ä¹ˆgoal\_handleæ˜¯ä¸€ä¸ªnullptrç©ºæŒ‡é’ˆã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTk1ODVhZGE2NGJjOTJhNDk4MzQxYWFkMDY2MzZiYmJfUGk1Q05uTFRGZ2Zjblk2MHRrVUwyVm44SWRXZlNPbEtfVG9rZW46RDVkUmJTZmZKb2xLdnB4V2Jha2N4TEY2bjRnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTVmMzZhOWNkMTRhMmI2YjczN2I0ZTNjMGIzZDM4MDlfSVhEdkNlclNJcjVscnd4MXlGM0dFeXczZHEwSmR3QmxfVG9rZW46RWloNGJKSFBYb0NtWFV4dGtmMWNCQU9wbnFlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWYwNWJhMmRlYmM4YWU1MzUxOWNiNDNhZmU2OGI0NmVfVTZEcFQ2TzhJejF4bEFCR200YmdpYjZGSFhna0hlVmRfVG9rZW46V0Jhc2JUVGFUb0l3T3d4ZlB5aGNTdWRvbmJlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzI3YTc4NjJmY2U5NGI0ODRiM2YwODY0ZjNkNWZiMjNfWlhnYTFpTVJ6UGNzaWpCQXRNWXp3V205Y3lkWDFmRUFfVG9rZW46QnZVYmJ1ZVZYbzg2WXd4Y1JQa2NJbWtWbkZnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

æ¥ä¸‹æ¥å¤„ç†åé¦ˆæ•°æ®ï¼š

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTViYjkyZjMzNjQ3OTQ0MWVmNjRkZWI0MmM0NTU1MzNfRTg4bFd3YTR3OTNiMXZkUWJFUEhoOGhCNGpENXVEeWhfVG9rZW46UFJBaWJ6Z1o3b2JkcWt4S3k2UmM0VjZibjdkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¦‚æœæˆ‘ä»¬åªæ˜¯è§£æåé¦ˆçš„æ•°æ®ï¼Œé‚£ä¹ˆgoal\_handleæ˜¯ç”¨ä¸ä¸Šçš„ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Zjk4NDljNzM0NWYxNWI3NTE4ZDNiOWMzZTIwMTRmYjZfYzF0Q0NvdzZGUFNQWnROZDRjaTNmYk4ycHQ1QXRURGRfVG9rZW46SG1sNmJtQmZwb1JnSnF4UWVsSWM4Qll0bnlmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTc2OWRlOWVhOWM3OGI4OWU5YjE5NDU5NDcwYTRmNjhfa09HYnM4WVBYM2tHSU53SHhjRzZZQWpvaWJaREMzdUVfVG9rZW46VzZpVWJUbXg3b2E0ZHp4UEE5QWNCV0lRblhlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjIwMjM4NGIyZDU2MDgxMGMwOGMxNjYwMWU4ZWY1ODRfZG1tZmZFUjllMUdZR3lQNFVSQlpsQVFtM3NhTFoxaU1fVG9rZW46TWFRU2JuYkxybzNzMld4dzFCWWNIc1FCbmtmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

éœ€è¦ç”¨ä¿©%æ¥è½¬è¯‘%ï¼Œå¦‚ä¸Šå›¾æ˜¯æ‰“å°ç™¾åˆ†æ¯”æ•°æ®çš„æ¡ˆä¾‹ã€‚

å‡è®¾progress\_intæ˜¯50ï¼Œåˆ™ä¼šè¾“å‡º50%ã€‚

å¦‚æœåªæƒ³æ‰“å°ä¸€ä¸ª%ï¼Œé‚£å°±éœ€è¦%%æ¥è½¬è¯‘ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzI0YjMzZmE0MjYyZmIxOTU5ODQ4YmYyNjFjY2Y3ZTZfZ3ZEM0JrZWlyUmtVTXhEVERFMlRhM3pPTHBCUFZuSmpfVG9rZW46Rzlwc2JUcDg5b2lkdlV4RnJTSmNsWWM2bjFhXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Mjg5NGVkYzMzMmRkMWE0NzI3OWUxMDQ2MGM0ZTNlZGRfWXZId3NxYmozMFFTTFJyVzZLNWI5OWk1T2JrQ05PQzhfVG9rZW46U1lMcWJaUXMzb29jdXl4Z2EwT2NoRldrbnJiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å›è°ƒå‡½æ•°æ˜¯å¯èƒ½ä¼šæ•°æ®ä¸¢å¤±çš„ã€‚è¿™æ˜¯æ­£å¸¸ç°è±¡ã€‚

* * *

æœ€ç»ˆå“åº”ï¼š

è¿™ä¸ªresultæœ€ç»ˆç»“æœçš„çŠ¶æ€æ˜¯ä¸ä¸€å®šçš„ï¼Œæœ‰å¯èƒ½ä»»åŠ¡è¢«å–æ¶ˆäº†ï¼Œæˆ–è¢«ç»ˆæ­¢äº†ï¼Œä¹Ÿæœ‰å¯èƒ½ä»»åŠ¡æ­£å¸¸è¿è¡Œäº†ã€‚

æ‰€ä»¥æˆ‘ä»¬è¦é€šè¿‡çŠ¶æ€ç æ¥åˆ¤æ–­çŠ¶æ€ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzA0MmIzZWI5N2IyMzdmNzY5MGRlYjRhN2YwOWY5MGZfUkFydWZjVXpMQzFkT2ZoQW1RTlA1WGFObFlBdWthRzVfVG9rZW46VFlSS2JMSDhqbzY0eGF4QTdobGNmVjd1bldlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ç¬¬ä¸€ä¸ªæ˜¯è¢«å¼ºè¡Œç»ˆæ­¢

ç¬¬äºŒä¸ªæ˜¯å–æ¶ˆ

ç¬¬ä¸‰ä¸ªæ˜¯æˆåŠŸ

ç¬¬å››ä¸ªæ˜¯æœªçŸ¥

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Yzc1OGYwMzY0N2NjNWUwZTQ1ZTFjYjdlMmY1YjVmNGZfRzRtd0kwOGtHaVExYXFKZUtReVE4QTVZaEllMkJXZ0xfVG9rZW46R3pSSmI3TnFub3pDb3l4WEJsNGNiaG9OblJIXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjgzNDFiZjI3YWQ1OTkwOTExZGM5ZWNhZWRkMzhlYWJfcWR4UzlWcktmNGVxN0IxV0ZuU3FzbkUwVGJxalZTdkxfVG9rZW46UVV2a2JrZWoxbzVGNDl4M1laTmNEVUV6bmhnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTZjZGI4MGJiZmM1MDJmMzNjMWNlNzM4N2M5ZGFkOWJfTXQ5VUh6UmJibnozZzk0Y3BrRHJjRjVrcEx6NmV6QTNfVG9rZW46U3R3UmJnT3Vzb3dkc254MldyY2NuWVNTbkxmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```C++
#include "rclcpp/rclcpp.hpp"
#include "rclcpp_action/rclcpp_action.hpp"
#include "base_interfaces_demo/action/progress.hpp"

using base_interfaces_demo::action::Progress;
using namespace std::chrono_literals;
using std::placeholders::_1;
using std::placeholders::_2;

class ProgressActionClient: public rclcpp::Node
{
  public:
    ProgressActionClient():Node("progress_action_server_node_cpp")
    {
      RCLCPP_INFO(this->get_logger(),"actionå®¢æˆ·ç«¯åˆ›å»º!");
      /*
      rclcpp_action::Client<ActionT>::SharedPtr create_client<ActionT,
      NodeT>(NodeT node, const std::string &name,
      rclcpp::CallbackGroup::SharedPtr group = nullptr,
      const rcl_action_client_options_t &options = rcl_action_client_get_default_options())
      */
      client_ = rclcpp_action::create_client<Progress>(this,"get_sum_topic");
    }

    void send_goal(int32_t num)
    {
      if(client_->wait_for_action_server(1s) != true)
      {
        RCLCPP_ERROR(this->get_logger(),"æœåŠ¡è¿æ¥å¤±è´¥!");
        return;
      }

      /*
      std::shared_future<rclcpp_action::ClientGoalHandle<base_interfaces_demo::action::Progress>::SharedPtr>
      async_send_goal(const base_interfaces_demo::action::Progress::Goal &goal,
      const rclcpp_action::Client<base_interfaces_demo::action::Progress>::SendGoalOptions &options)
      */
      auto goal = Progress::Goal();
      goal.num = num;

      rclcpp_action::Client<Progress>::SendGoalOptions options;
      options.goal_response_callback = std::bind(&ProgressActionClient::goal_response_callback,this,_1);
      options.feedback_callback = std::bind(&ProgressActionClient::feedback_callback,this,_1,_2);
      options.result_callback = std::bind(&ProgressActionClient::result_callback,this,_1);

      auto future = client_->async_send_goal(goal,options);
    }

  void goal_response_callback(rclcpp_action::ClientGoalHandle<Progress>::SharedPtr goal_handle)
  {
    if(goal_handle == nullptr)
    {
      RCLCPP_INFO(this->get_logger(),"ç›®æ ‡è¯·æ±‚è¢«æœåŠ¡ç«¯æ‹’ç»!");
    }
    else
    {
      RCLCPP_INFO(this->get_logger(),"ç›®æ ‡å¤„ç†ä¸­!");
    }
  }

  void feedback_callback(rclcpp_action::ClientGoalHandle<Progress>::SharedPtr goal_handle,std::shared_ptr<const Progress::Feedback> feedback)
  {
    (void)goal_handle;
    double progress = feedback->progress;
    int progress_int = (int) (progress * 100);
    RCLCPP_INFO(this->get_logger(),"å½“å‰è¿›åº¦ä¸º:%d%%",progress_int);
  }

  void result_callback(const rclcpp_action::ClientGoalHandle<Progress>::WrappedResult & result)
  {
    if (result.code == rclcpp_action::ResultCode::SUCCEEDED)
    {
      RCLCPP_INFO(this->get_logger(),"æœ€ç»ˆç»“æœä¸º:%d",result.result->sum);
    }
    else if(result.code == rclcpp_action::ResultCode::ABORTED)
    {
      RCLCPP_INFO(this->get_logger(),"è¿‡ç¨‹è¢«ä¸­æ–­!");
    }
    else if(result.code == rclcpp_action::ResultCode::CANCELED)
    {
      RCLCPP_INFO(this->get_logger(),"ä»»åŠ¡è¢«å–æ¶ˆ!");
    }
    else
    {
      RCLCPP_INFO(this->get_logger(),"æœªçŸ¥å¼‚å¸¸!");
    }
  }

  private:
    rclcpp_action::Client<Progress>::SharedPtr client_;
};

int main(int argc, char ** argv)
{
  if(argc != 2)
  {
    RCLCPP_ERROR(rclcpp::get_logger("rclcppp"),"è¯·è¾“å…¥ä¸€ä¸ªæ•´å½¢æ•°å­—!");
    return 1;
  }
  rclcpp::init(argc,argv);

  auto node = std::make_shared<ProgressActionClient>();

  node->send_goal(atoi(argv[1]));

  rclcpp::spin(node);

  rclcpp::shutdown();
  return 0;
}
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmU2NjM1MzBmMDFiZmIzOTdjZGE2N2M5NGI1MDNmMDhfV2k3NWRrUHRqMUxGWjllc2dQSWUyTVRaaDcxMU9NZGlfVG9rZW46RFVibGJhTjFDbzk0eXJ4N3Myd2M1Q29TbmFlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTgzZDY3YzJiZDJhYjhkOGY3NmI3Nzc2YTJhMmYxNGZfMGI3U3ZDTjFMYkJHVnR1aHk2Nk5EWlN1dGt6V3dRNEJfVG9rZW46SEpQb2J0aUJMb3M4cWR4Q0U5S2NFeGNlblFlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ­¤æ—¶æˆ‘ä»¬å–æ¶ˆå®¢æˆ·ç«¯ï¼Œåè€ŒæœåŠ¡ç«¯è¿˜åœ¨è¿è¡Œï¼Œè¿™é‡Œçš„ctrl+cåªæ˜¯ç»“æŸäº†æˆ‘ä»¬çš„å®¢æˆ·ç«¯ï¼Œè€Œä¸æ˜¯æŒ‡æŒ¥æˆ‘ä»¬çš„å®¢æˆ·ç«¯å»ä¸‹å‘å–æ¶ˆè¯·æ±‚æŒ‡ä»¤ï¼Œæˆ‘ä»¬åªæœ‰å»æ•è·ä¸€ä¸‹æˆ‘ä»¬çš„é”®ç›˜æ‰èƒ½å®Œæˆå–æ¶ˆè¯·æ±‚æŒ‡ä»¤çš„å‘é€ã€‚

* * *

ä¿®å¤bug:

è¿˜æ²¡ä¿®å¤å¥½

```C++
// å‘é€å–æ¶ˆè¯·æ±‚auto future_cancel = client_->async_cancel_goal(goal_handle);
rclcpp::spin_until_future_complete(this->get_node_base_interface(), future_cancel);
if (future_cancel.wait_for(1s) == std::future_status::ready)
{
  RCLCPP_INFO(this->get_logger(), "ç»ˆæ­¢è¯·æ±‚å·²å‘é€!");
}
else
{
  RCLCPP_ERROR(this->get_logger(), "æ— æ³•å‘é€ç»ˆæ­¢è¯·æ±‚...");
}
```

13.  ## å‚æ•°æœåŠ¡\_ç†è®ºä¸APIä»‹ç»(C++)
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTYzOGQ3ZWQ2ZGJhZmM4NTg1NjdlMTAwOTgyMmRkNDlfNko4OEg5RXJTUHhPaW9lUnQwR3lhaU90VFVVdjZJY09fVG9rZW46Rm9VM2JFMk1xb1JSWXR4RTlMNWNzQ1FZbnBjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmZhN2VkNTRiNjhhMDc3ZmUwMGQ4YmE2YTEwYjM2ODdfZzhYWHFCa1NoeWlNYk9YNm1VckIxYWprNU43TGp2Nm5fVG9rZW46UW9xRGJRWGR6bzFQUzh4WjFBZ2NFYXdsbndkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å½“ç„¶è¿˜æœ‰ç‰¹æ®Šæƒ…å†µï¼Œæ¯”å¦‚æŠŠå‚æ•°è®¾ç½®ä¸ºç§æœ‰çš„ã€‚

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2U4OGU5ZjFlMDllM2U1Yzc5NjIyYTRlNTU5NzBlYmNfaTg4M1FMRzVGMXFCTldyMTVWQm05UGVRTERZbDZFclBfVG9rZW46Q1Vkd2J3V0FUb1I3Mmt4NDRwcWNMVWttbkNoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWM4ODc4ZjZlNThlNDJlY2QyN2ExNzMxOWNjMjY2N2JfSTZwYllzckdZbjRnWnBFZDRRVlJWdDRzSEV5YkozRE9fVG9rZW46SVJBbWJJSVFyb0lVazF4UGxvZWNQelMybnA4XzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å…¶ä»–é€šä¿¡éœ€è¦è‡ªå·±å¼„æ¥å£æ–‡ä»¶ï¼Œä½†æ˜¯å‚æ•°æœåŠ¡ä¸ç”¨è‡ªå·±å¼„æ¥å£æ–‡ä»¶ï¼ŒROS2å·²ç»å°è£…å¥½äº†APIï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦è°ƒç”¨APIå³å¯ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTRlZjk5ZWI5OGNmY2Q3MzE4NzI5NzE4YmRjNzNhNDFfRmFOWWlNRjZtYjFQTmVpRHhVdGdNUlBHOFExc01VQndfVG9rZW46VHpUaGJNNmpvb1JxZVd4MFg1b2NZY0Y3bm1oXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTk2NDVkZjg2NDI0NTVlNTBiM2M5N2M2OGMzOWNlNmRfYVdiWGo2SFIyYkNPTUdDRmJWcU9kVWwwTzlWUkF6V2xfVG9rZW46RlVNT2JBZEUwb2Fuelh4VENkYmNkbGJCbmRiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzVhYmZlNjVlZmMzYzJjZWI3MjMxYzJmMWM4ZGM3NTNfdFlhWlVTaXJMOHY5VzByM3M4TThlRGRFSUVab2JObmlfVG9rZW46WjIwNWJEZmdXb2Z4bmR4SHZ5RmNKbmlNbk1iXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

åªæ˜¯æƒ³å±•ç¤ºä¸€ä¸‹APIï¼Œæ‰€ä»¥å…ˆåˆ›å»ºå‚æ•°åŠŸèƒ½åŒ…å±•ç¤ºä¸‹APIï¼Œå…ˆä¸åˆ›å»ºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ã€‚

  

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWZhMjQ5MzE2MmUyZTEyY2NmNDQ0ZDZiMmRmYTRkYWFfMFU2MGZwaG1JSEVaN1pIdGNBaDg3ZEl0dm5PZ0QwczhfVG9rZW46UnRaNGJuODc2bzNVbEt4b2JDcGNEc3publJkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWUwMDg4NGI5N2U2MDM2MTA5NTI5OWY1NWU2ZDY3Y2ZfWEJOV3hVVWxGYkxMR0tMOWNHTlExNGdrdDJNQmZhZ3FfVG9rZW46WVBQUWI1TEQ5b0hRN014QmJ3WWNoV2hOblhnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTMzYzhjMmRmYzg5YzQ4Y2ZmYmY0MjRkYjM5NDIwMTVfV2ZNdDB5ejVKdzhzM2J3VjZxbnJIeFR6Q3ZNcGZVOXNfVG9rZW46WlFsMmJ5NW01b3h6YjF4TmNTamNkSW1GbnVmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

rclcpp::parameter å¯¹è±¡(é”®,å€¼);

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTE0MDE5YTEwYjQ4Y2JiZGI5MTM5ODZhYmE2Y2FkMTBfeDd5REJvOWtKUGtwaGNEVzV6MXlvS0l0alR1eFZiNGxfVG9rZW46VWtUcmJSNDhab09WWmR4YlNtNGN3bUpnbjhlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NGFkOWFhNjBiMzUyMGJmZjliODBkOWU5NWE5M2U4ZWNfT0FtTXFJbEFqd2RLZ1FQTFBvOWU4SUtHODh2U1BOclhfVG9rZW46TkpYWGIzNllvb3VWQ2t4TXB6VmNOQm5zblV4XzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTkxYzJjY2VhYjBhYjBhM2Q5NWMzNmZjMjZkMWE5MmVfMWNuRXNWZnRIN21VWUpjSG5Db3FuZkNrdzBMQ1NCME1fVG9rZW46RzZWOGJHVlZ1b2JmNEx4UXRQRWM1WnNTbnJlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTBkMTcyYTQ4OGZjNjZhMzI3NjA1NjM0YmMxOWExN2JfUE9qY1UxM3RRRUkzM2prbHFXNGtld0FLem5qbnhBMFZfVG9rZW46Q2NabmJMR0E2bzN6WnZ4ZFJEYWM5NDJXbjd4XzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODE5ZGNjYjYxZTgyNjQ4MGY3Mzg5NjI2MzNlMDhmMjBfbFNkQXlQbmtUMWRUOGVBNWxwWWhONlZkdzE3ek5ua2hfVG9rZW46U3lSTmJXdUxtb0o2Q2V4TGFOaGNlWE1YbmhJXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGNiNzgwOTVlZGU4OTYwMmI2M2Y0MjhmNGM4ODE5YjNfQVNHMGtiN05RelJTNWFXRG1PRVdVWUw5ZWQ0dU5tTDZfVG9rZW46RlhBZ2JDeHhRb1VDbWR4dEpPS2NFZWk1bjFjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2NlMzhmM2M5YzYxNTRhYmVkYmI2OGJjZDgwYmI4ODZfOFNOZGhIN0pnRGVsQjRBU3piZDV5QmIzZkNZTG5ISVpfVG9rZW46QmtGMWJoZUlTbzBkc0h4UzRYbWMxbjRJbmJnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¯¥å‡½æ•°æ˜¯ç»™parameterçš„å€¼èµ‹å€¼çš„ï¼Œæœ‰18ä¸ªé‡è½½ï¼Œå„ç§ç±»å‹ã€‚

å…¶ä¸­ç©ºæ˜¯è¯´ä¸ç»™èµ‹å€¼ï¼Œè¿™æ ·åªæœ‰é”®ï¼Œæ²¡æœ‰å€¼ã€‚

14.  ## å‚æ•°æœåŠ¡\_å®éªŒ1\_æœåŠ¡ç«¯(C++)
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTNiZDdlMzBjY2Q2N2ViMjViODk0ZGU5NTBjNGMzN2RfV3FKd0JBUE9tZjhrcWRjUVBma1Z5a1FwTGVXb1RPeGpfVG9rZW46UksyNWJsRzk2b05GWk14N0JmWmNZSHprbmFiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODViNDYwNzE4YTMwOWMwYzQyY2E0NzU4M2I3Y2ExN2RfVTFjUDlRM1FDcWlBZlRuSU9CYTlsOVgwOEZrVlhiMFNfVG9rZW46WmJzTmJRUUphb1NqNUR4SU5xeWNIbHJsbnFNXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™é‡Œæœ‰å·®å¼‚ï¼Œåœ¨Nodeé‡Œä¼ å…¥äº†ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¿™å¥æ˜¯ä¸“é—¨ç”¨æ¥å…è®¸åˆ é™¤å‚æ•°çš„ã€‚undeclaredè§£é™¤å£°æ˜ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGYwNDc2ODk4ZDNiNDMyMzk3YzY4ZmY0MjdiOTgzNTFfdFNRUVFJWHlueGVSSUplSmplZHE0SnVFZXJSemNDWDVfVG9rZW46U1VXYWJxck1Gb3AwYXZ4em9yZGNKbFRjbllvXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGY3ZWJhODQ2M2FjNDI3ZDIyZWMxZmFjYmRhMDg3YTVfV0c5TnMzN2xocHZzd1ZsakZtYmlNSHZxalF4akJDVk9fVG9rZW46V1BQZWJnREtjb3dSR2R4NGJpSWNsM1J2bkhlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NGM0Y2I3ODg2ZmIwZjNkODE2Yjg3NzAwNDA4N2YzMjZfZlNCcjdEbzViVDNYRmpsZ3drVkZWdElwNlQ1dXpuTGRfVG9rZW46WFQzcmJ3cWRDbzlrbGZ4ZllEc2NQNXg0bm5MXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjYzNjVkNjZkYjg1YWQ0M2RmMWQyNDJkYzczMzM3NWRfRWF1UEc0cXcyT2lBQXNzR2dqSjUzMDAyN050WjA5MUhfVG9rZW46R01zbWI1a2xtb2dUbGN4NGZTR2N4ZEVNbnllXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWE3Mzg4Y2NiYWU4YzYzYzQyMDRjNjRiYWRjNmJjNTJfS1JtSjg1Z3pObmVzV2ZsTFQ4b1p3aWZKWXhIeUxDa3BfVG9rZW46Sm1ZemJYeVlSb1dQQTJ4UUdiZWNndElXbmhtXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

åªæœ‰æŸ¥è¯¢å’Œä¿®æ”¹çš„æ¥å£APIï¼Œå¹¶æ²¡æœ‰æ–°å¢å’Œåˆ é™¤çš„APIï¼Œè¿™æ˜¯ROS2æ ¹æ®å®‰å…¨è€ƒè™‘çš„ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGY5ZTRhY2U4OGMyYzMzMzdiNzg0MDk5MTk0NjUxZDZfUWcwV1BFcnJSSFFYMWFLTDJEY05hVHpnOXROY0hzdkNfVG9rZW46V2JjbGI2VmhNb2EzQlV4MmJEc2NPdURLbkdkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjMzYmVkZGY5MjAxODNkYmM1OGFkNzBkNzViOTdjODZfcThtUERxYTRNeVFKS3RNajlMdUhiWUVwVVVScHNpM2tfVG9rZW46TnMwVWJmMExHbzFkSzh4bmNTRGNaR0RTbjlnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzYyM2FhYjZiYTI4ZTAwNDY0ZGZjZDc3ZGJlOTc1N2JfTUY2ZDBxWWJ5cUhxRUp0RG9lY1R2bUJyTnhhMFhOSjZfVG9rZW46TzFBVWI3QWZBb1hScm94aFFrRGN0dDFnbkVoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Yjc1MWE4YTMzZDQwMzBkOTZhMDI5NzUwNTZkNWNhNDhfd0w4emJuQjRSVkphVm9vV3lJRm9PaHNUTGR2QzFaYVJfVG9rZW46RHM4TGJrSzN0b1ZQeUx4M3lyVmN5WnhZbnJkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```C++
#include "rclcpp/rclcpp.hpp"

class ParamServer: public rclcpp::Node
{
  public:
    ParamServer():Node("param_server_node_cpp")
    {
      RCLCPP_INFO(this->get_logger(),"å‚æ•°æœåŠ¡ç«¯æ­å»º!");
    }
};

int main(int argc, char ** argv)
{
  rclcpp::init(argc,argv);

  auto node = std::make_shared<ParamServer>();

  rclcpp::spin(node);

  rclcpp::shutdown();
  return 0;
}
#include "rclcpp/rclcpp.hpp"

class ParamClient: public rclcpp::Node
{
  public:
    ParamClient():Node("param_client_node_cpp")
    {
      RCLCPP_INFO(this->get_logger(),"å‚æ•°å®¢æˆ·ç«¯æ­å»º!");
    }
};

int main(int argc, char ** argv)
{
  rclcpp::init(argc,argv);

  auto node = std::make_shared<ParamClient>();

  rclcpp::spin(node);

  rclcpp::shutdown();
  return 0;
}
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWY5ZmY5NThhODViZmJkNjRmNjRjZDVmNmI5MjE5Zjlfbk96REdVZTZ5bTFua1pwZjVET3p2QzNzMGpRSVpueVJfVG9rZW46RndOdmI1UldNb1BydXV4N0JVV2MxdnhYbk5lXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmY3ZDliNjNkMjI2NjJmZWM4MzU4MDVhMDUzMjhiNTZfS0xod25wRVhjQ0lTb0phRnZMRzN2WmFERkRZZEVmZ2VfVG9rZW46U0NXYWIwMXpvb0NwRnZ4TUhhVGNhN0pvblhHXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmEzYmVlZjI2OGYyZjFlNTc1MjMxMzhmNTRlNjMxODRfd2QzaThYcGNxV1NUSmdoaFRabzdrY2FtbG8zRXdPN2ZfVG9rZW46RlRyYWJGQmd4b2t6U0p4MElZMWNwejlKbnNkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjU2OGRjOTljYTAyZjA1ZjM4MTY1OGU5ZmQxMWRmMDlfa3BRbW1kdHo3VWdnakRheDRzMEc0Rm1ZdVBMVndzTDZfVG9rZW46WFptdGJpQzRZbzhhdXh4d0RMbmNkRGo3bkRlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NGMyMDVlZTg0YTY5MDFlZThlNDU0ZGU5NTE2MGQ4NTBfQmZPUTc2T05TTlBNaEt3Q0t5MEc1TXpIc2d3MWJ6RExfVG9rZW46S29TZmJVV2h2b1ZQY2t4UzNob2M1ZHVabnlaXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGUxYTkwMjlmNDk3N2MxMTRjNGQxNWQ2Y2IyYjg3ZmRfc0plVGd5UnBYdExDcVpydjMxcUlVdXdwb2hyblZzTDdfVG9rZW46RTMweWIwbERvb2N1aFV4ZlA1YWNqakZFbjFiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmE3MjQ1NTZlZWRkMmZmNDQ0MDQ0ZThjYWQ5ZTc3YTlfRWM2NmhtMjF2Q2JvNlN3TTZsRDhiZEZwS0Z6VEtGTnhfVG9rZW46WldpTmJDZktGb0dZMkJ4cEFZSWNvcldObkJkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

é“¾å¼ç¼–ç¨‹ã€‚

ä¸€ä¸ªæ™®é€šçš„èŠ‚ç‚¹å°±å¯ä»¥å½“å‚æ•°æœåŠ¡ç«¯ï¼Œä¸éœ€è¦å¦è¡Œåˆ›å»ºå‚æ•°æœåŠ¡ç«¯ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTE1ODhjMzJiOGI4MTYwNTBhOTIxZjkwN2U5ZmI0MmVfV29hNU5DMXJXSWxlTFVFV3BMM3hXdVZnd3M4bEt6RWtfVG9rZW46RURReGJIbERSb0FJUzN4Z2hrNGNBTUhYblNoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzUwZTVlYzgzMjNhZjZmNmM1MDI0NWRlYzcxNGZjMWJfUU1OeDJKMEc5RVlUcHcxOTdlUXhHdUc0V294MGVjVnhfVG9rZW46U0ZiOWJFWENrb2xoOER4OFY4SmNmN0xtblhmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```C++
#include "rclcpp/rclcpp.hpp"

class ParamServer: public rclcpp::Node
{
  public:
    ParamServer():Node("param_server_node_cpp",rclcpp::NodeOptions().allow_undeclared_parameters(true))
    {
      RCLCPP_INFO(this->get_logger(),"å‚æ•°æœåŠ¡ç«¯æ­å»º!");
    }

    void create_param()
    {
      RCLCPP_INFO(this->get_logger(),"-------------å¢æ“ä½œ--------------");
    }

    void get_param()
    {
      RCLCPP_INFO(this->get_logger(),"-------------æŸ¥æ“ä½œ--------------");
    }

    void update_param()
    {
      RCLCPP_INFO(this->get_logger(),"-------------æ”¹æ“ä½œ--------------");
    }

    void delete_param()
    {
      RCLCPP_INFO(this->get_logger(),"-------------åˆ æ“ä½œ--------------");
    }


};

int main(int argc, char ** argv)
{
  rclcpp::init(argc,argv);

  auto node = std::make_shared<ParamServer>();

  node->create_param();
  node->get_param();
  node->update_param();
  node->delete_param();

  rclcpp::spin(node);

  rclcpp::shutdown();
  return 0;
}
```

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzYwMjM3YjU3MmE4M2IxNzZjZDZhMDMxYzg1N2U5YjJfVWRhZ0F3WUd1U0YxbmJETDJmMWFCYjNrZWd3VDNWcUFfVG9rZW46STRuVmJETWhFb1FtN3Z4ckwwUGNYUHc2bmJkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWFiNTE1YmI1NWJjYzIwY2JiNjdjYjY2NzRhOWMxZjRfUWNEWHdEOG4ycTJVUXNuVlloNFI4VmZkR1JRa1llTXJfVG9rZW46VmxjcWJDODMxbzhPTm94TEZkN2NRQVpLbjlnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTYyYWVjNjJmNDAxNGFkZjBkOTQzOWYzNDM2Zjk3ZmVfc1BVQXBDTGV3VjN6UHBORE9TZlRDakEwMkVIMzVSWE5fVG9rZW46VUlTRmJrSXZGbzQzemR4WnBWaGNuY2lqbkloXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ros2 param list

æŸ¥è¯¢æ‰€æœ‰èŠ‚ç‚¹é‡Œçš„æ‰€æœ‰å‚æ•°

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzFkMWJhMmUyMjZlMDNkN2Q3ZWZhZDhkZDFkYjgxYzJfYnRQSFM0aEJqMnJmQXpRSjFjWW1jMGRibldSWTZ0SnFfVG9rZW46UVFKSmJGMEdTb1k2akV4VXNwU2Nab2NPbjZlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ros2 param get /èŠ‚ç‚¹åç§° å‚æ•°é”®å æ¥æŸ¥çœ‹å‚æ•°çš„å€¼

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2M5ZTE1OGU1YTg1NmNiNzVjNzYwNzM5YjM2MzYxMjJfc3FlRk10Yk1ZcEUweDZmaXY4bHE2QlFETmNuNUdtSWZfVG9rZW46RUNySmI5REVXbzlpclB4dGRBb2N2WXQ2bkVkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¯ä»¥é€šè¿‡é”®æ¥æŸ¥è¯¢å‚æ•°çš„å€¼

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTAxODEyOTM4MGQxMmMwZWNhNWQyY2ExYTlhNDNiYjNfQmoydUI5Yk1iQnZ3TTJiTDRUVWY3cHcxR0FNT3hUa3ZfVG9rZW46S3ZhOWJpcDlBb3ZieWN4cEdlZmNwRVZ1bnJjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¸¦å¤æ•°å½¢å¼çš„å‡½æ•°å¯ä»¥é€šè¿‡ç”±é”®ç»„æˆçš„å®¹å™¨æ¥è·å–ä¸€äº›å‚æ•°å¯¹è±¡ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjI3MzExMmVjYjU4ZjYxYjllZWRmMmU0YmRlOWIyMTBfY293V1hKMnlhVklhREIzb0d4RzNrUWJtNTdOWVgyclZfVG9rZW46VU9la2JSY1Rib09McW14S2NaMGNqWGZrblhmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ¥åˆ¤æ–­æ˜¯å¦æœ‰è¯¥å‚æ•°çš„ï¼Œå…¥å£å‚æ•°ä¹Ÿæ˜¯é”®ï¼Œè¿”å›å€¼æ˜¯å¸ƒå°”å€¼ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTc0ZDhjZTkwZTBkNzIzYTY3NWU2OTI0MzQxYzNmMDdfTVdVOE9Sc3pvUU5ZWFdyRVpWS2lWSFRXN1U2TEVraGlfVG9rZW46WnNSUGJpbjVTb0JoQll4ODBWZ2Nid1k2bk1kXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWY5YjZiOTM4MmE0YjFhNjZlZTg1NmVjMTlhZGMxNWRfYXB2d0Eza28zYzA3Tm9laFdoRGhFamhiempoZmFDZ2xfVG9rZW46UUk1eWJRc2hIb1J5MFN4S251SGNWNEJzbjJkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTNhY2QxODgzMmVlMjZmNjZkNjQ2NWQxZTA4ZmRmMzFfVGc1dWduZG04QlRLa0tPVzZ3VWZmakMwQmVkYmNXQnZfVG9rZW46T1ZRSmJMZWpZbzE2UWV4bm82WGNSdFZwbldmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWI1MTAxZmNjMTkwZDJmOGFkZDY1ZjdhMTMxMDcwNWRfaExOTmF4bXZDOVF3WjhiTlU2empiOFljRlo4dDV5NGhfVG9rZW46Qk9RQ2JQZmJab0k0T0R4bkhaS2NGYjhmbkdiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MWUzYjVmOTM4ODNjMzA5OWE5NmI5MmYzZmY5ZTM1NDNfbVZ4ek9tTG1KRXVFaFFva003bUVBUTR4eVBSNlJiWGhfVG9rZW46R0NyZGJ1S3BWb2l0V0t4czVBVGMzd3JxbmNjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjQ1NDAwNzk0MGY4YTExMzJkZDgxOTFlNjNiYmFhMjRfRWF1QktDMGcydTVwRWRGbVRlS2pMU2RRU2R0Qk9tQlpfVG9rZW46WWUyWGJLUE51b0JFcUh4Y2pLRGMwS3ZzbjlkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDlhYmVhNzA2ZjNlYjE1NDQ5NTVkOTg1ZWRlMDVjYThfQkI0bHJUU0RjSllqSnlTUzhCQmxsak1ZMkZqOU9NMDFfVG9rZW46SmwwVGJZSkpIbzlsWHB4T0hIRGNMenlubmNoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

éœ€è¦ä¼ å…¥parameterå¯¹è±¡ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjY5MzAwMjYxMGMzOTQ5OGI1Y2MxZjRjNTU1ZTdmODVfRGVRNmxOTWZTRHBtYVNCb3dzakp2NWxKS0RNNTFsNjhfVG9rZW46V3hZWGJTa24xb2pqWGd4VU9wR2NnVmdybklnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æˆ‘ä»¬è¦†ç›–æ‰æ—§å€¼å³å¯ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MWRkZTA5ZTAzZDVmNzZhZjczZjk5YTFlMzI1MDA4OWZfV2REUlQxUWZ6NDNzV1B2N2toYlB4aWRhdEtvSFBCUE1fVG9rZW46R2tnTmIwQ0hyb1FvS1B4NTU1SWNRMFdyblJoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmY3NjcxYjAwMDkyNGM5YWYyNTE5Y2UzZDFiMTMyZjhfRExsblhjdjUwODJkMVpWVG4yeTR4cnc4amJvMmFNNFFfVG9rZW46R01uYmJZSlhTb1NBQ0N4a1IweWNxY3lBbmFmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

é€šè¿‡set\_parameterä¹Ÿå¯ä»¥åˆ›å»ºå‚æ•°,ä½†æ˜¯å¿…é¡»å£°æ˜allow\_undeclared\_parameters(true)ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTExYjEyZjkzN2E4MTIyMzdhNWZiN2U5NWEyNWI4MWNfTlRBVFo4ZWlVbHpvSFFRV0ZVSjZVTm9SYjR5d0FTQndfVG9rZW46R0tDYWJkRlM2b0Y4SGN4dG9wUGNzN3RybnBkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODNhMTUzYWI3ZmFlZDYyMzk3OWE2YWE2MzBiMWMyZjBfQzNPUUtvcUdXTzNLV0VSSWxleXgwb2pwN2dVM2N4OGJfVG9rZW46RjFGSWJmUDBIb1lqYUN4dXN2R2NhWkhHbkRnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTljODBiOTNiMzJkZTQyOWI3YzQ5Y2M0NDViZjUzNWJfakhwTUxIZlNaQzF1ejB4ZEhMVVpSdnoyZzBpeEJIMDlfVG9rZW46RjlnYmJVaktLb2w3VVR4OFZXY2NGd1J6bmlmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTU5Y2NlZjc3YzBkNDVlMGRiMTZiN2ExMmI1YWQ2ZTBfOGFPNFZGN2Foc1ByckJHNVRnemlnQlNENEdsSFF2a2VfVG9rZW46S3hlM2J4YWFCb0s0azB4NVpJM2MydXN6bkhlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTY2YWQwNjBmYmMyYmY4NmJlZWU5N2VjY2E1MDg0ZjZfTzhLZEg1THhWTEY4cnZqQ2pIejFnclNVMzhZY0xBVzVfVG9rZW46QUxQU2JkYnNXb3RLZjB4bzQxWWNRYjBnbnhnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™ç§å£°æ˜çš„å‚æ•°ä¸å¯ä»¥è¢«åˆ é™¤ï¼Œåªèƒ½åˆ é™¤æœªå£°æ˜ä½†è®¾ç½®çš„ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjY4ODRhMzViOTAzZGQ0MjViYWVmMzJhOWI3MDI5ZjhfeG03a2NMeTRSRE92V0t4SjA0dnFjZmlqYVh1d2RIWDBfVG9rZW46TXdXRmIwNFV5b3hPVzd4U25Ca2NwUUNQbjBRXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTYxY2JkZTJjMTgwYjJhODFkYzBiZTA2NjJiNmY1NDBfSGZqd0E3YU02NnZYc2M1RWdhSG0yaFJoY2xmTVM3bDlfVG9rZW46VVdKdmJJU1I4b25DV2Z4OHJWVmNKSDBLbkpkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```C++
#include "rclcpp/rclcpp.hpp"

class ParamServer: public rclcpp::Node
{
  public:
    ParamServer():Node("param_server_node_cpp",rclcpp::NodeOptions().allow_undeclared_parameters(true))
    {
      RCLCPP_INFO(this->get_logger(),"å‚æ•°æœåŠ¡ç«¯æ­å»º!");
    }

    void create_param()
    {
      RCLCPP_INFO(this->get_logger(),"-------------å¢æ“ä½œ--------------");

      this->declare_parameter("car_name","ER");
      this->declare_parameter("width",1.55);
      this->declare_parameter("wheels",5);

      this->set_parameter(rclcpp::Parameter("height",2.00));
    }

    void get_param()
    {
      RCLCPP_INFO(this->get_logger(),"-------------æŸ¥æ“ä½œ--------------");

      auto car = this->get_parameter("car_name");
      RCLCPP_INFO(this->get_logger(),"key = %s,value = %s",car.get_name().c_str(),car.as_string().c_str()); 

      auto params = this->get_parameters({"car_name","width","wheels"});
      for(auto &Â¶m : params)
      {
        RCLCPP_INFO(this->get_logger(),"key = %s,value = %s",param.get_name().c_str(),param.value_to_string().c_str());
      }
      bool car_name_flag = this->has_parameter("car_name");
      bool height_flag = this->has_parameter("height");
      RCLCPP_INFO(this->get_logger(),"æ˜¯å¦åŒ…å«car_name? ç­”æ¡ˆ:%d",car_name_flag);
      RCLCPP_INFO(this->get_logger(),"æ˜¯å¦åŒ…å«height? ç­”æ¡ˆ:%d",height_flag);
    }

    void update_param()
    {
      RCLCPP_INFO(this->get_logger(),"-------------æ”¹æ“ä½œ--------------");
      this->set_parameter(rclcpp::Parameter("width",1.85));
      RCLCPP_INFO(this->get_logger(),"width = %.2f",this->get_parameter("width").as_double());
    }

    void delete_param()
    {
      RCLCPP_INFO(this->get_logger(),"-------------åˆ æ“ä½œ--------------");
    //   this->undeclare_parameter("car_name");
    //   RCLCPP_INFO(this->get_logger(),"æ˜¯å¦åŒ…å«car_name? ç­”æ¡ˆ:%d",this->has_parameter("car_name"));
      this->undeclare_parameter("height");
      RCLCPP_INFO(this->get_logger(),"æ˜¯å¦åŒ…å«height? ç­”æ¡ˆ:%d",this->has_parameter("height"));
    }


};

int main(int argc, char ** argv)
{
  rclcpp::init(argc,argv);

  auto node = std::make_shared<ParamServer>();

  node->create_param();
  node->get_param();
  node->update_param();
  node->delete_param();

  rclcpp::spin(node);

  rclcpp::shutdown();
  return 0;
}
```

  

15.  ## å‚æ•°æœåŠ¡\_å®éªŒ1\_å®¢æˆ·ç«¯(C++)
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Njk5MDliMGJiMGQ1YjI2NmM4ODk0YmU5Yzc3NTFhNzdfTEZwZzVTWDE0ZjVZdVRjbWNVQWpHMDlFWW1YN0lYTXlfVG9rZW46RGw3ZGJkTUhDb3dBcm94VWFMYWNDNXNqbkdiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTVjNWVkN2E0MGNjMGYxZWU1MDU5MWExODdiYTg2MGZfcWFWenpNMFM1WVFsTWQ3Uk1QNUdadE5zRktldkN6cEJfVG9rZW46VE1xeGJQR0VJb1RJYTV4aVVESmNFWlRqbjNjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmE0N2QzMThkMjBkZmU2NTQyNGU1YmFmM2JkM2E5ZGJfTTFrWjBjTDJLNmQxVHVoQ3ZRU2hDdXhMQ2tsd09ZZUNfVG9rZW46T1BUd2JxMlozbzNLOWN4eWVnOGNtQ1hmbmtnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGUwYmQ5M2I1ZTZiZTliMjFmYWVlMjE4Mzc2NjBiOTBfUG5WV1NrM1JtY0dmSG9TeEJTNGpTS0lId2RRdkNUZFJfVG9rZW46UmRDa2JPNHNGb2JnMlV4a2NOYmNQY0tlbm1nXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGNmNGFmYzgyOTE1Yjg2MjY4N2I0YmFjYjc3MzdmMzVfTnZxbzF3NlB3OW5UUWZrMXZLQmRvaTI5d1pibzM2Y3hfVG9rZW46RFZteWJvUWtVb2IwdVV4aGtYb2NGU2V5bkNnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWQ1M2Q3YmYwYWEzMWU1OGY1NGRmMjI1M2RjMTkxNzhfZXExaUFaTGdabXYxQjRCUzVteDBBbEpVREFhWjZXR1BfVG9rZW46VWEwbGJQcmNObzBpRVZ4ZVhCdmNLY2FwbjFjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjU4MWMwMzhkNWFhY2U3MWNlYmNjYjE5MjIzOTY4NjhfclRUMERMYXo0MFNMb3FzcVZlS09PUHM2alhHZlQwTjNfVG9rZW46S0tXcWJ1UVppbzZKNnR4WU9SVmNkQUY5bmVjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWJjNmM0NDU1M2ZlNmE0MzEwY2Y4YWU0MDAyNjBjNGFfaDN0ME5sUWxOTzBOOHpBR1dGcllMeWVFVjc0WFhDOHhfVG9rZW46TmRWcWJUN0VPb29CaTN4VG9EZ2NhQmc4blFlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGI2M2U5MjQxNGMzNzVhNTFlNTBkZjJmYjMwN2MzNDRfUzB4M0dTR2FDa1FNOEN4eDdZbWgyaEk1eWdteDBrMndfVG9rZW46SEpWR2JRM2kwbzZBV1p4Qnp3Q2M5Q1N6bjRmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTJhNzg3ODIxZWRlMzY0NWU5MDQzMzRmMjAyZTI5MzVfdlN5dnVMWlNYWjBjZkU1MDY2U1NPSk9INXU1bXFPQ3hfVG9rZW46WUxvUGJodEFTb0Z2VER4RFNzT2NYNXJ2bjdiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ç¬¬ä¸€ä¸ªå…¥å£å‚æ•°æ˜¯å®¢æˆ·ç«¯èŠ‚ç‚¹å¯¹è±¡ï¼Œ

ç¬¬äºŒä¸ªå…¥å£å‚æ•°æ˜¯éœ€è¦è¿æ¥çš„æœåŠ¡ç«¯çš„èŠ‚ç‚¹åç§°ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDY2ZTYxOGUxN2QyNWJhNTA4Y2M3YTU2YzQ1NzViYjJfR3JiOXBkc0FaV2R0d2dDZE91elRpNHRmRGlPT3JxcHRfVG9rZW46Q0JpY2JBUmtRb3RabTJ4R3RLaWNmRlNBbnNoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¦‚æœ1ç§’é’Ÿä¹‹å†…è¿æ¥ä¸Šäº†å°±è¿”å›trueï¼Œå¦‚æœè¶…æ—¶1sæ²¡è¿æ¥ä¸Šå°±è¿”å›falseã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWYyODY0N2EyOTFiZjE1ZTJlZDM4ZGVkMmU4MzAwZTJfZndvakhVVUJ2UGpzOHA0WWJBU3VsSnZ0VmdrOWwwTnRfVG9rZW46U0RTMWJPdnZJb2V2bVV4VGs4OGNyNEVJbk9lXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzlmNDM2YWNkMzEwZjZjOTE0NDk1MWQxOTQ2OTUyNThfcUg3RHpwcWwzWUNJVjdscXJRSnN2OGM3MmpyTDVXWEJfVG9rZW46QmZlQWJyZ3VFb1VsUlB4MjlFbGNyZTJEbjVnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```C++
#include "rclcpp/rclcpp.hpp"

using namespace std::chrono_literals;

class ParamClient: public rclcpp::Node
{
  public:
    ParamClient():Node("param_client_node_cpp")
    {
      RCLCPP_INFO(this->get_logger(),"å‚æ•°å®¢æˆ·ç«¯æ­å»º!");
      param_client_ = std::make_sharedautolinkrclcpp::SyncParametersClientautolink(this,"param_server_node_cpp");
    }

    bool connect_server()
    {
      while(param_client_->wait_for_service(1s) != true)
      {
        if(rclcpp::ok() != true)
        {
          return false;
        }
        RCLCPP_INFO(this->get_logger(),"æœåŠ¡è¿æ¥ä¸­!");
      }
      return true;
    }

    void get_param()
    {
      RCLCPP_INFO(this->get_logger(),"-----------å‚æ•°æŸ¥è¯¢æ“ä½œ-------------");
    }

    void update_param()
    {
      RCLCPP_INFO(this->get_logger(),"-----------å‚æ•°æ›´æ–°æ“ä½œ-------------");
    }

  private:
    rclcpp::SyncParametersClient::SharedPtr param_client_;
};

int main(int argc, char ** argv)
{
  rclcpp::init(argc,argv);

  auto client = std::make_shared<ParamClient>();

  bool flag = client->connect_server();

  if(!flag)
  {
    return 0;
  }

  client->get_param();
  client->update_param();
  client->get_param();

  // rclcpp::spin(client);

  rclcpp::shutdown();
  return 0;
}
```

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGRhZTI2YWY4ODk4NDY3OTc0MzliN2JhYWE0ODJlOGZfbkxNZ3pLa3I4RmZleDlGR244dmVYSkZSRTllR0NYbTlfVG9rZW46RU9Jb2JLU010b2lHSk94cVhDUmNpSWd5bm9sXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGMwNzNkYjM3MzY2M2QzY2NmZDFlZjE3ZTM4ODBlMDJfV2JZTm5HM1p0T0ZwQzNBSGVmaXlOT0h5bnlvakpiUGNfVG9rZW46UHVaOWJuVWc1b0owRGx4VDN4eWNvd0FHbmdjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWI0ZjkwNTYyNmRiNGRkMDNhNWE5MDA2Y2FjYmRmYjBfMXluUVRPam1TR3JGZndyWlBEWEt2Y0ZaMWoxdWo4cXRfVG9rZW46RFRoaWJLbG45b1Vza2d4NEpVZmNVUmJxblBjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™äº›è¯é¢˜éƒ½æ˜¯æˆ‘ä»¬æ­¤èŠ‚ç‚¹åç§°ä¸‹çš„ã€‚

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWM1MDIxOWQ1NzQwOTEwZTNlMDU4ZTI1NmU0MzY4MmFfQXZSckw2Q08xOG9MeVNXMEpnWE5oa25xcVpSenJBTUlfVG9rZW46TU52ZWJYRllHb3Jybjh4Y1RtdWM4OUtIbjZkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGEyZjcyOTE5YmJhN2Q0ZGUwNmE1YjJhMGY1OWM1ODBfSWcxRFFQYlU3WUJhUHd2TTdVM2ZkYVZYUXNBUEk0RmVfVG9rZW46WGNkdGJUSVhqb2V6NVl4MlBveGNMRFhpblYyXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWJlOWMyMzQyNTMxNjFhNWZjNmIzZDA0MWEzODY1NDdfdklwZEswSEV4NDlqbUo5aVRUZmk5OEhLbmFEeVBhbFpfVG9rZW46UFdXNWJ2amhxb29Ncjd4dXBkV2M3dm1NbnNIXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDhmMTljYzMyYTQxMmI0N2M2NmU3YWFmNzE4Njk3MTNfV3RIR0NFbGluaGNDbVd0eHhkUlZhVzRoNFNlWUpqdzZfVG9rZW46SFN3VmIwUHM4b1RvY2l4WXNmcmNWR0JpbkxjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¦ç”¨é«˜çº§for

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2EwODgwMGNkMzA0MDYxMjMyOWVlYWFkMTM1NDQ1MGRfRmFtQ0VCZk5BZDdseEVPRzN3RHJHSGpRaVNCcHB6NWhfVG9rZW46QUxSUmJzeTdEb0Jrd1p4T0ZNUmN2c1BPbjhnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzM0Yjk4Y2Q5MjEzODc3OGM2YjFkZDkzYTgxNDhjYmZfbDhCUGFTcDdIaUFROE5OeWZvbUhKMlZEOGpjVDN0TklfVG9rZW46QThYOWI2eURHb3pVbjd4RU94SmN0bWVVbnhoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGQyNTEzY2MzNGRjZWVmMTU4YTEzYTcxMjQyNDQwN2FfM2dvNEY4c1dvc2tVeGNMT1JZbnlNWWh0dzh4NW84OGhfVG9rZW46SE9XNmJ1cUF3b09vd2x4MjQxSmM1TzZabmxjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MWNhZWVhMjMzMDM1NGFmZTAyOTAzY2U4MmQzNmZiMGVfZmZqRWJtcDdEV3BlNzBreWttY0VxTXB6Rk03d08yY1VfVG9rZW46RzY2Z2JFd2lGb1lvdXB4ZmFTNmNLQnlmbnVkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmI3MmJkZWVlYjliYzAxOTVlNGI4ZmI5N2Q0MzUyNWZfN2NyTlM3MVUwUHdnNkJkM0JRUWZGeUNiYWk2cGlFZk1fVG9rZW46VUlNMWJZRWl6b0plbUh4NFJMNmNJaW5Vbk9iXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWUwZmE3NDQ2ZjdkNTQwZjAxOWI3ZTQxYjUzODcxODFfdTlIT0VGREpBdElOaHl5RkJVc2wxN2x4MHN6RENjQTNfVG9rZW46QW4zYmJqZEpVbzc3STJ4R2J4eWNqckZBbmllXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å…¥å£å‚æ•°å¡«å‚æ•°å¯¹è±¡çš„å®¹å™¨ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGEzZjZlZWIxM2NkZmRmNmEzOTNlZWZlNWZmMGVmOTBfZnZidklWZzQwalAyV1luMTh1OHhtc2lFV05pV2VacVlfVG9rZW46RFFzWWJuaEFLb0lpU3R4WjlaN2N2dlYyblRnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2M5YjI1M2JjYmY1MTFhYmI4ODI0ZTBiZDkxNThiYjFfaFppaXFGQWtZWkRPTHdnUkFZc0FjYlhFcTZxWUszR3pfVG9rZW46VTluemJhUFU0b1VIUHV4c1F5WWNyR0F3bnVnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æˆ‘ä»¬ä¸ä»…å¯ä»¥ä¿®æ”¹å€¼ï¼Œä¹Ÿå¯ä»¥åˆ›å»ºæ–°çš„å‚æ•°ï¼Œä½†æ˜¯è¦ä¿è¯æœåŠ¡ç«¯é‚£è¾¹è°ƒç”¨è¿‡undeclared......

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDI2OGNhNjkzOGIyYTY4ZjkxYmE2NTEwOTA5OTEyZWVfcENYUXcwaWtNcTNhTEJiQWlyc0xWeVBoMkJpSnBkSmZfVG9rZW46Vkt2ZmJKYzJTb25rdlZ4OTEzaWNsZ3hwbmxmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjFkNTA3MWQ1Y2MzYTdiM2FmOTgzY2M4NGNmYTI1ZGJfNHJpVFRBUlNwWWRRQkJGVDZNTFFQNnNhMzI0UEpjc1FfVG9rZW46VkJWbmJHczY4b3k2ZTR4V0d1VWNobDB1bkhiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

5.  # ROS2å…¶ä»–é€šä¿¡æœºåˆ¶
    

1.  ## æ¦‚è¿°
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDRkZDY5MjM2OWQ1MzUyZDAwZGNjMzcxNzcyY2Q0ZjhfM09uYmRIT3J3OGJ2Y0JjQlAzVHM4eXhIOFlGZ25TOWtfVG9rZW46UkpaUWJBVEpQb1hBSEF4N0I5VWNMZWllbmhjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NGNiMzM5YWFmNjI0NDkxYTBkMTBkYTZhNjEyYzUyMjVfM3ZIVFdBM25SZGN0QlA5Y2JMUm9TTlR1NGN6TEI3UGxfVG9rZW46WkpCTGJ0NEJObzFZdkx4blEzN2Nzd0kwbk9mXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWYwNzEwZjhjOWE3NmZhNDc2NWU3NmQ1ODc2MTE1NDFfeXhZdHZtSGF4S2QxcWhWTWc5cTVpU3ByU21LV3ZJNVZfVG9rZW46VnBuM2JDYzNKb3dvWHB4akQwZ2MxOHM0bkZiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¸åŒè®¾å¤‡ä¹‹é—´çš„é€šä¿¡ï¼Œæ˜¯é€šè¿‡åˆ†å¸ƒå¼æ¥å®ç°çš„ã€‚

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjA5NThjMjU0ZTQ5NWU0YjdhYTMyYjJhNGQ0MTBhY2JfSmFxbmh4MWpIcVRQRnRleE5BMGhvNlZWdWhXc1JLeDVfVG9rZW46SG5vUGI4cEdlb0pYZDV4UFVVYWNHa1RHblJnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmM0NmFkYWVkZjA2N2ZjODNhMGU3M2ZiMTgwZTVjNzRfSnZ6ZVgxbTRHa2NCbDg5R2FpZlU3dU1nczd5Q250TExfVG9rZW46RzdkNGJRcDNLb1loRmJ4blo0bWMwWW5jblJmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTBjZmI4OWNkOWFjMzEwOWRjYmE2MGExOWVjYzA5ZWVfMGdDWE5lZWYybUpFazVDT003clBMc294Z3hSMnBZMHNfVG9rZW46WHU4Y2JrS1Y3b1J6dDl4bDJpSGNrWlZHblJoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

é•œåƒç‹å…«

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2NlYmQwY2ZjZGNjMThkNjUzN2EwOTY2YTA3YjA0OWFfd1B0U2dYT1k5T3FHektWdDZZRzNoUlRlY1JYNEFPMDVfVG9rZW46Q1VPaGJmaExEb1BVNGt4RHRCdmMxcUpSbjljXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmFiMGZjMWUwOTAzYTYzNzA3YTBkNDlmNDA4NjkwYThfQXRua2ZoY3g1ekJkVzk0STNwM0hLY2RnYUJIT1JZRHJfVG9rZW46RU1sdmJHU21Rb2o2VDR4WVh1b2NaRFgwbmZiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWJmOTViM2EyNWZlMDM3OGU3NGNiYmU5ODIxNDAxZjlfbjJBSEtaTEhubjRHeTZuQWR0WVN0aDM3OVlkWWNiVktfVG9rZW46S1ZBdmJKTVlIb0tsc1B4N2FLVGNvdk5LbktnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

2.  ## åˆ†å¸ƒå¼æ­å»º
    

**åœºæ™¯**

åœ¨è®¸å¤šæœºå™¨äººç›¸å…³çš„åº”ç”¨åœºæ™¯ä¸­éƒ½æ¶‰åŠåˆ°å¤šå°ROS2è®¾å¤‡åä½œï¼Œæ¯”å¦‚ï¼šæ— äººè½¦ç¼–é˜Ÿã€æ— äººæœºç¼–é˜Ÿã€è¿œç¨‹æ§åˆ¶ç­‰ç­‰ï¼Œé‚£ä¹ˆä¸åŒçš„ROS2è®¾å¤‡ä¹‹é—´æ˜¯å¦‚ä½•å®ç°é€šä¿¡çš„å‘¢ï¼Ÿ

**æ¦‚å¿µ**

åˆ†å¸ƒå¼é€šä¿¡æ˜¯æŒ‡å¯ä»¥é€šè¿‡ç½‘ç»œåœ¨ä¸åŒä¸»æœºä¹‹é—´å®ç°æ•°æ®äº¤äº’çš„ä¸€ç§é€šä¿¡ç­–ç•¥ã€‚

ROS2æœ¬èº«æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼é€šä¿¡æ¡†æ¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„å®ç°ä¸åŒè®¾å¤‡ä¹‹é—´çš„é€šä¿¡ï¼ŒROS2æ‰€åŸºäºçš„ä¸­é—´ä»¶æ˜¯DDSï¼Œå½“å¤„äºåŒä¸€ç½‘ç»œä¸­æ—¶ï¼Œé€šè¿‡DDSçš„åŸŸIDæœºåˆ¶(ROS\_DOMAIN\_ID)å¯ä»¥å®ç°åˆ†å¸ƒå¼é€šä¿¡ï¼Œå¤§è‡´æµç¨‹æ˜¯ï¼šåœ¨å¯åŠ¨èŠ‚ç‚¹ä¹‹å‰ï¼Œå¯ä»¥è®¾ç½®åŸŸIDçš„å€¼ï¼Œä¸åŒèŠ‚ç‚¹å¦‚æœåŸŸIDç›¸åŒï¼Œé‚£ä¹ˆå¯ä»¥è‡ªç”±å‘ç°å¹¶é€šä¿¡ï¼Œåä¹‹ï¼Œå¦‚æœåŸŸIDå€¼ä¸åŒï¼Œåˆ™ä¸èƒ½å®ç°ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰èŠ‚ç‚¹å¯åŠ¨æ—¶æ‰€ä½¿ç”¨çš„åŸŸIDä¸º0ï¼Œæ¢è¨€ä¹‹ï¼Œåªè¦ä¿è¯åœ¨åŒä¸€ç½‘ç»œï¼Œä½ ä¸éœ€è¦åšä»»ä½•é…ç½®ï¼Œä¸åŒROS2è®¾å¤‡ä¸Šçš„ä¸åŒèŠ‚ç‚¹å³å¯å®ç°åˆ†å¸ƒå¼é€šä¿¡ã€‚

**ä½œç”¨**

åˆ†å¸ƒå¼é€šä¿¡çš„åº”ç”¨åœºæ™¯æ˜¯è¾ƒä¸ºå¹¿æ³›çš„ï¼Œå¦‚ä¸Šæ‰€è¿°ï¼šæœºå™¨äººç¼–é˜Ÿæ—¶ï¼Œæœºå™¨äººå¯èƒ½éœ€è¦è·å–å‘¨è¾¹æœºå™¨äººçš„é€Ÿåº¦ã€ä½ç½®ã€è¿è¡Œè½¨è¿¹çš„ç›¸å…³ä¿¡æ¯ï¼Œè¿œç¨‹æ§åˆ¶æ—¶ï¼Œåˆ™å¯èƒ½éœ€è¦æ§åˆ¶ç«¯è·å–æœºå™¨äººé‡‡é›†çš„ç¯å¢ƒä¿¡æ¯å¹¶ä¸‹å‘æ§åˆ¶æŒ‡ä»¤...... è¿™äº›æ•°æ®çš„äº¤äº’éƒ½ä¾èµ–äºåˆ†å¸ƒå¼é€šä¿¡ã€‚

* * *

**å®ç°**

å¤šæœºé€šä¿¡æ—¶ï¼Œå¯ä»¥é€šè¿‡åŸŸIDå¯¹èŠ‚ç‚¹è¿›è¡Œåˆ†ç»„ï¼Œç»„å†…çš„èŠ‚ç‚¹ä¹‹é—´å¯ä»¥è‡ªç”±é€šä¿¡ï¼Œä¸åŒç»„ä¹‹é—´çš„èŠ‚ç‚¹åˆ™ä¸å¯é€šä¿¡ã€‚å¦‚æœæ‰€æœ‰èŠ‚ç‚¹éƒ½å±äºåŒä¸€ç»„ï¼Œé‚£ä¹ˆç›´æ¥ä½¿ç”¨é»˜è®¤åŸŸIDå³å¯ï¼Œå¦‚æœè¦å°†ä¸åŒèŠ‚ç‚¹åˆ’åˆ†ä¸ºå¤šä¸ªç»„ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨ç»ˆç«¯ä¸­å¯åŠ¨èŠ‚ç‚¹å‰è®¾ç½®è¯¥èŠ‚ç‚¹çš„åŸŸID(æ¯”å¦‚è®¾ç½®ä¸º6)ï¼Œå…·ä½“æ‰§è¡Œå‘½ä»¤ä¸ºï¼š

```Bash
export ROS_DOMAIN_ID=6
```

ä¸Šè¿°æŒ‡ä»¤æ‰§è¡Œåï¼Œè¯¥èŠ‚ç‚¹å°†è¢«åˆ’åˆ†åˆ°IDä¸º6çš„åŸŸå†…ã€‚

å¦‚æœè¦ä¸ºå½“å‰è®¾å¤‡ä¸‹çš„æ‰€æœ‰èŠ‚ç‚¹è®¾ç½®ç»Ÿä¸€çš„åŸŸIDï¼Œé‚£ä¹ˆå¯ä»¥æ‰§è¡Œå¦‚ä¸‹æŒ‡ä»¤ï¼š

```Bash
echo "export ROS_DOMAIN_ID=6" >> ~/.bashrc
```

æ‰§è¡Œå®Œæ¯•åå†é‡æ–°å¯åŠ¨ç»ˆç«¯ï¼Œè¿è¡Œçš„æ‰€æœ‰èŠ‚ç‚¹å°†è‡ªåŠ¨è¢«åˆ’åˆ†åˆ°IDä¸º6çš„åŸŸå†…ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTg0OWFhZDJhZjI2NTA0MDRkZmVkN2ZlY2U3ZjMyNGNfZU5LYkFjUjhRaG1EbTdaQzhxcmpwSUgwc1ZlMGlQTTNfVG9rZW46THhIZGJOSzZTb2NVVFp4VzZyZ2NoQTUxbndlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

é»˜è®¤åŸŸIDæ˜¯0ï¼ŒåŸŸIDä¸ä¸€æ ·ï¼Œæ— æ³•äº’ç›¸é€šä¿¡ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjRkM2FlMGM1NTk2ZTIzMmFkNTMxYmMxZGEyZDE3NDVfa3FXWnRpZlI4WFlmNm9sSVNDWTFXYW4zTkxpQ3dnMlBfVG9rZW46Qkdob2JFRTBDb2N0cm14b1VwemMxYTJybktBXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NGY3OGNiMDUyMTRiNWYwMDU0NTk2ZmQ3ZTY5ZmQ0MmFfQ1VVY2RzaGRzQnNsbUUwd3RYSDJuRVpnYXdFRXJRV2NfVG9rZW46VEF5U2JmeWExb3NXUDh4N29LdmNQY1hJblBmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

IDä¸ä¸€æ ·å°±æ— æ³•æ­£å¸¸é€šä¿¡ï¼Œå’Œåœ¨ROS1å†…éœ€è¦æŒ‡å®šROS Masterä¸€æ ·ã€‚

**æ³¨æ„**

åœ¨è®¾ç½®ROS\_DOMAIN\_IDçš„å€¼æ—¶å¹¶ä¸æ˜¯éšæ„çš„ï¼Œä¹Ÿæ˜¯æœ‰ä¸€å®šçº¦æŸçš„ï¼š

1.  å»ºè®®ROS\_DOMAIN\_IDçš„å–å€¼åœ¨\[0,101\] ä¹‹é—´ï¼ŒåŒ…å«0å’Œ101ï¼›
    
2.  æ¯ä¸ªåŸŸIDå†…çš„èŠ‚ç‚¹æ€»æ•°æ˜¯æœ‰é™åˆ¶çš„ï¼Œéœ€è¦å°äºç­‰äº120ä¸ªï¼›
    
3.  å¦‚æœåŸŸIDä¸º101ï¼Œé‚£ä¹ˆè¯¥åŸŸçš„èŠ‚ç‚¹æ€»æ•°éœ€è¦å°äºç­‰äº54ä¸ªã€‚
    

**DDS åŸŸ ID å€¼çš„è®¡ç®—è§„åˆ™**

åŸŸIDå€¼çš„ç›¸å…³è®¡ç®—è§„åˆ™å¦‚ä¸‹ï¼š

1.  DDSæ˜¯åŸºäºTCP/IPæˆ–UDP/IPç½‘ç»œé€šä¿¡åè®®çš„ï¼Œç½‘ç»œé€šä¿¡æ—¶éœ€è¦æŒ‡å®šç«¯å£å·ï¼Œç«¯å£å·ç”±2ä¸ªå­—èŠ‚çš„æ— ç¬¦å·æ•´æ•°è¡¨ç¤ºï¼Œå…¶å–å€¼èŒƒå›´åœ¨\[0,65535\]ä¹‹é—´ï¼›
    
2.  ç«¯å£å·çš„åˆ†é…ä¹Ÿæ˜¯æœ‰å…¶è§„åˆ™çš„ï¼Œå¹¶éå¯ä»¥ä»»æ„ä½¿ç”¨çš„ï¼Œæ ¹æ®DDSåè®®è§„å®šä»¥7400ä½œä¸ºèµ·å§‹ç«¯å£ï¼Œä¹Ÿå³å¯ç”¨ç«¯å£ä¸º\[7400,65535\]ï¼Œåˆå·²çŸ¥æŒ‰ç…§DDSåè®®é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯ä¸ªåŸŸIDå ç”¨250ä¸ªç«¯å£ï¼Œé‚£ä¹ˆåŸŸIDçš„ä¸ªæ•°ä¸ºï¼š(65535-7400)/250 = 232(ä¸ª)ï¼Œå¯¹åº”çš„å…¶å–å€¼èŒƒå›´ä¸º\[0,231\]ï¼›
    
3.  æ“ä½œç³»ç»Ÿè¿˜ä¼šè®¾ç½®ä¸€äº›é¢„ç•™ç«¯å£ï¼Œåœ¨DDSä¸­ä½¿ç”¨ç«¯å£æ—¶ï¼Œè¿˜éœ€è¦é¿å¼€è¿™äº›é¢„ç•™ç«¯å£ï¼Œä»¥å…ä½¿ç”¨ä¸­äº§ç”Ÿå†²çªï¼Œä¸åŒçš„æ“ä½œç³»ç»Ÿé¢„ç•™ç«¯å£åˆæœ‰æ‰€å·®å¼‚ï¼Œå…¶æœ€ç»ˆç»“æœæ˜¯ï¼Œåœ¨Linuxä¸‹ï¼Œå¯ç”¨çš„åŸŸIDä¸º\[0,101\]ä¸\[215-231\]ï¼Œåœ¨Windowså’ŒMacä¸­å¯ç”¨çš„åŸŸIDä¸º\[0,166\]ï¼Œç»¼ä¸Šï¼Œä¸ºäº†å…¼å®¹å¤šå¹³å°ï¼Œå»ºè®®åŸŸIDåœ¨\[0,101\] èŒƒå›´å†…å–å€¼ã€‚
    
4.  æ¯ä¸ªåŸŸIDé»˜è®¤å ç”¨250ä¸ªç«¯å£ï¼Œä¸”æ¯ä¸ªROS2èŠ‚ç‚¹éœ€è¦å ç”¨ä¸¤ä¸ªç«¯å£ï¼Œå¦å¤–ï¼ŒæŒ‰ç…§DDSåè®®æ¯ä¸ªåŸŸIDçš„ç«¯å£æ®µå†…ï¼Œç¬¬1ã€2ä¸ªç«¯å£æ˜¯Discovery Multicastç«¯å£ä¸User Multicastç«¯å£ï¼Œä»ç¬¬11ã€12ä¸ªç«¯å£å¼€å§‹æ˜¯åŸŸå†…ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„Discovery Unicastç«¯å£ä¸User Unicastï¼Œåç»­èŠ‚ç‚¹æ‰€å ç”¨ç«¯å£ä¾æ¬¡é¡ºå»¶ï¼Œé‚£ä¹ˆä¸€ä¸ªåŸŸIDä¸­çš„æœ€å¤§èŠ‚ç‚¹ä¸ªæ•°ä¸ºï¼š(250-10)/2 = 120(ä¸ª)ï¼›
    
5.  ç‰¹æ®Šæƒ…å†µï¼šåŸŸIDå€¼ä¸º101æ—¶ï¼Œå…¶ååŠæ®µç«¯å£å±äºæ“ä½œç³»ç»Ÿçš„é¢„ç•™ç«¯å£ï¼Œå…¶èŠ‚ç‚¹æœ€å¤§ä¸ªæ•°ä¸º54ä¸ªã€‚
    

ä¸Šè¿°è®¡ç®—è§„åˆ™äº†è§£å³å¯ã€‚

```Plain Text
åŸŸ ID ä¸èŠ‚ç‚¹æ‰€å ç”¨ç«¯å£ç¤ºæ„

Domain ID:      0
Participant ID: 0

Discovery Multicast Port: 7400
User Multicast Port:      7401
Discovery Unicast Port:   7410
User Unicast Port:        7411

---

Domain ID:      1
Participant ID: 2
Discovery Multicast Port: 7650
User Multicast Port:      7651
Discovery Unicast Port:   7664
User Unicast Port:        7665
```

Domain IDæ˜¯æŒ‡åŸŸID

Participant IDæ˜¯å‚ä¸ç»„IDï¼Œæ˜¯æŒ‡è¯¥åŸŸå†…çš„ç¬¬å‡ ä¸ªèŠ‚ç‚¹

Discovery Multicast Portä¸»å‘ç°ç«¯å£ï¼ŒDDSè§„å®šï¼Œç«¯å£åº”ä»7400å¼€å§‹

User Multicast Portç”¨æˆ·å¹¿æ’­ç«¯å£ï¼Œ

Discovery Unicast Portå•æ’­å‘ç°ç«¯å£ï¼Œ7410æ˜¯ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å¼€å§‹ä½¿ç”¨çš„Discovery Unicastç«¯å£ï¼Œå› ä¸ºDDSè§„å®šçš„ï¼Œç¬¬11ä¸ªç«¯å£æ‰æ˜¯ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„Discovery Unicastç«¯å£ã€‚

User Unicast Portå•æ’­ç”¨æˆ·ç«¯å£ï¼Œ7411æ‰æ˜¯ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å¼€å§‹ä½¿ç”¨çš„User Unicastç«¯å£ï¼Œå› ä¸ºDDSè§„å®šçš„ï¼Œç¬¬12ä¸ªç«¯å£æ‰æ˜¯ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„User Unicastç«¯å£ã€‚

Discovery Unicast Portå’ŒUser Unicast Portæ˜¯ç¬¬ä¸€ä¸ªèŠ‚ç‚¹æ‰€å ç”¨çš„ç«¯å£ï¼Œæ‰€ä»¥ä¸€å…±å ç”¨äº†ä¿©ç«¯å£ã€‚

å¦‚æœDomain IDä¸å˜è¿˜ä¸º0ï¼ŒParticipant IDå˜æˆ1çš„è¯ï¼Œé‚£ä¹ˆä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„Discovery Unicast Portä¸º7412ï¼ŒUser Unicast Portä¸º7413ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTYxY2IxYTI0YzExZmRhYTNjZWRhOGI1MTQ3OGRmZWJfWFlPR0pVSTFWNFdoRFNFcVh4bG5GdmZMdExFdVFqNlhfVG9rZW46UVpuTmJtSFJsb1A4bkl4a2JvdGNjOUgxblpjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä»¥æ­¤ç±»æ¨ã€‚

ä¸€ä¸ªDomain IDå ç”¨250ä¸ªç«¯å£ï¼Œæ‰€ä»¥å½“Domain IDä¸º1çš„æ—¶å€™ï¼ŒDiscovery Unicast Portåº”è¯¥æ˜¯7650ã€‚

è¿™æ˜¯ç¬¬ä¸‰ä¸ªèŠ‚ç‚¹ï¼Œæ‰€ä»¥æ˜¯7664å’Œ7665ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjViODk3ZWUyMWI3NGRmZjkyZDQ4OWRmZjFjN2ZlZGRfa2t1bmlyQ0ZQU05qSU1BZ2YyNzNHQUpOQlEyUVNLWDVfVG9rZW46UTFxOWJLRjZMbzFsWFR4SUhPdWNiNlVRbm1lXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å®è·µï¼šåœ¨æ ‘è“æ´¾5ä¸Šè·‘ä¸€ä¸ªROS2 Jazzyå¼€å¯é”®ç›˜æ§åˆ¶èŠ‚ç‚¹ï¼Œç„¶ååœ¨ç”µè„‘å®ä½“æœºLinux(æˆ–è€…åœ¨Dockeré‡Œè·‘ä¹Ÿè¡Œï¼Œä½†è¦è®¾ç½®å¥½ç½‘ç»œ)é‡Œè·‘ä¸€ä¸ªROS2 Humbleï¼Œå¹¶æ‰“å¼€ä¹Œé¾Ÿæ˜¾ç¤ºèŠ‚ç‚¹ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWQyOGRiYjBiZDY4YjVjZTVjNmVjODFjNDhhMjA4NzVfVUZGaXBJTERLMjczSG1KZUZHWWpySnhrdFN1SEZhdXRfVG9rZW46SjlGNGJERm1Db0pDN3F4d1VPMmNLRWdublBlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¼šå‘ç°æ˜¯å¯ä»¥æ­£å¸¸é€šä¿¡çš„ã€‚

  

2.  ## å·¥ä½œç©ºé—´è¦†ç›–
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MWM2MTFlNjEwY2UyMGEyYmY0YWFjMmRjMjFjNDI1ODlfSFZXeDlBNVJIRkJXY1dKdkxNbG1zU3I5bUVQZXJXakFfVG9rZW46VldXWGJiVXdub3ozVmx4OGZBV2NoeVd3bnRlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmMwNDMwNjAyM2MzZGU2OGRmNjc3YWNiZThkNjAxNmNfelpGVG9ZczRpdkdka2VGVnBsOEpVdVlyREZER0w3d1BfVG9rZW46UjFPSmJmWTNIbzY0Tmh4TFd3R2NPWnA1blh2XzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

**æ²¡ä»€ä¹ˆç”¨ï¼Œå»ºè®®ä¸è¦ä½¿ç”¨**

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTJjZDhiYjA4MWI0MDQxNzQwNWYzODRlOThkN2MwZjlfZ0VEa3UyMFpRM2g0WUxMUHJnSnFuV0pKb3FpU3pVc1hfVG9rZW46U2RrRWJzczd6b2FtRlp4WDYzcmM2N0RzbnJkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDk1ZTkyNDUwMzFhNDdjYjBhMzBjOTFjMTRlODliYTlfdFk5SGtGbjVCcGx6UHpUbjI2NFNYVXJqMkJuOGpQSllfVG9rZW46Q0hDWWJTbVNpb21lMmN4S0FFeGM3QnhvbkNjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2VmZGEwMWE1ZmE1ZmM5NDBlOTZjNGJmYzVmNzFmMThfVFkzWHdJN1M4ZVFMVW9EcjdkdFBSZXh2dEh3enhQc2VfVG9rZW46SWpCbWJVU2RNb1M4TFd4emhaZmM0N3JIbkdkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™ä¸ªæ˜¯å’Œä½ çš„bashrcæ–‡ä»¶é‡Œï¼ŒåŠ è½½bashæ–‡ä»¶çš„é¡ºåºæœ‰å…³ï¼Œè°æœ€ååŠ è½½ï¼Œè°å°±ä¼šè¿è¡Œï¼Œä¹Ÿå°±æ˜¯æœ€é«˜ä¼˜å…ˆçº§ã€‚é™¤äº†ROS2æœ¬èº«è‡ªå¸¦çš„bashï¼Œè¿™ä¸ªbashæ˜¯ä¸è®ºåœ¨å“ªåŠ è½½ï¼Œéƒ½æ˜¯æœ€ä½ä¼˜å…ˆçº§ã€‚

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWY5YjAxOGQxZjY0MjNhNWUyYjFjMWY5MzgxMTRiMDRfMmtaUTFEUFZ4alo3c3plc3JtSnJwVFVvR0NyTE56TXNfVG9rZW46SzVaVmI5U3JLbzFZaFR4WWhiNWN2QkxRbklkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWVmM2RiY2FjN2JiN2RhOWVlNTczMDg0Yjc3OTE3NDNfdTB1UXZuUGo1ejN2VlBXRks0MENJVnBiUmoxekFlQmJfVG9rZW46Q1hGQWJ4NUVub1lYaUR4Zm83SWN4UkVpbmJiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTExYjUyNjQzMDY3NjAxODcxZDQwYmY4ODJmNjc5ZjVfdDZ3R3dTU3BiMWg0RkxwS0d0Z21uQW03aG5tZW9ZYm1fVG9rZW46S3N1cWJIVjJIb2g2U2N4eTdJeGN0cTc1bmlmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

3.  ## å…ƒåŠŸèƒ½åŒ…
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2M2NGZkNGViYTNlMjNkZDI3MDZmYmE1NjEzNjgxODdfRG9UMTZmTDAyMnNqY1pTbHM2U1J5YW5FSjZWUGJmb3JfVG9rZW46TWlzWGJWYW9Mb3I5a3B4OTZIZ2NKejdWbmtoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTI0OGIxNzY2NjcxYWJiMjg1NjUwNWQ1NWQxYmYwM2JfbVYwY2VheFlEcXJWcWJuMmVPNUVGN1JnelVrcU5Zd2lfVG9rZW46V1l4c2IzeHoyb3dqa0l4NDE1dmNLUmpQbmhlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

distroå°±æ˜¯å‘è¡Œç‰ˆçš„æ„æ€

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWI3ZWYzZjQxNjNlMGFlMjJlOThiMWU2NzEyMTMzNWJfeTRYTzd3OE5wQU1tbDloQmZmNkROMlN1QkF5aVBXeExfVG9rZW46SUdRQmJWYzc2b05LbjZ4ZE1IaWM4bkxJblRoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzYxNzUyMDg2YjFhYjMwNjk0ZTNkYTI0MmMwMjhjY2JfcldwM3NEd3ZFVWlJMlowNGV6Q2hGNjV5ZHB5bVVXZXBfVG9rZW46QXVscGJ1N2Rqb0xEaHp4T3JjamNxRVljblFiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

\--build-typeé»˜è®¤C++ï¼Œ

\--dependenté»˜è®¤æ— ï¼Œ

\--node-nameæœ¬èº«æ˜¯è™šåŒ…ï¼Œæ‰€ä»¥ä¹Ÿæ— éœ€è®¾ç½®ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDY1ZGQ1YmM0ZGE4ODdhZmRhZTI3YWQzODNlNmFiMGNfeGJaMjFPek9xa1J4T0d4VUxqdXA2YjM1VmhPdHVWbHRfVG9rZW46T21RQWJla0ZLb2pYVFF4NWRmWGNRTGNUbjc1XzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

CmakeListsæ— éœ€ä¿®æ”¹

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzFmMDA5MWVhZGJiNmY2NWM1ZDE4OGQwNmU2MzhhYzVfZ0ExYmZTaTBLS1FPa0RBcU9XT2REY3RBSTV0S2FVNVBfVG9rZW46RUlDU2JtcnVvb1B6bzN4UUFTcWN4UEdBbjdnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å…ˆæŠŠ12ï¼Œ13è¡Œåˆ é™¤

<exec\_depend>xxxxxx</exec\_depend>

æ‰€è¦ä¾èµ–çš„åŠŸèƒ½åŒ…å

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzdiNmI3Y2ZjNGZhNDVhMGE0NGQyZjgyMzI4ZmM5OGNfbFFHNHBBQUpnWVdJNmRDc0k0Y3JjUGw5NllzRGxwaTlfVG9rZW46WXNNM2JWbzZQb0lrTnB4S2l6RmNXTzJLbkplXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzNlOWUxNDVmZWJmMjIyYjRmNGFmODA1YWMxMjY1YWNfUWRNaWNJbmluSGx2czBHU2FEWTRBc3VxSnVUN2ZkazRfVG9rZW46R1lhSmJpQWhKb1IyNjZ4YldmOGNTb3VRblFiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MWU2Njg4Njc2NDE3MjAxNjQ2YzYxMGY4OTM1ZDZkNDdfSmFxcjEza0s2ZlF4emp4Vk9FSFJYMEI4TmtFeTFjdVpfVG9rZW46U3M5M2I1cXdxb1BVUzh4SnZ2c2NIQUJ5bmhiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

ä»¥åå¯èƒ½éœ€è¦çš„å…ƒåŠŸèƒ½åŒ…ï¼š

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2I5YjVlMzYyNGJlZmVlYmI0MGQwN2ZiYTExYTY4OTBfNXNSZ3NPajZoa0hPYnE0T3BFWER4OGdwQkNtTkZHQkFfVG9rZW46WXVGQmJ6ZU13b0duR2l4ZGIzTGNxOXZObnRkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™ä¸ªåŠŸèƒ½åŒ…æ˜¯å¯¼èˆªç›¸å…³çš„

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjVlNzY3NGMzYTBkMDc3MDMyZGYwOTAyYzEyMTRlNTVfdEpJMnZWWDBSYklJS3A2czNrWFN4YUJvRFljUkR5NGhfVG9rZW46TVdjOGJrS2pjb0pNdVZ4RWd2N2NwcFgybldnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™ä¸ªå°±æ˜¯ä¸ªå…ƒåŠŸèƒ½åŒ…

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWUxZjhlMWEyOGM3Njg4OWQyNzAwZTM3NDNmMDRiNjZfM3FUOWJ6eU1VME1YaUp4QlM5RmVCWlN6N0p0VjVPT0pfVG9rZW46RFNXV2JpWm9sb1FET1Z4RllPWWNaUDljbk1oXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

åªæœ‰é…ç½®æ–‡ä»¶ï¼Œæ²¡æœ‰å…¶ä»–å®è´¨æ€§å®ç°

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzBhZjE2NmJlYjczZTI2ZmQxYjllMmZkNGVmNjEyMzFfdzdabnNoMXNtcTBSUnRKVnMyNWI2SVZoT1FYWFVTMWZfVG9rZW46QXZEbmJycXlPb3J1ekV4aDhpWWNWeVdCblhlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmFmMDA0Y2RmOTM4ZjIyNWYzYjdjZjRmNGUwYWRiYjBfaWZhcWx2eWJCeWpIOHo3ekpLUHhGM0xFUlY4RVV5eHFfVG9rZW46RHliamJJN1BUbzJnUFB4RXJRdmM1dTV4blpiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGFiYWRjZjc0ZmViOTgzZDM3YTk3OTBiNGQzOTNjMTVfcFV6N2poVGcyWUk1RXd1Mk9tbGVMWWI5Ym5HOFZTRjhfVG9rZW46TkZTbGI3UWZhb1VjYUR4OWFwa2NEWG5Jbm5oXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å…ƒåŠŸèƒ½åŒ…çš„ä½œç”¨å°±æ˜¯æ–¹ä¾¿å®‰è£…ï¼ŒæŠŠè‡ªå·±çš„ä¸œè¥¿æ‰“åŒ…ï¼Œå¯ä»¥å…±äº«åˆ°ROS2ç¤¾åŒºã€‚ä¹Ÿæ–¹ä¾¿å®‰è£…åˆ«äººçš„ä¸œè¥¿ã€‚

4.  ## èŠ‚ç‚¹é‡å
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzAxNTVmN2VhZDRmZmU0ZmEzNGIzZTg5MzA2NDcwNmNfdW9oWDhadjBMbWhuMGo4TTFWVGtocXFvWVJCeHBiY0NfVG9rZW46U2xYaGJINUN1b29hOW94cEY5R2NycTRzbnRjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDU0NGY3NDNhYWVmNDZiODYzNTJiNGY2OTQ5ZWRmMTFfSnViQjZndGRmcUNYSG96Y3Y1V3l2VXlaWFRtVzJhbHZfVG9rZW46R0ZMZ2IwS3lSb2JyZVR4a0RBS2NQcTlObk5jXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è€Œä¸”èŠ‚ç‚¹åç§°éƒ½æ˜¯ä¸€è‡´çš„ï¼Œå›¾ä¸­æœ‰ä¸ª<2>ï¼Œè¿™æ˜¯æ“ä½œç³»ç»Ÿç»™çš„æ ‡å·ï¼Œå…¶ä»–çš„æ“ä½œç³»ç»Ÿæ˜¯æ²¡æœ‰è¿™ä¸ªæ ‡å·çš„ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGY0NjgyOTgxZGQ0NjM2MjExODZlMjI2MTYxODMzMGJfSGZwaWxPd3BBaUozeXdONXVxdFRJSmhqa1FtYjdsckVfVG9rZW46WXVBV2JSSm5Tb0hKT1V4SDV5emNQQWo0bmplXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Bash
rqt_graph
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzZiOTBjODJiMGNmZThhYmU1NWE5YjgwZGY4NjJjNmVfQ2lySWJ1Q2swakUyY0EzV1BkYWI2WExlUnViSWthRG1fVG9rZW46Snd2VWJhRjBUb1hrYW14cmVVaGNsd2dLblRoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä»–åªæ˜¾ç¤ºä¸€ä¸ªturtlesimï¼Œå®é™…ä¸Šæˆ‘ä»¬æ˜¯ä½¿ç”¨äº†ä¸¤ä¸ªturtlesimçš„ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzVhMDQ0MjkwZGRhZGFmMjllN2Y4YmM1N2NhMjYxN2ZfV24yUWZ5QmJOaXhvUWRhTlFwdzd2MEJpb3V4ZW11bjJfVG9rZW46WXdLSGJDY0xXb3pGMU94SThzQmN6a01BblZmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™æ ·è™½ç„¶éƒ½æ˜¾ç¤ºäº†ï¼Œä½†æ˜¯æ˜¯ä¸€æ¨¡ä¸€æ ·çš„åå­—ï¼Œå®¹æ˜“æ··æ·†ï¼Œè€Œä¸”ä¸Šé¢ä¹Ÿç»™é‡åè­¦å‘Šäº†ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzBlMjRhMWYzOWVkMDVhNGZmYzExOTRmZDQ4ZjZhMWVfeDMzY2dkeko3Tnc4OHR5a1RFZE5KZk8yYUlJb3JETE1fVG9rZW46V29UTmJ2QnFCb3dkdFN4WmhwU2NyQzNhblVnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTMxMDYwZTE2MmM2N2VkMGFkMTAzYmYyNjM1MzBhOTlfUkFmS3dBY2NTMzJIR2pUdUxMVXNxQ1lnbWNYdlVndFJfVG9rZW46RzRaeWJYODdHb0RDVW54T0p4VWN0Yk96bkRiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODdhOWVjYjJhYTY0ZDg3ZWZhZWE1ZmJhMDhhZmEzNmVfMkJQUkRNVjVCNVdjVUdMN29MTnBsSGFUUEtzNjhVSExfVG9rZW46SndBM2IwSnFJb3U2Tk54SlRqcWNLMHVTbkpnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¦ä¹ˆèµ·åˆ«åï¼šç‹å¤§å®ï¼Œç‹å°å®

è¦ä¹ˆåŠ å‘½åç©ºé—´ï¼š æ¯›é©´å­å®¶çš„ç‹å®ï¼ŒæäºŒç‹—å®¶çš„ç‹å®

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWJlNGIyYTQ5OTlhOGI3NzIyZWY5NjJiNTU2M2QyN2JfelJUWHVaaHA1OWk2ZEt4RmxEYlJHZVVrNzFEWmpmZkdfVG9rZW46Rm51U2JRazVib05VeVJ4TG5KOWNDT1NLbnZnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDQwZmU1MDIwNjUyNDFhNjQ0ZGNiMzQyZDljODZiZGFfVlRENE4xNmpUR3BtNDlPQWxhTXNFZFB5aXd6VE5QUkxfVG9rZW46S3RMVGJwdFpzb1hkV3h4ZDVSU2NYMHVybnhnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjhlNmQ1ZDcwNTJmMWE1ZGY2MWNkZmZjMzIyYzc0OTlfS3U1emJseG1CSmNGaDJhVmpyTGJ4ZDNock5UZzRyRUhfVG9rZW46U3F1c2JQQzhSb3ZyazJ4c1dSb2NBZVY1bm1iXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Bash
ros2 run turtlesim turtlesim_node --ros-args --remap __ns:=/t1
```

ros2 run åŠŸèƒ½åŒ…å èŠ‚ç‚¹å --ros-args --remap \_\_ns:=/å‘½åç©ºé—´

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDYwNTNmNGRiNzBiOGY0MWUxZDY1YWU3MzQ5MGFlNmVfYnZwMGVxb2ExSzNFcW0zUTBCamtuaUU0MW9ITGhqTmpfVG9rZW46UWpLSWJJbkhKb2pLM294Q2doZ2NiUkNmbkpiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWE3Y2Y0MmJiYzExNWNmNDM2MjgxNWMzZTNkOGY1ZjlfcUJpbUhzNElWaEhpcG9zRTNQNEh2YWJQWWFhS2xRTTlfVG9rZW46TjlJdmJ1YWJCb0JWU3d4alFUY2M4ZEk1bmlkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Bash
ros2 run turtlesim turtlesim_node --ros-args --remap __name:=turtlesim2
```

ros2 run åŠŸèƒ½åŒ…å èŠ‚ç‚¹å --ros-args --remap \_\_name:=åˆ«å

or

ros2 run åŠŸèƒ½åŒ…å èŠ‚ç‚¹å --ros-args --remap \_\_node:=åˆ«å

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjEyMjlmNDJiYTQ0Yzc5MzhkYWNhZmFmYjNlODU3ZmNfWTllQzFsUjVZaUFVM2FvU0JxajJhYkhja2IwSHZyOGdfVG9rZW46Sld1UWIwR0lDb3YxTzh4czFpRmN2bXFSbkhmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzdlNTMyZDEyMjhiZDZkNDFhOTZjYzk3MjZkZDkwNDJfY2VsWXBoWDVHVnJkTVROckMzWjJhRTl1U3pYaGVBeldfVG9rZW46UEtHSGJEcllab0UwU1N4TkZKeWNVeGVUbmVjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjRiYTk4NTAxNzkyYjI2YWY3ZTg5Mzc1ZWQ2ODA3ZWZfMU15VmwzSGxZdU42Q2hmVHRrWGJIWEpndjBtNVRBcDdfVG9rZW46U2NXNWJXRUgwbzdyeEN4bkxQa2NYbUdSbnBiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Bash
ros2 pkg create cpp05_names --build-type ament_cmake --node-name demo01_names
```

èŠ‚ç‚¹åå¯ä»¥ä¸è®¾ç½®ï¼Œè¿™é‡Œè®¾ç½®ä¸»è¦æ˜¯ä¸ºä»¥åå­¦ä¹ åšé“ºå«ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzhmYzg4NDY3NDJiNzQwOGM3ZjYzZDQxZjhhOGQ1NzBfOWpOSDZoVHNSem82cGZtcnpTQ0ltRFgxVmxCVzd3allfVG9rZW46Q3VMZmJIQVR4bzltRUF4bmVHN2N4V1RFbm9kXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzQ5ZjlkZmM2MzAyYTQ2MzZiZDY5ZGQ1MzYwMWM1MDdfTEt4ZFNFcjRJWE85dkNzM3FyaW1PY1JhZmxjRGw4NGJfVG9rZW46RnRaMGJMZnJub09McUV4cElOamNTdThqbnloXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjZlNTZmZDBlMmNkNTZiYmY5NDgzMjEzYmUwZDk4YmFfOThCQWNNUXB3VUczUGFFendJbGIwMWtxU3JOWVRpbUdfVG9rZW46WmYxOGJzVWVxb3NSNnJ4ajR4V2NURDBPblFoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```CMake
install(DIRECTORY launch DESTINATION share/${PROJECT_NAME})
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDJkMjBlNzM5MGQzZjMzZjJlZDMyMDQxOTRiMjMxNjBfY0dzaTNOSWd4eDZQdGFOb0RWTGUxcElYZ2lUaWpsVXdfVG9rZW46RFZITmIxMklxb01lMlp4eEFrdmNYOU8ybjhkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjkxMDRhODg5Nzc2MjUyMmIxYzY3NTY3ZTAzYmNmYzBfM1Zsczk2cWJSYWxmaFFScmVsckU2N1VpWTI2SWlJVWdfVG9rZW46S1FQU2J0ZG95b1JXMWt4M1Ezd2NjN1AwbnFiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å…ˆå¯¼ä¿©åŒ…

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmEyZmQ3MmU2NjIzNjYwMWFkZmQwNTE1ZDNmNjhjZDNfTDZzdlNQTk42Z3dnVGVrTzRGZ2JrV1Q2dmFmZ1VxS2FfVG9rZW46TUFmSmJIenpKb0prcmt4aHlrTGNyWVdJbkNjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™ä¸ªLaunchDescriptionå¯¹è±¡é‡Œé¢å‘¢æ˜¯ä¸ªåˆ—è¡¨ï¼Œè¿™ä¸ªåˆ—è¡¨å°±æ˜¯å­˜å‚¨è¦å¯åŠ¨çš„è‹¥å¹²ä¸ªèŠ‚ç‚¹ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDkxMjY3OWE4MzMxNDk3N2RkODgzN2JjYTJkMjgwM2FfWTJyYnY0R2pOdktLUXlWOEJtQnRkaU5pOW5QeFpQWlpfVG9rZW46WnV6NWJMaWp1bzlGUXJ4OFRJSGNCMkprbmJjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjM5MGM3ZDYyNDY3Njk2Mzg0Y2E2YTcyYWI4N2M4ZDNfMGlXTmMzY1hLa3hmWlRhR05YSFMzcjFneEtqNTY3cllfVG9rZW46Q3IyZ2JsWDFEbzhSUlp4TTBBeGMwYkJqbk1lXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Python
from launch import LaunchDescription
from launch_ros.actions import Node


def generate_launch_description():
    return LaunchDescription([
        Node(package="turtlesim",executable="turtlesim_node",name="t1")
    ])
```

packageåŠŸèƒ½åŒ…å

executableèŠ‚ç‚¹å

nameåˆ«å

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjY0YzczODVkZmJkZjNjMmU1OTI4YzFjNTkxOGNmYjlfRW1qUGFhSlVXU0F1REtOS3JZU3pIRWVQSFEySk9mRHRfVG9rZW46V3pTeWJxem0yb3UwajN4ZUI1SGNMMmJjbkRlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Bash
ros2 launch cpp05_names demo01_names_launch.py
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODFhNjVmZTE5MzRmMDlhYWQ1NzU3ZWYyZmJiZWI4YTVfdGpKcWNHU0tPdm1xZkRDdUJlZHo1RHFRTHNsUnpVZmNfVG9rZW46UFoycWJwQXN3bzlMMWJ4TldXa2NROVg1bnloXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODZhN2RiMDE5OWIwMmQwNTY4M2MyYTQ1ODg0MWVkZWNfRmlYTFAzblkyRmpBaFVJSWlnTUVQWmdUOFNwRFNmSjlfVG9rZW46QjhWNmJFdU96b1BBbHd4WnZ3WmNaNWlKbkpnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTA5ZjE1Y2FmY2M4OTJmMzY3ZWFkNjE4NGNiNjRlNWRfZ1ZXVGtXMUttR3VZM0FWR1NjRmJZZFNJaEVMMTVUMGNfVG9rZW46TTYyNWI1SWFkbzZBT0t4U0trM2NrczVTbm02XzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWQ0ZmEwYjZkZTgyY2E0MzZlYTQyYzhkYWI2ZTA1NDFfSXpxN255N2l1Rnp2Y0RDdTR0OE5icHNCWkFrUEswUWhfVG9rZW46V25COGJMcWptb0d4Nm54M25ENmN0VE9DbmVnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ ¹æ ‡ç­¾æ˜¯Launch

å­é›†æ ‡ç­¾æ˜¯node

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGIyYzYwZTNhMDAwY2IxYmJhNTI3ZTg5ZjJjMDQ3NDVfaU1LS3hLMm5LSVNtVElGemxqRWw3OE1VSGVSZU1PSEVfVG9rZW46RnRFcmJTcE1vb2g5TjR4Z2c5b2NnRGlPbklmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```XML
<launch>
    <node pkg="turtlesim" exec="turtlesim_node" name="t1" />
</launch>
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODgwN2Y4NTdjN2YzMTQzM2RhMGJkYTE1OTViOGM4NWRfS3BOYm1INmdlMWdIVExueHBuRndsbEF6S0RqamFYeHBfVG9rZW46VHhMa2IyWFo3b2tKOVp4TUJHU2MwSnQzblVWXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Bash
ros2 launch cpp05_names demo02_names_launch.xml 
```

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MWExZTE5MmEwOTcwYWY2Yzc4YWE5NWI0YTBjYjJkZTVfc3FSSHVyMk9jUnhJYVA3OXYzRDJudlhSM1E3UE1iUGZfVG9rZW46SmE3cGJlemVpb0NvSzB4ZEZkN2NSRjJNbjRjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

yamlçš„æ ¹æ ‡ç­¾ä¹Ÿæ˜¯launch

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTMyMzc2NTlkODM3M2JhODViMjYwMzExMjVhNDM1ZmNfT0xlTTNCR0NPdGt1OVBnT3daeDE5QnFFdzVrMk1RVEJfVG9rZW46RmNDdmJvRVlob2o4QTB4VUYzbWNnQ1labk1iXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```YAML
launch:
node:
  pkg: "turtlesim"
  exec: "turtlesim_node"
  name: "t1"
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTBiOTU5NTI4YTFkYzUzM2FjOWRjOGIxYWVjMGU0Y2NfSUlnYnlFOFlaSE05YUNodno3a0tVRWw1b0xWa0JLYlBfVG9rZW46Q0ZheGJRbUxWb2plYnp4VG15a2NJWHBXbm5nXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Bash
ros2 launch cpp05_names demo03_names_launch.yaml 
```

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWY1M2VkODVmNGRlZjFjNTA5MTA1ZDU2OGQ4ZDcyMGRfbzJhamNObVFockszYzhua3g0Q2dnVkN4WnRHNU1lOFpfVG9rZW46TnFsUmJZS08yb0IzbFR4QjRIZ2NwRDRyblNkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjZmOTBjOWI3Mjc3MjkwZWVmZDRlNzkxM2JlZTFmYmNfdWx4RGdqbUE0Vmp4cXhrRDBJVUFHdHdsRENEb0g2aDVfVG9rZW46TUYzU2JXdnZUb0xHaWF4NmhRb2NiMEpxbnFmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTMzYTViN2E0NmYzODRjNmU4MDUwNzZlNzYyMTI2NjNfWDJ0bXBQdGlWRGRNZHhVOVFib0tQd2kwV2x5ZVV0VXZfVG9rZW46V2FRT2JMdUQ3b0ozbEV4SjlOWmNMZjFnblNlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

nameåˆ«å

namespaceå‘½åç©ºé—´

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGZkYzRjZjg0ODcxMDBkM2Y3ZDRhOWNmMWVmNWNhNmVfN2phSDZrQzE3eEZiM0tWWGJLMEp5MTZFaU9yeXBMMDhfVG9rZW46UHpocGJoWFdlb3Q0UTV4dWpVeGM3SXJ5bmtnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Python
from launch import LaunchDescription
from launch_ros.actions import Node


def generate_launch_description():
    return LaunchDescription([
        Node(package="turtlesim",executable="turtlesim_node",name="turtle1"),
        Node(package="turtlesim",executable="turtlesim_node",namespace="t1"),
        Node(package="turtlesim",executable="turtlesim_node",namespace="t1",name="turtle1")
    ])
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDdhMTY1ZmFhMjU2Mjk3MjFmYjYwMDc4MTMxZTljZjBfUm9YbzNNbWJJc2RiVjdTbEVyUUJBV0NKYnN6ZXFRdjlfVG9rZW46QzdMcmJ1ejYyb0ZvcU14ZVZ1bWNINFVGbk1kXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```XML
<launch>
    <node pkg ="turtlesim" exec ="turtlesim_node" name ="turtle1" />
    <node pkg ="turtlesim" exec ="turtlesim_node" namespace ="t1" />
    <node pkg ="turtlesim" exec ="turtlesim_node" namespace ="t1" name= "turtle1" />
</launch>
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzRjMmY4ZWM0NDgyMWExODcxMTE4YWM3YzU4YjI4MzFfTWk1MGJTaURXSnA2RHh4aVAxVjh6SkY4V3hiTE9zNlVfVG9rZW46TG5GS2JEMk5RbzB3Z3d4amlsN2NoQmZEbkRoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```YAML
launch:
node:
  pkg: "turtlesim"
  exec: "turtlesim_node"
  name: "turtle"
node:
  pkg: "turtlesim"
  exec: "turtlesim_node"
  namespace: "t1"
node:
  pkg: "turtlesim"
  exec: "turtlesim_node"
  namespace: "t1"
  name: "turtle"
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGM2ODU5OTllNjk5MDk0M2VhZDk0OTIxNTkwMWI1ZmRfd0ExWDV5SGh6SU0yZDFRT1NTc1pTOVloTGdXdU9ZS3BfVG9rZW46WDNQRGJBZURib2p3Z1B4Rm5IWmNJTnpSbkxlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTEyNzgzM2RmNzM2NzJjM2JkOTVjNTAwZTVjMjBlZWFfakJwWE9SbFpCSldJZk91T3RXWVFTb1d4WWlkUllaZkJfVG9rZW46VGZlVmI3TzFqb1M2UnN4VTczRmNiUHRoblJmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDBkOTk3N2ZlNGYyMDdiYWQzNThhYmEyODAxMTg0MTFfdWNqUmxJM2xRSGJKZXJJb0dlSVplclpveFBjQlA3bVFfVG9rZW46QkVPYmJpaDVOb25jZnd4VkNnNmNTeVFxbndUXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2VmZjU3N2IzM2M3YmRkZWM0NjEyMjQzMGNjMTE4ZGZfMzR3ZldCS2tGaUEwdFBydDJyNklMWThJeFh6Sk53dUFfVG9rZW46TUtWbGJ2em9Ub1ZJaHV4eERLYWNZVDlpbjZnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDYwODZmZTIzNWRlYjM5ZjU4OWJkNzJlMzFkNmU3YmRfNzVJYld6TEZ4S2lQNjNvWU42cTVMek1UU09WeUU1bjlfVG9rZW46VXhMY2JIZGNEbzFvM1B4Y1A4c2NmbmxXbnhiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¯æŒ‡å®šå‘½åç©ºé—´

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTg2NWM0MjM2YWU0YTY1ZDM1MzUwYmJmNzRmYmFkYzJfa201aVo5WHVOWDNCT1ZaTW1uUWpxM2dWODRjTUZ2d3RfVG9rZW46UHBFNGI1OFlBb3ZXdHV4Q2RMSGNiVFVCblFoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```C++
#include "rclcpp/rclcpp.hpp"

class MyNode: public rclcpp::Node
{
  public:
    MyNode():Node("mynode_node_cpp","t1_ns")
    {
      RCLCPP_INFO(this->get_logger(),"Hello World!");
    }
};

int main(int argc, char ** argv)
{
  rclcpp::init(argc,argv);

  auto node = std::make_shared<MyNode>();

  rclcpp::spin(node);

  rclcpp::shutdown();
  return 0;
}
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTBmNjg4YmEzY2Y3MDQ1ZDg0ZDI0ZTcxYTA1ZWEwYmZfb1RhVXdhdHZ2VWJWa3hsODlDaUJjTzBQOTFWNVNsWFpfVG9rZW46WW93ZWJhMHk3b09OcUd4TVNmTWNlNkZkbkIzXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjU0MGE3OTZmMjU2MDFmMTNhMzRiNzIwNTgwMDM4ZmJfTVdKZHBFUjZQeFI2a3FWNzJJOVlDRnNmeFpRU3cxaHVfVG9rZW46T2kxY2JDTzNBb2w2bld4SUN6U2N2Vm5HbmZkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjQyMmI1MDljMzNkNDA5NzE5NTU3MjQ2ODliYzg4ZDVfdUlhNkZhRml0TjcwbVpPWjhjeFczZ1Myc0hVVHk3QVJfVG9rZW46QldMRmJVREZNb29TeFh4bHdDNmNkRlhxbjdqXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTljZjMwNWRhYzJhYWNhMGI2OWU2OTUwNDEzYjA5ODRfT2c4ZXhzbGo5MVA4Tll6UXJkNHRSMUpvNmtQTldSbXFfVG9rZW46QkRKOGJLYkZob01KaUh4VXlZYmNKeXlQbm5lXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

5.  ## è¯é¢˜é‡å
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDE4NGJmYTEwY2RiNDY1NTdiY2RkMWQ4YjYxYjM5NmZfQWR0Y0R5UGtpMmFKQm9QbVQ4YnRRUXZEY2s3TG5mZGNfVG9rZW46RVVzc2J2V2ZXb2JkTHN4Q1RBVWN5WVQ3bk1lXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MWQ0MTU5ZmU0MTViMWM5MGM5YTRiOWYxMjliNWUwZTBfTTJpZXU5cTNPY1lCZkR3Mm5uMm9QTXFOOWlNajB5S3NfVG9rZW46UUhFTGJEQ2xPb3hsYkR4V0ljbGNubVlDbmlkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWIzNGMyMDVhNzBhNTI5MmQ4ZDRmOWY3MGYyODFiMDhfaTRHWndNdjcyMWN1dk9heklucUoybWlOdHI0QzR4SVNfVG9rZW46VUk1RGJCZU1yb2RQa2l4M1lVdGNieHZmbmdmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmJmYTRmNTg3OWEyMDFiNTAyN2YzY2QwZDMyMzNiYzRfRXo2VFBlOTNBS2M2UDJ5U2pyVDhpcU0zeFU0TGN3QXdfVG9rZW46QWtPZ2JEc0dIb1ZEaXN4UGFtY2NpWjdYbkJkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2I2NmE0ODE4ODZhYWYzNjZiMDkwNGU5ZjY1ZWI2MzZfWk9mT1VLMmdBbDUxUVZhd2dCN0NmcmhlamhERlVPb1NfVG9rZW46SDk0U2JBWWlsb0xDelp4Tm1nbGM5czlubkRiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Bash
ros2 run turtlesim turtlesim_node --ros-args --remap __ns:=/t1
```

ros2 run åŠŸèƒ½åŒ…å èŠ‚ç‚¹å --ros-args --remap \_\_ns:=/å‘½åç©ºé—´

è¿™ç§åŠ å‘½åç©ºé—´çš„æ–¹å¼ï¼Œä¸ä»…å¯¹èŠ‚ç‚¹é‡åç”Ÿæ•ˆï¼Œå½“ç„¶å¯¹è¯é¢˜åç§°ä¾ç„¶ç”Ÿæ•ˆã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTI4MGM5NWViMTIwNTliMmM1ODg1ZTAzYmFkMTExNWNfT0U2T2k4TGxKaUNoRHlrTnhFc0lDQTdzT1lySFNvWWlfVG9rZW46TVJ2NGJhRzdab3JXZnJ4cW5Hd2NwUmRSbkFkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzZkMzQ4ZTg1ZmZjM2I5N2M0MTYyMTA5Y2NkYTI2YWRfNEhUcUhVSlhQWncwejB0T05jOXkxYzgzRXZVRnVLVlhfVG9rZW46UlppWGJmTkJXbzV2TlJ4UGU3d2NMQ3NkbmhlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzQ4NTYzNjI2ZDNhY2U3MDVmYTZhNzEyNjAzZjIzNzJfbEFjT3NhdEZPcEhSZHBzeTZqN0UyYjEzSkRaUlJrZUZfVG9rZW46WmIxaWJyc0NIb1V3dzN4NUZjUWNZQWdVbmpiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTM4YmNmMzkzOTAwZTUzYWZkOWZhYjk3ZDg1N2U2NmNfU3BvNzhoc085Z1JVSkl6U0liUWZxbzZJM2hMSE50bHdfVG9rZW46UlcxemJ1dlBYb05XU1p4REtFMWM2bUp5blFiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDE0NDc1MGFkZTNiNjEwZDQzMDM0ZGZmOTZiNDIzZTBfdGdiRlg1VEVvVk54V29oNnUxbzRNc2lZUHdxT0dkRTRfVG9rZW46U0ROZmI1YlNRb0VsN2x4OWx4WmNGVnUybjFkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Bash
ros2 run teleop_twist_keyboard teleop_twist_keyboard 
```

è¿™ä¸ªæ˜¯æ‰“å¼€æ§åˆ¶æœºå™¨äººè¿åŠ¨çš„èŠ‚ç‚¹

ros2 run teleop\_twist\_keyboard teleop\_twist\_keyboard

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGZkYzU1NmQxNDg1NmJhNDVlZWVjOWEzZjIxYTRhNGJfRkpXeDR6Y3YwUmUwSDdpTFNYWU94QXJJRTJQYWRYdmpfVG9rZW46TnUyTGJlT2ZJb0pmVTR4cEJkMmNZSEp3bjJmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTU2ODVmYWNiZGFmMWQwNjRkNWZhYTk3MjJkZGM3NmRfMWNhM2tXYjJqMG5ZQTdHbGlqdWVmMG1xOGZWWVVGMmFfVG9rZW46WVFYZWJtdlN3b0l2NGR4d3E3T2N4WHJQbm1nXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å…¶æ‰€å¯¹åº”çš„è¯é¢˜åç§°æ˜¯è¿™ä¸ªã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTlkNTg0OTZmNDZhMjZmZWUzMDk0ODMxY2Q5NGNjYmRfN0xJVXgyakxBdjhGVmw0RUE1OFB0c1JsOFRaTGlyaXRfVG9rZW46R1lyRmI5UnBtb2hVMHB4eVFlQWM1Rk1BbkpJXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä½†æ­¤æ—¶æ§åˆ¶ä¹Œé¾Ÿè¿åŠ¨æ— æ•ˆï¼Œæ˜¯å› ä¸ºè¯é¢˜å‘½åç©ºé—´ä¸åŒã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDRlNmMzYmFjNzQxN2MyZTc1NjNlZmQ1YzRmYTY5YzRfRmFNNmtCOVFWWk03bUszRUJ3U2pBN09DZ0UwYzd4QzhfVG9rZW46T3NDd2JhMFk0b3lZanB4Zmp0UmNPcUZubm9kXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¹Œé¾Ÿæ¥æ”¶çš„è¯é¢˜æ˜¯/turtle1/cmd\_velï¼Œå‘½åç©ºé—´æ˜¯/turtle1

è€Œæ§åˆ¶ä¹Œé¾Ÿè¿åŠ¨çš„æ˜¯/cmd\_velï¼Œå‘½åç©ºé—´ä¸åŒï¼Œ

æ‰€ä»¥æˆ‘ä»¬è¦æŠŠä¸¤è€…å‘½åç©ºé—´å¼„æˆä¸€æ ·çš„ã€‚

éšä¾¿æ”¹å³å¯ï¼Œåªè¦æ”¹æˆä¸€æ ·çš„ï¼Œå°±å¯ä»¥æ­£å¸¸é€šä¿¡äº†ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmQyZTk5Mjc0N2RkMWUyNGZjZjQyOGZjODIwNTg5OWVfTHNnVTF1WnN1NHdXd2tOUWEyS1ZDYU83ZmoycGh5VDdfVG9rZW46Qkg0aGJnbnF0b0plb3V4VGU4Y2NtWkNMblFjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTY4YzRhODFmZDBkMzcwZDg2NmI2NTYxN2VlOTNiYjNfWk9QajU1ZTJYYUhoZzZGWjVEN2NwSU1rMVNQMTlqVzJfVG9rZW46T21lNGIzZXkwb05CUmN4a3I3QmNMY1hOblpnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWVjODQwMTBjZGRmMDJhYmY4NTIxNzAwNDAyNDE1NDJfemFSM2x6VjR3OVdtVUJNcnZrYkNlSWNZdzdQSEFIV0lfVG9rZW46TjNUb2J2MW9hb2J5MU54RVBpWWM5STVtbnZnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

remappingså¯ä»¥å®ç°è¯é¢˜çš„é‡æ˜ å°„ï¼Œè¯¥å‚æ•°æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œç„¶åé‡Œé¢æ˜¯å…ƒç»„ï¼Œæ¯ä¸€ä¸ªå…ƒç»„éƒ½å¯ä»¥å¯¹ä¸€ä¸ªè¯é¢˜è¿›è¡Œé‡æ˜ å°„ï¼Œå…ƒç»„é‡Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯åŸè¯é¢˜åç§°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯é‡æ˜ å°„åçš„è¯é¢˜åç§°ã€‚

namespaceå¯ä»¥å®ç°å‘½åç©ºé—´ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjA1M2Q4ODk2ZDRlYjlhYzU2NDk1ODFmMGNhOWM0YzVfUTNZUDFocWpoSUdWTWd1SjZacE5WMmIwTWRic2d2b3NfVG9rZW46U1ZpM2I1bUJsb1hRM2R4YlVMa2Nhd2ZtbkxnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmIxZjY3YWM2MGNmYjFmYWViNzY4YjA4ODNjYThiOTVfZnduMkZhcDRrd0U4VGRQWFpzSFdWeG92WXhNUzRNeXZfVG9rZW46UThDcmJyR09Vb1ZTdVF4T1JPNmNoVm0ybmpoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmM3OTc1MWZmZDVkZjZjOWNmZTg0ODlkYWIzMDRlOWVfM1cxUXNrNDFqT0FnYXFSZVBxU0ZpVGthTjVKUlB4Z3RfVG9rZW46Uk5FQmJPUDJab0FNYjN4d2JMaWNsYUFkbktjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTUyNjc2YzhiNmFhOWUwNjViMGM0OWVhMTRjODA0ZDlfTVc3dTJCenU3c3lEbXBtV21DbkxodkVCTG10OTBIQmlfVG9rZW46Rjg0c2J0Y09Cb0FFSnN4dWJhRmN6blBPbmZiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2IyYWIyMTI1OTQwNTgwMjM0NTc2MzM0ZDYwZTIxYzZfOUJaNEZ5cFVyaVBlc1dPQ2FOZmlSbXZoRHpjMzR6RFFfVG9rZW46UTZQSGJCSnB6b0tpdlR4TFJVQWMwREdUbk1kXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2ZjOWQ0MmY3ZDgwZWZlYjlmMGUxNjkzOTg5MjlhNzlfM3RpUVdRQVJmd2lOTDYxV0dqWGtyZVFUckdqbTc1VUJfVG9rZW46UlhhR2JETTNLbzJaUHF4RU51RWNUYlk4bnNkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTYzMTIwZDExMWNhMjQ2YTQxYjUyNWU0MDgwOTVjZGFfU0FpeHpQcW11dThRUFhtVXVabFF4RWdsUE9NOWp4TFZfVG9rZW46UEZLemJsVWdPb3JMNUR4ZDJVbmN1dkhubldnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTM2ZDk3Y2ZkZWU0MjIzMjQ1NWI1ZjhjYWFkN2UzYTFfeThCSlhGVlNXMEdYQ0RQcjE3d3I3aHNJYU5wWTdlMWVfVG9rZW46WkRZaWJrTjlJb3QyOUZ4TG1NQWMzZ3hDbnloXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

rempä¹Ÿæ˜¯å¯ä»¥è®¾ç½®é‡æ˜ å°„ï¼Œfromæ˜¯åŸè¯é¢˜åç§°ï¼Œtoæ˜¯é‡æ˜ å°„çš„åç§°ã€‚

```XML
<launch>
    <!-- <node pkg ="turtlesim" exec ="turtlesim_node" name ="turtle1" />
    <node pkg ="turtlesim" exec ="turtlesim_node" namespace ="t1" />
    <node pkg ="turtlesim" exec ="turtlesim_node" namespace ="t1" name= "turtle1" /> -->

    <node pkg ="turtlesim" exec ="turtlesim_node" namespace ="t1" />
    <node pkg ="turtlesim" exec ="turtlesim_node" >
        <remap from= "/turtle1/cmd_vel" to="/cmd_vel" />
    </node>
</launch>
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGQxZjA1NTI5NGI5ZDBkZTQxYmYyNTlmZWEzZmZmYWJfNUMwaVhzVWR1Rmw5S0NjVEJGZW1tQ1l0OG9MQnZyNUhfVG9rZW46WER4ZGJXdHNGb3dZZzl4SkxHZWNYQnl4bnpmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDkzYmJjZGM4YzllOTQxNjlhNjc2MTgyNDA0OTY2YzdfNzgxb25HWVVTRlRqNE1EUU9na2Q4U3ZzTlNjMnZTUXpfVG9rZW46RGFvSmJXY1BXbzljRHR4VlQyOWNVcEVZbjNlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

launch:

```YAML
- node:
pkg: "turtlesim"
exec: "turtlesim_node"
name: "turtle"
- node:
pkg: "turtlesim"
exec: "turtlesim_node"
namespace: "t1"
- node:
pkg: "turtlesim"
exec: "turtlesim_node"
namespace: "t1"
name: "turtle"


node:
  pkg: "turtlesim"
  exec: "turtlesim_node"
  namespace: "t1"
node:
  pkg: "turtlesim"
  exec: "turtlesim_node"
  remap:
  -
      from: "/turtle1/cmd_vel"
      to: "/cmd_vel"
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGMxZWQzNmJlODIxNWQ0ZmRkYWFiYWE0ZTVhNzY4NGJfMUNua0FhNzVGckhGeVYwVk0zUHd2NHRzTnVja0FJMFhfVG9rZW46R0dkdWJuYWRHb21kbm54SGdGdmM5MWR0bm1nXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjZhZjNmYmY2N2M4MDZiN2M1MjE3YmRmYTRmM2I2NDFfeGdYTzNSakdJdmRHZlFSTXRyUnR3T3NxRDNVUE5SMzRfVG9rZW46UGNNU2JDYVJnb3hWV2N4UGNlY2NScnRQbnJiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2VmOTY3OWJjMzFiODliZmUyOGE4YjFjNWNkNGMzYTNfd2t6cnNXRGZKSGJ4UGNSUkZicjRZMEJHVU9MTkRjaVNfVG9rZW46Uld1dGJjcGp6b1BiSTl4dERVOWNBdDJ3bnRoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTQwOTdmODUyZmIyOThiYjlhMjZmZDg2YzJjNjRhOGJfNHNqZXJqMHNmcGM4SDhhS2VNejFmQ2FJTUc0cGg5MHZfVG9rZW46U0lNQWIzUFpVb1BHdFh4a2llVGN6am42bjJlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å‘½åç©ºé—´å¯ä»¥æœ‰å¥½å‡ çº§ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MWI2YWM3OWM1MzgzYmM2NjhhMjVmMTdjNjg5ZjI3MmFfcHloek5iekJVY2hWUXBSV2kzWDU3ZWVaVThlYlcwVm5fVG9rZW46VlMzcWI5RGdlbzJBT0F4eWhmaWM3M2RYbkZoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å…¨å±€è¯é¢˜æ˜¯å’ŒèŠ‚ç‚¹å‘½åç©ºé—´å¹³çº§ï¼Œä¹Ÿå°±æ˜¯æŒ‚è½½åœ¨æ ¹ä¸‹çš„ã€‚

ç›¸å¯¹è¯é¢˜æ˜¯æŒ‚è½½åœ¨å‘½åç©ºé—´ä¸‹çš„ã€‚

ç§æœ‰è¯é¢˜æ˜¯èŠ‚ç‚¹åç§°çš„å­çº§ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmJkY2VmOTc0MzFmMDI4YTdjYzAwMDNhMjAzMmZiZDFfYm5zNVFXRTM0b0dBd1VUSmF1TEtHTjRKbUZLYzIybHRfVG9rZW46TFo3RmJuTjlIb3h4NDZ4Y01NeGNGZHNRbnZmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmM1ZjQzNmJkNzJmNjdkMDcwYzQ0MGM0Y2Y1NGRmMDBfQkNIUGdZZ2hpOEI1Y0EwWEs2ckVTU0h6ZHhvOVVDRnZfVG9rZW46WjIzNGIzYUtEb1JaZld4NzZZdmNsNW9CbnZiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWJkNDFhZjcxNDE0OTY0NWNkNzYxNjVjMmYxMDg5NGNfS3M2MmZsN2NwUU1KcThEaUtKcGRlVklWTm9QeHNKTHZfVG9rZW46Wml1bWJUbmxUbzdsUFp4eEk3RmNUOFN4bnRkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzEwMWI2ZGVkYjRjNmE3YTcwOWY0YWU2ZTY5YmJhODBfTUdXTUlERFZRYWloYm5WdndFZ0JaNHkxNlo4NktYT3pfVG9rZW46SGZUMmJ1dVhNbzl6eTd4d3lyM2NJbXp1bjNiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```C++
#include "rclcpp/rclcpp.hpp"
#include "std_msgs/msg/string.hpp"

using std_msgs::msg::String;

class MyNode: public rclcpp::Node
{
  public:
    MyNode():Node("mynode_node_name","t1_namespace")
    {
      RCLCPP_INFO(this->get_logger(),"Hello World!");
      publisher_ = this->create_publisher<String>("/global_topics",10);
    }
  private:
    rclcpp::Publisher<String>::SharedPtr publisher_;
};

int main(int argc, char ** argv)
{
  rclcpp::init(argc,argv);

  auto node = std::make_shared<MyNode>();

  rclcpp::spin(node);

  rclcpp::shutdown();
  return 0;
}
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDRlZmY3YmY4MTMwYmRmYjZlODJhNzI4Nzk5ZGE4MWJfb1NmYmhESG1IY09Xb28wVHBhSTN3NTZIcmRtdVJVS3VfVG9rZW46V1dycWJnYXpEbzRQUnJ4ZlVmdWM3bHpybnFEXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTQ3Y2VkNWEzMzdkYjBhZDI4NTc2MTM4ODcyNGM1YTZfeVozemZrZFkwQURPSW51enJZcVBNS2pJT1lqcXJIZUhfVG9rZW46QlFkamJsVHNvbzdDMGd4UzdFcGM3cG1pbmViXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzczMDM1MTllMTJjNzYyMDE4NzQ3MjU3N2M3MzkzN2VfWG00bVlHdW5ZMHBweVdEM1FhNVA1cDAybVlFdVAyeXBfVG9rZW46TjlLWWJKd01Jb09QUUZ4ZkZGdmM3QUlDbkpjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å…¨å±€è¯é¢˜

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjQyNmM0NDcyNGNmZjNiMjg0YjYzYmY1MTEzMWVkMTdfZHJEcVFIQnNQU2M3RzdtS0dzVkVwOEs0c0ZpVThzSktfVG9rZW46VVpMaWIwbVQwb2FMV2R4U3Vyd2NHclRjbkhnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmMzMDdjMDNhZjBjOTczNjRjYjE3MmE4NWEwZTU0MmJfQkJqSHcxVTVlRmhoT2tCd1RMTHA0VlJlelE5T1h6Uk5fVG9rZW46Qzg4RmJrcUxTbzNlSUh4Z3MzWGN4SzBBbjZlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ç›¸å¯¹è¯é¢˜

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDk4ZGY5YzNjYjFjNWYxMjViMjRlOTU3MGYyN2EzYjhfeVRwSUlCeWJUWXhDdzljQXBmS3pkSUFTVXNybTF6c3BfVG9rZW46WEdaemJLQmZnb1JRUFF4ZnUxYWNIZllEbkhmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmZmNDQyNTZiNGE1YzFmZmExN2NkMjAwNTcxMTBjMTlfR25aeW1Yem1IMjNFcDRKT2FCQWU2SUlWSDZzeU1jVGhfVG9rZW46SldGUmJQbEFRbzVMSk94V1BRNGNndGR1bjllXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ç§æœ‰è¯é¢˜

6.  ## æ—¶é—´ç›¸å…³API
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTFkN2JiNDI4OGE5MzVlZjY3MmVmYjBlM2YxODY3MDJfaFF0Qlo2Uk95djU1cG9EWlN2bG5hSnRqQVR4cjN5SXpfVG9rZW46SHBFcmJCYmFyb3hZVlF4bldpYmNNTnZCbmpkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å‘æ¶ˆæ¯å¯ä»¥æœ‰æ¶ˆæ¯å¤´ï¼Œæ¶ˆæ¯å¤´é‡Œæœ‰æ—¶é—´æˆ³ï¼Œæ¥æ”¶æ–¹è§£ææ¶ˆæ¯å¤´ï¼Œå¹¶æŠŠæ¶ˆæ¯æ—¶é—´å’Œå½“å‰æ—¶é—´è¿›è¡Œæ¯”å¯¹ï¼Œçœ‹æ˜¯å¦å»¶è¿Ÿè¿‡é«˜ã€‚

Rateæ˜¯é¢‘ç‡

Timeæ˜¯æ—¶åˆ»

Durationæ˜¯æŒç»­æ—¶é—´

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjRlYzkwNzdkMWE4NDg4MzMzMWIzYzQ4Mzg0OWViZmRfUTdWWEw4WHdqU0UzWEZVaTFVeUV2UVE3cVF3aWxDU1lfVG9rZW46T0J5ZWJWZnpsb0xuWDR4T203UWNFenhRbjlnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDRkZTg5NjkzMDUwOTk5MmY0Zjc1ZjNiMzUzYzZkOTFfekZZbkptUzlDZTdIVndRWlNKd0NiT3JqdnRya2NUWDFfVG9rZW46SUJrbmI0T05Pb3ppc2N4NDNjTWNSck55bkZoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGNmZWI1NDY0ODEwYWIxZmMyZTE3ZDU2NTljYTFiMTVfVHdIclVCMUNBU1pRaFpidGpDQXhpQ21iUXlnVzh2UkZfVG9rZW46TTRvamI3b2lxb0pGUUR4MnB1U2MzUGt0bjBiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Yjc2M2ZlZGNiYzIwZmZkNGIwZWE4MTBlYTY5MWI0OWVfZWd2cUxQcHZIQ1hLalRubXRoTG41V3VBdGgwdXg1TWNfVG9rZW46VjlDN2JmZ01Mb0M2SWx4ckljaGNib1Z3bjNlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NGNjNzI1YjcwOTU0Mzk3ODg2NGQ1YmVlYjU2MzQzZjlfRVJua1dYNGFZY2tuVkFCeTJ2SjlVRlM4bjZ4amJBOEFfVG9rZW46WjhrUGJBVUZUb0lNMEt4Yzh3cGNROG9kbmlmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™ä¸ªç±»çš„æ„é€ å‡½æ•°æœ‰ä¸¤ä¸ªé‡è½½ï¼Œç¬¬ä¸€ä¸ªæ˜¯å‘¨æœŸï¼Œç¬¬äºŒä¸ªæ˜¯é¢‘ç‡ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDBhNTA1YzFmMDIyMmIwMjc1ZTVlZDRhODdkMTRkNGZfR2dvcnlWUG9tV3FrMjdka2lmdE5WRVNpTnY4QUdLU3BfVG9rZW46T1gzbWJwWURqb1habVZ4R2NZbWNXMlpnbmFnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2Y2NWQ1ZjMyMmM5M2YxODAwYTg0YTM4Y2JmY2U0NjRfUklUZGpMdWpORFNuVTlmdUlPQzI3ZmFJeTh5dXJqY3NfVG9rZW46R1h6eWJGNnVMb0xYazJ4SkVUN2M2bzUxbnZmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWYyOTQzM2I1M2Y0Mjc3NjMzOWRhOWY2NDMzNjlkMGJfUkZGcVVpUEdOOUo4SFRJUHFUQnV3MXVsZE14UDRzSjhfVG9rZW46RkZGbWJsMWp3b0tyVDR4OGxEN2NrVTdubjZlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```C++
#include "rclcpp/rclcpp.hpp"

using namespace std::chrono_literals;

class MyNode: public rclcpp::Node
{
  public:
    MyNode():Node("time_node_cpp")
    {
      RCLCPP_INFO(this->get_logger(),"Hello World!");
      demo_rate();
    }
  private:
    void demo_rate()
    {
      rclcpp::Rate rate1(500ms);
      rclcpp::Rate rate2(1.0);
      // while(rclcpp::ok())
      // {
      //   RCLCPP_INFO(this->get_logger(),"ä¼‘çœ 500ms");
      //   rate1.sleep();
      // }
      while(rclcpp::ok())
      {
        RCLCPP_INFO(this->get_logger(),"ä¼‘çœ 1000ms");
        rate2.sleep();
      }
    }
};

int main(int argc, char ** argv)
{
  rclcpp::init(argc,argv);

  auto node = std::make_shared<MyNode>();

  rclcpp::spin(node);

  rclcpp::shutdown();
  return 0;
}
```

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDU5MjNlNDc4ZmFkNzk3NjIyZjcxYmJhZjI3NTA1YjNfM0pHWmdFNlhvV3JJaWZMNmtqa1dHd0tsREJKekhTYVVfVG9rZW46Q0Q1UWJDNVg0b0doczh4QTZlNWNvdHRybnlnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDBiMDRiOTAzMzFjN2FjMjUwOTJjYzNhOGVjMDAzNmVfYlhjN1lsd3FOZ05tZnRCTVVxU24yczhyVlo5YUZ4T1JfVG9rZW46QUxhS2JPU1V2bzNQa2Z4SDgzM2NKNVI4bkhiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzQ2YjdhODc1ZjdjZmVmMDFiODU4MzBjOGZlMmMwMzdfcUJRelZhOGlNd2hOTUZ4cnJPMTRjNTZhVmlSb1BoR3lfVG9rZW46UXo5a2JvYnZubzRnQU14REZOMGN2eWV6bk1lXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2ExMDgzNGU1M2RlNzJjZjJiNGMwNzNmMjdlMWM1MDhfM0JlcHZLbEV0cWpZRmE2TVgxaVpsajdJRnJMUVFibDhfVG9rZW46QjkwbGJTU2lEb21PMHl4dVBJbWMxV3pYbkhjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¯ä»¥ä¼ å…¥ä¸€ä¸ªçº³ç§’

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDNjNzY1OWE1MThlNmFiNGE4ZDU0N2NmMjY3NjVlNDhfeUM3YkdZbndHT3hzZlFsc0pGa2tIYmNMTVBya3V2akdfVG9rZW46SjF0bmJjN3BEb0t5VHJ4SmhDdGNoNTFqbnRjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¹Ÿå¯ä»¥ä¼ å…¥ä¸€ä¸ªç§’å’Œä¸€ä¸ªçº³ç§’

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDM1NjEyNWY0MDMyMDc3NWZmYzI4MmMxMGNiMjJlNzJfWGdSd1RUQmRnRjd6cFBPcnlxWkFDY0FoenJHaDJVSlRfVG9rZW46SktDdmJBbk5Zb1VNV3Z4bzF4aGM5S3N5bm5iXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å› ä¸ºæ˜¯int64\_tç±»å‹çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åé¢åŠ ä¸ªLï¼Œè¿™æ˜¯5äº¿çº³ç§’ï¼Œä¹Ÿå°±æ˜¯0.5ç§’ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTE2ZDI1NDM3NzZhZjQ5Y2M4NTNkMWM2MmUzYjNkOTRfS1dUWU1xMTJCV2VmM0VDOXZjTGxIMEw2RVJCOXhRc3hfVG9rZW46VDN2N2JUYXNIb0NudHd4aGdKM2M2SVUzbjRiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™æ ·time2ä»£è¡¨2.5ç§’ã€‚

è·å–å½“å‰æ—¶åˆ»æœ‰ä¸¤ç§æ–¹å¼ï¼Œ

ä¸€ä¸ªæ˜¯this->get\_clock()->now()ï¼Œ

å¦ä¸€ä¸ªæ˜¯this->now();

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmFjZTMxM2FlMzAxOTgxNDE4Njg4N2YyZWE2ZDdmMGRfUGhnaVhIdW1Sb2xFYm16alp5RWgxM2wyV29oRXpLWjFfVG9rZW46WGhuR2JiUzVBb0xtS0d4eG5PNGNBOVdZbmVkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmQ2OTE1NzgzNjhlZDJkNDUyYjI2MWJiYTUwODkwOGFfYVpYUFBrU1hmZjVTZkNjOTJoZEhkUFF0VXdnRTEzM2lfVG9rZW46WHZBOGJBQ3Yyb3dQMkt4SGhPN2M5S0pNbkJlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmRmM2ZhNDM2MWM1NWZiMmUwNjQ1OGIxNTJhN2NmYWZfWms3ZUpZd3ExTlJkQ2FVbDBMYlphMnNiZml2VEkxakRfVG9rZW46S2l6NWJhRkRrb0dIclJ4MkpvY2NHNnhmbnVlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWQxYjdjMGE3NjM4MjIxMDUwN2IxNzRiMmQwY2ZkZDVfa3F1YTlTbGY5eW1LMVF5c2RSV1Z3RHl3T2hObGRVV1RfVG9rZW46VnAxaWJKNmU4b1hBSXp4d3pvcGNxTzJDbnVmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```C++
#include "rclcpp/rclcpp.hpp"

using namespace std::chrono_literals;

class MyNode: public rclcpp::Node
{
  public:
    MyNode():Node("time_node_cpp")
    {
      RCLCPP_INFO(this->get_logger(),"Hello World!");
      // demo_rate();
      demo_time();
    }
  private:
    void demo_rate()
    {
      rclcpp::Rate rate1(500ms);
      rclcpp::Rate rate2(1.0);
      // while(rclcpp::ok())
      // {
      //   RCLCPP_INFO(this->get_logger(),"ä¼‘çœ 500ms");
      //   rate1.sleep();
      // }
      while(rclcpp::ok())
      {
        RCLCPP_INFO(this->get_logger(),"ä¼‘çœ 1000ms");
        rate2.sleep();
      }
    }

    void demo_time()
    {
      rclcpp::Time time1(500000000L);
      rclcpp::Time time2(2,500000000L);
      rclcpp::Time right_now_1 = this->get_clock()->now();
      rclcpp::Time right_now_2 = this->now();

      RCLCPP_INFO(this->get_logger(),"s = %.2f , ns = %ld",time1.seconds(),time1.nanoseconds());
      RCLCPP_INFO(this->get_logger(),"s = %.2f , ns = %ld",time2.seconds(),time2.nanoseconds());
      RCLCPP_INFO(this->get_logger(),"s = %.2f , ns = %ld",right_now_1.seconds(),right_now_1.nanoseconds());
      RCLCPP_INFO(this->get_logger(),"s = %.2f , ns = %ld",right_now_2.seconds(),right_now_2.nanoseconds());
    }
};

int main(int argc, char ** argv)
{
  rclcpp::init(argc,argv);

  auto node = std::make_shared<MyNode>();

  rclcpp::spin(node);

  rclcpp::shutdown();
  return 0;
}
```

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGI2NDFiYjI4NWYzMWZhODM4ZTM4M2QxYmIzYjRmMmNfM3JiR29BUktjQUx1a1NCOTM3Tk1vaGhRMnZ6UlIzSjhfVG9rZW46T3RuZGJrTTBBb292eXp4NDN5ZGN3MjVnbnJoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzNhMjVjYjMyYTYwYjA3YWVmY2Q0ODZmZTMzYzQ4NzdfZ29TcUdWMjlOd3Brc3JySUNEWFRiVEphWmlLNzdhQkVfVG9rZW46QWg4VGJMNXZUb1RBZVB4UFQyUmNzNW9sblhkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGRiY2ZhN2QxODMwOGNiOTUxYWM4MjM2ODNjYzc2MWVfQ1dMZWMyNkdBd1RxVm5MY1ZDd2RuY2pvWDZWamhZN0xfVG9rZW46S3VuTGJzclVCb2FjSEV4V0NEamN4UHVJbnY2XzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å’ŒTimeç±»ä¼¼

ä½†æ˜¯ä¸å®Œå…¨ç›¸åŒï¼Œè¿™ä¸ªdurationç”¨åˆ°äº†chronoã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmUzNTgwYTlkNWZlYzA1M2UyOTgxNDI4NDE1ZDYzOWNfZURFTElyUG5DbnRsTGVCMXliR01rSTNLVTVKOUExUXZfVG9rZW46U2VycGJyWEJzb1VGdEN4em5xSmN3VWRubjlkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODkxNzY1YmMzYTAzMTBlNDJmNWRjY2JmYjM1OTNhYWJfaEdTMlVhUkV4VDZQQk1pSjI2Qm81enR3OElSUm96eU9fVG9rZW46TWZ1VWJpUGRBb3VoYXd4VE9vd2N0dW9sbmhmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWNiYjg1NzQyY2ExMzMzNmMxOTE5ZjYxNzEyZTlmNDNfTGNIZ3NFNEhHTGRENUVLbTlrWTMyUklkWElHbnpkTUFfVG9rZW46R0kwQ2J3bXpnb2lsR1J4VEVxZWM5WGVybkdnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2I5NjliZTNjNmY0MzJiNDI4ODcyNzE4M2M2Yzc4MDFfeFF6V1ZWRjVzMlZlU2ZoV1NnTUVzSmpLTWdtQkJjcFlfVG9rZW46QTV0eGIzMzl6b2VBMk14bFNwYWN1NmVObjJjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWVhYjVhNDBiODJiM2NjYzdjZjg2NzRjYzY3MWFiYTFfMzRLbTQyTk9KRjU0MWg2aUl1NUFKQkpqdlBuWnkxWEpfVG9rZW46Qlc4OWJhemxtb2VPbFR4RGh6bGNLR21kbmZkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2JkM2IwNDdlODJkNThmYzdhYjZlZDYzYTRhZmRiMjJfWENEa2ZzM1ZzNTNIUmduTXRlb1huVUo5T0wzbU9xd0lfVG9rZW46QWZqR2JOVDJrbzJpbnd4b2U4TWNzcG9IbjhlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

t2å’Œt1å¯ä»¥è¿›è¡Œç›¸å‡ï¼Œç»“æœæ˜¯ä¸€ä¸ªdurationç±»å‹çš„ï¼Œä½†æ˜¯ä¸èƒ½ç›¸åŠ ã€‚

timeä¹Ÿå¯ä»¥å’Œdurationç›¸åŠ ç›¸å‡ï¼Œç»“æœæ˜¯ä¸€ä¸ªtimeã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzFmODY5YTEyOWY2OGQzNmVhNTVhZGI3MzYyZDFlYjFfT2hvZ01ROTNpQ1luejdsRE9NWnVOd0cyb1JyTnRINVNfVG9rZW46SXJUZWJ6NWtUb1lvS0x4SlAwcmNDVjFUbnhaXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTkzYmI4NzY0NGE2MWNiYTAwMDA5ODIyMjQwMTFkODRfNGRoOHBoOGJFZ3cyODFLbWcwOWdhSWQxcFZSRXU4cGpfVG9rZW46STc2TWJROWYwb2l0WVl4U0dDMWNNTHNobjBnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTdhOTU5MjhiYjcyZTY1OTZjYjMyYzRiYzg4ZmEwNWZfR3FFMlh4THk0ZGNpY0N1QmNldDByckNFZFgwSTlrN3JfVG9rZW46TTVZZGJOalQzbzZmV2d4MXd1S2NhbVlvbjdmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjcyNzdjMjk4YzhlNGZjMjJmMDM5YTRkOTViMDVmZjdfSnU2czM1ck94bVB5dktpekhWbW9MMDZIZm8wRDBzb1BfVG9rZW46UzJzUmJxcUNHb2JmZ1h4VnNiNWNEZ1hmbk9mXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODVkYzU3NWMyZWUzZWVjMWNkZWI3YTU0NjcxNDlkMmJfR05jMzBpRlFuUFdlNXhQYVkwWUJhMjZhZDJZYVFrQlZfVG9rZW46UDZ5WWJVdEZRbzdlRVp4V2g0bmNNckVhbnllXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmRmNWZiYTEwOTZhNTUyNTBmODNkZjZiZDQ2ZGM5MjBfaVRWbnBrRHZDbWw4UGVsSzRxUVVKU3c0REM1YmlhR2tfVG9rZW46Q1lVZ2JuUGZKb045UG54STZqNGNoSGlkbk1jXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

7.  ## é€šä¿¡æœºåˆ¶å·¥å…·
    

1.  ### å‘½ä»¤è¡Œ
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGVhYTQ1NWMwOWFhYWFkNDZmNzc3ZjZjYzgyMjU3YWVfa0JzM2UwQjlZd2hieVhram9qWmp1dXdIdExkOEFHSVNfVG9rZW46VE9yV2JpUFFrb2ExWkd4eFNmeGNxUU5PbmdoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Njc5NGFmZTQ1ZWU4NGI4MTJmOTZmYmY2NTY2MGE3YmVfZEdVQ0t5a3N2SVl2SUdsT3RMbTlFZE9pUGp2d0cxcGhfVG9rZW46WTFHM2JEQzRubzJuY3d4M2lXbmNsRXRzbkpjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjVjZWVmYzE3NDIzMjc2NTI2MjFkYjc1ZWM5Y2U4MjdfdDgxNlpDV1hpYjdoNUg3N1dSR3RETExWMUtmaUxtS2dfVG9rZW46RkEyb2JXUE5Mb2ZBa214b1F6RmNRNXlkbjBmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ros2 doctoræ˜¯æ¥æ£€æµ‹ç³»ç»Ÿç½‘ç»œçŠ¶æ€ã€ç‰ˆæœ¬å…¼å®¹æ€§ç­‰çŠ¶æ€çš„ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDMzY2MwM2FkNzIxZTIyNjg0N2QyMTcwZjU3OTk5NzBfYUhhVjhoUTdrUHcxYVFOSFpjanFtZzRCVjhMSkZvc2hfVG9rZW46TmV3dGJKMFF5b3JsYmx4RTRFdGNnbDJMbmdPXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDI3MzE0ZDY0YjM1ZjRjMjM4NTI3MGE1YjM5NTU3NDdfN29sNTExRkpEQU41NGZxZk5zR1pYeWFBcW9Fd05NRkNfVG9rZW46UTA5cGJzVmNab1ZLSGF4b0NabGNyR0pabjdlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ˜¯é€šè¿‡äº†çš„ï¼Œä½†æ˜¯æœ‰å‡ ä¸ªè­¦å‘Šï¼šç‰ˆæœ¬è¿‡ä½ï¼Œä¸å½±å“æ­£å¸¸ä½¿ç”¨ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjhhMjIyOTNhY2JjZDBlZWZhNDUzZDFhODJlNmQ1MGJfY29UeElDc3dlb1hhZHoyZWhYTmtDSERUdDMzV1ZDdkVfVG9rZW46SmNLdGJIVDBTbzBkMkp4YXNZT2NsMVhPblZmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Yjk0NTk5OGZlNGRjMGFmNjAzNTUwNGM4YjQ4YWRhZDJfQldsQUFXVU40ckZCMGJVZGdnSGlMWGJCVzlsZjljWHRfVG9rZW46QmJpRWJ5d05jb2hYQXh4UXpjdmNXeEowbnhmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzAzNzM2MTUyMWM2OGE2MzJkYTIzYTYyMjNlMmY1Y2ZfRDhKVHZXWjFiY0ExeW5GYVZEMjRLQlE1VmtzV2xNbGRfVG9rZW46S1MxV2I3WnBHb3ozZWp4elhNZmNkWjZYbk9jXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2Q1YWMyZWY0ZDJkMTJhYjJjMzMxOTQyYWI2ZDg4Y2JfUTI5eVpYUTBUeElxQzB2blFvOVBuMWRCekFZdWN0b1RfVG9rZW46U0toVGJ6dDF1bzRKM1J4TWZXSmNuT1A1blJoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjJhODYwMGE1YWNiNjNmOGM5MGRkODU5ZjJmNjQ1MjVfekQ4emlOQU5RUVJLdXdSNjF6YkJmZjJiZm9sNG9wb2xfVG9rZW46U25sNmJ6b3J5b28zNGt4SVlUbWNVTWR4bnRoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å‚æ•°æœåŠ¡ç«¯çš„æœ¬è´¨è¿˜æ˜¯æœåŠ¡ç«¯ï¼Œæ‰€ä»¥ä¹Ÿä¼šåˆ—åœ¨Service Serversé‡Œã€‚

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTNlMDg3YmY2NTUxNzA0OGZmNzc0NmRhYTk0NjcyY2JfM0VHYTZuRzRKZzNEV1NoTDlkNjRpWGI1UWhxS3FwbXlfVG9rZW46UW9iQ2JQSEVob01aQXB4dW9SQmNuTE9BbnVmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzZjODMxYjkwNGU2ZTdkN2M0YjIzMzJhOTljY2IzYmJfOEpsMmxhZEdnSHQ5M1VNVTBXSG13dDNraWFJRXdYeGxfVG9rZW46QUpyeWI0dU5Fb1E4dHJ4UGhhSmNnOU1YbjBuXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¦‚æœæŸ¥çœ‹listå‘ç°æœ‰ä¸€äº›æ¥å£æ–‡ä»¶æ²¡æ˜¾ç¤ºï¼Œé‚£è¯´æ˜ä½ çš„è¿™ä¸ªç»ˆç«¯çš„ç¯å¢ƒå˜é‡æ²¡åˆ·æ–°ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjAyMmUwMmY4OGMzMWJkZWVkMGRhMTg2ODFhM2FmMGJfNnJYb3REeVR3NW84M0plQkVEN1hTaW9uSlV1VUlvZ1FfVG9rZW46WW9qb2JhRDdSb21HMGZ4Tlk5cWNNdnZkbndjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDYwZTQ1ZTM3NzEzMzkzZTJhOGU2Njg4MGI4NzM3NzVfRDViRDB5UkIwcWNVcklXSkF3eGY2aFVtOFNzM3JnVXlfVG9rZW46WmVodGJ5YzVQb21JR094a1ZPQ2M3NDdPbk9kXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

protoæ¯”showæ›´ç²¾ç®€ä¸€äº›ã€‚

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDMxNTgzNjRjNDNhODg0YWY3YjM1MjUyYzBhMTVjNDJfbE15VW1DQm5QaHljUFg2ZlBOS1A5NkNLRFFBYmZYRmxfVG9rZW46TlplSGJKZzhJb2lNdFp4Q2JsMWNxVTM4bjdmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NGVjM2Q3NmYyNGY0MTE3MDQ4ZGQ5MjkzZWQwMjY3NjlfQTJ6emRJZUw0YzhMQ2hLcXB0WWM1c0JUREJCVGlJdDVfVG9rZW46SkRMYmJmMUhFb1lpeEh4NUJpS2NIdUFVbnFmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

poseæ˜¯å‘é€ä½å§¿çš„ï¼Œä¼šä¸€ç›´å‘æ•°æ®ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDI3ZjhkNGY1NDkzNjY0ZmI1ZjQwNzdmNWZiMzFlZTZfaFZrZEtHaGJqeVp6ZjZmYldzVGdidmdtTVJOV252anBfVG9rZW46SzZkV2JmQmR4b2JsbU14OGxnTGNBRXVRbnhoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGZlYWU1NzQzNjA3MTk3YTFkZGIyM2M1MzQ1ZTJlYTNfTWpibWhiVnN3MGFqNmdjRzR2R01xWG9FVDhJd1FtaERfVG9rZW46U3JYY2JoWk5mb1ROMlF4cjlhb2NTcUtSbjJkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWQyNDQzMzdiNTE0ZTk1NmMwMDc3OGM0MjJlODAwMGFfd0NQYk5lZTdHbkUySEhsczlzeVh4YVFpTlNscEx3VlJfVG9rZW46UzBrcGJTR2pNbzhTNTl4RmFib2NxM1lHbm5lXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

**æƒ³è¾“å‡ºå»¶æ—¶ï¼Œæ¶ˆæ¯å¿…é¡»æœ‰æ¶ˆæ¯å¤´ã€‚**

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjI1OWExMjBmYjk5ZjE4NDc3N2RiZDE2ODFiM2IzNjJfdjloSndMd3FRWDI1RndCaUNQUTA3S2p2TXRaMjhGNmtfVG9rZW46Rm1TUWJyb2d1b2ppNTN4RzU0RmM3OUlmblpjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¾“å‡ºå®æ—¶ä½å§¿

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTFkN2I0MDBkOTU0MjI0NzdlMGJhZmI1ZmMyMzkzZjRfU1M4eEpSVm5MQXJhWDRrMGh3bXo2WktHS1BhbDM1Q2dfVG9rZW46UTMwZWJ3QnVGb1B0cXN4WWpGdmN5VGl0bnVoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NGJhYjNiNDM4MTdhM2VkMzJhYWYyYjgyZDA0MGU3N2FfRVpPU3NtS3JkYkJKQkY5amZNUW8wcFBYc29QN2VrT2dfVG9rZW46Q1lGZWJIMnJnb2Q4Mnd4NjNPSGNldHZwbjRjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

findå’Œtypeæ˜¯ç›¸åç€æ¥çš„ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjY4ZDU1MTk1ODFmMzcyZDhhYjY3OTE5MGEwM2E5OWFfOTNCcUN3dnpWUzVBNnpSRGJBa052c0NKQkVhUTZWbzBfVG9rZW46WWFpaWJMTVFlb0JRMlh4UW0wdmM4RTlibnNiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ¶ˆæ¯å‘å¸ƒé¢‘ç‡æ˜¯ä¸æ–­å˜åŠ¨çš„ï¼Œæ¶ˆæ¯é¢‘ç‡æ˜¯å¯ä»¥é€šè¿‡å®šæ—¶å™¨æ¥æ§åˆ¶ï¼Œä½†æ˜¯å®šæ—¶å™¨æ˜¯æœ‰è¯¯å·®çš„ï¼Œå¹¶ä¸æ˜¯ç‰¹åˆ«ç‰¹åˆ«ç²¾å‡†ã€‚å½“ç„¶è¿˜æœ‰ç½‘ç»œä¹Ÿæ˜¯ä¸€å¤§å½±å“å› ç´ ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjJkODVmYzdhMzA1ZDdlNThhNTRjOTA2NzVlYWM5ZmRfdE1EUDNaU3o1ZUF3aDFseXhoNHdiTGZEZDJ0VTRhRUhfVG9rZW46Q254MWJZdExnb3ZObHB4d3l5dWNwVjhjblBkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ros2 topic pub -r å‘å¸ƒæ¶ˆæ¯çš„é¢‘ç‡ è¯é¢˜åç§° æ¶ˆæ¯ å…·ä½“çš„æŒ‡ä»¤ï¼ˆè¦ç”¨jsonæ ¼å¼ï¼‰

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWM5YTk1YmNkZGZjMDBlZWMwMGY5ZWU4ZTkzNjg1NGJfYjlEbVZZeU1sWm1KRFp6QncwMGlKRmZrRDIzaWFhMW5fVG9rZW46V2NqTmJiY2hZb3ViQmF4V0tkNGM5alNyblFkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MWU3MTNkYzAwZGUyMTQ4MTg3ZDZlOTRmMjIzNzZhNmNfSnBHRDhFMW5FSE9IcHUxYmdvR1E5Q0lka2JCUjlJUHFfVG9rZW46Q2ZMRmJGaEtUb0VnRjZ4dEdxcmNWOFh6bm9mXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGZiMjI4N2E3ZTZiYzNmOGE0NzI3NDcxMzk4MDZiODFfa2xKNmc1UXVsMU4wcWJBM2VWWWxNb0ppNnFyZmZyNkpfVG9rZW46R1luRGJWNXhGb2lHcml4U3NZUWNIbEhwbmVmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjBlMTA0MWI0OTMwYzdhNzE4NmI5ZmUyZGY4Mzg4MmVfd3NBenFWVU5vUG9hSzBWd3hWa0kwYjVKMGZDNVRTeGVfVG9rZW46T21GTWJHR2ZBb1RUaXl4RzIxOWNXc2JjbkhlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmU0MGMzYjllNGMwOGM3ZGUzNWIwMzJiMWY3MThkNmZfV3A5SEJqSkgzVjB2NUZBZlh5ejI0NXZ5MnhlMzRqemFfVG9rZW46RHdoWmI2bFY2b1N4OEl4aTB0OGNLNlpEblFnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjJiZWMzYzlkZDNkN2IwNGE1ZDY2YTcwNGQxMjJhZjNfNzQ2eHRhQTk1b2tCYVJtS0l2YzlxQ0RPM2g1dFVGa3pfVG9rZW46R29HaGJjQUxLb1J3YlB4QVA5U2NpMkVnbjllXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

clearæ˜¯æ¸…é™¤ä¹Œé¾Ÿè½¨è¿¹

killæ˜¯æ€ä¹Œé¾Ÿ

resetæ˜¯å°†ä¹Œé¾Ÿä½ç½®é‡ç½®

spawnæ˜¯äº§åµï¼Œç”Ÿæˆæ–°ä¹Œé¾Ÿ

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjIwMzdmYWE3NzdlZGMwYTM3YmQwZmZlOTczZTg5ZDRfZHRPVWhmbTlXS1RvdE9PeGkzNU0zbE1rN1B4dXIyMXpfVG9rZW46UG9BNmJMRVVkb1dPSmJ4bUpUU2NmemNTbkFmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¯ä»¥æŒ‰Tabè¡¥é½

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWIwOTMxNTRiZDk2NmJhZmEwYmRhYTIyZGU4ZjUzNDVfS1R5RFhCcG5KaWJFSVFQVElIRWdTRGFIRTk5UDRCM1pfVG9rZW46U2dBdGJGNnA1b3lHeXF4WnFLWGNwZzZnbnRlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzJjNGE1Y2RhOWVjNGUzY2ZlMjJhMWY3Y2IyYWY3MDhfdE4yS0ZZdXBqY2tZOEt5SUQzT3VFVG1PYmN3VlgxT2hfVG9rZW46RjZWY2JEanRJb2NGNEF4YUJ5ZmNUbGN6blhiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

typeå’Œfindæ˜¯ç›¸åçš„

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDlkNzc0MGZkYzJmODljZmI1ZjEwNzhkNzhkNzY2MzJfQ0JzYllZZWJFTFViU3hVbkE2VzdEbHlyVHVmajFHTnVfVG9rZW46VVYyYWJkNGUxb3dFZGh4ZU5EZWNDQTZVbmVnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

emptyå°±æ˜¯ç©ºï¼Œæ‰€ä»¥æˆ‘ä»¬åé¢å†…å®¹å•¥éƒ½ä¸ç”¨å†™ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzRlNDg3NzliNzQ2NDNiMjJhNDNhYThlMmJiOTk3MjlfR251VDRVeFVJalE5OXNGVWZybDYzNXN0eEFaTVVITmRfVG9rZW46QldvSGJHSXNNbzhEWHF4M1VrQWNnVFlKblZiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTZmZjUyYTZjOGJlZjBkNjU2NTM3MjFhYWE0MjRjNDlfVXc0djNvbVU3WE1WSWFqWWhoSld1MnRlUElHbUNheHBfVG9rZW46Rkd4SGJNbHJDb29FaUN4VU5oMGM5Mm16bk9iXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDczZjljNjQwNWVkM2E3MmFjNmI3YmU5MzIxNTU3ZWVfbmZsMktDRldWMmc1Sm5xampjblBzNGZGc3pIZjJjTzlfVG9rZW46WXp0aGJnZDVyb0h4NWZ4RE00dGM0SmxvbnFkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Njc5NjNjOTFhMDkxN2Q0NzY5ZjBlOTQ4ZGYwOTQ5NzJfYUp2Q2JLTXN0M0pjM3FZV2wzamQ0MTVKYzRmWlVMaUlfVG9rZW46QWlXaWJoTHpMb2hRdnR4elllNmN0dVoxbmo4XzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2NkMTFlYzgwZTIxOTJhOWE0NzgyMjI2OGI3YmJlYjNfeURhNm5Jd0ZiYXFhZmJGS0FNQkZJUVl1ME1hbUFIVmZfVG9rZW46RkN1VWJHTWFhb1FGa2d4VnZPMWMyZXR3bmJnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTJjMzE1OGRmZTZiZTg5ODc3Nzg5NDgzNzhjYmFkMGFfMzVZak12WXd5aXVNRlBQcDZjc1F0NVVEVG9ZQ0VwandfVG9rZW46WHkwSGJSV3FHb2hFTnh4V1Zyb2NQdkM3bjdjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¯ä»¥åŠ ä¸Š-fæˆ–è€…-feedbackæ‰“å¼€è¿ç»­åé¦ˆï¼Œè¿™ä¸ªè¿ç»­åé¦ˆæ˜¯èˆªå‘è§’å¼§åº¦

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTk2NGViOWZhZGEzYjI4N2Y2YWFkYzQ5NjM5ODY5NGJfOG54YzFYU2hhOElSMmNRZmlnR3ZPUWsxVWp5R0todnJfVG9rZW46WFRwQWJLMVJGbzZVNFF4endWMWNsSE8ybjVkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2NjY2UwMTVjZWQ2MGFhYmJmMzA1OTJlZjEzYjVhNDNfbnN5d3FFQUhWOENaZDB0b3dYSmlyV1dTOUVnVFhlVm5fVG9rZW46Qm5XUGJwU3pXb1RRWjJ4THU5MWNFbGh6blFmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NGFhY2FhOTVhZGNlYjhjMTMyMGZkYjAxNmE1NjliZWVfejBMcTJQd3R0RTE3QkZLT3MyUUlyZHJHUmRxRjRBN25fVG9rZW46UHZ2YmJuZmZab3N4MFZ4eUdXbGNqRFZobmkwXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDZmNGZiYmM5M2M3ZjdkN2IyYTBiMDg5NjVjNjIwZTZfS1MxaHpUdkU4RERYQWxGZFkzelRiVVhKOG1uUkpYTndfVG9rZW46QUJHOGI3TE9Kb1pNeHJ4M0lxVGN0U3g2bk9FXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWZlMzNjM2JjNmUxNDI0OWFjMGNlNzI3ODk1YzZkOTVfZ1poWUw1N01EVEV2SFBtTlhYQ3E5d3pxV3FlWGhvZHFfVG9rZW46TXdTSWJ5TXJPb0FHWGt4STFPS2NRZEJUbmVnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmEzNGVhOGNlMDIzM2IxYjJlMDZjZjE0ZjQ0OThiMGZfaDcxalJjUDJnUFg5WFRUZEZ3SXpQN1laMFloODJSbmxfVG9rZW46WGd2RmJyUEF5b0RKTlV4NnhxYWNIQmJrbmlxXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTI1YjI2NTk5Yzk4MzdjNGJhZmMwNWU2M2VhNGZlM2NfU25lTDlEeHNid2JZenE1aHN4T1UwVDdWS05nR1lrcVZfVG9rZW46QmttUWJ4djBab2I1NWZ4ZWdyTmM5M2cxblRiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

åˆ é™¤ä¸æ˜¯æ‰€æœ‰å‚æ•°éƒ½èƒ½åˆ é™¤ï¼Œè¿™é‡Œæç¤ºä¸èƒ½åˆ é™¤é™æ€ç±»å‹å‚æ•°ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Zjg0MjQwZTllOGYxYWNlOTIzNjkxYWExMGRjY2YzMTdfdXVQQzRzbE5RalZscWZaUDRkSllxaWxyeWhNU084b21fVG9rZW46WGxnWGJtYzZpbzl2N0V4Wm5DUWNGQk9HbnRmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æœ€å¤§å€¼255ï¼Œæœ€å°å–å€¼0

æ­¥é•¿1

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzExNzhjNmIzZjhiNjE2YjhhMWNlMDNkNjZiODk2NzlfOW0yT01MakRXeVpHZDN2SUtFWVRaUGUyWGV1MVN2OUpfVG9rZW46QlB3UWJwNk9mb1RGNXF4WHBJTmN5TExxbnZTXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¯ä»¥æ˜¾ç¤ºåœ¨ç»ˆç«¯ä¸Šï¼Œ

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzYzNzQ2MTQ2NjEwY2MzY2Q0M2QyMjNkMjg3ZTFiZjFfVjhjd0VlQTZyM0pmaml4cnpDVjBMOVJidUxxajVSMTVfVG9rZW46UXZjMmI5SGRtb3BTc3J4cVVIMWM1R0U1bmxoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTVkODMyMzk3NmRkNzQzMTNlMDU2MjcxYmJkZWYxMjFfSjFZZG0waE1PRWVUSGFsVnpNdjJqaE93N2s0bWdLM2VfVG9rZW46VWRNdGJNR0o5b0wzWEd4VmlQRWN6VjRrbnFoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¹Ÿå¯ä»¥å†™å…¥ç£ç›˜

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWU0ZDUxYTUwN2M2N2VhM2RkMDQwODY5ZmJmZDU1N2JfN2JiRUlScWx2aDVoM29HZkJVdVZQSnNEOEdia2VOMW1fVG9rZW46SWh1UWJoVlBDb0d0OGh4NEt0T2NXOXhrbnBlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDgzZjg2M2IzMjEyZDE5YTRiNWE1NTNkZDZkNDJlMDJfdHhJeEcwdjRDaDh6WEZ1VlEzRDhDQXljN3ZUZW1FTnpfVG9rZW46Sko0ZmJQSDJwb25MMWd4SXlUN2M2RVE2bk9lXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å½“ç„¶ä¹Ÿå¯ä»¥ä¿®æ”¹

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjY2ZWYwZjc3NDk5MzZiMDVhOTIxN2I3NmVhYWQxMGZfRnFwT0hYeXlocDlONzBiUWRYb05wbHBwbFRtcFNhRlVfVG9rZW46SmRmbWJEaE02b2xPMFZ4UGp1UmNHMzVRbmVkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGU1NTYwMmY0ODU1NmY3MzVmY2UyZWVkMGNkY2QzMmNfRzZDdG5xTGdKMUJNNVFqWlJlVTBqQ3hoUm1MVjE5dk9fVG9rZW46WTFkZ2JKUExjb0NZRWx4eGw5UGNqazd5bnBoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmNjMGE5MTEwMGViY2YzYmZmYzQxOTBmN2QyZGViMGFfdnBudHBGZ0M1UFQ3N0R4amZnNTAydmJZMEdFelFhSERfVG9rZW46UUZrU2JnTDMzb3k2dEZ4WEtuaGNiSFhvbmpKXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTcyNzU3YjZhZDliNzcwZjlkMmU1NDRlMDU5ZGI4YjhfcThJYWhFN20zSU5PR3NJZUFodVI4a0R0NUVVOVFlUHFfVG9rZW46UTNpeGJYSG1Hb3ZlU3B4WkFnQWNhRmRNbnhjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2M0YWQxNGE4MjkxOGUxNDhlNDQyOTg3N2Y4M2Y2NzVfbU02MWhKbkdMS2t6cU9CelU0dllGYXpPZHd5dWxjcVhfVG9rZW46T3pyMGJaTDVDb1ZhUHV4c1ZWOGNGSWg1bnZTXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¹Ÿå¯ä»¥ç”¨ROS2 RUNæ¥ä¿®æ”¹ï¼Œ--ros-args -p åé¢è·Ÿ é”®:=å€¼

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzU4ZDJlNmU0Y2NhYmQ0MDg1ZmZlMzAwYTA1ZWNjMzBfeEQza0UyREJnOTVlTkJha0pCTnJYcVdTZDF2QzM4ZjJfVG9rZW46SDNBN2Jwdmc2b0tYTzF4NXB4SGNsQ1VjbnZyXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzA4N2E4M2FkNTQ3YzY0YjI1MmRhYTU4ZTJjMjljYzdfdVFRY2diTWwwOEZWOHJYZDVVS3RhWXhQNDUyRmc3eWpfVG9rZW46RjRUVmIxRE52b1pXR2p4T1JuRmNvUWZzbkdlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2RmMGI5MzI1YzljOTJhZWY3NDBjNzBkY2JkYTMyNTJfb2RBSkdmb1Y4cDVGSWVTWHNzZlhVWDd2Wnd0eEhSRzNfVG9rZW46QkZHS2JXTnhqb1lrWUN4V2hNb2NjM2JxbmNjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ROS2 RUNä¹Ÿå¯ä»¥ç›´æ¥è¯»å–ç£ç›˜æ–‡ä»¶

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTVhMDNhOGE3ZjQ2ZTFlNGY2YzI3OWRjOGQwOWM4N2ZfdU1jOG5iOFZEV2pwc2VRWXBGRHVRaUo5cEdkaXZYOVNfVG9rZW46U20yaGJSZEVNbzUwYlB4M3AzemNGYThtbnVnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

2.  ### Rqtå·¥å…·ç®±
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTNhNmIyOTdmM2MwYjFlMDJiYzVkMTkwNGY3MjBhNzlfRU5MQjJ0TDZTMjlHc1ZvbVFyc2MwbHZiQWJpYnB2ZldfVG9rZW46VWFOMmJNYjNsb3A2bVV4R290WmN0QWVkbkJnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2UxNzZiNjkxYWZmOTU4MmY1Y2E0MGM5OGIwOTc5MTNfMHdiMnpqQmJTclZvbk9VWEo3SGo3SkhYSTA3bERZNmVfVG9rZW46WjZVSWJGWEExb3JMNTF4WWVVVWNGeXJrbmNmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzE3OWE0NDE3N2JhYmVjMWJhNzAyZGI4MWQ2N2FjOTdfemJaR1Zaa2VZdFFzVTVTYWdOMlN2aENIOTI5QUs1VTVfVG9rZW46Rmp2NWJxR1lBbzQ5ekh4UTlTSmM3ZGNhblBjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjhhZGFjMmQ3YmNkNDFjMWQ5Yjg2YzgwODkxZTU0ZDVfS0RwZkoweTdUY215eVluaU9nOWlrSGs5T1FId1RNeGtfVG9rZW46TGZFaGJ6UDJJb0tHOEx4SUJxRWNNYTNVblRiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTc4OWEyMmQxMDgyODI3MjhlM2NlZWNiYTQ3YTc1YWRfVTdLRms2ajZQb1hDTlh3dXc0SkFnSXNmajFZYTBBMGhfVG9rZW46S0RaVGJIUzFNb2daY0x4QUxJV2NzNFNDbmxlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjFhZmM3ZjE5NzcyYmUyYTA5Y2JlZDk2OTQwZWViNzZfdnlmb2EyOFBNWnd1cmhzV1lKY1FBTThwQzNZcXNOY3VfVG9rZW46SXFrdmI3bDZmb2lUQUp4UnlKSmNYQWY3bnhkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWJkNzVkNjM0ZjEwZDMzYjIwZTRiZjgyN2NhNzExZTRfNnhLQXJ6U3VBWEtmdDB3VVFZS0wxQkpkQkhxVWU5cHNfVG9rZW46QnBrOWJOcjdsb3pYc0N4UU9BOWNCTkQzbmNkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjNhZmZlNTYyYWVkMzA2NDhiMDk3MGMwMjJlZWVkNzZfQmZhdUtUaHdzWnZlYm4wN0djZlFUdG15NWdBZ045M2NfVG9rZW46TkpHc2JQTnRQb2lzUnB4TmNydWN3V05ibjViXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGJlYmYxNGQ1NTRlNDAwMjk5YzMxOTkzZTJkNThlYTFfVld2cmV2WFphUXhjWHpRU3VPU05TdXVwODNpZlhVVzZfVG9rZW46SnpwWWJuck9Lb3FkTUp4SUZaVmNYS01ZbmVjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™ä¸ªæ˜¯æ˜¾ç¤ºä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´å…³ç³»çš„ã€‚

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NGU1YWMxYzZkODBmYThlNGYwYmY0YmEzZDcyYmRmNmJfWVhYWWdzUXVENTJ2Y3FWM3VybzRjSHZXTWVpeTZaaTlfVG9rZW46SFpwdGJ1dGNlbzZOMG54TWlTaGN0Qnd6bnBoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTBhZDY3YmQ4ODU3M2I5ZTQ0YmEyMmRjNmE2YjgyZDhfZFhTS0JBUU1FamtRTGlUOXZydG5VWTh3ZWRWTmJDSTVfVG9rZW46QWh2ZGJiTTZxb3plN0V4NGg1M2NSTXJsbnFjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™ä¸ªæ˜¯ç”¨æ¥å‘å¸ƒæ¶ˆæ¯çš„ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzI5YjNlMTRhMzkwMTE1MGFhODdlZmVmNjJmMjMxMjBfVzlWM3JBNnZ6U3ZuWTNnMXFRb3JicUJYTmd2TTBENkhfVG9rZW46UUVNNmJiQ3ozb0VQVnV4UzBwa2NTNkhvbmpiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ç‚¹å‡»æ·»åŠ æŒ‰é’®

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmI1MWIyNWQ2ZTdlMWQ0ZWUxZjMxYjM5ODYyODRmNjVfbEhHWjJLaWlheUExTXNPd3hEVFN6ZVBzekJkY3hKOGVfVG9rZW46TmFDY2J4VWJSb1RjaUt4SlU0UmNZbkZVblBnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¯ä»¥è®¾ç½®çº¿é€Ÿåº¦å’Œè§’é€Ÿåº¦ï¼Œé¢‘ç‡ç­‰

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDEyNTVlZDgzM2EyM2FmMTcxNjJkNzRhYTFiMzI4Y2RfWG1NUDdtamowZkpOMG5UNjE1MzByOWhpMUFyUTBlcEFfVG9rZW46Rmd4Q2JNTE52bzlFaHB4SXdCM2NhcmlFbmRoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è®¾ç½®å¥½å‚æ•°åå‹¾é€‰

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDQzMTk0MWMzNTUwN2Y3ZTgxMDdiMTYyMTM1Yzg2ZTlfWW10dUxMWVFjYlhhbjlTVEtRVUhzNHV5ZlhxWjJaVHdfVG9rZW46T0tZQ2JJTEFCb2dYWFZ4cmVZeGNKTlpabjljXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWRlYjFkNTUyMTNhMDE2N2IyZDIzMDgwZDMyN2Q3MzFfWnJnd1k1eHRWUFJrNXdvZ29jMURjV2F1c1RiS3lXQmRfVG9rZW46TUZUY2I4V0pub3lKRGF4a2c5U2NRVTNLbm1jXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTk1MjFjMjliNWFkNGZhOTg0NzMyOTMwYjQ5MjRiMjFfOWYwZmNMS3B4dmZXWVloM3E5OGVuaFRVdUdIUkwzaHFfVG9rZW46VHRySWJIcTcwb3NJbk54TDhTcWN0ZUd1bkNiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjIzMDAwN2RiZmM5YWE5MzVjMTc3NmYzOTQ5YmRhODVfaklXTlplVU9zNzZiSEhNc0ZDa2ZER1FKajhKS2k2QlZfVG9rZW46TkszbGJQa1VPb1p4Wm14bXRCUmNZamZYbk5nXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

call /clearè¿™ä¸ªæ˜¯æ¸…é™¤è½¨è¿¹çš„ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmUzMGEwMzI5YjFjZDYwYjE2Nzg4ZGRmMzc3YTc0ZjBfMGhZNTJmVzlmaTVzSEZ5OWNsblFQcHZINWZXaklZUmdfVG9rZW46R1hSMmJJdkVhb1h6bGF4MmpUWGN4blZQbndnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¹Ÿå¯ä»¥äº§åµï¼Œè®¾ç½®å¥½å‚æ•°

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmM5NTMwYmMzN2IyMDFmNWEyOWUwMDhjNTYwOTJkZDBfZFczV3JZRkNPbUV2bXhxZXRZRkdDcVJCQnlOdThaVWNfVG9rZW46Sk96UWI3Yll0b05zSTV4amNOUWNocGRNbllmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2U0MDFmNTZhZjE0MzJhZGFhNzBlMWM0MDBkYWMzZjVfWFRpbFU2VzRleE9XcXM3QzM4bUJyVExIYjJqRnhpQjZfVG9rZW46U01QRmIxZFJ2b0FCTjF4ejZsWGM3U05ibmRoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzJjYzg0MDU3YmQyZmEyNDAxNGEwZDU0ZThlNTg5MzlfUmo4VGF0eW5kVmV1dFNUNFFwY3ljUjhKemhoZXpQanlfVG9rZW46S2IyTmI2czRzb2dlSE94ZEM1VWNYdk91bnNlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™ä¸ªå¯ä»¥ç›´æ¥ä¿®æ”¹å‚æ•°

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzhiYjZjNzk1MGQxMGEyMTNhYmVmM2M3NTk3NzBkMWJfQW5uMEhNVWVmTllnMmhLaFA0ek1rMXVBV09HQjF0NTdfVG9rZW46SzI4WGIwTE5Hb1FaV3R4elA0WGNlZEFwbmhjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

æˆ‘ä»¬ä¸èƒ½ç”¨rqtä»£æ›¿å‘½ä»¤è¡Œï¼Œè™½ç„¶rqtæ›´æ–¹ä¾¿ï¼Œä½†æ˜¯å› ä¸ºæˆ‘ä»¬åœ¨å·¥ä½œä¸­æ˜¯è¿œç¨‹æ§åˆ¶æœºå™¨äººçš„ï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡terminalæ¥è¿œç¨‹æ§åˆ¶æœºå™¨äººï¼Œæ‰€ä»¥ï¼Œå‘½ä»¤è¡Œå¾ˆé‡è¦ï¼Œè¿™æ ·ä¸èƒ½ä½¿ç”¨rqtã€‚

  

6.  # Launch
    

1.  ## æ¦‚è¿°
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjU2MGUyM2Y5ZmMzMmUzOGEwNTRlNjA0N2ViNTk0OGNfQjFWcG9wWWluaE10YmFBa1dGcWJOaE1DVGlTYmRiYnpfVG9rZW46TGFWZ2JTQXZZb1NOT1p4Q2N6cGNYbkNCbmNoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

rosbag2çš„ä½œç”¨æ˜¯æ¥åºåˆ—åŒ–å‚¨å­˜æ•°æ®çš„ï¼Œæ˜¯ä¸€ä¸ªæ•°æ®åº“ã€‚

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjE5MmQ2NDYyMzUxM2EwYWYwMDQwOWFjNjViYTI5ZjNfMDUxVEc1RHpueDhnOW1JVVZZb2VhcEJBU1IwTDh5MllfVG9rZW46RGFKY2JtMTRlb0RUZkt4b0dqMmNxb1N3bnliXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjQzODViNDU1ZTc0OTNiOGYzNDE3N2YyYThhZjEyMjBfWEVPU3N6dkgxYUEySFJuVHZRenltQk4xWkFrU0dqeDBfVG9rZW46TURldmJYUjV0b3lkSjN4elB4QmNQMmlsbjZnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzdmYWU0ODIyNjg2Njc0ODg4OTA3MTdjODcyNmVjYzNfQ0JyWUpwYk9GdHBPc01yb0xDemNvYmRrSDdMd2lMZHJfVG9rZW46WFV2Z2JjQ3h6b2hJWER4MjZxamN0WWNqbk1kXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ros2 launch åŠŸèƒ½åŒ…å launchæ–‡ä»¶å

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTFjYmIxMTk5ODY2MDgyMWQxMWE1NTZmZDBjNGE0ZDNfN251UUhrWHpkRnpmQmZlR3o0aW81OFpHS2VKQ0RsUjdfVG9rZW46V2VKZmJSVk5jb2pEd1F4SjJXaWNKYjJsbnJiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzA0OGYwNTg0MmRlZDNmNmRhOTExZDRlNDUyNTFhZmVfSWtSVFRuQWFKZDhjcDlpb0dJMHJGWFRMekd0eW9BUmRfVG9rZW46Unh4RWJmMHFkb3NEdkV4RmZYaWN3UGd6bnFlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjNjNTQ3NDFlMTU3Mzg5YjkyMTIwMDcxMWJlMDhhNjlfZGl1SHNzWUJUdkcwaFZ2eks3dDhORHJRUnN0bjU1TVZfVG9rZW46UmloZWI4V0VubzB3TjZ4NmczdGNnU1B5bkxlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDc5NTA3YTMwOTA4YWI5ZDNhN2RjOGMxZTBiYTUxODlfR2ZTcWc4WEJiVjV1cmF1Qm5saVV5cHNJT2hyU2l0MUFfVG9rZW46RklsN2JKUUh3b2t1VmN4RVdNZWNIa1hEbktGXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NGY0N2Y1YzA3ZGI1NTZmY2VlOWE3NWIzYjc4NzUzMDFfalNBc2dpN0swVlVPNmd1ZkFHYUg1eU5lNHU3MmFKMm5fVG9rZW46RVJqeGJKZ0VHb2tqQnN4S3o0QWNZS3B5bk5kXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ros2 pkg create cpp01\_launch --build-type ament\_cmake --dependencies rclcpp

```Bash
ros2 pkg create cpp01_launch --build-type ament_cmake --dependencies rclcpp
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGM5Y2YyMDRiN2RiZTgzMDMyNTgzYTc4Njc5ZDFlNzNfY3dYckRBdlpJTkVFdUdnYXZqWlBaNzBhTzRLSWZTRzJfVG9rZW46TUZZT2JOS3Q4b1dCcnd4bkZDRmNReUc1bm9lXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Python
from launch import LaunchDescription
from launch_ros.actions import Node

å°è£…ç»ˆç«¯æŒ‡ä»¤ç›¸å…³ç±»
from launch.actions import ExecuteProcess
from launch.substitutions import FindExecutable
å‚æ•°å£°æ˜ä¸è·å–
from launch.actions import DeclareLaunchArgument
from launch.substitutions import LaunchConfiguration
æ–‡ä»¶åŒ…å«ç›¸å…³
from launch.actions import IncludeLaunchDescription
from launch.launch_description_sources import PythonLaunchDescriptionSource
åˆ†ç»„ç›¸å…³
from launch_ros.actions import PushRosNamespace
from launch.actions import GroupAction
äº‹ä»¶ç›¸å…³
from launch.event_handlers import OnProcessStart,OnProcessExit
from launch.actions import ExecuteProcess,RegisterEventHandler,LogInfo
è·å–åŠŸèƒ½åŒ…ä¸‹shareç›®å½•æˆ–è·¯å¾„
from ament_index_python.packages import get_package_share_directory

def generate_launch_description():
    return LaunchDescription([])
```

2.  ## launchåŸºæœ¬ä½¿ç”¨æµç¨‹(C++)
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDhlNTg3NDY2ZGYyMGM0MmQyYTFmZmNkYWM1OTQzNmVfbG5EWkVXZUZpUHpPdWZ4Qkk0Y1BLVlpYbkhibUUzbkpfVG9rZW46VEZiaWJhYXVIb1J4UzF4T0dBN2NjWDJObllnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjI0YTRkYThmMzFjZmJjZjdjMzgxY2E4MzlhNjM1MDNfcmJrSjVlY3ZXSENlQVpQWEMyWEl2TDVENngxSUVFU3hfVG9rZW46V01lMWJzbHhKb3loY1F4QXZGbmMyN0U5blFoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmUyYjZkOGQ0YzA5NDVlNWFlMzRlNjk3OTBlMGFjYjBfV1pwRlpDRVdtU3RoMm9rN0xSYWRqMVNVVEt0RmRsR0RfVG9rZW46TEV2N2JsdzhUb0dBcUZ4TllWSWNURE14blBiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Njk4ZjE5MzBjN2VmNGE5YTI1Y2IzMTc1YmM1YzE0YzFfTnZ0VFhIaXlicWtycEFOYzdNUFU1QkpRSmVtVnJHcmtfVG9rZW46Um43QmJtT1Fub3V5Q2h4UTVNMGN0bXJmblUzXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTY2YzIwYzVmOWI3MWRhMzdhZTBlNzUwNjNjM2QxZmVfSkdNT3ZxNzZGclhjd2xMNnAxTFFMRzR6ZVlGYTQzamNfVG9rZW46RGtOdGI3MWpLb1c2bVN4cFo4a2N2a1FrbndlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjNhNjE1Mjk5ZjllYmNhZDA5N2NlYmNiMzIwZDg4Y2JfM0Z0cUYyU2V5WDJPOERIakk3UTBuWmFTcDJ2WVFicFFfVG9rZW46TWpFWGJTUTNMbzRKd1V4RGFmaWNjdkxObndoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjJlOTQ3MTg0ZmYyZjFlN2I0ZDk0ZGY3OGNhMmQ3YjRfYU42eXJudzhOb0FmZHBndzBsc2dJdmljWGxFaDFnYXlfVG9rZW46THI2M2JUcDNSb0xJb2l4UUZwM2NmWWlRbkNmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDQyYjQ0NDVjMTg4NzMxNTg4NWQzMTg1NDQxNzdlYzRfMTExVnh3dmtaV1hCMHZVWDlXczNJc1Q4M0ZvV090eUZfVG9rZW46UFdiQ2JmNmZjb2I1SkR4RWVwTGNhM2R3bnhkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODdmOTk1ZDVlNmVmZTM2OThjMzM2NGQwMmQwN2QzYWRfZ3cxT1NlUkMwOW52b2pqcTlzcjFIOFVJWkJ1UzFCR29fVG9rZW46TU1pbWJBVU9ab3lyZTh4bTQ4UWNEV2x5bkdjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

é…ç½®å®Œè¿™ä¸ªï¼Œä¸ç®¡æˆ‘launchç›®å½•ä¸‹æœ‰å¤šå°‘launchæ–‡ä»¶ï¼Œåªéœ€è¦é…ç½®è¿™ä¸€æ¬¡å°±è¡Œäº†ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODBmMGJjNDU4Y2FiZDI2ZDc0M2I1OGFlOTZjOTk4NGZfR0ZMRmZaOEdJbjVqNmdVWmI3VEw5dG5PM1hqc3JrZmtfVG9rZW46TkVlV2JxMm01b1hKeEJ4TTY3TGNmZ1VsbmpjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjYxYmM3MjQ3NDNmYTgzYzIyMWYyNzYzNjZjNDA5MmVfWE1DU1lKWGtWQ1VmMHJiSUYzY09teDNBNjMyZ0lvT1VfVG9rZW46UGowWWJhVWxQb3RISUN4QW00VWNQWTRSbkZiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTMzNjdiMDhjNWY1ZTY1MjFmZjQwNmJiNmVlMjhkYmRfczhBcVEycUZqc0t2b1MwUDBiM0pxYzd1ZWNodTIydUdfVG9rZW46TFpRWmJmQXlibzdSZFB4N24wbmN2cUhRbjFnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™æ ·è¯´æ˜æˆ‘ä»¬cmakeé…ç½®å¯¹äº†

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjRkZGUyMzExNDJiOTJiZTE1Y2I5MmMxOWFkMDk5MTVfNkRDcmVQY05zY3N4cXVMWkRLSjhIZ3FPTE5ueGppbDFfVG9rZW46RWd6cGI3SnlQb0lKTVl4Q1lUUWNIeHQxbjdnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTY5MWFkOWZkYWJiOTM1MmRjN2VmMGU1ZGNjZWFlYWJfYnM3c0VDRUlIT0hLdFpqeUk1ZEJ2YWVNYzE5Mk5INHNfVG9rZW46T1pBdmJJVVdVbzFQeXJ4dzZHWGMwRmVZbkxlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Python
from launch import LaunchDescription
from launch_ros.actions import Node
å°è£…ç»ˆç«¯æŒ‡ä»¤ç›¸å…³ç±»
from launch.actions import ExecuteProcess
from launch.substitutions import FindExecutable
å‚æ•°å£°æ˜ä¸è·å–
from launch.actions import DeclareLaunchArgument
from launch.substitutions import LaunchConfiguration
æ–‡ä»¶åŒ…å«ç›¸å…³
from launch.actions import IncludeLaunchDescription
from launch.launch_description_sources import PythonLaunchDescriptionSource
åˆ†ç»„ç›¸å…³
from launch_ros.actions import PushRosNamespace
from launch.actions import GroupAction
äº‹ä»¶ç›¸å…³
from launch.event_handlers import OnProcessStart,OnProcessExit
from launch.actions import ExecuteProcess,RegisterEventHandler,LogInfo
è·å–åŠŸèƒ½åŒ…ä¸‹shareç›®å½•æˆ–è·¯å¾„
from ament_index_python.packages import get_package_share_directory

def generate_launch_description():
    return LaunchDescription([])
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzNkMjllMDAwZTI3MDIyZGVhMDM3YzUzOGFkZTIwNjVfM0xZSVRESVMzQWxxTlhVNjNkUXNaenVvek93QTR4Sm9fVG9rZW46RjdiRWJmVVU2b3VtdUF4MzgzZ2NUZ2dDblNiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGQ0YjkzYjdiMjU3Y2Y3ZjY2MzI0MWI1MGE5ZDFlMDhfeldmN2hmUXRNbFBYaFVkWmljdHlXQzZDb1pKV2hmZUxfVG9rZW46S2w2N2Iyd1dmbzhlTmN4MjhsNGNtR3l1bnNkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmQ1OWRmNDMyOWI5Y2EzYTU0YWFhY2YxNmRjYmFhZGVfWnphdzhXOVI3anZYdlBrVkdrOUFYam0xVmc0S0pGQTRfVG9rZW46T3c5ZWJQbWg2b0VwNHl4N1hJNWNVSTdvblNkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTY1ZDBkMWM2OGFlMTVhMTQzODIwZGU2ZDA1YmM5MzVfZ0hrTzlnQmtaV1lzSFQ2djhwN0ZMVE5aN01vUEZiZllfVG9rZW46SWx5MWJzOXJKbzMxSnZ4WlRnSWNyOFN3bkhmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```XML
<launch>
    <node pkg = "turtlesim" exec = "turtlesim_node" name = "t1" />
    <node pkg = "turtlesim" exec = "turtlesim_node" name = "t2" />
</launch>
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzZkNTVmNGEzMzc5ZjM4YWYxYjAyYmU4ZmEzNTZiNmJfT3VPYzBrdEZoOEl2T3BCQ2ZiWUF3Vkl6bElVNExrQWpfVG9rZW46VGc2N2JqVVpMbzRNZ0t4ZzRKZWNsVk1UbnNjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDM2MzNiNTU2Nzc2MDliYjA5MjY2YjliYWQzYmNlM2NfdllpT01zVDFWbHFMQnl2bEYxb1JkN2Q1aXM4SmJIZFhfVG9rZW46WmNkRWJ0NENSb0RicVp4WW9zSWMxUHpLbjlkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```YAML
launch:
node:
  pkg: "turtlesim"
  exec: "turtlesim_node"
  name: "t1"
node:
  pkg: "turtlesim"
  exec: "turtlesim_node"
  name: "t2"
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjcyZjIwZTQ0ZjkwODE5MTc5ODRhMjBlMmJmNGUyNzRfZUdJNDVPRE85R0Z4SHJWbkxLZktlQWNQQXpiTnJIQWZfVG9rZW46WG4zbmJZVlBlb2VUMTJ4UWRjdWM1TG0ybkdkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWJhMmFiZjc5NTg5ODI0NDE5NTg0ZTIwNDFlNjAyZjlfNmMxVXNObmFKeGwyaEhDV0NrTVRSZTE4dm9ucWlHRTFfVG9rZW46Rzg5TGJqWG9Xb0xIOXZ4em9ESGNyQTQ4blllXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æœ€å¥½æ·»åŠ ä¸€ä¸ªä¾èµ–

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2RlNTU3ZTM3ZmYzMDNmYTNmYjlkMTFiZTllNTU0ZTFfd20wWWR6UEF3ZHlkNWxYdU9vRFhFaXhUV0tOVklxcEZfVG9rZW46SjlLUWJDYURub3lNcWl4dW9FNGNXeHZobktnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmZhZTMyOGM2YWRkYzEyZDY2NWYyNTEyNzQyYzYwZTlfMGZqVzFkNnhCeWFZQmFoVmZmZWJ5bzNpNkxiQUZPVWVfVG9rZW46SlRmRmJjQ1N1bzE2VzV4eGVVZWNWNDYwbnhjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

3.  ## Launch\_Python\_Node
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTAxMTcyYTc1ZWFmZjk1ZGNjYTk0MjBjMGMyYTc1MmZfTVhDbGJOWlZmVjRmSENUdzF5M1ViVjVObXoySzlRbTRfVG9rZW46Q0FZVGI2R3hTbzhwdGd4YzczWWMzN2xybmpnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2Q3MTUzOWY4YjZmYzdjYzM4Zjg5MmE5MDliZDJjNzRfVDZqWHJyNG9nUFJWaFNmUXhOVktra3RFMVc3cGtUTm9fVG9rZW46TVJ3QWJ6YzZubzNhR0d4aEdybmN5S25CbklnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGMxYjdkNDNhYTY2OGU1NDUzZjIzZmY0YmJjZTM2OTZfb3hOSFpOd1ptWmdiNkpsZ0kyZFhNUVhON0w3d0RaQm9fVG9rZW46UUo4SGJWZ3NUb2pkdzB4ZzBncmN4OXE2bmRjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmNjNTI0YTI4NzJmNTg4MmE3NTczNGM5MTU4MjU1MmNfZFBqZ0Q4TlJpSTExTmNmV0ZCR2RlR1FveFA2dWtvdkZfVG9rZW46RzZDYWJvSnlGb2xWYjZ4YmJBQWNaOG5wbm1nXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™ä¸ªæ˜¯æ ‡ç­¾exec\_name

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODAwMTkwNjUyODE5NjQzMmE3NzE1YmEyODljNDFlMzBfYnV2dzQzNTFuMkxRd3hZNU5YTHZHdDZORHBoVWY3REZfVG9rZW46QWlSOGI2eDJhbzBKZld4cWtuQmNJajFwbnVkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™ä¿©å‚æ•°ä¼ å‚çš„åŒºåˆ«åœ¨äº--ros-argsçš„åŒºåˆ«

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTc4YTcyZGZjYjViYWQzZDI1MDJjMzMwYWVjZDE0ZWJfdldzdkQxMlIxZDFPSGkxbmZ2Vno5ZERZYnh2RGNFeEJfVG9rZW46UU5RQ2JqZW5Wb3JBazh4TWhVTWNKTGg1bmdYXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDBhMzZjYjI2NDkyY2M2NjEwMDQxMTczODFmMTE5YjBfVG5Ib2NPaUNXdlhRRkQ3ZWkzNlBCSllwc1RpTDVkbW9fVG9rZW46REpvMGI1SERVb1BieUt4OWs5eGNCd01HbklnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjRhYzU2MTlkMzEzMmEzMzkxMDcxYjBkMzc2YzFhNjRfTjFxendGUFlsR1R3Qkw1WExFYUNXWGZBRHQxSnlpZ0NfVG9rZW46RXo0QWI5dlhUb2szSkx4TEdKWWNGdmJ1bnN0XzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

åœ¨launché‡Œå†™æ›´ç®€å•

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmYzMGFlMjk5MmVkNDg0NGIwNTcwZDEzODg4ODJiNGJfcXk2U1NLdHRQYnFzQm4zcHBaNE9KTFRqSkVnOTN3cmRfVG9rZW46VHpOSGJmTUU2b1czZkZ4ODYyRmNiNzFIbktkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™æ ·æ˜¯ç­‰ä»·çš„

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Mzk0MjU2NTQyZDgwNmUxZDQyYzBhZjVlNTBlYzI2YWFfOFJPaWdNY0w1bzh3V0FtSHNiaWVUcE1Bdm9Gc1B3SHNfVG9rZW46Q1VBdWI4djR3b1F4dDV4ZVd4MGNXS0g1bkFMXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2Q3YjE1YTkyN2Y5ZjM2ZGEwMzY3NDMwYTBiOTFhODBfcFdzYWxMQmNHVGN5ZlJtMXBMZk96UExDb3IzQ21Ib0JfVG9rZW46RmtORWJpa2pyb0g5ZUN4MUNOOWN4empkbnNCXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

{}é‡Œæ˜¯yamlæ ¼å¼çš„ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODNjYWRiNDhlNTI2NjEyMWMzYzYxZjNhODVhZTMwNTBfYXVFMktoVjdnNVhlcVJudlR2QUFaU1p2elMwcFVqTkFfVG9rZW46QUlma2JXcURpb1FScTh4RUdYeGNzbGxRblRnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æœ‰å¦ä¸€ç§æ›´å¸¸ç”¨çš„æ–¹æ³•ï¼Œå°±æ˜¯ä¸Šæ¥è¯»å–yamlæ–‡ä»¶ï¼ŒæŠŠæ•°æ®éƒ½å­˜åœ¨yamlé‡Œï¼Œç”¨åˆ°çš„æ—¶å€™ç›´æ¥è¯»å–ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTE5ZWQxMDdkODJjZjNlYmMzNzFhNjFmZjUyMmIzNjdfa05iMGpvSVA0T2NTZWs4T2dtWTB2SHczYlVVNEs5alFfVG9rZW46U2VrVmJDUDh0b3NnN0Z4SFFxWGM3cnJ6bkRlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTliY2Q3NjJkMjRjM2QwMWM5Mzk4YWU2Nzc5NDQwODlfOGt1dzE5YmhQQ21CdkwzSlpzcTh3TlBSUHc5a3EyeTlfVG9rZW46T3cwVGJ5Rzgwb2N0RkJ4Y1NpbmNTRVdqbm0xXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æŠŠyamlæ–‡ä»¶æ”¾åˆ°configé‡Œ

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODAzM2ExNDFjZWIyZmRhYzNjNTUzZGRkZDBkMzU5ZTBfUHVrRFBEWDZ2dmVRblBOd2FQS2M4ZjVFaE9sdjVKWFdfVG9rZW46Umd4a2JqSXROb2labmZ4b0VtU2NlNjlQbjhnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Bash
ros2 param dump haha --output-dir src/cpp01_launch/config/
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTU0M2E1ZTljMWUwYWY1NjgxMDY3NTU5ZjA4ZmI0YzNfU3MyMm1wSlYzUGVscUFZWUxsSXMxUXZIQURqbGoyMXFfVG9rZW46UjRrNmIzcFpjb0t3QnJ4N3Q0ZGNVanpibmtnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjhiMjA3NjU1MDI2NDgzN2NlOTNhNGMzNTFjMTY3ODFfazFVaE5uVkxaQ3VHNzlVVko5OEhoTVpoRDhvVXFRUjNfVG9rZW46SFdkWmIwVFFPb2JqcVJ4enVTaGN3d0tvbjViXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿˜éœ€è¦å†é…ç½®cmakelists

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTA4MGZjNDUwYWZkYjYzMzRjOTAxNTgxMDkwMGQzMjRfYmVpR0t4bWtCVjN5Zm1OSG5yV1V1MTNWck13MUt1U1NfVG9rZW46UlNTRWJYb2h3b2YweFF4N3B0amNwbHM1bnVlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OThiNzM0NzYzYzYyZmNhOGMyZTJlMjVmNDg3ZWM5MzFfSXh1Vm9qTHRPV0tCcjRISlJTcGNwVWk3VmRlVWdMbDlfVG9rZW46VTlqR2Jkeldnb01DRWF4WFZzM2NxU3hBbnVmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzQwMjQ3NWZhMjBmYzlmYWQ5N2E4MzNlNWZkODQyZWRfbWlLbEdmOVhyQTRoMm1MWEF3SE5wbXVqNGFXOEhYaXFfVG9rZW46V2szbWJtNDZDb1lieDF4enlFOGNLT3pIbkJnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTZjNzU1MDM4MTRkYTYwZjU0YmNkMDdkZTZiZmNiZGZfYWlVZHNBY2ZsVmxhWEI0Tnd5UkdhTUdUaU96UGd4VElfVG9rZW46UTc3emJBTkZIbzJNR054cTVoUGNwYjlCbkJmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æˆ‘ä»¬è¦è¯»å°±è¯»installç›®å½•ä¸‹çš„ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWY1NmMzOWM3NTk5OTlhYzA3MmViMzYxOGYxYmJjYmJfSDNBQzZPbzNjSGNJTHhMb0RpTXdhbjYxMXk0ZlJhbW1fVG9rZW46RlM4T2JwMmVRb3p5c2Z4MmZOYWNESDZYbkdnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTY2NmExZDVmYWFmNTlmYjA3YWExMDZhZjdkZjEwNjVfQlVGSDZHSnZoYmxBTU9kM1lLQ1VlQ1Rqd2F4UW1mNDZfVG9rZW46SmNjb2JSZHdub2xIZEl4NmhxSmNQY29Sbk5lXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ç›´æ¥å¤åˆ¶è·¯å¾„

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWZhMDU4NmVhOWNiMjFmZjViMjk4NWY0MDRiYWJjN2RfajZWeHJCcGRQTjhsQTBpTk51YVBQaGtoUkQ5VVFiWmhfVG9rZW46R1ZScWI3ZVowb3pIVXh4QWUzbWMwemhRbkZjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjRlMTA3MTNiMWQ3ZDVhNWFhOTYyMmNhNDE3YmE0MjJfZW1YV3d4b1cyRGw3WEk5RDh5clc2c3F2RUlNbDJlSUpfVG9rZW46Tk5NVmJtcHp5b3Bzb054T2g0MGNoZ3VmbmpjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–ä»£ç 

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTJiYzFhMDJiNzU2ZTVmMWE4YjU4ZmU1ZjJmOGZlMDdfTzFwdUYyUVFBbElqVWJGNVg0T1ViWUFQa0FhVFhpVERfVG9rZW46RUQyeWJuME9sb1ZNc2d4UU9SbWM0UEkybk1oXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTMwYzI5Nzc2MjlmMWZjNTg5ZTVlOTI4OWE3N2QyZmNfcWg3c3dTNG5JMTVpTGVyVVprSmFySUc3djVkaEN2eVpfVG9rZW46TEgwcGIwdnpQb0ZsUnp4TE42ZGNUdUNRbkZiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™ä¸ªå°±æ˜¯æ¥è·å–æŸä¸ªåŠŸèƒ½åŒ…çš„shareç›®å½•è·¯å¾„

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWRmNjY2MjliMDFmOTA1MTVkOGI3NTQzOTJlNGI3ZjBfVlR0UUhlU3E4WGhwY2RXSHp3NTFiSjNUSmhtZlVoaE5fVG9rZW46WlBLSWJCRmdyb3lDRHJ4TEtnNmNhcWFYbkxjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWE5ZGYwZTQ3YmFmOGE2MjM4N2Q3YjNlNGFiNzg5ZjRfSE5IUDhBcXI0NndWSVFFWGp2ZDVqYnVHYWhPWUs2VHBfVG9rZW46VjB6NWJrd3J1b0wxNTZ4eU9hemNvWE1ubndlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzdiNmI2ZDRlMjE3YWVhODZjMmNmMTk3YzAwOTBlMWVfSkhNUUw2Ym1YSTlzRHY2R0VBdDNiM3FsaHlFMUd2V2hfVG9rZW46Rkh2V2JvR2hOb2x4c014eTVPamNFSEJrbk9kXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Python
from launch import LaunchDescription
from launch_ros.actions import Node

å°è£…ç»ˆç«¯æŒ‡ä»¤ç›¸å…³ç±»
from launch.actions import ExecuteProcess
from launch.substitutions import FindExecutable
å‚æ•°å£°æ˜ä¸è·å–
from launch.actions import DeclareLaunchArgument
from launch.substitutions import LaunchConfiguration
æ–‡ä»¶åŒ…å«ç›¸å…³
from launch.actions import IncludeLaunchDescription
from launch.launch_description_sources import PythonLaunchDescriptionSource
åˆ†ç»„ç›¸å…³
from launch_ros.actions import PushRosNamespace
from launch.actions import GroupAction
äº‹ä»¶ç›¸å…³
from launch.event_handlers import OnProcessStart,OnProcessExit
from launch.actions import ExecuteProcess,RegisterEventHandler,LogInfo
è·å–åŠŸèƒ½åŒ…ä¸‹shareç›®å½•æˆ–è·¯å¾„
from ament_index_python.packages import get_package_share_directory

import os

def generate_launch_description():
    # turtle1 = Node(
    #     package="turtlesim",
    #     executable="turtlesim_node",
    #     exec_name="my_label",
    #     ros_arguments=["--remap","__ns:=/t2"]
    #     )
    turtle2 = Node(
        package="turtlesim",
        executable="turtlesim_node",
        name="haha",
        parameters=[os.path.join(get_package_share_directory("cpp01_launch"),"config","haha.yaml")]
        )
    return LaunchDescription([turtle2])
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDEwNmEyY2E3ZWY5ZTY1OWRlYjJjMjkyNWM2NmRiYTBfZlJ6UXNoZ0c5TUNiYU9tVW9OelQxVUV2ZEdyVEtCMlFfVG9rZW46WEljWWJURTZkb0F5bEh4Z1pNM2NZYjdCblpmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTEwOTRhYmI5OTQ1ODMxZjE4NDAzMTkzYWJlMWFhMzRfT3lLWW9Lcks0dWdKUm41UzUxckRMZVpiZnJFRFJjbjRfVG9rZW46R21LRmIwQkh1b0hWSzl4WmdCbmNvV3lxbkdnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å»ºè®®é‡‡ç”¨ç¬¬ä¸‰ç§ åŠ¨æ€è·å–è·¯å¾„

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzZhMjhhM2M0YTYxYjIxMGE3NGFhZWJmOTQ1ZTgzYTlfdDZNU0t2WW9FZFBhbHNtWjJOTlhqd0NFQ1k4ckhJbWRfVG9rZW46SHZOUGJRWFhBb0Q0M2N4b3g3eGNoOGFObjZkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

respawnæ˜¯è‡ªåŠ¨é‡å¯çš„æ„æ€ï¼Œè¿™æ ·è¿è¡Œåçš„èŠ‚ç‚¹ï¼Œä½ ç”¨é¼ æ ‡å…³é—­å°ä¹Œé¾Ÿçª—å£åï¼Œä¹Ÿä¼šè‡ªåŠ¨é‡å¯èŠ‚ç‚¹ï¼Œå†æŠŠå°ä¹Œé¾Ÿçª—å£æ‰“å¼€ä¸€ä¸ªæ–°çš„ã€‚

æŒ‰Ctrl+Cå¯ä»¥ç»ˆæ­¢ã€‚

```Python
from launch import LaunchDescription
from launch_ros.actions import Node

å°è£…ç»ˆç«¯æŒ‡ä»¤ç›¸å…³ç±»
from launch.actions import ExecuteProcess
from launch.substitutions import FindExecutable
å‚æ•°å£°æ˜ä¸è·å–
from launch.actions import DeclareLaunchArgument
from launch.substitutions import LaunchConfiguration
æ–‡ä»¶åŒ…å«ç›¸å…³
from launch.actions import IncludeLaunchDescription
from launch.launch_description_sources import PythonLaunchDescriptionSource
åˆ†ç»„ç›¸å…³
from launch_ros.actions import PushRosNamespace
from launch.actions import GroupAction
äº‹ä»¶ç›¸å…³
from launch.event_handlers import OnProcessStart,OnProcessExit
from launch.actions import ExecuteProcess,RegisterEventHandler,LogInfo
è·å–åŠŸèƒ½åŒ…ä¸‹shareç›®å½•æˆ–è·¯å¾„
from ament_index_python.packages import get_package_share_directory

import os

def generate_launch_description():
    # turtle1 = Node(
    #     package="turtlesim",
    #     executable="turtlesim_node",
    #     exec_name="my_label",
    #     ros_arguments=["--remap","__ns:=/t2"]
    #     )
    turtle2 = Node(
        package="turtlesim",
        executable="turtlesim_node",
        name="haha",
        # parameters=[{"background_r": 255,"background_g": 0,"background_b": 0}],
        # parameters=["/home/tungchiahui/mysource/ros2src/4.ws02_tools/install/cpp01_launch/share/cpp01_launch/config/haha.yaml"],
        parameters=[os.path.join(get_package_share_directory("cpp01_launch"),"config","haha.yaml")],
        respawn=True
        )
    return LaunchDescription([turtle2])
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTU3MWM2NjFiN2I1MzM4YTQzZDdlNmJmZjE3MjU2ZWJfaUo0QmNtd0t6MXZqaEhpS2VLUnFoTUdoekV6TmNPWWNfVG9rZW46T3RQT2JXa3pzbzMxWHN4eEVoNGNRNWpBbk1iXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ç¬¬ä¸€ä¸ªæ˜¯åŸè¯é¢˜åç§°ï¼Œç¬¬äºŒä¸ªæ˜¯æ–°è¯é¢˜åç§°

4.  ## Launch\_Python\_æ‰§è¡Œå‘½ä»¤
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTg2YTE4OGE2MjZlMWZmMTBkYjNjYzAyYWVlMzMwOTlfVEJ4NEREcnlvbGVtZndoVjA5djlxMW5kVUxPTklIY1hfVG9rZW46SkZrR2JTV0Rwb1FMREJ4aG5OaWNWT1ZWbjJkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWM4NGY1NTcyMTg1ODQ1NDIyNDI4NmJjYmNlZmYwYzVfMEtmbnRBbU5URU5zWHNxRWZpN2ZqSHl1eTZ3WHpid1ZfVG9rZW46TU9uWWI0anpJb2VWUzF4RklBSGNocXJ6bkViXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzI1M2ZlNDE2MGY2NWE1YTRhNGYwZjc1NTRhZDAxNDVfSm9OYlZ3cUNGOWQ5T0F3Q0FIZnNSTmxqMXRNZEJ2SEVfVG9rZW46QjRJdmJUZ0Zqb1dEZEd4bmZpSWN2cTYxblpHXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGFiYWIxZmM2Yjg5MTM0ZDljOWY3NTlmYjg0NzUwNDdfMHJBaE4zM2NPRWxaSHpGNUZLTmMzM0pOM0M4WjdxVkNfVG9rZW46RHo5ZGJqV2pDb3NqdDR4dlZWS2NGRUU3bmlmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™æ˜¯ä¸ªåˆ—è¡¨ï¼Œåˆ—è¡¨é‡Œé¢å†™æˆ‘ä»¬çš„æŒ‡ä»¤

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDNiMGVkYzEwYjkzZjRkN2E0NmMwYTEwOWFjYzc4ODhfSmozek9OcXhiSGI5QUNiSVVOSmlpQVZjSjhVaFF3T3ZfVG9rZW46VWRLTmJHQjc1b1FtOEh4b0lEVmNnZ0RmbmllXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™æ ·æ˜¯æŠŠæ—¥å¿—æ—¢è¾“å‡ºåˆ°ç»ˆç«¯ä¹Ÿè¾“å‡ºåˆ°æ—¥å¿—ï¼Œå¦‚æœä¸å†™åˆ™åªä¼šè¾“å‡ºåˆ°æ—¥å¿—ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2ZkYjZhMWViODk4MTAxOWE4NWU1OGE3Y2EzZjAyYjlfZ3JUSjFWMG9oZ0wyYUh6R3R4blNiTG04Qm93Y2p4QWtfVG9rZW46SGpuTWJDYXJsb0xGOGN4VHhQYmMyVTBHbjVGXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™æ ·å°±æ˜¯æŠŠå‘½ä»¤å½“æˆç»ˆç«¯æŒ‡ä»¤æ¥æ‰§è¡Œ

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWZhNWU0MjgzZTRlNDllYjY0NDkyM2Q5MzdiZjkwMzFfeWtqTUpNZ1prWXpVRDNmaG56Mkk2TVNUTklNcXFGY1JfVG9rZW46SUVhS2IzT3BQb0FCaTN4ZzJBeWM5ak5ubmNnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2FiNGQ2Y2UyOTAxYmEwODMyNTU1ODllN2ExMjE2NzdfQ2UzMG5rWWI4Wmdsc09uMW5UNm1kNjg5dTJLd04wVExfVG9rZW46TkJuYWJqRUw3b1JUVUN4V0lMQWNyWUYzblVkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Python
from launch import LaunchDescription
from launch_ros.actions import Node

å°è£…ç»ˆç«¯æŒ‡ä»¤ç›¸å…³ç±»
from launch.actions import ExecuteProcess
from launch.substitutions import FindExecutable
å‚æ•°å£°æ˜ä¸è·å–
from launch.actions import DeclareLaunchArgument
from launch.substitutions import LaunchConfiguration
æ–‡ä»¶åŒ…å«ç›¸å…³
from launch.actions import IncludeLaunchDescription
from launch.launch_description_sources import PythonLaunchDescriptionSource
åˆ†ç»„ç›¸å…³
from launch_ros.actions import PushRosNamespace
from launch.actions import GroupAction
äº‹ä»¶ç›¸å…³
from launch.event_handlers import OnProcessStart,OnProcessExit
from launch.actions import ExecuteProcess,RegisterEventHandler,LogInfo
è·å–åŠŸèƒ½åŒ…ä¸‹shareç›®å½•æˆ–è·¯å¾„
from ament_index_python.packages import get_package_share_directory

def generate_launch_description():
    turtle = Node(
        package="turtlesim",
        executable="turtlesim_node"
    )
    cmd = ExecuteProcess(
        cmd = ["ros2 topic echo /turtle1/pose"],
        output = "both",
        shell = True
    )

    return LaunchDescription([turtle,cmd])
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDBjNjM5NzMyMTllNTlmNmY1Yzk0YTVlZTI1ZjRkMTJfSmpHVmk2R0pjdnBiT0xDeEdnNEZ6bHd5ZDBHOHdBRDFfVG9rZW46RXNTQ2I2YWZob0dhd3J4ZTlaYmNLOUh3bjVjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¦‚æœæŒ‡ä»¤è¿‡é•¿ï¼Œå¯ä»¥åˆ†åˆ°å¤šä¸ªå­—ç¬¦ä¸²é‡Œè¿è¡Œã€‚

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGNiNGIyYTZlNjhlMTk1OTE3MmI2ZTYzNmUwZmUyYzlfNXlWT1RjN0d6TlROMkZzSXJYdGRHVENGQzh1eTZObDRfVG9rZW46WG1NY2I0NG5Yb3pRYll4RkluT2NTaUo3bjVwXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Nzc1M2VjOTRlMjhmZDNhYzg0ZWFjYjRhNDQwZThmYTBfUWlLcTdRSDhRYmNHdWdjbEtvaHRYb3UwYmwxV3ZoV3VfVG9rZW46RG4wRWJJVHpDb1FCdDN4WmRyTGNKR09hbjFqXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjNmNDkwMTkyNjhlZWUwYTM0Y2NkNDYxNTM3MGE3NGRfdllVOGdRelRjRmlUZURjRXpRbzU5YVo3WDZXMkhwQUVfVG9rZW46RlozRGJyczZob0lWWTB4dmxrZWNFc1YybkJnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™æ ·ä¹Ÿæ˜¯å¯ä»¥è¿è¡Œçš„ã€‚

```Python
from launch import LaunchDescription
from launch_ros.actions import Node

å°è£…ç»ˆç«¯æŒ‡ä»¤ç›¸å…³ç±»
from launch.actions import ExecuteProcess
from launch.substitutions import FindExecutable
å‚æ•°å£°æ˜ä¸è·å–
from launch.actions import DeclareLaunchArgument
from launch.substitutions import LaunchConfiguration
æ–‡ä»¶åŒ…å«ç›¸å…³
from launch.actions import IncludeLaunchDescription
from launch.launch_description_sources import PythonLaunchDescriptionSource
åˆ†ç»„ç›¸å…³
from launch_ros.actions import PushRosNamespace
from launch.actions import GroupAction
äº‹ä»¶ç›¸å…³
from launch.event_handlers import OnProcessStart,OnProcessExit
from launch.actions import ExecuteProcess,RegisterEventHandler,LogInfo
è·å–åŠŸèƒ½åŒ…ä¸‹shareç›®å½•æˆ–è·¯å¾„
from ament_index_python.packages import get_package_share_directory

def generate_launch_description():
    turtle = Node(
        package="turtlesim",
        executable="turtlesim_node"
    )
    cmd = ExecuteProcess(
        cmd = [FindExecutable(name="ros2"),"topic","echo","/turtle1/pose"],
        output = "both",
        shell = True
    )

    return LaunchDescription([turtle,cmd])
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmI4ZmJjNGE5OTg4NTMzZWRkYjlmNDg2NTU3YmM3OTRfWnRLR0t6blNNYXdEYktFaURTaGk2bGIxWjUyTGgyb1JfVG9rZW46QncyeWI0SnJGb2dvT1h4REFiU2M0ZnlGbkNiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

5.  ## Launch\_Python\_å‚æ•°è®¾ç½®
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTQ0MjU3OTkwZGY0MjJhMGIxOWY5ZWRhODIzODIyNTVfNEp3Smh4WWI3bW1JNzlRdFJYV1h3TTFydTFBaHVYMXNfVG9rZW46RlM4Q2J2MVl1b0h6ekt4c0VSNWNkazhvblJmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjhhNTNlNzJhZWYxOWQxYjg0YWNiMWNlMDVkYWRmM2JfNkNHNmo0dmxERTR2a011NWVCQ3lkNGFUcExPUXRtMnFfVG9rZW46RG9GQmJibnFib1poZEp4SmU2OGN4R2wzbjVnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2Q2OWYwYzdiNTk0YTQxNGIxMWUzM2M2NGNkZTA5ODNfMGlKUXc5amZPZ3hjWEYwa1JwTFRSSTMxNDZld1ZqSlVfVG9rZW46U2ZFMmJYM0p6b2F4Y2J4T0JqVWNOZEk5bjNjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTViZjBjOWU2MWQ2MGM3ZjBmODc0ZDgwY2Q3NjM5MDJfUkl1YzRrM0lnNGxXTFBNUlFoSWVMbDRjc1hxcGk5UWRfVG9rZW46QlNHNGJORXJKb21EYWx4YlYzemM2azhublBoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGNlMTE3OWZmOTNlY2U4NGJkMTA4MWFjOWE0NDBhZGNfOE1iclpzc0hRdUxSWWN4UGdSTko2SWZRUnlPU3IzTHZfVG9rZW46SnNXY2JDYUpib0dCa3R4VExkS2NCZmd0bkJkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmZkOWM4NzQ0ZWY4OWNlYTBkMDhkMmIwZjRkOTdhYTBfczdsVXRXSVZuWWNKSENRNW1xUVk3cnN6Tno1TUFMaTVfVG9rZW46UHJSdmI3QmhMb0RFNUV4Z3VTUWNLdEUwbjhjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDk0Nzk1YzU2Yzg4MmZjNDA5MDk4YjAzMDg4MjU0MDBfd2p6dkpWUFZQWnZTMnhRQ05MZVhldTBaZ0huc0o5a1NfVG9rZW46SWdCWGJsMFBQbzNOaEl4eHhzbGNOYmtWbmpDXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTczNTI3NGVkZTRlOWQxZDlkMWQyYWVkZjlkMzNlZjJfenE3SlZLQ2V4V004dWptSWhVWVdwNFREVHFJM2VhVUdfVG9rZW46VWt6SmJ2QW11b3k5M2h4UkFQU2NHaEdJblBiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ²¡ä¼ å€¼çš„è¯ï¼Œä¹Œé¾Ÿçº¢è‰²æ˜¯æ»¡çš„ï¼Œé‚£å°±æ˜¯ç²‰çº¢è‰²èƒŒæ™¯

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODAwNDA5MzVhNGY3ZTNkYjBmOWRlMmEyMmNiMTBiODZfUDVId2xZRElCazlIRmRSOHNMOG13UXI0S2pSOFhGTlZfVG9rZW46SmdTMmJLM2pib21HclF4a1BkU2N4Z0xvbnBkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¹Ÿå¯ä»¥ä¼ å€¼ï¼Œæ¯”å¦‚ä¼ backg\_r:=0

è¿™æ ·èƒŒæ™¯è‰²å°±å˜çš„æ›´åè“ç»¿äº†ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWRlYWIwMzVmYTBhYjBkOTNmZDgzYjJlZmNhODI1ZDVfNzdDc1pSUzhlZE9zbFhpemlKeGNkR25oS01ORFNzWFZfVG9rZW46TnIyeGJ2cnpnbzlwQkN4RXN5T2NLMVAybklnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTA5ZjhmMGM0YjVjZDBkNmM0ODk2NTU3YmU4ZDgxZjBfSDlManZTVmlpZHk0NmJjam5YUWlMY1RxNGJBZGFnc21fVG9rZW46WTJ2Q2J4c2t2b0VlV2t4aUVoUmMyemRZbmtlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjIzYzdmOGI0ZTc2MjFiYTUzNTJjNmM2NWYxNTMzYTRfTEJwMVFvT3lrZjYzRDVJMkQxZmlsdEhEMVNVS0NrdDJfVG9rZW46QmZaWWJvT1Fyb0RwTm54VlN0VWNLMDBlbkZHXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Python
from launch import LaunchDescription
from launch_ros.actions import Node

å°è£…ç»ˆç«¯æŒ‡ä»¤ç›¸å…³ç±»
from launch.actions import ExecuteProcess
from launch.substitutions import FindExecutable
å‚æ•°å£°æ˜ä¸è·å–
from launch.actions import DeclareLaunchArgument
from launch.substitutions import LaunchConfiguration
æ–‡ä»¶åŒ…å«ç›¸å…³
from launch.actions import IncludeLaunchDescription
from launch.launch_description_sources import PythonLaunchDescriptionSource
åˆ†ç»„ç›¸å…³
from launch_ros.actions import PushRosNamespace
from launch.actions import GroupAction
äº‹ä»¶ç›¸å…³
from launch.event_handlers import OnProcessStart,OnProcessExit
from launch.actions import ExecuteProcess,RegisterEventHandler,LogInfo
è·å–åŠŸèƒ½åŒ…ä¸‹shareç›®å½•æˆ–è·¯å¾„
from ament_index_python.packages import get_package_share_directory

def generate_launch_description():

    bg_r = DeclareLaunchArgument(name="backg_r",default_value="255")
    bg_g = DeclareLaunchArgument(name="backg_g",default_value="255")
    bg_b = DeclareLaunchArgument(name="backg_b",default_value="255")
    turtle = Node(
        package="turtlesim",
        executable="turtlesim_node",
        parameters=[{"background_r" : LaunchConfiguration("backg_r"),"background_g" : LaunchConfiguration("backg_g"),"background_b" : LaunchConfiguration("backg_b")}]
    )
    return LaunchDescription([bg_r,bg_g,bg_b,turtle])
```

6.  ## Launch\_Python\_æ–‡ä»¶åŒ…å«
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTk1MWM3OTEyYmQ3NTg4YmM0MTg5OWNjOWViZWMyZDlfUkhiY0dCNUJJVW83RUQ5Y1NMczlQRUpVZ0h5Tm1WcnVfVG9rZW46SnRFR2JoWkk2b2FBNHB4UnBiaGNMejQ4bmxkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å‡è®¾æˆ‘è¦ç¼–å†™ä¸€ä¸ªæœºå™¨äººå¯åŠ¨ç›¸å…³çš„launchæ–‡ä»¶ï¼Œåœ¨è¿™ä¸ªlaunchæ–‡ä»¶ä¸­ï¼Œæˆ‘å¯èƒ½è¦å¯åŠ¨é›·è¾¾ï¼Œå¯åŠ¨IMUï¼Œå¯åŠ¨åº•ç›˜ç­‰ç­‰ï¼Œæˆ‘ä»¬éœ€è¦æŠŠè¿™äº›launchæ–‡ä»¶éƒ½åŒ…å«è¿›æœºå™¨äººå¯åŠ¨çš„launchæ–‡ä»¶ä¸­ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjFhZDdkYzk0NzUwY2NhZWMxMzI2NDBhYjg2MjRhMmRfM0MyUGJlNTBtUTlYWENsd0FLR2puOW42eW9lVnRoMFlfVG9rZW46RU5IVmJjbVdjb1FmbGt4QUhqa2N3dTdQbjRlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2U3ZDk0MzVkMDgyMTdiZDkyMTc4YmUxN2UxZTIxMjRfRkxoZElLaE1MU3BMYzBkN0VpeHZwN2ZmSzU1Y0doSlVfVG9rZW46SHhNd2JpS2hDb2dNNkZ4d1U4ZmN6U05jbkljXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODI0ZTQ5YmQ3Zjk1NzExYzI3ODEwN2E1MjM0OGEzMDdfYmZWbnZDUGVNbWM1WERJR1RSOTlwNHl2U09DNkdQbnRfVG9rZW46VHc0S2JrYjN5b0lWRk14d011cmM5WWlxbldOXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™ä¸ªå€¼æ˜¯ç”±è¢«åŒ…å«çš„launchæ–‡ä»¶å°è£…è€Œæ¥çš„å¯¹è±¡ã€‚

è¿™ä¸ªå¯¹è±¡å¯¹åº”çš„ç±»å°±æ˜¯PythonLaunchDescriptionSourceï¼Œ

ç±»é‡Œé¢è¿˜å¾—è®¾ç½®ä¸€ä¸ªå‚æ•°ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzRjNWMyZDM2NGRmMjA4ZjE3Y2E2OWJhZThkODQ4MjlfRlRZaXVtaHI4bWRhbUZkUkZORjhUUWFiOHZYcm9DRnBfVG9rZW46QUNycWJnR0Rkb3d1NTl4aE90RmNKS0xRbjNkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™ä¸ªå‚æ•°æ˜¯launch\_file\_pathå°±æ˜¯æ–‡ä»¶è·¯å¾„ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWI0NDg4MWQwZWNlYjk4YTVmOWI1Y2IzMGE0MTU4MDdfWFBPN0RaR01VSllwWmxVU05XcUhraHZPYklYQUpkUE9fVG9rZW46TkVHNWIxemJhb1lCekF4RTNvTGNJR3NiblRiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2RhZGNlNGRkOTNhNDFkMzkxM2UyOTNiNzM0NTNlMWJfcnlKZk1lQ1JQcTlXcXBJOGhBRHZIWXlQVENqbUN0NGxfVG9rZW46VVJnRGJWVERlb2J1dWp4TkVHRmNKTWlUbm5oXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å»ºè®®ç”¨è¿™ä¸ªæ¥è·å–è·¯å¾„ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDMxMGQ2YmM5N2RlZjhhZjk4YzNmYjIyNjkzYzZlNWJfaE82S0FSUzRJUGo2cG1nWGxZU2VFS21QU0EzT2xUeUdfVG9rZW46QjZzU2JRNllSb09VaFJ4bFZMOGNiSVAybkdjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmY4NTY3ODYyN2RiNzVkMmQ0YzIyNTIzZjg3NTI5MTdfNGZXcmFXV2ZiVm9xT1Z6T0tuY3J3elZlZWs0ZnNRYUhfVG9rZW46TlU4OWJPR2lOb21NTk94NmJTVmNjeE9VbldkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGIyMTcwNmYxM2YxNWFkNjUyMzNmYjU4MWQ0YTlkNTdfVkJxc0FQdUtKd0RSOHNYNmhQTlRnenJ4ajZ1UEEyRkhfVG9rZW46T0lFeWJ1bEZ4bzVqVXZ4M3BOWmNCUlh3bnVjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGU2MTVhNTBkOTFkOTZlY2FmNmFiMTFlYTM5OTQ0M2RfY2UwTVVSblRWODFrbjdoRHphamt2RDJmTGFhZnBvc3FfVG9rZW46VlVzNGJ1TWlDb2lxb1d4NUk3ZGNEM2JRbkFnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmE4NzIyMGU4YjBlMGIyMWU5ZjZiNWVhNTg0NTBjNWFfVGNtVjV3bmJuclNTa0FLWXEwNnBZUDc2SW42WjF6NzhfVG9rZW46SnhzemJWcEdybzRXT1d4MzRqa2NnM1drbm5oXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¹Ÿå¯ä»¥ä¸ºå…¶ä¼ å‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjFhZGMxZjdmZjJjNzkxMzUzMzY4NGRlZWMzZGVjNzdfTzBZSVV1UzFLZEhxejVnbGJ0NjJtdmZZUXp5V0syOG5fVG9rZW46TDRHWWJyTDhmbzZGNXF4YTFJY2M1dGpBbktiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTQwNDhkNWZiOTBiN2Q5YWU0ZTUzYmU0YmExZjg1M2NfZlc2Z3RONG1nTEZMRWUzTEdyMG5RWHVQaU9pV3R1QllfVG9rZW46TDl1eWJ1Rkdlb3llVEZ4V2VzQ2NPU2tsbnBiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWI0NDM2ODI2NTU5YzFmOTEyZDIwNjUzNmZiMzI3YjlfU1FWS1pTblptZ0k0ZVNHYXhMOU5xZjNibDR5TEVVblpfVG9rZW46QVlTRmJnWURrb1FBWnl4RHFKamNQMjkxbmZnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Python
from launch import LaunchDescription
from launch_ros.actions import Node

å°è£…ç»ˆç«¯æŒ‡ä»¤ç›¸å…³ç±»
from launch.actions import ExecuteProcess
from launch.substitutions import FindExecutable
å‚æ•°å£°æ˜ä¸è·å–
from launch.actions import DeclareLaunchArgument
from launch.substitutions import LaunchConfiguration
æ–‡ä»¶åŒ…å«ç›¸å…³
from launch.actions import IncludeLaunchDescription
from launch.launch_description_sources import PythonLaunchDescriptionSource
åˆ†ç»„ç›¸å…³
from launch_ros.actions import PushRosNamespace
from launch.actions import GroupAction
äº‹ä»¶ç›¸å…³
from launch.event_handlers import OnProcessStart,OnProcessExit
from launch.actions import ExecuteProcess,RegisterEventHandler,LogInfo
è·å–åŠŸèƒ½åŒ…ä¸‹shareç›®å½•æˆ–è·¯å¾„
from ament_index_python.packages import get_package_share_directory

import os

def generate_launch_description():
    include = IncludeLaunchDescription(
        launch_description_source=PythonLaunchDescriptionSource(
            launch_file_path=os.path.join(
                get_package_share_directory("cpp01_launch"),
                "launch/py",
                "py04_args_launch.py"
            )
        ),
        launch_arguments=[("backg_r","80"),("backg_g","10"),("backg_b","200")]
    )
    return LaunchDescription([include])
```

7.  ## Launch\_Python\_åˆ†ç»„è®¾ç½®
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTE2Mzc2OTBjNTMwNjI2Njk1M2YyOGMyMGZmOTU5YThfaFVtU0dPR2tHRGhQWXVrWjF6MldmMXhnYU5HUDY2TkJfVG9rZW46WVNmU2JqWDZyb0VlT3d4WFh5TWNaYm41bnBlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjU3OWIwNTYyNGZjYTZjMGNiZmVjYmRhOTZiODE1MTJfUXNTNXc5VXdsdVVVYXpJOVJwZGNlMGFyOHZIQVB1U3RfVG9rZW46STdsZ2JEbDVTb0VMWXB4Z04wc2NWVk1tbnVlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWIxOTg3ZGQyYjE2NTc4ODJiN2U2MTlmZTYxOWMyMWRfb3dtc2I5WDZ0ZVdyZ1dKZmlZNThJNjV2c1d5N2F5eVhfVG9rZW46U1ZyR2JWaDN5bzdZbFR4VU1xYWNHN1F2bmFnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDY0MTI0NjMyMzFhNzczMDQ4ZDhhNDQwMjI4ODU1ODZfWnN2SU96TEIxZUxCYWoza1R0Qkw3NklIcnUzSjQ0bnhfVG9rZW46WFVjYmJ1T0g3b3ZvSzZ4WXlZZGM2VmtWbkxkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWRjMGI3ZTc4NzhlOTViNDFlNWVkYTRjZGNkMzg0NDFfdlVEajY3MzlQdTBsTWR3QkdXdVJQSjJPczFLY0hNMGFfVG9rZW46TGx0UWJWc011bzJac2x4elZCUWNkQkdSbm4yXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Zjc1YjEyY2U4Y2M5YzIyODNkYjM5NjUxODY3YTc1ODdfYzF5Mmdub2N6VFJTOFNocXVhRWMxZGNZcHBaRTlBVW9fVG9rZW46Q2J2Z2JpUk5ubzFHZTd4U3F6Q2NNM01nbnZnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODJhMGE5NmM1NWFjY2M4M2FiMjliODlkYjJhYzVkMjRfTzFTdFRTWlNHYXBsdkdtMVBsNzB6cDBhVUpZb1hMTkpfVG9rZW46TEc1S2J0dlQ4b3V3amV4VW9JWGMwUDJRbkhnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Python
from launch import LaunchDescription
from launch_ros.actions import Node

å°è£…ç»ˆç«¯æŒ‡ä»¤ç›¸å…³ç±»
from launch.actions import ExecuteProcess
from launch.substitutions import FindExecutable
å‚æ•°å£°æ˜ä¸è·å–
from launch.actions import DeclareLaunchArgument
from launch.substitutions import LaunchConfiguration
æ–‡ä»¶åŒ…å«ç›¸å…³
from launch.actions import IncludeLaunchDescription
from launch.launch_description_sources import PythonLaunchDescriptionSource
åˆ†ç»„ç›¸å…³
from launch_ros.actions import PushRosNamespace
from launch.actions import GroupAction
äº‹ä»¶ç›¸å…³
from launch.event_handlers import OnProcessStart,OnProcessExit
from launch.actions import ExecuteProcess,RegisterEventHandler,LogInfo
è·å–åŠŸèƒ½åŒ…ä¸‹shareç›®å½•æˆ–è·¯å¾„
from ament_index_python.packages import get_package_share_directory

def generate_launch_description():
    turtle1 = Node(
    package="turtlesim",
    executable="turtlesim_node",
    name="t1"
    )
    turtle2 = Node(
    package="turtlesim",
    executable="turtlesim_node",
    name="t2"
    )
    turtle3 = Node(
    package="turtlesim",
    executable="turtlesim_node",
    name="t3"
    )

    group1 = GroupAction(actions=[PushRosNamespace("g1"),turtle1,turtle2])
    group2 = GroupAction(actions=[PushRosNamespace("g2"),turtle3])

    return LaunchDescription([group1,group2])
```

8.  ## Launch\_Python\_äº‹ä»¶è®¾ç½®
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjI3NDZhM2VmNWEyZGYzNTYxZWYzMjE4YWNkMmM1MGZfeFZCUGtubjAxQ0JKeTZjQTJ1TDVCaFFJTWVpakl1SlhfVG9rZW46RktZcmJkNlBkbzc2SWd4c1UwZGNuUG9GbkliXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjVmOGQ0YzhjYmQzMzRmNDg2ODc1NzEyMWQ3OGRjM2ZfMFFIZmh4OHRpdnhGSjlucWc1U0xXQ3AzdmxKdGNoVHBfVG9rZW46VEp1emJxWnVib3lodFd4R1I1dmNyd2N0bmhkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ç¬¬ä¸€ä¸ªä¸»è¦ç”¨äºæ³¨å†Œäº‹ä»¶ï¼Œç¬¬äºŒä¸ªæ˜¯å¼€å§‹äº‹ä»¶ï¼Œç¬¬ä¸‰ä¸ªæ˜¯èŠ‚ç‚¹é€€å‡ºã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGNiYjhiMWUzMmQwNGQ5MmNjNThiYmIzZDFkNzc0NjJfTnVKQ3VCWHNwZHNaUFBwczIwM0dnbzcyMFJ1T3AzeEhfVG9rZW46SDl6bGJWdzdCb2dWdVJ4NjR5R2NCUURUbk5jXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

* * *

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2VlNzA2Mzk3ZjBmNTliOWYyZmY0YmY1YTIyNzhhYmFfcXpIQVBORDhGdkh0TUNDSm1hQVlWUUtseDVUaDlsNXBfVG9rZW46Vk9YeWJxVzZEb1ZxMUd4dzFuS2MyWFF1bnVkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDBhNmQyYmM2MWMyYTkzMjU4MDI2MTkyYTc2MTViZDNfQk0zVG9SS3NwYTl3dUFPZ1pOVlA4dDVyRHU5WUNxekVfVG9rZW46WXhZZmI5cjNNb0lnMjN4ZDhVdWM4R1dqbjBnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDViYTAzMWYzYWE5NDc1YmU5ODU5YjI5NTEzOWM3YTBfcWRDanlxbkRncjk4eTBkd3dWY21xc3R0RTR2YUNUWHZfVG9rZW46TUp2VGJXZXZJb0hzNjZ4V01KNmNaUUx2bk9kXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™ä¸ªæ˜¯åœ¨ç»ˆç«¯ä¸­ç”Ÿæˆæ–°å°ä¹Œé¾Ÿçš„å‘½ä»¤

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTNmZmRjNmY3Zjk1ZGQzMzY5N2MwYjQ5NGNkMjlhZDdfOEVkQUpmSnpjMWpHbmVXeDJsU3ZNRnZKWDc3NFNUM0hfVG9rZW46TlR0c2JCMkxSbzl1a2R4ZjZMN2NwNkJNbldoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDdhZjllY2FiZmJhZTY3MDUxMDgyYWEyZmFmZDIxN2RfSm5rbjVTQmNoN1dzMWU0MW4xdDFoRHNCSXd0YnVkdTJfVG9rZW46WG5WUWJyQ242b1hXZE14TVlkVWNEN2Fsbk15XzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGVlNTcwM2U2YTBhYjY1ZDk1ZTc2NTJjZjQxNGJkYTBfdmNpdXlCckhsN0w3Mmowb2N4YmNWNVlCUURzdUc3U2hfVG9rZW46SzJNUWJjVzZPb1JQSnd4TnIyM2N0aXI3bnFoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGU0NzlhZTI3MjY0NmMyN2JmNjBiOTQ5ZDBkMTc2MTRfTUFPTFU4UTJLYnhPVTdjZ3ljTWNqRnFlREJSR05WMW9fVG9rZW46QUR2Y2IwY09Fb2ZCSkd4anZyUGNpd01DbnplXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯é’ˆå¯¹å“ªä¸ªäº‹ä»¶è¿›è¡Œæ³¨å†Œã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NGIxMTEwMjg0Mzc3YWVjODA5OGI5YzdhMjczMzAwYzRfODdyYTJpQWVrM25rWDZuajA1U2taVzQ3bFk2ajJRbzJfVG9rZW46SXhMM2JZUkhtbzlYQTJ4ZWlYZmNxbmg0bmhmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

target\_actionæ˜¯äº‹ä»¶æºï¼Œä½ è¦ä¸ºå“ªä¸ªèŠ‚ç‚¹æ³¨å†Œäº‹ä»¶ã€‚

on\_startæ˜¯ç­‰åˆ°äº‹ä»¶è¢«è§¦å‘ï¼Œä½ è¦åšå“ªäº›æ“ä½œï¼Ÿ

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGNlOGI1ZjUxMmZhMzFhN2I3ZmU4MDZlYTVjMWYwZTFfOWl4Q3phSEhYSVhHcG4zVFI2Z1M2eW9oQnk0eERzWmpfVG9rZW46VEdqOGJCaklyb0xNQWp4SmFPbmNWNDFsbmVlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWQwOGZhNWFiNGVlYmFmYTNhNTdiYTkwOTkyYTI4MTRfTzhXbTIwdUlONGZPaTJOUXBPTm9GeGhmZWN5Q0pLQUhfVG9rZW46Q3hwdmJSd1Mzb0JGYW94UlFLa2M0YzNhbndIXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDEwYjViZjEyMjRkY2NjZDIzMjdkNDdmMTQ4MDQzY2VfZ1FhdmcxRGlpbUdWVDJFVUFzVDJISFZjeEg1NTJkMkdfVG9rZW46RFgzU2JYc1JEb1pXWWZ4a1lxM2NiOTVXbjQxXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWIzZDc1Mjc4MGMwMzNjOTMwZjdkMTY3ZGE1OTdiODlfdWJhYjEwR3VBUVdRY2QzRHN0RlhPY1EweXBRbGpyYUdfVG9rZW46UTNWUmJ3bEpxb1BMV1N4c2ZkMGN4Q0MyblpiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Python
from launch import LaunchDescription
from launch_ros.actions import Node

å°è£…ç»ˆç«¯æŒ‡ä»¤ç›¸å…³ç±»
from launch.actions import ExecuteProcess
from launch.substitutions import FindExecutable
å‚æ•°å£°æ˜ä¸è·å–
from launch.actions import DeclareLaunchArgument
from launch.substitutions import LaunchConfiguration
æ–‡ä»¶åŒ…å«ç›¸å…³
from launch.actions import IncludeLaunchDescription
from launch.launch_description_sources import PythonLaunchDescriptionSource
åˆ†ç»„ç›¸å…³
from launch_ros.actions import PushRosNamespace
from launch.actions import GroupAction
äº‹ä»¶ç›¸å…³
from launch.event_handlers import OnProcessStart,OnProcessExit
from launch.actions import ExecuteProcess,RegisterEventHandler,LogInfo
è·å–åŠŸèƒ½åŒ…ä¸‹shareç›®å½•æˆ–è·¯å¾„
from ament_index_python.packages import get_package_share_directory

def generate_launch_description():
    turtle = Node(
    package="turtlesim",
    executable="turtlesim_node",
    )
    spawn = ExecuteProcess(
        cmd=["ros2 service call /spawn turtlesim/srv/Spawn \"{'x': 8.0,'y': 3.0}\""],
        output="both",
        shell=True
    )

    event_start = RegisterEventHandler(
        event_handler=OnProcessStart(
            target_action=turtle,
            on_start=spawn
        )
    )

    event_exit = RegisterEventHandler(
        event_handler=OnProcessExit(
            target_action=turtle,
            on_exit=[LogInfo(msg="turtlesim_node:é€€å‡ºï¼")]
        )
    )
    return LaunchDescription([turtle,event_start,event_exit])
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGEwMmE5Nzg3NjcyMjIyY2Q1NjU1M2U5NmQzMzdjYzVfcVpvN1Y2TG1PMEg1eFd5cVV5SWVKQTFMbmRPbE56VEJfVG9rZW46S0s1MWJzWUtxb0F4QmJ4aXkxWmNlT1VHbm1iXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

on\_exitå¯ä»¥åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ”¾åœ¨åˆ—è¡¨é‡Œã€‚

å¯ä»¥åªå­¦Pythonç‰ˆæœ¬çš„Launchï¼ŒXMLå’ŒYamlç‰ˆæœ¬çš„Launchå¯ä»¥äº†è§£å°±è¡Œï¼Œè‡ªå·±å†™å°±å†™Pythonç‰ˆæœ¬çš„ï¼Œå½“ä½ è¦ç”¨åˆ°åˆ«äººå¼€æºçš„åŠŸèƒ½åŒ…ç”¨çš„Launchæ˜¯Xmlæˆ–è€…yamlç‰ˆæœ¬ä¸€èˆ¬ä¸å½±å“æ­£å¸¸ä½¿ç”¨ã€‚

9.  ## Launch\_XML\_YAML\_Node
    

10.  ## Launch\_XML\_YAML\_æ‰§è¡Œå‘½ä»¤
    

11.  ## Launch\_XML\_YAML\_å‚æ•°è®¾ç½®
    

12.  ## Launch\_XML\_YAML\_åˆ†ç»„è®¾ç½®
    

13.  ## Launch\_XML\_YAML\_æ–‡ä»¶åŒ…å«
    

  

  

7.  # å›æº¯rosbag2
    

1.  ## æ¦‚è¿°
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGYyMzZlMzFkNDYxYzY4NDVlMjJiOTIzMjVjMzEwNzNfcUpBTGtwY0U0cUFjQ1d0eEJ2eWUzUlB2aTNEQ05JRUVfVG9rZW46UWsxc2IxOVY3b0VieE54dnc1S2NINGp5bndkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ–¹å¼1ä¸€è¾¹é‡‡é›†æ•°æ®ï¼Œä¸€è¾¹ç”Ÿæˆåœ°å›¾ä¿¡æ¯ã€‚

æ–¹å¼2æ˜¯å°†é‡‡é›†æ•°æ®å’Œç”Ÿæˆåœ°å›¾ä¿¡æ¯åˆ†å‰²å¼€æ¥äº†ï¼Œæ–¹å¼2åšåˆ°äº†è§£è€¦åˆï¼Œæ‰€ä»¥æ›´çµæ´»ä¸€äº›ã€‚ç”¨åŒä¸€å¥—æ•°æ®ï¼Œå¯èƒ½ç”¨ä¸åŒçš„ç®—æ³•å¤„ç†ï¼Œæ€»ä¹‹ï¼Œéå¸¸çµæ´»ã€‚

ç•™å­˜çš„è¿‡ç¨‹å’±ä»¬ä¹Ÿå¯ä»¥å«åšåºåˆ—åŒ–ã€‚ï¼ˆè½¬åŒ–ä¸ºç£ç›˜æ–‡ä»¶ï¼‰

ç•™å­˜ä¸€èˆ¬å«å½•åˆ¶ï¼ˆåºåˆ—åŒ–ï¼‰ã€‚

è¯»å–ä¸€èˆ¬å«å›æ”¾(ååºåˆ—åŒ–)ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDlkMjMwODlhYTJjNmNkODdmY2I0NGZkNTkxN2E4NTZfdU1rSHJ2T3dHYUJZSHBYNkQ1bUNIQnBnTmVNdjRhZzdfVG9rZW46SHptcGJTaXVZb3ByY2h4MEsyNGNHSEhRblpkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ç•™å­˜æ—¶ä¹Ÿå¯ä»¥å°†æ–‡ä»¶è¿›è¡Œåˆ†å·ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ªæ–‡ä»¶æœ€å¤§èƒ½å å¤šå¤§çš„å¤§å°ï¼Œå¦‚æœè¶…è¿‡è¯¥å¤§å°ï¼Œå°±æ–°å»ºä¸€ä¸ªæ–‡ä»¶ç»§ç»­ç•™å­˜ã€‚ï¼ˆç±»ä¼¼äºå‹ç¼©æ–‡ä»¶çš„åˆ†å·ï¼‰

è¿™æ ·çš„è¯ï¼Œå­˜çš„æ•°æ®å¤ªå¤§ï¼Œæˆ‘ä»¬ä¸€æ¬¡æ€§æ‰“å¼€å¤ªæ…¢ï¼Œå°±å¯ä»¥åˆ†æ®µæ‰“å¼€ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTcxZDc4MDg0NDMzZTJkZmNlNjY2NmNhNjM1M2Q3OWJfOHRBWFZmOElDZjVyV2thdmZCSXprN1gwRjNMRkdUbm5fVG9rZW46UUlqR2I3Z1Frb1VYOGN4MUFab2N4cGdXbkZjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDkxNmJiZjk2N2E0ZGY1NzJmNzlhYjE4ZWM0ZTE3NjlfR2tMQWRlQzR5R0d4YnRBM0NDb1lxejYxVDFMaFVRWXRfVG9rZW46VlRjZGJkc09Lb1R2MU54UlFVRWM3T0xWbmhTXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

éœ€è¦ä¾èµ–äºrosbag2\_cppæˆ–è€…rosbag2\_py

ç„¶åè¿˜è¦ä¾èµ–äºgeometry\_msgsï¼Œè¿™ä¸ªæ˜¯å› ä¸ºæˆ‘ä»¬è¦åºåˆ—åŒ–çš„æ•°æ®æ˜¯è¿™ä¸ªåŒ…ä¸‹çš„é€Ÿåº¦æŒ‡ä»¤ã€‚

```Bash
ros2 pkg create cpp02_rosbag --build-type ament_cmake --dependencies rclcpp rosbag2_cpp geometry_msgs --node-name cpp01_writer
```

  

2.  ## rosbag2çš„å‘½ä»¤å·¥å…·
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWE0NzdhNDc4NDA3YTU5ZTlkMDFiYTUyN2NiNjUzNGFfRzdrU1hSdWNhNTFlSTNSNFk1aXV3S3hzYnZHcHZVd3NfVG9rZW46VkZETWJwTHhBb3Y2MEF4dW1nemNlRXEwbnljXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¸€èˆ¬ROSBAG2çš„ä½¿ç”¨æœ‰å‘½ä»¤è¡Œå·¥å…·å’Œç¼–ç ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼Œ**å‘½ä»¤è¡Œå·¥å…·åŠŸèƒ½æ¯”è¾ƒé½å…¨ï¼Œå¤Ÿç”¨ã€‚**

æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£ros2 bag -h

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjQ1ZjA4NjNiNjE1ZDRiNzE0NGQ3ZDMyMjg3NGYwNDRfZzVPM2RBWXpvSWVZWnE4NklOaDlEMnZYMjhBWU94Q1dfVG9rZW46TjU1S2JSSVBFb1ZEakx4RFFXZGM0SWkybjZkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¸»è¦æœ‰6ä¸ªæŒ‡ä»¤ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTJkYjM3MzFlMTM0ZmU4NTRjOWZhZmRiMGM1OWMzMjdfYkFzU01ua2tzSDBhU0VPMFdYeG1MbFgzcENFalF1YWxfVG9rZW46VWJTVWIyNEZPb0pmOUx4a3VpVWNDdXhDbnFoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2Q4NGFkZTk1MmMyOGQyOGNmNDlkZTM0OTQzM2U5NjRfeHNSYTJUOWpmaTJvb2ZlUnJ3Ym45OFJZSXY0VzZ6M0ZfVG9rZW46UjN2WGJlbG1Qb2VCc2x4eVNyTGNuNXFwbmllXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGRkZmQ2YjE5NDUzZmRkZjhlM2RjMjQ4MGUwOTAyYmVfNUl2VTBlWjE0WG5HaWxuTnFyYklmbURGVU51V0VPN3RfVG9rZW46SzdVaWJ4dzFtb3UxWWF4WEdINWM0UXpibnhjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¯ä»¥çœ‹recordçš„è¯¦ç»†ç”¨æ³•ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGY0M2I1YjQ3MjZjOGZiZjUxNzE2Yzg0Y2NiMmM0OGJfVjFYbFVhNGMyWDl6Qkx2VzhWSUxIaEo5ZjFMTkdGQjhfVG9rZW46RGVheWJ4azVxb3hRdHZ4YnVuUmN4S25ZbllkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

recordæ˜¯ç”¨æ¥å°†æ¶ˆæ¯åºåˆ—åŒ–çš„ã€‚(å½•åˆ¶)

playæ˜¯ç”¨æ¥ååºåˆ—åŒ–æ¶ˆæ¯çš„ã€‚(å›æ”¾)

infoæ˜¯ç”¨æ¥è¾“å‡ºbagæ–‡ä»¶çš„ç›¸å…³ä¿¡æ¯çš„ã€‚æ¯”å¦‚æœ‰å¤šå°‘æ¡æ¶ˆæ¯ï¼Œå½•åˆ¶èµ·å§‹æ—¶é—´å’Œç»ˆæ­¢æ—¶é—´ä»¥åŠæŒç»­æ—¶é—´ã€‚

reindexæ˜¯é‡å»ºbagæ–‡ä»¶ï¼Œå¯ä»¥ä¿®æ”¹bagæºæ•°æ®æ–‡ä»¶ã€‚

listæ˜¯è¾“å‡ºrosbag2ä¸­å¯ç”¨çš„æ’ä»¶(é«˜é˜¶åº”ç”¨)ã€‚

convertæˆ‘ä»¬å¯ä»¥ç”¨è¿™ä¸ªç»™bagæ–‡ä»¶ä¿®æ”¹æ‰©å±•åï¼Œä¹Ÿå¯ä»¥æŠŠå¤šä¸ªbagæ–‡ä»¶åˆå¹¶æˆä¸€ä¸ªæ–‡ä»¶ã€‚

  

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWM3NzNhYTczY2NlZjVkYWY1ODc2ZjI4YjQ5ZTU2NWRfUHd2UVpXQlh2Z3B2QjJIYmhrdjRUVmFSSXRIdzRDRzlfVG9rZW46RUsyMGJjTWRVb3BOOW54ZGluUGNyTjhXbkFiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ‰“å¼€å°ä¹Œé¾ŸèŠ‚ç‚¹ä¸é”®ç›˜æ§åˆ¶å°ä¹Œé¾ŸèŠ‚ç‚¹ã€‚

æˆ‘ä»¬ç”¨é”®ç›˜æ§åˆ¶å°ä¹Œé¾Ÿï¼Œç„¶åæŠŠé€Ÿåº¦æŒ‡ä»¤é€šè¿‡rosbag2ç»™åºåˆ—åŒ–ã€‚

ç„¶åæˆ‘ä»¬å…³æ‰ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œå†é‡å¯å°ä¹Œé¾ŸèŠ‚ç‚¹ï¼Œç„¶åè¿™æ¬¡ä¸é€šè¿‡é”®ç›˜æ§åˆ¶ï¼Œè€Œæ˜¯é€šè¿‡play bagæ–‡ä»¶è®©å°ä¹Œé¾Ÿè¿åŠ¨ã€‚

  

recordæŒ‡ä»¤åé¢è¦è·Ÿä¸€ä¸ªè¯é¢˜ç»„æˆçš„åˆ—è¡¨ï¼Œä½†æ˜¯åœ¨å’±ä»¬ä¸‹é¢çš„æ“ä½œä¸­ï¼Œåªç”¨åˆ°äº†ä¸€ä¸ªè¯é¢˜ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDVmODdhYWIzZjc2MzkzZGZlOWY5NDBkMzVhZGRhZWNfVmRKOWQ4QWdTWk1COXVGSU1ISXprd2kxNDlpODdpQmNfVG9rZW46Uzg5dGJWM1hYb0RCdzF4UlhCMGNNTlVSbnFjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmY2NzRhOTg1Y2FjZjBmNTliMjk2MjllMTQ5M2RkODFfZmxvRjJSWkw1MGo5Q3Z0Y1locXRiQnVqSU5CV0NkTjNfVG9rZW46R3IzcmIzekhmb0l0aG14eExhR2NzV2tJbjBkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ç„¶åå†ç”¨outputï¼ŒæŠŠåºåˆ—åŒ–åçš„æ–‡ä»¶å†™å‡ºåˆ°ä¸€ä¸ªç£ç›˜ç›®å½•ä¸­å»ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzFhOTAwNjA5ZDdjYzdhY2M1MDgzYTdiYTliMGZlMmZfRmVWQjNCVFJOb0F2SGF6NWh1dkZ4THFiS0Y3ZXdWempfVG9rZW46UkVqTmI0ZWI3b1h4bzJ4RUNKd2N3Wkc3bnlUXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

cdè¿›æƒ³ä¿å­˜bagçš„ç›®å½•ï¼Œç„¶è¾“å…¥recordæŒ‡ä»¤ï¼Œåé¢è·Ÿè¯é¢˜åç§°ï¼Œç„¶å-o +bagæ–‡ä»¶åï¼Œè¿™é‡Œä¹Ÿå¯ä»¥ä¸é‡æ–°å‘½åbagæ–‡ä»¶ï¼Œè¿™æ ·ä¼šç”¨é»˜è®¤çš„åå­—ï¼Œé»˜è®¤çš„åç§°æ˜¯å¹´æœˆæ—¥å‘½åçš„ã€‚

è¿™æ ·å°±å·²ç»å¼€å§‹å½•åˆ¶äº†ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmIwZjRkYzA1ODQ2OTdiYWYxZmNiZTJmNDFlZTlmNDVfY2VtUEZWV0c2UEkwTFZBeXh0ZGhRQ01IendyVVhyZWRfVG9rZW46SGQyR2JQQTl2b2JuNHh4RjZSb2NBOWs5bnFmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTliY2FmYzE0ZWU2NjA1MDM1N2QzMDI5NWIxMGMzZTBfcktNMjNmdFFtc2laM0I0TUhoaGdVS1h6T0JRenJ1THJfVG9rZW46Tm81eWJSejVhbzZXdnp4bENEVmM3S1g5bndoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æŒ‰Ctrl + Cè¿›è¡Œç»“æŸï¼Œç»“æŸæœ‰ä¸ªæç¤ºï¼Œè¯´æ­£åœ¨å°†æ¶ˆæ¯å†™å…¥bagï¼Œéœ€è¦ä¸€æ®µæ—¶é—´ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDgzZGFkOThlNjY1YjU4MWM4ZDgzMjc3N2ZkMjdhYWVfeXdvdXVud21aRW1XN0liVXhRbjR5QW5CU2dodFlzMlBfVG9rZW46S0k3Q2JLMlVCbzVkZWh4NGxiSGNCUmxLbkFXXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NGJlYzcwNTJhNTI2NjIyZjU1MTY4Njk4MTMwYzZhMDlfcUI1Smp5R1BQSU1IRllMbmw1QmFaakZ2T1NKaGJ0VEpfVG9rZW46UHh4VGJVS0JOb0U4V0R4T3BMYmNybGwxbkVIXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™ä¸ªyamlæ–‡ä»¶æ˜¯æºæ•°æ®æ–‡ä»¶ã€‚

db3æ˜¯SQLiteæ•°æ®åº“ï¼Œè¿™ä¸ªæ˜¯ç§»åŠ¨ç«¯(æ¯”å¦‚æ‰‹æœº)å¸¸ç”¨çš„æ•°æ®åº“ã€‚

è¿™ä¸ªæ•°æ®åº“å°±å­˜å‚¨äº†å½•åˆ¶çš„æ•°æ®ã€‚

  

3.  ## rosbag2 C++æ¡ˆä¾‹åˆ†æåŠæ¡†æ¶æ­å»º
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODY0ZGI2Nzk2NmZjMzhkMjk4Njk4YWE5NWE5OGYwYWZfMUZqdzBBV01PcXFJSEdRSThidmtOSGVySEVmbGdBR2FfVG9rZW46TjJ4TGJaaTEwb3E4UzZ4ZTdnb2M4SURGbnVnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTA1YzA3NzhlYzBkOTdiODY1YmU5ZGQ5NmI3NjVmNzRfazA3eGN0S3ZvZENZZG1keHJoSDRibmVndWxkM240QVZfVG9rZW46TnFKTGJXYWJOb2hLZnJ4TWpza2NZcEtabjdnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```CMake
add_executable(demo01_writer src/demo01_writer.cpp)
ament_target_dependencies(
  demo01_writer
  "rclcpp"
  "rosbag2_cpp"
  "geometry_msgs"
)

add_executable(demo02_reader src/demo02_reader.cpp)
ament_target_dependencies(
  demo02_reader
  "rclcpp"
  "rosbag2_cpp"
  "geometry_msgs"
)

install(TARGETS 
  demo01_writer
  demo02_reader
  DESTINATION lib/${PROJECT_NAME})
```

4.  ## rosbag2 C++ å½•åˆ¶æ•°æ®
    

```C++
/* 
  éœ€æ±‚ï¼šå½•åˆ¶ turtle_teleop_key èŠ‚ç‚¹å‘å¸ƒçš„é€Ÿåº¦æŒ‡ä»¤ã€‚
  æ­¥éª¤ï¼š
    1.åŒ…å«å¤´æ–‡ä»¶ï¼›
    2.åˆå§‹åŒ– ROS å®¢æˆ·ç«¯ï¼›
    3.å®šä¹‰èŠ‚ç‚¹ç±»ï¼›
      3-1.åˆ›å»ºå†™å‡ºå¯¹è±¡æŒ‡é’ˆï¼›
      3-2.è®¾ç½®å†™å‡ºçš„ç›®æ ‡æ–‡ä»¶ï¼›
      3-3.å†™å‡ºæ¶ˆæ¯ã€‚
    4.è°ƒç”¨ spin å‡½æ•°ï¼Œå¹¶ä¼ å…¥å¯¹è±¡æŒ‡é’ˆï¼›
    5.é‡Šæ”¾èµ„æºã€‚

 */
// 1.åŒ…å«å¤´æ–‡ä»¶ï¼›
#include "rclcpp/rclcpp.hpp"
#include "rosbag2_cpp/writer.hpp"
#include "geometry_msgs/msg/twist.hpp"

using std::placeholders::_1;

// 3.å®šä¹‰èŠ‚ç‚¹ç±»ï¼›
class SimpleBagRecorder : public rclcpp::Node
{
public:
  SimpleBagRecorder()
  : Node("simple_bag_recorder")
  {
    // 3-1.åˆ›å»ºå†™å‡ºå¯¹è±¡æŒ‡é’ˆï¼›
    writer_ = std::make_unique<rosbag2_cpp::Writer>();
    // 3-2.è®¾ç½®å†™å‡ºçš„ç›®æ ‡æ–‡ä»¶ï¼›(ç›®å½•ä¸ºwsç›®å½•)
    writer_->open("src/cpp02_rosbag/my_bag");
    subscription_ = create_subscription<geometry_msgs::msg::Twist>(
      "/turtle1/cmd_vel", 10, std::bind(&SimpleBagRecorder::topic_callback, this, _1));
  }

private:
  void topic_callback(std::shared_ptr<rclcpp::SerializedMessage> msg) const
  {
    rclcpp::Time time_stamp = this->now();
    // 3-3.å†™å‡ºæ¶ˆæ¯ã€‚
    RCLCPP_INFO(this->get_logger(),"æ•°æ®å†™å‡º... ...");
    writer_->write(msg, "/turtle1/cmd_vel", "geometry_msgs/msg/Twist", time_stamp);
  }

  rclcpp::Subscription<geometry_msgs::msg::Twist>::SharedPtr subscription_;
  std::unique_ptr<rosbag2_cpp::Writer> writer_;
};

int main(int argc, char * argv[])
{
  // 2.åˆå§‹åŒ– ROS å®¢æˆ·ç«¯ï¼›
  rclcpp::init(argc, argv);
  // 4.è°ƒç”¨ spin å‡½æ•°ï¼Œå¹¶ä¼ å…¥å¯¹è±¡æŒ‡é’ˆï¼›
  rclcpp::spin(std::make_shared<SimpleBagRecorder>());
  // 5.é‡Šæ”¾èµ„æºã€‚
  rclcpp::shutdown();
  return 0;
}
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGRmN2JmODhhOTFjZGYyNDExMzg1NjhiNGMyYzU3NzdfUnh3TWlRWW1vTmxtUTdCcFRSSno4bmdnMjdSU1Z1VTNfVG9rZW46WEZJTmJ2Qjl0b2Ewd0V4aDdsZ2NyMW8xbmdoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™æ˜¯ä¸€ä¸ªç›¸å¯¹ç›®å½•ï¼Œç›®å½•ä½ç½®æ˜¯å·¥ä½œç©ºé—´ç›®å½•ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGVmZGRjOWU3YTkwZTQ5NmRmMmFjMmFiYjJiZjRkZGRfbWhKNktsTEd5Q0FrOGphUlRmRGt1V081cWVjWHdiNm9fVG9rZW46UExHZGI0NG9Qb0U2Qkl4T25nRWNPeHpUbnNkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å†™æ•°æ®ä¹‹å‰ï¼Œè¦å…ˆåˆ›å»ºä¸€ä¸ªè®¢é˜…æ–¹ï¼Œè®¢é˜…æ–¹è¦å»ºç«‹ä¸€ä¸ªå›è°ƒå‡½æ•°ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGVlODQ4NjE1NzMwZGE2N2I5ZDk5M2Y2YjgwNDFmMGNfY01HSUxLQ1BWZ2JaMVFEcTFhWXhNdUpnb2ZiNXVxUzhfVG9rZW46WmpvbWJIMzlrb0xlZ0F4UHdwbmNJSlpqbmplXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å›è°ƒå‡½æ•°å…¥å£å‚æ•°ï¼Œæ¶ˆæ¯ç±»å‹ç”¨writeå‡½æ•°çš„å…¥å£å‚æ•°ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzYxMzNhYTRjM2JhYTJmZGZiZjBmNGFiMzRjOWNlOGZfZ3ptR0JISWQxS2o4QUEzcVA3UzNqcXRvdWtTWUFxTDRfVG9rZW46RjFISWJUelBIb2ludHF4aDhGcmNEUzdLbkVlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™é‡Œè¦ç”¨æ–œæ ä»£æ›¿å†’å·ï¼Œå› ä¸ºå…¥å£æ˜¯stringç±»å‹ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWQzMmQ3ZmEzMTU5ODllZjM4NzZhMTExZTFiODhlZmRfWkNTcGw2TmpQc05aWmFIRXlXWXJGQkpsMnN3cWZ1UnhfVG9rZW46VE4xOWJ4WWg3bzZhSlJ4OThHR2NDenpxbnVkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzUxMWNhZGQ5Yzc3NGJiNGUwOGYwNTVkNGY2ODc5ZjRfdk5xbWhsdENKVmMzZmZhaUp5TWt5Ym5xMVhQdm1WeFBfVG9rZW46Q1ZmNmJTcWVYb2tSekJ4MVRSaWNueUpEbkxpXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

  

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2EwYjVkOGExNzI2NmVlNjkwMGE0YmJjZjBkYmQ5NzRfTGpLcVU2MmFoQVBmRkhrUEJhZ3ZWbFpIWEJBOUlZWEZfVG9rZW46U1BqZGJDVVk3b29kMVZ4V0hDb2NvYXVMbjBmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

åˆ›å»ºä¹Œé¾ŸèŠ‚ç‚¹ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Yzg2ODczMWNiNjhhMzVlMzg5MTY2YWM1MzI0NWIzNDNfekYxNVoxenVrZU5QT0NabGhicFA1UTF1MlIzMVh6V0RfVG9rZW46QW5WYWI4RTg2b2I1cEx4VkNrSmNsaHR6bmNQXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¯åŠ¨writerèŠ‚ç‚¹

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWY3MDVmYzNhNDI2ODQ5OTkxYWUwMTczZmMyZTJjNDVfTmZ3NHVPTDk1YWpYQVRCeE5OUHJld1RId0dzS0VZcjhfVG9rZW46VU83WGJlMHdBbzVIWWx4clV3RWNtamdibkpmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿è¡Œå°ä¹Œé¾Ÿ

  

è¿è¡Œä¸€ä¼šå„¿åï¼Œå…³æ‰æ‰€æœ‰èŠ‚ç‚¹ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzMyMWI1ODFiM2E2MjVmNjcxYjRkMjUxNDgzYTRhN2RfaEcybkZJMThpWExvUlBaTnpMUXA5UXhVV2NvZWsxU1pfVG9rZW46TEVLR2JZVjJ1bzhmN2d4RktxNWN6Q2ZYbnllXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æˆåŠŸç”Ÿæˆäº†æ–‡ä»¶

  

  

éªŒè¯å½•åˆ¶æ–‡ä»¶æ˜¯å¦æˆåŠŸã€‚

åœ¨éªŒè¯å‰ï¼Œå…ˆåˆ›å»ºä¸€ä¸ªä¹Œé¾ŸèŠ‚ç‚¹ï¼Œä¸ç”¨åˆ›å»ºæ§åˆ¶èŠ‚ç‚¹ã€‚

```C++
ros2 bag play src/cpp02_rosbag/my_bag
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzU3ZjJjYjMxZjNmNDY3YzE2MDU3ZGZmNmFiYjQ4ZWZfZDdZYlhJVkkwU05oa1dIQXZsYlFhbVFncnM2ZkZ2WmhfVG9rZW46WVhIbmJyRnVWb1NXd0l4clQyQmNXellBbkxiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¯ä»¥çœ‹åˆ°ä¹Œé¾Ÿæ­£å¸¸èµ°äº†ã€‚å›æ”¾æˆåŠŸï¼

  

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDI0N2FhYjRlNmU0ZjY5ZDllOTMwMTk2NDI2NzAyZTdfdFdUcnhsQm1pdzg2d28wSlY3YTJmQjFuOEl6VzVZR0lfVG9rZW46QWQ1emJRTGtDb25XWHB4d01xSWNRaFE3bkJoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¦‚æœå·²ç»ç”Ÿæˆäº†ä¸€émy\_bagï¼Œå†æƒ³ç”Ÿæˆæ–°çš„ä¼šæ˜¾ç¤ºä¸èƒ½è¦†ç›–ã€‚

è§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥æŠŠmy\_bagè®¾ç½®ä¸ºåŠ¨æ€çš„ï¼ŒåŠ ä¸ªæ—¶é—´æˆ³æˆ–è€…ç›´æ¥æŒ‰åŠŸèƒ½å‘½åã€‚

  

5.  ## rosbag2 C++ è¯»å–æ•°æ®
    

```C++
/* 
  éœ€æ±‚ï¼šè¯»å– bag æ–‡ä»¶æ•°æ®ã€‚
  æ­¥éª¤ï¼š
    1.åŒ…å«å¤´æ–‡ä»¶ï¼›
    2.åˆå§‹åŒ– ROS å®¢æˆ·ç«¯ï¼›
    3.å®šä¹‰èŠ‚ç‚¹ç±»ï¼›
      3-1.åˆ›å»ºè¯»å–å¯¹è±¡æŒ‡é’ˆï¼›
      3-2.è®¾ç½®è¯»å–çš„ç›®æ ‡æ–‡ä»¶ï¼›
      3-3.è¯»æ¶ˆæ¯ï¼›
      3-4.å…³é—­æ–‡ä»¶ã€‚
    4.è°ƒç”¨ spin å‡½æ•°ï¼Œå¹¶ä¼ å…¥å¯¹è±¡æŒ‡é’ˆï¼›
    5.é‡Šæ”¾èµ„æºã€‚

 */
 // 1.åŒ…å«å¤´æ–‡ä»¶ï¼›
 #include "rclcpp/rclcpp.hpp"
 #include "rosbag2_cpp/reader.hpp"
 #include "geometry_msgs/msg/twist.hpp"
 // 3.å®šä¹‰èŠ‚ç‚¹ç±»ï¼›
class SimpleBagPlayer: public rclcpp::Node {
public:
    SimpleBagPlayer():Node("simple_bag_player"){
        // 3-1.åˆ›å»ºè¯»å–å¯¹è±¡æŒ‡é’ˆï¼›
        reader_ = std::make_unique<rosbag2_cpp::Reader>();
        // 3-2.è®¾ç½®è¯»å–çš„ç›®æ ‡æ–‡ä»¶ï¼›
        reader_->open("src/cpp02_rosbag/my_bag");
        // 3-3.è¯»æ¶ˆæ¯ï¼›
        while (reader_->has_next())
        {
            auto twist = reader_->read_next<geometry_msgs::msg::Twist>();
            RCLCPP_INFO(this->get_logger(),"çº¿é€Ÿåº¦:%.2f, è§’é€Ÿåº¦: %.2f",twist.linear.x, twist.angular.z);
        }
        // 3-4.å…³é—­æ–‡ä»¶ã€‚
        reader_->close();
    }
private:
    std::unique_ptr<rosbag2_cpp::Reader> reader_;

};

int main(int argc, char const *argv[]){
    // 2.åˆå§‹åŒ– ROS å®¢æˆ·ç«¯ï¼›
    rclcpp::init(argc,argv);
    // 4.è°ƒç”¨ spin å‡½æ•°ï¼Œå¹¶ä¼ å…¥å¯¹è±¡æŒ‡é’ˆï¼›
    rclcpp::spin(std::make_shared<SimpleBagPlayer>());
    // 5.é‡Šæ”¾èµ„æºã€‚
    rclcpp::shutdown();
    return 0;
}
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Mzc5YmIxY2U0OWViZDY1MDM4NDI0NTRmODJmM2MyMzJfNmpHRVk2VlBsVVRBeGhjN1VoaWZ3bG5aMDNLb0ttME9fVG9rZW46T1hDaWI2VjBob0lwTEN4d2tNS2NFWHFsbnVlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjQxYmVlNGRhZTZiODY1NjQ0NjBiMTc0MjYwZmQzYjVfWWhMd1NZR3plMk1rYkROYnZKaFRaQWFVcVVTOWN4ejBfVG9rZW46QmNKTmJTelpsb2VPRm54UmNNMGNrZHh4bjljXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ç¼–è¯‘

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjM3ZDQ0ZTU0YTE1NWFiYjE2Y2Y0ZTZiZDIzMTYyY2JfRVg3WUt5WXhlaHRiOHV2eHZKb0hoNHBIbTBtY1U2Q3pfVG9rZW46Vlh6MWJuMjlLb1Jqb0h4YWEwWWNGRlp2bjJkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™æ˜¾ç¤ºèƒ½è¯»å‡ºæ¥å‡ æ¡ä¿¡æ¯ã€‚èƒ½è¯»å‡ºæ¥8æ¡ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDRiMmU4MmE2MDIyZjA5YzQ1NDMxYjNhMjUxMTY3ZWZfamFmQWZvaTF4NUxlaXFXTW5KdGNLODdJY1YxWFBNMzVfVG9rZW46QmxLM2JoTVlNbzF0Q3d4R29SVmMwQmRtblJmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ­£å¥½8æ¡

  

8.  # åæ ‡å˜æ¢TF
    

1.  ## åæ ‡å˜æ¢
    

1.  ### å¼•è¨€ä¸åº”ç”¨åœºæ™¯
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjJlZjE0ZjI1MmE2Yjc0OTlkOTZiNjk0N2I3ZDk1OGNfWWNPRjY3dWxyMGloQjJQeEhWWGRDQVozQ28xeHRzanFfVG9rZW46UVltdGJjRzczb1FLYVh4SjgzOGN2bW5kbnBnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

**`é‡Œç¨‹è®¡ODOM`**

**`æƒ¯æ€§è®¡IMU`**

**`æ¿€å…‰é›·è¾¾Laser`**

**`æ‘„åƒå¤´Camera`**

  

åœºæ™¯1ï¼šç°æœ‰ä¸€ç§»åŠ¨å¼æœºå™¨äººåº•ç›˜ï¼Œåœ¨åº•ç›˜ä¸Šå®‰è£…äº†ä¸€é›·è¾¾ï¼Œé›·è¾¾ç›¸å¯¹äºåº•ç›˜çš„åç§»é‡å·²çŸ¥ï¼Œç°é›·è¾¾æ£€æµ‹åˆ°ä¸€éšœç¢ç‰©ä¿¡æ¯ï¼Œè·å–åˆ°åæ ‡åˆ†åˆ«ä¸º(x,y,z)ï¼Œè¯¥åæ ‡æ˜¯ä»¥é›·è¾¾ä¸ºå‚è€ƒç³»çš„ï¼Œå¦‚ä½•å°†è¿™ä¸ªåæ ‡è½¬æ¢æˆä»¥å°è½¦ä¸ºå‚è€ƒç³»çš„åæ ‡å‘¢ï¼Ÿ

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDBhMWRmNWIwZTRmMjBlMGU1YTRmOWI4MzgzMDU4NjFfTnpiN3ROdGNUMDA4bFFNVWZ2UHV1b2VnRGl3a3M1WEdfVG9rZW46THNUYWJDZ01KbzBKUXF4b3cwS2M0QW5qbmllXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmU5ZDA4NWI0NWNlOWYxMGFjYWM5ZmM0NWUwMjBjNDVfMFVEUEV5NmJMQ3FwQTJ1dUpHZlJQYlhacW04cW1iRlJfVG9rZW46WDhvcmJEWmFHb3RmNUt4cXJqaGNPSWZBbjRiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ¿€å…‰é›·è¾¾ä¸å°è½¦çš„ä¸­å¿ƒæˆ–è¾¹ç¼˜ç›¸å·®çš„æ¨ªçºµè·ç¦»ï¼Œä»¥åŠæ¿€å…‰é›·è¾¾ä¸å¢™çš„è·ç¦»åŠå°è½¦ä¸å¢™çš„è·ç¦»ã€‚

  

åœºæ™¯2:ç°æœ‰ä¸€å¸¦æœºæ¢°è‡‚çš„æœºå™¨äºº(æ¯”å¦‚:PR2)éœ€è¦å¤¹å–ç›®æ ‡ç‰©ï¼Œå½“å‰æœºå™¨äººå¤´éƒ¨æ‘„åƒå¤´å¯ä»¥æ¢æµ‹åˆ°ç›®æ ‡ç‰©çš„åæ ‡(x,y,z)ï¼Œä¸è¿‡è¯¥åæ ‡æ˜¯ä»¥æ‘„åƒå¤´ä¸ºå‚è€ƒç³»çš„ï¼Œè€Œå®é™…æ“ä½œç›®æ ‡ç‰©çš„æ˜¯æœºæ¢°è‡‚çš„å¤¹å…·ï¼Œå½“å‰æˆ‘ä»¬éœ€è¦å°†è¯¥åæ ‡è½¬æ¢æˆç›¸å¯¹äºæœºæ¢°è‡‚å¤¹å…·çš„åæ ‡ï¼Œè¿™ä¸ªè¿‡ç¨‹å¦‚ä½•å®ç°ï¼Ÿ

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzAwZDg4Mzg4MGE1NGYzMGEzYjM0M2RiMzc3MjhiNThfY01UTmpaT0RoNTNuMzhuZ0oxN3JTTWoxVkltMkFoQ0ZfVG9rZW46UzZIM2J5UG5lb1NsRXJ4MDZTMGN2cHIxbjhnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä»¥ä¸Šé€šè¿‡TFå³å¯ç®—

  

2.  ### æ¦‚å¿µä¸ä½œç”¨
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjdhYTAyNjFlNWJmOGI2YzIyMWM5Yjk2MzdiNzNlZjJfYzJ6dm1FbmhLbERFNTYxWVJBU1hhWVR0YUZRWDNoTk1fVG9rZW46T2N6aWJaYzNwb0MybzJ4aTYxNWNCMTZFbkhlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

TFå®è¡Œ**å³æ‰‹åæ ‡ç³»**

  

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmJiZjRjYmYyOWMxMzdmNmQ4OGUzYTEwZWM2MGI0OTNfQzRreUVCSExUQnVOQWM1cjZSTmlVblA1dmN5Mnh1SlJfVG9rZW46QlUwQWJrWDJ2b01lVEp4RFhQUWN4Y3FSbjNiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjZjNTlkODcyMmQwZDUyYTZmOTU1NDdkNzk3NzE2MzRfVXJBZVZmTkZ5OTBtSk03UVpyV3Jld05zcFhISDdHS05fVG9rZW46UUhDMmJKME9nb0VaRlp4ME1wUWNuOU85blFiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzY2OTQ4ODcxY2YyMzQ3NGFkZTU1MTdlODFlNWU5NTJfQmN2bFV3S2ZhR3NqQm90N1loSHdrR2RaT3FHeHRtQ3VfVG9rZW46WVBiWmI5dFZib1hhRWF4NWdiM2NHbFdkbmtiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTkyM2I1OTI0MmM4ODIwN2MyOTk0ZjJhOTcyNjYwMTFfU3JuTXVJc2lRdGthRXEwSFlYZEtVaUpKWFNsbDhjd2VfVG9rZW46U2dodmJZcE1ob1FsWXV4amRGNGNyWUdubkNnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

é‡è¦çš„å°±æ˜¯ç›¸å¯¹ä½ç½®å’Œæ—¶é—´ï¼Œåœ¨æŸä¸ªæ—¶é—´æŸä¸ªç‰©ä½“ä½äºæŸä¸ªä½ç½®ã€‚ï¼ˆæ—¶é—´å·®å¤ªå¤§ï¼Œæ•°æ®ä¼šè¢«åºŸå¼ƒï¼‰

  

3.  ### æ¡ˆä¾‹å®‰è£…ä»¥åŠè¿è¡Œ
    

å®‰è£…ä¹Œé¾Ÿæ¡ˆåˆ—ï¼š

```Bash
# Humbleç‰ˆæœ¬å®‰è£…
sudo apt-get install ros-humble-turtle-tf2-py ros-humble-tf2-tools ros-humble-tf-transformations
# Jazzyç‰ˆæœ¬å®‰è£…
sudo apt-get install ros-jazzy-turtle-tf2-py ros-jazzy-tf2-tools ros-jazzy-tf-transformations
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmMzYTNlYWM5NDEyZDY2OTg5ZWYyYzc5ZGFmMWQ5ZTVfNHNSUE50WHlJYWJrWXFoSDB6Mmd2YVlHYnZZR3NiNWNfVG9rZW46UElSc2JKbE1jb0o2c1J4VGFlMWNBSTBoblRjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ­¤å¤–ï¼Œè¿˜éœ€è¦å®‰è£…ä¸€ä¸ªåä¸º `transforms3d` çš„ Python åŒ…ï¼Œå®ƒä¸º `tf_transformations`åŒ…æä¾›å››å…ƒæ•°å’Œæ¬§æ‹‰è§’å˜æ¢åŠŸèƒ½ï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š

```Bash
# æ–¹å¼ä¸€ï¼ˆä¸æ¨èï¼‰
sudo apt intall python3-pip
pip3 install transforms3d

#æ–¹å¼äºŒï¼ˆæ¨èï¼‰
sudo apt install python3-transforms3d
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTExMTcxNWFlMzNkZGU4NzcwMWU5ZjlmOWQ1YTY4MmJfcVdkWnZBTWZpZzBOQUlqdDNCS2VaUkNrWjFYT1VscnVfVG9rZW46RXc0QWIzb1RwbzF6ZjZ4TkYyY2NZOEFWbktjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

å¯åŠ¨ä¸¤ä¸ªç»ˆç«¯ï¼Œç»ˆç«¯1è¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š

```Bash
ros2 launch turtle_tf2_py turtle_tf2_demo.launch.py
```

è¯¥å‘½ä»¤ä¼šå¯åŠ¨ turtlesim\_node èŠ‚ç‚¹ï¼Œturtlesim\_node èŠ‚ç‚¹ä¸­è‡ªå¸¦ä¸€åªå°ä¹Œé¾Ÿ turtle1ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜ä¼šæ–°ç”Ÿæˆä¸€åªä¹Œé¾Ÿ turtle2ï¼Œturtle2 ä¼šè¿è¡Œè‡³ turtle1 çš„ä½ç½®ã€‚

ç»ˆç«¯2è¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š

```Bash
ros2 run turtlesim turtle_teleop_key
```

è¯¥ç»ˆç«¯ä¸‹å¯ä»¥é€šè¿‡é”®ç›˜æ§åˆ¶ turtle1 è¿åŠ¨ï¼Œå¹¶ä¸” turtle2 ä¼šè·Ÿéš turtle1 è¿åŠ¨ï¼ˆå‚è€ƒå¼•è¨€éƒ¨åˆ†çš„ **æ¡ˆä¾‹1** ï¼‰ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTEzNjJhYjQ4ZGFiNGRiM2FlNzVhYTU3ZmJlOWMxMThfelQwc0lXbkpMUGcwNUdjZk9vM0J0aUNzVFJDV1J5SnhfVG9rZW46Rjl3Z2JlVXE5b3ZGTTZ4ZURtTWM0V0R6bjRnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

é¾Ÿç”·ğŸ¢ğŸš¹ä¼šè·Ÿéšå‰é¢çš„ä¹Œé¾ŸğŸ¢è¿åŠ¨

  

4.  ### åæ ‡å˜æ¢ç›¸å…³æ¶ˆæ¯
    

åæ ‡å˜æ¢çš„å®ç°å…¶æœ¬è´¨æ˜¯åŸºäºè¯é¢˜é€šä¿¡çš„å‘å¸ƒè®¢é˜…æ¨¡å‹çš„ï¼Œå‘å¸ƒæ–¹å¯ä»¥å‘å¸ƒåæ ‡ç³»ä¹‹é—´çš„ç›¸å¯¹å…³ç³»ï¼Œè®¢é˜…æ–¹åˆ™å¯ä»¥ç›‘å¬è¿™äº›æ¶ˆæ¯ï¼Œå¹¶å®ç°ä¸åŒåæ ‡ç³»ä¹‹é—´çš„å˜æ¢ã€‚æ˜¾ç„¶çš„æ ¹æ®ä¹‹å‰ä»‹ç»ï¼Œåœ¨è¯é¢˜é€šä¿¡ä¸­ï¼Œæ¥å£æ¶ˆæ¯ä½œä¸ºæ•°æ®è½½ä½“åœ¨æ•´ä¸ªé€šä¿¡æ¨¡å‹ä¸­æ˜¯æ¯”è¾ƒé‡è¦çš„ä¸€éƒ¨åˆ†ï¼Œæœ¬èŠ‚å°†ä¼šä»‹ç»åæ ‡å˜æ¢ä¸­å¸¸ç”¨çš„ä¸¤ç§æ¥å£æ¶ˆæ¯ï¼š`geometry_msgs/msg/TransformStamped`å’Œ`geometry_msgs/msg/PointStamped`ã€‚

å‰è€…ç”¨äºæè¿°æŸä¸€æ—¶åˆ»ä¸¤ä¸ªåæ ‡ç³»ä¹‹é—´ç›¸å¯¹å…³ç³»çš„æ¥å£ï¼Œåè€…ç”¨äºæè¿°æŸä¸€æ—¶åˆ»åæ ‡ç³»å†…æŸä¸ªåæ ‡ç‚¹çš„ä½ç½®çš„æ¥å£ã€‚åœ¨åæ ‡å˜æ¢ä¸­ï¼Œä¼šç»å¸¸æ€§çš„ä½¿ç”¨åˆ°åæ ‡ç³»ç›¸å¯¹å…³ç³»ä»¥åŠåæ ‡ç‚¹ä¿¡æ¯ã€‚

  

1.  #### geometry\_msgs/msg/TransformStamped
    

é€šè¿‡å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹æ¥å£å®šä¹‰ï¼š

```Bash
ros2 interface show geometry_msgs/msg/TransformStamped
```

æ¥å£å®šä¹‰è§£é‡Šï¼š

```Plain Text
std_msgs/Header header
    builtin_interfaces/Time stamp     # æ—¶é—´æˆ³
        int32 sec         #ç§’
        uint32 nanosec    #çº³ç§’
    string frame_id                   # çˆ¶çº§åæ ‡ç³»
string child_frame_id                 # å­çº§åæ ‡ç³»
Transform transform                   # å­çº§åæ ‡ç³»ç›¸å¯¹äºçˆ¶çº§åæ ‡ç³»çš„ä½å§¿
    Vector3 translation               # ä¸‰ç»´åç§»é‡
        float64 x
        float64 y
        float64 z
    Quaternion rotation               # å››å…ƒæ•°
        float64 x 0
        float64 y 0
        float64 z 0
        float64 w 1
```

æè¿°ä¸€ä¸ªç‰©ä½“è¿åŠ¨ä¸€èˆ¬æœ‰6ä¸ªè‡ªç”±åº¦ï¼šXï¼ŒYï¼ŒZï¼ŒYawï¼ŒPitchï¼ŒRollã€‚

ä¸‰ä¸ªå¹³åŠ¨ï¼Œä¸‰ä¸ªæ—‹è½¬ï¼š

Vector3 translationä»£è¡¨3ä¸ªå¹³ç§»

Quaternion rotationå››å…ƒæ•°å¯ä»¥è½¬åŒ–ä¸ºä¸‰ä¸ªæ¬§æ‹‰è§’(yawï¼Œpitchï¼Œroll)

ï¼ˆQï¼šä¸ºä½•ä¸ç”¨æ¬§æ‹‰è§’è€Œç”¨å››å…ƒæ•°ï¼ŸAï¼šå› ä¸ºç”¨æ¬§æ‹‰è§’è®¡ç®—ä¼šå‡ºç°æ­»é”ç°è±¡ï¼Œæ‰€ä»¥é€‰æ‹©ç”¨å››å…ƒæ•°ï¼Œè€Œä¸ç”¨æ¬§æ‹‰è§’ï¼Œä»¥ä¾¿é¿å…æ¬§æ‹‰è§’çš„ç¼ºé™·ã€‚ï¼‰

  

3ä¸ªå¹³ç§»ä»¥ç±³meterä¸ºå•ä½

3ä¸ªæ—‹è½¬ä»¥å¼§åº¦radä¸ºå•ä½

  

å››å…ƒæ•°ç±»ä¼¼äºæ¬§æ‹‰è§’ç”¨äºè¡¨ç¤ºåæ ‡ç³»çš„ç›¸å¯¹å§¿æ€ï¼Œ

å…·ä½“è½¬åŒ–è¯¦è§[å¤§ç–†å¼€å‘æ¿Cå‹åµŒå…¥å¼è½¯ä»¶æ•™ç¨‹æ–‡æ¡£.pdf](https://sdutvincirobot.feishu.cn/wiki/PVS8wQzRgiTRqpko9l4cEK33nhw)çš„18.3èŠ‚

å…·ä½“è½¬åŒ–ç®—æ³•ï¼ˆMahonyç®—æ³•ï¼‰ï¼ˆROS2çš„TF2åº“ä¸­ä¹Ÿæœ‰å…·ä½“çš„è½¬åŒ–ç®—æ³•ï¼‰ï¼š

https://x-io.co.uk/open-source-imu-and-ahrs-algorithms/

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODNlYzJjNWVjYjRkNmYzOWQ3NTdlYjAxMmUxMjM5NzJfN2RUT1ZGMjVlOWVGR1p1V1AxRFR3Qk11OW51eE9CYk9fVG9rZW46TTRXS2JQb1Nob0tQc054SHdyQ2Noc0ZMblViXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTE0M2ZjM2U4YTZmMjg4MGNlYzQ2OTUwODZkZjYzZmZfeUVLRmZ2V2d3MGY5dTJxS004cEpSeEt2VXF5bU5HUGxfVG9rZW46SXZ0RWJCTXo1bzNaQlN4dktnM2MyWWVtbkxjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Mjg3MDM0ZDNjZGYzNTk5MTdkZjk3MzYyNTdlOTJmMTVfbnp3cTBIQjlwRTBTT0xndENKWjZUYWpXSzRTZVBxNlVfVG9rZW46UUQ0aWJlNmFab0F0VzN4b3JrOGN2MDhCbmdnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æŒ‰å³æ‰‹åæ ‡ç³»æ¥çœ‹ï¼ŒN2ç›¸å¯¹äºN1æ²¿Xè½´å¹³ç§»äº†1m(ä¸€æ ¼ä»£è¡¨1ç±³ï¼‰ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDdhMjU1MGYyNDY3YjZkNzJhNjExOWY1YTE4MzgzNDJfTmQ1VlRzTk5jZjNrNTBxbkttdzd2RVRycHNjcTB2WWlfVG9rZW46QXh3dmI5bkJFb0gxV0V4N1RsUGNPMTJ6bnhlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ—‹è½¬

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGEwYmI1MDc0ODU0YWY5NzZlZjNlZjFkYWQ4MTEzZjdfT29UWnNTRGFsamxubjM4VDdQalVOdVBpQTkza2V0cjhfVG9rZW46WnJraGJ4ZzdkbzRRaVd4ZUM3YmNkcHVFbjdnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

  

  

2.  #### geometry\_msgs/msg/PointStamped
    

é€šè¿‡å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹æ¥å£å®šä¹‰ï¼š

```Bash
ros2 interface show geometry_msgs/msg/PointStamped
```

æ¥å£å®šä¹‰è§£é‡Šï¼š

```Plain Text
std_msgs/Header header
    builtin_interfaces/Time stamp    # æ—¶é—´æˆ³
        int32 sec   #ç§’
        uint32 nanosec   #çº³ç§’
    string frame_id                  # å‚è€ƒç³»
Point point                          # ä¸‰ç»´åæ ‡
    float64 x
    float64 y
    float64 z
```

åœ¨ä¸‰ç»´ä¸­çš„åæ ‡ç‚¹

  

2.  ## åæ ‡å˜æ¢å¹¿æ’­
    

1.  ### å¼•è¨€ä¸æ¡ˆä¾‹åŠåˆ†æ
    

åæ ‡ç³»ç›¸å¯¹å…³ç³»ä¸»è¦æœ‰ä¸¤ç§ï¼š **é™æ€åæ ‡ç³»ç›¸å¯¹å…³ç³»** ä¸ **åŠ¨æ€åæ ‡ç³»ç›¸å¯¹å…³ç³»** ã€‚

æ‰€è°“é™æ€åæ ‡ç³»ç›¸å¯¹å…³ç³»æ˜¯æŒ‡ä¸¤ä¸ªåæ ‡ç³»ä¹‹é—´çš„ç›¸å¯¹ä½ç½®æ˜¯å›ºå®šä¸å˜çš„ï¼Œæ¯”å¦‚ï¼šè½¦è¾†ä¸Šçš„é›·è¾¾ã€æ‘„åƒå¤´ç­‰ç»„ä»¶ä¸€èˆ¬æ˜¯å›ºå®šå¼çš„ï¼Œé‚£ä¹ˆé›·è¾¾åæ ‡ç³»ç›¸å¯¹äºè½¦è¾†åº•ç›˜åæ ‡ç³»æˆ–æ‘„åƒå¤´åæ ‡ç³»ç›¸å¯¹äºè½¦è¾†åº•ç›˜åæ ‡ç³»å°±æ˜¯ä¸€ç§é™æ€å…³ç³»ã€‚

æ‰€è°“åŠ¨æ€åæ ‡ç³»ç›¸å¯¹å…³ç³»æ˜¯æŒ‡ä¸¤ä¸ªåæ ‡ç³»ä¹‹é—´çš„ç›¸å¯¹ä½ç½®å…³ç³»æ˜¯åŠ¨æ€æ”¹å˜çš„ï¼Œæ¯”å¦‚ï¼šè½¦è¾†ä¸Šæœºæ¢°è‡‚çš„å…³èŠ‚æˆ–å¤¹çˆªã€å¤šè½¦ç¼–é˜Ÿä¸­ä¸åŒè½¦è¾†ç­‰éƒ½æ˜¯å¯ä»¥è¿åŠ¨çš„ï¼Œé‚£ä¹ˆæœºæ¢°è‡‚çš„å…³èŠ‚æˆ–å¤¹çˆªåæ ‡ç³»ç›¸å¯¹è½¦è¾†åº•ç›˜åæ ‡ç³»æˆ–ä¸åŒè½¦è¾†åæ ‡ç³»çš„ç›¸å¯¹å…³ç³»å°±æ˜¯ä¸€ç§åŠ¨æ€å…³ç³»ã€‚

æœ¬èŠ‚ä¼šä¸»è¦ä»‹ç»å¦‚ä½•å®ç°é™æ€åæ ‡å˜æ¢å¹¿æ’­ä¸åŠ¨æ€åæ ‡å˜æ¢å¹¿æ’­ã€‚å¦å¤–ï¼Œæœ¬èŠ‚è¿˜ä¼šæ¼”ç¤ºå¦‚ä½•å‘å¸ƒåæ ‡ç‚¹æ¶ˆæ¯ã€‚

  

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODA4NGQ5NTMzYzFmNTU3OWM3NGNlOTI3MjkxOWYzNWNfM0tHSGNCWTVWNmgwQUdxTmduejg0OWFZbHRsSldIUzBfVG9rZW46U1JRWWJjYkdhb3pNejV4Mk9weGNtZTFlbkpkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ¿€å…‰é›·è¾¾Laserå’Œè‰²ç›¸å¤´ä¸åº•ç›˜ä½ç½®æ˜¯é™æ€çš„ï¼Œè€Œæœºæ¢°è‡‚çš„æœ«ç«¯æ‰§è¡Œå™¨ä¸æœºå™¨äººçš„ä½ç½®æ˜¯åŠ¨æ€çš„ã€‚

  

#### 1.æ¡ˆä¾‹éœ€æ±‚

**æ¡ˆä¾‹1ï¼š** ç°æœ‰ä¸€æ— äººè½¦ï¼Œåœ¨æ— äººè½¦åº•ç›˜ä¸Šè£…æœ‰å›ºå®šå¼çš„é›·è¾¾ä¸æ‘„åƒå¤´ï¼Œå·²çŸ¥è½¦è¾†åº•ç›˜ã€é›·è¾¾ä¸æ‘„åƒå¤´å„å¯¹åº”ä¸€åæ ‡ç³»ï¼Œå„åæ ‡ç³»çš„åŸç‚¹å–å…¶å‡ ä½•ä¸­å¿ƒã€‚ç°åˆå·²çŸ¥é›·è¾¾åæ ‡ç³»ç›¸å¯¹äºåº•ç›˜åæ ‡ç³»çš„ä¸‰ç»´å¹³ç§»é‡åˆ†åˆ«ä¸ºï¼šxæ–¹å‘0.4ç±³ï¼Œyæ–¹å‘0ç±³ï¼Œzæ–¹å‘0.2ç±³ï¼Œæ— æ—‹è½¬ã€‚æ‘„åƒå¤´åæ ‡ç³»ç›¸å¯¹äºåº•ç›˜åæ ‡ç³»çš„ä¸‰ç»´å¹³ç§»é‡åˆ†åˆ«ä¸ºï¼šxæ–¹å‘-0.5ç±³ï¼Œyæ–¹å‘0ç±³ï¼Œzæ–¹å‘0.4ç±³ï¼Œæ— æ—‹è½¬ã€‚è¯·å¹¿æ’­é›·è¾¾ä¸åº•ç›˜çš„åæ ‡ç³»ç›¸å¯¹å…³ç³»ï¼Œæ‘„åƒå¤´ä¸åº•ç›˜çš„åæ ‡ç³»ç›¸å¯¹å…³ç³»ï¼Œå¹¶åœ¨ rviz2 ä¸­æŸ¥çœ‹å¹¿æ’­çš„ç»“æœã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDMxNjkyZmU1ZTJjYTJmZjdmMGZkYTEwOGQxMjA5N2ZfNVBaTG9uRXU5bnFRT1JNTWlDajdvcXIxcG5DS2tzWHBfVG9rZW46R0JhaGJLMmVvb0JSRll4aUE1ZGN1M054bk1lXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

**æ¡ˆä¾‹2ï¼š** å¯åŠ¨ turtlesim\_nodeï¼Œè®¾è¯¥èŠ‚ç‚¹ä¸­çª—ä½“æœ‰ä¸€ä¸ªä¸–ç•Œåæ ‡ç³»(å·¦ä¸‹è§’ä¸ºåæ ‡ç³»åŸç‚¹)ï¼Œä¹Œé¾Ÿæ˜¯å¦ä¸€ä¸ªåæ ‡ç³»ï¼Œä¹Œé¾Ÿå¯ä»¥é€šè¿‡é”®ç›˜æ§åˆ¶è¿åŠ¨ï¼Œè¯·åŠ¨æ€å‘å¸ƒä¹Œé¾Ÿåæ ‡ç³»ä¸ä¸–ç•Œåæ ‡ç³»çš„ç›¸å¯¹å…³ç³»ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDQyNThhYzdhMGVhMjFiMWExMmEwOWM0MWQxOGNkMjFfZVlxRGRPYnBMRVgzcEpESzBkbkw4MXJSaFRKUE1GdmFfVG9rZW46U1VEdWJ5VmVFb0tUOTJ4VVRxcGNYcUdkbkloXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

#### 2.æ¡ˆä¾‹åˆ†æ

åœ¨ä¸Šè¿°æ¡ˆä¾‹ä¸­ï¼Œæ¡ˆä¾‹1éœ€è¦ä½¿ç”¨åˆ°é™æ€åæ ‡å˜æ¢ï¼Œæ¡ˆä¾‹2åˆ™éœ€è¦ä½¿ç”¨åŠ¨æ€åæ ‡å˜æ¢ï¼Œä¸è®ºæ— è®ºä½•ç§å®ç°å…³æ³¨çš„è¦ç´ éƒ½æœ‰ä¸¤ä¸ªï¼š

1.  å¦‚ä½•å¹¿æ’­åæ ‡ç³»ç›¸å¯¹å…³ç³»ï¼›
    
2.  å¦‚ä½•ä½¿ç”¨ rviz2 æ˜¾ç¤ºåæ ‡ç³»ç›¸å¯¹å…³ç³»ã€‚
    

#### 3.æµç¨‹ç®€ä»‹

ä»¥ç¼–ç çš„å®ç°å®ç°é™æ€æˆ–åŠ¨æ€åæ ‡å˜æ¢çš„æµç¨‹ç±»ä¼¼ï¼Œä¸»è¦æ­¥éª¤å¦‚ä¸‹ï¼š

1.  ç¼–å†™å¹¿æ’­å®ç°ï¼›
    
2.  ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼›
    
3.  ç¼–è¯‘ï¼›
    
4.  æ‰§è¡Œï¼›
    
5.  åœ¨ rviz2 ä¸­æŸ¥çœ‹åæ ‡ç³»å…³ç³»ã€‚
    

æ¡ˆä¾‹æˆ‘ä»¬ä¼šé‡‡ç”¨ C++ å’Œ Python åˆ†åˆ«å®ç°ï¼ŒäºŒè€…éƒ½éµå¾ªä¸Šè¿°å®ç°æµç¨‹ã€‚

å¦å¤–ï¼šéœ€è¦è¯´æ˜çš„æ˜¯ï¼Œé™æ€å¹¿æ’­å™¨é™¤äº†å¯ä»¥ä»¥ç¼–ç çš„æ–¹å¼å®ç°å¤–ï¼Œåœ¨ tf2 ä¸­è¿˜å†…ç½®äº†ç›¸å…³å·¥å…·ï¼Œå¯ä»¥æ— éœ€ç¼–ç ï¼Œç›´æ¥æ‰§è¡ŒèŠ‚ç‚¹å¹¶ä¼ å…¥è¡¨ç¤ºåæ ‡ç³»ç›¸å¯¹å…³ç³»çš„å‚æ•°ï¼Œå³å¯å®ç°é™æ€åæ ‡ç³»å…³ç³»çš„å‘å¸ƒï¼ˆå³å‘½ä»¤è¡Œï¼Œæœ‰å‘½ä»¤è¡Œå¯ä»¥ä¼˜å…ˆç”¨å‘½ä»¤è¡Œï¼‰ã€‚è€ŒåŠ¨æ€å¹¿æ’­å™¨æ²¡æœ‰æä¾›ç±»ä¼¼çš„å·¥å…·ã€‚ï¼ˆå³å¿…é¡»æ•²ä»£ç ï¼‰

#### 4.å‡†å¤‡å·¥ä½œ

ç»ˆç«¯ä¸‹è¿›å…¥å·¥ä½œç©ºé—´çš„srcç›®å½•ï¼Œè°ƒç”¨å¦‚ä¸‹ä¸¤æ¡å‘½ä»¤åˆ†åˆ«åˆ›å»ºC++åŠŸèƒ½åŒ…ã€‚

```Bash
ros2 pkg create cpp03_tf_broadcaster --build-type ament_cmake --dependencies rclcpp tf2 tf2_ros geometry_msgs turtlesim
```

tf2åŠŸèƒ½åŒ…å†…åŒ…å«äº†å››å…ƒæ•°ä¸æ¬§æ‹‰è§’çš„è½¬æ¢ç®—æ³•ã€‚

tf2\_rosåŠŸèƒ½åŒ…å†…åŒ…å«äº†å¹¿æ’­å¯¹è±¡ã€‚

geometry\_msgsåŠŸèƒ½åŒ…æ¶ˆæ¯è½½ä½“

turtlesimåŠŸèƒ½åŒ…æ˜¯è·å–ä¹Œé¾ŸğŸ¢ä½å§¿

  

2.  ### é™æ€å¹¿æ’­å™¨\_å‘½ä»¤è¡Œå®ç°
    

#### 1.é™æ€å¹¿æ’­å™¨å·¥å…·

åœ¨ `tf2_ros`åŠŸèƒ½åŒ…ä¸­æä¾›äº†ä¸€ä¸ªåä¸º`static_transform_publisher`çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œé€šè¿‡è¯¥æ–‡ä»¶å¯ä»¥ç›´æ¥å¹¿æ’­é™æ€åæ ‡ç³»å…³ç³»ï¼Œå…¶ä½¿ç”¨è¯­æ³•å¦‚ä¸‹ã€‚

**æ ¼å¼1ï¼š**

ä½¿ç”¨ä»¥ç±³ä¸ºå•ä½çš„ x/y/z åç§»é‡å’Œä»¥å¼§åº¦ä¸ºå•ä½çš„roll/pitch/yawï¼ˆå¯ç›´è¯‘ä¸ºæ»šåŠ¨/ä¿¯ä»°/åèˆªï¼Œåˆ†åˆ«æŒ‡çš„æ˜¯å›´ç»• x/y/z è½´çš„æ—‹è½¬ï¼‰å‘ tf2 å‘å¸ƒé™æ€åæ ‡å˜æ¢ã€‚

```Bash
ros2 run tf2_ros static_transform_publisher --x x --y y --z z --yaw yaw --pitch pitch --roll roll --frame-id frame_id --child-frame-id child_frame_id
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MWNiNWUxNzJjZmMxMGVkNGZmOTRmNjRkMDY4NmY0NTdfazN5WHVkNzJidmF2UkR6aGpjRjdXMlc5MzhEU3dKT3pfVG9rZW46SHV1TmJtRGNpb3cyTWl4VDNhUGNqczYwbjZkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

çˆ¶çº§åæ ‡ç³»å’Œå­çº§åæ ‡ç³»æ˜¯å¿…é¡»è¦å†™çš„ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmQ3YjA4ZGNlNmZlNWQ1MWMwNzA4OGYzODNkY2Q4M2RfWjVGaVBqZ3hFc3hpbTZDdmJTVHFRUURtR0M3VWlGNnlfVG9rZW46SDV2Y2JidUx1b0tCV2F4YVA4MmNPR3h3bkhoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¦‚æœè¿™äº›å¯é€‰å‚æ•°ä¸é€‰çš„è¯ï¼Œé»˜è®¤çˆ¶çº§åæ ‡ç³»å’Œå­çº§åæ ‡ç³»é‡åˆï¼Œä¹Ÿå°±æ˜¯åç§»é‡å’Œæ—‹è½¬åº¦éƒ½æ˜¯0ã€‚

åç§»é‡ï¼šX,Y,Z

æ—‹è½¬åº¦ï¼šQX,QY,QZ,QW **æˆ–è€…** ROLL,PITCH,YAWï¼ˆå•ä½æ˜¯å¼§åº¦ï¼‰

æ—¶é—´æˆ³ï¼šä¸ç”¨è®¾ç½®ï¼Œä¼šä»¥å‘å¸ƒçš„æ—¶é—´ä¸ºèµ·ç‚¹

  

**æ ¼å¼2ï¼š**

ä½¿ç”¨ä»¥ç±³ä¸ºå•ä½çš„ x/y/z åç§»é‡å’Œ qx/qy/qz/qw å››å…ƒæ•°å‘ tf2 å‘å¸ƒé™æ€åæ ‡å˜æ¢ã€‚

```Bash
ros2 run tf2_ros static_transform_publisher --x x --y y --z z --qx qx --qy qy --qz qz --qw qw --frame-id frame_id --child-frame-id child_frame_id
```

æ³¨æ„ï¼šåœ¨ä¸Šè¿°ä¸¤ç§æ ¼å¼ä¸­é™¤äº†ç”¨äºè¡¨ç¤ºçˆ¶çº§åæ ‡ç³»çš„`--frame-id`å’Œç”¨äºè¡¨ç¤ºå­çº§åæ ‡ç³»çš„`--child-frame-id`ä¹‹å¤–ï¼Œå…¶ä»–å‚æ•°éƒ½æ˜¯å¯é€‰çš„ï¼Œå¦‚æœæœªæŒ‡å®šç‰¹å®šé€‰é¡¹ï¼Œé‚£ä¹ˆå°†ç›´æ¥ä½¿ç”¨é»˜è®¤å€¼ã€‚

  

#### 2.é™æ€å¹¿æ’­å™¨å·¥å…·ä½¿ç”¨

æ‰“å¼€ä¸¤ä¸ªç»ˆç«¯ï¼Œç»ˆç«¯1è¾“å…¥å¦‚ä¸‹å‘½ä»¤å‘å¸ƒé›·è¾¾ï¼ˆlaserï¼‰ç›¸å¯¹äºåº•ç›˜ï¼ˆbase\_linkï¼‰çš„é™æ€åæ ‡å˜æ¢ï¼ˆé‡åˆï¼‰ï¼š

```Bash
ros2 run tf2_ros static_transform_publisher --frame-id base_link --child-frame-id laser
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODlkMmQ1ZjAxNTRiZGM5ZjAzYTYzZDc0ZTg1N2JjNzZfOUNieWxlekk1dEd3V1JXZmtITFp1YVVCN0QzY2JqSk1fVG9rZW46T0NheWJ0ZFBJb1pPZEJ4SldnQmNJUXNSblk3XzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWMyMTlkNmJmMzM4ZTA2NzI0NjU3MjZjMmFjNmYwYTRfWGZ3bW5tZDNuQzUwT2o4clNwcG9WN25JcGpnQ00yRVlfVG9rZW46TUN0b2I5bVRibzd6bTJ4SmNCYWN6NnFCbmVmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

base\_linkæ˜¯çˆ¶çº§å‚è€ƒç³»

laseræ˜¯å­çº§å‚è€ƒç³»

ä¸€èˆ¬é€‰çˆ¶ç³»å‚è€ƒç³»

  

#### 3.rviz2 æŸ¥çœ‹åæ ‡ç³»å…³ç³»

æ–°å»ºç»ˆç«¯ï¼Œé€šè¿‡å‘½ä»¤`rviz2`æ‰“å¼€ rviz2 å¹¶é…ç½®ç›¸å…³æ’ä»¶æŸ¥çœ‹åæ ‡å˜æ¢æ¶ˆæ¯ï¼š

1.  å°† Global Options ä¸­çš„ Fixed Frame è®¾ç½®ä¸º base\_linkï¼›
    
2.  ç‚¹å‡» add æŒ‰é’®æ·»åŠ  TF æ’ä»¶ï¼›
    
3.  å‹¾é€‰ TF æ’ä»¶ä¸­çš„ show namesã€‚
    

å³ä¾§ Grid ä¸­å°†ä»¥å›¾å½¢åŒ–çš„æ–¹å¼æ˜¾ç¤ºåæ ‡å˜æ¢å…³ç³»ã€‚

  

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGYyNWEwOTU4ZGFhYjBlMjM5YWViZDdhNmM1ZTRiZDBfdlZzd0VjZk5hQkxpb0txT0N0V3BhWG5GNXdwR3A5VEpfVG9rZW46UUo2MmI4Y09vb0M1Sk54NjJtNmM0RFJkbmtnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¦‚å›¾ï¼Œä¸¤ä¸ªå‚è€ƒç³»é‡åˆã€‚

  

æ‰“å¼€ä¸¤ä¸ªç»ˆç«¯ï¼Œç»ˆç«¯1è¾“å…¥å¦‚ä¸‹å‘½ä»¤å‘å¸ƒé›·è¾¾ï¼ˆlaserï¼‰ç›¸å¯¹äºåº•ç›˜ï¼ˆbase\_linkï¼‰çš„é™æ€åæ ‡å˜æ¢ï¼š

```Bash
ros2 run tf2_ros static_transform_publisher --x 0.4 --y 0 --z 0.2 --yaw 0.5 --roll 0 --pitch 0 --frame-id base_link --child-frame-id laser
```

ç»ˆç«¯2è¾“å…¥å¦‚ä¸‹å‘½ä»¤å‘å¸ƒæ‘„åƒå¤´ï¼ˆcameraï¼‰ç›¸å¯¹äºåº•ç›˜ï¼ˆbase\_linkï¼‰çš„é™æ€åæ ‡å˜æ¢ï¼š

```Bash
ros2 run tf2_ros static_transform_publisher --x -0.5 --y 0 --z 0.4 --yaw 0 --roll 0 --pitch 0 --frame-id base_link --child-frame-id camera
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDliOWY1NTc0NGJkN2I2OGYyOGMwODQzYjYxYjIwN2FfcHI3NWpKZk1jUnkxWmZsSkNpeGZ4Q1RVVlNjVjJGR2pfVG9rZW46RGY4b2I3U01tb1Jzb3p4ZzdyYmNyNDV0bnZjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

3.  ### é™æ€å¹¿æ’­å™¨\_C++å®ç°
    

1.  #### æ¡†æ¶æ­å»º
    

  

```CMake
find_package(ament_cmake REQUIRED)
find_package(rclcpp REQUIRED)
find_package(tf2 REQUIRED)
find_package(tf2_ros REQUIRED)
find_package(geometry_msgs REQUIRED)
find_package(turtlesim REQUIRED)

add_executable(demo01_static_tf_broadcaster src/demo01_static_tf_broadcaster.cpp)
ament_target_dependencies(
  demo01_static_tf_broadcaster
  "rclcpp"
  "tf2"
  "tf2_ros"
  "geometry_msgs"
  "turtlesim"
)

install(TARGETS demo01_static_tf_broadcaster
  DESTINATION lib/${PROJECT_NAME})
```

2.  #### å¹¿æ’­å®ç°
    

```C++
/*  
  éœ€æ±‚ï¼šç¼–å†™é™æ€åæ ‡å˜æ¢ç¨‹åºï¼Œæ‰§è¡Œæ—¶ä¼ å…¥ä¸¤ä¸ªåæ ‡ç³»çš„ç›¸å¯¹ä½å§¿å…³ç³»ä»¥åŠçˆ¶å­çº§åæ ‡ç³»idï¼Œ
       ç¨‹åºè¿è¡Œå‘å¸ƒé™æ€åæ ‡å˜æ¢ã€‚
  æ­¥éª¤ï¼š
    1.åŒ…å«å¤´æ–‡ä»¶ï¼›
    2.åˆ¤æ–­ç»ˆç«¯ä¼ å…¥çš„å‚æ•°æ˜¯å¦åˆæ³•ï¼›
    3.åˆå§‹åŒ– ROS å®¢æˆ·ç«¯ï¼›
    4.å®šä¹‰èŠ‚ç‚¹ç±»ï¼›
      4-1.åˆ›å»ºé™æ€åæ ‡å˜æ¢å‘å¸ƒæ–¹ï¼›
      4-2.ç»„ç»‡å¹¶å‘å¸ƒæ¶ˆæ¯ã€‚
    5.è°ƒç”¨ spin å‡½æ•°ï¼Œå¹¶ä¼ å…¥å¯¹è±¡æŒ‡é’ˆï¼›
    6.é‡Šæ”¾èµ„æºã€‚

*/

// 1.åŒ…å«å¤´æ–‡ä»¶ï¼›
#include <geometry_msgs/msg/transform_stamped.hpp>

#include <rclcpp/rclcpp.hpp>
#include <tf2/LinearMath/Quaternion.h>
#include <tf2_ros/static_transform_broadcaster.h>

using std::placeholders::_1;

// 4.å®šä¹‰èŠ‚ç‚¹ç±»ï¼›
class MinimalStaticFrameBroadcaster : public rclcpp::Node
{
public:
  explicit MinimalStaticFrameBroadcaster(char * transformation[]): Node("minimal_static_frame_broadcaster")
  {
    // 4-1.åˆ›å»ºé™æ€åæ ‡å˜æ¢å‘å¸ƒæ–¹ï¼›
    tf_publisher_ = std::make_shared<tf2_ros::StaticTransformBroadcaster>(this);

    this->make_transforms(transformation);
  }

private:
  // 4-2.ç»„ç»‡å¹¶å‘å¸ƒæ¶ˆæ¯ã€‚
  void make_transforms(char * transformation[])
  {
    // ç»„ç»‡æ¶ˆæ¯
    geometry_msgs::msg::TransformStamped t;

    rclcpp::Time now = this->get_clock()->now();
    t.header.stamp = now;
    t.header.frame_id = transformation[7];
    t.child_frame_id = transformation[8];

    t.transform.translation.x = atof(transformation[1]);
    t.transform.translation.y = atof(transformation[2]);
    t.transform.translation.z = atof(transformation[3]);
    tf2::Quaternion q;
    q.setRPY(
      atof(transformation[4]),
      atof(transformation[5]),
      atof(transformation[6]));
    t.transform.rotation.x = q.x();
    t.transform.rotation.y = q.y();
    t.transform.rotation.z = q.z();
    t.transform.rotation.w = q.w();

    // å‘å¸ƒæ¶ˆæ¯
    tf_publisher_->sendTransform(t);
  }
  std::shared_ptr<tf2_ros::StaticTransformBroadcaster> tf_publisher_;
};

int main(int argc, char * argv[])
{
  // 2.åˆ¤æ–­ç»ˆç«¯ä¼ å…¥çš„å‚æ•°æ˜¯å¦åˆæ³•ï¼›
  auto logger = rclcpp::get_logger("logger");

  if (argc != 9) {
    RCLCPP_INFO(
      logger, "è¿è¡Œç¨‹åºæ—¶è¯·æŒ‰ç…§ï¼šx y z roll pitch yaw frame_id child_frame_id çš„æ ¼å¼ä¼ å…¥å‚æ•°");
    return 1;
  }

  // 3.åˆå§‹åŒ– ROS å®¢æˆ·ç«¯ï¼›
  rclcpp::init(argc, argv);
  // 5.è°ƒç”¨ spin å‡½æ•°ï¼Œå¹¶ä¼ å…¥å¯¹è±¡æŒ‡é’ˆï¼›
  rclcpp::spin(std::make_shared<MinimalStaticFrameBroadcaster>(argv));
  // 6.é‡Šæ”¾èµ„æºã€‚
  rclcpp::shutdown();
  return 0;
}
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzFhOTQ4NmUxYWU5ZTZiNzU5M2E4M2EyNzM1NDIyYWJfeDRkOXJIczhWWEx1Z3VsYThvell0cktwdHhNVERMNktfVG9rZW46RG9USGJGN1FZb1RhRzh4d1BNWWNBSUs3bnFlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTk4ZmNhMjRkZDViMGRiNzAxOTQyNGU1NGIzOTU0NGVfQmRONFdwQXVLdkFUMHJ2ajRmR0lkVHlEQXpwd3VZMUtfVG9rZW46SXMyQmJSSGpLbzRSVk54eHd1YWM1Q1VSbjllXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¿…é¡»ä¼ å‚æ­£ç¡®ï¼Œå¦åˆ™æŠ›é”™ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDZlNDZjMmRiNjVmMDMyZjU4NzNhZGYxNDZkN2VhMTdfMWtMZnZDNnZwc2dEaHpmSmozeUlzV3BiVDVrelJYbjFfVG9rZW46UlJHeWJGNThub21Sbm54WktKcWNaSzk4bnhnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

åˆ›å»ºç»„ç»‡å¹¶å‘å¸ƒæ•°æ®çš„å‡½æ•°

  

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YThjN2Q2YTM1ZjY4OWVkZjQxYTdiOGJmMjFmODdlODBfWGg1ZndCSUh3YUlSOFNwaUZSaXhYZnRtdHRtRGJPSDhfVG9rZW46S2JlUmI1b3Vyb3lQa2Z4RVZQaWNON25Ibk9kXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ç”¨æœ€ç®€å•çš„é‡è½½ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2NiNTBlMzdmYjYzYjliYjJlNmEwZTYyMDM5NmMxZDFfVWxPNlpRUnN5VmFaU1NpMml3elFDc0g5ek16N0tTQ1BfVG9rZW46RHBQV2JqTVlqbzB3Nnh4WXlMN2M4Y09VbldoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™æ ·å°±å¯ä»¥å‘é€äº†ï¼Œæ¥ä¸‹æ¥ç¼–è¾‘å‘é€çš„å†…å®¹ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGRiYjk2YzZjM2JhYWM4YWFmYzBkZTllNDExZDJhNTlfM3JaQTY2SkRPUzBneHpiRTNFTEJGa1hWa2t3UDBIcnVfVG9rZW46SnRzdmJwbVJxb1dXQVB4d0h1S2NIeFRsbjhmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

stampæ—¶é—´æˆ³è®¾ç½®ä¸ºå½“å‰æ—¶é—´ï¼Œnow()å‡½æ•°æ˜¯è®¾ç½®ä¸ºå½“å‰æ—¶é—´ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Mzk2M2FjMWY0NWZjY2RiZTk1MzYzOTY0NmU1N2Q4YmFfZUFqanhFbDVJalJ6NHF6OWFXc0V1cEZ4VGJHU3RYQldfVG9rZW46TU8zWWJhTVRlb05hcVp4MTN1UGNGSlhhblJEXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

atof()æ˜¯è½¬åŒ–ä¸ºfloatæµ®ç‚¹ç±»å‹

x()å’Œgetx()éƒ½æ˜¯è·å–å››å…ƒæ•°xã€‚ï¼ˆyï¼Œzï¼Œwä»¥æ­¤ç±»æ¨ï¼‰

  

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTcyYzBlYzQwZGY5ZDYxMTZhNjZkMmRhMjhhNzVlYjFfT3NXTVZ0TE8xdEUySUJQNWgwVVlwWGx6QjBjUTdXVlVfVG9rZW46TGlqYmIzTkRXb2FpNWh4WEZ4dGNBZ3pqbm9iXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

ç»ˆç«¯ä¸­è¿›å…¥å½“å‰å·¥ä½œç©ºé—´ï¼Œç¼–è¯‘åŠŸèƒ½åŒ…ï¼š

```Bash
colcon build --packages-select cpp03_tf_broadcaster
```

  

å½“å‰å·¥ä½œç©ºé—´ä¸‹ï¼Œå¯åŠ¨ä¸¤ä¸ªç»ˆç«¯ï¼Œç»ˆç«¯1è¾“å…¥å¦‚ä¸‹å‘½ä»¤å‘å¸ƒé›·è¾¾ï¼ˆlaserï¼‰ç›¸å¯¹äºåº•ç›˜ï¼ˆbase\_linkï¼‰çš„é™æ€åæ ‡å˜æ¢ï¼š

```Bash
. install/setup.bash 
ros2 run cpp03_tf_broadcaster demo01_static_tf_broadcaster 0.4 0 0.2 0 0 0 base_link laser
```

å‚è€ƒ **é™æ€å¹¿æ’­å™¨ï¼ˆå‘½ä»¤ï¼‰** å†…å®¹å¯åŠ¨å¹¶é…ç½® rviz2ï¼Œæœ€ç»ˆæ‰§è¡Œç»“æœä¸æ¡ˆä¾‹1ç±»ä¼¼ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmZlNzEzMzRmZTRkMTI2ZjdmMjJiNzQ4MzQxMTM5ZTVfTGh3MGlxVXJwSm83S3k4U1o4WmUyQktHUzFmUk44d01fVG9rZW46V3lJZ2JKWDhXb0IzM0F4alVoZmNHakhOblNmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NGVhYWIwNWEyNjlhN2JjY2NmZDZmMzZlZDg2MmU4YzlfUkZEM1Zra1NobzBGUXk1T0NnVWlMc3puQk9yeFp3QlRfVG9rZW46QjIxaGJGb3REb0RnZ1d4YVBZV2NDQ203bjJPXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æœ¬è´¨å°±æ˜¯è¯é¢˜é€šä¿¡ï¼Œä½†è¿™ä¸ªè¯é¢˜é€šä¿¡çš„topicæ˜¯å•¥å‘¢ï¼Ÿ

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjA1MjBjZTUyMzFkNzRlM2Q2ZGYzY2ExOTQ2ZjZjOWRfVFVPWGI1QlA0U1FOcFphTm04ZWNCejl4NWhFSXNJWHRfVG9rZW46WGJkamJnd0wwbzV6cFZ4OWNuTGNNanJabnhVXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

é€šè¿‡æŸ¥çœ‹è¯¥ç±»æºç ï¼Œå°±å¾—çŸ¥ï¼Œè¯é¢˜ä¸º/tf\_static

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Njc2MDZiMWY3NDJjOTA3MDU4ZTZkYTY2MGU2ZDI2YTVfUTY3NkM3S1JwRmo0TVdIYnRBR3pEZmswSWkxUjNGUUtfVG9rZW46VXFhbmI3WUJ5b2hmSWx4eU82SWNVRXFTbnFmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGE3OWFiOWY4YzM2NTlkMzQ5ODNjMTdjN2Y3MmRjMDNfUk9TaWdhYWxtWTNNNFdiYWQ5ZEpzUHFQMXMzQUpwM3dfVG9rZW46R3JkcmJUS0tubzd0anl4am5hNWNCRzVDbmNiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å‘å¸ƒæ–¹æœ‰ä¿©ï¼Œè®¢é˜…æ–¹æœ‰ä¸€ä¸ªã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDk4YmQyNjQwOWExYzJkZTJlNTEzMGZiYzZjYjQwZjRfWG1aVmk2OGFOUERuOXJTOXB0cnVqclBGQ2FxNHdPTDNfVG9rZW46VUFuVGJoSmJyb2JJZHJ4RDRMWGNWRnFnbmRoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™ä¿©æ˜¯å‘å¸ƒæ–¹

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjM1ZTM5YjUwODA3NTA3ZmM5NmJhZGNlNTY5MDFlZjFfVGFaa3haaDdUQWJHVTdtajRvQmhaZVZQOTJCd1ZXTlhfVG9rZW46THR2VmJoV3JUb3V1Zm14akthVWNjc2ZUbjJiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™ä¸ªæ˜¯è®¢é˜…æ–¹

  

6.  ### åŠ¨æ€å¹¿æ’­å™¨\_C++å®ç°
    

1.  #### æ¡†æ¶æ­å»º
    

CMakeLists.txt æ–‡ä»¶éœ€è¦æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š

```CMake
add_executable(demo02_dynamic_tf_broadcaster src/demo02_dynamic_tf_broadcaster.cpp)
ament_target_dependencies(
  demo02_dynamic_tf_broadcaster
  "rclcpp"
  "tf2"
  "tf2_ros"
  "geometry_msgs"
  "turtlesim"
)
```

æ–‡ä»¶ä¸­ install ä¿®æ”¹ä¸ºå¦‚ä¸‹å†…å®¹ï¼š

```CMake
install(TARGETS demo01_static_tf_broadcaster
  demo02_dynamic_tf_broadcaster
  DESTINATION lib/${PROJECT_NAME})
```

2.  #### å¹¿æ’­å®ç°
    

```C++
/*   
  éœ€æ±‚ï¼šç¼–å†™åŠ¨æ€åæ ‡å˜æ¢ç¨‹åºï¼Œå¯åŠ¨ turtlesim_node ä»¥åŠ turtle_teleop_key åï¼Œè¯¥ç¨‹åºå¯ä»¥å‘å¸ƒ
       ä¹Œé¾Ÿåæ ‡ç³»åˆ°çª—å£åæ ‡ç³»çš„åæ ‡å˜æ¢ï¼Œå¹¶ä¸”é”®ç›˜æ§åˆ¶ä¹Œé¾Ÿè¿åŠ¨æ—¶ï¼Œä¹Œé¾Ÿåæ ‡ç³»ä¸çª—å£åæ ‡ç³»çš„ç›¸å¯¹å…³ç³»
       ä¹Ÿä¼šå®æ—¶æ›´æ–°ã€‚

  æ­¥éª¤ï¼š
    1.åŒ…å«å¤´æ–‡ä»¶ï¼›
    2.åˆå§‹åŒ– ROS å®¢æˆ·ç«¯ï¼›
    3.å®šä¹‰èŠ‚ç‚¹ç±»ï¼›
      3-1.åˆ›å»ºåŠ¨æ€åæ ‡å˜æ¢å‘å¸ƒæ–¹ï¼›
      3-2.åˆ›å»ºä¹Œé¾Ÿä½å§¿è®¢é˜…æ–¹ï¼›
      3-3.æ ¹æ®è®¢é˜…åˆ°çš„ä¹Œé¾Ÿä½å§¿ç”Ÿæˆåæ ‡å¸§å¹¶å¹¿æ’­ã€‚
    4.è°ƒç”¨ spin å‡½æ•°ï¼Œå¹¶ä¼ å…¥å¯¹è±¡æŒ‡é’ˆï¼›
    5.é‡Šæ”¾èµ„æºã€‚

*/
// 1.åŒ…å«å¤´æ–‡ä»¶ï¼›
#include <geometry_msgs/msg/transform_stamped.hpp>

#include <rclcpp/rclcpp.hpp>
#include <tf2/LinearMath/Quaternion.h>
#include <tf2_ros/transform_broadcaster.h>
#include <turtlesim/msg/pose.hpp>

using std::placeholders::_1;

// 3.å®šä¹‰èŠ‚ç‚¹ç±»ï¼›
class MinimalDynamicFrameBroadcaster : public rclcpp::Node
{
public:
  MinimalDynamicFrameBroadcaster(): Node("minimal_dynamic_frame_broadcaster")
  {
    // 3-1.åˆ›å»ºåŠ¨æ€åæ ‡å˜æ¢å‘å¸ƒæ–¹ï¼›
    tf_broadcaster_ = std::make_unique<tf2_ros::TransformBroadcaster>(*this);

    std::string topic_name = "/turtle1/pose";

    // 3-2.åˆ›å»ºä¹Œé¾Ÿä½å§¿è®¢é˜…æ–¹ï¼›
    subscription_ = this->create_subscription<turtlesim::msg::Pose>(
      topic_name, 10,
      std::bind(&MinimalDynamicFrameBroadcaster::handle_turtle_pose, this, _1));
  }

private:
  // 3-3.æ ¹æ®è®¢é˜…åˆ°çš„ä¹Œé¾Ÿä½å§¿ç”Ÿæˆåæ ‡å¸§å¹¶å¹¿æ’­ã€‚   
  void handle_turtle_pose(const turtlesim::msg::Pose & msg)
  {
    // ç»„ç»‡æ¶ˆæ¯
    geometry_msgs::msg::TransformStamped t;
    rclcpp::Time now = this->get_clock()->now();

    t.header.stamp = now;
    t.header.frame_id = "world";   //çª—ä½“åæ ‡ç³»
    t.child_frame_id = "turtle1";  //ä¹Œé¾Ÿåæ ‡ç³»

    t.transform.translation.x = msg.x;
    t.transform.translation.y = msg.y;
    t.transform.translation.z = 0.0;      //ä¹Œé¾Ÿåœ¨å¹³é¢å†…è¿åŠ¨

    //ä»æ¬§æ‹‰è§’è½¬æ¢ä¸ºå››å…ƒæ•°
    tf2::Quaternion q;
    q.setRPY(0, 0, msg.theta);        //ä¹Œé¾Ÿåªæœ‰Yaw
    t.transform.rotation.x = q.x();
    t.transform.rotation.y = q.y();
    t.transform.rotation.z = q.z();
    t.transform.rotation.w = q.w();
    // å‘å¸ƒæ¶ˆæ¯
    tf_broadcaster_->sendTransform(t);
  }
  rclcpp::Subscription<turtlesim::msg::Pose>::SharedPtr subscription_;
  std::unique_ptr<tf2_ros::TransformBroadcaster> tf_broadcaster_;
};

int main(int argc, char * argv[])
{
  // 2.åˆå§‹åŒ– ROS å®¢æˆ·ç«¯ï¼›
  rclcpp::init(argc, argv);
  // 4.è°ƒç”¨ spin å‡½æ•°ï¼Œå¹¶ä¼ å…¥å¯¹è±¡æŒ‡é’ˆï¼›
  rclcpp::spin(std::make_shared<MinimalDynamicFrameBroadcaster>());
  // 5.é‡Šæ”¾èµ„æºã€‚
  rclcpp::shutdown();
  return 0;
}
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Yjg3YzM0NzU5MDNiN2VlOWIwM2Q0MGE2OTE5NTA5M2RfeVRLWVkwUG1WV1RlYjdLZ0R6VVVnT3BjcmRZbW5mUzVfVG9rZW46VWZCTGJSYVpOb05NZjJ4bkNCdGN6b2VLbm9nXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å…¥å£å‚æ•°ï¼š

å‚æ•°1è¯é¢˜åç§°

å‚æ•°2QoS

å‚æ•°3å›è°ƒå‡½æ•°

  

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDgyZDE1YjQ3YzZhZjkxYjQ5ZmQ3OWFjZjBiYzc2NGZfNmJrTHRRN2pKODdTY0x1a3F5Nm1oYkdSYmw2bG5VcDlfVG9rZW46QnlrQmI3Rlp3b2VpRGZ4MUgxT2NMaTdBbnpvXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjMwYzJmYWE5NDFiZTQxYTdkMzJiMTIzZjAzNWZlMTlfTU1kd0hhRGU2SjJQMElPekk5bnA0VW81SGNGWEkya3hfVG9rZW46SWRtMGJ3OGFsb0pLT3J4bVlOYmNna0VUbm5oXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmUxNjcyN2Q3MTQzNzFlMmMzZTg0M2EwN2QwMmUyOGJfajhPN1Nxam5wM01TY0pQc242SWRMOWtMV3NWeDltMEJfVG9rZW46UmRGRmJxRE5Ib3Y1MUR4NXJmbGN1dkJlbldiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ“æ§ä¹Œé¾Ÿè¿åŠ¨ï¼Œä¼šä½¿ä¹Œé¾Ÿåœ¨Rviz2é‡Œä¹Ÿè¿åŠ¨

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmNiYTQ2MWYxZTNhMjllMGY5NWYxYzcyZjhjN2UwNTBfT21Ja2tDZXpvQk5mSERaZGdhcTVURFkwTjFVTEx1d3BfVG9rZW46RHFaS2Jzd3lyb3A2QXB4cnlSWmNucjhFbjZlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

  

  

7.  ### åæ ‡ç‚¹å‘å¸ƒ\_C++å®ç°
    

1.  #### æ¡ˆä¾‹ä¸åˆ†æ
    

**æ¡ˆä¾‹éœ€æ±‚**

**æ¡ˆä¾‹ï¼š** æ— äººè½¦ä¸Šå®‰è£…æœ‰æ¿€å…‰é›·è¾¾ï¼Œç°æ¿€å…‰é›·è¾¾æ‰«æåˆ°ä¸€ç‚¹çŠ¶éšœç¢ç‰©å¹¶ä¸”å¯ä»¥å®šä½éšœç¢ç‰©çš„åæ ‡ï¼Œè¯·åœ¨é›·è¾¾åæ ‡ç³»ä¸‹å‘å¸ƒéšœç¢ç‰©åæ ‡ç‚¹æ•°æ®ï¼Œå¹¶åœ¨ rviz2 ä¸­æŸ¥çœ‹å‘å¸ƒç»“æœã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzE1NDgwNzE1M2U2ZGFjMmQ0NjQxMzg4NGVjMDFiOGRfOGpWMnFVSlgyNWtURkNGTGFJZlpYV21xUW1qd3o2VXVfVG9rZW46R2x0VGJyV0Nqb1lHaHR4OFBvOGNMcFRkblBjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

**æ¡ˆä¾‹åˆ†æ**

ä¸Šè¿°æ¡ˆä¾‹ï¼Œæ˜¯ä¸€ä¸ªç®€å•çš„è¯é¢˜å‘å¸ƒç¨‹åºï¼Œåœ¨äº†è§£åæ ‡ç‚¹`geometry_msgs/msg/PointStamped`æ¥å£æ¶ˆæ¯ä¹‹åï¼Œç›´æ¥é€šè¿‡è¯é¢˜å‘å¸ƒæ–¹æŒ‰ç…§ä¸€å®šé€»è¾‘å‘å¸ƒæ¶ˆæ¯å³å¯ã€‚

**æµç¨‹ç®€ä»‹**

ç¨‹åºå®ç°ä¸»è¦æ­¥éª¤å¦‚ä¸‹ï¼š

1.  ç¼–å†™è¯é¢˜å‘å¸ƒå®ç°ï¼›
    
2.  ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼›
    
3.  ç¼–è¯‘ï¼›
    
4.  æ‰§è¡Œï¼›
    
5.  åœ¨ rviz2 ä¸­æŸ¥çœ‹è¿è¡Œç»“æœã€‚
    

æ¡ˆä¾‹æˆ‘ä»¬ä¼šé‡‡ç”¨ C++ å’Œ Python åˆ†åˆ«å®ç°ï¼ŒäºŒè€…éƒ½éµå¾ªä¸Šè¿°å®ç°æµç¨‹ã€‚

  

CMakeLists.txt æ–‡ä»¶éœ€è¦æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š

```CMake
add_executable(demo03_point_publisher src/demo03_point_publisher.cpp)
ament_target_dependencies(
  demo03_point_publisher
  "rclcpp"
  "tf2"
  "tf2_ros"
  "geometry_msgs"
  "turtlesim"
)
```

æ–‡ä»¶ä¸­ install ä¿®æ”¹ä¸ºå¦‚ä¸‹å†…å®¹ï¼š

```CMake
install(TARGETS demo01_static_tf_broadcaster
  demo02_dynamic_tf_broadcaster
  demo03_point_publisher
  DESTINATION lib/${PROJECT_NAME})
```

  

2.  #### å®ç°
    

```C++
/*  
    éœ€æ±‚ï¼šå‘å¸ƒé›·è¾¾åæ ‡ç³»ä¸­æŸä¸ªåæ ‡ç‚¹ç›¸å¯¹äºé›·è¾¾ï¼ˆlaserï¼‰åæ ‡ç³»çš„ä½å§¿ã€‚
    æ­¥éª¤ï¼š
        1.åŒ…å«å¤´æ–‡ä»¶ï¼›
        2.åˆå§‹åŒ– ROS å®¢æˆ·ç«¯ï¼›
        3.å®šä¹‰èŠ‚ç‚¹ç±»ï¼›
            3-1.åˆ›å»ºåæ ‡ç‚¹å‘å¸ƒæ–¹ï¼›
            3-2.åˆ›å»ºå®šæ—¶å™¨ï¼›
            3-3.ç»„ç»‡å¹¶å‘å¸ƒåæ ‡ç‚¹æ¶ˆæ¯ã€‚
        4.è°ƒç”¨ spin å‡½æ•°ï¼Œå¹¶ä¼ å…¥å¯¹è±¡æŒ‡é’ˆï¼›
        5.é‡Šæ”¾èµ„æºã€‚

*/
// 1.åŒ…å«å¤´æ–‡ä»¶ï¼›
#include "rclcpp/rclcpp.hpp"
#include "geometry_msgs/msg/point_stamped.hpp"

using namespace std::chrono_literals;

// 3.å®šä¹‰èŠ‚ç‚¹ç±»ï¼›
class MinimalPointPublisher: public rclcpp::Node {
public:
    MinimalPointPublisher(): Node("minimal_point_publisher"),x(0.1){
        // 3-1.åˆ›å»ºåæ ‡ç‚¹å‘å¸ƒæ–¹ï¼›
        point_pub_ = this->create_publisher<geometry_msgs::msg::PointStamped>("point",10);
        // 3-2.åˆ›å»ºå®šæ—¶å™¨ï¼›
        timer_ = this->create_wall_timer(0.1s,std::bind(&MinimalPointPublisher::on_timer, this));
    }
private:
    void on_timer(){
        // 3-3.ç»„ç»‡å¹¶å‘å¸ƒåæ ‡ç‚¹æ¶ˆæ¯ã€‚
        geometry_msgs::msg::PointStamped point;
        point.header.frame_id = "laser";
        point.header.stamp = this->now();
        x += 0.004;
        point.point.x = x;
        point.point.y = 0.0;
        point.point.z = 0.1;        
        point_pub_->publish(point);
    }
    rclcpp::Publisher<geometry_msgs::msg::PointStamped>::SharedPtr point_pub_;
    rclcpp::TimerBase::SharedPtr timer_;
    double_t x;
};

int main(int argc, char const *argv[])
{
    // 2.åˆå§‹åŒ– ROS å®¢æˆ·ç«¯ï¼›
    rclcpp::init(argc,argv);
    // 4.è°ƒç”¨ spin å‡½æ•°ï¼Œå¹¶ä¼ å…¥å¯¹è±¡æŒ‡é’ˆï¼›
    rclcpp::spin(std::make_shared<MinimalPointPublisher>());
    // 5.é‡Šæ”¾èµ„æºã€‚
    rclcpp::shutdown();
    return 0;
}
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDY2NDdiZWFhZTUzN2Q5MTc1ZTg2YmI4NWU4NTc4ZTVfeXAzT0YwMDMzTUJrVkNKMXR6UGFibU1adFlxN2tTVlBfVG9rZW46V1dVZ2JLTWFPb3VxMzZ4YUlTWGNpN0hzbnFnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

åˆ›å»ºå®šæ—¶å™¨ç”¨create\_wall\_time()å‡½æ•°ï¼Œè¦å¡«æ—¶é—´é—´éš”å’Œå¯¹åº”çš„å›è°ƒå‡½æ•°ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGExZDNkY2FkY2Q5M2RmNzNhNDkxODI4YThiYTk1NGJfVlhiVzd6WlJ6NVAwVjBHMTVaRUJWNUx6TUJrNmNHUXRfVG9rZW46UTZtSWJpeHlKb2pLVHJ4dEF6d2NXWHBJbmt0XzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

**æ‰§è¡Œ**

å½“å‰å·¥ä½œç©ºé—´ä¸‹ï¼Œå¯åŠ¨ä¸¤ä¸ªç»ˆç«¯ï¼Œç»ˆç«¯1è¾“å…¥å¦‚ä¸‹å‘½ä»¤å‘å¸ƒé›·è¾¾ï¼ˆlaserï¼‰ç›¸å¯¹äºåº•ç›˜ï¼ˆbase\_linkï¼‰çš„é™æ€åæ ‡å˜æ¢ï¼š

```Bash
. install/setup.bash 
ros2 run cpp03_tf_broadcaster demo01_static_tf_broadcaster 0.4 0 0.2 0 0 0 base_link laser
```

ç»ˆç«¯2è¾“å…¥å¦‚ä¸‹å‘½ä»¤å‘å¸ƒéšœç¢ç‰©ç›¸å¯¹äºé›·è¾¾ï¼ˆlaserï¼‰çš„åæ ‡ç‚¹ï¼š

```Bash
. install/setup.bash 
ros2 run cpp03_tf_broadcaster demo03_point_publisher
```

  

**rviz2 æŸ¥çœ‹åæ ‡ç³»å…³ç³»**

å‚è€ƒ **5.3.2 é™æ€å¹¿æ’­å™¨ï¼ˆå‘½ä»¤ï¼‰** å†…å®¹å¯åŠ¨å¹¶é…ç½® rviz2ï¼Œæ˜¾ç¤ºåæ ‡å˜æ¢åï¼Œå†æ·»åŠ  PointStamped æ’ä»¶å¹¶å°†å…¶è¯é¢˜è®¾ç½®ä¸º /pointï¼Œæœ€ç»ˆæ˜¾ç¤ºç»“æœä¸æ¡ˆä¾‹æ¼”ç¤ºç±»ä¼¼ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzYzYTk5ZDYyMmU1ZTg0NTc2ZmFlOWI4MmU4ZGVlZjRfeGZsck52b09HZnp2ZXYwMkFrOVZ5ODJWYmpWU0xVYnRfVG9rZW46RFNKRWJFemdLb0E4dUd4alpTOGNGd2RMblhlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2E2ZjY1M2VlZWY3NGE5M2JmNDZkMDk3YzJiZTUwNDhfZGpGRUltRHlmOTV6UE04R1JDY2g2dFJsamtyaDE2aHpfVG9rZW46RmdUaWJTazdIb2w0aWR4d1JMWGN0TWlibmhiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

é€šè¿‡è¿™é‡Œå¯ä»¥æ”¹çƒçš„é€æ˜åº¦å’Œå¤§å°

  

8.  ### å°ç»“
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Njk0NTI4NmFlMzhlNGYzMDkwNGIzYTc5MmRmNTU3NzlfZm1aYlFyQ3ZpaDNxbzRWS2hrcFNVNFRheUs4WmJaSGRfVG9rZW46TFRIS2Jjdmlib1VzRUV4aXBwNmNkNFBGbnNCXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

é™æ€å¹¿æ’­åªå‘å¸ƒä¸€æ¬¡ã€‚

è€ŒåŠ¨æ€å¹¿æ’­å’Œåæ ‡ç‚¹å¹¿æ’­éƒ½æ˜¯å‘å¸ƒå¤šæ¬¡ã€‚

ä½†å®è´¨ä¸Šå°±æ˜¯è¯é¢˜é€šä¿¡ã€‚

  

3.  ## åæ ‡å˜æ¢ç›‘å¬
    

1.  ### æ¡ˆä¾‹ä¸åˆ†æ
    

**æ¡ˆä¾‹1ï¼š** åœ¨ **5.3 åæ ‡å˜æ¢å¹¿æ’­** ä¸­å‘å¸ƒäº†laserç›¸å¯¹äºbase\_linkå’Œcamraç›¸å¯¹äºbase\_linkçš„åæ ‡ç³»å…³ç³»ï¼Œè¯·æ±‚è§£laserç›¸å¯¹äºcameraçš„åæ ‡ç³»å…³ç³»ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2FmOGMwMjUyZDY4NDBjN2M2NDNiYzM3ZjVhNDk5NGFfVVJ1ZlFNWlJGdktIa2syNWxaVGIyTmZjSWxPTTlkcHhfVG9rZW46U2NieGJqNHlsb0RDbWN4SWRzQWNEdGZqbmNjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

**æ¡ˆä¾‹2ï¼š** åœ¨ **5.3 åæ ‡å˜æ¢å¹¿æ’­** ä¸­å‘å¸ƒäº†laserç›¸å¯¹äºbase\_linkçš„åæ ‡ç³»å…³ç³»ä¸”å‘å¸ƒäº†laseråæ ‡ç³»ä¸‹çš„éšœç¢ç‰©çš„åæ ‡ç‚¹æ•°æ®ï¼Œè¯·æ±‚è§£base\_linkåæ ‡ç³»ä¸‹è¯¥éšœç¢ç‰©çš„åæ ‡ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDI4M2YyNWRkZmQ3OWI0ODc4NmI2MmM4MTMyYTA3NmVfRVYyOEhnVjVIWU9vMThPbDg0dEVPcXFTanlzblhvOWlfVG9rZW46STFsQWJ6Zmxrb0NHTUh4REh2ZGNRUVdobk1iXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

**æ¡ˆä¾‹åˆ†æ**

åœ¨ä¸Šè¿°æ¡ˆä¾‹ä¸­ï¼Œæ¡ˆä¾‹1æ˜¯å¤šåæ ‡ç³»çš„åœºæ™¯ä¸‹å®ç°ä¸åŒåæ ‡ç³»ä¹‹é—´çš„å˜æ¢ï¼Œæ¡ˆä¾‹2åˆ™æ˜¯è¦å®ç°åŒä¸€åæ ‡ç‚¹åœ¨ä¸åŒåæ ‡ç³»ä¸‹çš„å˜æ¢ï¼Œè™½ç„¶éœ€æ±‚ä¸åŒï¼Œä½†æ˜¯ç›¸å…³ç®—æ³•éƒ½è¢«å°è£…å¥½äº†ï¼Œæˆ‘ä»¬åªéœ€è¦è°ƒç”¨ç›¸å…³ API å³å¯ã€‚

**æµç¨‹ç®€ä»‹**

ä¸¤ä¸ªæ¡ˆä¾‹çš„å®ç°æµç¨‹ç±»ä¼¼ï¼Œä¸»è¦æ­¥éª¤å¦‚ä¸‹ï¼š

1.  ç¼–å†™åæ ‡å˜æ¢ç¨‹åºå®ç°ï¼›
    
2.  ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼›
    
3.  ç¼–è¯‘ï¼›
    
4.  æ‰§è¡Œã€‚
    

æ¡ˆä¾‹æˆ‘ä»¬ä¼šé‡‡ç”¨ C++ å’Œ Python åˆ†åˆ«å®ç°ï¼ŒäºŒè€…éƒ½éµå¾ªä¸Šè¿°å®ç°æµç¨‹ã€‚

**å‡†å¤‡å·¥ä½œ**

ç»ˆç«¯ä¸‹è¿›å…¥å·¥ä½œç©ºé—´çš„srcç›®å½•ï¼Œè°ƒç”¨å¦‚ä¸‹ä¸¤æ¡å‘½ä»¤åˆ†åˆ«åˆ›å»ºC++åŠŸèƒ½åŒ…å’ŒPythonåŠŸèƒ½åŒ…ã€‚

```Bash
ros2 pkg create cpp04_tf_listener --build-type ament_cmake --dependencies rclcpp tf2 tf2_ros geometry_msgs --node-name demo01_tf_listener
```

  

2.  ### åæ ‡ **ç³»** å˜æ¢ç›‘å¬\_C++
    

1.  #### å®ä¾‹åˆ†æ
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDljMjE5MjY5ZGFjY2E2MjQ2YTY4NTZkNzBjYjkxZTFfZ3lwVU4yMm9nTnJ3MVAzYUk5VkRoWWlpZU1LeDNCTVBfVG9rZW46QkVVeWJ5aDUyb3JZS0V4c2FKbGNFTFZmbkpkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¸ä¹‹å‰å®ç°ä¸å¤ªä¸€æ ·ï¼Œè¦ä¿å­˜åˆ°bufferä¸­ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWJiNjg1ZDFjYWMxNjRjN2U5YmQ3YTAxOTM1Yjg1MDRfdm5KbUk1Q1BremF4SDJNZFlFSGxoMTJGdGlDemsxT0hfVG9rZW46RTRscGJFTW92b3Z5S2t4cUh0VmNveHBHbmViXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å› ä¸ºä¹‹å‰çš„å¹¿æ’­æ˜¯å‘ä¸€æ¡è®¢é˜…ä¸€æ¡ã€‚

ä½†æ˜¯åœ¨åæ ‡å˜æ¢ä¸­ï¼Œæ˜¯å¤šå¯¹ä¸€å®ç°çš„ã€‚

å¤šä¸ªå¹¿æ’­å‘å¸ƒçš„æ¶ˆæ¯ç»„æˆä¸€ä¸ªåæ ‡æ ‘ï¼Œè¦ä»åæ ‡æ ‘ä¸­è·å–ä¸åŒåæ ‡å¸§çš„å˜æ¢ã€‚

æŠŠå¤šæ¡å¹¿æ’­æ–¹çš„æ¶ˆæ¯ç»„æˆåæ ‡æ ‘ï¼Œå°±è¦ä½¿ç”¨bufferï¼ŒæŠŠæ¶ˆæ¯å…¨éƒ¨å­˜åˆ°ç¼“å­˜bufferä¸­ã€‚

  

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzAwNDJhN2U0OGIzYjRmZWI1M2YwMmM3Yzg3MjcyOWJfVGhIdERaWnBmRlFGVWJwd3A2OGJhbGQ1Tjh4Q1BuSXRfVG9rZW46VVIxNWJJWU94b3AxZnB4bHNZY2NMM1NEblVoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™é‡Œä¸ºä½•è¦åšå¼‚å¸¸å¤„ç†å‘¢ï¼Ÿ

å› ä¸ºè¿›ç¨‹é—´çš„é€šä¿¡å¼€é”€æ¯”è¾ƒå¤§ï¼Œæ˜¯æœ‰å»¶è¿Ÿçš„ï¼Œå¯èƒ½ç¨‹åºè¦å¼€å§‹åšå˜æ¢äº†ï¼Œå¯æƒœæ¶ˆæ¯è¿˜æ²¡è®¢é˜…åˆ°ã€‚

æ¶ˆæ¯éƒ½æ²¡æœ‰ï¼Œå°±ä¼šæŠ›å¼‚å¸¸ã€‚ç›´åˆ°bufferé‡Œæœ‰æ•°æ®ï¼Œåæ ‡ä¹Ÿè½¬åŒ–æˆåŠŸï¼Œæ‰ä¸ä¼šæŠ›å¼‚å¸¸ã€‚

  

2.  #### å®ç°
    

```C++
/*  
  éœ€æ±‚ï¼šè®¢é˜… laser åˆ° base_link ä»¥åŠ camera åˆ° base_link çš„åæ ‡ç³»å…³ç³»ï¼Œ
       å¹¶ç”Ÿæˆ laser åˆ° camera çš„åæ ‡å˜æ¢ã€‚
  æ­¥éª¤ï¼š
    1.åŒ…å«å¤´æ–‡ä»¶ï¼›
    2.åˆå§‹åŒ– ROS å®¢æˆ·ç«¯ï¼›
    3.å®šä¹‰èŠ‚ç‚¹ç±»ï¼›
      3-1.åˆ›å»ºtfç¼“å­˜å¯¹è±¡æŒ‡é’ˆï¼›èåˆå¤šä¸ªåæ ‡ç³»ç›¸å¯¹å…³ç³»ä¸ºä¸€æ£µåæ ‡æ ‘ã€‚
      3-2.åˆ›å»ºtfç›‘å¬å™¨ï¼›æŒ‡å®šç¼“å­˜å¯¹è±¡ï¼Œä¼šå°†æ‰€æœ‰å¹¿æ’­å™¨å¹¿æ’­çš„æ•°æ®å†™å…¥ç¼“å­˜ã€‚
      3-3.ç¼–å†™å®šæ—¶å™¨ï¼Œå¾ªç¯å®ç°è½¬æ¢ï¼›æŒ‰ç…§æ¡ä»¶æŸ¥æ‰¾ç¬¦åˆæ¡ä»¶çš„åæ ‡ç³»å¹¶ç”Ÿæˆå˜æ¢åçš„åæ ‡å¸§ã€‚
    4.è°ƒç”¨ spin å‡½æ•°ï¼Œå¹¶ä¼ å…¥å¯¹è±¡æŒ‡é’ˆï¼›
    5.é‡Šæ”¾èµ„æºã€‚

*/
#include "rclcpp/rclcpp.hpp"
#include "tf2_ros/transform_listener.h"
#include "tf2_ros/buffer.h"
#include "tf2/LinearMath/Quaternion.h"

using namespace std::chrono_literals;

// 3.å®šä¹‰èŠ‚ç‚¹ç±»ï¼›
class MinimalFrameListener : public rclcpp::Node {
public:
  MinimalFrameListener():Node("minimal_frame_listener"){
    tf_buffer_ = std::make_unique<tf2_ros::Buffer>(this->get_clock());
    transform_listener_ = std::make_shared<tf2_ros::TransformListener>(*tf_buffer_);
    timer_ = this->create_wall_timer(1s, std::bind(&MinimalFrameListener::on_timer,this));
  }

private:
  void on_timer(){
    try
    {
      auto transformStamped = tf_buffer_->lookupTransform("camera","laser",tf2::TimePointZero);
      RCLCPP_INFO(this->get_logger(),"----------------------è½¬æ¢ç»“æœ----------------------");
      RCLCPP_INFO(this->get_logger(),"frame_id:%s",transformStamped.header.frame_id.c_str());
      RCLCPP_INFO(this->get_logger(),"child_frame_id:%s",transformStamped.child_frame_id.c_str());
      RCLCPP_INFO(this->get_logger(),"åæ ‡:(%.2f,%.2f,%.2f)",
                transformStamped.transform.translation.x,
                transformStamped.transform.translation.y,
                transformStamped.transform.translation.z);

    }
    catch(const tf2::LookupException& e)
    {
      RCLCPP_INFO(this->get_logger(),"åæ ‡å˜æ¢å¼‚å¸¸ï¼š%s",e.what());
    }

  }
  rclcpp::TimerBase::SharedPtr timer_;
  std::shared_ptr<tf2_ros::TransformListener> transform_listener_;
  std::unique_ptr<tf2_ros::Buffer> tf_buffer_;
};

int main(int argc, char const *argv[])
{
  // 2.åˆå§‹åŒ– ROS å®¢æˆ·ç«¯ï¼›
  rclcpp::init(argc,argv);
  // 4.è°ƒç”¨ spin å‡½æ•°ï¼Œå¹¶ä¼ å…¥å¯¹è±¡æŒ‡é’ˆï¼›
  rclcpp::spin(std::make_shared<MinimalFrameListener>());
  // 5.é‡Šæ”¾èµ„æºã€‚
  rclcpp::shutdown();
  return 0;
}
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmQ2MmM4Njk1ZjM3OTI2ODhmOTM1ODg1ODM1YWJhZDRfS01kWVhtaEJxdTBla2hRMnkxWVhhVnRvTkc0ZDhXclZfVG9rZW46WGNUUGJYTmNXb3M2ell4MEJVUGNOSFhxbnNnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¦å¡«å›è°ƒå‡½æ•°

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmQ4MDEwYzRjZWM3MzRlYmEzN2ZiNTQ0MTQxZjdmNTJfYWdXTEJkTjJ0V0ZKaUR0MlFndktkcGRJdHE3RDNUS0ZfVG9rZW46S3JoVWJodVhJb3F6dWd4YTN3emN5TkQ1blNiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTdhZjllZDE1ZWE0ZThkZTljOTdjOTQzZjVlMTVmZmFfdkxqQlJ3RmxMWkk2N0VOa2l6WHA3ZFF1WkJNMmtUMXNfVG9rZW46RkNIT2JnSmZBbzY5Yzl4Y1I4UWN3SmtUbjNnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å®ç°åæ ‡ç³»è½¬æ¢çš„æ ¸å¿ƒå‡½æ•°å°±æ˜¯lookuptransform()

target\_frameå°±æ˜¯çˆ¶çº§

source\_frameå°±æ˜¯å­çº§

timeæ˜¯æ—¶é—´ï¼Œä¸€èˆ¬éƒ½å†™æœ€æ–°æ—¶åˆ»çš„

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTgwZTZhMDI4YmQ0MWQ4ZmE5MmVjNzhhODM5MzNiMmFfZmI5dFNEYmMzb2pyQ0tCYk41bFlCV0pOaHVnclVDc3FfVG9rZW46Q0hFZGJsYW5MbzNlNGt4TGx5V2NhOTA2blViXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¦‚æœbufferæ²¡æ•è·åˆ°ï¼ŒæŠ›å¼‚å¸¸çš„å‡½æ•°å®ç°

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDQzMjFlOGM1ODNkNzg2NGE2ZjRmNTNiZTNhYzIxMDZfamhUQ1ptWVBudnVaWExSaEhYdmE1Rm5BMkZMbFBYb0FfVG9rZW46UTFUUWJnN016b0ZrT0h4d29jN2NyRTZFbkFiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™æ ·å°±æˆåŠŸè½¬æ¢åæ ‡äº†ï¼Œå¯ä»¥æ‰“å°è½¬æ¢çš„åæ ‡ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTdhZTM4ZWFiMjU3ODVjMGE5MmQ5ODBmZTVmOWJjMzdfVFpkQnVlZnRPVHUzbDRvYWlqV0Frdk5VNFl3VktrZDVfVG9rZW46Qzg1SmJhYkJYb05Renl4REZrYWNTbWNvbmpoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

é™¤äº†ç”¨try catchå¤„ç†è½¬æ¢å¼‚å¸¸ï¼Œè¿˜å¯ä»¥ç”¨bufferåº•ä¸‹çš„å‡½æ•°è½¬æ¢ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjVhNWZkZjMyMTg0OTRkYWRiMGE0NjIwZDAyM2MzMTBfMWE0azJTNVo3R3Vwb1Vpc3hIUkJZTnNKeEY0ZGJsR1NfVG9rZW46RWptbWJ2eFhtb1ZGOU54STRmbWNkWUR5bmM3XzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ¯”å¦‚è¿™ä¸ªcantransformå¯ä»¥åˆ¤æ–­æ˜¯å¦å¯ä»¥æ­£å¸¸è½¬æ¢ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWFhMjFiYTA5YWUyZjI0YjAzMzA0Y2E3YTI5MDA2ZDhfTWZBY1R1b1NXZ2lEWmJjRHZwcmpXN1JVcXprNEw5ZElfVG9rZW46RVZxN2JybUFWb3U1ZEh4cHZwSmNUbmx3bnFkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGQ4ZWNjNTFkODRjOWJjMzZjYjBlYWQ5MzIxNGYwYjZfaUxsaVFra0F1OHlPMVNhSmZiMkZrWUgwV1F2eGw4MElfVG9rZW46TnVrTmI4QnBhb0VZTWl4WjlDMGNpcmF6bkhiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™ç§æŠ¥é”™è¦æ”¹ä¸ºCé£æ ¼å­—ç¬¦ä¸²

  

å¯åŠ¨ä¸‰ä¸ªç»ˆç«¯ï¼Œç»ˆç«¯1è¾“å…¥å¦‚ä¸‹å‘½ä»¤å‘å¸ƒé›·è¾¾ï¼ˆlaserï¼‰ç›¸å¯¹äºåº•ç›˜ï¼ˆbase\_linkï¼‰çš„é™æ€åæ ‡å˜æ¢ï¼š

```Plain Text
ros2 run tf2_ros static_transform_publisher --frame-id base_link --child-frame-id camera --x -0.5 --z -0.4
```

ç»ˆç«¯2è¾“å…¥å¦‚ä¸‹å‘½ä»¤å‘å¸ƒæ‘„åƒå¤´ï¼ˆcameraï¼‰ç›¸å¯¹äºåº•ç›˜ï¼ˆbase\_linkï¼‰çš„é™æ€åæ ‡å˜æ¢ï¼š

```Plain Text
ros2 run tf2_ros static_transform_publisher --frame-id base_link --child-frame-id laser--x 0.4 --z 0.2
```

ç»ˆç«¯3è¾“å…¥å¦‚ä¸‹å‘½ä»¤æ‰§è¡Œåæ ‡ç³»å˜æ¢ï¼š

```Plain Text
. install/setup.bash 
ros2 run cpp04_tf_listener demo01_tf_listener
```

ç»ˆç«¯3å°†è¾“å‡º laser ç›¸å¯¹äº camera çš„åæ ‡ï¼Œå…·ä½“ç»“æœè¯·å‚è€ƒæ¡ˆä¾‹1ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2Q0MTIwZjE4MmJmYTZmOTQ0ZWFlMzRmOWI0MTJhYjlfd2RxbU9MRkhBVTFIU1F1dXY2MEd6VjdEa0lDRXlHckhfVG9rZW46THZTZWIwdFhNb2hLU1d4UHFSaGNOUFljbk9nXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTU5YmVlMzg0ODA2YjgwY2Q5NTBlNDVhMmI4ZmJiNjlfbXJIeWZONGlKVTNoazlFS0JCakJ4TnRXQUlvbTRsSzRfVG9rZW46SFhLY2IyZTlnb296Uk54UWJhN2M0RlNSbkNmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å½“åªè¿è¡Œä¸€ä¸ªå¹¿æ’­ï¼Œä»–ä¼šæŠ›é”™ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDFiNGZjNmRjNTFiYjY3MzhmMWI3MTI4YTQxMzZkOTlfTGFrNFF1QTBoWFJKaTlDaGF2OTZDZEpUbldYUXZWaWZfVG9rZW46RXFxSmI0Y1B5b29PbG94dTIxNmMyZ1Y0bnRoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjA2MjdjYmVmY2Y2NjcxYWI5OWI0NmU1MmMxMjg0YjZfQXJZVnFCYU1temNWN1lJSDRzbGEzeE9YZUpGbEtZODNfVG9rZW46Q0xXemJlZXlNb1ZmU3J4SnhTSGMzdFd3bkdlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å½“æ‰€æœ‰å¹¿æ’­éƒ½è·‘èµ·æ¥æ—¶ï¼Œæ‰ä¼šæ­£å¸¸è½¬æ¢ã€‚

  

3.  ### åæ ‡ **ç‚¹** å˜æ¢ç›‘å¬\_C++
    

1.  #### å®ç°æ¡†æ¶
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDJhNjBjMGUxMjc2NzIyYjNlOWRjNmY4OGZlYjljM2ZfVmNIbFN4bHIyMGg4eEczRERlUFp2bWFlUFZ1Z1B2R2pfVG9rZW46V01jR2JrTnRYb0xIcVR4NGV6QWNrY3pXbnFjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ±‚laseræµ‹å¾—çš„åæ ‡ç‚¹åˆ°base\_linkçš„è·ç¦»

  

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTQxMjc3ZjJlY2M4NTVmYWRhZWNhZTU5ODgxMGE4N2VfdGtIM0dZa2FKR0JYZ0RHallVQk96SEpLM3AwZktyRnRfVG9rZW46RmxoTWJyaWlKb2NxS1Z4WDFyM2NXc1MxblNoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2RhMGUwOTUzMDc0YWEzOTA5ZTJhZTY0MGM3NDIzOTlfbVBsM0Q5UGxwY0ZtN1hXY0hXUW9saVVwVjVrbVlmWGFfVG9rZW46TnN0cmJDcnBYb1dxdm54QU9GTGNNaGE4blB3XzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

laseråˆ°pointçš„åæ ‡ç”¨çš„æ˜¯pointè¯é¢˜ï¼Œä¸ç›‘å¬å™¨ç”¨çš„è¯é¢˜ä¸ä¸€æ ·ï¼Œæ‰€ä»¥ä¸å¥½è®¢é˜…ï¼Œè¦åˆ›å»ºä¸€ä¸ªæ–°çš„è®¢é˜…å¯¹è±¡ã€‚

  

2.  #### æ¡†æ¶æ­å»º
    

package.xmlåœ¨åˆ›å»ºåŠŸèƒ½åŒ…æ—¶ï¼Œæ‰€ä¾èµ–çš„éƒ¨åˆ†åŠŸèƒ½åŒ…å·²ç»è‡ªåŠ¨é…ç½®äº†ï¼Œä¸è¿‡ä¸ºäº†å®ç°åæ ‡ç‚¹å˜æ¢ï¼Œè¿˜éœ€è¦æ·»åŠ ä¾èµ–åŒ…`tf2_geometry_msgs`å’Œ

`message_filters`ï¼Œä¿®æ”¹åçš„é…ç½®å†…å®¹å¦‚ä¸‹ï¼š

```XML
<depend>rclcpp</depend>
<depend>tf2</depend>
<depend>tf2_ros</depend>
<depend>geometry_msgs</depend>
<depend>tf2_geometry_msgs</depend>
<depend>message_filters</depend>
```

CMakeLists.txt æ–‡ä»¶ä¿®æ”¹åçš„å†…å®¹å¦‚ä¸‹ï¼š

```CMake
find dependencies
find_package(ament_cmake REQUIRED)
find_package(rclcpp REQUIRED)
find_package(tf2 REQUIRED)
find_package(tf2_ros REQUIRED)
find_package(geometry_msgs REQUIRED)
find_package(tf2_geometry_msgs REQUIRED)
find_package(message_filters REQUIRED)

add_executable(demo01_tf_listener src/demo01_tf_listener.cpp)
ament_target_dependencies(
  demo01_tf_listener
  "rclcpp"
  "tf2"
  "tf2_ros"
  "geometry_msgs"
)
add_executable(demo02_message_filter src/demo02_message_filter.cpp)
ament_target_dependencies(
  demo02_message_filter
  "rclcpp"
  "tf2"
  "tf2_ros"
  "geometry_msgs"
  "tf2_geometry_msgs"
  "message_filters"
)
install(TARGETS demo01_tf_listener
  demo02_message_filter
  DESTINATION lib/${PROJECT_NAME})
```

  

  

3.  #### å®ç°
    

```C++
/*  
  éœ€æ±‚ï¼šå°†é›·è¾¾æ„ŸçŸ¥åˆ°çš„éšœç¢ç‰©çš„åæ ‡ç‚¹æ•°æ®ï¼ˆç›¸å¯¹äº laser åæ ‡ç³»ï¼‰ï¼Œ
       è½¬æ¢æˆç›¸å¯¹äºåº•ç›˜åæ ‡ç³»ï¼ˆbase_linkï¼‰çš„åæ ‡ç‚¹ã€‚

  æ­¥éª¤ï¼š
    1.åŒ…å«å¤´æ–‡ä»¶ï¼›
    2.åˆå§‹åŒ– ROS å®¢æˆ·ç«¯ï¼›
    3.å®šä¹‰èŠ‚ç‚¹ç±»ï¼›
      3-1.åˆ›å»ºtfç¼“å­˜å¯¹è±¡æŒ‡é’ˆï¼›
      3-2.åˆ›å»ºtfç›‘å¬å™¨ï¼›
      3-3.åˆ›å»ºåæ ‡ç‚¹è®¢é˜…æ–¹å¹¶è®¢é˜…æŒ‡å®šè¯é¢˜ï¼›
      3-4.åˆ›å»ºæ¶ˆæ¯è¿‡æ»¤å™¨è¿‡æ»¤è¢«å¤„ç†çš„æ•°æ®ï¼›
      3-5.ä¸ºæ¶ˆæ¯è¿‡æ»¤å™¨æ³¨å†Œè½¬æ¢åæ ‡ç‚¹æ•°æ®çš„å›è°ƒå‡½æ•°ã€‚
    4.è°ƒç”¨ spin å‡½æ•°ï¼Œå¹¶ä¼ å…¥å¯¹è±¡æŒ‡é’ˆï¼›
    5.é‡Šæ”¾èµ„æºã€‚

*/// 1.åŒ…å«å¤´æ–‡ä»¶ï¼›#include <geometry_msgs/msg/point_stamped.hpp>#include <message_filters/subscriber.h>#include <rclcpp/rclcpp.hpp>#include <tf2_ros/buffer.h>#include <tf2_ros/create_timer_ros.h>#include <tf2_ros/message_filter.h>#include <tf2_ros/transform_listener.h>// #ifdef TF2_CPP_HEADERS//   #include <tf2_geometry_msgs/tf2_geometry_msgs.hpp>// #else//   #include <tf2_geometry_msgs/tf2_geometry_msgs.h>// #endif#include <tf2_geometry_msgs/tf2_geometry_msgs.hpp>using namespace std::chrono_literals;

// 3.å®šä¹‰èŠ‚ç‚¹ç±»ï¼›class MessageFilterPointListener : public rclcpp::Node
{
public:
  MessageFilterPointListener(): Node("message_filter_point_listener")
  {

    target_frame_ = "base_link";

    typedef std::chrono::duration<int> seconds_type;
    seconds_type buffer_timeout(1);
    // 3-1.åˆ›å»ºtfç¼“å­˜å¯¹è±¡æŒ‡é’ˆï¼›
    tf2_buffer_ = std::make_shared<tf2_ros::Buffer>(this->get_clock());
    auto timer_interface = std::make_shared<tf2_ros::CreateTimerROS>(
      this->get_node_base_interface(),
      this->get_node_timers_interface());
    tf2_buffer_->setCreateTimerInterface(timer_interface);
    // 3-2.åˆ›å»ºtfç›‘å¬å™¨ï¼›
    tf2_listener_ = std::make_shared<tf2_ros::TransformListener>(*tf2_buffer_);

    // 3-3.åˆ›å»ºåæ ‡ç‚¹è®¢é˜…æ–¹å¹¶è®¢é˜…æŒ‡å®šè¯é¢˜ï¼›
    point_sub_.subscribe(this, "point");
    // 3-4.åˆ›å»ºæ¶ˆæ¯è¿‡æ»¤å™¨è¿‡æ»¤è¢«å¤„ç†çš„æ•°æ®ï¼›
    tf2_filter_ = std::make_shared<tf2_ros::MessageFilter<geometry_msgs::msg::PointStamped>>(
      point_sub_, *tf2_buffer_, target_frame_, 100, this->get_node_logging_interface(),
      this->get_node_clock_interface(), buffer_timeout);
    // 3-5.ä¸ºæ¶ˆæ¯è¿‡æ»¤å™¨æ³¨å†Œè½¬æ¢åæ ‡ç‚¹æ•°æ®çš„å›è°ƒå‡½æ•°ã€‚
    tf2_filter_->registerCallback(&MessageFilterPointListener::msgCallback, this);
  }

private:
  void msgCallback(const geometry_msgs::msg::PointStamped::SharedPtr point_ptr){
    geometry_msgs::msg::PointStamped point_out;
    try {
      tf2_buffer_->transform(*point_ptr, point_out, target_frame_);
      RCLCPP_INFO(
        this->get_logger(), "åæ ‡ç‚¹ç›¸å¯¹äºbase_linkçš„åæ ‡:(%.2f,%.2f,%.2f)",
        point_out.point.x,
        point_out.point.y,
        point_out.point.z);
    } catch (tf2::TransformException & ex) {
      RCLCPP_WARN(
        // Print exception which was caughtthis->get_logger(), "Failure %s\n", ex.what());
    }
  }
  std::string target_frame_;
  std::shared_ptr<tf2_ros::Buffer> tf2_buffer_;
  std::shared_ptr<tf2_ros::TransformListener> tf2_listener_;
  message_filters::Subscriber<geometry_msgs::msg::PointStamped> point_sub_;
  std::shared_ptr<tf2_ros::MessageFilter<geometry_msgs::msg::PointStamped>> tf2_filter_;
};

int main(int argc, char * argv[]){
  // 2.åˆå§‹åŒ– ROS å®¢æˆ·ç«¯ï¼›
  rclcpp::init(argc, argv);
  // 4.è°ƒç”¨ spin å‡½æ•°ï¼Œå¹¶ä¼ å…¥å¯¹è±¡æŒ‡é’ˆï¼›
  rclcpp::spin(std::make_shared<MessageFilterPointListener>());
  // 5.é‡Šæ”¾èµ„æºã€‚
  rclcpp::shutdown();
  return 0;
}
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzlmMTI4OGExYWQwOGQyODIzMDM3MWY4N2RkMGFhY2ZfU0RZSENSS0l3TFNic1U5SHBkWHV6VUY5VXFCWFdOeXpfVG9rZW46WHlWbGJiZ1BrbzAyZFJ4VTlXV2NSc2lzbklkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æŠŠä¸Šé¢æ­¤å‚æ•°è®¾ç½®ä¸€ä¸‹

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Mzc2YTQ3OGM2ZTU0MWFkYTEyYzgzNjI0NzRjYjE2YjFfR1hyZzNiUGtEeGRDM1U2NW5EMHhtRkRxVXhFQndUZEpfVG9rZW46U3Q2S2JZdFhBb1RQT2Z4Wjc2VGN1RWtsbnBmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MWQ2Yjg2YmE3OGJjODdhNTU2OGY5OTRhZTQ1YTVjZGFfMXkzR292dkpnQ1dBODZ4aklGWUZOaTdEWTZpc054SGVfVG9rZW46SXpoRmJhVWlvb2ZEbkZ4Z29KNWN6YnYzblJkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGVjMGVjYWJkMTlhODVlZDIzOGI2ZTlhZmRmMWMzMTBfTlpndHNQajVaSjJFbHU0VHI5bmJnRnJibUVkYjNCSVdfVG9rZW46UWc2ZmJpSXRab3RJeDJ4enBGMWM1N0ZsbnNoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿›è¡Œæ•°æ®è§£æ

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2JmZjA2OWFlMWM0ZTBlNWI1OWUzMGI2ZTg3MGQzYjVfVW9MZnpWcUdnOEUzUjZWbW1IRnFpT2pmQk9aN2RQN2RfVG9rZW46RzR2RmJWQmJ1b0FnTG54OXZONWNPZGtvblBkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ç”¨ç¬¬ä¸€ä¸ªé‡è½½ã€‚

è½¬æ¢è¿‡ç¨‹ä¼šæŠ›å¼‚å¸¸ï¼Œå¯ä»¥ä¸ç®¡ä»–ã€‚è½¬åŒ–å¤±è´¥ä¼šåœ¨ç»ˆç«¯ä¸Šè‡ªåŠ¨æŠ›å¼‚å¸¸ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzE0MTFlYWJiMjQ3ODQwZGVmNGYxYjk1ZjllZTc1MWJfdE1zQjdVdm9FR3RjRGEwSHVqTUoxRVVSejM5NEN6aTdfVG9rZW46UVBacGJuM1Vnb0d5Mml4QXpuRWNyQVZDbnBkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

åœ¨å½“å‰å·¥ä½œç©ºé—´ä¸‹ï¼Œå¯åŠ¨ä¸‰ä¸ªç»ˆç«¯ï¼Œç»ˆç«¯1è¾“å…¥å¦‚ä¸‹å‘½ä»¤å‘å¸ƒé›·è¾¾ï¼ˆlaserï¼‰ç›¸å¯¹äºåº•ç›˜ï¼ˆbase\_linkï¼‰çš„é™æ€åæ ‡å˜æ¢ï¼š

```Bash
. install/setup.bash 
ros2 run cpp03_tf_broadcaster demo01_static_tf_broadcaster 0.4 0 0.2 0 0 0 base_link laser
```

ç»ˆç«¯2è¾“å…¥å¦‚ä¸‹å‘½ä»¤å‘å¸ƒéšœç¢ç‰©ç›¸å¯¹äºé›·è¾¾ï¼ˆlaserï¼‰çš„åæ ‡ç‚¹ï¼š

```Bash
. install/setup.bash 
ros2 run cpp03_tf_broadcaster demo03_point_publisher
```

ç»ˆç«¯3è¾“å…¥å¦‚ä¸‹å‘½ä»¤æ‰§è¡Œåæ ‡ç‚¹å˜æ¢ï¼š

```Bash
. install/setup.bash 
ros2 run cpp04_tf_listener demo02_message_filter
```

ç»ˆç«¯3å°†è¾“å‡ºåæ ‡ç‚¹ç›¸å¯¹äº base\_link çš„åæ ‡ï¼Œå…·ä½“ç»“æœè¯·å‚è€ƒæ¡ˆä¾‹2ã€‚

æŒ‰é¡ºåºä¾æ¬¡å‘å¸ƒ

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDAyZWNlYzlhODYwNDlmNzU1MDdkZmMzZWU0NzYxNjRfOEd4Y1ZOd2txREtVTzNwb3F0WHd5eEFScHQ3Y1NMYTBfVG9rZW46WFdWSGJWTlhjb25Mc3p4N3lkOGNUQWMwbmxkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTIxM2NlNDM3YWUyODhiNzkxYWZhNGQxYWI4MWYzNDhfc2NVeURHOTNmaERwZFVaZFRBM2dKN3YyYjl5UnAxbXFfVG9rZW46RFZ2MWJWUWgyb1lOcUF4a2ZGd2NBaDdjbmFiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

4.  ## åæ ‡å˜æ¢å·¥å…·
    

åœ¨ ROS2 çš„ TF æ¡†æ¶ä¸­é™¤äº†å°è£…äº†åæ ‡å¹¿æ’­ä¸è®¢é˜…åŠŸèƒ½å¤–ï¼Œè¿˜æä¾›äº†ä¸€äº›å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬æé«˜å¼€å‘ã€è°ƒè¯•æ•ˆç‡ã€‚æœ¬èŠ‚ä¸»è¦ä»‹ç»è¿™äº›å·¥å…·çš„ä½¿ç”¨ï¼Œè¿™äº›å·¥å…·ä¸»è¦æ¶‰åŠåˆ°ä¸¤ä¸ªåŠŸèƒ½åŒ…ï¼š`tf2_ros`å’Œ`tf2_tools`ã€‚

`tf2_ros`åŒ…ä¸­æä¾›çš„å¸¸ç”¨èŠ‚ç‚¹å¦‚ä¸‹ï¼š

*   static\_transform\_publisherï¼šè¯¥èŠ‚ç‚¹ç”¨äºå¹¿æ’­é™æ€åæ ‡å˜æ¢ï¼›ï¼ˆç”¨è¿‡å¾ˆå¤šæ¬¡äº†ï¼‰
    
*   tf2\_monitorï¼šè¯¥èŠ‚ç‚¹ç”¨äºæ‰“å°æ‰€æœ‰æˆ–ç‰¹å®šåæ ‡ç³»çš„å‘å¸ƒé¢‘ç‡ä¸ç½‘ç»œå»¶è¿Ÿï¼›
    
*   tf2\_echoï¼šè¯¥èŠ‚ç‚¹ç”¨äºæ‰“å°ç‰¹å®šåæ ‡ç³»çš„å¹³ç§»æ—‹è½¬å…³ç³»ã€‚
    

`tf2_tools`åŒ…ä¸­æä¾›çš„èŠ‚ç‚¹å¦‚ä¸‹ï¼š

*   view\_framesï¼šè¯¥èŠ‚ç‚¹å¯ä»¥ç”Ÿæˆæ˜¾ç¤ºåæ ‡ç³»å…³ç³»çš„ pdf æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶åŒ…å«æ ‘å½¢ç»“æ„çš„åæ ‡ç³»å›¾è°±ã€‚
    

ä¸Šè¿°è¯¸å¤šå·¥å…·ä¸­ï¼ŒåŠŸèƒ½åŒ…`tf2_ros`ä¸­çš„`static_transform_publisher`èŠ‚ç‚¹åœ¨ **é™æ€å¹¿æ’­å™¨ï¼ˆå‘½ä»¤ï¼‰** ä¸€èŠ‚ä¸­å·²æœ‰è¯¦ç»†è¯´æ˜ï¼Œæœ¬èŠ‚ä¸å†ä»‹ç»ã€‚

**å‡†å¤‡å·¥ä½œï¼š**

ä¸ºäº†æ›´å¥½çš„æ¼”ç¤ºå·¥å…·çš„ä½¿ç”¨ï¼Œè¯·å…ˆå¯åŠ¨è‹¥å¹²åæ ‡ç³»å¹¿æ’­èŠ‚ç‚¹ï¼Œæ¯”å¦‚ï¼šå¯ä»¥æŒ‰ç…§ **é™æ€å¹¿æ’­å™¨ï¼ˆå‘½ä»¤ï¼‰** å’Œ **åŠ¨æ€å¹¿æ’­å™¨ï¼ˆC++ï¼‰** å¹¿æ’­ä¸€äº›åæ ‡ç³»æ¶ˆæ¯ã€‚

ç¬¬ä¸€ä¸ªç»ˆç«¯ï¼š

```Bash
ros2 run tf2_ros static_transform_publisher --x 0.4 --y 0 --z 0.2 --yaw 0.5 --roll 0 --pitch 0 --frame-id base_link --child-frame-id laser
```

ç¬¬äºŒä¸ªç»ˆç«¯ï¼š

```Bash
ros2 run tf2_ros static_transform_publisher --x -0.5 --y 0 --z 0.4 --yaw 0 --roll 0 --pitch 0 --frame-id base_link --child-frame-id camera
```

ç¬¬ä¸‰ä¸ªç»ˆç«¯ï¼š

```Bash
ros2 run turtlesim turtlesim_node
```

ç¬¬å››ä¸ªç»ˆç«¯ï¼š

```Bash
ros2 run turtlesim turtle_teleop_key
```

ç¬¬äº”ä¸ªç»ˆç«¯ï¼š

```Bash
source install/setup.bash
ros2 run cpp03_tf_broadcaster demo02_dynamic_tf_broadcaster
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjFhYzAxMTIyZmU3NDAzNjc5ODgyZmRjNjc3NWVhZmJfOVhCMHFRTEJPN0pWMUpVM0xQZjRodWNjY0VFdTVBVHdfVG9rZW46RmhWbmJMTEJjb2lCOTF4bkdTYmNvcll0bjRlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä»¥ä¸Šæ˜¯å‡†å¤‡å·¥ä½œ

  

#### 1.tf2\_monitor

##### 1.1æ‰“å°æ‰€æœ‰åæ ‡ç³»çš„å‘å¸ƒé¢‘ç‡ä¸ç½‘ç»œå»¶è¿Ÿ

ç»ˆç«¯æ‰§è¡Œå‘½ä»¤ï¼š

```Plain Text
ros2 run tf2_ros tf2_monitor
```

è¿è¡Œç»“æœï¼š

  

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjQxZDhiOWRjM2VmNGU5ZWMwZWRmMDI4ZmRhMmEzNDhfYkRxN1EwM28wTEdRUGc2UVN3alFGUkkyS2hWWEdQQnVfVG9rZW46UDFHUGJiUk1Xb0NCblR4cDlZZmM5aFVxbm1iXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¯¥å‘½ä»¤æœ‰10sçš„é˜»å¡æ—¶é—´ï¼Œå› ä¸ºè¦åœ¨ä¸€ä¸ªåŒºé—´å†…æµ‹é¢‘ç‡ã€‚

é™æ€çš„æ²¡æœ‰å˜åŒ–ï¼Œè€ŒåŠ¨æ€çš„å‘å¸ƒé¢‘ç‡æ˜¯æœ‰ä¸€äº›å˜åŒ–çš„ã€‚

è¯¥å‡½æ•°æ¯éš”10sä¼šå†å‘å¸ƒä¸€æ¬¡ã€‚

  

##### 1.2æ‰“å°æŒ‡å®šåæ ‡ç³»çš„å‘å¸ƒé¢‘ç‡ä¸ç½‘ç»œå»¶è¿Ÿ

ç»ˆç«¯æ‰§è¡Œå‘½ä»¤ï¼š

```Plain Text
ros2 run tf2_ros tf2_monitor camera laser
```

è¿è¡Œç»“æœï¼š

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmQwY2ZlNzFkZWRiOWIxMjZhZjE1ODViNzBlYmFkNGFfUDBsZFc0S2tDTmZ3Zkt3czg2a3l4Y3V4N2o4cHBvYWFfVG9rZW46Q1BrMmJPUjdQb2F3bjN4Q1NNcGNvV0ZQbndkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

åˆšå¼€å§‹åœ¨ç¼“å­˜é‡Œæ‹¿ä¸åˆ°æ•°æ®æŠ›é”™å¾ˆæ­£å¸¸ã€‚

  

#### 2.tf2\_echo

æ‰“å°ä¸¤ä¸ªåæ ‡ç³»çš„å¹³ç§»æ—‹è½¬å…³ç³»ã€‚

ç»ˆç«¯æ‰§è¡Œå‘½ä»¤ï¼š

```Plain Text
ros2 run tf2_ros tf2_echo world turtle1
```

è¿è¡Œç»“æœï¼š

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2ZjY2UyOTI3NTViOTY1ZDA0NDUyMTA4OTAwYmEwMGFfQ21DRkxnaW9kcU83bjZwcUo3TzJQRURYZWR6OG9jbE9fVG9rZW46UHNTN2JUblJyb1NzUVB4VHdURGNZSmxBbjNlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¼šå‡ºå¹³ç§»é‡å’Œæ—‹è½¬é‡

ä¼šä»¥å¥½å‡ ç§æ–¹å¼è¡¨ç°ï¼Œå¦‚*å¹³ç§»è·ç¦»ï¼Œå››å…ƒæ•°ï¼Œå¼§åº¦æ¬§æ‹‰è§’ï¼Œè§’åº¦æ¬§æ‹‰è§’ï¼ŒçŸ©é˜µ*ç­‰ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDY3Y2RmNWM5YTMxMjRmNDFiYmM2N2I4NjdlNTE2YmNfeExqY3F4dlJkb1ppSDE2NkJaMlp2NzZ6RzhPVTNFcjNfVG9rZW46UGxxeWJMeExkbzV0eFN4eGVvcGN3NlR2bmFlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å½“é¾Ÿç”·ğŸ¢ğŸš¹åŠ¨å¼¹çš„æ—¶å€™ï¼Œæ•°å€¼ä¹Ÿä¼šå‘ç”Ÿæ”¹å˜ã€‚

  

  

#### 3.view\_framesï¼ˆå¸¸ç”¨ï¼‰

ä»¥å›¾å½¢åŒ–çš„æ–¹å¼æ˜¾ç¤ºåæ ‡ç³»å…³ç³»ã€‚

ç»ˆç«¯æ‰§è¡Œå‘½ä»¤ï¼š

```Plain Text
ros2 run tf2_tools view_frames
```

è¿è¡Œç»“æœï¼šå°†ä¼šåœ¨**å½“å‰ç›®å½•**ä¸‹ç”Ÿæˆ frames\_xxxx.gv ä¸ frames\_xxxx.pdf æ–‡ä»¶ï¼Œå…¶ä¸­ xxxx ä¸ºæ—¶é—´æˆ³ã€‚æ‰“å¼€ pdf æ–‡ä»¶æ˜¾ç¤ºå¦‚ä¸‹å†…å®¹ï¼š

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzFjNjdiM2I3ZTJhODMwNjY4NjU1ZjY2NmRjMjU1MjVfMExhS1lQTDlYRGVZazBBUWxhV0pUb1c4aEZQOU0yRllfVG9rZW46UVh4TGJ2VVR4b3ZVQmF4Q0R5RWN1MlNUbkZiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ­¤èŠ‚ç‚¹ä¼šç›‘å¬æˆ‘ä»¬5ç§’é’Ÿï¼Œå¹¶ç”Ÿæˆå¯¹åº”çš„æ–‡ä»¶ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmEzMzgwNDFkNmQ1YzMwMTE2MzY5Mzk5NGE0YzUyNzhfejIya1pSaWdOWW9PSXg0TU0zaHRhRVVTSXByV3hKaUFfVG9rZW46TG9qY2I4aHZXb2xMdHl4clpRZ2NEbmtRbkZ5XzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTgzNDkwMmQyZDU3MTI5YWFhZjFhZDlhMDg0YzM3ZTNfczBZbG1OdGZZN2RJY1EwZzJ6c00yeTNwZUJ2UklkVHBfVG9rZW46WnR3RWJ4Z1dxb2h2OG14eDMwcGNFak40bkZnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¸Šå›¾ä¸­æœ‰ä¸¤æ£µåæ ‡æ ‘ï¼Œä½†æ˜¯å®é™…ä¸Šçš„é¡¹ç›®ä¸­ï¼Œå’±ä»¬åªèƒ½è®¾è®¡ä¸€æ£µæ ‘ï¼Œè€Œä¸èƒ½è®¾è®¡ä¸¤ä¸ªåæ ‡æ ‘ã€‚

  

5.  ## ç»ƒä¹ 
    

1.  ### ä¹Œé¾Ÿè·Ÿéš
    

2.  ### ä¹Œé¾ŸæŠ¤èˆª
    

6.  ## å°ç»“
    

  

  

  

9.  # å¯è§†åŒ–å¹³å°RVIZ2ä¸URDFå»ºæ¨¡è¯­è¨€
    

1.  ## å¯è§†åŒ–ç®€ä»‹
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTNkM2QwYjRhYWU0ZDU2NDdlYTljM2M1ZDAzMzRhY2RfRFpMMm10S1cxd0tObFRlQUU0VExmSmJ2OE1HcnlHdlJfVG9rZW46SkQycGI3aGdRb2R6S1R4UHJRbmNrOGhpbkxkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Zjc0MTkxZDRkZDcxZTBhNjZjMzVjYzg1YjcyN2I2MDZfcG45V0lhR1M2QklNWTVoQU9leGVXTmQ0OUxiMnhwZ0JfVG9rZW46VVdnemJSdU9Vb1RjRnR4cHEyQmN1Y3dFblVoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDAyZmZhOTU4N2UwZTMyOWM2NzMzNjU0ODM2YmMzZGZfWmREMXBTdEp2QUY3OGV2S0hKalAxbE9DWFdaWXNYQ3hfVG9rZW46RnRiU2JkVkJ3b2NpQVp4UG5SSGNvNVZJbkJlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

åæ ‡ç›¸å…³ã€æ¿€å…‰é›·è¾¾ç›¸å…³ã€æ‘„åƒå¤´ç›¸å…³çš„rviz2æ’ä»¶

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzM3ZTliZmUwMTMyNGY0NDcxNzViYTFiM2Q1ZGEzYzdfMzZqS0x0a1BITEdsdjRDRmNJVVg1V1dkNldubUR3R2hfVG9rZW46TkpmdGI2UGFFb0RmNXZ4a0NTNGM3OWNublJoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWNkOWExOWZlMTgzZTUyNzc5ODA5YjU2YzI1YzcwOTRfWE13WldBMmZGUW9sSnNCRUJmZlF6ejliem9yYnYxY3BfVG9rZW46Q3V0cmJ6eUhZb2FOZVh4ZW15bWN0N0tEblRlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjFiMTJiZmVmOWUyYTZhNTFhNDA4ZGE4MzNkNDk5MzBfS3JrOGk4OWs0Z0E4Z3A0RFlDV2JPMkc5WGR0RHI1OXpfVG9rZW46TW1yUWJIdm9Hb2pENVB4Z2U3RWNZTk02blViXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODg0ZjdkOGUxOGFmNGNkMzhhYTZhNjMxZTU3NzgzZTFfSno4bE05RlVQMklpZjNPWTVGYzBzb2w4MXQxTlI1NVZfVG9rZW46TnNkcWJpOVh5b1hGYnd4ckIydmM3SXBkblhjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWRiMDQ3MzYzZDBkMWFiYTE1YTM0NzBlZTcwYmU3MDBfTW9nMm9wR1F0bm9MRzBlUWFHVTdiaWw3TjA1STBINU5fVG9rZW46VVpLdWI4cDdUb1BFTGJ4UzdacWNYdnNHblNoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

2.  ## rviz2åŸºæœ¬ä½¿ç”¨
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTQxYWVkMDAxMGQ0MmNmOGRjZGUyNjk3ZmY4MGQzNmVfYkhBTWJzSXVRdnlJV0FKdEpJZlRsbGEyTjlaZm1aZXRfVG9rZW46QUE5NGJIVjF4b1lqWDl4VVpsbmNFTlNXbmViXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä»¥`sudo apt install ros-[ROS_DISTRO]-desktop`æ ¼å¼å®‰è£…ROS2æ—¶ï¼ŒRVizå·²ç»é»˜è®¤è¢«å®‰è£…äº†ã€‚

```Bash
sudo apt install ros-[ROS_DISTRO]-rviz2
```

**å¤‡æ³¨ï¼š** å‘½ä»¤ä¸­çš„ \[ROS\_DISTRO\] æŒ‡ä»£ROS2ç‰ˆæœ¬ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2NlN2I0YWE5NDlkNTM1ZDgwZjYyMWE1Y2Y4MzQ1OThfVDg2TDlvVWloOUYzNFR2SUtyRkFYdVFvRlJOTjVYTnlfVG9rZW46TXRKWWJ2WGJCb2F2Yk54aTQ2WGNhbjhzbnlkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ–¹å¼1ï¼š`rviz2`ï¼›

æ–¹å¼2ï¼š`ros2 run rviz2 rviz2`ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTk1OTNjNmI1NjJhNTA5MTEwMjkxOGEyY2JmNjVhZDRfSmM0aFN5T1JoSUNKbU80dkY5ZjFnemRydGpsaVpWS3dfVG9rZW46T0N5bGJiclQ5b0RBdE54SmRhSWNJVzUxbkhkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

**rviz2 å¯åŠ¨ä¹‹åï¼Œé»˜è®¤ç•Œé¢å¦‚ä¸‹ï¼š**

1.  ä¸Šéƒ¨ä¸ºå·¥å…·æ ï¼šåŒ…æ‹¬è§†è§’æ§åˆ¶ã€é¢„ä¼°ä½å§¿è®¾ç½®ã€ç›®æ ‡è®¾ç½®ç­‰ï¼Œè¿˜å¯ä»¥æ·»åŠ è‡ªå®šä¹‰æ’ä»¶ï¼›
    
2.  å·¦ä¾§ä¸ºæ’ä»¶æ˜¾ç¤ºåŒºï¼šåŒ…æ‹¬æ·»åŠ ã€åˆ é™¤ã€å¤åˆ¶ã€é‡å‘½åæ’ä»¶ï¼Œæ˜¾ç¤ºæ’ä»¶ï¼Œä»¥åŠè®¾ç½®æ’ä»¶å±æ€§ç­‰åŠŸèƒ½ï¼›
    
3.  ä¸­é—´ä¸º3Dè¯•å›¾æ˜¾ç¤ºåŒºï¼šä»¥å¯è§†åŒ–çš„æ–¹å¼æ˜¾ç¤ºæ·»åŠ çš„æ’ä»¶ä¿¡æ¯ï¼›
    
4.  å³ä¾§ä¸ºè§‚æµ‹è§†è§’è®¾ç½®åŒºï¼šå¯ä»¥è®¾ç½®ä¸åŒçš„è§‚æµ‹è§†è§’ï¼›
    
5.  ä¸‹ä¾§ä¸ºæ—¶é—´æ˜¾ç¤ºåŒºï¼šåŒ…æ‹¬ç³»ç»Ÿæ—¶é—´å’ŒROSæ—¶é—´ã€‚
    

**å·¦ä¾§æ’ä»¶æ˜¾ç¤ºåŒºé»˜è®¤æœ‰ä¸¤ä¸ªæ’ä»¶ï¼š**

*   Global Optionsï¼šè¯¥æ’ä»¶ç”¨äºè®¾ç½®å…¨å±€æ˜¾ç¤ºç›¸å…³çš„å‚æ•°ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œéœ€è¦è‡ªè¡Œè®¾ç½®çš„æ˜¯ Fixed Frame é€‰é¡¹ï¼Œè¯¥é€‰é¡¹æ˜¯å…¶ä»–æ‰€æœ‰æ•°æ®åœ¨å¯è§†åŒ–æ˜¾ç¤ºæ—¶æ‰€å‚è€ƒçš„å…¨å±€åæ ‡ç³»ï¼›
    
*   Global Statusï¼šè¯¥æ’ä»¶ç”¨äºæ˜¾ç¤ºåœ¨ Global Options è®¾ç½®å®Œæ¯• Fixed Frame ä¹‹åï¼Œæ‰€æœ‰çš„åæ ‡å˜æ¢æ˜¯å¦æ­£å¸¸ã€‚
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NThjNTU0MzYyNWJhMzk0NDZhYTdiZmQ3ZWZhMWIyZTJfOFZZd2JYMHFEQlNrZXNUdnJFbDlIRTZpTThZUjFyMlZfVG9rZW46RW1MN2JobWF4bzF1ZjB4MzFibGNKUTdUbm1nXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æœ€ä¸Šé¢æ˜¯èœå•åŒºï¼Œå·¦ä¾§æ˜¯æ’ä»¶æ˜¾ç¤ºåŒºï¼Œä¸­é—´æ˜¯3Dè°ƒè¯•åŒºï¼Œå³ä¾§æ˜¯è§†è§’åˆ‡æ¢åŒºåŸŸï¼Œæœ€ä¸‹æ–¹æ˜¯æ—¶é—´åŒºROS Timeæ˜¯ROS2æ—¶é—´ï¼ŒWall Timeæ˜¯ç³»ç»Ÿæ—¶é—´ï¼ŒElapsedæ˜¯Rviz2è¿è¡Œçš„æ—¶é—´ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzAxNTEyMzFkY2ExY2ZhZDkwODFlZDIyNWJmZDQxOTNfZzZIZlpXZHFrbVNtQUUwaUsxRU9qSXNiVGx2ZXlyYVNfVG9rZW46Qlc4OGJCSzR1bzR3cTR4QmZrQWN5Nk9zbnhlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¯ä»¥ä¿å­˜rviz2çš„é…ç½®ï¼Œä¹Ÿå¯ä»¥æ‰“å¼€é…ç½®

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODQ5YmVjZDNmM2NiMWI4NTFkYmYyYjYzZTU3NGRjZThfZGpQcmtsUUFodTA5VmtRNXp6dGJUQ3FQOGhSVm1hM1JfVG9rZW46VXVCemI5bGpabzZRNEN4YnJ0NmNUNVRqblRlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è®¾ç½®æ˜¾ç¤ºé¢æ¿

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTQ4YWQ2OGYyNDJiNGUwMTc1Y2FlZWU5Y2M5ZTg1NWZfbldaS3JyeDdTY3lXYkhKVFpLSmhrVWZGRHZzeDFVVUtfVG9rZW46WXJSS2J3YXN5b253emp4aTRlR2M0cHZ6bjJlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¯ä»¥è®¾ç½®å¹³é¢ç½‘æ ¼çš„ä¸ªæ•°

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjM3YWU2MDFiZDQ1MmU2YTA5ZWI3YmViNGYwZjdkOTlfU3RzRE5vZ0VyU2ZxOU9QTUQxQTZBbUs2UFZSbUtXckFfVG9rZW46RExXZ2JZd0g1b3FXTnJ4UGxiSWNjYlhHbkhnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¯ä»¥è®¾ç½®ç«–ç›´æ–¹å‘ç½‘æ ¼çš„ä¸ªæ•°

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTEzMzI4ZGNjMGIwYTVlYzZkNTYzN2JlMDBmYzdkZGZfb3N2cU5pVlR3STJORWNLak1qVWlLNnZ2dVZQcGF2UFlfVG9rZW46WXFtSmI3WFVzb1ZLREJ4cVpBM2NiQjRSbkxjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¯ä»¥è®¾ç½®ç½‘æ ¼è¾¹é•¿æ˜¯å¤šå¤§

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODJkYTExYTE0YWFlNmRkMzI2YmNjNzJhMTNkZmU2ODhfUjRMMkoyOE5oWjdjbzdGVUdXRGQ0UkZHem5pZG5Gem5fVG9rZW46SkRzcmI5UXJnb2pmVjh4STR4a2NxTDNtbnVnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ”¹å˜sRGBçš„4ä¸ªé€šé“

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2U1YmIxNzFjMGE2NGFiMjgyM2JiMGM4ZDNiYzgwY2Jfb2thQndqWjBXVlhuRml5a0gxWGlyNTFRak9nc281dXJfVG9rZW46SUtNV2J2bEVlb2JtUml4d0t1NGNTczZqblVPXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¯ä»¥æ”¹å˜è§†è§’

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzE4N2VkYTFiNjMzZmVjOGE0MTI2Y2U0ZDkzY2VhYjZfMnJ4RGQ0UExuVWtESEZMNGhZUkhJOTVKa08yWVpDNXpfVG9rZW46QnlpVmJSa1Vkb08zMm54ZWdCVWNQYVZQbjEwXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è®¾ç½®åç§»é‡ï¼Œå¦‚æœZæ˜¯-1ï¼Œé‚£ä¹ˆç½‘æ ¼ä¼šç›¸å¯¹äºåæ ‡ç³»ä¸‹æ²‰1ä¸ªå•ä½

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzVlMmQxMGRhODg2MmZhYTRiNGU5NGZhMzlkMmYzZmJfaVprUXRoazd1UWZyVzBzM2xQclUzczBZc3ltVTBkR0hfVG9rZW46WjQyU2JkOW1ob0VGeDF4aUNPYWNYSHo3bmZnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

Fixed nameä¸€èˆ¬æ˜¯æ ¹åæ ‡ç³»çš„åç§°

background colorå°±æ˜¯èƒŒæ™¯è‰²

frame rateæ˜¯åæ ‡ç³»çš„å‘å¸ƒé¢‘ç‡

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MWI5YWM4MjJkNTRiZjg0ZDA4ODcxYTA0NmY2MjVhY2JfdDJhUko3azNBVmxTNjFKMHpWdEdRcnhpcmsyeHg1RjFfVG9rZW46RDJpbWJRUjJqb25QWWZ4UlluZGN6S09wbmtzXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å…¨å±€çŠ¶æ€ï¼Œå½“fixed nameè®¾ç½®å¯¹åï¼Œå°±æ— è­¦å‘Šäº†

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGQwMDdmMDQ1NTk4NGViOTdkNWQ2YjMxMmVlMmE4YTVfbkxySzJJUjU2UFl1bFA1dG9CZGpFU3htNGVyNnRldjBfVG9rZW46T3V0WmJrQmlwbzBlQXV4VG1jbmMwMDM1bnFHXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è§†è§’åˆ‡æ¢(ä¸€èˆ¬é»˜è®¤)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTllZTgyOGZhZDBhNjJkMWFiNjc0ZjlkNzhiZTdjMDNfNGtOcmxLVWJDZzA5SzRNYUpqSkhPSkZQcDNUNVNxbWRfVG9rZW46TmpsSWJDVmFkb2NMYjF4WUdsYmNyYUtmbnZCXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¯ä»¥ç¿»è½¬Zè½´

**å¸¸ç”¨æ’ä»¶ï¼š**

<!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
| åºå· | åç§° | åŠŸèƒ½ | æ¶ˆæ¯ç±»å‹ |
|:---|:---|:---|:---|
| 1 | Axes | æ˜¾ç¤º rviz2 é»˜è®¤çš„åæ ‡ç³»ã€‚ |  |
| 2 | Camera | æ˜¾ç¤ºç›¸æœºå›¾åƒï¼Œå¿…é¡»éœ€è¦ä½¿ç”¨æ¶ˆæ¯ï¼šCameraInfoã€‚ | sensor_msgs/msg/Imageï¼Œsensor_msgs/msg/CameraInfo |
| 3 | Grid | æ˜¾ç¤ºä»¥å‚è€ƒåæ ‡ç³»åŸç‚¹ä¸ºä¸­å¿ƒçš„ç½‘æ ¼ã€‚ |  |
| 4 | Grid Cells | ä»ç½‘æ ¼ä¸­ç»˜åˆ¶å•å…ƒæ ¼ï¼Œé€šå¸¸æ˜¯å¯¼èˆªå †æ ˆä¸­æˆæœ¬åœ°å›¾ä¸­çš„éšœç¢ç‰©ã€‚ | nav_msgs/msg/GridCells |
| 5 | Image | æ˜¾ç¤ºç›¸æœºå›¾åƒï¼Œä½†æ˜¯å’ŒCameraæ’ä»¶ä¸åŒï¼Œå®ƒä¸éœ€è¦ä½¿ç”¨ CameraInfo æ¶ˆæ¯ã€‚ | sensor_msgs/msg/Image |
| 6 | InteractiveMarker | æ˜¾ç¤ºæ¥è‡ªä¸€ä¸ªæˆ–å¤šä¸ªäº¤äº’å¼æ ‡è®°æœåŠ¡å™¨çš„ 3D å¯¹è±¡ï¼Œå¹¶å…è®¸ä¸å®ƒä»¬è¿›è¡Œé¼ æ ‡äº¤äº’ã€‚ | visualization_msgs/msg/InteractiveMarker |
| 7 | Laser Scan | æ˜¾ç¤ºæ¿€å…‰é›·è¾¾æ•°æ®ã€‚ | sensor_msgs/msg/LaserScan |
| 8 | Map | æ˜¾ç¤ºåœ°å›¾æ•°æ®ã€‚ | nav_msgs/msg/OccupancyGrid |
| 9 | Markers | å…è®¸å¼€å‘è€…é€šè¿‡ä¸»é¢˜æ˜¾ç¤ºä»»æ„åŸå§‹å½¢çŠ¶çš„å‡ ä½•ä½“ã€‚ | visualization_msgs/msg/Markerï¼Œvisualization_msgs/msg/MarkerArray |
| 10 | Path | æ˜¾ç¤ºæœºå™¨äººå¯¼èˆªä¸­çš„è·¯å¾„ç›¸å…³æ•°æ®ã€‚ | nav_msgs/msg/Path |
| 11 | PointStamped | ä»¥å°çƒçš„å½¢å¼ç»˜åˆ¶ä¸€ä¸ªç‚¹ã€‚ | geometry_msgs/msg/PointStamped |
| 12 | Pose | ä»¥ç®­å¤´æˆ–åæ ‡è½´çš„æ–¹å¼ç»˜åˆ¶ä½å§¿ã€‚ | geometry_msgs/msg/PoseStamped |
| 13 | Pose Array | ç»˜åˆ¶ä¸€ç»„ Poseã€‚ | geometry_msgs/msg/PoseArray |
| 14 | Point Cloud2 | ç»˜åˆ¶ç‚¹äº‘æ•°æ®ã€‚ | sensor_msgs/msg/PointCloudï¼Œsensor_msgs/msg/PointCloud2 |
| 15 | Polygon | å°†å¤šè¾¹å½¢çš„è½®å»“ç»˜åˆ¶ä¸ºçº¿ã€‚ | geometry_msgs/msg/Polygon |
| 16 | Odometry | æ˜¾ç¤ºéšç€æ—¶é—´æ¨ç§»ç´¯ç§¯çš„é‡Œç¨‹è®¡æ¶ˆæ¯ã€‚ | nav_msgs/msg/Odometry |
| 17 | Range | æ˜¾ç¤ºè¡¨ç¤ºæ¥è‡ªå£°çº³æˆ–çº¢å¤–è·ç¦»ä¼ æ„Ÿå™¨çš„è·ç¦»æµ‹é‡å€¼çš„åœ†é”¥ã€‚ | sensor_msgs/msg/Range |
| 18 | RobotModel | æ˜¾ç¤ºæœºå™¨äººæ¨¡å‹ã€‚ |  |
| 19 | TF | æ˜¾ç¤º tf å˜æ¢å±‚æ¬¡ç»“æ„ã€‚ |  |
| 20 | Wrench | å°†geometry_msgs /WrenchStampedæ¶ˆæ¯æ˜¾ç¤ºä¸ºè¡¨ç¤ºåŠ›çš„ç®­å¤´å’Œè¡¨ç¤ºæ‰­çŸ©çš„ç®­å¤´åŠ åœ†åœˆã€‚ | geometry_msgs/msg/WrenchStamped |
| 21 | Oculus | å°† RViz åœºæ™¯æ¸²æŸ“åˆ° Oculus å¤´æˆ´è®¾å¤‡ã€‚ |  |

ä¸Šè¿°æ¯ä¸€ç§æ’ä»¶åˆåŒ…å«äº†è¯¸å¤šå±æ€§ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®æ’ä»¶å±æ€§æ¥æ§åˆ¶æ’ä»¶çš„æœ€ç»ˆæ˜¾ç¤ºæ•ˆæœã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmM2M2I0MjE2ZmZkYzdmMjU2ODg0MDllZmY4ZjY2MGJfeTIxYkhXUU12a2h4bzZQZ0FvRDlRSHdSclU2T3drbWZfVG9rZW46UGQwOWJSd1pZb2RBcTR4aGR3c2M5cWNybmhlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

Imageæ˜¯æ‘„åƒå¤´æ•°æ®æ’ä»¶

LaserScanæ˜¯æ¿€å…‰é›·è¾¾æ•°æ®æ’ä»¶

TFæ˜¯åæ ‡å˜æ¢æ’ä»¶

RobotModelæ˜¯æœºå™¨äººæ¨¡å‹æ’ä»¶

```TypeScript
ros2 run rviz2 rviz2 -d xxx.rviz
#å¯ä»¥è¯»å–è‡ªå·±ä¿å­˜çš„rvizé…ç½®
```

3.  ## rviz2é›†æˆURDFåŸºæœ¬æµç¨‹
    
    1.  ### Â Â æ¡ˆä¾‹åˆ†æ
        
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTJiYTU5Y2JkYjNlMGE0ZWM2NTMzZDNhZjI0NzEzYThfc3ZtSFNNMHN0QnZSUElQMERpVFE2MVhndkwxUk1vN3BfVG9rZW46SnJPQmJuZXdXb0NEVnd4Y2FReWNCUGpQblFkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDFiMWFhYzFlODg5ZWZjNjJhMTBhYzgwNjM5MGE5NTZfRWw1NFlLbXFlZDBOOTh6MURJQXJPcmxSVmJXeWtwTDBfVG9rZW46SW1JS2Izc0l3b1JvNnN4SkNiVGM2SDdwbkliXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzcwZGFmOGJiMzkwNjU3ZjdhMjRkZTJkOGY1M2QzZDNfZ2tGcG5MdTVLTFVjR1pXNkhmRk5PNkJsdHIzblBuZVhfVG9rZW46UTBtcmJGbkFEb2FFV2V4aXNRYmNRRTlWbkxiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTY3MDRiNWU2M2Y2OTliOWRjNTAxODY3YjA1MjU4OTFfY2IwbVF6T01tVDhPZjBZeW93UzJ6YWhxTHh6amw3a3dfVG9rZW46Wk00dGJIeUJob1VyRmZ4ZkJ4NmMwZ3o2bmdmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjdiMTUzYTY2YmExZDY5MWU5MjFkYzE0ZmFmZWJmYWVfVko1REp5dW9ZeVU3TWJVMFZ0TjZUeXpNTzZZTDRXSEhfVG9rZW46VTJiNWJlYjRRbzJqa0R4Q003amN2azIybjZkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¯·è°ƒç”¨å¦‚ä¸‹å‘½ä»¤ï¼Œå®‰è£…æ¡ˆä¾‹æ‰€éœ€çš„ä¸¤ä¸ªåŠŸèƒ½åŒ…(å¯ä»¥æ§åˆ¶æœºå™¨äººå…³èŠ‚è¿åŠ¨)ï¼š

```Bash
sudo apt install ros-humble-joint-state-publisher
sudo apt install ros-humble-joint-state-publisher-gui
```

ç»ˆç«¯ä¸‹è¿›å…¥å·¥ä½œç©ºé—´çš„srcç›®å½•ï¼Œè°ƒç”¨å¦‚ä¸‹å‘½ä»¤åˆ›å»ºC++åŠŸèƒ½åŒ…ã€‚

```Bash
ros2 pkg create cpp06_urdf --build-type ament_cmake
```

åŠŸèƒ½åŒ…ä¸‹æ–°å»º urdfã€rvizã€launchã€meshesç›®å½•ä»¥å¤‡ç”¨ï¼Œå…¶ä¸­ urdf ç›®å½•ä¸‹å†æ–°å»ºå­ç›®å½• urdf ä¸ xacroï¼Œåˆ†åˆ«ç”¨äºå­˜å‚¨ urdf æ–‡ä»¶å’Œ xacro æ–‡ä»¶ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmQzNGU5YWVjMGUwZmZmYzE1OGJmZDg4NDhkMTQ4YjBfckdnUDlZZUkxMkVVZ3A3RThnVldNeUdRR0x2MlBPRWhfVG9rZW46TU5rSGJXbGJPb0Zaa3p4UXhrOWN5UUhjbjRkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

launchå­˜æ”¾launchæ–‡ä»¶

urdfæ–‡ä»¶é‡Œé¢å­˜æ”¾urdfä¸‰ç»´æ¨¡å‹æ–‡ä»¶

mesheså­˜æ”¾stlæ¨¡å‹

xacroå¯ä»¥ç®€åŒ–urdfæ–‡ä»¶ï¼Œå¹¶ä¸”å¢å¼ºå…¶çµæ´»æ€§

rvizå­˜æ”¾rviz2çš„é…ç½®

2.  ### Â Â æ¡†æ¶æ­å»º
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTFmYWU1MTRjNjRiYzNmN2Y5MDRkMjlmMTQ1YzMzNzBfZmx3enN6Z2VyV3lVTVhIZXRCdk5zQlNaM2hsRk5QaXdfVG9rZW46WTNja2JSbk1pb2hMOHp4NVN3TGMza3pjbndkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```XML
<!-- 
    éœ€æ±‚ï¼šæ˜¾ç¤ºä¸€ç›’çŠ¶æœºå™¨äºº
 -->
 <robot> name="hello_world"
   <link> name="base_link"
     <visual>
       <geometry>
         <box size="0.5 0.2 0.1"/>
       </geometry>
     </visual>
   </link>
 </robot>
```

Â Â æ ‡å‡†çš„XMLæ–‡ä»¶

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODg2NWQyY2Q3NDFlYTMyODc1ZTQ4ZGI1ZDc0NjU0ODFfZ0hudEl4cjM2QnF4NDNaU3ZzRTZtV0J5TjdJc1cweDFfVG9rZW46QjUxN2JtUW5xb05HeFR4akxsTmM4SnNxbmtnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjRkMmZhZmI2MDc4YzNjODI2MjcwZTcxMmQzOTE0NjFfM2dVdmE4WlhTdFc0eUZVUTAxSkRzSnoxcVdvZGVXVFZfVG9rZW46R2hNU2JHR1NRbzhSZkR4NUFKUWNWV04xblliXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Python
from launch import LaunchDescription
from launch_ros.actions import Node
import os
from ament_index_python.packages import get_package_share_directory
from launch_ros.parameter_descriptions import ParameterValue
from launch.substitutions import Command,LaunchConfiguration
from launch.actions import DeclareLaunchArgument

#ç¤ºä¾‹ï¼šros2 launch cpp06_urdf display.launch.py model:=`ros2 pkg prefix --share cpp06_urdf`/urdf/urdf/demo01_helloworld.urdf
def generate_launch_description():

    cpp06_urdf_dir = get_package_share_directory("cpp06_urdf")
    default_model_path = os.path.join(cpp06_urdf_dir,"urdf/urdf","demo01_helloworld.urdf")
    default_rviz_path = os.path.join(cpp06_urdf_dir,"rviz","display.rviz")
    model = DeclareLaunchArgument(name="model", default_value=default_model_path)

    # åŠ è½½æœºå™¨äººæ¨¡å‹
    # 1.å¯åŠ¨ robot_state_publisher èŠ‚ç‚¹å¹¶ä»¥å‚æ•°æ–¹å¼åŠ è½½ urdf æ–‡ä»¶
    robot_description = ParameterValue(Command(["xacro ",LaunchConfiguration("model")]))
    robot_state_publisher = Node(
        package="robot_state_publisher",
        executable="robot_state_publisher",
        parameters=[{"robot_description": robot_description}]
    )
    # 2.å¯åŠ¨ joint_state_publisher èŠ‚ç‚¹å‘å¸ƒéå›ºå®šå…³èŠ‚çŠ¶æ€
    joint_state_publisher = Node(
        package="joint_state_publisher",
        executable="joint_state_publisher"
    )
    # rviz2 èŠ‚ç‚¹
    rviz2 = Node(
        package="rviz2",
        executable="rviz2"
        # arguments=["-d", default_rviz_path]
    )
    return LaunchDescription([
        model,
        robot_state_publisher,
        joint_state_publisher,
        rviz2
    ])
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2VlZTJlOTgwMTk2NmQ0YjdiNTRkNzcxMTQ5YWYwMDBfVml5OVhRdDM2S3F4UzV5RmtkSWFrcE9YZ2x3ZVVOSmtfVG9rZW46TXJEUmJYbjFob2UzcjN4ZlZOVGNFNUs3bmdlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

```XML
<exec_depend>rviz2</exec_depend>
<exec_depend>xacro</exec_depend>
<exec_depend>robot_state_publisher</exec_depend>
<exec_depend>joint_state_publisher</exec_depend>
<exec_depend>ros2launch</exec_depend>
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTk5MWM0YTM0YmY0ZjM0ZDZhNzJkM2RlY2FhOWU3ZjRfQVBmM2VLUlgwQ05ackNvamR3RnZWWU9PeU1yTkN2VUpfVG9rZW46T1lrbWIxWEQ5b0Q4TlB4a3JvOWNUbGZSbjJiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```CMake
install(
  DIRECTORY launch urdf rviz meshes
  DESTINATION share/${PROJECT_NAME}  
)
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDRhZWQ2M2VhOWRhOWEyZTc1MWIzMjFhY2E4MWJhMThfV005NE5HanlFWlRxQ0VEdGl1ZVhrbGVDNnFFcjlLUGxfVG9rZW46Q2FOU2JVQ290bzFQVXh4OTU1bGNkNDNmbnFmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Bash
colcon build --packages-select cpp06_urdf
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmY5NmQ1YzcxNzA4ZThjYTJmOTMxMDkzOTFmN2E1OWRfY2FERHhrN1NQbHlwOEUzR1VBQndGNGpVMzRRbDlTdTdfVG9rZW46Wng5Q2JVdE0xb044ajR4ZzlmOGNZMWNtbkFlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Bash
source install/setup.bash
ros2 launch cpp06_urdf display.launch.py
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODU1OWMyMzFhNjJiYmVmYWYxMjg4YTA5MjI4ZWM3OTlfUFNUQnpZbkVUUFAwNFRLYkJKN2lYZ3M3V3pzWnFaaWFfVG9rZW46RUw5YmJxeXJ4b3ZTaGl4ZjBpUmN4Z2VXbjliXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

Â Â  **å°æç¤ºï¼š**

Â Â åœ¨æœ¬ç« çš„åç»­æ¡ˆä¾‹ä¸­ï¼Œæ‰€æœ‰å®ç°éƒ½éµå¾ªä¸Šè¿°æ­¥éª¤ï¼Œåœ¨åç»­æ¡ˆä¾‹ä¸­æˆ‘ä»¬åªéœ€è¦å…³æ³¨ urdf å®ç°å³å¯ï¼Œlaunch æ–‡ä»¶å’Œ é…ç½®æ–‡ä»¶æ— éœ€ä¿®æ”¹ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGE2MWVmM2U0OTAxYTYxMzJjNmI2OTAwNWUyM2Y0ZmVfNU1uVVA3VlRhemhWaGRXQm16aGtxQWo5M1BqVGdZYm5fVG9rZW46Q3ZaVGJJUExCb0VydTl4dEhlamM3c3RpbjBmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTc0YjNjZDVmYjgxMmIyMTNmOGU4NjMyOGNlZTY2ODRfWlFaNHhQZnBZMHVHS3Jrem1WTWJOTmRpRVl3R2Z4MVpfVG9rZW46R1RsSmJVMEhyb0dsd3R4d3RLMGMwM2RkbmJiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWM2ZmI2YzMzM2E1OTlmZTM2ZTljMWRlYzcyNmIwOWRfRm5jVml3VU5DdXlaWWNFMUEwT2ZEWGgyM1BtcDc4R3lfVG9rZW46Vk5uV2I3akhhb1FadWF4NHFPZGNVdFI3bjhjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YThiMDhmMTI1NWYwZjYyNTFkNDZhNjliYTgzNWEwZTRfV2g0T2xtSHRZcGhhalU0enZsSjVLMmtIUFVRa212bVBfVG9rZW46SFN5ZWJ0N0x6b2w3U1l4M09mQ2N1aGFMbjJPXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

3.  ### Â Â urdfæ–‡ä»¶
    

Â Â æŒ‰ctrl+\\ç”Ÿæˆæ³¨é‡Š

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGRhMDQ3MDdlMWFjYmFlY2Q3NzhhMWEyZWFhN2RmMmZfUkVLbGRCSmdWNWJGcE1kZ0ZWNWgxbVRablpnRkdXOFZfVG9rZW46WkhLbWJXQ24zb0pMM3h4WmVnN2M2WkI0bkJoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTVkNDEwMDg5ZTE2MzI2MmQ1MDhhNTBmMjYwZTExODRfdnNWUmVFaURFenZENnR6WmtzUVJwWVZEYjNDeXdDOFNfVG9rZW46QnZRaGJBMmR6b2NJY0x4Y1FhWmNMd1U5blFlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YThmODRmNzVkMTcxZDg1YTg4NmUyZTE5MjFmZmNhYTlfQ0dGNmxhZ0szdUVncmJ5MXZsSGdhOW85Y0FrMDB2WVZfVG9rZW46VjFmUWJCYVJGb1NRT0h4a0VHcWNhZDJJblhnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å› ä¸ºå®‰è£…è¿‡urdfæ’ä»¶ï¼Œæ‰€ä»¥æœ‰æç¤ºï¼Œéœ€è¦åˆ›å»ºrobotæ ¹æ ‡ç­¾

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzEwMTM0YzA5ZmM1MmE1M2I5NTNmZmM0ZTY1Zjg4ODBfVjQ1NThaWXRlSWpDa3ZwekNtcjNNc095aGpsTWIwVHlfVG9rZW46QlFjbmI1akJtb1c2cG14WXFha2Nsc2dabkxlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ç¬¬ä¸€ä¸ªå±æ€§ä¸ºæœºå™¨äººåå­—

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTZiMTAyOTk3NjFjNDg4ZGQyNTY5MGU0MTI2M2RlMTJfa2RCblNhcmRSMXd5cWx5T0twYkZuTzhBZTJ4eU1RRXhfVG9rZW46VDA2VWJDcUQwb2FQc214SFdnSGNIYng5bjhmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ç¬¬äºŒä¸ªæœ‰ä¸ªxml namespaceï¼ŒæŒ‡å‘xacro

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWI5NWFmYTdiMGYxOTIxMGNlZjE1ZWJkNzVlMDNiNTZfMDNQcFZlV05JNUtWUndyczlOd1N1bTJwSGVhYlpyclRfVG9rZW46SmV1SGJRSmRXb3g3NWh4MXBEYWNhUWpkblRlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWRhZTMzMDM4MWZmYmVkZjY2NjA2Y2Q0ZWM0NWM3YWZfSXNua0s3UEk1VWcyQkJmdGg0TmhLRnR1UjF3MTVXMzJfVG9rZW46QXlSY2J6d2xlb2taV1d4a0o5NWNvalJXbk9nXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ç¬¬ä¸‰ä¸ªæœ‰ä¸ªxml namespaceï¼ŒæŒ‡å‘xacroï¼Œç„¶åè¿˜æœ‰ä¸€ä¸ªæœºå™¨äººåå­—

(æš‚æ—¶ç”¨æœ€ç®€å•çš„ï¼Œä¹Ÿå°±æ˜¯ç¬¬ä¸€ä¸ª)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2VjOWE2MmNmZDZkMzI0ZjExYmJmOTA2NjFlMjJhNjhfWmthNXBaMHR1STlxOWRsTzhuRkhCNzQ0bUFPRzNOOWVfVG9rZW46RFBITGJJNGxZb202cmN4S0txTWNpamxibnhkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

linkæ ‡ç­¾å«è¿æ†ï¼Œä¹Ÿéœ€è¦èµ·ä¸ªåå­—ï¼Œè¿æ†ä¸€èˆ¬æŒ‡åˆšä½“éƒ¨åˆ†

linkæœ‰ä¸ªå­é›†æ ‡ç­¾ï¼Œå«visual

visualæ ‡ç­¾ä¸‹è¦å†™æœºå™¨äººå½¢çŠ¶

ç„¶åè¯¥æ ‡ç­¾ä¸‹åˆæœ‰ä¸€ä¸ªå­é›†æ ‡ç­¾å«geometry(å‡ ä½•å½¢çŠ¶)

ç„¶ååˆæœ‰å­é›†æ ‡ç­¾å«box(çŸ©å½¢ä½“çŠ¶)åé¢çš„sizeåé¢å¯¹åº”é•¿å®½é«˜

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjliZGQ1ODc2NTljNDUwODI3NWQwODlmYjk4MWEyOWNfbFUzU2laOEhwYlNIRFA3aENrWUFWWUJZM1dhNEdVa0RfVG9rZW46UEZGN2JhaW9Gb3Z6d0x4R3NRZmNOcW83blBiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```XML
<!-- 
    éœ€æ±‚ï¼šæ˜¾ç¤ºä¸€ç›’çŠ¶æœºå™¨äºº
    é•¿:1.0m
    å®½:0.5m
    é«˜:0.1m
 -->
 <!-- æ ¹æ ‡ç­¾ -->
 <robot name="boxrobot"> 
  <!-- è¿æ† -->
    <link name="base_link"> 
      <!-- å¯è§†åŒ– -->
      <visual>
        <!-- å‡ ä½•å›¾å½¢ -->
        <geometry>
          <!-- é•¿æ–¹ä½“ -->
          <box size="1.0 0.5 0.1"/>
        </geometry>
      </visual>
    </link>
  </robot>
```

4.  ### Â Â xacroå·¥å…·(å°†ç£ç›˜æ–‡ä»¶åŠ è½½åˆ°ROS2ä¸­çš„å·¥å…·)
    

æœç´¢æ˜¯å¦å®‰è£…è¿‡xacro

```Bash
ros2 pkg list | grep -i xacro
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGI0MjlkNjZmYTViNTgzNjhkMmMwOWI2OTE1NTQxOGZfcHAzVkJCWGFwMFAyOEFtczNrVGpNc210ME9ab0t3WUlfVG9rZW46R0tNQmJIUE5sbzNIZG54WE9IeGNkNTFmblBoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¦‚æœæ‰“å°äº†xacroè¯´æ˜å®‰è£…äº†ï¼Œå¦‚æœæ²¡æ‰“å°ï¼Œåˆ™è¦æ‰‹åŠ¨å®‰è£…

```Bash
sudo apt-get update
sudo apt-get install ros-humble-xacro
```

ä½¿ç”¨xacroè¯»å–æ–‡ä»¶

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTFlNTVkNzZmODQzOGIzMjBmNDRjODAxZjY2ZTM5MTlfQkVWUUNrM2RVRkhkczlXM0JPT0F5YkVyTWdDQUFWVGxfVG9rZW46TXJONGI2a2xpb0w0R3Z4SHBDOGM3VEJpblZmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ–‡ä»¶é‡Œçš„å†…å®¹è¢«è¾“å‡ºåˆ°äº†ç»ˆç«¯ï¼Œå’±ä»¬ä¸€èˆ¬é›†æˆåˆ°launchæ–‡ä»¶ä¸­ã€‚å’±ä»¬åœ¨ç»ˆç«¯é‡Œæ˜¯åªèƒ½æŸ¥çœ‹å†…å®¹ï¼Œä½†æ˜¯ç”¨launchå°±å¯ä»¥æŠŠæ–‡ä»¶å¼„åˆ°èŠ‚ç‚¹é‡Œï¼Œä¹Ÿå°±æ˜¯é›†æˆåˆ°ROS2é‡Œã€‚

5.  ### Â Â launchæ ¸å¿ƒå®ç°
    

æ ¸å¿ƒå®ç°å°±ä¸‰æ­¥ï¼ŒåŠ è½½æœºå™¨äººæ¨¡å‹ï¼ŒèŠ‚ç‚¹å‘å¸ƒéå›ºå®šå…³èŠ‚çš„çŠ¶æ€ï¼Œå¯åŠ¨rviz2èŠ‚ç‚¹

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjM2YWI0N2UxODVkNTdmZWY4NDE2ZjRlM2M1M2JiYzZfTEltTGIyNW1DMmhxTHJBeW9uem9sVlNHWlIzeUNGTTNfVG9rZW46VjlmdGJRT2Job0VadGZ4am96MmMxM0dnbmhiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

åˆ›å»ºrviz2èŠ‚ç‚¹å¾ˆç®€å•ï¼Œå°±å£°æ˜ä¸‹åŒ…åï¼Œå£°æ˜ä¸‹executableã€‚

åŠ è½½æœºå™¨äººæ¨¡å‹æ¯”è¾ƒå¤æ‚ï¼ŒåŠ è½½æœºå™¨äººæ¨¡å‹ï¼Œä¹Ÿè¦åˆ›å»ºä¸€ä¸ªèŠ‚ç‚¹ï¼Œ

ç„¶åæœ‰å‚æ•°ï¼Œå‚æ•°é‡Œæœ‰ä¸ªé”®å«robot\_descriptionï¼Œç„¶åè¿™ä¸ªé”®å¯¹åº”ä¸€ä¸ªå€¼

å€¼æ˜¯ParameterValueå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡é‡Œæ‰§è¡Œäº†ä¸€ä¸ªæŒ‡ä»¤ï¼Œå«xacroï¼Œç„¶ååé¢åˆæœ‰ä¸€ä¸ªLaunché…ç½®ï¼Œå…¶å®å°±æ˜¯urdfæ–‡ä»¶çš„è·¯å¾„ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjE5N2EyNjExMzI1NTg1M2NjODA1ZDZlMjQ4NmJlYzhfVEE0WHYwUEdzQlI1SDhCQ2N1REhJQ3lWTHh0amF5RXdfVG9rZW46U25PemI4dGdDb09lYXh4NUVUeGM1VzVhbmNjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDRlNGUxNzFhNDFmOThjYjE1NzFkNmUxMzAzOWE0ZWJfZmFST2RLdUJSa1RWQklNR2xxUnhqUXQ1bzlIQ0t3UXVfVG9rZW46TVl2OWJkeXRlbzg1UTR4UEc5MWNmemgybk9oXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzVlNGI5OTZlMDUwYjU4YThhMmQwMDQ5YTg1Y2RhZmNfeXpFTnd4UjBrdTdLU3hza2JyMmk2VG5zdGNvZzZ2c1NfVG9rZW46QlFsT2JFelNybzBFU0V4Snc4TWNCejR2bk5iXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MWQwNzZmMDUyNjYxYjI4Yjk0NGJlOWZkZDgyNzY4MGVfenRjdjBuQkhvYUJ3WG9wYlhOTWp1cnExamZXNU5vc0pfVG9rZW46S3BoVmIweHJjbzNWdXZ4bWRsN2N0SHp4bjhjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™ä¸ªå€¼ï¼Œå…¶å®å°±æ˜¯URDFæ–‡ä»¶é‡Œçš„å†…å®¹ï¼Œä½†æ˜¯å†…å®¹å¤ªé•¿äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠå®ƒå°è£…æˆä¸€ä¸ªå¯¹è±¡ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDk0OTY1MTJlNzAwOTc3NGFmMzZjNDJlMmFhOTNlZGNfNDhZcWFMbG1EOWs2N1M1Nml0OVpIQTdjWVFkMU5kTE9fVG9rZW46UG5pTmJ1MWRHb2Jucjd4dVc2MWNUcldNbmxlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODZlZTdmOWI3Yjg1MDkwZDhiNjEyODlhOWZmYzU1MjZfcGFyU0pETlBBTndxeTZteVhWQWQ3UmRoQXdHQ0Y1T3VfVG9rZW46R3pGR2JodDFWb21wU3Z4VVVSVGNNMjR5bjNnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å‘½ä»¤è¡Œï¼Œä¸èƒ½ç›´æ¥å½“å¯¹è±¡å‚æ•°å€¼ï¼Œæ‰€ä»¥è¿˜è¦å°è£…

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2RmMTQ4NTUxMGE4M2I0ZjBkYTk2Y2RjMWZmMTJhMWJfWW9iN3dCcU5OWWFkY1plWnRxcElDb0IwYzhzVmRubXlfVG9rZW46VzZzWGJUNXplb011bDd4c1lnVmNGeVZ6bmhmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

Comandæ˜¯ä¸“é—¨å°è£…ç»ˆç«¯æŒ‡ä»¤æ‰§è¡Œçš„

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjJhNTRhY2RkOGY5MTJiOGMwYjZkN2QwYzg4NTdjZGNfYkhDaTR4Y3F4bHQ3d3V4V1pRM2RhT3AxWWJVNGNtZzNfVG9rZW46WnMzU2JxTHB1b1hCWDJ4b01UcGNoVjUybjVkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWUyNTY1YmU1MGUwZGJkMTk2MTA2ZWUwYWI2YmM1M2RfZEZoT1oyNTlDWmNXRHNOdlZ0cWt1WmFRYnJyanZMNmdfVG9rZW46UVcyeWJTMnRJb0drMW54REF2U2NmbFc4bkFlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è®°å¾—xacroåé¢è¦æœ‰ç©ºæ ¼ï¼Œè¿™é‡Œå¡«è·¯å¾„

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzQ3YzAyNGNiYzJjNjFiMjA4NWQzZTIwYjg1NDM2ODBfb2x5c1FZQ09vVWVxQ3ZIQXpNaXNoZnJ2OG9lMU9EeXBfVG9rZW46S3BNeGI0WFM5b1ZUTUp4VmtRZmNaSURPbm9nXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjZlZjg2M2Y3MDZhMTU2M2I4MGE3YWYzNzI0NzYzMmJfU3BYVmVMeDlORTFXZ3dkMlVpTWZ1T1NxVFRoOW4xN1RfVG9rZW46RXVXa2JDeTRWb05ZazV4ZEVIY2N6RHN0bnNkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ­¤æ—¶å·²ç»å®šä½åˆ°cpp06\_urdfçš„shareè·¯å¾„ä¸‹çš„cpp06\_urdfè·¯å¾„äº†ï¼Œè¿”å›çš„ä¹Ÿå°±æ˜¯è¯¥è·¯å¾„çš„å­—ç¬¦ä¸²

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmQxMDI0YTZmM2FiYjg0MTQxYWZiMWU2ZmIwZWMxYzlfSXJ0dkduVzdZb2oxT2N0c2hKOXo4Ykw4T1YwUE5uQWNfVG9rZW46T2o0ZGJzdmROb1dsV254QjdxV2M5OFJEbmVmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzYzNTYzOGQxNDJlOWNhNWZiMjkyNjJkZGEyODgwYmFfVkdwMWxwSzJwcEE5NmlBWEdxNVlQV2VYMDlwWWM2T2pfVG9rZW46TW16amJxNzBZb3hHbml4eVVIRGMyYWVZbk1kXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDQwZmEyM2ZlYmFmMzQ2MmNiMWUyZjE4NzZlMmE0ZWJfc2ZLMjlmb3VQT1E1a1ZuMzFGMEV2RWFweHkzc0NoUlZfVG9rZW46TmVzTmJTOFlMb1ExTmF4WDB6T2NRVkh5bmxjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Python
from launch import LaunchDescription
from launch_ros.actions import Node

# å°è£…ç»ˆç«¯æŒ‡ä»¤ç›¸å…³ç±»
# from launch.actions import ExecuteProcess
# from launch.substitutions import FindExecutable
# å‚æ•°å£°æ˜ä¸è·å–
# from launch.actions import DeclareLaunchArgument
# from launch.substitutions import LaunchConfiguration
# æ–‡ä»¶åŒ…å«ç›¸å…³
# from launch.actions import IncludeLaunchDescription
# from launch.launch_description_sources import PythonLaunchDescriptionSource
# åˆ†ç»„ç›¸å…³
# from launch_ros.actions import PushRosNamespace
# from launch.actions import GroupAction
# äº‹ä»¶ç›¸å…³
# from launch.event_handlers import OnProcessStart,OnProcessExit
# from launch.actions import ExecuteProcess,RegisterEventHandler,LogInfo
# è·å–åŠŸèƒ½åŒ…ä¸‹shareç›®å½•æˆ–è·¯å¾„
from ament_index_python.packages import get_package_share_directory

from launch_ros.parameter_descriptions import ParameterValue
from launch.substitutions import Command

p_value = ParameterValue(Command(["xacro ",get_package_share_directory("cpp06_urdf") + "/urdf/urdf/demo01_boxrobot.urdf"]))
robot_state_pub = Node(
    package="robot_state_publisher",
    executable="robot_state_publisher",
    parameters=[{"robot_description":p_value}]
)

rviz2 = Node(
    package="rviz2",
    executable="rviz2"
    )

def generate_launch_description():
    return LaunchDescription([robot_state_pub,rviz2])
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODQ4ZDFmYmU5MGNmNDE1NDdlMGIzZTcxMTM3ODI4YjFfaGlON0hXaFBNcGxXZno3Q3hwV1phUGdKRkZSbFY3dkJfVG9rZW46Sk1aaGIwb0FBb1FsaGZ4cW5vcWMxVWprbkhkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTI1MTZmMzQ4ZWQxOWYzMDc3MDA4YzRhZGEzMjk3YmZfUTNUVlhnSzdVVWs1RFlXUDNHQll1ZzB3V1Z0MVVqSmNfVG9rZW46UlRBcWJ1czdPb0pickd4SVNaZGNEVjYzbjlkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2Y2MWZlYmVkMGZjYTI0OWZlMzg4MjdlYWRmOWM5NzRfOG1SQ0Y5TUFjeDZZbUxaRlhqaTQ5RjF2Zlp4MTBoSjVfVG9rZW46Q3A3aGI0RW0zb1BZcWx4T2hyemNVU2pFbjllXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODcwZjFhOTY1NzI2ZWU0NjFhZjdjYmQ0Zjg2YjBiNGRfdnRRU2pkYjduemg4SWEyN1d0Uk5NcVZ3RXVaYjJWdDRfVG9rZW46QjdmbGJ0SWRwb3JzenN4Zjg4bWNMUFBzbjVkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ç‚¹å‡»å·¦ä¸‹è§’Addæ·»åŠ RobotModelæ’ä»¶

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWQwMmZkYjVhNzU2NmU4ZWJiZjNlZjg4ZTgzNzFmZjJfd3FkNjI4V2lLTFhUdUtGWDFhbVpVMGNVaXVvaDQ0RllfVG9rZW46RzR2M2I3RjNkb1UxVWl4Vm5tU2NXaDNVbnpoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjIyMWRhNDA5NDQwY2Q4ZjdlZTJiZTZlMzNkNDQ3ZTZfMXRGWmd6cFFYdlBnVFI0eFlBWFR0dlBVUWoyYTJtSGhfVG9rZW46VXhhSGJLZHZnb0RnSmJ4TnBmZ2NwSFRzbnVnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2I0OTI5NGZmYTA3YjM1YTQ1N2FhZGJjMWE1NTM0NDBfS1hVa3JKWERPdUQ3TGMyTUdYSk5KczJFUTlWVm9QSGxfVG9rZW46TDdKa2JKQTh3b0hUOUt4NnF0eGNjOFY4bmRVXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODc4MWIwYTI5YTg2NDg5ZGYwOTQxZTRiYWI4YWM5OGNfQkV0bXZJQmt2UkRqNnppVkh1b2FJQ3Q3TFVNVTdiRnlfVG9rZW46Ujg1N2JLOUZhb041RUJ4clpFMmNha0NWbmlTXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTkzYzdhZTE0ZDI4MzhlN2M1NmQxZTg0NjdiZWRmNmZfTFRJQ1RUSXY4emQ1cHdmeWxRUTRlYmN4YUFjSTNUTXVfVG9rZW46RTQ5bWJTYVpRb2NxczF4SnF5cmNJaUFrbjJnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDI2MWUwNDljYjVlOGRjZjBlOTYxMmI0ZTViZTYwZmFfVFJlREp2VWdBSHp5WHNZMUYyWVMyZVhiWkNCRUNSVmZfVG9rZW46RW5lWGJoaEJQb1o1UFV4TFVURWNJN0xqblliXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjJmZDRmMGEwZDFkOGVhN2M1N2ZiOTQ0YWE4ZDhmMDNfeUZwMXZPeEM1MkdrM2NUY1kwSDQ0cHRLVUU2bXRZWEZfVG9rZW46QXBuNWJ4NmhFb2xYQWZ4bFJkZ2NBUWd2bk5lXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ–°å»ºä¸€ä¸ªåæ ‡ç³»æ’ä»¶ï¼Œé•¿æ²¿ç€Xï¼Œå®½æ²¿ç€Yï¼Œé«˜æ²¿ç€Z

6.  ### Â Â launchä¼˜åŒ–è¯´æ˜ä¸å®ç°
    

æˆ‘ä»¬è¿˜éœ€è¦ä¼˜åŒ–ä¸‰ä¸ªç‚¹ï¼Œç¬¬ä¸€ä¸ªæ˜¯æ‰“å¼€å…³èŠ‚èŠ‚ç‚¹ï¼Œç¬¬äºŒæ˜¯è®¾ç½®rviz2é»˜è®¤é…ç½®æ–‡ä»¶ï¼Œç¬¬ä¸‰æ˜¯Launchæ–‡ä»¶ä¸­æˆ‘ä»¬å°†è¯»å–çš„urdfæ–‡ä»¶å†™æ­»äº†ï¼Œæ‰€ä»¥è¦ä¼˜åŒ–ç»“æ„ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWFjN2IzZTVmNjg4MTBjOGI3MWI0YzZhYjY2ZTA2N2FfdU01cDI3UmxGNjZubXlMMUIydFdNdUt5djF5aEluZGhfVG9rZW46UGZwUGJieDh1b3R3Rm94THZDS2N6ZmpKbnVlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿˜è¦å¯åŠ¨è¿™ä¸ªèŠ‚ç‚¹ï¼Œæ¥æ§åˆ¶å…³èŠ‚è¿åŠ¨ï¼Œå¯ä»¥æ”¹æˆjoint\_state\_publisher\_guiï¼Œå‡ºç°å›¾å½¢åŒ–ç•Œé¢ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2NhZjc2MjE4YjZkMDM5MDkxZGNhYmViN2M5MzVhMzBfTTB0SkNrNmh0bHFUSERaS1JwQ1ExeDV3NDViV0VERG9fVG9rZW46U1lXTWJZa1dhb0kzTm94RWMwcmNGd2dobktnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2RiYzk4ZDBhNjJlNGY4YTkzODFiYjdhMDFjNmQ3NjZfNnhOVWFrM3JNZ3lRZEVPdjFvVTF5YTlKWk9jNUJTcnNfVG9rZW46TEN3RmJCbFcwb25CSVd4aE16MmN6bGJjbjVnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWRiYTEzOTU1YjM3ZjQyMzg3MGFlMjMwYmExMTY5ZThfRW96Q2RpTGkwc0d3QkF1RFdHR040dGhEVXlNV0xleTlfVG9rZW46SUhqdGJjR2RNb2JnV2R4ZTNEY2M1U1ljbldnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjNlNzVmNzc1ZWY4NGFiNWQxOTg1ZWRmMzk3MGFlNGRfM2ZHZTk2c1BOTWpVNEQybVZxMHFFbjY1dmxjYmVBT1NfVG9rZW46T2pPeGJGYVR4b0lPbTB4VzkzR2MzMXJYbmJnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjA2ZjRhMDgxODA0MGMzNGRkYmRlYjRlYzFhYzRkOTlfN3djTXBKZ3VWYm9sM0lIVkJiVUxCMXJKTThZdUVZWENfVG9rZW46UHFHVmJnazJPbzJNcmN4WjRCSmNvdlFYbldlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¿å­˜ä¸€ä¸‹rviz2çš„é…ç½®

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MWM1MmNmNWNhZTNkYzg5NTJhNmQ5ZmI4MWZlYmY2M2RfbktEd3JITG50V3dQbnlTMGYyUWNnR1dOUHNndmRUWDRfVG9rZW46RFJiOGIwcmZ4bzBuNmh4aURpdmNFdEw1bmJlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ­£å¸¸çš„æŒ‡ä»¤æ˜¯

```Bash
ros2 run rviz2 rviz2 -d rviz2é…ç½®çš„è·¯å¾„
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDIxNjE5MWVkMDFmZjI0ZDVmMGE5YTdjMzQxZmU3ZWJfOWx3T3ZGQmc3bUw5MnE3Y29Yc2lRaWtxNHZlRnBMVE9fVG9rZW46QThVdmJlY0w0b0d6VTl4NVpsNGM5dXZBbmdnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWU0YmZjZDk0NmFmYjE0MTRiMzM1MWE2YWY5NjMxMmNfenRHMUtTcEFjd3FTV3J0SHIyZnlGUHFoM2F1ZjlhNDdfVG9rZW46SU5pamJadmdzb2tYMHZ4SDFRbWNKUElIbnhiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTM5NTI5Mzc2NDRmMjRkZTUxNWMxOGUyNjQzNDU4MTFfakxDemw4aVRWbWJDWHRBMFNCMW1ZWkxCelR1djhyc0pfVG9rZW46RklMUWJpVWxxb05UelR4Zkc5TGNDMGIzbkFjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

åˆ›å»ºä¸€ä¸ªå‚æ•°å«modelï¼Œå€¼æ˜¯åé¢é‚£ä¸€é•¿ä¸²ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzJhMjBjMTgyZjA3ZTY3YzRjNzU3ZjgzZTlmM2NiNDhfQWxuUlhuSlRFd3ZpNldidDBIazFFZlJ2TUJYTk12WVlfVG9rZW46S2ZQdmIzNnpqb0RNZmx4T1JxS2NCSWdCbjdiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

LaunchConfigurationæ˜¯è§£æå‚æ•°

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2VkNzQ5N2YxZDJlZDNlZTFmMGRiYTgwY2I0YjM0YWJfSjZXU0dTMGlMTHhVRExkMUR2S3VWNGEyd1htSGhqcG9fVG9rZW46QjFLamJlSzVSb2JDdzl4VWp1bGNGTGQzbkhmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è®°å¾—è¦æŠŠmodelæ”¾åœ¨æœ€å‰é¢ï¼Œæ”¾åœ¨åé¢æ˜¯ä¸å¯ä»¥çš„ï¼Œç°åœ¨å·²ç»æŠŠè·¯å¾„å°è£…å®Œæ¯•äº†ã€‚

ç°åœ¨å¯åŠ¨æ˜¯æ­£å¸¸å¯åŠ¨é»˜è®¤çš„urdfè·¯å¾„ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGExZWEwMTIzNjQ3MmQwMjE5NmY4MmNkODg5YzUyYTdfU0I4QzZOZVp3cnRKSXd2NkZkbklKaU1IV1ZKNFZPcWpfVG9rZW46WUxEaWJoV1RSbzRCZER4aUR4bGN3OFpWbllnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è§£æéé»˜è®¤å€¼çš„urdfï¼Œåœ¨ç»ˆç«¯é‡Œä¹Ÿæœ‰ç±»ä¼¼äºget\_package\_share\_directoryï¼Œä»¥ä¸‹å°±æ˜¯(è¿™é‡Œå‚æ•°modelå°‘å†™äº†ä¸ªL)è¦æŠŠå‚æ•°å€¼ç”¨åå¼•å·(ESCä¸TABä¸­é—´çš„æŒ‰é”®)æ¡†èµ·æ¥ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2VkOTU3YzFjZWMyNmUxMzk5ZjZkNmZhYzg1MjMyYTlfT2xncGxBaVoyYUF0WEFib2h0bWo5TFIxMVVid1E0Y0FfVG9rZW46S3ZNQmJJVFJLb1VwcEZ4RFR5M2NjRVdTblNlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Bash
ros2 pkg prefix --share cpp06_urdf

ros2 run launch cpp06_urdf display.launch.py model:=`ros2 pkg prefix --share cpp06_urdf`/urdf/urdf/hahah.urdf
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDBhYjFmNjhiMDQyNGU4MDY5YTJlMTg5ZThmZDk4ZjhfdjdwU3hNNEwycGh5cWZhSVpIdXJOc1M0cHdBSkpmSjVfVG9rZW46VTd5R2JDSW4wbzVvOEF4VHl4WWNBa1pRbldoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjhjZWRjYzUzOTU3OGE0MjlmMGQ5NjVjNTQ4Njc2ZmVfendXR1I4N1EwSU1rY202NG5vQ2lCQmU0bXp3RzdGdUpfVG9rZW46RTQyTGJKVjJhb2pJU214Zkh1TmN0NDM1bm5lXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWQ1ODJkYmY5YTZiZWRjYzYxMzhhMmZiZjcwZWEwNjFfVzZnczdYVllqNHN3V1NZbEZUNk9FMExtQzN6MjkwVVhfVG9rZW46V2RoNmJSd0xWb2pCVGF4TWxxRWNlZ0RUbmFiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Python
from launch import LaunchDescription
from launch_ros.actions import Node

# å°è£…ç»ˆç«¯æŒ‡ä»¤ç›¸å…³ç±»
# from launch.actions import ExecuteProcess
# from launch.substitutions import FindExecutable
# å‚æ•°å£°æ˜ä¸è·å–
from launch.actions import DeclareLaunchArgument
from launch.substitutions import LaunchConfiguration
# æ–‡ä»¶åŒ…å«ç›¸å…³
# from launch.actions import IncludeLaunchDescription
# from launch.launch_description_sources import PythonLaunchDescriptionSource
# åˆ†ç»„ç›¸å…³
# from launch_ros.actions import PushRosNamespace
# from launch.actions import GroupAction
# äº‹ä»¶ç›¸å…³
# from launch.event_handlers import OnProcessStart,OnProcessExit
# from launch.actions import ExecuteProcess,RegisterEventHandler,LogInfo
# è·å–åŠŸèƒ½åŒ…ä¸‹shareç›®å½•æˆ–è·¯å¾„
from ament_index_python.packages import get_package_share_directory

from launch_ros.parameter_descriptions import ParameterValue
from launch.substitutions import Command

model = DeclareLaunchArgument(name="model",default_value=get_package_share_directory("cpp06_urdf") + "/urdf/urdf/demo01_boxrobot.urdf")

p_value = ParameterValue(Command(["xacro ",LaunchConfiguration("model")]))
robot_state_pub = Node(
    package="robot_state_publisher",
    executable="robot_state_publisher",
    parameters=[{"robot_description":p_value}]
)


joint_state_pub = Node(
    package="joint_state_publisher",
    executable="joint_state_publisher"
    )


rviz2 = Node(
    package="rviz2",
    executable="rviz2",
    arguments=["-d",get_package_share_directory("cpp06_urdf") + "/rviz/urdf.rviz"]
    )

def generate_launch_description():
    return LaunchDescription([model,robot_state_pub,joint_state_pub,rviz2])
```

ç»§ç»­ä¼˜åŒ–æœ€ç»ˆçš„ä»£ç ä¸ºï¼š

```Python
from launch import LaunchDescription
from launch_ros.actions import Node

# å°è£…ç»ˆç«¯æŒ‡ä»¤ç›¸å…³ç±»
# from launch.actions import ExecuteProcess
# from launch.substitutions import FindExecutable
# å‚æ•°å£°æ˜ä¸è·å–
from launch.actions import DeclareLaunchArgument
from launch.substitutions import LaunchConfiguration
# æ–‡ä»¶åŒ…å«ç›¸å…³
# from launch.actions import IncludeLaunchDescription
# from launch.launch_description_sources import PythonLaunchDescriptionSource
# åˆ†ç»„ç›¸å…³
# from launch_ros.actions import PushRosNamespace
# from launch.actions import GroupAction
# äº‹ä»¶ç›¸å…³
# from launch.event_handlers import OnProcessStart,OnProcessExit
# from launch.actions import ExecuteProcess,RegisterEventHandler,LogInfo
# è·å–åŠŸèƒ½åŒ…ä¸‹shareç›®å½•æˆ–è·¯å¾„
from ament_index_python.packages import get_package_share_directory

from launch_ros.parameter_descriptions import ParameterValue
from launch.substitutions import Command

import os

cpp06_urdf_dir = get_package_share_directory("cpp06_urdf")

default_model_path = os.path.join(cpp06_urdf_dir,"urdf/urdf","demo01_boxrobot.urdf")
default_rviz_path = os.path.join(cpp06_urdf_dir,"rviz","urdf.rviz")

model = DeclareLaunchArgument(name="model",default_value=default_model_path)

p_value = ParameterValue(Command(["xacro ",LaunchConfiguration("model")]))
robot_state_pub = Node(
    package="robot_state_publisher",
    executable="robot_state_publisher",
    parameters=[{"robot_description":p_value}]
)

# å…³èŠ‚ä¿¡æ¯èŠ‚ç‚¹
# joint_state_pub = Node(
#     package="joint_state_publisher",
#     executable="joint_state_publisher"
# )

# å…³èŠ‚ä¿¡æ¯èŠ‚ç‚¹å›¾å½¢ç•Œé¢(å»ºè®®)
joint_state_pub = Node(
    package="joint_state_publisher_gui",
    executable="joint_state_publisher_gui"
)

rviz2 = Node(
    package="rviz2",
    executable="rviz2",
#    arguments=["-d",get_package_share_directory("cpp06_urdf") + "/rviz/urdf.rviz"]
    arguments=["-d",default_rviz_path]

    )

def generate_launch_description():
    return LaunchDescription([model,robot_state_pub,joint_state_pub,rviz2])
```

4.  ## URDFè¯­æ³•
    

1.  ### ç®€ä»‹
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWY3Zjc2YWMwZWQ3NjM2ODVmMzM0ZjViOTFmMzNiZjRfOW55OXNOWE1VS1FWOFZnVUlaVHc2aDZKOFlZVW1PQ0xfVG9rZW46WXFOaWJtUDM2b3ZQbUx4TmVnS2NKRUdlbktoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

2.  ### robotæ ¹æ ‡ç­¾
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTgzNDY0N2JhNmQ4MDZkNDQ0N2Y3MjJmMDZjMDQ3OGJfcnVvbGJYSUM5Ynl4RnpadDNTSGZVVDNIcTJBN0Y3b0lfVG9rZW46UUVxbmJtUlhpb2d2TEV4aXNzMmNUaG1JbmtkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDljMDY0NzAwYWEwZjZmZjNhNDEzOGE5NTMyMzVjNWFfU2J5Zm96YjJucW8yb2U3eHVJdlByYWlJcWh1VDY0cFNfVG9rZW46TUlGUGI4dWQ5b08wbTJ4SWI2ZWNnN2JDblpiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¯¹æœºå™¨äººè¿›è¡Œåˆ†å‰²ï¼Œåˆ†å‰²æˆå‡ ä¸ªå­é›†ï¼Œæ¯”å¦‚ä¸€ä¸ªå­é›†æè¿°å¤´ï¼Œä¸€ä¸ªå­é›†æè¿°èº«å­ï¼Œæœ€åå†åˆæˆåˆé›†ï¼Œæˆæœºå™¨äºº

è™½ç„¶æˆ‘çš„å­æ–‡ä»¶å’Œä¸»æ–‡ä»¶åœ¨é€»è¾‘ä¸Šæ˜¯æœ‰åŒ…å«å…³ç³»çš„ï¼Œä½†æ˜¯å…¶å®ï¼Œä»–ä»¬éƒ½æ˜¯å•ç‹¬çš„urdfæ–‡ä»¶ã€‚ä¸»æ–‡ä»¶ä¸­ï¼Œrobotæ ‡ç­¾çš„nameå±æ€§å¿…é¡»å†™ï¼Œå­æ–‡ä»¶å¯ä»¥ä¸å†™ï¼Œå¦‚æœå†™ï¼Œé‚£ä¹ˆå­æ–‡ä»¶nameçš„å€¼ä¸ä¸»æ–‡ä»¶çš„å¿…é¡»ç›¸åŒï¼

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWNiMGQyYjcyZmE4OTQyODZiOTgxMDRiNTNhZTQzNGRfa3ZKSVhPTzVHbG5ibEh3NWZkUVNoTjBpVFBzVXZwNm1fVG9rZW46TnF5VWJLTkp0b0tBNEh4MFNVYWM4OUxVbjZkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDA4MDQ2OTAzMjMyNTY0ZDFjYzBmZGU0ZDBkODUyY2RfN0hnMzRlUWdnRERLSWRZZG5GNzdFN3F1djNLR3ZsYmpfVG9rZW46WGdVc2JRRjY0b093M3l4Q3dRN2NsWGJLbmJkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

3.  ### linkæ ‡ç­¾
    

1.  #### ç®€ä»‹
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzI2NmQ2NTEzZWE4ZTc4ODVhNGMwMWJhNDgwN2QyNTlfeFpzVUxqWGVXam90NTRYdmF5QmJQWlVyeFBiUG1PaURfVG9rZW46VWRtZGJnMzF6b2NDWnF4ZDl6S2NSOTNabnZlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ¯ä¸€ä¸ªlinkéƒ½æ˜¯åˆšä½“ï¼Œéƒ½æ˜¯ç‹¬ç«‹éƒ¨ä»¶

Linkæ˜¯é€šè¿‡jointè¿›è¡Œæ‹¼æ¥çš„

Linkä¸»è¦åŒ…å«ä¸‰éƒ¨åˆ†ï¼ŒVisualï¼ŒCollisionå’ŒInertial

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGNmNTRmMDEyZTZiYjZiZTMzYjFhODhmNzE2M2JjYThfMGNsd1VhanRlUmNqMDlTNE9JNWlRVGpEWUFSQWlMWHdfVG9rZW46WTJZbWJlUXl4b0tCa3R4M2FRcWN3dXRqbkxnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ²¡åŠ å°–æ‹¬å·çš„æ˜¯å±æ€§ï¼ŒåŠ äº†çš„æ˜¯æ ‡ç­¾

  

**<visual>** ï¼ˆå¯é€‰ï¼‰ï¼šç”¨äºæè¿°linkçš„å¯è§†åŒ–å±æ€§ï¼Œå¯ä»¥è®¾ç½®linkçš„å½¢çŠ¶ï¼ˆç«‹æ–¹ä½“ã€çƒä½“ã€åœ†æŸ±ç­‰ï¼‰ã€‚

*   **name** ï¼ˆå¯é€‰ï¼‰ï¼šæŒ‡å®šlinkåç§°ï¼Œæ­¤åç§°ä¼šæ˜ å°„ä¸ºåŒååæ ‡ç³»ï¼Œè¿˜å¯ä»¥é€šè¿‡å¼•ç”¨è¯¥å€¼å®šä½å®šä½linkã€‚
    
*   **<geometry>** ï¼ˆå¿…å¡«ï¼‰ï¼šç”¨äºè®¾ç½®linkçš„å½¢çŠ¶ï¼Œæ¯”å¦‚ï¼šç«‹æ–¹ä½“ã€çƒä½“æˆ–åœ†æŸ±ã€‚
    
    *   **<box>** ï¼šç«‹æ–¹ä½“æ ‡ç­¾ï¼Œé€šè¿‡sizeå±æ€§è®¾ç½®ç«‹æ–¹ä½“çš„è¾¹é•¿ï¼ŒåŸç‚¹ä¸ºå…¶å‡ ä½•ä¸­å¿ƒã€‚
        
    *   **<cylinder>** ï¼šåœ†æŸ±æ ‡ç­¾ï¼Œé€šè¿‡radiuså±æ€§è®¾ç½®åœ†æŸ±åŠå¾„ï¼Œé€šè¿‡lengthå±æ€§è®¾ç½®åœ†æŸ±é«˜åº¦ï¼ŒåŸç‚¹ä¸ºå…¶å‡ ä½•ä¸­å¿ƒã€‚
        
    *   **<sphere>** ï¼šçƒä½“æ ‡ç­¾ï¼Œé€šè¿‡radiuså±æ€§è®¾ç½®çƒä½“åŠå¾„ï¼ŒåŸç‚¹ä¸ºå…¶å‡ ä½•ä¸­å¿ƒã€‚
        
    *   **<mesh>** ï¼šé€šè¿‡å±æ€§filenameå¼•ç”¨â€œçš®è‚¤â€æ–‡ä»¶ï¼Œä¸ºlinkè®¾ç½®å¤–è§‚ï¼Œè¯¥æ–‡ä»¶å¿…é¡»æ˜¯æœ¬åœ°æ–‡ä»¶ã€‚ä½¿ç”¨ package://<packagename>/<path>ä¸ºæ–‡ä»¶åæ·»åŠ å‰ç¼€ã€‚
        
    *   **<origin>** ï¼ˆå¯é€‰ï¼‰ï¼šç”¨äºè®¾ç½®linkçš„ç›¸å¯¹åç§»é‡ä»¥åŠæ—‹è½¬è§’åº¦ï¼Œå¦‚æœªæŒ‡å®šåˆ™ä½¿ç”¨é»˜è®¤å€¼ï¼ˆæ— åç§»ä¸”æ— æ—‹è½¬ï¼‰ã€‚
        
        *   **xyz** ï¼šè¡¨ç¤ºxã€yã€zä¸‰ä¸ªç»´åº¦ä¸Šçš„åç§»é‡ï¼ˆä»¥ç±³ä¸ºå•ä½ï¼‰ï¼Œä¸åŒæ•°å€¼ä¹‹é—´ä½¿ç”¨ç©ºæ ¼åˆ†éš”ï¼Œå¦‚æœªæŒ‡å®šåˆ™ä½¿ç”¨é»˜è®¤å€¼ï¼ˆä¸‰ä¸ªç»´åº¦æ— åç§»ï¼‰ã€‚
            
        *   **rpy** ï¼šè¡¨ç¤ºç¿»æ»šã€ä¿¯ä»°ä¸åèˆªçš„è§’åº¦ï¼ˆä»¥å¼§åº¦ä¸ºå•ä½ï¼‰ï¼Œä¸åŒæ•°å€¼ä¹‹é—´ä½¿ç”¨ç©ºæ ¼åˆ†éš”ï¼Œå¦‚æœªæŒ‡å®šåˆ™ä½¿ç”¨é»˜è®¤å€¼ï¼ˆä¸‰ä¸ªç»´åº¦æ— æ—‹è½¬ï¼‰ã€‚
            
    *   **<material>** ï¼ˆå¯é€‰ï¼‰ï¼šè§†è§‰å…ƒç´ çš„æè´¨ã€‚ä¹Ÿå¯ä»¥åœ¨æ ¹æ ‡ç­¾robotä¸­å®šä¹‰materialæ ‡ç­¾ï¼Œç„¶åï¼Œå¯ä»¥åœ¨linkä¸­æŒ‰åç§°è¿›è¡Œå¼•ç”¨ã€‚
        
        *   **name** ï¼ˆå¯é€‰ï¼‰ï¼šä¸ºmaterialæŒ‡å®šåç§°ï¼Œå¯ä»¥é€šè¿‡è¯¥å€¼è¿›è¡Œå¼•ç”¨ã€‚
            
        *   **<color>** ï¼ˆå¯é€‰ï¼‰ï¼šrgba æè´¨çš„é¢œè‰²ï¼Œç”±ä»£è¡¨red/green/blue/alpha çš„å››ä¸ªæ•°å­—ç»„æˆï¼Œæ¯ä¸ªæ•°å­—çš„èŒƒå›´ä¸º \[0,1\]ã€‚
            
        *   **<texture>** ï¼ˆå¯é€‰ï¼‰ï¼šæè´¨çš„çº¹ç†ï¼Œå¯ä»¥ç”±å±æ€§filenameè®¾ç½®ã€‚
            

  

å½“æœ‰å¤šä¸ªVisualçš„æ—¶å€™ï¼Œéœ€è¦ç»™Visualè®¾ç½®nameï¼Œæ‰€ä»¥æ˜¯ä¸ªå¯é€‰é¡¹ã€‚

  

Collisionä¸ä»¿çœŸæœ‰å…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥ç»™æˆ‘ä»¬çš„æœºå™¨äººçš„åˆšä½“è®¾ç½®ä¸€ä¸ªç¢°æ’åŒºé—´ï¼Œåªè¦éšœç¢ç‰©è¿›å…¥äº†åŒºé—´ï¼Œé‚£ä¹ˆå°±å‘ç”Ÿäº†ç¢°æ’ï¼Œä¸€èˆ¬ç¢°æ’åŒºé—´è¦æ¯”å®é™…å¤§å°è¦å¤§ã€‚

  

**<collision>** ï¼ˆå¯é€‰ï¼‰ï¼šlinkçš„ç¢°æ’å±æ€§ã€‚å¯ä»¥ä¸linkçš„è§†è§‰å±æ€§ä¸€è‡´ï¼Œä¹Ÿå¯ä»¥ä¸åŒï¼Œæ¯”å¦‚ï¼šæˆ‘ä»¬ä¼šé€šå¸¸ä½¿ç”¨æ›´ç®€å•çš„ç¢°æ’æ¨¡å‹æ¥å‡å°‘è®¡ç®—æ—¶é—´ï¼Œæˆ–è€…è®¾ç½®çš„å€¼å¤§äºlinkçš„è§†è§‰å±æ€§ï¼Œä»¥å°½é‡é¿å…ç¢°æ’ã€‚å¦å¤–ï¼ŒåŒä¸€é“¾æ¥å¯ä»¥å­˜åœ¨å¤šä¸ª <collision>æ ‡ç­¾å®ä¾‹ï¼Œå¤šä¸ªå‡ ä½•å›¾å½¢ç»„åˆè¡¨ç¤ºlinkçš„ç¢°æ’å±æ€§ã€‚

*   **name** ï¼ˆå¯é€‰ï¼‰ï¼šä¸ºcollisionè®¾ç½®åç§°ã€‚
    
*   **<geometry>** ï¼ˆå¿…é¡»ï¼‰ï¼šè¯·å‚è€ƒvisualæ ‡ç­¾çš„geometryä½¿ç”¨è§„åˆ™ã€‚
    
*   **<origin>** ï¼ˆå¯é€‰ï¼‰ï¼šè¯·å‚è€ƒvisualæ ‡ç­¾çš„originä½¿ç”¨è§„åˆ™ã€‚
    

  

Inertialæ˜¯è®¾ç½®æƒ¯æ€§çŸ©é˜µçš„ï¼Œä¹Ÿæ˜¯å’Œä»¿çœŸæœ‰å…³ç³»çš„ã€‚æ¯”å¦‚è¯´æœºå™¨äººåˆ¹è½¦ï¼Œä¼šå‡ºç°å‰å€¾çš„æƒ…å†µï¼Œæ¯”å¦‚è¯´æƒ¯æ€§çŸ©é˜µçš„é‡å¿ƒé«˜ä¸€äº›ï¼Œé‚£ä¹ˆæ€¥åˆ¹è½¦å°±ä¼šå‡ºç°ç¿»è½¦çš„æƒ…å†µäº†ã€‚

  

**<inertial>** ï¼ˆå¯é€‰ï¼‰ï¼šç”¨äºè®¾ç½®linkçš„è´¨é‡ã€è´¨å¿ƒä½ç½®å’Œä¸­å¿ƒæƒ¯æ€§ç‰¹æ€§ï¼Œå¦‚æœæœªæŒ‡å®šï¼Œåˆ™é»˜è®¤ä¸ºè´¨é‡ä¸º0ã€æƒ¯æ€§ä¸º0ã€‚

*   **<origin>** ï¼ˆå¯é€‰ï¼‰ï¼šè¯¥ä½å§¿ï¼ˆå¹³ç§»ã€æ—‹è½¬ï¼‰æè¿°äº†é“¾æ¥çš„è´¨å¿ƒæ¡†æ¶ C ç›¸å¯¹äºé“¾æ¥æ¡†æ¶ L çš„ä½ç½®å’Œæ–¹å‘ã€‚
    
    *   **xyz** ï¼šè¡¨ç¤ºä» Loï¼ˆé“¾æ¥æ¡†æ¶åŸç‚¹ï¼‰åˆ° Coï¼ˆé“¾æ¥çš„è´¨å¿ƒï¼‰çš„ä½ç½®å‘é‡ä¸º x LÌ‚x + y LÌ‚y + z LÌ‚zï¼Œå…¶ä¸­ LÌ‚xã€LÌ‚yã€LÌ‚z æ˜¯é“¾æ¥æ¡†æ¶ L çš„æ­£äº¤å•ä½å‘é‡ã€‚
        
    *   **rpy** ï¼šå°† C çš„å•ä½å‘é‡ Äˆxã€Äˆyã€Äˆz ç›¸å¯¹äºé“¾æ¥æ¡†æ¶ L çš„æ–¹å‘è¡¨ç¤ºä¸ºä»¥å¼§åº¦ä¸ºå•ä½çš„æ¬§æ‹‰æ—‹è½¬åºåˆ— (r p y)ã€‚æ³¨æ„ï¼šÄˆxã€Äˆyã€Äˆz ä¸éœ€è¦ä¸è¿æ†çš„æƒ¯æ€§ä¸»è½´å¯¹é½ã€‚
        
*   **<mass>** ï¼ˆå¿…å¡«ï¼‰ï¼šé€šè¿‡å…¶valueå±æ€§è®¾ç½®linkçš„è´¨é‡ã€‚
    
*   **<inertia>** ï¼ˆå¿…å¡«ï¼‰ï¼šå¯¹äºå›ºå®šåœ¨è´¨å¿ƒåæ ‡ç³» C ä¸­çš„å•ä½å‘é‡ Äˆxã€Äˆyã€Äˆzï¼Œè¯¥è¿æ†çš„æƒ¯æ€§çŸ© ixxã€iyyã€izz ä»¥åŠå…³äº Coï¼ˆè¿æ†çš„è´¨å¿ƒï¼‰çš„æƒ¯æ€§ ixyã€ixzã€iyz çš„ä¹˜ç§¯ã€‚
    

**æ³¨æ„ï¼š** <collision> å’Œ <inertial> åœ¨ä»¿çœŸç¯å¢ƒä¸‹æ‰éœ€è¦ä½¿ç”¨åˆ°ï¼Œå¦‚æœåªæ˜¯åœ¨ rviz2 ä¸­é›†æˆ urdfï¼Œé‚£ä¹ˆä¸å¿…é¡»ä¸º link å®šä¹‰è¿™ä¸¤ä¸ªæ ‡ç­¾ã€‚

  

2.  #### ä½¿ç”¨
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDg0YTA5YWEzNDE3NzIxYzEzOTA2NDdiMjBlOWQ3MmVfMEpuWVhXTU5zOUV3SmNna3lQT0VrQVFIZmV1VENmZFdfVG9rZW46R0JNa2JUaVk4bzhBeWJ4VldCOWNYQzl1bkplXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```XML
<robot name="link_demo">
  <!-- å®šä¹‰é¢œè‰² -->
  <material name="yellow">
    <color rgba="0.7 0.7 0 0.8" />
  </material>
  <link name="base_link">
    <visual>
        <!-- å½¢çŠ¶ -->
        <geometry>
            <!-- é•¿æ–¹ä½“çš„é•¿å®½é«˜ -->
            <box size="0.5 0.3 0.1" />
            <!-- åœ†æŸ±ï¼ŒåŠå¾„å’Œé•¿åº¦ -->
            <!-- <cylinder radius="0.5" length="1.0" /> -->
            <!-- çƒä½“ï¼ŒåŠå¾„-->
            <!-- <sphere radius="0.3" /> -->

        </geometry>
        <!-- xyzåæ ‡ rpyç¿»æ»šä¿¯ä»°ä¸åèˆªè§’åº¦(3.14=180åº¦) -->
        <origin xyz="0 0 0" rpy="0 0 0" />
        <!-- è°ƒç”¨å·²å®šä¹‰çš„é¢œè‰² -->
        <material name="yellow"/>
    </visual>
  </link>
</robot>
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjFkNDc5MzM5ZTllYTRmOWVjMmQ2NjU4MTgzOWQ0NDdfZ0c0V3M4RUJzUXdaUFJSZnY5N3NNRWdHdjAyQUxsSEtfVG9rZW46RHhUMWI5Vkl3b2k2T1V4R0RWWWNVUHA4bkhlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Bash
ros2 launch cpp06_urdf display.launch.py model:=`ros2 pkg prefix --share cpp06_urdf`/urdf/urdf/demo02_link.urdf
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzgwZDRmZTNkOTA4NDhlM2MxNzk1MzkyNTJlNDQ0ZDdfVmhtb2tUTjMwYVRxT3JhcUlPRmhJTDdLaFptQUpRMFZfVG9rZW46QnowaGIwOWpLb3ZoZDZ4dTJ2a2MzUGZtbmVoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2IxM2QzMzgxYWQ0ZDNiMzZhNjU4ZWE4MzEzMGUxNDZfSGNxck5wTUVPN21IamRSQW9DalVMb24zc1R2c0tvdHFfVG9rZW46SklFRmJET09Rb1JDR0p4YlhaRGNwbUlnbnZTXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

çŸ©å½¢ä½“ï¼Œçƒå½¢ï¼Œåœ†æŸ±ä½“

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTkxNjU3MmY4ZDQwNjViNDcwOTYxYzcyMzcxMDNkODhfVWhPZEJyUW9JMUprd2RUN2J4SjdQdFdad3FaQkZWZ3ZfVG9rZW46VnRBY2JlVTlvbzZ3TFp4RkxKcmNnVlBRblZkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjEwOWY0YmE4MDI5Y2M5ODViMmU4MDAzY2NkMmUxZThfS2hJcE5iVnI0ZFBUZlB5U0F6ekIxVjR4TFFLMkRSc29fVG9rZW46T0p6bmJlR0Fjb3dOOUZ4SzVUVWNsTllBbmpnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGRmYzUwODg5ODY1ZTNjMWQyZDFkMGExYmEyNjQ0MTBfVkNjenFuaHVSZ0xuS1EydzNZWjNyYTl3a2RySEZwbVFfVG9rZW46T0lDTWJCaHZtb0N3V1R4MEE4T2NUVW94bkFmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWI3NTNlNmQyNTA5OWRkNDBhOGQ3YWQ4NDJkZWRhMTVfbmplbk1PMWg4TlBpVHE0YUNDT3ZZSndycFZFRnUwVnBfVG9rZW46QmhxRmJxUVZHb0t4QzB4SUxmUmNXOXZvbm9kXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTNlNmIwMTgyOTI3MmM4ZTdlMDFjMTBjYWEwNTE0MTFfVU42UUxob2JvYkxZeXNBOU1uRndWRk5aZjRQRjRDUVJfVG9rZW46SjZzRGIxeTdjb1NPWEZ4RHVMV2NwWmw3bndoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTNiMjM4ZGVjNzExMGZkOTA4MzM5NTUyMTNkODAxYzhfNWJFdHJ4ODF6OXUxd1JzSUg3bWtlaDBmQlZYT1ZCZW9fVG9rZW46Sk15aWJnaW5Vb0tiT3l4U2hGaGNka1Q4bjljXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¹³ç§»é‡ï¼ŒXå¹³ç§»1ï¼ŒYå’ŒZå¹³ç§»0ï¼Œrpyæ—‹è½¬åº¦è®¾ç½®ä¸º0(æ—‹è½¬åº¦åˆ†åˆ«æ˜¯æ¬§æ‹‰è§’é‡Œçš„ç¿»æ»šè§’Roll(ç»•X)ï¼Œä¿¯ä»°è§’Pitch(ç»•Y)ï¼Œèˆªå‘è§’Yaw(ç»•Z))

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWM0MmMyNDBkZWE1NzNmYjI0M2RjMTA4MDQ4ZWYzZmVfY1dmT0dXa2pEdFRqNDRkYU0zb0poOWlCZmFrNVc5b3pfVG9rZW46QWZxcWJTQ2FRbzduMzB4U2FURmNTalBVbnVlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmVhYTg4YjczYWY4MmIzMGI1NTBjZDNiNzA4NjU3MWFfSmNjM3I2ZTRmSzVXRWloVkRrNTc1N2FWTlVFUXg4NGtfVG9rZW46QjVkS2JWZ3dSb09Fbm94OHdib2M3SzlSblFiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å‘ç°é•¿æ–¹ä½“åœ¨Xä¸Šåç§»äº†1

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjhjM2VlMmUzZTY3YTU4OGNhN2JjZGJhMjAyYTE5NWVfRzNRZ3BCTENUODhvVjhIWFF4a05rc0VDU2VtS3NLaUtfVG9rZW46Rld1amJLUWdpb0V6Vmh4Q1cyOGM2RVlIbmxmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWJkODg4Y2VlYTFjZTI1NTJhNTZhYzM5YjMzZjc3YTdfQ3N3YTk4WjVPbUVabmd2T05GZmpIMEhvckdrNkZMcWVfVG9rZW46TVdrZmI1cE5kbzk4MzR4ZnE3OWN4Mng0bnJmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

  

è®©èˆªå‘è§’Yaw(ç»•Zè¿åŠ¨)ä¸º0.5 rad

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDMwODIzNTViMTRjZDY2MTcwNGMwZDQ2NmYxOGVlYzlfSllMTTNIMTI0NmJEZ0FwdTVxckJzaGhLUG5ncTVJZWhfVG9rZW46SnFUTGI3YlZobzd4eEZ4cG5jdGMxNWRzbkpmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDE5ZjgxOGE0NjMwMTc1NWRmYWY0ZDlhYWE5NDRhZjFfeGtWbVFLMzltaHV0bHdoTHk3ZGNkU0NycGh3NjZVcjRfVG9rZW46UHBOdGJUV25Hb255aVd4SFIzd2NNQmRqbk5jXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è®¾ç½®ç¿»æ»šè§’Roll(ç»•Xè¿åŠ¨)ä¸º0.5rad

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWJlYTdjNjIyMGI5ZDViZjI4YWRlYjJjZTZlM2M2ZDVfampvVENjYWhPSmY3cEtHejh1YXVwWGhJY21nOHJqNHFfVG9rZW46WGVaUmJ0MVBwb0lBVVN4RVdTS2NCNG91bjBjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODE5MmUwZDUzMDZlNTdkYTAwY2RhYmNlZGQ2OGQ2NjFfbnhlaFNzMTVqODNNSElLNkxVUlk1RUU2UWt4ZmUxbTBfVG9rZW46QXp6WmJmR1Jab25nU2Z4am5zSmNmYTFGblJmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è®¾ç½®ä¿¯ä»°è§’Pitch(ç»•Yè¿åŠ¨)ä¸º0.5rad

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWU2MTVkMDI4ZGFhNjQyOWJlOWMwZWQyMWYzYWU5YjRfc3F6bm9jSG5IUXpqQnlqMm9EN3NmZGVKcjQzaHczRjlfVG9rZW46S0h3cWI2R2d6b2pzTm54bE9rMGNKU1A1bldoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

sRGBæ˜¯R,G,B,Alpha(æµ®ç‚¹æ¨¡å‹ï¼Œæ‰€ä»¥èŒƒå›´æ˜¯0-1.0)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTJlOGQ1NGU1NzhlNDRmNmU4M2FlMWQ1NDFlMzcxOTRfQjgxVENVTWZnTmdmVFhKZnBJTW95QzZ1dmU3U2NzcDNfVG9rZW46QTFRVGJTREU4b0hlTEd4WERNU2N1cjVnbldoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWFiNTdlY2UwYmY3ZmFhNTMxMTdhNzU4ZDY4OGZkYTJfUnNxeTlWMzBSc0pBYmJCS1RUbnQyeUM3WWlGUWFWaHJfVG9rZW46S2tGWWI4T1pWbzJVYTJ4amlxVGMxeTRjbjlnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2Y2Y2JjNDYxNmI2ZTA5MjhkY2VkZDUwZjgxNWJmOGVfQXBYY0FRczExeGNPR2Y0YnY5T1I3T0VNQnZ1OTA5THZfVG9rZW46Vm9mdmJQY1VDbzhsak94dDlCOGNpZmc3bkhmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWNlMDkxNjM1YmYyN2ZhNzVlNjY5OTE2MDk2YjNmMjBfR0RUeE9FY1hPdjA1SkdZS2FBaFhVQWRtcWJUeGZLMFBfVG9rZW46UWtpYWJ1TUFrb2lzdnV4OWxya2M4NTdzbjNiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¦‚æœä¸€ä¸ªé¢œè‰²è¦è¢«ç”¨å¥½å‡ æ¬¡ï¼Œå¯ä»¥å°è£…æˆä¸€ä¸ªç±»ä¼¼äºå…¨å±€å˜é‡çš„ä¸œè¥¿ï¼Œç„¶ååœ¨å…¶ä»–linkä¸­è°ƒç”¨æ—¶ï¼Œç›´æ¥ç”¨<material name="å¯¹åº”å±æ€§å€¼" /> ï¼ˆè¿™é‡Œæ˜¯ä¸ªé—­ç¯ï¼Œæ³¨æ„ï¼‰

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjZlNWNkODk3ZmMxZjhhNjhhOWE2MGQ4ZDQ3YTE1OGFfMG5kclhMdVFYRDdxa2NVOUVnMDBVeXRJbzl0eFVSSVJfVG9rZW46RjBTeWJuYjlob2VrdnF4WUhBZWN0c0Y2bkFmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```XML
<robot name="link_demo">
    <!-- å®šä¹‰é¢œè‰² -->
    <material name="yellow">
      <color rgba="0.7 0.7 0 0.8" />
    </material>
    <link name="base_link">
      <visual>
          <!-- å½¢çŠ¶ -->
          <geometry>
              <!-- é•¿æ–¹ä½“çš„é•¿å®½é«˜ -->
              <box size="0.5 0.3 0.1" />
              <!-- åœ†æŸ±ï¼ŒåŠå¾„å’Œé•¿åº¦ -->
              <!-- <cylinder radius="0.5" length="1.0" /> -->
              <!-- çƒä½“ï¼ŒåŠå¾„-->
              <!-- <sphere radius="0.3" /> -->
  
          </geometry>
          <!-- xyzåæ ‡ rpyç¿»æ»šä¿¯ä»°ä¸åèˆªè§’åº¦(3.14=180åº¦) -->
          <origin xyz="0 0 0" rpy="0 0 0" />
          <!-- è°ƒç”¨å·²å®šä¹‰çš„é¢œè‰² -->
          <material name="yellow"/>
      </visual>
    </link>
  </robot>
```

3.  #### ä½¿ç”¨è¡¥å……
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2ZmM2FkNzk5ODc2NWRjMjlhZDA1NjlhMzgwNjYwNDFfZlF2UmVHYmpla0RqamtMcmVWcm5xUWFoVzk4dFJWc3ZfVG9rZW46U3p5bWJtZXhWb2pRZlB4a2R3emM4QjMzblplXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

meshæ ‡ç­¾æ˜¯å¼•ç”¨çš®è‚¤æ–‡ä»¶ï¼Œä¸€èˆ¬æ˜¯stlæ–‡ä»¶ï¼Œå¯ä»¥ç”¨SolidWorkså¯¼å‡ºï¼Œå¯ä»¥çœ‹æ–‡æ¡£åé¢çš„SW2URDF

å¦‚æœä¸ä¼šä½¿ç”¨solidworksï¼Œå¯ä»¥å­¦ï¼Œè¿™ä¸œè¥¿2å¤©åŠå°±èƒ½å­¦ä¼šï¼Œåªæ˜¯ä¸€ä¸ªå·¥å…·ï¼Œåªä¼šç”»å›¾æ²¡æœ‰å•¥æ°´å¹³ï¼Œæœ€é‡è¦çš„è¿˜æ˜¯æœºæ¢°è®¾è®¡æ¯”è¾ƒéš¾ã€‚æƒ³å­¦çš„å¯ä»¥çœ‹å…„å¼Ÿç¤¾å›¢æœºæ¢°å­¦ä¼šå¾®ä¿¡å…¬ä¼—å·çš„è§†é¢‘è¿›è¡Œå­¦ä¹ ã€‚

https://mp.weixin.qq.com/mp/homepage?\_\_biz=MzI4MjkyMDgyMA==&hid=7&sn=1efc3d3cee0142970227785f767cc7c8&scene=18

å½“ç„¶ï¼Œæ²¡æ—¶é—´å­¦ä¹ å¯ä»¥ç›´æ¥ç”¨åˆ«äººç”»å¥½çš„æœºå™¨äººï¼Œåœ¨Githubä¸Šæœç´¢turtlebot3

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NGU0ODEzOTBmYzY4NmQ0NjM3MDNlM2JjMzUxY2Y5MzNfZ2tia0NtbXkyTHJuZXJoOFdGTXhxdUw0b0xzeEpxZHJfVG9rZW46QkIzaGJBa0dub3ZJcTV4RWJ3SmNkVjZkbjVjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODg3YzcwMWM0N2ZkODVhZDg1NTcyNWJhNDU5MWRkZDZfWTF5dGU0TDZWU0xRNTVkR3BCYTd3eTdPZHFTWnJKQ0tfVG9rZW46Rk1wUWI1Y0Jub3p5TW94b0pMY2M5RHAybnBnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjQ1OTdhYmJkZDljMjY2OWFhZDU4YTA3MWQ5MWRhNzdfQ2Eyb1cyRDBJSlNhYVplRUF3Y3NhWUkwbEc3bEFyaGJfVG9rZW46STR1emI3Tmllb0VqSk14RFFuZmNxcnRvbnZlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™é‡Œæœ‰å·²ç»å¯¼å‡ºçš„æ¨¡å‹ï¼Œbasesé‡Œæ˜¯å¤–è§‚çš„æ¨¡å‹ï¼Œsensorsæ˜¯ä¼ æ„Ÿå™¨çš„æ¨¡å‹ï¼Œwheelsæ˜¯è½®å­çš„æ¨¡å‹ã€‚

æˆ‘ä»¬å…‹éš†ä¸‹ä»“åº“ï¼Œæ³¨æ„è¦å…‹éš†branchæ˜¯ros2çš„åˆ†æ”¯ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzE0NWM3Yzk5YzRlNmNhOGMzMWI1ZWRmYjU2ZGIyNzVfRWdYWkROR0w3cDBNVzVqY0MxRG9JeWZHdlFqdkVQNktfVG9rZW46Sk9qTGJyQXFOb09XaFJ4ekgyWWNNdEs4bnNiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æˆ‘ä»¬å¼•ç”¨ä¸€ä¸ªå°±è¡Œäº†ï¼Œçœ‹çœ‹æ•ˆæœå³å¯ï¼ŒçœŸæ­£çš„åº”ç”¨è¿˜æ˜¯è¦ç”¨SolidWorksé€šè¿‡SW2URDFæ’ä»¶è¿›è¡Œå¯¼å‡º

æŠŠé¡¹ç›®é‡Œçš„meshes/basesé‡Œçš„burger\_base.stlæ‹·è´åˆ°æˆ‘ä»¬WSé‡Œçš„meshesç›®å½•

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODY5YzhmMDU5ZGE4MGM2OTU3ZDI5ZTVmZGMwYjYzOWRfT3lTdUU3MUdEUHBrUUlHYnc0eFU4bnVSdlZiS2pEUjJfVG9rZW46T3ZvcWJWVzZ1b2o0NXB4SnFvUWNFeVFkblVmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzViYmYwYjI3OWI2ODk3MWU2YmVhYzc4NGU4MTUxMmNfUG5vZjhvQ0daS0dIS3F4aFFBU0szaWQ0Z282MUYzUDBfVG9rZW46QVBUTmI3dUk3b1RlWWh4YTlmN2NrOFFpbmFlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

filenameæ˜¯å†™åˆšæ‰çš„çš®è‚¤æ–‡ä»¶ï¼Œpackage://å°±æ˜¯åè®®åï¼Œåé¢è·ŸåŒ…åï¼Œä¹Ÿå°±æ˜¯cpp06\_urdfã€‚ç„¶åè·ŸåŠŸèƒ½åŒ…ä¸‹çš„æ–‡ä»¶è·¯å¾„ï¼Œä¹Ÿå°±æ˜¯meshes/burger\_base.stlï¼ˆå…¶å®ä¹Ÿå°±æ˜¯shareä¸‹çš„è·¯å¾„ï¼‰

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWZmM2UyY2I0MWYxMzdjOWMzYWJhZjIxNmUzZWY0MDhfNW1OU0pLVDJtYmI5Y0tYOFVRUVM4NWJVNkVQVXJmUjhfVG9rZW46QjRZVGJTTG9Pb1NNaGt4VDRwZmNKYWNTbnNmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å› ä¸ºæ˜¯ä¸ªä¸‰ç»´æ¨¡å‹ï¼Œæ‰€ä»¥åœ¨å¡«scaleå¤§å°ç¼©æ”¾æ—¶ï¼Œéœ€è¦å¡«3ä¸ªæ¯”ä¾‹ï¼Œå’±ä»¬éƒ½å¡«1.0å³å¯ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjRlNzk2NmU5NjQyZDI3Mzc0Njg1OWZkZjA1Y2RlNmNfczFONW01VE1aSUFRdXAxQlJRQ2hadEMxbTVtV3ZvWnRfVG9rZW46Qmg3MWJTYnJWb1QzNzl4SEF1NmN5WmQxbjViXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¸ºä»€ä¹ˆæ˜¾ç¤ºçš„æ¨¡å‹ä¼šè¿™ä¹ˆå¤§å‘¢ï¼Œå› ä¸ºrviz2ä»¥ç±³ä¸ºå•ä½ï¼Œè€Œstlæ˜¯ä»¥mmä¸ºå•ä½ï¼Œæ³¨æ„ã€‚åœ¨æœºæ¢°ä¸Šï¼Œé»˜è®¤ä¸è¯´å•ä½å°±éƒ½æ˜¯mmï¼Œä¸è¦ä¹±æ”¹å•ä½ï¼Œä¸€èˆ¬éƒ½è¦ä»¥mmä¸ºå•ä½ï¼Œå’±ä»¬æ˜¯åšæœºå™¨äººçš„ï¼Œè¦ä¸“ä¸šä¸€äº›ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzRiMWM1NzFkNmE4YzFlZDU3NWM3ZTk2MzA4ZmIwN2RfWTdlV09aZUpYbGJUdWpsYzVBNDRZMkNUNnhQWnFmUEJfVG9rZW46RGh0cGJBNkJwb01yR0t4VUlHZ2NoZUc1bkpoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDFlZTE2NTY2MDQ0ZjMzMjZkZGQ3M2E4MTlmNWE0MjRfeVFDSjZ5SzZOUmk3VFNjQU5BN1M0SG1nQU85R3NteVhfVG9rZW46SnRPdWJCNGRGb2ZQbml4RHVHZmM4WkNBblRKXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

4.  ### jointæ ‡ç­¾
    

1.  #### ç®€ä»‹
    

urdf ä¸­çš„ joint æ ‡ç­¾ç”¨äºæè¿°æœºå™¨äººå…³èŠ‚çš„è¿åŠ¨å­¦å’ŒåŠ¨åŠ›å­¦å±æ€§ï¼Œè¿˜å¯ä»¥æŒ‡å®šå…³èŠ‚è¿åŠ¨çš„å®‰å…¨æé™ï¼Œæœºå™¨äººçš„ä¸¤ä¸ªéƒ¨ä»¶(åˆ†åˆ«ç§°ä¹‹ä¸º parent link ä¸ child link)ä»¥â€å…³èŠ‚â€œçš„å½¢å¼ç›¸è¿æ¥ï¼Œä¸åŒçš„å…³èŠ‚æœ‰ä¸åŒçš„è¿åŠ¨å½¢å¼: æ—‹è½¬ã€æ»‘åŠ¨ã€å›ºå®šã€æ—‹è½¬é€Ÿåº¦ã€æ—‹è½¬è§’åº¦é™åˆ¶....,æ¯”å¦‚:å®‰è£…åœ¨åº•åº§ä¸Šçš„è½®å­å¯ä»¥360åº¦æ—‹è½¬ï¼Œè€Œæ‘„åƒå¤´åˆ™å¯èƒ½æ˜¯å®Œå…¨å›ºå®šåœ¨åº•åº§ä¸Šã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTQ2MzNkZDk2NWE1YmMwNjdiN2RjYjZkMjdmMDhkOTFfMnF6Ujd0SHVJVXJWNmQ4dE1hR1pmdkhleGpDcXFpMUpfVG9rZW46WmpYQmJyZVJNbzM4bW54TEs4MWNuaGhmblhlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

*   **name** ï¼ˆå¿…å¡«ï¼‰ï¼šä¸ºå…³èŠ‚å‘½åï¼Œåç§°éœ€è¦å”¯ä¸€ã€‚
    
*   **type** ï¼ˆå¿…å¡«ï¼‰ï¼šè®¾ç½®å…³èŠ‚ç±»å‹ï¼Œå¯ç”¨ç±»å‹å¦‚ä¸‹ï¼š
    
    *   continuousï¼šæ—‹è½¬å…³èŠ‚ï¼Œå¯ä»¥ç»•å•è½´æ— é™æ—‹è½¬ã€‚
        
    *   revoluteï¼šæ—‹è½¬å…³èŠ‚ï¼Œç±»ä¼¼äº continuesï¼Œä½†æ˜¯æœ‰æ—‹è½¬è§’åº¦é™åˆ¶ã€‚
        
    *   prismaticï¼šæ»‘åŠ¨å…³èŠ‚ï¼Œæ²¿æŸä¸€è½´çº¿ç§»åŠ¨çš„å…³èŠ‚ï¼Œæœ‰ä½ç½®æé™ã€‚
        
    *   planerï¼šå¹³é¢å…³èŠ‚ï¼Œå…è®¸åœ¨å¹³é¢æ­£äº¤æ–¹å‘ä¸Šå¹³ç§»æˆ–æ—‹è½¬ã€‚
        
    *   floatingï¼šæµ®åŠ¨å…³èŠ‚ï¼Œå…è®¸è¿›è¡Œå¹³ç§»ã€æ—‹è½¬è¿åŠ¨ã€‚
        
    *   fixedï¼šå›ºå®šå…³èŠ‚ï¼Œä¸å…è®¸è¿åŠ¨çš„ç‰¹æ®Šå…³èŠ‚ã€‚
        

  

  

ä»¥ä¸‹æ˜¯å­çº§æ ‡ç­¾

  

*   **<parent>** ï¼ˆå¿…å¡«ï¼‰ï¼šæŒ‡å®šçˆ¶çº§linkã€‚
    
    *   **link** ï¼ˆå¿…å¡«ï¼‰ï¼šçˆ¶çº§linkçš„åå­—ï¼Œæ˜¯è¿™ä¸ªlinkåœ¨æœºå™¨äººç»“æ„æ ‘ä¸­çš„åå­—ã€‚
        
*   **<child>** ï¼ˆå¿…å¡«ï¼‰ï¼šæŒ‡å®šå­çº§linkã€‚
    
    *   **link** ï¼ˆå¿…å¡«ï¼‰ï¼šå­çº§linkçš„åå­—ï¼Œæ˜¯è¿™ä¸ªlinkåœ¨æœºå™¨äººç»“æ„æ ‘ä¸­çš„åå­—ã€‚
        
*   **<origin>** ï¼ˆå¯é€‰ï¼‰ï¼šè¿™æ˜¯ä»çˆ¶linkåˆ°å­linkçš„è½¬æ¢ï¼Œå…³èŠ‚ä½äºå­linkçš„åŸç‚¹ã€‚
    
    *   **xyz** ï¼šå„è½´çº¿ä¸Šçš„åç§»é‡ã€‚
        
    *   **rpy** ï¼šå„è½´çº¿ä¸Šçš„åç§»å¼§åº¦ã€‚
        
*   **<axis\>** ï¼ˆå¯é€‰ï¼‰ï¼šå¦‚ä¸è®¾ç½®ï¼Œé»˜è®¤å€¼ä¸ºï¼ˆ1ï¼Œ0ï¼Œ0ï¼‰ã€‚
    
    *   **xyz** ï¼šç”¨äºè®¾ç½®å›´ç»•å“ªä¸ªå…³èŠ‚è½´è¿åŠ¨ã€‚
        
*   **<calibration>** ï¼ˆå¯é€‰ï¼‰ï¼šå…³èŠ‚çš„å‚è€ƒä½ç½®ï¼Œç”¨äºæ ¡å‡†å…³èŠ‚çš„ç»å¯¹ä½ç½®ã€‚
    
    *   **rising** ï¼ˆå¯é€‰ï¼‰ï¼šå½“å…³èŠ‚å‘æ­£æ–¹å‘ç§»åŠ¨æ—¶ï¼Œè¯¥å‚è€ƒä½ç½®å°†è§¦å‘ä¸Šå‡æ²¿ã€‚
        
    *   **falling** ï¼ˆå¯é€‰ï¼‰ï¼šå½“å…³èŠ‚å‘æ­£æ–¹å‘ç§»åŠ¨æ—¶ï¼Œè¯¥å‚è€ƒä½ç½®å°†è§¦å‘ä¸‹é™æ²¿ã€‚
        
*   **<dynamics>** ï¼ˆå¯é€‰ï¼‰ï¼šæŒ‡å®šæ¥å¤´ç‰©ç†ç‰¹æ€§çš„å…ƒç´ ã€‚è¿™äº›å€¼ç”¨äºæŒ‡å®šå…³èŠ‚çš„å»ºæ¨¡å±æ€§ï¼Œå¯¹ä»¿çœŸè¾ƒä¸ºæœ‰ç”¨ã€‚
    
    *   **damping** ï¼ˆå¯é€‰ï¼‰ï¼šå…³èŠ‚çš„ç‰©ç†é˜»å°¼å€¼ï¼Œé»˜è®¤ä¸º0ã€‚
        
    *   **friction** ï¼ˆå¯é€‰ï¼‰ï¼šå…³èŠ‚çš„ç‰©ç†é™æ‘©æ“¦å€¼ï¼Œé»˜è®¤ä¸º0ã€‚
        
*   **<limit>** ï¼ˆå…³èŠ‚ç±»å‹æ˜¯revoluteæˆ–prismaticæ—¶ä¸ºå¿…é¡»çš„ï¼‰ï¼š
    
    *   **lower** ï¼ˆå¯é€‰ï¼‰ï¼šæŒ‡å®šå…³èŠ‚ä¸‹é™çš„å±æ€§ï¼ˆæ—‹è½¬å…³èŠ‚ä»¥å¼§åº¦ä¸ºå•ä½ï¼Œæ£±æŸ±å…³èŠ‚ä»¥ç±³ä¸ºå•ä½ï¼‰ã€‚å¦‚æœå…³èŠ‚æ˜¯è¿ç»­çš„ï¼Œåˆ™çœç•¥ã€‚
        
    *   **upper** ï¼ˆå¯é€‰ï¼‰ï¼šæŒ‡å®šå…³èŠ‚ä¸Šé™çš„å±æ€§ï¼ˆæ—‹è½¬å…³èŠ‚ä»¥å¼§åº¦ä¸ºå•ä½ï¼Œæ£±æŸ±å…³èŠ‚ä»¥ç±³ä¸ºå•ä½ï¼‰ã€‚å¦‚æœå…³èŠ‚æ˜¯è¿ç»­çš„ï¼Œåˆ™çœç•¥ã€‚
        
    *   **effort** ï¼ˆå¿…å¡«ï¼‰ï¼šæŒ‡å®šå…³èŠ‚å¯å—åŠ›çš„æœ€å¤§å€¼ã€‚
        
    *   **velocity** ï¼ˆå¿…å¡«ï¼‰ï¼šç”¨äºè®¾ç½®æœ€å¤§å…³èŠ‚é€Ÿåº¦ï¼ˆæ—‹è½¬å…³èŠ‚ä»¥å¼§åº¦æ¯ç§’ \[rad/s\] ä¸ºå•ä½ï¼Œæ£±æŸ±å…³èŠ‚ä»¥ç±³æ¯ç§’ \[m/s\] ä¸ºå•ä½ï¼‰ã€‚
        
*   **<mimic>** ï¼ˆå¯é€‰ï¼‰ï¼šæ­¤æ ‡ç­¾ç”¨äºæŒ‡å®šå®šä¹‰çš„å…³èŠ‚æ¨¡ä»¿å¦ä¸€ä¸ªç°æœ‰å…³èŠ‚ã€‚è¯¥å…³èŠ‚çš„å€¼å¯ä»¥è®¡ç®—ä¸º*value = multiplier \* other\_joint\_value + offset*ã€‚
    
    *   **joint** ï¼ˆå¿…å¡«ï¼‰ï¼šæŒ‡å®šè¦æ¨¡æ‹Ÿçš„å…³èŠ‚çš„åç§°ã€‚
        
    *   **multiplier** ï¼ˆå¯é€‰ï¼‰ï¼šæŒ‡å®šä¸Šè¿°å…¬å¼ä¸­çš„ä¹˜æ³•å› å­ã€‚
        
    *   **offset** ï¼ˆå¯é€‰ï¼‰ï¼šæŒ‡å®šè¦åœ¨ä¸Šè¿°å…¬å¼ä¸­æ·»åŠ çš„åç§»é‡ï¼Œé»˜è®¤ä¸º 0ï¼ˆæ—‹è½¬å…³èŠ‚çš„å•ä½æ˜¯å¼§åº¦ï¼Œæ£±æŸ±å…³èŠ‚çš„å•ä½æ˜¯ç±³ï¼‰ã€‚
        
*   **<safety\_controller>** ï¼ˆå¯é€‰ï¼‰ï¼šå®‰å…¨æ§åˆ¶å™¨ã€‚
    
    *   **soft\_lower\_limit** ï¼ˆå¯é€‰ï¼‰ï¼šæŒ‡å®šå®‰å…¨æ§åˆ¶å™¨å¼€å§‹é™åˆ¶å…³èŠ‚ä½ç½®çš„ä¸‹å…³èŠ‚è¾¹ç•Œï¼Œæ­¤é™åˆ¶éœ€è¦å¤§äºjointä¸‹é™ã€‚
        
    *   **soft\_upper\_limit** ï¼ˆå¯é€‰ï¼‰ï¼šæŒ‡å®šå®‰å…¨æ§åˆ¶å™¨å¼€å§‹é™åˆ¶å…³èŠ‚ä½ç½®çš„å…³èŠ‚ä¸Šè¾¹ç•Œçš„å±æ€§ï¼Œæ­¤é™åˆ¶éœ€è¦å°äºjointä¸Šé™ã€‚
        
    *   **k\_position** ï¼ˆå¯é€‰ï¼‰ï¼šæŒ‡å®šä½ç½®å’Œé€Ÿåº¦é™åˆ¶ä¹‹é—´çš„å…³ç³»ã€‚
        
    *   **k\_velocity** ï¼ˆå¿…å¡«ï¼‰ï¼šæŒ‡å®šåŠ›å’Œé€Ÿåº¦é™åˆ¶ä¹‹é—´çš„å…³ç³»ã€‚
        

  

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTMyNmNjNTFlMTY4OTAzNjRhZDRhOWJmODgzNmZiMDlfTWo1TFBoc1BOTTdRVkc5cmI5dVBpZXNZanJPMVR5eldfVG9rZW46UzlQc2JhdFhRb0U1ZmZ4NmpaN2NKeENhbmFiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å…³èŠ‚åç§°æ˜¯å¿…å¡«çš„ï¼Œä¸”æ˜¯å”¯ä¸€çš„ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjhkODQ3MWE2YjY0Y2M5YWJkNDNhNmFlZjcwMTU4YTFfVmt4V1RJalVpcnhIZ3BmY21vMnFBSGxYU0gwcE1aM3VfVG9rZW46Skt0NGJOd2Ixb0RGNzB4bWZZVGNyMHlQbjdlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å’±ä»¬æœ€å¸¸ç”¨çš„æ˜¯æœ‰é™ä½çš„revoluteç±»å‹çš„å…³èŠ‚ï¼Œcontinuouså¯æ— é™æ—‹è½¬çš„å…³èŠ‚ï¼Œfixedå›ºå®šå…³èŠ‚ï¼Œè¿™ä¸ªæ ¹æ®å…·ä½“çš„å…³èŠ‚ç±»å‹æ¥å¡«ã€‚

revoluteä¸€èˆ¬ç”¨äºå·¥ä¸šæœºå™¨äººæœºæ¢°è‡‚çš„å…³èŠ‚ï¼Œcontinuousæ¯”å¦‚èˆµè½®ç»“æ„çš„â€œå…³èŠ‚â€ï¼Œfixedå°±æ˜¯ä¸€äº›å›ºå®šçš„ä¸èƒ½è¿åŠ¨çš„ç»“æ„å…³èŠ‚ã€‚

  

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NGViNDMyMDNlMmUzYjdlOWUwYjhhZjhkNmY5NDU4YTRfMWE2R1dCY3Q5Z0NEUUJPRGp4MGUzb09aYjg3djQxMVhfVG9rZW46VWx6aGJqb3VNb2hpM214YlUzTmNPMkVYblVnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å­é›†æ ‡ç­¾å¾ˆå¤šï¼Œå’±ä»¬ç”¨çš„æœ€å¸¸ç”¨çš„å°±å‡ ä¸ªï¼Œè®°ä½å¸¸ç”¨çš„å³å¯ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjY2YmFlMjc1MmRmYjQ4YWIwNDhkOWQyMDllZjY1OTBfVk5iQWc5czJmZFBaeWd2SEpyMkZ2SEpZakxIU1VJZ0JfVG9rZW46RFJHS2I3VzRUbzQ4UFB4elZkOGNNU1cwbndjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

parentæ ‡ç­¾ï¼Œlinkå±æ€§æŒ‡å®šçˆ¶çº§linkçš„åå­—ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjMzMzg3ODU3OTkwMDdjYjM5NjlmODcwMWNhOTgwMzVfZVJqTDJpS2ZuVkdobXN6dEZoSlFGZGwwUzFxbmwzU3RfVG9rZW46VVBLUWJxeHZFb0VWZG14RGk4b2MyTHB6bm9nXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

childæ ‡ç­¾ç±»ä¼¼ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NGYzZjg2MzRiZWRiZjQ4YmNmNDJiMTczYzVmNmNlMWVfa2tvMERGTG1NOXpISUhERWQ2RTNaR0ViUWpqNHJQMjFfVG9rZW46Q0xOZWIxSFQ0b2EzVjZ4OU8xOWNYRjR1bkRTXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWM1MzAwZWM0ZGQyZTQzZGMwZjU0OGU0ODhmMjk2ODFfeEdRSTJLaFNuaXZzRnhJelJLaVNseTJncmd5TDRNWmJfVG9rZW46RkthZWJic0Q4bzltNDF4d2RBU2NUTWdxbnFxXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™ä¸ªè½´ï¼Œé»˜è®¤æ˜¯1ï¼Œ0ï¼Œ0ï¼Œä»¥Xè½´è¿›è¡Œæ—‹è½¬ï¼Œä½†æ˜¯å’±ä»¬ä¸€èˆ¬æ˜¯éœ€è¦è®¾ç½®çš„ï¼Œå¯é€šè¿‡SolidWorksè®¾ç½®åŸºå‡†è½´è¿›è¡Œè®¾ç½®ã€‚

  

å‰©ä¸‹çš„æ ‡ç­¾ï¼Œéƒ½ä¸å…³èŠ‚ç±»å‹æœ‰å…³ï¼Œæ¯”å¦‚limitï¼Œå¦‚æœå…³èŠ‚ç±»å‹æ˜¯revoluteï¼Œè€Œä¸”ä¸è®¾ç½®limitï¼Œé‚£ä¹ˆåœ¨joint\_state\_publisher\_guié‡Œæ˜¯æ— æ³•è°ƒå…³èŠ‚çš„è§’åº¦çš„ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjRhYWQ0ZDgxZjZlNGI5ZTFhZjk1ZDZhNTZlYzgyODhfaXZrSGNGZW13TUR2b2RYdXlzdFczdjcycVM2MktZRk1fVG9rZW46UFhBZGJyUWFKb0o5NzZ4djR4WmNHVXhLbnJlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å…¶ä»–æ ‡ç­¾ç”¨åˆ°çš„æ—¶å€™å†è¿›è¡Œä»‹ç»ã€‚

  

2.  #### ç»ƒä¹ 
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmEyODYxY2EyMmMxYjRmYmU0YjBkYjViMWQzYzBiMzJfUkNXam9xWXlTUXppU3ppZnc2VEJFbTZSa2JFRUtlb0JfVG9rZW46SWRVMWJtT0Q1b3dtQ3B4MXFqQmM1ZE11bjdEXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å…ˆæŠŠä¿©å…³èŠ‚ï¼Œå•ç‹¬å®ç°ï¼Œç„¶åå†é€šè¿‡jointå…³èŠ‚è¿›è¡Œè¿æ¥ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2I0OTNkYjE1NzQzNzNjNjY0MDcwZjJkM2ZhNTA5MzJfUmNucVRacERRWU1YbHQ4MHV5WkZORXJaNmdkRVZVSnBfVG9rZW46QVpKcWJ3SXlqb1phVWx4OTV0MmNlMFhKbkRlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTI5YzQ0MGI2OTEwZGY3YjRhZmE3YTA2NTYyOGEzMmJfdEw2R2ZCV05VTE5lMk0wSlphRzdCYmYyU1BCandaa1RfVG9rZW46UmxscWJJb1Bmb0hoREd4NDczNGNxUVBqbm1iXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MWI1MzFhYmE3M2I3NWM0MWYwNDNlMGQ2ZmYzZWNiYjVfeVNNenh2VkRzcVl1T3JSVUdBOWVnaG4yWFBNd0VDeXFfVG9rZW46S3hnamJaVHZNb2puVjN4djZ0Z2Nwa1hKbkRjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDZkYzhjMzQwNGU3OWVhOWFhNDFlNWRkYjEyMmIwMTVfMW5WUXQyVjJFOU45N2hhcWtydXpwUnJldzRKV3FpWjJfVG9rZW46T09wR2JkYXZWb1J5VlN4WXZYQ2M2VTR6bnpmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTcxZTQxNzhmMWFhYjgzNTA0ZjBiYTUyMDVmZTRmZjRfamd0WjdXRlJxN1REMUZOR2NxM1pUSzVMNWpXRUVCcFlfVG9rZW46WnpLa2I3STF2b3J1V1B4eFZFSWM0UDVKbnRlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDljZjMwYzIyODQ4ZDljZTNjYTUxMjJhYmUxZDNiM2VfdDFTcHd5eGpYSmJGbWNjSDZIeHUwOGU5Y3hMNnU5UkJfVG9rZW46UEtPVGJFWDcxbzM3M054VmlmQmN0eFN1bjRmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWNiNmUxMDg4ZmIxNmM4NmFkZDYyNjk1MGE3MmVlZjdfTkZCeE12bnE3TU5vMHdpMDFGM3VsckNCTDNzclduMVFfVG9rZW46QjRDMGIzMXc2b2NrUVN4Wm1mTGNYVEdLbkdjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

é»„è‰²çš„è¯ï¼Œçº¢å’Œç»¿è¦å¤šä¸€äº›ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmZmOWFiMzc2NzRjNWQ5NDA5YjEyMjEzYTIzMjlhNTZfd2VJeDU0aDZDSXExZGk5bGFhMXJWdnQyTXlFdXk4RzdfVG9rZW46SWFrZGJINGxib2N4UU54Q2w5d2NFaW5obm1kXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™æ˜¯çº¢è‰²ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Nzg3MjlmOTE2NjNiZDNlM2I2ZTNkZDBiYTIxMGMyYmRfWVBZM0dmVlZDRm9YcDBubVVvQnU0ZXdXWU5DNWNQbzRfVG9rZW46WXhUOWI4dUtabzVtaTl4NkMzTWN1VmRvbmFjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

åº•ç›˜Linkå°±åˆ›å»ºå®Œæ¯•äº†ï¼Œ

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTViNzBjMGZlZDQxOWRkNTczNjA5MmFlNTJjMGE2NDJfZmNsSVhDd2Q0cHo0Y1hVRVYxRDMzamY2VjBRSVQxdGVfVG9rZW46WDI1QmJaSE1Zb2dUWEp4MmNYdWNpRmFCblZDXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ‘„åƒå¤´Linkä¹Ÿåˆ›å»ºå®Œæ¯•äº†ï¼Œ

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjE4ZjE1ZDBkNDIyOGVhNDgyNmU4MTQzMTg2NTQzYmRfOFl4NE84TFJoUzFoQU9BOTBDcFlvckpqNThCMUZSYUZfVG9rZW46RVJQQWJnajBIb1czSGJ4M1dkSmN0OFVlblBiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å…³èŠ‚åå­—è®¾ç½®ä¸ºcamera2base\_linkï¼Œä¹Ÿå°±æ˜¯æ‘„åƒå¤´è¿æ¥åº•åº§çš„jointï¼Œç„¶åç±»å‹æ˜¯360åº¦éƒ½å¯ä»¥è½¬çš„continuousã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjMxZTk5Mzg2YzljNTc0MzgzMDgxNjIzM2Y5OWEyZjBfSUN0Yk1yeUJacG9VS2I2aWFKYktiQlh0MEFpOWtRaDJfVG9rZW46RUsxcGJUWjhpb0NZVE14VlBPVmNWUXlxbmVjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¡«å…¥å­çº§Linkä¸çˆ¶çº§Link

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTVhNjhiMWZkN2YxMmQ4OGJkM2JkNTIyZGE0N2QxZjdfWFd2Y24zWTdUbndNbkNISE5Nem9FM3hSc3MyMXpPa3FfVG9rZW46TXpreWJLOWdTb05Tbmh4NXpyMmNsMHdpbkJkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™æ ·ä¸¤ä¸ªLinkå°±é€šè¿‡è¯¥Jointè¿æ¥åˆ°ä¸€èµ·äº†ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWM4NWZhN2U4Njg2YzFiODE2NTJkZjU0NTdmNWIyNDdfWHh3UjQ3WDZ4RTNJOXNwN1YwcmNmVnh2U2FKeU90RTFfVG9rZW46RXlsVGJ2VEx4b1JmOFl4a21sM2NxelpzbmJnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿˜éœ€è¦è®¾ç½®è¿™ä¿©é€‰é¡¹ï¼Œå’±ä»¬å…ˆä¸è®¾ç½®ï¼Œå…ˆçœ‹é»˜è®¤æ˜¯ä»€ä¹ˆçŠ¶æ€ã€‚

```Bash
colcon build --packages-select cpp06_urdf
source install/setup.bash
ros2 launch cpp06_urdf display.launch.py model:=`ros2 pkg prefix --share cpp06_urdf`/urdf/urdf/demo03_joint.urdf
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTEyNTkxZmVjNjg2YjA1NTdhMzhhODk2Mzc0NmYzOWJfZ2RTSjFwd2ZmRnVqQzhqTUxZQmxEWWRiTmRxSjlDc0hfVG9rZW46QWNzTGJTR1Q5b1lGSjV4cmRPUWNVakJYbjlnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGE1MzFlMDAzN2YzN2MzMjdhNzQyZWExYTJhYzEwNDJfeXpseXoyRkFkN29kQ2lkUExRcGhZdnBnNlk0ZTVoVDhfVG9rZW46WTFiSGI4dElOb3FmWjB4b1JkcGNqZEd5bjJmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¯ä»¥æ‰“å¼€TFçœ‹çœ‹åæ ‡ç³»ï¼Œå‹¾ä¸ŠShow Namesï¼Œå‘ç°æ˜¯é‡åˆçš„ã€‚æ‰€ä»¥æ˜¾ç¤ºæ•ˆæœä¸æ»¡è¶³å’±ä»¬çš„é€»è¾‘ä¸šåŠ¡ã€‚ï¼ˆé»˜è®¤çŠ¶æ€ä¸‹ï¼‰ï¼Œæ‰€ä»¥éœ€è¦è®¾ç½®åç§»é‡ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzBmZThjMWUyODY0NzM4YTE0ZWY4YjkyM2U3ZDQ3YjJfeFFhNnZEc09YZnQ0SUZVNWQ1am1xSXlhaXFkdEdCR2ZfVG9rZW46VjVBemJieGhmb1QzQ0l4T3BVTWNjV2RQbjBlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¦‚æœå’±ä»¬æƒ³æŠŠæ‘„åƒå¤´ç§»åŠ¨åˆ°è½¦å¤´ï¼Œå¦‚å›¾æ‰€ç¤ºï¼Œåœ¨Xä¸Šæœ‰åç§»é‡ï¼ŒYæ²¡æœ‰ï¼Œä½†æ˜¯Zæœ‰ã€‚ç„¶årollï¼Œpitchï¼Œyawä¸Šæ²¡æœ‰ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzM2MTlmMDZlNDBmNDI0NjI1MjllYzQ4ZmZlYTMzOGVfY1dTTWR5QXgyWndkUFVqZFEzYWZaOWpjVlhIRzB5bGRfVG9rZW46SzJSbWJGR1VEb2NtUEF4UnBQM2NXUHBEbll1XzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjFhNDNjMjhmMTUzY2M3NzE0NzE4MmU4ZmFiZjViMzRfTXNRakpWU0ZTaVdibTE1dXNNWkRpWkRycGNxQTRjazZfVG9rZW46SXIwR2JCb3J1b1NQcWh4eGQ5U2NySEVQbmp2XzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NGYxNzIxNmVmYzE3NmZkNTlkY2FhMjhmZTg5MDhlMjVfeDlnOGI5MUZKZEtXS2NxSzRLQktuQXVZNlZhb2FzOGZfVG9rZW46UGRDVmIwRkh0b0MzNld4bmdLcWNsV2hmbmRHXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

Zçš„é«˜åº¦å°±æ˜¯1/2çš„åº•ç›˜é«˜åº¦+1/2çš„æ‘„åƒå¤´é«˜åº¦

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NGJmMzIwY2FkZWFhMzM5MzRkOTgwOGM1ZDZlNTlmMjJfVTRtYmxyWVlkQ2pSSkd1THAyVENscWpsZUlYN0p1aERfVG9rZW46Snp2TGJ4aDJhb0c2dnV4N290SmNEb3A0bjViXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjkwYmU4NDM0YzQzMmIxODZiMjdkMmUzM2NlZDZiMTFfTWFtTjQ2dlJiM2J6clNCd2FPN3NUSjlXV1RrQ1FtSUhfVG9rZW46VkFVbGJjc0hjbzhGNmp4Z3RjZGNTRTJRbjNkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODJkMmJmZTYwYzFkOGM3MjhjOWE4M2Q2MDZkOGIyZTRfSDV0VTZNWkxKZ3RlSGppSlk4Q29KYlhyWU9YRzlESDhfVG9rZW46VlVhWmIyTDVBb1hjRTZ4MjU0bGMxR1FCbkNkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å’±ä»¬è¦ç»•Yawæ—‹è½¬ï¼Œæ‰€ä»¥ä¹Ÿå°±æ˜¯ç»•Zè½´æ—‹è½¬ï¼Œä¹Ÿå°±æ˜¯001ï¼Œæ³¨æ„ä¸€å®šå¾—æ˜¯æ•´å½¢ï¼Œä¸èƒ½æ˜¯æµ®ç‚¹å‹ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjZlM2QyODE0NmNlMTJlOTU4Y2NmNDZlYWQ1ZmE1MTBfUWt2SzA5OEt5Q2JCcFFXMFJ2M09OVGh0RUJlUmh5VWNfVG9rZW46VW9FWWJOYmlObzB4d3B4VUd1S2NWSWFBblZoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æƒ³è¦çœ‹æ˜¯å¦èƒ½æ—‹è½¬ï¼Œè¦æ‰“å¼€joint\_state\_publisher\_guiï¼Œå¯ä»¥ä»launchä¸­æ‰“å¼€ï¼Œä¹Ÿå¯ä»¥ä»ç»ˆç«¯ä¸­ç›´æ¥æ‰“å¼€ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGRlMTY3NzRhZWFlZTk5M2E4NWYzNmQ4MjkwMjBhZmJfODNHTHhpM2g2VHdUc3pZcU9EWmZaVUs4VHhZcTlvVFlfVG9rZW46STlITmJ2ekJIb0FmSU14UjJlQmNLQW1abnJiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjQxYTNkYTdlOGY2ZDI4NzAzODMwNTQzNmY0NjZkYmJfTFgyNjlNd0t5b3RPVThueVZjdnpRSWZBZ0ZlbjVqTEdfVG9rZW46T3ZuVmJkR0ZpbzFDZU54d0FNVGM1Q3RpbmtkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Bash
ros2 run joint_state_publisher_gui joint_state_publisher_gui
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWNkZTEzYjI2MTIzZTA4NWJjYmFhYmI4Y2Q5MjM1NDVfTVRrNXphWTVBdk9VQjFMazZ4eTZCM3lVMkprVDR1amRfVG9rZW46VDdoRmJTZkpOb2trTE94TW5zZmNvakVNbnZlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWMwZjI4ZDE3NGQ4ZWU0NmIyYTcwOWUzZTliZmFhNDNfZU1IZWtWcFE5ZndMTEtVQWZXcGpFb1E2YUtzSGhnOHBfVG9rZW46S3VtRmJOREpFbzFyR2N4VU1TeGM1WnplbjlmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ‹–æ‹½æ»šåŠ¨æ¡å¯æ”¹å˜æ‘„åƒå¤´çš„Yaw

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjQ2Njc0NThjY2U4MTk5NGNkZjhjYjU3NmI0ZDI2MjRfMUlZUlhxb1dDalJsZU9YNG1XM3IwR1plTnFMZkU1RHdfVG9rZW46VjFwUGJVcDl6b1V4TUh4dmVQRmNiM2pSbjlnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

Randomizeæ˜¯éšæœºæ•°ï¼ŒCenteræ˜¯å›ä¸­(å¤ä½)

```XML
<!-- 
    éœ€æ±‚ï¼šåˆ›å»ºæœºå™¨äººæ¨¡å‹ï¼Œåº•ç›˜ä¸ºé•¿æ–¹ä½“ï¼Œ
         åœ¨é•¿æ–¹ä½“çš„å‰é¢æ·»åŠ ä¸€æ‘„åƒå¤´ï¼Œ
         æ‘„åƒå¤´å¯ä»¥æ²¿ç€ Z è½´ 360 åº¦æ—‹è½¬

 -->
 <robot name="joint_demo">
  <!-- å®šä¹‰é¢œè‰² -->
  <material name="yellow">
    <color rgba="0.7 0.7 0 0.8" />
  </material>
  <material name="red">
    <color rgba="0.8 0.1 0.1 0.8" />
  </material>
  <link name="base_link">
    <visual>
        <!-- å½¢çŠ¶ -->
        <geometry>
            <box size="0.5 0.3 0.1" />
        </geometry>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <material name="yellow"/>
    </visual>
  </link>

  <!-- æ‘„åƒå¤´ -->
  <link name="camera">
      <visual>
          <geometry>
              <box size="0.02 0.05 0.05" />
          </geometry>
          <origin xyz="0 0 0" rpy="0 0 0" />
          <material name="red" />
      </visual>
  </link>

  <!-- å…³èŠ‚ -->
  <joint name="camera2baselink" type="continuous">
      <parent link="base_link"/>
      <child link="camera" />
      <!-- éœ€è¦è®¡ç®—ä¸¤ä¸ª link çš„ç‰©ç†ä¸­å¿ƒä¹‹é—´çš„åç§»é‡ -->
      <origin xyz="0.2 0 0.075" rpy="0 0 0" />
      <axis xyz="0 0 1" />
  </joint>

</robot>
```

  

3.  #### joint\_state\_publisher
    

bug:Yawä¸ç¨³å®šï¼Œä¼šä¸€ç›´å›ä¸­ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2JlMmQxMDQyZjRkNzM2ZGNiOWFhYTBiNzY5NDMwZjhfdFFMMVRORFRIMnBnS2hvSmxCSnAxdEJvWm1ONXVCWVhfVG9rZW46VjQ5cWJJYUQzb1ExWGx4T0hFZGM4eUEzbmhnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmEwNDUzMWZmOThhNjZhODYyYWRkOGMzZTNkMGI5MjFfVnFqOTdsNHJYRGVVM2lZTDFXSExaYXVqQWx4Sms0TXFfVG9rZW46U3BaU2J2NGx1b2I2b3R4VmZva2M3RXZ6bnFoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzcwNWIwYzk2NDAxMGE2NGEzNmI2MmMxY2QyMDZjM2FfTVNCMHdjUk1XdHNEdFRJWWxsM2RHM3lPWlpqT0drZXRfVG9rZW46S1NrQ2IzZWxNb2FkSHZ4akl2bWNBazlNbjhjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å…¶å®æ˜¯å› ä¸ºlaunché‡Œå¯åŠ¨çš„å’Œç»ˆç«¯é‡Œå¯åŠ¨çš„å†²çªäº†ã€‚

è§£å†³æ–¹æ¡ˆï¼šåªå¯åŠ¨å…¶ä¸­ä¸€ä¸ªã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTFlMmQ1YjQ4MmQ0ZWVhZGE5NTE2MWQwNDg3MDIzODZfUUd0WHpLbGN0YmQ0Z1luSDNCMFZabE1WajJqYllIOHlfVG9rZW46R0JaUmJ3WDljb2VpcE54Nk56b2M4TE9zbmNnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è§£å†³æ–¹æ¡ˆï¼šç›´æ¥åœ¨Launché‡Œå¯åŠ¨GUIç‰ˆæœ¬çš„ï¼Œè¿™æ ·å³å¯è§£å†³ã€‚(ä½†æ˜¯ä¸å»ºè®®)

å»ºè®®æ–¹æ¡ˆï¼šç”¨éGUIç‰ˆæœ¬çš„ï¼Œå› ä¸ºä»¥åï¼Œæˆ‘ä»¬æ§åˆ¶å…³èŠ‚æ˜¯ç”¨ç¨‹åºæ§åˆ¶ï¼Œè€Œä¸æ˜¯GUIæ§åˆ¶ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDNmODhlMDBkMTk2YWYzMzYxYTQ2ZWNkZGU1N2EwMDRfZWdhRXlGckFNWXlEM1lqSXE2eHdUM1BEa0Y2TXRaOTlfVG9rZW46S1UyT2JGQmhIb1NHWEN4cHk0WGNOQWdCbmJoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¦‚æœåªæ˜¯æƒ³å±•ç¤ºæ¨¡å‹ï¼Œç”¨GUIï¼Œ

å¦‚æœæƒ³ç”¨ç¨‹åºæ§åˆ¶ï¼Œç”¨æ™®é€šç‰ˆã€‚

  

4.  #### base\_footprint
    

bug:æœºå™¨äººåº•ç›˜åŠæ²‰å…¥åœ°ä¸‹

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDI5MzczMGQwMmIyMDg0ZWVlY2M2MmNiNzYzY2Y4MTNfM3p4YXpZWUZMSEQ5YWNMUHIxRjRWazA2RVhNUU90SnNfVG9rZW46UUNudGJ3Y25QbzZRcWd4UWQ5VWN3ZjFvbnNnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmQ2ZDFmZTFkNWI5ZDg4NDdiMDE5M2I3MThiYjQ0YmJfbUVPa2VHZkIwdjlDRkQ5aXU0c0xyZXVsUFFiRVplMU1fVG9rZW46VTRWUWIyUVp3b0R2em94M01uVGNhcEQybnZjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODJlMDdhZmFmOWE2Y2RlY2ZiZGJkNTYyY2ZhMTYxNTJfWTRGcW5yd2pnRjB3aWlsZzl1VGxad0F5RzFBaXBmMmNfVG9rZW46SDJoUGJ4ZUx6bzNLTjh4MHZnUWNwaGJIbnZkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2ZjODRjZmY5MmJkMjhhOTU1MTBlYjkwZDBmZTU5ZWJfYXRVeGJ2R3dndzAzQVdMcUp5TTZKQlN6RDB0TDNIaUdfVG9rZW46SnJ6NWJuMWhUb1dmY2J4dG93YmN2QThJbnhXXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```xml
  <link name="base_footprint">
    <visual>
      <geometry>
          <sphere radius="0.001"/>
      </geometry>
    </visual>
  </link>
```
```xml
    <joint name="baselink2basefootprint" type="fixed">
      <parent link="base_footprint"/>
      <child link="base_link"/>
      <origin xyz="0.0 0.0 0.05"/>
    </joint>
```

Zçš„åç§»é‡è¦å¡«ä¸‹æ²‰åº•ç›˜çš„è·ç¦»ï¼Œä¹Ÿå°±æ˜¯æ•´è½¦åº•ç›˜çš„ä¸€åŠã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDA3OWYzMjAxYmVjZjk4OTgwOWZhMGY3MzQ1NTAyY2FfcmpBNXQ0clFqV1ZSOW51ZmVhdkFxTWhNb2VoTGFHUEhfVG9rZW46TW0yYmIyRVFUb2Z2UWt4VjNuYWM1dExwbm5oXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTU5NDYzNTY4ZmRiNGZiNDY2Y2JiYmI4NmMxNTUxYmJfODI2VlBhTU1IMkxGRHpzeUxmQlNqeDFsc0U1bWpqbnRfVG9rZW46RGpBUmIwTmR6b0FqU2R4eWpxdWNFeGlUbnV0XzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¿®æ”¹å‚è€ƒåæ ‡ç³»

å…¶å®è¿™ä¸ªä¼˜åŒ–ï¼Œå¯ä»¥ä¸åšï¼Œå½±å“ä¸å¤§ã€‚ä½†æ˜¯å»ºè®®ç”¨æœ‰basefootprintç‰ˆæœ¬çš„ã€‚

```XML
<!-- 
    éœ€æ±‚ï¼šä¸ºæœºå™¨äººæ¨¡å‹æ·»åŠ  base_footprint

 -->
 <robot name="base_footprint_demo">
  <!-- å®šä¹‰é¢œè‰² -->
  <material name="yellow">
    <color rgba="0.7 0.7 0 0.8" />
  </material>
  <material name="red">
    <color rgba="0.8 0.1 0.1 0.8" />
  </material>

  <link name="base_footprint">
    <visual>
      <geometry>
          <sphere radius="0.001"/>
      </geometry>
    </visual>
  </link>

  <link name="base_link">
    <visual>
        <!-- å½¢çŠ¶ -->
        <geometry>
            <box size="0.5 0.3 0.1" />
        </geometry>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <material name="yellow"/>
    </visual>
  </link>

  <joint name="baselink2basefootprint" type="fixed">
    <parent link="base_footprint"/>
    <child link="base_link"/>
    <origin xyz="0.0 0.0 0.05"/>
  </joint>

  <!-- æ‘„åƒå¤´ -->
  <link name="camera">
      <visual>
          <geometry>
              <box size="0.02 0.05 0.05" />
          </geometry>
          <origin xyz="0 0 0" rpy="0 0 0" />
          <material name="red" />
      </visual>
  </link>

  <!-- å…³èŠ‚ -->
  <joint name="camera2baselink" type="fixed">
      <parent link="base_link"/>
      <child link="camera" />
      <!-- éœ€è¦è®¡ç®—ä¸¤ä¸ª link çš„ç‰©ç†ä¸­å¿ƒä¹‹é—´çš„åç§»é‡ -->
      <origin xyz="0.2 0 0.075" rpy="0 0 0" />
      <axis xyz="0 0 1" />
  </joint>

</robot>
```

  

  

5.  ### ç»ƒä¹ 
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmRjODBjMGFlOWJlMmU2ZGExMWE2YWQwNzg5NzI0MDNfeERlOXEwanNvcGV4TDNoRmJsUGc3VUs5SENhekxpbDFfVG9rZW46V2xBYmJKbzBwb1gxR1B4U0t5ZmNZSEszblRoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ²¡å¿…è¦å¤ªæ·±å…¥ç»ƒä¹ ï¼Œå’±ä»¬å¯ä»¥ç›´æ¥ç”¨SolidWorkså»ºæ¨¡ï¼Œæ›´ä¸ºå‹å¥½ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmRkZGE2M2NlMWJmMTliNzY5Y2MwMDMzYzFjYzJkNjJfdjJod3BldWZNc0FOdU11eVRMdWRlakE2UldsTDdBaEhfVG9rZW46SEE3NmJ2cFBObzFYUkV4R24wVGN1cHNFbk9oXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```XML
<!-- 
    ç»ƒä¹ ï¼šç¼–å†™å››è½®å·®é€Ÿæœºå™¨äººçš„åº•ç›˜æ¨¡å‹

    å‚æ•°ï¼š
        é•¿ 0.2m
        å®½ 0.12m
        é«˜ 0.07m
        ç¦»åœ° 0.015m
        è½¦è½®åŠå¾„ï¼š0.025m
        è½¦è½®åšåº¦ï¼š0.02m

 -->
 <robot name="exercise_demo">
  <!-- å®šä¹‰é¢œè‰² -->
  <material name="yellow">
    <color rgba="0.7 0.7 0 0.8" />
  </material>
  <material name="red">
    <color rgba="0.8 0.1 0.1 0.8" />
  </material>
  <material name="gray">
    <color rgba="0.2 0.2 0.2 0.8" />
  </material>

  <link name="base_footprint">
    <visual>
      <geometry>
          <sphere radius="0.001"/>
      </geometry>
    </visual>
  </link>
  <!-- è½¦ä½“ -->
  <link name="base_link">
    <visual>
        <!-- å½¢çŠ¶ -->
        <geometry>
            <box size="0.2 0.12 0.07" />
        </geometry>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <material name="yellow"/>
    </visual>
  </link>

  <joint name="baselink2basefootprint" type="fixed">
    <parent link="base_footprint"/>
    <child link="base_link"/>
    <origin xyz="0.0 0.0 0.05"/>
  </joint>

  <!-- ==============è½¦è½®================= -->
  <!-- å·¦å‰è½® -->
  <link name="front_left_wheel">
      <visual>
          <geometry>
              <cylinder radius="0.025" length="0.02"/>
          </geometry>
          <origin xyz="0 0 0" rpy="1.57 0 0" />
          <material name="gray" />
      </visual>
  </link>

  <!-- å·¦å‰è½®å…³èŠ‚ -->
  <joint name="frontleftwheel2baselink" type="continuous">
      <parent link="base_link"/>
      <child link="front_left_wheel" />
      <!-- éœ€è¦è®¡ç®—ä¸¤ä¸ª link çš„ç‰©ç†ä¸­å¿ƒä¹‹é—´çš„åç§»é‡ -->
      <origin xyz="0.075 0.06 -0.025" rpy="0 0 0" />
      <axis xyz="0 1 0" />
  </joint>

  <!-- å³å‰è½® -->
  <link name="front_right_wheel">
    <visual>
        <geometry>
            <cylinder radius="0.025" length="0.02"/>
        </geometry>
        <origin xyz="0 0 0" rpy="1.57 0 0" />
        <material name="gray" />
    </visual>
  </link>

  <!-- å³å‰è½®å…³èŠ‚ -->
  <joint name="frontrightwheel2baselink" type="continuous">
      <parent link="base_link"/>
      <child link="front_right_wheel" />
      <!-- éœ€è¦è®¡ç®—ä¸¤ä¸ª link çš„ç‰©ç†ä¸­å¿ƒä¹‹é—´çš„åç§»é‡ -->
      <origin xyz="0.075 -0.06 -0.025" rpy="0 0 0" />
      <axis xyz="0 1 0" />
  </joint>

  <!-- å·¦åè½® -->
  <link name="back_left_wheel">
    <visual>
        <geometry>
            <cylinder radius="0.025" length="0.02"/>
        </geometry>
        <origin xyz="0 0 0" rpy="1.57 0 0" />
        <material name="gray" />
    </visual>
  </link>

  <!-- å·¦åè½®å…³èŠ‚ -->
  <joint name="backleftwheel2baselink" type="continuous">
    <parent link="base_link"/>
    <child link="back_left_wheel" />
    <!-- éœ€è¦è®¡ç®—ä¸¤ä¸ª link çš„ç‰©ç†ä¸­å¿ƒä¹‹é—´çš„åç§»é‡ -->
    <origin xyz="-0.075 0.06 -0.025" rpy="0 0 0" />
    <axis xyz="0 1 0" />
  </joint>

  <!-- å³åè½® -->
  <link name="back_right_wheel">
    <visual>
        <geometry>
            <cylinder radius="0.025" length="0.02"/>
        </geometry>
        <origin xyz="0 0 0" rpy="1.57 0 0" />
        <material name="gray" />
    </visual>
  </link>

  <!-- å³åè½®å…³èŠ‚ -->
  <joint name="backrightwheel2baselink" type="continuous">
    <parent link="base_link"/>
    <child link="back_right_wheel" />
    <!-- éœ€è¦è®¡ç®—ä¸¤ä¸ª link çš„ç‰©ç†ä¸­å¿ƒä¹‹é—´çš„åç§»é‡ -->
    <origin xyz="-0.075 -0.06 -0.025" rpy="0 0 0" />
    <axis xyz="0 1 0" />
  </joint>


</robot>
```

ç»ˆç«¯è¿è¡Œ

```Bash
ros2 launch cpp06_urdf display.launch.py model:=`ros2 pkg prefix --share cpp06_urdf`/urdf/urdf/demo05_exercise.urdf
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmZjZDdiYmVkOTVhOTY1YTU4YWNiMThjOGQyNWJkMmZfaGJrM0doV1hkSWZDSGxOVmF6QWJaUmZ0ZUJIUWNUdXlfVG9rZW46T0NzVGJYVXFxb3NacHd4d0lYZGNseVl6bjI3XzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

  

5.  ## URDFå·¥å…·
    

åœ¨ ROS2 ä¸­ï¼Œæä¾›äº†ä¸€äº›URDFæ–‡ä»¶ç›¸å…³çš„å·¥å…·ï¼Œæ¯”å¦‚:

*   `check_urdf`å‘½ä»¤å¯ä»¥æ£€æŸ¥å¤æ‚çš„ urdf æ–‡ä»¶æ˜¯å¦å­˜åœ¨è¯­æ³•é—®é¢˜ï¼›
    
*   `urdf_to_graphviz`å‘½ä»¤å¯ä»¥æŸ¥çœ‹ urdf æ¨¡å‹ç»“æ„ï¼Œæ˜¾ç¤ºä¸åŒ link çš„å±‚çº§å…³ç³»ã€‚
    

å½“ç„¶ï¼Œè¦ä½¿ç”¨å·¥å…·ä¹‹å‰ï¼Œè¯·å…ˆå®‰è£…ï¼Œå®‰è£…å‘½ä»¤ï¼š`sudo apt install liburdfdom-tools`ã€‚

1.  ### **check\_urdf è¯­æ³•æ£€æŸ¥**
    

è¿›å…¥urdfæ–‡ä»¶æ‰€å±ç›®å½•ï¼Œè°ƒç”¨ï¼š`check_urdf urdfæ–‡ä»¶`ï¼Œå¦‚æœä¸æŠ›å‡ºå¼‚å¸¸ï¼Œè¯´æ˜æ–‡ä»¶åˆæ³•ï¼Œå¦åˆ™éæ³•ã€‚

ç¤ºä¾‹ï¼Œç»ˆç«¯ä¸‹è¿›å…¥åŠŸèƒ½åŒ… cpp06\_urdf çš„ urdf/urdf ç›®å½•ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š

```Bash
check_urdf demo05_exercise.urdf
```

urdf æ–‡ä»¶å¦‚æ— å¼‚å¸¸ï¼Œå°†æ˜¾ç¤ºurdfä¸­linkçš„å±‚çº§å…³ç³»ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjE3ZWY2M2U0M2E4ZGE4NjhhYzAwM2YwOTcxOTg3MTNfWE8wTHNKTXR6b1Zqd3NFMmpuUlN0MUJSNFJJRmw2VEFfVG9rZW46SXlObGI2WE1Lb3ZvNVd4TFlDeGNqb1k3bjRjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¦åˆ™å°†ä¼šç»™å‡ºé”™è¯¯æç¤ºã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODc0MGUyODdlNWNjMjdjMTI0ZTIwOTFjMGY1NmY5ZGVfVGE5Tm5OZHo5RlRraWhyd05zUTBVZndhMjEyaDVLODNfVG9rZW46VmRjdGJvelRXb3JWMnB4RVg3U2NYM0djblZmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ¼”ç¤ºé”™è¯¯ï¼Œ

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWUyYTJjZGU3MTJkYWZiNGRlZGE3ODJmN2QxMzIwMDRfaHg0d3R1VmQ5Q3VPUHJTSXhOdGJzaXZSU001QlFRUElfVG9rZW46S01EOWJ1QlJVb2hxaEt4ZFlzTmNQcVlKbjFlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

2.  ### **urdf\_to\_graphviz ç»“æ„æŸ¥çœ‹**
    

è¿›å…¥urdfæ–‡ä»¶æ‰€å±ç›®å½•ï¼Œè°ƒç”¨:`urdf_to_graphviz urdfæ–‡ä»¶`ï¼Œå½“å‰ç›®å½•ä¸‹ä¼šç”Ÿæˆ pdf æ–‡ä»¶ã€‚

ç¤ºä¾‹ï¼Œç»ˆç«¯ä¸‹è¿›å…¥åŠŸèƒ½åŒ… cpp06\_urdf çš„ urdf/urdf ç›®å½•ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š

```Bash
urdf_to_graphviz demo05_exercise.urdf
```

å½“å‰ç›®å½•ä¸‹ï¼Œå°†ç”Ÿæˆä»¥urdfä¸­robotåç§°å‘½åçš„.pdfå’Œ.gvæ–‡ä»¶ï¼Œæ‰“å¼€pdfæ–‡ä»¶ä¼šæ˜¾ç¤ºå¦‚ä¸‹å›¾å†…å®¹ï¼š

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDdhNmY2OGE1MjcwZGFlOTM3Y2U5MzdkZjEyYzZjNDZfZWIwVHVLZTF6aU90bW0yUE1sNFVPNU9IUWNhUjRYOHRfVG9rZW46RDRpMWJ1QlFtb1RyYmV4ZFBQMGNPN1I2bnlkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

åœ¨ä¸Šå›¾ä¸­ä¼šä»¥æ ‘å½¢ç»“æ„æ˜¾ç¤ºlinkä¸jointçš„å…³ç³»ã€‚

**æ³¨æ„ï¼š** è¯¥å·¥å…·ä»¥å‰åä¸º`urdf_to_graphiz`ç°å»ºè®®ä½¿ç”¨`urdf_to_graphviz`æ›¿ä»£ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTkxZGMyNDVjMTgxYTRjYTFjZTA2NDE3ZjNmYmUyNWZfWXllUDlBeERLc0ttNW1sNk9YUXZnV1ZyWVdqZ2RYbTBfVG9rZW46TDB0SGIyYmVKbzlvUVB4NEFzZGNtbWlvbnlkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

`urdf_to_graphiz`æ˜¯å†å²ç‰ˆæœ¬ï¼Œå·²ç»è¢«åºŸå¼ƒï¼Œå»ºè®®ç”¨`urdf_to_graphviz`ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzZjYzU0NjJiNjQ3M2U3YzU2NGViYmEzMDhmOTdkNDFfS0dheUdOMFAzQzg1QVd0WHNhcU1vNndiV1hwUjIzUUhfVG9rZW46R2dWQmJZUFNmb3NoM2J4REFWSGNnQWQ3bndiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjMwNjZhZTRlNjUzMGQ0OGY1OWNjY2FmNGY0NDQzYWZfcDd0SGpYUjV2WFVsSHNCRGlQMW1PbDMwOGZPaFVyOWdfVG9rZW46R0UweGJzWGZ1b0FkMlV4eXlVUWNWU0RObjdnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmMyNWI1ZDYxMDVhZTBmZDgwYjE0ZWJlN2Y1MmRhZmNfMUx0aFExdjBrMmxkQjJHOVU2MU9yMml2RW1Mc2VnMDFfVG9rZW46VW1IZGJsWkkyb1hiVWR4QTBJeGNYUTJ3bnJjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTAyN2IxN2NhYTQ3NjhhNTA1Y2FhYzAwZGU0Y2QwODNfc2VHVklSQndHcUJ3STE3Mk9YR0lZdUtqTkJidktPVlRfVG9rZW46Umt4OWJEN1lCb2ZtVVZ4UzhsaWM5ZTlzbldkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

é»‘è‰²æ–¹æ¡†ä»£è¡¨Linkï¼Œè“è‰²ä»£è¡¨Jointï¼Œä¹Ÿä¼šå±•ç¤ºå¹³ç§»é‡å’Œæ—‹è½¬åº¦ç­‰ä¿¡æ¯ã€‚

  

  

6.  ## SW2URDF
    

1.  ### solidworksç®€ä»‹
    

SolidWorksæ˜¯ä¸€ç§è®¡ç®—æœºè¾…åŠ©è®¾è®¡ï¼ˆCADï¼‰å’Œè®¡ç®—æœºè¾…åŠ©åˆ¶é€ ï¼ˆCAMï¼‰è½¯ä»¶ï¼Œç”±Dassault SystÃ¨mes SolidWorks Corp.å¼€å‘ã€‚å®ƒä¸»è¦ç”¨äºå·¥ç¨‹è®¾è®¡å’Œåˆ¶é€ ï¼Œå¯ç”¨äºåˆ›å»º3Dä¸‰ç»´æ¨¡å‹ã€è¿›è¡Œè£…é…è®¾è®¡ã€è¿›è¡Œå·¥ç¨‹åˆ†æå’Œç»˜å›¾ç­‰ã€‚SolidWorkså…·æœ‰ç›´è§‚çš„ç”¨æˆ·ç•Œé¢å’Œå¼ºå¤§çš„åŠŸèƒ½ï¼Œä½¿å·¥ç¨‹å¸ˆå’Œè®¾è®¡å¸ˆèƒ½å¤Ÿå¿«é€Ÿè€Œç²¾ç¡®åœ°è®¾è®¡å¤æ‚çš„é›¶éƒ¨ä»¶å’Œè£…é…ä½“ã€‚è¯¥è½¯ä»¶å¹¿æ³›åº”ç”¨äºæœºæ¢°ã€èˆªç©ºèˆªå¤©ã€æ±½è½¦ã€åŒ»ç–—è®¾å¤‡ç­‰è¡Œä¸šï¼Œæ˜¯å·¥ç¨‹è®¾è®¡é¢†åŸŸçš„é‡è¦å·¥å…·ä¹‹ä¸€ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDM4ZjQ1OTdmYjMzZDc4NTI3MWE1NDJjZWUyNWU3MjNfRnhsc3oyYU15SkZibndMUUhqTjJSU1R4TElVWTZsNWxfVG9rZW46RmZGWmJ3TDBIb0ZKbHd4ZE0ycmNoYzEwbk9lXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

2.  ### solidworksæ’ä»¶sw2urdfä»‹ç»
    

sw2urdfæ’ä»¶ç»´åŸºç™¾ç§‘ï¼š

https://wiki.ros.org/sw\_urdf\_exporter

githubä¸‹è½½é“¾æ¥ï¼š

https://github.com/ros/solidworks\_urdf\_exporter/releases

è™½ç„¶githubé“¾æ¥ä¸Šå†™ç€åªæ”¯æŒåˆ°SW2021ï¼Œä½†æ˜¯ç›®å‰å‘ç°æœ€æ–°ç‰ˆSW(2022ã€2024ç»æµ‹è¯•)ä¹Ÿæ˜¯å¯ä»¥æ­£å¸¸ç”¨çš„ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDBiNWEzNDI3ZTE1NmFlYmE0MGQ5ZjgyZTc0ZDVkNjlfazI4dWozalJIbVdoT0xiTDBaQ29qeDlMQ3h0dHdja0hfVG9rZW46QTlvYWI0V0I5b0poVWN4Zko4MGNPUmlFbmZYXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

3.  ### å®‰è£…sw2urdf
    

1.  å»githubä¸Šä¸‹è½½sw2urdfæ’ä»¶ï¼ˆè¿™ä¸ªSWç‰ˆæœ¬ä¸ç”¨ç®¡ï¼Œå®æµ‹åœ¨åç»­çš„SWç‰ˆæœ¬ä¾ç„¶å¯ç”¨ï¼‰
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTIwODUyYTNmZjIzNzQ3ZjM0YzJjN2E2NTE2MDliNDlfcDBSeXdSekpYTHlrbWJ4NTFhY2ZaZ3hHWlVPSjRFRndfVG9rZW46Skw0OGJXN3Nrb05tSGJ4VER6N2NkWnB0bmtmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

2.  æŸ¥çœ‹SWçš„å®‰è£…è·¯å¾„
    

æ¯”å¦‚æˆ‘çš„è·¯å¾„"C:\\Program Files\\SOLIDWORKS Corp\\SOLIDWORKS\\"

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTgwNjA4YzFmMGYzMTRmYjNkZWRjYWIzM2RkZTUwYjBfVVQzZVpFRXhiZ0VDaDV2OUE4RnNYVkFjYXFidnVabXdfVG9rZW46RzkwNGJYaXpXb3hLVUp4Z0NJdGNEZHYxbjhnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

3.  æ‰“å¼€æ’ä»¶å®‰è£…å™¨ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¼šè‡ªåŠ¨æ‰¾åˆ°ä½ çš„SWè·¯å¾„è¿›è¡Œå®‰è£…ï¼Œå¦‚æœæ²¡æœ‰è‡ªåŠ¨æ‰¾åˆ°è·¯å¾„å®‰è£…ï¼Œé‚£ä¹ˆéœ€è¦æ‰‹åŠ¨é€‰å–SWå®‰è£…è·¯å¾„ã€‚
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2FkYjFjNzE3MmY0YmFjYjJiYzRhNWRjZWU0MmZjOTJfSXZHNFRDNFRUM3lZbGRaUENzQmpJeDdzNEJ1VVF6NE9fVG9rZW46WEVneWJDYWpFb3pWTFJ4RXl5MGNCR3ZJblRiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

4.  æŸ¥çœ‹æ’ä»¶æ˜¯å¦å®‰è£…æˆåŠŸ
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjljOTYwMzFhMWU2Mjc3YWI4YjllN2I2OGUzNjNjN2FfdUJSQ0lWYzlmM2xXeGNkblBuRThXbEJkM0w4RFl4SWdfVG9rZW46UGIzU2JDZzlFb1NGM1B4QU9aOWNuejg2bkhkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTA2MGE0ZWJiMDlhYTJiODBkYzI5NTI4OThlMmJhYzNfRWRPazlBM0tzbWwxTk9uRFRmSmxHVDZOenRLRlQ3OFZfVG9rZW46U2lScGJQNklFb1NEWVZ4eFRDNGNkUmI5bnFmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¦‚å›¾è¿™æ ·å°±æ˜¯å®‰è£…æˆåŠŸäº†ã€‚

4.  ### å¯¼å‡ºURDFä¸Meshes
    

1.  å¦‚å›¾æ˜¯ä¸€ä¸ªæ ‡å‡†çš„SWè£…é…ä½“å›¾(å¤§å®¶ä¹Ÿå¯ä»¥å°è¯•è‡ªå·±æ‰‹æ’¸ä¸€ä¸ªï¼Œé‡Œé¢æ²¡æœ‰ä¼ åŠ¨è£…ç½®ä¹Ÿå¯ä»¥)
    

è¿™ä¸ªè¿‡ç¨‹çœ‹ä¸å¤ªæ‡‚çš„è¯ï¼Œå¯ä»¥å‚è€ƒä¸€ä¸‹å¤æœˆå±…è€å¸ˆçš„è§†é¢‘ï¼Œç»“åˆæœ¬æ•™ç¨‹ä¸€èµ·å­¦ä¹ ã€‚ ã€SolidWorksæ¨¡å‹å¯¼å‡ºurdfï¼ˆå¤æœˆå±…è€å¸ˆï¼‰-å“”å“©å“”å“©ã€‘https://www.bilibili.com/video/BV1Tx411o7rH

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODBlNTRhNDcwZGU5NTIwY2MwMjU5ZTQ2MWZmYWFlZDFfeXQxTExzc2xOMGc4QnUweVdXQUg3cXBmU3ljSXRQZG1fVG9rZW46VjZXbGJPOFM5b2RtcWh4U2NqMWNmR2NFbmloXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

2.  å¯¹jointå…³èŠ‚å»ºç«‹åŸºå‡†è½´
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTQyMDk4OGFlMDA2MzhmMjE0NzAyZjgxMmY0MjQ3MTlfTDAwaTh3NjQ1dkhyMmxPMUlBblJ6NVRHaHRQUVVaRzdfVG9rZW46S2kyUWJNUzJLb2VZenB4VXBRMmNST1ZZbjRnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

é€‰æ‹©å…³èŠ‚çš„åœ†æŸ±é¢æˆ–è€…å…¶ä»–é¢ï¼Œå¯¹è½¬è½´è¿›è¡Œæ ‡å®š

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzgyNzk5MjEyMWZjZTAwZTJmYWNmMmIyNzliMGRiZDlfMzM2cTN4WndZNVVvcFJZYmZ0dzZ4WDZNTUxjdUhtNUpfVG9rZW46TGdqSmI2TzFlb215bTJ4YmJHNWNsRGRWbnFlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¦‚æœå»ºå®ŒåŸºå‡†è½´ï¼Œå‘ç°ä¸èƒ½å¤Ÿæ­£å¸¸å±•ç¤ºï¼Œé‚£ä¹ˆå°±æ‰“å¼€è¯¥é€‰é¡¹ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTAwZWU5MTFkY2Y5YjVhMDFiYWEzMmVmZWVlOWMwMjhfR1R6d2dxRG4ycEw0eFVvcG1QaVZHdDB2Zkk0NTBHcmVfVG9rZW46WWxMc2J4cmpqb2tiWlN4Qk8xTGM5ckVBbkpmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjgyMTc1MzEyOTA4ZTlmODE3NjdhYmRjMzkxZGM0NWNfRnpDY3ViVmY5N3ZOVHBvbHBKbDNsckNrV2ZDbHF3dGdfVG9rZW46Q0JZVmJjRTJhb1p4cnF4OFJRN2MyeDZNbmtnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å»ºå®Œæ‰€æœ‰ç³»å

3.  æ‰“å¼€export as URDFé€‰é¡¹
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDJkNzRkNmE3MzI2YjU1N2ZlN2RjYmYwYzAxYWEzNzhfd1lpV0VOVUlCSlhUanpLT1AxWEJJTElOWklIYXVDaHVfVG9rZW46SmZTQ2I4WFd4b2EyMTd4bnJiT2NYRjVqblBjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

4.  éœ€è¦å…ˆé€‰æ‹©base\_linkåŸºåº•åˆšä½“
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjA4N2Y1MGMwMTNiZWNiOTE2ZTk1ODZmNDY5Y2ZjYjdfTDhFQnBMODZCS21SNDltZ2EzTmR4aHRCZmRQUEUxU1hfVG9rZW46VVhVcGJ3RVk5b3JWcnZ4RzJqd2NiY01UbkxlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™é‡Œçš„Global Originå¯èƒ½éœ€è¦è‡ªå·±é€‰æ‹©ï¼Œå°±é€‰æ‹©Origin\_Globalå³å¯ï¼Œä½†æ˜¯ä¸€èˆ¬é€‰æ‹©automatically Generateå³å¯ã€‚

5.  å› ä¸ºä»–çš„base\_linké€šè¿‡ä¸€ä¸ªjointè¿æ¥äº†ä¸€ä¸ªchild\_linkï¼Œæ‰€ä»¥ï¼Œè¿™ä¸ªé€‰é¡¹è¦å¡«1ã€‚
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTlhOGIwMjY1MDlhYmRlMjMyZTBjNmE4NTFmOTRlY2FfdkVUZ3JjOGE0NWZLNVhRSWF5dFlMTHZBWXN5M2x2ZVhfVG9rZW46WDdSNmI4Z2Zwb3hKRGt4WGhvcGNRd3V1bnRnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2FlYTIxMzVlYTJlNmRiNDBmZGY0MTAyZTcxMTFhZGFfcWRzQ2dMSGE3b3VmSTZGTzhqb21BNEg2cTNIVjc3SWNfVG9rZW46U3NxS2JteGNzb0RUMXN4ZWNoNGM2aEc1bjJYXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å’±ä»¬æŠŠbase\_linkè¿æ¥çš„å…³èŠ‚å«joint1ï¼ŒæŠŠjoint1è¿æ¥çš„æ›´ä¸Šé¢çš„åˆšä½“å«åšlink1,

ç„¶åå‚è€ƒåŸºå‡†è½´é€‰æ‹©åˆšæ‰å’±ä»¬åœ¨è¿™ä¸ªå…³èŠ‚å¤„å»ºç«‹çš„åŸºå‡†è½´1ï¼Œç„¶åjoint typeå…³èŠ‚ç±»å‹é€‰æ‹©revoluteï¼ˆæœ‰é™ä½çš„å…³èŠ‚ï¼Œåªæœ‰è¿™æ ·ï¼Œæœºå™¨äººå…³èŠ‚æ‰å¯ä»¥æ­£å¸¸è¿åŠ¨ï¼‰

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjUwNWY0MjAxMzY5ZmNhZTA0MzU1ZDZhYzdiOTBjOGJfczBxcUh1TW45RU5RaEVRV0dTckJYQ01vMW1kcEhjQ3lfVG9rZW46WkNKcmJxSEttb3V0bEl4Rm95WWNxS3J0bllnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™é‡Œçš„å‚è€ƒåæ ‡ç³»ç³»ç»Ÿå¯ä»¥é€‰æ‹©automatically Generateï¼Œä¹Ÿå¯ä»¥é€‰æ‹©Origin\_Joint1ã€‚

ç„¶åå†åœ¨link1ä¸ŠåŠ ä¸€ï¼Œåˆ›å»ºlink2ã€‚

åé¢çš„link3ï¼Œlink4æ·»åŠ æ­¥éª¤æ˜¯ä¸€æ ·çš„ï¼Œä¸å†è¯¦ç»†å±•ç¤ºã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWIzOGZmYmU5N2RlNzI0NzQ2NDIyY2JkNjE5NzE1NzJfQnp4NWJEMVZKMVpWYnU3U3R0NndIMjJYTm15YmRqWHhfVG9rZW46U3lpWGJRT3Fxb2VDSkd4U3M0eWNUeHBPbnJpXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDBkODcyMWQyYjAyMzFjZjRmMjYwYjRlOTI1OGM5N2JfN25Nc1BVdEl4cThvU2tPN09EaUVPT2ZZMGVkTU9YNWVfVG9rZW46SDFrSWJmd2Yzb3ZnUVh4bkswVWNNUUJ2blNjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2Q2Y2Y5OTEwMjNiZWJlZDhlN2E2NGE1OGFiMTQ1ZmFfQW1VejBrQmkyVndCR25PUTl0OFlVdFk1ZHczV2djV2lfVG9rZW46TzhHcGJrcDdEb3BWR0p4eGZEaGNsVGZRbjZjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

6.  ç‚¹å‡»preview and export
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDdiYTA0ZDJhNDVlOWQyOWJjMjExNjZmODAxNjYyNzJfcTJ5cERGWTVaZ0piVUNEZ29OUGw3OERsdGJNeXNNOFlfVG9rZW46Q3RpSGJNMVdmb0ljZEV4VWtsN2NRakNObjRmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

7.  å¯¹å…³èŠ‚è¿›è¡Œé™ä½è®¾ç½®
    

coordinatesæ˜¯åæ ‡ç³»ï¼Œaxisæ˜¯è½´ï¼Œå¦‚æœè¿™é‡ŒAxisåæ ‡æ˜¾ç¤ºé”™è¯¯ï¼Œé‚£ä¹ˆè¯´æ˜Coordinatesæˆ–è€…Axisé€‰æ‹©é”™äº†ï¼Œè¯·æ‰‹åŠ¨é€‰æ‹©æ­£ç¡®çš„åæ ‡ç³»æˆ–è€…åŸºå‡†è½´ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTRiZGVkMDE5ODZmNzkwNzk1NWQ5ZWI3ZTA1MDE3OGNfVW4yanF1bU9mY2NSNVJpaUxvSmRLN0xpUzBZbFl0Zm5fVG9rZW46Sko5ZGJLdGp5bzhqYXh4dVZxUWMzMlJPbkxmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¦‚æœè½¬è½´ç”Ÿæˆé”™è¯¯ï¼Œæ¯”å¦‚éƒ½æ˜¯000ï¼Œå¯ä»¥è‡ªå·±å¡«ä¸€ä¸‹ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzAzZjBmZDAzNWRhODI0NzkzNzFlZTcwNmQyMmFjMDFfVk1CanB2Wm5TZEhPcUFUNHZaMzBiU3l3NG80VjhOWlVfVG9rZW46TVB2OWJuTnRVbzdubjB4ZkZQbmNPR0xVbkxiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ¯”å¦‚è¿™é‡Œæ˜¯Xè½´ï¼Œå¯ä»¥æŠŠå·¦è½®å…¨å¡«-100,å³è½®100ï¼ˆè¿™é‡Œï¼Œä»…ä¾›å‚è€ƒï¼Œchatgptæä¾›çš„è§£å†³æ–¹æ¡ˆï¼‰

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDIyY2E3OTY2MDZkOWIwYzNlYmRmNzExNzMyY2M0YzVfVU9UVWJJVnZoWVQxSE0wdEZRNFdNcTBhbDV3eDZrVHhfVG9rZW46UDFaY2JzWDFEbzNWR0V4Uk51dWNTSjRJbnpiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

  

8.  æŸ¥çœ‹çŸ©é˜µï¼Œå¹¶ç‚¹å¯¼å‡ºurdfä¸meshes
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDE5NWI2Y2QyYjNmMzhjZDAwM2ZjOGU4YWM5MzZjOTJfamVWQkV0aThoY0VISHh4Q2lmekpoemVYR3ZOMTVUOFVfVG9rZW46T0d3ZGJTd1RLb1plUTl4emNFT2NZaHlYbmJjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTRlM2QxYzdhMTMzM2M4MDk3OWMwNWM1NDI3MmU5N2FfTnhuUWdldGRWVjJPcWNobUdjZFlLUXpnTkRSQkR3SUJfVG9rZW46WmxpQWJLUWR1b3NsSGN4eG8xNWNjV0hXbktDXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Nzk4OTliNDlhOWYyMjBiZDM2MDg1NzNiYjA3YjZhYzdfcUx3bXRGTkhiZkFFUXRnMmxDMk1GZkwwS1AzY2ppdHlfVG9rZW46RWJxQmI5QUxGbzg2UGl4MFNKeWNFaUhJbkJXXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTVjMmVkNjliYjYxOTEzMGViODE5MzhkMDU0MGY4NjRfNnljV1hWZTdNMENCajVaYUVUMmVCdUpKZ2FLNU9YWXhfVG9rZW46TkE2OWJuTDlPb0t1NGN4cnpTWWNnUjk3blplXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™æ ·å°±æˆåŠŸç”ŸæˆROS1çš„WSäº†ï¼Œå°†WSç§»åŠ¨è‡³Linuxç³»ç»Ÿã€‚

5.  ### å°†ROS1çš„WSè½¬åŒ–ä¸ºROS2çš„WS
    

1.  å…ˆå°†ROS1çš„WSç§»åŠ¨åˆ°Linuxç³»ç»Ÿä¸Š
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NGZjYzcxNzUxOWJiNmE0OWZhN2ZlMGZkODc4ZDM2ZGFfZjVwV0tCdjl2VFhqNmJOT2MxbFFWeFdpNTdrUml2MGRfVG9rZW46WlNOSmJjWDZKb09CWGp4ZEtlTGNmSTg2bnNkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

2.  æ–°å»ºä¸€ä¸ªROS2çš„WS
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzliNWZjM2FmNzk5MjYwOWNjMDE1ZWM1NDQyN2U3YjlfcXlBRVBnNDllMkg0RWQ2VHJBQlJXR2Uxc2h2RVdtZEVfVG9rZW46UHZ3YWJRN3Y4b1ZpMXF4SWZPa2NYc1JBbldoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Bash
mkdir -p ros2_4axisrobot_ws/src
cd ros2_4axisrobot_ws/
colcon build
cd src
ros2 pkg create cpp01_urdf --build-type ament_cmake
cd ..
code .
```

3.  å®Œå–„WSçš„ç›®å½•
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjJmYjRiNGQ2ZTAxNzhkNzQ5MGJhNTU2NWU1MDEyN2NfMU5ycWlsNWNpamphbWFZTmFkaEE2bzl3Rzh1M0NlUHZfVG9rZW46RkZZZ2JxU2VEbzNwWlR4RzBVZ2NqV3RZbnhmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTBiOGYwYWM2ZmIyZGYzODQ1YzMzNDY5MDA1ODRlZjdfcmREZWVSOXdzaFduV1BSTkJTTlpNeHlKcmxrZEJ5bWVfVG9rZW46QkM4aWJEcmZyb2Q2NTF4Z3BUVmNkQTlIbnRkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

åœ¨./src/cpp01\_urdfè·¯å¾„ä¸‹åˆ›å»ºlaunchã€meshesã€rvizã€urdfç­‰ç­‰æ–‡ä»¶å¤¹ï¼Œåœ¨urdfæ–‡ä»¶å¤¹ä¸‹å†æ–°å»ºurdfå’Œxacroæ–‡ä»¶å¤¹

4.  å¤åˆ¶ROS1çš„WSé‡Œçš„URDFå’ŒMeshesåˆ°ROS2çš„WSä¸­
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTg5OTc5NjRkNTY2OTZiODQ2ZDNmMGEyMGY5ZmJjZWJfeEJjazhWeHJIdUhPbGp2Y1FkOEdHSzZGbTltc3pVbmJfVG9rZW46TnBhc2JnTnlGb2x0bzF4bUl6NGNXUHVBblBkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmE5YjViNDZjNDU4NjhmZDFiOTBkNDBkNTg0ZmQzMzJfQ0dtV055Vk16RXpQSFJ3WTh0TnlYTDZ4M1ZqbjhJQm1fVG9rZW46VUk4aWJCU1o5b3RteWR4cm1ha2NpeTlibk5kXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTgyM2U2ZTE4ZDgzN2IzNzNmMGE1YmRhYmRhYTcwM2JfcEpaZ21qaDNxWkdmWUlaTXM1bDQwZXdQaVpTWUpTRU1fVG9rZW46WjBVbmIzbENab25pR3d4dVpoc2N3cGZRbndoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

5.  å¯¹CMakeå’Œpackageè¿›è¡Œé…ç½®
    

åœ¨CMakeä¸­è¯·æ·»åŠ 

```CMake
install(
  DIRECTORY launch urdf rviz meshes
  DESTINATION share/${PROJECT_NAME}  
)
```

åœ¨Package.xmlä¸­è¯·æ·»åŠ 

```XML
  <exec_depend>rviz2</exec_depend>
  <exec_depend>xacro</exec_depend>
  <exec_depend>robot_state_publisher</exec_depend>
  <exec_depend>joint_state_publisher</exec_depend>
  <exec_depend>ros2launch</exec_depend>
```

  

CMakeLists.txt

```CMake
cmake_minimum_required(VERSION 3.8)
project(cpp01_urdf)

if(CMAKE_COMPILER_IS_GNUCXX OR CMAKE_CXX_COMPILER_ID MATCHES "Clang")
  add_compile_options(-Wall -Wextra -Wpedantic)
endif()

# find dependencies
find_package(ament_cmake REQUIRED)
# uncomment the following section in order to fill in
# further dependencies manually.
# find_package(<dependency> REQUIRED)

install(
  DIRECTORY launch urdf rviz meshes
  DESTINATION share/${PROJECT_NAME}  
)

if(BUILD_TESTING)
  find_package(ament_lint_auto REQUIRED)
  # the following line skips the linter which checks for copyrights
  # comment the line when a copyright and license is added to all source files
  set(ament_cmake_copyright_FOUND TRUE)
  # the following line skips cpplint (only works in a git repo)
  # comment the line when this package is in a git repo and when
  # a copyright and license is added to all source files
  set(ament_cmake_cpplint_FOUND TRUE)
  ament_lint_auto_find_test_dependencies()
endif()

ament_package()

```

package.xml

```XML
<?xml version="1.0"?>
<?xml-model href="http://download.ros.org/schema/package_format3.xsd" schematypens="http://www.w3.org/2001/XMLSchema"?>
<package format="3">
  <name>cpp01_urdf</name>
  <version>0.0.0</version>
  <description>TODO: Package description</description>
  <maintainer email="tungchiahui@gmail.com">tungchiahui</maintainer>
  <license>TODO: License declaration</license>

  <buildtool_depend>ament_cmake</buildtool_depend>

  <exec_depend>rviz2</exec_depend>
  <exec_depend>xacro</exec_depend>
  <exec_depend>robot_state_publisher</exec_depend>
  <exec_depend>joint_state_publisher</exec_depend>
  <exec_depend>ros2launch</exec_depend>

  <test_depend>ament_lint_auto</test_depend>
  <test_depend>ament_lint_common</test_depend>

  <export>
    <build_type>ament_cmake</build_type>
  </export>
</package>

```

6.  å¯¹launchæ–‡ä»¶è¿›è¡Œç¼–å†™
    

è¯¦ç»†è¿‡ç¨‹è¯·çœ‹URDFæœ‰å…³Launchçš„æ ¸å¿ƒä¼˜åŒ–é‚£ä¸€èŠ‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzIxNzI1ZWMwYmIzNjczMzYxNDlkZDJmNTBmY2UyMjlfdkdDVnFkdkJxUjloQ1QxaUU4dklnRlJJWTJGaUlNMmlfVG9rZW46QlNrMmJzRGpSbzNSWW94bTJJN2NVNERPbmNrXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Python
from launch import LaunchDescription
from launch_ros.actions import Node

# å°è£…ç»ˆç«¯æŒ‡ä»¤ç›¸å…³ç±»
# from launch.actions import ExecuteProcess
# from launch.substitutions import FindExecutable
# å‚æ•°å£°æ˜ä¸è·å–
from launch.actions import DeclareLaunchArgument
from launch.substitutions import LaunchConfiguration
# æ–‡ä»¶åŒ…å«ç›¸å…³
# from launch.actions import IncludeLaunchDescription
# from launch.launch_description_sources import PythonLaunchDescriptionSource
# åˆ†ç»„ç›¸å…³
# from launch_ros.actions import PushRosNamespace
# from launch.actions import GroupAction
# äº‹ä»¶ç›¸å…³
# from launch.event_handlers import OnProcessStart,OnProcessExit
# from launch.actions import ExecuteProcess,RegisterEventHandler,LogInfo
# è·å–åŠŸèƒ½åŒ…ä¸‹shareç›®å½•æˆ–è·¯å¾„
from ament_index_python.packages import get_package_share_directory

from launch_ros.parameter_descriptions import ParameterValue
from launch.substitutions import Command

import os

cpp01_urdf_dir = get_package_share_directory("cpp01_urdf")

default_model_path = os.path.join(cpp01_urdf_dir,"urdf/urdf","4axisrobot.urdf")
default_rviz_path = os.path.join(cpp01_urdf_dir,"rviz","urdf.rviz")

model = DeclareLaunchArgument(name="model",default_value=default_model_path)

p_value = ParameterValue(Command(["xacro ",LaunchConfiguration("model")]))
robot_state_pub = Node(
    package="robot_state_publisher",
    executable="robot_state_publisher",
    parameters=[{"robot_description":p_value}]
)

# å…³èŠ‚ä¿¡æ¯èŠ‚ç‚¹(å»ºè®®)
# joint_state_pub = Node(
#     package="joint_state_publisher",
#     executable="joint_state_publisher"
# )

# å…³èŠ‚ä¿¡æ¯èŠ‚ç‚¹å›¾å½¢ç•Œé¢
joint_state_pub = Node(
    package="joint_state_publisher_gui",
    executable="joint_state_publisher_gui"
)

rviz2 = Node(
    package="rviz2",
    executable="rviz2",
#    arguments=["-d",get_package_share_directory("cpp06_urdf") + "/rviz/urdf.rviz"]
    arguments=["-d",default_rviz_path]

    )

def generate_launch_description():
    return LaunchDescription([model,robot_state_pub,joint_state_pub,rviz2])
```

7.  å¯¹URDFæ–‡ä»¶è¿›è¡Œä¿®æ”¹
    

ä¿®æ”¹çš„å†…å®¹ä¸»è¦æœ‰ä¸¤é¡¹ï¼Œä¸€ä¸ªæ˜¯meshesçš„è·¯å¾„ï¼Œä¸€ä¸ªæ˜¯åˆ æ‰æ˜“å¼•èµ·æŠ¥é”™çš„æ³¨é‡Šã€‚

ä¸»è¦ç”±äºROS1çš„WSå’ŒROS2çš„WSè·¯å¾„ä¸åŒï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬åªéœ€è¦ä¿®æ”¹æœ‰å…³è·¯å¾„çš„å†…å®¹ï¼Œæ¯”å¦‚è¯´Meshesçš„è·¯å¾„

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzQ2NWRmNjk2NDgxZGYyODJkZWY0ZWU2ZTFmODU3NmFfMFJVQXdVRUgyYTJDNUN1NGY4M1dpaFRPOUZHVWNxRFdfVG9rZW46VFFzTWJFSGNDb3lkbkp4R3FZeWNaWTlJbkdmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzVjNmY1NjJkMTZkN2I3NmNkMDQ3MzAzNTQwNzZjZDFfTkQxa2JTUlFTOE51Rnk4enZRaWZmbVljbjdFSDUzSXlfVG9rZW46QURZZWJ2bjBWb2c1cDB4T0tPVmNZQTVtbmJnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

package://ä¸€èˆ¬æ˜¯shareç›®å½•ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä»cpp01\_urdfè¿™ä¸€çº§å¼€å§‹å†™ï¼ˆshareç›®å½•éœ€è¦ç¼–è¯‘åæ‰ä¼šæ˜¾ç¤ºï¼‰

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzQ1ZWQwYzBiMmExMTA0ZjQyOTE4ODRkNjk5MGNiMzBfYmNaMnZveXpWaUZNVWxQb2V5bmc2SHpvVnY1bnZQd3lfVG9rZW46T3hPV2JDbDBtbzg2ZEZ4dE5DQ2NBc2hVblprXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ç„¶åæŒ‰Ctrl+H

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2Q3NWY4ZWI4OGZhOGExNjBhYmNlNWU4MTVmZTMwYzBfVW1RS3pOSktvWWc1SjIxUHd1a05VZ29PWXBOaDVkQjFfVG9rZW46UHVkSWJmWmRDb3hZVW54blZFVWNBMEt4blhkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWJlYTc4NDg3ZjczNjVkOWZlYTBkYWIzMzU4ZGYxNDNfUDBoaU00anRaZ1hjalJwWDJETTRFMDRWU1o0WUMwT0dfVG9rZW46WllydGJjc3dCb1ZXR3B4Y2RpOWN2WlBrbnRnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ç„¶åè¿˜éœ€è¦åˆ é™¤æ‰urdfæ–‡ä»¶åˆšå¼€å§‹çš„æ³¨é‡Šï¼Œå¦åˆ™ä¹Ÿä¼šæŠ¥é”™

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTY5YWFlZDc5ZDU1ODRlYjY0NWZiOGQxYjZmZTljZWVfSU1yYmE0MWZNTk0yTmxQdERWZEpibHdLV1UyU1VSWmdfVG9rZW46RTBCYmJ1OWtOb245SVV4dTlob2NWaTJibjJkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¦‚ä¸‹æ˜¯æ›¿æ¢å®Œæ¯•çš„URDFæ–‡ä»¶ï¼š

```XML
<?xml version="1.0" encoding="utf-8"?>
<robot
  name="4axisrobot">
  <link
    name="base_link">
    <inertial>
      <origin
        xyz="-0.0819771145953119 -0.0394328123681598 -0.0605612328464761"
        rpy="0 0 0" />
      <mass
        value="7.43807257011133" />
      <inertia
        ixx="0.33173827700719"
        ixy="-1.91350798633049E-05"
        ixz="-2.38586363043925E-05"
        iyy="0.510937907009661"
        iyz="1.14706407748075E-05"
        izz="0.66107272632796" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://cpp01_urdf/meshes/base_link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://cpp01_urdf/meshes/base_link.STL" />
      </geometry>
    </collision>
  </link>
  <link
    name="link1">
    <inertial>
      <origin
        xyz="0.19141 -0.050676 -0.030057"
        rpy="0 0 0" />
      <mass
        value="21.822" />
      <inertia
        ixx="0.50464"
        ixy="0.13295"
        ixz="0.087353"
        iyy="0.59136"
        iyz="-0.066053"
        izz="0.64081" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://cpp01_urdf/meshes/link1.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.79216 0.81961 0.93333 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://cpp01_urdf/meshes/link1.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="joint1"
    type="revolute">
    <origin
      xyz="-0.081947 -0.039447 0.11191"
      rpy="0.40394 -1.5708 0" />
    <parent
      link="base_link" />
    <child
      link="link1" />
    <axis
      xyz="1 0 0" />
    <limit
      lower="-3.14"
      upper="3.14"
      effort="100"
      velocity="1" />
  </joint>
  <link
    name="link2">
    <inertial>
      <origin
        xyz="0.00711598521454873 0.430460941882332 -0.181074256126024"
        rpy="0 0 0" />
      <mass
        value="30.6115349647897" />
      <inertia
        ixx="2.84056101478768"
        ixy="0.00176700425270318"
        ixz="-0.000605507690039326"
        iyy="0.803420593303961"
        iyz="0.881921487314161"
        izz="2.25142021571439" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://cpp01_urdf/meshes/link2.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://cpp01_urdf/meshes/link2.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="joint2"
    type="revolute">
    <origin
      xyz="0.35141 -0.28119 0.13918"
      rpy="-2.0566 1.1982 1.5708" />
    <parent
      link="link1" />
    <child
      link="link2" />
    <axis
      xyz="-1 0 0" />
    <limit
      lower="-3.14"
      upper="3.14"
      effort="100"
      velocity="1" />
  </joint>
  <link
    name="link3">
    <inertial>
      <origin
        xyz="0.00112887115421612 0.0366346915274407 0.31720330934553"
        rpy="0 0 0" />
      <mass
        value="32.192726667578" />
      <inertia
        ixx="4.01515983126431"
        ixy="0.0013193752174692"
        ixz="0.0113529938102155"
        iyy="3.86196311673823"
        iyz="-0.336440022491883"
        izz="0.399977905540088" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://cpp01_urdf/meshes/link3.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://cpp01_urdf/meshes/link3.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="joint3"
    type="revolute">
    <origin
      xyz="0.3765 0.82481 -0.49591"
      rpy="2.5802 0 0" />
    <parent
      link="link2" />
    <child
      link="link3" />
    <axis
      xyz="1 0 0" />
    <limit
      lower="-3.14"
      upper="3.14"
      effort="100"
      velocity="1" />
  </joint>
  <link
    name="link4">
    <inertial>
      <origin
        xyz="0.162516620557178 -0.213844847423599 3.38133504529381E-07"
        rpy="0 0 0" />
      <mass
        value="12.1646007734167" />
      <inertia
        ixx="0.288208127188405"
        ixy="0.00080326659836716"
        ixz="8.72489392803044E-07"
        iyy="0.107000706575729"
        iyz="-1.48935044230573E-07"
        izz="0.295147863994059" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://cpp01_urdf/meshes/link4.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://cpp01_urdf/meshes/link4.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="joint4"
    type="revolute">
    <origin
      xyz="0 0.070837 0.99728"
      rpy="0.82315 -1.5708 0" />
    <parent
      link="link3" />
    <child
      link="link4" />
    <axis
      xyz="1 0 0" />
    <limit
      lower="-3.14"
      upper="3.14"
      effort="100"
      velocity="1" />
  </joint>
</robot>
```

8.  ç¼–è¯‘
    

```Bash
colcon build --packages-select cpp01_urdf
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWY3ZWFmMGViZjBlMjc5YWUxYjdmYWI0Yjc0NGE2YzRfYW5rbEZHaHVCTkFzSGh0UmhpRXhncE8yRUsxQnhZY1BfVG9rZW46T01OTmJGUEczb2twbWt4cmNUQ2NyZEtubmxlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGQ4ZTQ3ZjQ1YzAwZTI1MWZiMDYwMGNkNGFkZDNlZjFfUlVMUWt1Mmk3eTNlTk1vbmptc3JOTUg0OW1mN2tjVmRfVG9rZW46UjZHUmJ0UVE0b2g1aVh4NG53WmNwWmZEbjJlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

9.  æ›´æ–°ç»ˆç«¯ç¯å¢ƒ
    

```Bash
source install/setup.bash
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTM1ZGFkZTY1YTE2ZmE4YTYxMmUwMjI4NDk0ZjhmNmFfVVF1Vzk1UDI4WmVPSFJmdWFrcU5PazMxR1hZMmNzajRfVG9rZW46RGZ6NWJrZ0xHb0I2dWp4ckpWeWNqZGpRbnhkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

10.  è¿è¡ŒLaunch
    

```Bash
ros2 launch cpp01_urdf display.launch.py
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjA3ODQxNmNkODMzYzRkNGNjOWQ5OWM3Nzk0ZjViZTFfbXZzMkp3QnBkN0VoRVhqTTNDNjNhcXFlazJWRU1PZzFfVG9rZW46RzhyS2J4ejdzb0xIVmZ4WHNSYmNTbGl0bnpoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDllN2I0Zjg2NjNlODczNTMyYWU1MGY2ODY5N2E3MGJfQzdTQkxyYlpzY0x5TG9nUzFuWVFrdVI4RHFNSWVzdU1fVG9rZW46Q3RORmJyT1Nnb0prMEt4eWhjUGNBSUp6bnVoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

11.  åœ¨Rviz2ä¸­æ·»åŠ æ’ä»¶ä»¥åŠåŸºæœ¬é…ç½®
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDVhMTgzYjdjMmFjZDBiYjRhNDI2MmFkN2U1MjBmMWVfNk9mc2M1YU83cGVTZ1Nhd0ZxM1BqYW5ralNyd2NSV01fVG9rZW46QjBseWJNejlJb1RXcXp4eFc2VWNnNXBobjhjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

12.  ä½¿ç”¨joint\_state\_publisher\_guiå¯ä»¥è°ƒå…³èŠ‚çš„è§’åº¦
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzI4MzA5OWVmMjRkYTFkYTgwODkwNDdhODBlNjAxZjRfS3M2MXExbnhndmhhQkhEMlpqSnBoZWNWZURHMU1rT2xfVG9rZW46WGNTRWJLV2h2b1ZYYTB4MnVrbGNkT09BbjJiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTc4YzJlZmFlNzE1NDYwOGE0MjQwZGFlNzhiYTU0NmZfdklZUnJxbGdIaFB0WlJsMEo1SXZ3MGNWYkdtQ0JNNHlfVG9rZW46RmZjR2JEbmNEb3hqRWF4bUNFRGNIc3ZQblNlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

13.  ä¿å­˜rviz2çš„é…ç½®åˆ°rvizæ–‡ä»¶å¤¹ä¸­
    

é¦–å…ˆç‚¹å‡»rviz2çš„èœå•æ ä¸Šçš„Fileï¼Œç„¶åé€‰æ‹©Save Config as

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGIzYzFiMmNkYmZkZDA3NmE2YjNhYjdjMmVhY2ZiOTFfcXpteU1DWU03MEJrRWhuTXRsaGxmS3gzYmM2M3YwcEdfVG9rZW46RmxENmI5NXZub0J4UjZ4U0xlY2N2ZjF1bmpmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¯ä»¥å»æœ¬èŠ‚ç®€ä»‹çœ‹æ•ˆæœè§†é¢‘

  

  

  

6.  ### æ³¨æ„äº‹é¡¹ï¼ˆä»…ä¾›å‚è€ƒï¼ŒChatGPTçš„è§£å†³æ–¹æ¡ˆï¼‰
    

1.  #### åæ ‡ç³»1
    

è½®å­è¦ç”¨continuousçš„å…³èŠ‚ï¼Œå¹¶ä¸”å°½é‡è‡ªå·±é€‰åæ ‡ç³»ï¼Œè¦æ±‚ä»åé¢çœ‹è½¦çš„è¯ï¼Œå·¦æ˜¯Yï¼Œå‰æ˜¯Xï¼Œä¸Šæ˜¯Zã€‚æ‰€æœ‰çš„åæ ‡ç³»éƒ½è¦æ±‚ã€‚

å¯ä»¥å…ˆè®©ä»–å¸®ä½ è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªï¼Œä½ å†å»ä¿®æ”¹åæ ‡ç³»ï¼Œè¦ç®€å•ä¸€äº›ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmRjODI2OWE1MjBlMGQ3OWZiZDg0ZmZhMjIxMjJhODRfcFZhOHhsUHo0ajQ2SnowY0V5Rm0xaFFPYVNBRVo2MllfVG9rZW46R2tUTWJkUFR2b2FYaml4Q3pEemN2VjRxbk9lXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTU2YTY5NmNmNTllN2QxNTcyYWViOWY4YjhhMzViYzhfWnpIZFRIc21WQmk1U3oyZHZsOURrcGtmU0dINGZnelBfVG9rZW46TkY4T2IxUXBUb2V0emZ4SnNqa2NKNmV0bkdnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjU5YmFjYzg4ZTY5YzRkNmE1Zjc1MjM1YjliOTgxN2RfRzdqenBMdk40QzVpcE10dkRwYzNaazdscENKUHo5UmhfVG9rZW46VEZ1a2JvZ3Y0b3FYZ1B4RVpIYmN5VlRXbk9DXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

2.  #### åæ ‡ç³»è®©è½¦èººç€
    

å¦‚æœä½ çš„è½¦åœ¨rviz2é‡Œæ˜¯ä¾§ç€ç¡è§‰çš„ï¼Œé‚£ä¹ˆï¼š

å“ˆå“ˆï¼Œæ²¡é”™ï¼Œè¿™ç§â€œæ•´è½¦ä¾§ç€èººå°¸â€çš„æƒ…å†µ **90%å°±æ˜¯ STL çš„åæ ‡è½´æ–¹å‘æé”™äº†** ã€‚å¾ˆå¤š CAD å·¥å…·å¯¼å‡ºçš„ STL æ¨¡å‹é»˜è®¤æ˜¯ï¼š

*   Z è½´æœå‰ï¼ˆä¾‹å¦‚ SolidWorksï¼šZæœå‰ï¼ŒYæœä¸Šï¼Œç”¨å³æ‰‹åæ ‡ç³»æ¨Xåæ ‡ç³»ä½ç½®ï¼Œä»è½¦å±è‚¡åé¢çœ‹æ˜¯æœå·¦ã€‚ï¼‰
    
*   æˆ–è€… Y è½´æœä¸Šï¼ˆä¾‹å¦‚ Blenderï¼‰
    

è€Œ ROS/URDF çš„åæ ‡ç³»ç»Ÿæ˜¯ï¼š

*   X å‘å‰ï¼ˆå‰è¿›æ–¹å‘ï¼‰
    
*   Y å‘å·¦ï¼ˆå¹³ç§»æ–¹å‘ï¼‰
    
*   Z å‘ä¸Šï¼ˆé‡åŠ›æ–¹å‘ï¼‰
    

3.  #### è½¦ç›´èµ°å˜æ—‹è½¬ï¼Œæ—‹è½¬å˜ç›´èµ°
    

é‚£è¯´æ˜ä½ çš„è½¬è½´æœ‰é—®é¢˜ã€‚

å¦‚æœå‘å‰èµ°æˆäº†å·¦è½¬ï¼Œé‚£ä¹ˆè¯´æ˜å·¦è½®çš„è½¬è½´é”™äº†ï¼Œå°‘äº†ä¸ªç¬¦å·ï¼ŒåŠ ä¸Šå°±è¡Œäº†ã€‚

æ¯”å¦‚è¿™ä¸ª010,ä½ åº”è¯¥æ”¹æˆ0-10

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzVkM2VjNWNiNjJlYmQ2NTg0ODVlMjZhODZmMjBhMjRfT3pIcU9URWhWMUpzaG1HTmFnTnFwNEltclQxNU1ENm1fVG9rZW46SFFLMmJONms2bzV6TFR4V2FPTmNIVzNSbjVlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

  

  

  

7.  ## xacro
    

1.  ### åœºæ™¯ã€ä½œç”¨ä¸æ¦‚å¿µ
    

**åœºæ™¯**

å‰é¢ URDF æ–‡ä»¶æ„å»ºæœºå™¨äººæ¨¡å‹çš„è¿‡ç¨‹ä¸­ï¼Œå­˜åœ¨è‹¥å¹²é—®é¢˜ã€‚

> é—®é¢˜1ï¼šåœ¨è®¾è®¡å…³èŠ‚çš„ä½ç½®æ—¶ï¼Œéœ€è¦æŒ‰ç…§ä¸€å®šçš„è§„åˆ™è®¡ç®—ï¼Œè§„åˆ™æ˜¯å›ºå®šçš„ï¼Œä½†æ˜¯åœ¨ URDF ä¸­ä¾èµ–äºäººå·¥è®¡ç®—ï¼Œå­˜åœ¨ä¸ä¾¿ï¼Œå®¹æ˜“è®¡ç®—å¤±è¯¯ï¼Œä¸”å½“æŸäº›å‚æ•°å‘ç”Ÿæ”¹å˜æ—¶ï¼Œè¿˜éœ€è¦é‡æ–°è®¡ç®—ã€‚
> 
> é—®é¢˜2ï¼šURDFä¸­çš„éƒ¨åˆ†å†…å®¹æ˜¯é«˜åº¦é‡å¤çš„ï¼Œæ¯”å¦‚è½¦è½®çš„è®¾è®¡å®ç°ï¼Œä¸åŒè½®å­åªæ˜¯éƒ¨åˆ†å‚æ•°ä¸åŒï¼Œå½¢çŠ¶ã€é¢œè‰²ã€ç¿»è½¬é‡éƒ½æ˜¯ä¸€è‡´çš„ï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œæ„å»ºå¤æ‚çš„æœºå™¨äººæ¨¡å‹æ—¶ï¼Œæ›´æ˜¯æ˜“äºå‡ºç°é«˜åº¦é‡å¤çš„è®¾è®¡ï¼ŒæŒ‰ç…§ä¸€èˆ¬çš„ç¼–ç¨‹æ€æƒ³æ¶‰åŠåˆ°é‡å¤ä»£ç åº”è¯¥è€ƒè™‘å°è£…ã€å¤ç”¨ï¼Œä½†æ˜¯åœ¨ä¹‹å‰çš„URDFæ–‡ä»¶ä¸­å¹¶æ²¡æœ‰ç›¸å…³æ“ä½œã€‚
> 
> ......

å¦‚æœåœ¨ä¸€èˆ¬ç¼–ç¨‹è¯­è¨€ä¸­é‡åˆ°ç±»ä¼¼é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å˜é‡ç»“åˆå‡½æ•°è§£å†³ã€‚å¯¹åº”çš„ï¼Œåœ¨ ROS ä¸­ä¹Ÿç»™å‡ºäº†ç±»ä¼¼ç¼–ç¨‹çš„ä¼˜åŒ–æ–¹æ¡ˆï¼Œè¯¥æ–¹æ¡ˆç§°ä¹‹ä¸ºï¼š **Xacroï¼ˆå¯ä»¥ç†è§£ä¸ºurdf2.0ï¼‰** ã€‚

**æ¦‚å¿µ**

Xacro æ˜¯ XML Macros çš„ç¼©å†™ï¼ŒXacro æ˜¯ä¸€ç§ XML å®è¯­è¨€ï¼Œæ˜¯å¯ç¼–ç¨‹çš„ XMLã€‚

Xacro å¯ä»¥å£°æ˜å˜é‡ï¼Œå¯ä»¥é€šè¿‡æ•°å­¦è¿ç®—æ±‚è§£ï¼›å¯ä»¥ä½¿ç”¨æµç¨‹æ§åˆ¶æ§åˆ¶æ‰§è¡Œé¡ºåºï¼›è¿˜å¯ä»¥é€šè¿‡å®å°è£…(å¯ä»¥æƒ³æˆå‡½æ•°)ã€å¤ç”¨åŠŸèƒ½ï¼Œä»è€Œæé«˜ä»£ç å¤ç”¨ç‡ä»¥åŠç¨‹åºçš„å®‰å…¨æ€§ã€‚

**ä½œç”¨**

è¾ƒä¹‹äºçº¯ç²¹çš„ URDF å®ç°ï¼Œå¯ä»¥ç¼–å†™æ›´å®‰å…¨ã€ç²¾ç®€ã€æ˜“è¯»æ€§æ›´å¼ºçš„æœºå™¨äººæ¨¡å‹æ–‡ä»¶ï¼Œä¸”å¯ä»¥æé«˜ç¼–å†™æ•ˆç‡ã€‚

  

2.  ### å¿«é€Ÿä½“éªŒ
    

å…ˆå®‰è£…xacro

```Bash
#humbleç‰ˆæœ¬
sudo apt install ros-humble-xacro
#jazzyç‰ˆæœ¬
sudo apt install ros-jazzy-xacro
```

1.éœ€æ±‚

ä½¿ç”¨xacroä¼˜åŒ– **6.4.4 URDFç»ƒä¹ ** ä¸­çš„å°è½¦åº•ç›˜å®ç°ï¼Œéœ€è¦ä½¿ç”¨å˜é‡å°è£…è½¦è¾†å‚æ•°ï¼Œå¹¶ä½¿ç”¨ xacro å®å°è£…è½®å­é‡å¤çš„ä»£ç å¹¶è°ƒç”¨å®åˆ›å»ºå››ä¸ªè½®å­(æ³¨æ„: åœ¨æ­¤ï¼Œæ¼”ç¤º xacro çš„åŸºæœ¬ä½¿ç”¨ï¼Œä¸å¿…è¦ç”Ÿæˆåˆæ³•çš„ URDF )ã€‚

2.å®ç°

åŠŸèƒ½åŒ…cpp06\_urdfçš„urdf/xacroç›®å½•ä¸‹ï¼Œæ–°å»ºxacroæ–‡ä»¶demo01\_helloworld.urdf.xacroï¼Œå¹¶ç¼–è¾‘æ–‡ä»¶ï¼Œè¾“å…¥å¦‚ä¸‹å†…å®¹ï¼š

```XML
<robot name="mycar" xmlns:xacro="http://wiki.ros.org/xacro">
    <!-- å±æ€§å°è£… -->
    <xacro:property name="wheel_radius" value="0.025" />
    <xacro:property name="wheel_length" value="0.02" />
    <xacro:property name="PI" value="3.1415927" />

    <!-- å® -->
    <xacro:macro name="wheel_func" params="wheel_name" >
        <link name="${wheel_name}_wheel">
            <visual>
                <geometry>
                    <cylinder radius="${wheel_radius}" length="${wheel_length}" />
                </geometry>

                <origin xyz="0 0 0" rpy="${PI / 2} 0 0" />

                <material name="wheel_color">
                    <color rgba="0 0 0 0.3" />
                </material>
            </visual>
        </link>
    </xacro:macro>
    <xacro:wheel_func wheel_name="left_front"/>
    <xacro:wheel_func wheel_name="left_back"/>
    <xacro:wheel_func wheel_name="right_front"/>
    <xacro:wheel_func wheel_name="right_back"/>
</robot>
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmM5ODhkZWEwZWQ0ODMxYzg0YzQ3ZjZmNTA3NjdlZmFfWlphRldlOFZFMDl6RVRNWUZwMGtRdEFPRUZtUU5rOEZfVG9rZW46VlNEZGJVVUpSbzNLY0h4ZjJqNmNIY1BpbnRnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å®ç±»ä¼¼å‡½æ•°

paramsç±»ä¼¼å…¥å£å‚æ•°

å­æ ‡ç­¾ç±»ä¼¼å‡½æ•°ä½“

  

ç»ˆç«¯ä¸‹è¿›å…¥å½“å‰æ–‡ä»¶æ‰€è¿°ç›®å½•ï¼Œè¾“å…¥å¦‚ä¸‹æŒ‡ä»¤ï¼š

```Bash
cd src/cpp06_urdf/urdf/xacro/
xacro demo01_helloworld.urdf.xacro
#æˆ–è€…
ros2 run xacro xacro demo01_helloworld.urdf.xacro
```

ç»ˆç«¯å°†ä¼šè¾“å‡ºå¦‚ä¸‹å†…å®¹ï¼ˆä»¥ä¸‹å†…å®¹æ˜¯çº¯urdfï¼‰ï¼š

```XML
<?xml version="1.0" ?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from demo01_helloworld.urdf.xacro   | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<robot name="mycar">
  <link name="left_front_wheel">
    <visual>
      <geometry>
        <cylinder length="0.02" radius="0.025"/>
      </geometry>
      <origin rpy="1.57079635 0 0" xyz="0 0 0"/>
      <material name="wheel_color">
        <color rgba="0 0 0 0.3"/>
      </material>
    </visual>
  </link>
  <link name="left_back_wheel">
    <visual>
      <geometry>
        <cylinder length="0.02" radius="0.025"/>
      </geometry>
      <origin rpy="1.57079635 0 0" xyz="0 0 0"/>
      <material name="wheel_color">
        <color rgba="0 0 0 0.3"/>
      </material>
    </visual>
  </link>
  <link name="right_front_wheel">
    <visual>
      <geometry>
        <cylinder length="0.02" radius="0.025"/>
      </geometry>
      <origin rpy="1.57079635 0 0" xyz="0 0 0"/>
      <material name="wheel_color">
        <color rgba="0 0 0 0.3"/>
      </material>
    </visual>
  </link>
  <link name="right_back_wheel">
    <visual>
      <geometry>
        <cylinder length="0.02" radius="0.025"/>
      </geometry>
      <origin rpy="1.57079635 0 0" xyz="0 0 0"/>
      <material name="wheel_color">
        <color rgba="0 0 0 0.3"/>
      </material>
    </visual>
  </link>
</robot>
```

æ˜¾ç„¶çš„ï¼Œé€šè¿‡xacroæˆ‘ä»¬æ–¹ä¾¿çš„å®ç°äº†ä»£ç å¤ç”¨ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmNiZjQxMmM2NmIwODA5NTI2MWIxN2UzNGQzMzI5YjhfS1RVVjhkNXBWOFppb1U3OWd5OURCTUxkN2R1QXN5QmFfVG9rZW46V0ZaWGJVYnVqb3FSM3h4bVpRMGNxQmlhbjhjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

1.  #### è¯­æ³•
    
    1.  ç®€ä»‹
        
    
    ![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmI2MjQzMDEwZTQ4ZmZlMTkyZTg2MmRmM2RkMjViNjdfRXdjSWJJSHNqcXJ5a0FCbnRZSTR0QlNWeWhIT2FHMmNfVG9rZW46UGhZTGJSVEtFbzRwU254cnR5V2M4Mld0bk9nXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)
    
    Â Â xacro æä¾›äº†å¯ç¼–ç¨‹æ¥å£ï¼Œç±»ä¼¼äºè®¡ç®—æœºè¯­è¨€ï¼ŒåŒ…æ‹¬å˜é‡å£°æ˜è°ƒç”¨ã€å‡½æ•°å£°æ˜ä¸è°ƒç”¨ç­‰è¯­æ³•å®ç°ã€‚åœ¨ä½¿ç”¨ xacro ç”Ÿæˆ urdf æ—¶ï¼Œæ ¹æ ‡ç­¾`robot`ä¸­**å¿…é¡»**åŒ…å«å‘½åç©ºé—´å£°æ˜:`xmlns:xacro="``http://wiki.ros.org/xacro``"`ã€‚
    
    Â Â  **å˜é‡**
    
    Â Â å˜é‡ç”¨äºå°è£… URDF ä¸­çš„ä¸€äº›å­—æ®µï¼Œæ¯”å¦‚: PAI å€¼ï¼Œå°è½¦çš„å°ºå¯¸ï¼Œè½®å­åŠå¾„ ....ï¼Œå˜é‡çš„åŸºæœ¬ä½¿ç”¨è¯­æ³•åŒ…æ‹¬å˜é‡å®šä¹‰ã€å˜é‡è°ƒç”¨ã€å˜é‡è¿ç®—ç­‰ã€‚
    
    Â Â 1.1å˜é‡å®šä¹‰
    
    Â Â è¯­æ³•æ ¼å¼ï¼š
    
    ```XML
    <xacro:property name="å˜é‡å" value="å˜é‡å€¼" />
    ```
    
    Â Â ç¤ºä¾‹ï¼š
    
    ```XML
    <xacro:property name="PI" value="3.1416"/>
    <xacro:property name="wheel_radius" value="0.025"/>
    <xacro:property name="wheel_length" value="0.02"/>
    ```
    
    Â Â 1.2å˜é‡è°ƒç”¨
    
    Â Â è¯­æ³•æ ¼å¼ï¼š
    
    ```XML
    ${å˜é‡å}
    ```
    
    Â Â ç¤ºä¾‹ï¼š
    
    ```XML
    <geometry>
        <cylinder radius="${wheel_radius}" length="${wheel_length}" />
    </geometry>
    ```
    
    Â Â 1.3å˜é‡è¿ç®—
    
    Â Â è¯­æ³•æ ¼å¼ï¼š
    
    ```XML
    ${æ•°å­¦è¡¨è¾¾å¼}
    ```
    
    Â Â ç¤ºä¾‹ï¼š
    
    ```XML
    <origin xyz="0 0 0" rpy="${PI / 2} 0 0" />
    ```
    
      
    
      
    
    ```XML
    <robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="demo2_pro">
    <!-- å˜é‡å£°æ˜ -->
    <xacro:property name="num1" value="10"/>
    <xacro:property name="num2" value="20"/>
    <!-- å˜é‡è°ƒç”¨ -->
    <car length="${num1}" width="${num2}"/>
    <!-- å˜é‡è¿ç®— -->
    <sum value="${num1 + num2}"/>
    </robot>
    ```
    
    ![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjNiNTk2MzM3YmNmMmE5MTk1ODQ5ZWQyODcyZTY0MjRfdVpMZ0sycEloNkt3UklsYjBySDRIU2s2bWtKdnRyV2FfVG9rZW46T0M4Z2JrVlVPb2ZSc3J4ZFA4Z2NHSjhublVlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)
    
      
    
      
    
      
    
    Â Â  **å®**
    
    Â Â ç±»ä¼¼äºå‡½æ•°å®ç°ï¼Œæé«˜ä»£ç å¤ç”¨ç‡ï¼Œä¼˜åŒ–ä»£ç ç»“æ„ï¼Œæé«˜å®‰å…¨æ€§ã€‚å®çš„åŸºæœ¬ä½¿ç”¨è¯­æ³•åŒ…æ‹¬å®çš„å®šä¹‰ä¸è°ƒç”¨ã€‚
    
    Â Â 2.1å®å®šä¹‰
    
    Â Â è¯­æ³•æ ¼å¼ï¼š
    
    ```XML
    <xacro:macro name="å®åç§°" params="å‚æ•°åˆ—è¡¨(å¤šå‚æ•°ä¹‹é—´ä½¿ç”¨ç©ºæ ¼åˆ†éš”)">
        .....
        å‚æ•°è°ƒç”¨æ ¼å¼: ${å‚æ•°å}
    </xacro:macro>
    ```
    
    Â Â ç¤ºä¾‹ï¼š
    
    ```XML
    <xacro:macro name="wheel_func" params="wheel_name" >
        <link name="${wheel_name}_wheel">
            <visual>
                <geometry>
                    <cylinder radius="${wheel_radius}" length="${wheel_length}" />
                </geometry>
    
                <origin xyz="0 0 0" rpy="${PI / 2} 0 0" />
    
                <material name="wheel_color">
                    <color rgba="0 0 0 0.3" />
                </material>
            </visual>
        </link>
    </xacro:macro>
    ```
    
    Â Â 2.2å®è°ƒç”¨
    
    Â Â è¯­æ³•æ ¼å¼ï¼š
    
    ```XML
    <xacro:å®åç§° å‚æ•°1=xxx å‚æ•°2=xxx/>
    ```
    
    Â Â ç¤ºä¾‹ï¼š
    
    ```XML
    <xacro:wheel_func wheel_name="left_front"/>
    <xacro:wheel_func wheel_name="left_back"/>
    <xacro:wheel_func wheel_name="right_front"/>
    <xacro:wheel_func wheel_name="right_back"/>
    ```
    
      
    
      
    
    ```XML
    <robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="demo3_func">
        <!-- å®å®šä¹‰ -->
        <xacro:macro name="get_sum" params="num1 num2">
            <sum value="${num1 + num2}"/>
        </xacro:macro>
    
        <!-- å®è°ƒç”¨ -->
        <xacro:get_sum num1="20" num2="30"/>
        <xacro:get_sum num1="70" num2="30"/>
    
    </robot>
    ```
    
    ![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmNiYjEzYzU0Mjc2ZGJjMWU4MzVmOTJlY2UyZDIxZDVfWlZYbHZkOGR4SW95ZWVlNHhqc0NTN1paVGQxU2JSMkNfVG9rZW46RUlJYmJadUtlb2xMS0t4Z0g4SGMwb2NqbnJ4XzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)
    
      
    
    Â Â  **æ–‡ä»¶**
    

æœºå™¨äººç”±å¤šéƒ¨ä»¶ç»„æˆï¼Œä¸åŒéƒ¨ä»¶å¯èƒ½å°è£…ä¸ºå•ç‹¬çš„ xacro æ–‡ä»¶ï¼Œæœ€åå†å°†ä¸åŒçš„æ–‡ä»¶é›†æˆï¼Œç»„åˆä¸ºå®Œæ•´æœºå™¨äººï¼Œå¯ä»¥ä½¿ç”¨æ–‡ä»¶åŒ…å«å®ç°ã€‚

è¯­æ³•æ ¼å¼ï¼š

```XML
<xacro:include filename="å…¶ä»–xacroæ–‡ä»¶" />
```

ç¤ºä¾‹ï¼š

```XML
<robot name="car" xmlns:xacro="http://wiki.ros.org/xacro">
      <xacro:include filename="car_base.xacro" />
      <xacro:include filename="car_camera.xacro" />
      <xacro:include filename="car_laser.xacro" />
</robot>
```

  

```XML
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="demo4_include">
    <xacro:include filename="demo02_base_pro.urdf.xacro"/>
    <xacro:include filename="demo03_base_func.urdf.xacro"/>
</robot>
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWI1ZWU1OWVkZWM1YmNjNzM0Nzk4MGRmNTQ2OTIxOTNfMWtieXowSnZYTG9vZGdGQ3RXZDJXZGo1NDlKTXNMTHlfVG9rZW46RDVUeGJmdU5sb0ExaWt4bW1PbGNnT0pxbmtkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

*ä½†ä¸å»ºè®®è¿™æ ·ï¼Œå»ºè®®çˆ¶çº§xacroå’Œå­çº§xacroä½¿ç”¨åŒæ ·çš„nameã€‚*

  

3.  ### ç»ƒä¹ 
    

1.  #### æ¡†æ¶
    

1.éœ€æ±‚

ä½¿ç”¨xacroåˆ›å»ºä¸€ä¸ªå››è½®æœºå™¨äººæ¨¡å‹ï¼Œè¯¥æ¨¡å‹åº•ç›˜å¯ä»¥å‚è€ƒ **6.4.4 URDFç»ƒä¹ ** ä¸­çš„å®ç°ï¼Œå¹¶ä¸”åœ¨åº•ç›˜ä¹‹ä¸Šæ·»åŠ äº†ç›¸æœºä¸æ¿€å…‰é›·è¾¾ã€‚ç›¸æœºä¸æ¿€å…‰é›·è¾¾çš„å°ºå¯¸å‚æ•°ã€å®‰è£…ä½ç½®å¯è‡ªå®šä¹‰ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzI0YjExNmFiYzY1MTI3Mzg5YmU0Y2FkYTJjNzI2YThfVUhtT09HYUNDYTVWMjlEMTFVa1BJTkc5QkQ2UkZ2OW9fVG9rZW46RkZCNmJtaUZQb0s3Qmp4Mm82SWNqUXpYblVnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

2.å®ç°åˆ†æ

éœ€æ±‚ä¸­çš„æœºå™¨äººæ¨¡å‹æ˜¯ç”±åº•ç›˜ã€æ‘„åƒå¤´å’Œé›·è¾¾ä¸‰éƒ¨åˆ†ç»„æˆçš„ï¼Œé‚£ä¹ˆå¯ä»¥å°†æ¯ä¸€éƒ¨åˆ†éƒ½å°è£…è¿›ä¸€ä¸ªxacroæ–‡ä»¶ï¼Œæœ€åå†é€šè¿‡xacroæ–‡ä»¶åŒ…å«ç»„ç»‡æˆä¸€ä¸ªå®Œæ•´çš„æœºå™¨äººæ¨¡å‹ã€‚

3.å®ç°

åŠŸèƒ½åŒ…cpp06\_urdfçš„urdf/xacroç›®å½•ä¸‹ï¼Œæ–°å»ºå¤šä¸ªxacroæ–‡ä»¶ï¼Œåˆ†åˆ«ä¸ºï¼š

*   car.urdf.xacroï¼šç”¨äºåŒ…å«ä¸åŒæœºå™¨äººéƒ¨ä»¶å¯¹åº”çš„xacroæ–‡ä»¶ï¼›
    
*   car\_base.urdf.xacroï¼šæè¿°æœºå™¨äººåº•ç›˜çš„xacroæ–‡ä»¶ï¼›
    
*   car\_camera.urdf.xacroï¼šæè¿°æ‘„åƒå¤´çš„xacroæ–‡ä»¶ï¼›
    
*   car\_laser.urdf.xacroï¼šæè¿°é›·è¾¾çš„xacroæ–‡ä»¶ã€‚
    

ç¼–è¾‘car.urdf.xacroæ–‡ä»¶ï¼Œè¾“å…¥å¦‚ä¸‹å†…å®¹ï¼š

```XML
<robot name="car" xmlns:xacro="http://wiki.ros.org/xacro">
    <xacro:include filename="car_base.urdf.xacro"/>
    <xacro:include filename="car_camera.urdf.xacro"/>
    <xacro:include filename="car_laser.urdf.xacro"/>
</robot>
```

  

2.  #### è½¦ä½“
    

ç¼–è¾‘car\_base.urdf.xacroæ–‡ä»¶ï¼Œè¾“å…¥å¦‚ä¸‹å†…å®¹ï¼š

```XML
<robot xmlns:xacro="http://wiki.ros.org/xacro">
    <!-- PI å€¼ -->
    <xacro:property name="PI" value="3.1416"/>
    <!-- å®šä¹‰è½¦è¾†å‚æ•° -->
    <!-- è½¦ä½“é•¿å®½é«˜ -->
    <xacro:property name="base_link_x" value="0.2"/>
    <xacro:property name="base_link_y" value="0.12"/>
    <xacro:property name="base_link_z" value="0.07"/>
    <!-- ç¦»åœ°é—´è· -->
    <xacro:property name="distance" value="0.015"/>
    <!-- è½¦è½®åŠå¾„ å®½åº¦ -->
    <xacro:property name="wheel_radius" value="0.025"/>
    <xacro:property name="wheel_length" value="0.02"/>

    <!-- å®šä¹‰é¢œè‰² -->
    <material name="yellow">
        <color rgba="0.7 0.7 0 0.8" />
    </material>
    <material name="red">
        <color rgba="0.8 0.1 0.1 0.8" />
    </material>
    <material name="gray">
        <color rgba="0.2 0.2 0.2 0.95" />
      </material>
    <!-- å®šä¹‰ base_footprint -->
    <link name="base_footprint">
        <visual>
            <geometry>
                <sphere radius="0.001"/>
            </geometry>
        </visual>
    </link>

    <!-- å®šä¹‰ base_link -->
    <link name="base_link">
        <visual>
            <!-- å½¢çŠ¶ -->
            <geometry>
                <box size="${base_link_x} ${base_link_y} ${base_link_z}" />
            </geometry>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <material name="yellow"/>
        </visual>
    </link>
    <joint name="baselink2basefootprint" type="fixed">
        <parent link="base_footprint"/>
        <child link="base_link"/>
        <origin xyz="0.0 0.0 ${distance + base_link_z / 2}"/>
    </joint>
    <!-- è½¦è½®å®å®šä¹‰ -->
    <xacro:macro name="wheel_func" params="wheel_name is_front is_left" >
        <link name="${wheel_name}_wheel">
            <visual>
                <geometry>
                    <cylinder radius="${wheel_radius}" length="${wheel_length}" />
                </geometry>
                <origin xyz="0 0 0" rpy="${PI / 2} 0 0" />
                <material name="gray"/>
            </visual>
        </link>
        <joint name="${wheel_name}2baselink" type="continuous">
            <parent link="base_link"  />
            <child link="${wheel_name}_wheel" />
            <origin xyz="${(base_link_x / 2 - wheel_radius) * is_front} ${base_link_y / 2 * is_left} ${(base_link_z / 2 + distance - wheel_radius) * -1}" rpy="0 0 0" />
            <axis xyz="0 1 0" />
        </joint>
    </xacro:macro>
    <!-- è½¦è½®å®è°ƒç”¨ -->
    <xacro:wheel_func wheel_name="left_front" is_front="1" is_left="1" />
    <xacro:wheel_func wheel_name="left_back" is_front="-1" is_left="1" />
    <xacro:wheel_func wheel_name="right_front" is_front="1" is_left="-1" />
    <xacro:wheel_func wheel_name="right_back" is_front="-1" is_left="-1" />
</robot>
```

3.  #### æ·»åŠ æ‘„åƒå¤´
    

ç¼–è¾‘car\_camera.urdf.xacroæ–‡ä»¶ï¼Œè¾“å…¥å¦‚ä¸‹å†…å®¹ï¼š

```XML
<!-- æ‘„åƒå¤´ç›¸å…³çš„ xacro æ–‡ä»¶ -->
<robot xmlns:xacro="http://wiki.ros.org/xacro">
    <!-- æ‘„åƒå¤´å±æ€§ -->
    <xacro:property name="camera_x" value="0.012" /> <!-- æ‘„åƒå¤´é•¿åº¦(x) -->
    <xacro:property name="camera_y" value="0.05" /> <!-- æ‘„åƒå¤´å®½åº¦(y) -->
    <xacro:property name="camera_z" value="0.01" /> <!-- æ‘„åƒå¤´é«˜åº¦(z) -->
    <xacro:property name="camera_joint_x" value="${base_link_x / 2 - camera_x / 2}" /> <!-- æ‘„åƒå¤´å®‰è£…çš„xåæ ‡ -->
    <xacro:property name="camera_joint_y" value="0.0" /> <!-- æ‘„åƒå¤´å®‰è£…çš„yåæ ‡ -->
    <xacro:property name="camera_joint_z" value="${base_link_z / 2 + camera_z / 2}" /> <!-- æ‘„åƒå¤´å®‰è£…çš„zåæ ‡:åº•ç›˜é«˜åº¦ / 2 + æ‘„åƒå¤´é«˜åº¦ / 2  -->

    <!-- æ‘„åƒå¤´å…³èŠ‚ä»¥åŠlink -->
    <link name="camera">
        <visual>
            <geometry>
                <box size="${camera_x} ${camera_y} ${camera_z}" />
            </geometry>
            <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
            <material name="red" />
        </visual>
    </link>

    <joint name="camera2baselink" type="fixed">
        <parent link="base_link" />
        <child link="camera" />
        <origin xyz="${camera_joint_x} ${camera_joint_y} ${camera_joint_z}" />
    </joint>
</robot>
```

  

  

4.  #### æ·»åŠ é›·è¾¾
    

ç¼–è¾‘car\_laser.urdf.xacroæ–‡ä»¶ï¼Œè¾“å…¥å¦‚ä¸‹å†…å®¹ï¼š

```XML
<!--
    å°è½¦åº•ç›˜æ·»åŠ é›·è¾¾
-->
<robot xmlns:xacro="http://wiki.ros.org/xacro">

    <material name="blue">
        <color rgba="0.0 0.0 0.4 0.95" />
    </material>

    <!-- é›·è¾¾å±æ€§ -->
    <xacro:property name="laser_length" value="0.03" /> <!-- é›·è¾¾é•¿åº¦ -->
    <xacro:property name="laser_radius" value="0.03" /> <!-- é›·è¾¾åŠå¾„ -->
    <xacro:property name="laser_joint_x" value="0.0" /> <!-- é›·è¾¾å®‰è£…çš„xåæ ‡ -->
    <xacro:property name="laser_joint_y" value="0.0" /> <!-- é›·è¾¾å®‰è£…çš„yåæ ‡ -->
    <xacro:property name="laser_joint_z" value="${base_link_z / 2 + laser_length / 2}" /> <!-- é›·è¾¾å®‰è£…çš„zåæ ‡:è½¦ä½“é«˜åº¦ / 2 + é›·è¾¾é«˜åº¦ / 2  -->

    <!-- é›·è¾¾å…³èŠ‚ä»¥åŠlink -->
    <link name="laser">
        <visual>
            <geometry>
                <cylinder radius="${laser_radius}" length="${laser_length}" />
            </geometry>
            <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
            <material name="blue" />
        </visual>
    </link>

    <joint name="laser2baselink" type="fixed">
        <parent link="base_link" />
        <child link="laser" />
        <origin xyz="${laser_joint_x} ${laser_joint_y} ${laser_joint_z}" />
    </joint>
</robot>
```

5.  #### æ‰§è¡Œ
    

ç¼–è¯‘åï¼Œå·¥ä½œç©ºé—´ç»ˆç«¯ä¸‹è°ƒç”¨å¦‚ä¸‹å‘½ä»¤æ‰§è¡Œï¼š

```Bash
# ROS Humble
ros2 launch cpp06_urdf display.launch.py model:=ros2 pkg prefix --share cpp06_urdf/urdf/xacro/car.urdf.xacro
#ROS Jazzy
colcon build
source install/setup.bash
ros2 run xacro xacro $(ros2 pkg prefix cpp06_urdf)/share/cpp06_urdf/urdf/xacro/car.urdf.xacro -o ./src/cpp06_urdf/urdf/urdf/car.urdf
ros2 launch cpp06_urdf display.launch.py model:=./src/cpp06_urdf/urdf/urdf/car.urdf
```

å‘½ä»¤æ‰§è¡Œåï¼Œrviz2 ä¸­å¯ä»¥æ˜¾ç¤ºä¸éœ€æ±‚ç±»ä¼¼çš„æœºå™¨äººæ¨¡å‹ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDBkODFhNWNkMDY2YzE0N2ZkYzFjZDFiMjhkMDYwMzVfV0o4elk1S25oUUFkZmpLYVpxNVZ5eGJQQWI3dW1saXlfVG9rZW46Tmc1WmI5Y2NVb0VRbjd4cHFTRmNjM29LblRoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

8.  ## å°ç»“
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmQ3Mjk2NzljZjczYjI5YjQ1ZWNmOTJiYjg0NTVlOWJfbnB3TzdSVDM5WGd5NmE3NTVSZEdmZURJVVc5RXhyNk9fVG9rZW46QzdPUWJodTJZb3NRZXV4TXlrU2NEeHF2bkNjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ç›®å‰åªæ˜¯ç©ºå£³ï¼Œæ¿€å…‰é›·è¾¾å’Œæ‘„åƒå¤´ä»¥åŠè½®å­è¿˜éƒ½æ˜¯ç©ºå£³ï¼Œåˆ°è¿›é˜¶è”ç³»ä¸­ï¼Œæ‰å¯ä»¥å®ç°ä½œç”¨ã€‚

  

  

10.  # Stage\_Ros2ä»¿çœŸå¹³å°
    

stage\_ros2æ˜¯åŸºäºStageæ¨¡æ‹Ÿå™¨çš„ROS2åŠŸèƒ½åŒ…ï¼Œç”¨äºåœ¨è™šæ‹Ÿç¯å¢ƒä¸­æ¨¡æ‹Ÿå’Œæ§åˆ¶æœºå™¨äººçš„è¡Œä¸ºã€‚å®ƒæä¾›äº†å¼ºå¤§çš„å·¥å…·å’Œé€šä¿¡æ¥å£ï¼Œå¯ç”¨äºå¼€å‘ã€æµ‹è¯•å’ŒéªŒè¯æœºå™¨äººç³»ç»Ÿã€‚é€šè¿‡stage\_ros2ï¼Œç”¨æˆ·å¯ä»¥è½»æ¾åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼Œå¹¶ä½¿ç”¨ROS 2å‘é€æŒ‡ä»¤æ§åˆ¶æœºå™¨äººçš„è¿åŠ¨ï¼ŒåŒæ—¶æ¥æ”¶ä¼ æ„Ÿå™¨æ•°æ®ã€‚è¿™ä¸ªåŠŸèƒ½åŒ…å¯ä»¥å¸®åŠ©ç”¨æˆ·ä»¥æ›´ä½çš„æˆæœ¬å’Œé£é™©è¿›è¡Œæœºå™¨äººå¼€å‘ï¼Œæä¾›äº†é«˜æ•ˆä¸”çµæ´»çš„æœºå™¨äººä»¿çœŸç¯å¢ƒã€‚

*stageä½¿ç”¨æ‰‹å†Œï¼š*

http://rtv.github.io/Stage/modules.html

ï¼ˆ **å¯ä»¥ä¸å­¦** ï¼Œè¿ROS2å®˜æ–¹éƒ½å·²ç»ç§»é™¤æ‰äº†Stageï¼Œ **ç”¨æ›´ç‰›Xçš„Gazeboæ›´å¥½** ï¼Œä½†å­¦ä¸€å­¦ä¹Ÿé—®é¢˜ä¸å¤§ï¼‰

  

  

1.  ### stage\_ros2å®‰è£…ä¸è¿è¡Œ
    

1.å®‰è£…

å› ä¸ºROS2å®˜æ–¹å·²ç»ç§»é™¤æ‰äº†Stageï¼Œæ‰€ä»¥æˆ‘ä»¬è¦é€šè¿‡æºç ç¼–è¯‘æ‰‹åŠ¨å®‰è£…ï¼Œå·²ç»æœ‰å¤§ä½¬é€‚é…äº†ROS2ç‰ˆæœ¬çš„Stageï¼š

è¯·å…ˆè°ƒç”¨å¦‚ä¸‹æŒ‡ä»¤å®‰è£…ä¾èµ–ï¼š

```Plain Text
sudo apt-get install git cmake g++ libjpeg8-dev libpng-dev libglu1-mesa-dev libltdl-dev libfltk1.1-dev
```

è¿›å…¥ROS2å·¥ä½œç©ºé—´çš„srcç›®å½•ï¼Œè°ƒç”¨å¦‚ä¸‹æŒ‡ä»¤ä¸‹è½½ç›¸å…³ä»“åº“ï¼š

```Plain Text
git clone https://github.com/damuxt/Stage.git
git clone https://github.com/damuxt/stage_ros2.git
```

è¿›å…¥å·¥ä½œç©ºé—´ç›®å½•ï¼Œä½¿ç”¨`colcon build`æŒ‡ä»¤è¿›è¡Œæ„å»ºã€‚

ï¼ˆè¿™æ˜¯ç¬¬ä¸‰æ–¹ä½œè€…é€‚é…Humbleç‰ˆæœ¬çš„ï¼Œæš‚æ—¶ä¸æ”¯æŒJazzyç‰ˆæœ¬ï¼ŒJazzyç‰ˆæœ¬ç›®å‰ç¼–è¯‘ä¼šæŠ¥é”™ï¼Œå¯èƒ½ä½œè€…ä¼šæ›´æ–°Jazzyç‰ˆæœ¬çš„ï¼‰

  

2.èŠ‚ç‚¹è¯´æ˜

`stage_ros2`èŠ‚ç‚¹æ˜¯stage\_ros2åŠŸèƒ½åŒ…çš„æ ¸å¿ƒèŠ‚ç‚¹ä¹‹ä¸€ã€‚å®ƒé€šè¿‡åŠ è½½worldæ–‡ä»¶æ¥åˆ›å»ºä¸€ä¸ªä»¿çœŸåœºæ™¯ï¼ŒåŒ…æ‹¬åœ°å›¾ã€éšœç¢ç‰©å’Œæœºå™¨äººç­‰å…ƒç´ ã€‚worldæ–‡ä»¶æè¿°äº†è™šæ‹Ÿç¯å¢ƒçš„å±æ€§ï¼ŒèŠ‚ç‚¹ä¼šæ ¹æ®æ–‡ä»¶ä¸­çš„æè¿°æ„å»ºå¯¹åº”çš„ç¯å¢ƒã€‚stage\_ros2èŠ‚ç‚¹åˆ©ç”¨è¿™ä¸ªè™šæ‹Ÿç¯å¢ƒæ¥æ¨¡æ‹Ÿæœºå™¨äººçš„è¿åŠ¨ã€æ„ŸçŸ¥å’Œæ§åˆ¶ã€‚é€šè¿‡è¯¥èŠ‚ç‚¹å’Œworldæ–‡ä»¶çš„ç»“åˆï¼Œå¯ä»¥è¿›è¡Œæœºå™¨äººçš„ä»¿çœŸå’Œæµ‹è¯•ã€‚

3.ä½¿ç”¨

åœ¨åŠŸèƒ½åŒ…ä¸‹ï¼Œå·²ç»å†…ç½®äº†ä½¿ç”¨ç¤ºä¾‹ï¼Œç»ˆç«¯ä¸‹å¯ä»¥æ‰§è¡Œå¦‚ä¸‹æŒ‡ä»¤å¯åŠ¨ç¤ºä¾‹ï¼š

```Plain Text
ros2 launch stage_ros2 my_house.launch.py
```

æ¨¡æ‹Ÿå™¨ä»¥åŠrviz2å°†è¢«å¯åŠ¨ï¼Œå¹¶ä¸”åœ¨rviz2ä¸­å¯ä»¥æ˜¾ç¤ºé‡Œç¨‹è®¡ã€æ¿€å…‰é›·è¾¾ä»¥åŠæ·±åº¦ç›¸æœºç­‰ç›¸å…³ä¿¡æ¯ï¼Œè¿è¡Œç»“æœå¦‚ä¸‹ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDU5N2MyYTZhNTEwMzJiN2EwN2Y5NTUyMGFjNzgwYTBfeko0R1pjd3p0dzdtczIxd00yWHprMjRqN2ZBTUhJemhfVG9rZW46UnJtN2JFTlZ6b2J3SGV4STNCWGNKNmNqbkFiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

2.  ### stage\_ros2ä»¿çœŸæ¡†æ¶æ­å»º
    

æœ¬èŠ‚å¼€å§‹ï¼Œæˆ‘ä»¬å°†ä»‹ç»å¦‚ä½•é€šè¿‡stage\_ros2è‡ªå®šä¹‰ä»¿çœŸç¯å¢ƒã€‚

1.å‡†å¤‡å·¥ä½œ

é¦–å…ˆè¯·åˆ›å»ºä¸€ä¸ªåŠŸèƒ½åŒ…ï¼ŒæŒ‡ä»¤å¦‚ä¸‹ï¼š

```Plain Text
ros2 pkg create demo_stage_sim --dependencies stage_ros2
```

ç„¶ååœ¨åŠŸèƒ½åŒ…ä¸‹æ–°å»ºlaunchã€worldã€configç›®å½•ï¼Œå¹¶ä¿®æ”¹åŠŸèƒ½åŒ…ä¸‹çš„CMakeLists.txtæ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹ä»£ç ï¼š

```Plain Text
install(DIRECTORY launch world config DESTINATION share/${PROJECT_NAME})
```

å…¶ä¸­ï¼Œlaunchç›®å½•ç”¨äºå­˜å‚¨launchæ–‡ä»¶ï¼Œconfigç”¨äºå­˜å‚¨rviz2çš„é…ç½®æ–‡ä»¶ï¼Œworldç”¨äºå­˜å‚¨ä»¿çœŸç›¸å…³æ–‡ä»¶ã€‚worldç›®å½•ä¸­è¯·æ–°å»ºmapsç›®å½•ï¼Œå¹¶å°†è¯¾ç¨‹é…å¥—èµ„æ–™ä¸­çš„å›¾ç‰‡ç´ æå¤åˆ¶è¿›å»ã€‚

2.æ­å»ºä»£ç æ¡†æ¶

åœ¨åŠŸèƒ½åŒ…çš„launchç›®å½•ä¸‹ï¼Œæ–°å»ºstage\_sim.launch.pyæ–‡ä»¶ï¼Œå¹¶è¾“å…¥å¦‚ä¸‹å†…å®¹ï¼š

```Plain Text
import os
from ament_index_python.packages import get_package_share_directory
from launch import LaunchDescription
from launch_ros.actions import Node

def generate_launch_description():
    this_directory = get_package_share_directory('demo_stage_sim')
return LaunchDescription([
        Node(
            package='stage_ros2',
            executable='stage_ros2',
            name='stage',
            parameters=[{"world_file": os.path.join(this_directory,'world','sim.world')}],
        )
    ])
```

è¯¥launchæ–‡ä»¶å°†è¿è¡Œstage\_ros2èŠ‚ç‚¹ï¼Œå¹¶åŠ è½½worldç›®å½•ä¸‹çš„sim.worldæ–‡ä»¶ã€‚

åœ¨worldç›®å½•ä¸‹ï¼Œæ–°å»ºsim.worldæ–‡ä»¶ï¼Œå¹¶è¾“å…¥å¦‚ä¸‹å†…å®¹ï¼š

```Plain Text
# -----------------------------------------------------------------------------
# è®¾ç½®çª—ä½“
# è®¾ç½®æ¨¡æ‹Ÿå™¨åœ°å›¾åˆ†è¾¨ç‡(ä»¥ ç±³/åƒç´  ä¸ºå•ä½)
resolution 0.02
# è®¾ç½®æ¨¡æ‹Ÿå™¨çš„æ—¶é—´æ­¥é•¿(ä»¥ æ¯«ç§’ ä¸ºå•ä½)
interval_sim 100
```

sim.worldæ–‡ä»¶å½“å‰åªæ˜¯å£°æ˜äº†ä»¿çœŸç¯å¢ƒçš„ä¸€äº›é€šç”¨å‚æ•°ã€‚

3.ç¼–è¯‘

ç»ˆç«¯ä¸­è¿›å…¥å½“å‰å·¥ä½œç©ºé—´ï¼Œç¼–è¯‘åŠŸèƒ½åŒ…ï¼š

```Plain Text
colcon build --packages-select demo_stage_sim
```

4.æ‰§è¡Œ

å½“å‰å·¥ä½œç©ºé—´ä¸‹ï¼Œå¯åŠ¨ç»ˆç«¯ï¼Œå¹¶è¾“å…¥å¦‚ä¸‹æŒ‡ä»¤ï¼š

```Plain Text
. install/setup.bash
ros2 launch demo_stage_sim stage_sim.launch.py
```

æ‰§è¡Œè¯¥launchæ–‡ä»¶åï¼Œå°†ç”Ÿæˆä¸€ä¸ªçª—å£ï¼Œè¯¥çª—å£ä¸­å¹¶æ— ä»»ä½•å†…å®¹ï¼Œä¸‹ä¸€æ­¥æˆ‘ä»¬å°±å¯ä»¥ç€æ‰‹åˆ›å»ºå…·ä½“çš„ä»¿çœŸå†…å®¹äº†ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjFlYjQyZGNkNTcxYzdmZWY3NzBmYTE2NDc2NDgyY2RfT0IwaGVQMktoQTJZNUxtcTBwRlVNdEFybTVsVGZwRGNfVG9rZW46WUdzcGJIeVo5b0ZqdEZ4bG0wV2M1Y1NEblRlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

5.worldæ–‡ä»¶å‚æ•°

**æ‘˜è¦å’Œé»˜è®¤å€¼**

```Plain Text
name                      <worldfile name>
interval_sim              100
quit_time                 0
resolution                0.02
show_clock                0
show_clock_interval       100
threads                   0
```

**è¯¦è§£**

*   name <string>
    
*   ç”¨äºä¸–ç•Œçš„è¯†åˆ«åç§°ï¼Œä¾‹å¦‚åœ¨å›¾å½¢ç”¨æˆ·ç•Œé¢çš„æ ‡é¢˜æ ä¸­ä½¿ç”¨ã€‚
    
*   interval\_sim <float>
    
*   æ¯æ¬¡è°ƒç”¨ World::Update() æ—¶è¿è¡Œçš„æ¨¡æ‹Ÿæ—¶é—´é‡ã€‚æ¯ä¸ªæ¨¡å‹éƒ½æœ‰å…¶è‡ªå·±å¯é…ç½®çš„æ›´æ–°é—´éš”ï¼Œå¯ä»¥å¤§äºæˆ–å°äºæ­¤å€¼ï¼Œä½†æ¯”æ­¤å€¼æ›´çŸ­çš„é—´éš”åœ¨å›¾å½¢ç”¨æˆ·ç•Œé¢æˆ– World æ›´æ–°å›è°ƒä¸­æ˜¯ä¸å¯è§çš„ã€‚æ‚¨å¯èƒ½ä¸éœ€è¦æ”¹å˜é»˜è®¤å€¼100æ¯«ç§’ï¼šæ­¤å€¼åœ¨å®¢æˆ·ç«¯å†…éƒ¨ä½¿ç”¨ï¼Œå¦‚Playerå’ŒWebSimã€‚
    
*   quit\_time <float> åœ¨æ¨¡æ‹Ÿæ—¶é—´è¾¾åˆ°æŒ‡å®šçš„ç§’æ•°ååœæ­¢æ¨¡æ‹Ÿã€‚åœ¨ libstage ä¸­ï¼ŒWorld::Update() è¿”å› trueã€‚åœ¨å¸¦æœ‰å›¾å½¢ç”¨æˆ·ç•Œé¢çš„ Stage ä¸­ï¼Œæ¨¡æ‹Ÿè¢«æš‚åœã€‚åœ¨æ²¡æœ‰å›¾å½¢ç”¨æˆ·ç•Œé¢çš„ Stage ä¸­ï¼ŒStage ä¼šé€€å‡ºã€‚
    
*   resolution <float> åº•å±‚ä½å›¾æ¨¡å‹çš„åˆ†è¾¨ç‡ï¼ˆä»¥ç±³ä¸ºå•ä½ï¼‰ã€‚è¾ƒå¤§çš„å€¼å¯ä»¥åŠ å¿«å°„çº¿è¿½è¸ªé€Ÿåº¦ï¼Œä½†ä¼šä»¥ç¢°æ’æ£€æµ‹å’Œæ„ŸçŸ¥ç²¾åº¦ä¸ºä»£ä»·ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œé»˜è®¤å€¼æ˜¯ä¸€ä¸ªåˆç†çš„é€‰æ‹©ã€‚
    
*   show\_clock <int>
    
*   å¦‚æœéé›¶ï¼Œæ¯ç»è¿‡ $show\_clock\_interval æ¬¡æ›´æ–°å°±åœ¨æ ‡å‡†è¾“å‡ºä¸Šæ‰“å°æ¨¡æ‹Ÿæ—¶é—´ã€‚è¿™å¯¹äºè§‚å¯Ÿé GUI æ¨¡æ‹Ÿçš„è¿›å±•éå¸¸æœ‰ç”¨ã€‚
    
*   show\_clock\_interval <int>
    
*   è®¾ç½®åœ¨å¯ç”¨ $show\_clock çš„æƒ…å†µä¸‹ï¼Œåœ¨æ ‡å‡†è¾“å‡ºä¸Šæ‰“å°æ—¶é—´ä¹‹é—´çš„æ›´æ–°æ¬¡æ•°ã€‚é»˜è®¤å€¼æ˜¯æ¯ç»è¿‡ 10 ç§’æ¨¡æ‹Ÿæ—¶é—´æ‰“å°ä¸€æ¬¡ã€‚è¾ƒå°çš„å€¼ä¼šç¨å¾®é™ä½æ¨¡æ‹Ÿé€Ÿåº¦ã€‚
    
*   threads <int>
    
*   è¦ç”Ÿæˆçš„å·¥ä½œçº¿ç¨‹æ•°ã€‚ä¸€äº›æ¨¡å‹å¯ä»¥å¹¶è¡Œæ›´æ–°ï¼ˆä¾‹å¦‚æ¿€å…‰å™¨ã€æµ‹è·ä»ªï¼‰ï¼Œåœ¨è¿™é‡Œè¿è¡Œ 2 ä¸ªæˆ–æ›´å¤šçº¿ç¨‹å¯èƒ½ä¼šä½¿æ¨¡æ‹Ÿè¿è¡Œæ›´å¿«ï¼Œå–å†³äºå¯ç”¨çš„ CPU å†…æ ¸æ•°é‡å’Œä¸–ç•Œæ–‡ä»¶çš„æƒ…å†µã€‚å¦‚æœæ‚¨æœ‰å¯ç”¨å¹¶è¡Œçš„é«˜åˆ†è¾¨ç‡æ¨¡å‹ï¼ˆä¾‹å¦‚å¸¦æœ‰æ•°ç™¾æˆ–æ•°åƒä¸ªæ ·æœ¬çš„æ¿€å…‰å™¨æˆ–å¤§é‡æ¨¡å‹ï¼‰ï¼Œåˆ™æ¯ä¸ªå†…æ ¸ä½¿ç”¨ä¸€ä¸ªçº¿ç¨‹ã€‚
    

  

3.  ### stage\_ros2è®¾ç½®çª—ä½“
    

stage çª—ä½“ç”±èœå•æ å’Œæ¨¡æ‹Ÿä¸–ç•Œçš„è§†å›¾ç»„æˆã€‚æˆ‘ä»¬å¯ä»¥æ”¾å¤§å’Œç¼©å°è§†å›¾ï¼Œå¹¶æ»šåŠ¨è§†å›¾ä»¥æŸ¥çœ‹æ¨¡æ‹Ÿä¸–ç•Œçš„æ›´å¤šå†…å®¹ã€‚æ¨¡æ‹Ÿçš„æœºå™¨äººè®¾å¤‡ã€éšœç¢ç‰©ç­‰è¢«æ¸²æŸ“ä¸ºå½©è‰²å¤šè¾¹å½¢ã€‚çª—ä½“ä¸­è¿˜å¯ä»¥å®ç°å„ç§ä¼ æ„Ÿå™¨å’Œæ‰§è¡Œå™¨æ¨¡å‹çš„æ•°æ®å’Œé…ç½®çš„å¯è§†åŒ–ã€‚èœå•åˆ™å…·æœ‰ç”¨äºæ§åˆ¶å‘ˆç°å“ªäº›æ•°æ®å’Œé…ç½®çš„é€‰é¡¹ã€‚æœ¬èŠ‚æˆ‘ä»¬å°†ä»‹ç»å¦‚ä½•è®¾ç½®ä»¥åŠæ“ä½œstageçª—ä½“ã€‚

1.è®¾ç½®çª—ä½“

è®¾ç½®çª—ä½“ç›¸å…³å‚æ•°ï¼Œå¯ä»¥åœ¨stage\_sim.launch.pyæ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š

```Plain Text
# é…ç½®çª—ä½“å‚æ•°
window
(
  size [ 700.000 700.000 ] # çª—ä½“å°ºå¯¸(ä»¥ åƒç´  ä¸ºå•ä½)
  scale 35  # ç¼©æ”¾æ¯”
  center [ 0  0 ] # åœ°å›¾ç›¸å¯¹äºçª—ä½“çš„åç§»é‡(ä»¥ ç±³ ä¸ºå•ä½)
  rotate [ 0  0 ] # åœ°å›¾æ—‹è½¬è§’åº¦
  show_data 1     # æ˜¯å¦æ˜¾ç¤ºä¼ æ„Ÿå™¨æ•°æ® 1=on 0=off
)
```

ä¸Šè¿°ä»£ç åˆ›å»ºäº†ä¸€ä¸ªçª—ä½“å¯¹è±¡ï¼Œè¯¥çª—ä½“åˆ†è¾¨ç‡ä¸º700\*700ï¼Œä½¿ç”¨äº†35å€ç¼©æ”¾æ¯”ï¼Œåç»­åŠ è½½çš„åœ°å›¾ç›¸å¯¹äºçª—ä½“æ— åç§»æ— æ—‹è½¬ä¸”ä¼šä»¥å¯è§†åŒ–çš„æ–¹å¼æ˜¾ç¤ºä¼ æ„Ÿå™¨æ•°æ®ã€‚

2.ç¼–è¯‘æ‰§è¡Œ

æ„å»ºåŠŸèƒ½åŒ…å¹¶æ‰§è¡Œlaunchæ–‡ä»¶åï¼Œè¿è¡Œç»“æœå¦‚ä¸‹ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODc2NzUyODllNDEyZjZhZGEzNTY2ZTY5ZmRkM2QzNTFfQnZmT1hTVU1uSVdtV2JJRXNYYXB6TERNa3pZWGJMY2NfVG9rZW46REphcmJ2VE1rb0NRNFl4bEY3NGM5R1BUbnFlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

3.çª—ä½“å‚æ•°

**æ‘˜è¦å’Œé»˜è®¤å€¼**

```Plain Text
window
(
  size [ 400 300 ]

  # camera options
  center [ 0 0 ]
  rotate [ 0 0 ]
  scale 1.0

  # perspective camera options
  pcam_loc [ 0 -4 2 ]
  pcam_angle [ 70 0 ]

  # GUI options
  show_data 0
  show_flags 1
  show_blocks 1
  show_clock 1
  show_footprints 0
  show_grid 1
  show_trailarrows 0
  show_trailrise 0
  show_trailfast 0
  show_occupancy 0
  show_tree 0
  pcam_on 0
  screenshots 0
)
```

**è¯¦è§£**

*   speedup <int>
    
*   Stage å°†å°è¯•ä»¥å®æ—¶çš„è¿™ä¸ªå€æ•°è¿è¡Œã€‚å¦‚æœè®¾ç½®ä¸º -1ï¼ŒStage å°†å°½å¯èƒ½ä»¥æœ€å¿«é€Ÿåº¦è¿è¡Œï¼Œå¹¶ä¸”ä¸ä¼šå°è¯•è·Ÿè¸ªå®æ—¶æ—¶é—´ã€‚
    
*   size \[<width:int><height:int> \]
    
*   çª—å£çš„å¤§å°ï¼ˆä»¥åƒç´ ä¸ºå•ä½ï¼‰ã€‚
    
*   center \[<x:float><y:float> \]
    
*   çª—å£ä¸­å¿ƒçš„ä½ç½®ï¼Œä½¿ç”¨ä¸–ç•Œåæ ‡è¡¨ç¤ºï¼ˆä»¥ç±³ä¸ºå•ä½ï¼‰ã€‚
    
*   rotate \[<pitch:float><yaw:float> \]
    
*   ç›¸å¯¹äºå‚ç›´å‘ä¸Šçš„è§’åº¦ï¼Œæ—‹è½¬è§’åº¦ï¼ˆä»¥åº¦ä¸ºå•ä½ï¼‰ã€‚
    
*   scale<float>
    
*   ä¸–ç•Œåæ ‡åˆ°åƒç´ åæ ‡çš„æ¯”ä¾‹ï¼ˆçª—å£ç¼©æ”¾ï¼‰ã€‚
    
*   pcam\_loc \[<x:int><y:int><z:int> \]
    
*   é€è§†æ‘„åƒæœºçš„ä½ç½®ï¼ˆä»¥ç±³ä¸ºå•ä½ï¼‰ã€‚
    
*   pcam\_angle \[<pitch:float><yaw:float> \]
    
*   é€è§†æ‘„åƒæœºçš„å‚ç›´å’Œæ°´å¹³è§’åº¦ã€‚
    
*   pcam\_on<int>
    
*   æ˜¯å¦å¯ç”¨é€è§†æ‘„åƒæœºï¼ˆ0/1ï¼‰ã€‚
    

4.æ“ä½œçª—ä½“

**æ»šåŠ¨è§†å›¾**

åœ¨èƒŒæ™¯ä¸Šå·¦é”®å•å‡»å¹¶æ‹–åŠ¨ä»¥ç§»åŠ¨ä½ å¯¹ä¸–ç•Œçš„è§†å›¾ã€‚

**ç¼©æ”¾è§†å›¾**

æ»šåŠ¨é¼ æ ‡æ»šè½®å¯æ”¾å¤§æˆ–ç¼©å°é¼ æ ‡å…‰æ ‡å¤„çš„ä½ç½®ã€‚

**ä¿å­˜ä¸–ç•Œ**

ä½ å¯ä»¥ä¿å­˜å½“å‰ä¸–ç•Œä¸­æ‰€æœ‰äº‹ç‰©çš„ä½ç½®ï¼Œä½¿ç”¨â€œæ–‡ä»¶/ä¿å­˜â€èœå•é¡¹ã€‚è­¦å‘Šï¼šä¿å­˜çš„ä½ç½®å°†è¦†ç›–å½“å‰çš„ä¸–ç•Œæ–‡ä»¶ã€‚åœ¨ä¿å­˜ä¹‹å‰ï¼Œå…ˆå¤åˆ¶ä½ çš„ä¸–ç•Œæ–‡ä»¶ï¼Œä»¥ä¿ç•™æ—§çš„ä½ç½®ã€‚å¦å¤–ï¼Œå¯ä»¥ä½¿ç”¨â€œæ–‡ä»¶/å¦å­˜ä¸ºâ€èœå•é¡¹å°†å…¶ä¿å­˜åˆ°ä¸€ä¸ªæ–°çš„ä¸–ç•Œæ–‡ä»¶ä¸­ã€‚

**æš‚åœå’Œæ¢å¤æ—¶é’Ÿ**

æŒ‰ä¸‹â€œpâ€é”®å¯ä»¥æš‚åœæˆ–æ¢å¤æ¨¡æ‹Ÿã€‚æŒ‰ä¸‹â€œ.â€ï¼ˆå¥å·ï¼‰é”®å¯ä»¥è¿è¡Œä¸€ä¸ªæ¨¡æ‹Ÿæ­¥éª¤ã€‚æŒ‰ä½â€œ.â€é”®å¯ä»¥é‡å¤å¤šæ¬¡æ­¥è¿›ã€‚æ­¥è¿›ä¼šè®©æ¨¡æ‹Ÿæš‚åœï¼Œæ‰€ä»¥æŒ‰ä¸‹â€œpâ€é”®å¯ä»¥æ¢å¤è¿è¡Œã€‚å¯ä»¥åœ¨ä¸–ç•Œæ–‡ä»¶ä¸­ä½¿ç”¨â€œpausedâ€å±æ€§æ¥è®¾ç½®åˆå§‹çš„æš‚åœ/è¿è¡ŒçŠ¶æ€ã€‚

**é€‰æ‹©æ¨¡å‹**

å¯ä»¥é€šè¿‡ç‚¹å‡»å·¦é”®æ¥é€‰æ‹©æ¨¡å‹ã€‚é€šè¿‡æŒ‰ä½Shifté”®å¹¶ç‚¹å‡»å¤šä¸ªæ¨¡å‹ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©å¤šä¸ªæ¨¡å‹ã€‚é€‰æ‹©çš„æ¨¡å‹å¯ä»¥é€šè¿‡æ‹–åŠ¨æ¥ç§»åŠ¨ï¼Œæˆ–è€…é€šè¿‡æŒ‰ä½å³é”®å¹¶ç§»åŠ¨é¼ æ ‡æ¥æ—‹è½¬ã€‚ç‚¹å‡»ä¸–ç•Œä¸­çš„ç©ºç™½ä½ç½®å¯ä»¥æ¸…é™¤é€‰æ‹©ã€‚åœ¨æ¸…é™¤é€‰æ‹©åï¼Œæœ€åé€‰ä¸­çš„å•ä¸ªæ¨¡å‹å°†è¢«ä¿å­˜ä¸ºå½±å“ç‰¹å®šæ¨¡å‹çš„å‡ ä¸ªè§†å›¾é€‰é¡¹çš„ç›®æ ‡ã€‚

**è§†å›¾é€‰é¡¹**

è§†å›¾èœå•æä¾›äº†è®¸å¤šå½±å“ä¸–ç•Œæ¸²æŸ“æ–¹å¼çš„åŠŸèƒ½ã€‚åœ¨æ¯ä¸ªé€‰é¡¹çš„å³ä¾§ï¼Œé€šå¸¸æœ‰ä¸€ä¸ªæŒ‰é”®å¿«æ·é”®ï¼Œå¯å¿«é€Ÿåˆ‡æ¢ç›¸å…³é€‰é¡¹ã€‚

â€œDataâ€é€‰é¡¹ï¼ˆå¿«æ·é”®'d'ï¼‰å¯åˆ‡æ¢ä¼ æ„Ÿå™¨æ•°æ®å¯è§†åŒ–ã€‚æ»¤æ³¢å™¨æ•°æ®é€‰é¡¹ï¼ˆå¿«æ·é”®Shift+'d'ï¼‰æ‰“å¼€å¯¹è¯æ¡†ï¼Œå¯å¯ç”¨æˆ–ç¦ç”¨ç‰¹å®šä¼ æ„Ÿå™¨çš„å¯è§†åŒ–ã€‚å¯¹è¯æ¡†ä¸­çš„â€œVisualize Allâ€é€‰é¡¹å¯åˆ‡æ¢æ˜¯å¦ä¸ºæ‰€æœ‰æ¨¡å‹å¯ç”¨ä¼ æ„Ÿå™¨å¯è§†åŒ–ï¼Œè¿˜æ˜¯ä»…ä¸ºå½“å‰é€‰æ‹©çš„æ¨¡å‹å¯ç”¨ã€‚

â€œFollowâ€é€‰é¡¹å¯ä¿æŒè§†å›¾å§‹ç»ˆåœ¨æœ€åé€‰æ‹©çš„æ¨¡å‹ä¸Šã€‚

â€œPerspective cameraâ€é€‰é¡¹å¯ä»¥ä»æ­£äº¤è§†å›¾åˆ‡æ¢åˆ°é€è§†è§†å›¾ã€‚

**ä¿å­˜æˆªå›¾**

è¦ä¿å­˜ä¸–ç•Œçš„ä¸€ç³»åˆ—æˆªå›¾ï¼Œä»è§†å›¾èœå•ä¸­é€‰æ‹©â€œSave screenshotsâ€é€‰é¡¹ä»¥å¼€å§‹å½•åˆ¶å›¾åƒï¼Œç„¶åå†æ¬¡ä»èœå•ä¸­é€‰æ‹©è¯¥é€‰é¡¹ä»¥åœæ­¢ã€‚

  

4.  ### stage\_ros2åŸºæœ¬æ¨¡å‹
    

åŸºæœ¬æ¨¡å‹ï¼ˆmodelï¼‰æ¨¡æ‹Ÿå…·æœ‰åŸºæœ¬å±æ€§çš„å¯¹è±¡ï¼›ä½ç½®ã€å¤§å°ã€é€Ÿåº¦ã€é¢œè‰²ã€å¯¹å„ç§ä¼ æ„Ÿå™¨çš„å¯è§æ€§ç­‰ã€‚åŸºæœ¬æ¨¡å‹è¿˜å…·æœ‰ç”±çº¿æ€§åˆ—è¡¨ç»„æˆçš„ä¸»ä½“ã€‚åœ¨å†…éƒ¨ï¼ŒåŸºæœ¬æ¨¡å‹è¢«ç”¨ä½œæ‰€æœ‰å…¶ä»–æ¨¡å‹ç±»å‹çš„åŸºç±»ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨åŸºæœ¬æ¨¡å‹æ¥æ¨¡æ‹Ÿç¯å¢ƒå¯¹è±¡ã€‚åœ¨stageä¸­ï¼Œåº•ç›˜æ¨¡å‹ã€é›·è¾¾æ¨¡å‹ã€ç›¸æœºæ¨¡å‹ç­‰éƒ½å¯ä»¥çœ‹ä½œæ˜¯åŸºæœ¬æ¨¡å‹çš„å­ç±»ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjI0MWRjZTY5YTlkNjc0MTg0MDYzYzQwNTZmM2NlOTFfZmJqcVpQSVBTeURIU0dLcjdUdmVlY1VXcll1VFlrOThfVG9rZW46VURsOWJoU0Zib09EMGp4aEVaTmNMM2R2blliXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

1.æ·»åŠ åŸºæœ¬æ¨¡å‹

åœ¨stage\_sim.launch.pyæ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š

```Plain Text
# -----------------------------------------------------------------------------
# æ·»åŠ éšœç¢ç‰©
model( pose [ -2 -4 0 0 ] color "green")
# define a block
define my_block model
(
  size [1.0 1.0 1.0]
  gui_nose 0
  gui_grid 0
  gui_outline 0
)

# throw in a block
my_block( pose [ 0 4 0 90 ] color "red" bitmap "maps/ghost.png")
```

ä¸Šè¿°ä»£ç ä¸­ï¼Œç›´æ¥ä½¿ç”¨é»˜è®¤çš„åŸºç¡€modelåˆ›å»ºäº†ä¸€ä¸ªç»¿è‰²æ¨¡å‹å¯¹è±¡ï¼Œå¹¶ä¸”è¿˜è‡ªå®šä¹‰äº†ç»§æ‰¿è‡ªmodelçš„my\_blockæ¨¡å‹ï¼Œç„¶ååˆ›å»ºäº†è¯¥æ¨¡å‹å¯¹è±¡ã€‚

2.ç¼–è¯‘æ‰§è¡Œ

æ„å»ºåŠŸèƒ½åŒ…å¹¶æ‰§è¡Œlaunchæ–‡ä»¶åï¼Œè¿è¡Œç»“æœå¦‚ä¸‹ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzhmN2EyZTkzYzliMGVlYWRlZDEzOWIxZjhkZDdlZGJfT3lKbTRXU1RKRGRvc1QyMHlGRUV6RW4xcGQ5a2hkQzZfVG9rZW46WWhUQ2JjSVlwb0ZUM3N4ajlMZWNmNGlTbm5mXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

3.çª—ä½“å‚æ•°

**æ‘˜è¦å’Œé»˜è®¤å€¼**

```Plain Text
model (
    pose [ 0.0 0.0 0.0 0.0 ]
    size [ 0.1 0.1 0.1 ]
    origin [ 0.0 0.0 0.0 0.0 ]
    velocity [ 0.0 0.0 0.0 0.0 ]
    color "red"
    color_rgba [ 0.0 0.0 0.0 1.0 ]
    bitmap ""
    ctrl ""
    # determine how the model appears in various sensors
    fiducial_return 0
    fiducial_key 0
    obstacle_return 1
    ranger_return 1
    blob_return 1
    laser_return LaserVisible
    gripper_return 0
    gravity_return 0
    sticky_return 0
    # GUI properties
    gui_nose 0
    gui_grid 0
    gui_outline 1
    gui_move 0 (1 if the model has no parents);
    boundary 0
    mass 10.0
    map_resolution 0.1
    say ""
    alwayson 0
)
```

**è¯¦è§£**

*   pose \[ x:<float> y:<float> z:<float> heading:<float> \] æŒ‡å®šæ¨¡å‹åœ¨å…¶çˆ¶åæ ‡ç³»ä¸­çš„å§¿æ€ã€‚
    
*   size \[ x:<float> y:<float> z:<float> \] æŒ‡å®šæ¨¡å‹åœ¨å„ä¸ªç»´åº¦ä¸Šçš„å¤§å°ã€‚
    
*   origin \[ x:<float> y:<float> z:<float> heading:<float> \] æŒ‡å®šå¯¹è±¡ä¸­å¿ƒçš„ä½ç½®ï¼Œç›¸å¯¹äºå…¶å§¿æ€ã€‚
    
*   velocity \[ x:<float> y:<float> z:<float> heading:<float> omega:<float> \] æŒ‡å®šæ¨¡å‹çš„åˆå§‹é€Ÿåº¦ã€‚è¯·æ³¨æ„ï¼Œå¦‚æœæ¨¡å‹æ’åˆ°éšœç¢ç‰©ï¼Œå…¶é€Ÿåº¦å°†è¢«è®¾ç½®ä¸ºé›¶ã€‚
    
*   velocity\_enable int (é»˜è®¤ä¸º0) å¤§å¤šæ•°æ¨¡å‹å¿½ç•¥å…¶é€Ÿåº¦çŠ¶æ€ã€‚è¿™æ ·å¯ä»¥èŠ‚çœå¤„ç†æ—¶é—´ï¼Œå› ä¸ºå¤§å¤šæ•°æ¨¡å‹çš„é€Ÿåº¦æ°¸è¿œä¸ä¼šè¢«è®¾ç½®ä¸ºéé›¶å€¼ã€‚ä¸€äº›å­ç±»ï¼ˆä¾‹å¦‚ModelPositionï¼‰ä¼šæ”¹å˜è¿™ä¸ªé»˜è®¤å€¼ï¼Œå› ä¸ºå®ƒä»¬æœŸæœ›ç§»åŠ¨ã€‚ç”¨æˆ·å¯ä»¥åœ¨è¿™é‡ŒæŒ‡å®šä¸€ä¸ªéé›¶å€¼æ¥å¯ç”¨å¯¹è¯¥æ¨¡å‹çš„é€Ÿåº¦æ§åˆ¶ã€‚è¿™ä¸è°ƒç”¨Model::VelocityEnable()çš„æ•ˆæœç›¸åŒã€‚
    
*   color <string> ä½¿ç”¨X11æ•°æ®åº“ï¼ˆrgb.txtï¼‰ä¸­çš„é¢œè‰²åç§°æŒ‡å®šå¯¹è±¡çš„é¢œè‰²ã€‚
    
*   bitmap filename:<string> é€šè¿‡è§£é‡Šä½å›¾ä¸­çš„çº¿æ¡æ¥ç»˜åˆ¶æ¨¡å‹ï¼ˆæ”¯æŒbmpã€jpegã€gifã€pngï¼‰ã€‚æ–‡ä»¶è¢«æ‰“å¼€å¹¶è§£æä¸ºä¸€ç»„çº¿æ¡ã€‚è¿™äº›çº¿æ¡è¢«ç¼©æ”¾ä»¥é€‚åº”æ¨¡å‹å½“å‰å¤§å°æ‰€å®šä¹‰çš„çŸ©å½¢å†…ã€‚
    
*   ctrl <string> æŒ‡å®šæ¨¡å‹çš„æ§åˆ¶å™¨æ¨¡å—åŠå…¶å‚æ•°å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼Œå­—ç¬¦ä¸²"foo bar bash"å°†åŠ è½½libfoo.soï¼Œå…¶Init()å‡½æ•°å°†ä»¥æ•´ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå‚æ•°è¿›è¡Œè°ƒç”¨ï¼ˆåŒ…æ‹¬åº“åç§°ï¼‰ã€‚æ§åˆ¶å™¨éœ€è¦è§£æå­—ç¬¦ä¸²ï¼ˆå¦‚æœéœ€è¦å‚æ•°ï¼‰ã€‚
    
*   fiducial\_return fiducial\_id <int> å¦‚æœéé›¶ï¼Œåˆ™é€šè¿‡fiducialfinderä¼ æ„Ÿå™¨æ£€æµ‹åˆ°æ­¤æ¨¡å‹ã€‚è¯¥å€¼ç”¨ä½œåŸºå‡†æ ‡è¯†ç¬¦ã€‚
    
*   fiducial\_key <int> ä»…å½“æ¨¡å‹å’Œfiducialfinderçš„fiducial\_keyå€¼åŒ¹é…æ—¶ï¼Œfiducial\_idæ¨¡å‹æ‰ä¼šè¢«fiducialfinderæ£€æµ‹åˆ°ã€‚è¿™å…è®¸æ‚¨åœ¨åŒä¸€ç¯å¢ƒä¸­æ‹¥æœ‰å‡ ç§ç‹¬ç«‹ç±»å‹çš„åŸºå‡†æ ‡è¯†ï¼Œæ¯ç§ç±»å‹åªæ˜¾ç¤ºåœ¨ä¸ºå…¶"è°ƒè°"çš„fiducialfindersä¸­ã€‚
    
*   obstacle\_return <int> å¦‚æœä¸º1ï¼Œåˆ™æ­¤æ¨¡å‹å¯ä»¥ä¸å…·æœ‰æ­¤å±æ€§è®¾ç½®çš„å…¶ä»–æ¨¡å‹å‘ç”Ÿç¢°æ’ã€‚
    
*   ranger\_return <int> å¦‚æœä¸º1ï¼Œåˆ™è¯¥æ¨¡å‹å¯ä»¥è¢«rangerä¼ æ„Ÿå™¨æ£€æµ‹åˆ°ã€‚
    
*   blob\_return <int> å¦‚æœä¸º1ï¼Œåˆ™è¯¥æ¨¡å‹å¯ä»¥åœ¨blob\_finderä¸­è¢«æ£€æµ‹åˆ°ï¼ˆå–å†³äºå…¶é¢œè‰²ï¼‰ã€‚
    
*   laser\_return <int> å¦‚æœä¸º0ï¼Œåˆ™æ­¤æ¨¡å‹ä¸ä¼šè¢«æ¿€å…‰ä¼ æ„Ÿå™¨æ£€æµ‹åˆ°ã€‚å¦‚æœä¸º1ï¼Œåˆ™è¯¥æ¨¡å‹åœ¨æ¿€å…‰ä¼ æ„Ÿå™¨ä¸­æ˜¾ç¤ºä¸ºæ­£å¸¸ï¼ˆ0ï¼‰åå°„ã€‚å¦‚æœä¸º2ï¼Œåˆ™æ˜¾ç¤ºä¸ºé«˜ï¼ˆ1ï¼‰åå°„ã€‚
    
*   gripper\_return <int> å¦‚æœä¸º1ï¼Œåˆ™è¯¥æ¨¡å‹å¯ä»¥è¢«å¤¹çˆªå¤¹å–ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ä¸å…·æœ‰éé›¶obstacle\_returnçš„ä»»ä½•ä¸œè¥¿çš„ç¢°æ’æ¥æ¨åŠ¨ã€‚
    
*   gui\_nose <int> å¦‚æœä¸º1ï¼Œåˆ™åœ¨æ¨¡å‹ä¸Šç»˜åˆ¶æ˜¾ç¤ºå…¶æœå‘çš„é¼»å­ï¼ˆæ­£Xè½´ï¼‰ã€‚
    
*   gui\_grid <int> å¦‚æœä¸º1ï¼Œåˆ™åœ¨æ¨¡å‹ä¸Šç»˜åˆ¶æ¯”ä¾‹ç½‘æ ¼ã€‚
    
*   gui\_outline <int> å¦‚æœä¸º1ï¼Œåˆ™åœ¨æ¨¡å‹å‘¨å›´ç»˜åˆ¶è¾¹ç•Œæ¡†ï¼ŒæŒ‡ç¤ºå…¶å¤§å°ã€‚
    
*   gui\_move <int> å¦‚æœä¸º1ï¼Œåˆ™æ¨¡å‹å¯ä»¥åœ¨GUIçª—å£ä¸­é€šè¿‡é¼ æ ‡ç§»åŠ¨ã€‚
    

  

5.  ### stage\_ros2æ·»åŠ åœ°å›¾
    

æœ¬èŠ‚æˆ‘ä»¬å°†åœ¨ä»¿çœŸç¯å¢ƒä¸­ï¼Œæ·»åŠ ä¸€å¼ å…¨å±€åœ°å›¾ï¼Œè¯·å…ˆå‡†å¤‡ä¸€å¼ ä½œä¸ºå…¨å±€åœ°å›¾çš„å›¾ç‰‡ã€‚

1.æ·»åŠ åœ°å›¾

åœ¨stage\_sim.launch.pyæ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š

```Plain Text
# -----------------------------------------------------------------------------
# è®¾ç½®åœ°å›¾(å®šä¹‰æ¨¡å‹)
define floorplan model
(
  color "gray30"  # é¢œè‰²
  boundary 1  # ä¸ºåœ°å›¾è®¾ç½®è¾¹æ¡†

  gui_nose 0
  gui_grid 0 

  gui_outline 0
  gripper_return 0
  fiducial_return 0
  laser_return 1
)

# åŠ è½½åœ°å›¾
floorplan
( 
  name "room"
  size [16.000 16.000 0.800]
  pose [0 0 0 0]
  bitmap "maps/room.jpg"
  gui_move 0
)
```

ä¸Šè¿°ä»£ç è‡ªå®šä¹‰äº†floorplanæ¨¡å‹ï¼Œå¹¶æ ¹æ®æ­¤æ¨¡å‹åˆ›å»ºäº†ä¸€ä¸ªåŠ è½½äº†åœ°å›¾æ•°æ®çš„floorplanå¯¹è±¡ã€‚

2.ç¼–è¯‘æ‰§è¡Œ

æ„å»ºåŠŸèƒ½åŒ…å¹¶æ‰§è¡Œlaunchæ–‡ä»¶åï¼Œè¿è¡Œç»“æœå¦‚ä¸‹ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2E3NjU3ZTY4ZjI5MjgxYmM3OWUzODBjMzE3M2FmNWFfS0xXSGZ0eW1KdHBmZzBrYWo1WWVPRkVCeEQ0b0xLcnRfVG9rZW46UkVFNmJpdW4zbzJnUm14T1k5T2N1WHhlbnZoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

6.  ### stage\_ros2æ·»åŠ æœºå™¨äºº
    

æœ¬èŠ‚å°†åœ¨ä»¿çœŸç¯å¢ƒä¸­æ·»åŠ ä¸€ä¸ªç”±åº•ç›˜ã€æ‘„åƒå¤´ä»¥åŠæ¿€å…‰é›·è¾¾ç»„æˆçš„è™šæ‹Ÿæœºå™¨äººã€‚

1.ä»£ç æ¡†æ¶æ­å»º

åœ¨worldç›®å½•ä¸‹æ–°å»ºrobotç›®å½•ï¼Œrobotç›®å½•ä¸­å†åˆ›å»ºcar\_base.incã€camera.incã€laser.incä»¥åŠmycar.incç­‰æ–‡ä»¶ï¼Œå„æ–‡ä»¶ä½œç”¨å¦‚ä¸‹ï¼š

*   car\_base.incï¼šç”¨äºè®¾ç½®æœºå™¨äººåº•ç›˜æ¨¡å—ï¼›
    
*   camera.incï¼šç”¨äºè®¾ç½®æœºå™¨äººç›¸æœºæ¨¡å—ï¼›
    
*   laser.incï¼šç”¨äºè®¾ç½®æœºå™¨äººé›·è¾¾æ¨¡å—ï¼›
    
*   mycar.incï¼šç”¨äºç»„è£…æœºå™¨äººå„æ¨¡å—ã€‚
    

é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜ä¼šåœ¨sim.worldä¸­åŒ…å«mycar.incå¹¶è°ƒç”¨å…¶ç”Ÿæˆæœºå™¨äººçš„åŠŸèƒ½ã€‚

2.è®¾ç½®æœºå™¨äººåº•ç›˜

stageä¸­çš„positionæ¨¡å‹å¯ä»¥ä»¥å·®é€Ÿã€å…¨å‘æˆ–é˜¿å…‹æ›¼çš„æ–¹å¼æ¨¡æ‹Ÿç§»åŠ¨æœºå™¨äººåº•ç›˜ã€‚åœ¨car\_base.incä¸­è¾“å…¥å¦‚ä¸‹ä»£ç ï¼š

```Bash
# æœºå™¨äººåº•ç›˜é…ç½®
define car_base position 
(
  color "red"                   # è½¦èº«é¢œè‰²
  drive "diff"                  # è½¦è¾†è¿åŠ¨å­¦æ¨¡å‹                  
  obstacle_return 1             
  ranger_return 1           
  blob_return 1                  
  fiducial_return 1             

  localization "odom"           # å®šä½æ–¹å¼
  odom_error [ 0.05 0.05 0.0 0.1 ]  # é‡Œç¨‹è®¡è¯¯å·®
  # localization_origin [0 0 0 0]   # å®šä½åŸç‚¹ï¼Œé»˜è®¤ä¸ºæœºå™¨äººçš„åˆå§‹ä½ç½®ã€‚

  # [ xmin xmax ymin ymax zmin zmax amin amax ]        
  velocity_bounds [-1 1 0 0 0 0 -45.0 45.0 ]         # é€Ÿåº¦æœ€å€¼ 
  acceleration_bounds [-0.5 0.5 0 0 0 0 -45 45.0 ]   # åŠ é€Ÿåº¦æœ€å€¼


  size [0.44 0.38 0.22]  # è½¦ä½“å°ºå¯¸
  origin [0 0 0 0] # æ—‹è½¬ä¸­å¿ƒä¸è½¦ä½“ä¸­å¿ƒçš„åç§»é‡
  mass 23.0 # è½¦ä½“è´¨é‡ï¼Œå•ä½kg

  gui_nose 0 # æ˜¯å¦ç»˜åˆ¶æ–¹å‘æŒ‡ç¤ºæ ‡è®°

  block( 
    points 8
    point[0] [-0.2 0.18]
    point[1] [-0.2 -0.18]
    point[2] [-0.15 -0.27]
    point[3] [0.12 -0.23]
    point[4] [0.2 -0.12]
    point[5] [0.2 0.12]
    point[6] [0.12 0.23]
    point[7] [-0.15 0.27]
    z [0 0.22]
  )
)
```

**positionæ‘˜è¦å’Œé»˜è®¤å€¼**

```Plain Text
position(
    drive "diff"
    localization "gps"
    localization_origin [<defaults to model's start pose>]
    odom_error [0.03 0.03 0.00 0.05]
    velocity_enable 1
)
```

**è¯¦è§£**

*   drive "diff", "omni" æˆ– "car" é€‰æ‹©å·®é€Ÿè½¬å‘æ¨¡å‹ã€å…¨å‘æ¨¡å¼æˆ–ç±»ä¼¼æ±½è½¦çš„é˜¿å…‹æ›¼æ¨¡å¼ã€‚
    
*   localization "gps" æˆ– "odom" å¦‚æœé€‰æ‹© â€œgpsâ€ï¼Œä½ç½®æ¨¡å‹å°†ä»¥å®Œå…¨å‡†ç¡®çš„ç²¾åº¦æŠ¥å‘Šä½ç½®ã€‚å¦‚æœé€‰æ‹© â€œodomâ€ï¼Œå°†ä½¿ç”¨ç®€å•çš„é‡Œç¨‹è®¡æ¨¡å‹ï¼Œå¹¶ä¸”ä½ç½®æ•°æ®ä¼šéšæ—¶é—´ä¸çœŸå®ä½ç½®çš„å·®å¼‚è€Œæ¼‚ç§»ã€‚é‡Œç¨‹è®¡æ¨¡å‹ç”± odom\_error å±æ€§å‚æ•°åŒ–ã€‚
    
*   localization\_origin \[x y z theta\] æ‚¨å¯ä»¥ä½¿ç”¨ localization\_origin å‚æ•°æ¥è®¾ç½®å®šä½åæ ‡ç³»çš„åŸç‚¹ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒå°†å¤åˆ¶æ¨¡å‹çš„åˆå§‹å§¿æ€ï¼Œå› æ­¤æœºå™¨äººå°†æŠ¥å‘Šç›¸å¯¹äºèµ·å§‹ä½ç½®çš„ä½ç½®ã€‚æç¤º: å¦‚æœå°† localization\_origin è®¾ç½®ä¸º \[0 0 0 0\] å¹¶ä¸”å®šä½æ–¹å¼ä¸º â€œgpsâ€ï¼Œæ¨¡å‹å°†è¿”å›å…¶çœŸå®çš„å…¨å±€ä½ç½®ã€‚è¿™ç§è®¾ç½®æ˜¯ä¸ç°å®çš„ï¼Œä½†åœ¨å¸Œæœ›æŠ½è±¡å®šä½ç»†èŠ‚çš„ç ”ç©¶ä¸­å¾ˆæœ‰ç”¨ã€‚
    
*   odom\_error \[x y z theta\] åœ¨é€‰æ‹© â€œodomâ€ å®šä½æ–¹å¼æ—¶ç”¨åˆ°çš„é‡Œç¨‹è®¡è¯¯å·®æ¨¡å‹å‚æ•°ï¼Œæ¯ä¸ªå€¼æ˜¯è®¡ç®—é‡Œç¨‹è®¡ä½ç½®ä¼°è®¡æ—¶ç§¯åˆ† xã€y å’Œ theta é€Ÿåº¦çš„è¯¯å·®æ¯”ä¾‹çš„æœ€å¤§å€¼ã€‚å¯¹äºæ¯ä¸ªè½´ï¼Œå¦‚æœåœ¨æ­¤å¤„æŒ‡å®šçš„å€¼ä¸º Eï¼Œåˆ™å®é™…æ¯”ä¾‹åœ¨å¯åŠ¨æ—¶åœ¨ -E/2 åˆ° +E/2 çš„èŒƒå›´å†…éšæœºé€‰æ‹©ã€‚è¯·æ³¨æ„ï¼Œç”±äºèˆå…¥è¯¯å·®ï¼Œå°†è¿™äº›å€¼è®¾ç½®ä¸ºé›¶å¹¶ä¸èƒ½è®©å®šä½å®Œç¾æ— è¯¯ - ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œæ‚¨éœ€è¦é€‰æ‹© â€œgpsâ€ å®šä½æ–¹å¼ã€‚
    

3.è®¾ç½®æ‘„åƒå¤´

stageä¸­çš„cameraæ¨¡å‹å¯ä»¥æ¨¡æ‹Ÿæ·±åº¦ç›¸æœºã€‚åœ¨camera.incä¸­è¾“å…¥å¦‚ä¸‹ä»£ç ï¼š

```Plain Text
define my_camera camera
(
    range [ 0.3 3.0 ] # ç›¸æœºé‡‡æ ·èŒƒå›´
    resolution [ 160 90 ]  #ç›¸æœºåˆ†è¾¨ç‡ 1280 Ã— 720 / 8
    fov [ 87 58 ] # ç›¸æœºè§†åœº
    pantilt [ 0 0 ] # ç›¸æœºå§¿æ€
    alwayson 1 # æ˜¯å¦ä¸€ç›´å¤„äºå¯åŠ¨çŠ¶æ€
    size [ 0.025 0.09 0.025 ] # ç›¸æœºå°ºå¯¸
    color "gray" # ç›¸æœºé¢œè‰²
)
```

**cameraæ‘˜è¦å’Œé»˜è®¤å€¼**

```Plain Text
camera(
  resolution [ 32 32 ]
  range [ 0.2 8.0 ]
  fov [ 70.0 40.0 ]
  pantilt [ 0.0 0.0 ]
  size [ 0.1 0.07 0.05 ]
  color "black"
  watts 100.0 
)
```

**è¯¦è§£**

*   resolution \[ width:<int> height:<int>\] ç›¸æœºåˆ†è¾¨ç‡ã€‚
    
*   range \[ min:<float> max:<float> \] ç›¸æœºæŠ¥å‘Šçš„è·ç¦»èŒƒå›´ï¼Œä»¥ç±³ä¸ºå•ä½ã€‚è·ç¦»å°äº`min`æˆ–å¤§äº`max`çš„ç‰©ä½“å°†æ— æ³•æ˜¾ç¤ºã€‚`min`æ•°å­—è¶Šå°ï¼Œæ·±åº¦ç²¾åº¦è¶Šä½ - ä¸è¦å°†æ­¤å€¼è®¾ç½®å¾—å¤ªæ¥è¿‘ 0ã€‚
    
*   fov \[ horizontal: <float> vertical: <float> \] æ°´å¹³å’Œå‚ç›´è§†é‡çš„è§’åº¦ï¼Œä»¥åº¦ä¸ºå•ä½ã€‚
    
*   pantilt \[ pan:<float> tilt:<float> \] ç›¸æœºçš„æœå‘è§’åº¦ï¼Œä»¥åº¦ä¸ºå•ä½ã€‚å·¦å³ä½ç½®ç§°ä¸º panï¼Œä¸Šä¸‹ä½ç½®ç§°ä¸º tiltã€‚
    

4.è®¾ç½®æ¿€å…‰é›·è¾¾

stageä¸­çš„rangeræ¨¡å‹å¯ä»¥æ¨¡æ‹Ÿæ¿€å…‰é›·è¾¾ã€‚åœ¨laser.incä¸­è¾“å…¥å¦‚ä¸‹ä»£ç ï¼š

```Plain Text
define my_laser ranger
(
  sensor(

    range [ 0.0  15.0 ]     # é›·è¾¾æ•°æ®é‡‡é›†åŒºé—´
    fov 360.0               # è§†è§’
    samples 720             # é‡‡æ ·æ•°
    color_rgba [ 0 0 1 0.15 ] # å¯è§†åŒ–å…‰æŸé¢œè‰²ä»¥åŠé€æ˜åº¦
  )
  model # é›·è¾¾å¤–è§‚
  (
    pose [ 0 0 0 0 ]        # é›·è¾¾ä½å§¿
    size [ 0.07 0.07 0.05 ] # é›·è¾¾å°ºå¯¸ä¿¡æ¯
    color "blue"            # é›·è¾¾é¢œè‰²
  )
)
```

**rangeræ‘˜è¦å’Œé»˜è®¤å€¼**

```Plain Text
 sensor(
   samples 180
   range_max 8.0
   fov 360.0
   resolution 1
   size [ 0.15 0.15 0.2 ]
   color "blue"
 )
```

**è¯¦è§£**

*   samples <int> æ¯æ¬¡æ‰«æçš„æ¿€å…‰æ ·æœ¬æ•°é‡ã€‚
    
*   range\_max <float> æ¿€å…‰æ‰«æä»ªæ‰€æŠ¥å‘Šçš„æœ€å¤§è·ç¦»ï¼Œä»¥ç±³ä¸ºå•ä½ã€‚æ‰«æä»ªå°†ä¸ä¼šæ£€æµ‹è¶…å‡ºæ­¤èŒƒå›´çš„ç‰©ä½“ã€‚
    
*   fov <float> æ¿€å…‰æ‰«æä»ªçš„è§’åº¦è§†é‡ã€‚
    
*   resolution <int> ä»…è®¡ç®—ç¬¬ n ä¸ªæ¿€å…‰æ ·æœ¬çš„çœŸå®è·ç¦»ã€‚ç¼ºå¤±çš„æ ·æœ¬å°†ç”¨çº¿æ€§æ’å€¼å¡«å……ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä½¿ç”¨è¾ƒå°‘çš„æ ·æœ¬ä¼šæ›´å¥½ï¼Œä½†æŸäº›ï¼ˆå®ç°ä¸å¥½çš„ï¼‰ç¨‹åºéœ€è¦å›ºå®šæ•°é‡çš„æ ·æœ¬æ•°ã€‚è®¾ç½®æ­¤æ•°å­—å¤§äº 1 å¯ä»¥å‡å°‘æ‰€éœ€çš„è®¡ç®—é‡ï¼Œé€‚ç”¨äºå›ºå®šå¤§å°çš„æ¿€å…‰çŸ¢é‡ã€‚
    

5.ç»„è£…æœºå™¨äºº

åœ¨mycar.incä¸­å®ç°æœºå™¨äººçš„ç»„è£…ï¼š

```SQL
# ç»„è£…æœºå™¨äººå„ä¸ªæ¨¡å—
include "robot/car_base.inc"
include "robot/camera.inc"
include "robot/laser.inc"

define my_car car_base(
    my_camera(pose [0.15 0 0 0])
    my_laser()
)
```

my\_caræ¨¡å‹æ˜¯åœ¨car\_baseæ¨¡å‹ä¹‹ä¸Šï¼Œé›†æˆäº†my\_cameraå’Œmy\_laseræ¨¡å‹ã€‚

6.åœ¨ä»¿çœŸç¯å¢ƒä¸­ç”Ÿæˆæœºå™¨äºº

åœ¨sim.worldä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ç”Ÿæˆä¸€ä¸ªæœºå™¨äººï¼š

```SQL
# -----------------------------------------------------------------------------
# ç”Ÿæˆæœºå™¨äºº
# æ–‡ä»¶åŒ…å«
include "robot/mycar.inc"

my_car(
  name "robot_0"
  color "red"
  pose [ -3 -7 0 90 ] 
)
```

7.æ„å»ºæ‰§è¡Œ

æ„å»ºåŠŸèƒ½åŒ…å¹¶æ‰§è¡Œlaunchæ–‡ä»¶åï¼Œè¿è¡Œç»“æœå¦‚ä¸‹ã€‚

å¯åŠ¨rviz2å¯ä»¥æŸ¥çœ‹ä»¿çœŸç¯å¢ƒä¸‹ä¼ æ„Ÿå™¨ç›¸å…³æ•°æ®ï¼Œå¯åŠ¨é”®ç›˜æ§åˆ¶èŠ‚ç‚¹åï¼Œä¹Ÿå¯ä»¥æ§åˆ¶æœºå™¨äººè¿åŠ¨ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDUxNzViOGQxMmE0OGJmZDE1NTI0MThhNGExMDdkMWVfRkJ0VDJRNlJQeGxScnpFQ3FHcmRJZ3hxYms5SzZSQTNfVG9rZW46RWVnemJaZ2phbzJ4RW54NDY0MGNOUkhWbmRlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjU4ZDFkNjA3YjRiYWMzZjJiMWY0YjY3NDBmODBiNzBfUTR3U1E2Mm1DZTBuaEM5NWkzeW1TM09ONmUzZEx1aGxfVG9rZW46TGlkdmJlUkNsbzlvMzl4VjZHTmNNRFFrbkpoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

7.  ### stage\_ros2æ·»åŠ å¤šæœºå™¨äºº
    

åœ¨stage\_ros2ä¸­ä¹Ÿå¯ä»¥å¾ˆæ–¹ä¾¿çš„ç”Ÿæˆå¤šä¸ªæœºå™¨äººã€‚

1.ç”Ÿæˆå¤šä¸ªæœºå™¨äºº

åœ¨sim.worldä¸­è¿˜å¯ä»¥ç»§ç»­åˆ›å»ºmy\_carå¯¹è±¡ä»¥ç”Ÿæˆæ–°çš„æœºå™¨äººæ¨¡å‹ï¼Œæ·»åŠ ä»£ç å¦‚ä¸‹ï¼š

```Plain Text
my_car(
  name "robot_1"
  color "yellow"
  pose [ -1 -7 0 90 ] 
)
```

2.æ„å»ºæ‰§è¡Œ

æ„å»ºåŠŸèƒ½åŒ…å¹¶æ‰§è¡Œlaunchæ–‡ä»¶åï¼Œè¿è¡Œç»“æœå¦‚ä¸‹ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDY3ZDI0ZDdiN2Y1YmEzYTVlYWFlYTEwMWQ5YzgxMjZfdVpBclBObm5ZaUJlUXI0VmhZR2NKMmFBaXdDbmFTTVVfVG9rZW46VW5FdmJxb24zb09Xb2l4V0VVZmNDZVZxbndnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

åœ¨å¤šæœºå™¨äººè¿è¡Œæ—¶ï¼Œä¸åŒçš„æœºå™¨äººå‘å¸ƒçš„è¯é¢˜ä¼šä»¥å„è‡ªå¯¹åº”çš„`name`å€¼ä¸ºå‘½åç©ºé—´ï¼Œä¸”ä¸åŒæœºå™¨äººå‘å¸ƒçš„åæ ‡å˜æ¢ä¹Ÿä¼šä»¥`name`å€¼ä¸ºå‰ç¼€ã€‚

  

  

  

11.  # Gezeboä»¿çœŸå¹³å°
    

1.  ## ç®€è¿°
    

Gazeboç›®å‰ä¸»è¦åˆ†ä¸ºä¸¤ä¸ªç‰ˆæœ¬ï¼Œ

ä¸€ä¸ªæ˜¯æ—§ç‰ˆGazebo Classicï¼Œä¸€ä¸ªæ˜¯æ–°ç‰ˆIgnition Gazeboã€‚

æœ¬æ–‡ä¸­ç§°å‘¼çš„Gazeboå‡ä»£æŒ‡Gazebo Classicï¼Œè€ŒIgnition Gazeboä¼šåŠ ä»¥åŒºåˆ«ã€‚

  

**åœºæ™¯**

åœ¨ROSæœºå™¨äººå¼€å‘ä¸­ï¼Œå®ä½“æœºå™¨äººè™½ç„¶å…·æœ‰ç›´æ¥æ€§å’ŒçœŸå®æ€§çš„ä¼˜åŠ¿ï¼Œä½†ä¹Ÿå­˜åœ¨ä¸€äº›ä¸è¶³ï¼Œæ¯”å¦‚ï¼š

> 1.  é«˜æ˜‚çš„æˆæœ¬ï¼šç ”å‘ä¸€æ¬¾è‡ªä¸»ç§»åŠ¨æœºå™¨äººéœ€è¦è´­ä¹°æ˜‚è´µçš„ç¡¬ä»¶ç»„ä»¶ï¼Œå¦‚ä¼ æ„Ÿå™¨ã€ç”µæœºã€æ§åˆ¶å™¨ç­‰ï¼Œä¸”è¿™äº›ç¡¬ä»¶åœ¨ç ”å‘åˆæœŸå¯èƒ½éœ€è¦é¢‘ç¹æ›´æ¢æˆ–å‡çº§ï¼Œå¯¼è‡´æˆæœ¬æ€¥å‰§ä¸Šå‡ã€‚
>     
> 2.  èµ„æºé™åˆ¶ï¼šç”±äºèµ„é‡‘å’Œèµ„æºæœ‰é™ï¼Œå¯èƒ½æ— æ³•åŒæ—¶æ‹¥æœ‰å¤šå°å®ä½“æœºå™¨äººè¿›è¡Œæµ‹è¯•ã€‚è¿™ä¼šå¯¼è‡´æµ‹è¯•å‘¨æœŸå»¶é•¿ï¼Œç ”å‘è¿›åº¦å—é˜»ã€‚
>     
> 3.  ç¯å¢ƒçš„ä¸ç¡®å®šæ€§å’Œå¤æ‚æ€§ï¼šåœ¨çœŸå®ç¯å¢ƒä¸­æµ‹è¯•æœºå™¨äººæ—¶ï¼Œå¯èƒ½ä¼šé‡åˆ°å„ç§ä¸å¯é¢„æµ‹çš„æƒ…å†µï¼Œå¦‚å…‰çº¿å˜åŒ–ã€åœ°é¢ä¸å¹³æ•´ã€ç”µç£å¹²æ‰°ç­‰ï¼Œè¿™äº›å› ç´ éƒ½å¯èƒ½å½±å“æœºå™¨äººçš„æ€§èƒ½ã€‚
>     
> 4.  å®‰å…¨é£é™©ï¼šåœ¨æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæœºå™¨äººçš„æ§åˆ¶ç®—æ³•æˆ–ç¡¬ä»¶å‡ºç°æ•…éšœï¼Œå¯èƒ½ä¼šå¯¼è‡´æœºå™¨äººå¤±æ§ï¼Œå¯¹äººå‘˜æˆ–ç¯å¢ƒé€ æˆæŸå®³ã€‚
>     

åœ¨ROSæœºå™¨äººå¼€å‘çš„é¢†åŸŸé‡Œï¼Œä»¿çœŸæŠ€æœ¯è¢«å¹¿æ³›åº”ç”¨ä»¥å¼¥è¡¥å®ä½“æœºå™¨äººæµ‹è¯•ä¸­çš„ä¸è¶³ã€‚

**æ¦‚å¿µ**

**æœºå™¨äººä»¿çœŸ** æ˜¯ä¸€ç§åˆ©ç”¨è®¡ç®—æœºæ¨¡å‹å’Œä»¿çœŸæŠ€æœ¯æ¥æ¨¡æ‹Ÿæœºå™¨äººåœ¨è™šæ‹Ÿç¯å¢ƒä¸­çš„è¡Œä¸ºå’Œæ€§èƒ½çš„è¿‡ç¨‹ã€‚å®ƒé€šè¿‡åˆ›å»ºè™šæ‹Ÿçš„æœºå™¨äººå’Œç¯å¢ƒæ¨¡å‹ï¼Œæ¨¡æ‹Ÿæœºå™¨äººçš„æ„ŸçŸ¥ã€æ§åˆ¶å’Œè¿åŠ¨èƒ½åŠ›ï¼Œä»¥åŠä¸ç¯å¢ƒå’Œå…¶ä»–å¯¹è±¡çš„äº¤äº’ã€‚

**ä½œç”¨**

é€šè¿‡ä»¿çœŸæµ‹è¯•ï¼Œå¯ä»¥é™ä½æœºå™¨äººç ”å‘æˆæœ¬å’Œé£é™©ï¼Œæé«˜æœºå™¨äººç³»ç»Ÿçš„æ€§èƒ½å’Œå¯é æ€§ï¼Œå¹¶ä¸ºå®é™…æœºå™¨äººéƒ¨ç½²æä¾›å‚è€ƒå’ŒæŒ‡å¯¼ã€‚

**ä»¿çœŸä¼˜åŠ¿:**

ä»¿çœŸåœ¨æœºå™¨äººç³»ç»Ÿç ”å‘è¿‡ç¨‹ä¸­å æœ‰ä¸¾è¶³è½»é‡çš„åœ°ä½ï¼Œåœ¨ç ”å‘ä¸æµ‹è¯•ä¸­è¾ƒä¹‹äºå®ä½“æœºå™¨äººå®ç°ï¼Œä»¿çœŸæœ‰å¦‚ä¸‹å‡ ç‚¹çš„æ˜¾è‘—ä¼˜åŠ¿:

1.  **ä½æˆæœ¬:** å½“å‰æœºå™¨äººæˆæœ¬å±…é«˜ä¸ä¸‹ï¼ŒåŠ¨è¾„å‡ åä¸‡ï¼Œä»¿çœŸå¯ä»¥å¤§å¤§é™ä½æˆæœ¬ï¼Œå‡å°é£é™©
    
2.  **é«˜æ•ˆ:** æ­å»ºçš„ç¯å¢ƒæ›´ä¸ºå¤šæ ·ä¸”çµæ´»ï¼Œå¯ä»¥æé«˜æµ‹è¯•æ•ˆç‡ä»¥åŠæµ‹è¯•è¦†ç›–ç‡
    
3.  **é«˜å®‰å…¨æ€§:** ä»¿çœŸç¯å¢ƒä¸‹ï¼Œæ— éœ€è€ƒè™‘è€—æŸé—®é¢˜
    

ä»¿çœŸæŠ€æœ¯ä¸ºå¼€å‘è€…æ„å»ºäº†ä¸€ä¸ªæ—¢é«˜æ•ˆåˆå®‰å…¨ï¼Œä¸”æˆæœ¬ä½å»‰çš„å…¨æ–¹ä½æµ‹è¯•å’ŒéªŒè¯å¹³å°ã€‚

**ä»¿çœŸç¼ºé™·:**

æœºå™¨äººåœ¨ä»¿çœŸç¯å¢ƒä¸å®é™…ç¯å¢ƒä¸‹çš„è¡¨ç°å·®å¼‚è¾ƒå¤§ï¼Œæ¢è¨€ä¹‹ï¼Œä»¿çœŸå¹¶ä¸èƒ½å®Œå…¨åšåˆ°æ¨¡æ‹ŸçœŸå®çš„ç‰©ç†ä¸–ç•Œï¼Œå­˜åœ¨ä¸€äº›"å¤±çœŸ"çš„æƒ…å†µï¼ŒåŸå› :

1.  ä»¿çœŸå™¨æ‰€ä½¿ç”¨çš„ç‰©ç†å¼•æ“ç›®å‰è¿˜ä¸èƒ½å¤Ÿå®Œå…¨ç²¾ç¡®æ¨¡æ‹ŸçœŸå®ä¸–ç•Œçš„ç‰©ç†æƒ…å†µ
    
2.  ä»¿çœŸå™¨æ„å»ºçš„æ˜¯å…³èŠ‚é©±åŠ¨å™¨ï¼ˆç”µæœº&é½¿è½®ç®±ï¼‰ã€ä¼ æ„Ÿå™¨ä¸ä¿¡å·é€šä¿¡çš„ç»å¯¹ç†æƒ³æƒ…å†µï¼Œç›®å‰ä¸æ”¯æŒæ¨¡æ‹Ÿå®é™…ç¡¬ä»¶ç¼ºé™·æˆ–è€…ä¸€äº›ä¸´ç•ŒçŠ¶æ€ç­‰æƒ…å½¢
    

æ€»ä¹‹ï¼Œä»¿çœŸæŠ€æœ¯è™½ç„¶é‡è¦ï¼Œä½†å¹¶ä¸èƒ½å®Œå…¨æ›¿ä»£å®ä½“æµ‹è¯•ã€‚å®ä½“æµ‹è¯•å¯ä»¥éªŒè¯ä»¿çœŸç»“æœçš„å‡†ç¡®æ€§ï¼Œå¹¶å‘ç°ä»¿çœŸä¸­å¯èƒ½å¿½ç•¥çš„é—®é¢˜ã€‚

  

2.  ## Gazebo([Gazebo Classic](https://classic.gazebosim.org/))
    

è¿™ä¸ªæ˜¯è€ç‰ˆGazeboï¼Œä»…åœ¨ROS1å’ŒROS2 Humbleä¸Šå¯ç”¨ã€‚ï¼ˆä½†æ˜¯ROS2å¹¶ä¸æ¨èä½¿ç”¨è€ç‰ˆGazeboï¼Œæ›´åŠ å»ºè®®ä½¿ç”¨æ–°ç‰ˆGazeboï¼‰

ROS2è€ç‰ˆGazeboä»…åœ¨Humbleç‰ˆæœ¬ä¸Šå¯ç”¨ï¼Œåœ¨JazzyåŠä»¥åçš„ç‰ˆæœ¬å·²ç§»é™¤ã€‚

**ï¼ˆä¸æƒ³å­¦è€ç‰ˆGazeboçš„ï¼Œç›´æ¥è·³åˆ°ä¸‹ä¸€èŠ‚çš„Ignition Gazeboå³å¯ï¼‰**

è¿™ä¿©å¯¹å’±ä»¬çš„åŒºåˆ«ä¸ç®—å¤ªå¤§ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªæ•™ç¨‹å¤šï¼Œä¸€ä¸ªæ•™ç¨‹å°‘çš„åŒºåˆ«ï¼Œä½ ç›´æ¥å­¦è€ç‰ˆGazeboä¹Ÿæ˜¯ä¸€æ ·ç”¨çš„ã€‚

**ï¼ˆåˆå­¦è€…ä¹Ÿå¯ä»¥åªå­¦æ•™ç¨‹å¤šçš„Gazebo Classic,å¯ä»¥å°‘èµ°ä¸€äº›å¼¯è·¯ï¼‰**

Gezeboå®˜ç½‘ï¼š

https://gazebosim.org/home

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDFkMDAxMzA5NDlkZTYwZDI1YmMyNGZmZTQwNzgyMDFfbzRmcGxVNmd5blFyczRhM09ab1c5dWxDMFZVZUZUcUpfVG9rZW46Skc1Y2JFWG9Ob1FtWkN4cEw4QWNFbERqblliXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

å¦‚æœä½ æƒ³ä»è€ç‰ˆçš„Gazeboè¿ç§»åˆ°æ–°ç‰ˆçš„Gazeboï¼Œé‚£ä¹ˆè¯·çœ‹ä¸‹æ–¹å®˜æ–¹æ•™ç¨‹ï¼š

ä»Gazebo Classicè¿ç§»åˆ°ROS2 Humbleçš„Ign Gazebo(Gazebo Fortress)ï¼š

https://gazebosim.org/docs/fortress/gazebo\_classic\_migration/

  

ä»Gazebo Classicè¿ç§»åˆ°ROS2 Jazzyçš„Gazebo Sim(Gazebo Harmonic)ï¼š

Jazzyä¹‹åçš„ç‰ˆæœ¬åº”è¯¥å˜åŒ–ä¸ä¼šå¤ªå¤§ï¼Œä¹Ÿå¯ä»¥æš‚æ—¶å‚ç…§ä¸‹é¢è¿™ä¸ªæ•™ç¨‹ï¼ˆæˆ–è€…å»å®˜ç½‘æ‰¾å¯¹åº”ç‰ˆæœ¬çš„æ•™ç¨‹ï¼‰ï¼š

https://gazebosim.org/docs/harmonic/gazebo\_classic\_migration/

  

1.  ### Gazebo Classicå®‰è£…ä¸è¿è¡Œ
    

ROS2åªæœ‰humbleæœ‰è€ç‰ˆGazebo

```Bash
sudo apt install ros-humble-gazebo-ros ros-humble-gazebo-ros-pkgs
```

å®‰è£…å®Œæˆåï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤è¡Œæ¥å¯åŠ¨gazeboå¹¶åŠ è½½ros2æ’ä»¶ã€‚

```Bash
gazebo --verbose -s libgazebo_ros_init.so -s libgazebo_ros_factory.so 
```

çœ‹åˆ°ä¸‹é¢è¿™ä¸ªæ—¥å¿—å’Œgazeboç•Œé¢ï¼Œæ²¡å•¥å¤§é—®é¢˜å°±è¯´æ˜æˆåŠŸäº†ã€‚ï¼ˆä¸€äº›è­¦å‘Šæ˜¯è¯´Gazebo Classicå·²ç»å¼ƒç”¨ï¼Œé¼“åŠ±ä½¿ç”¨æ–°ç‰ˆIngition Gazeboï¼Œå¿½ç•¥è¿™äº›è­¦å‘Šå³å¯ï¼‰

```sql
root@Dell-G15-5511:/home/tungchiahui/UserFolder/MySource/ROS_WS/ROS2_WS/6.ws_simulations$ gazebo --verbose -s libgazebo_ros_init.so -s libgazebo_ros_factory.so 
Gazebo multi-robot simulator, version 11.10.2
Copyright (C) 2012 Open Source Robotics Foundation.
Released under the Apache 2 License.
http://gazebosim.org

[Msg] Waiting for master.
Gazebo multi-robot simulator, version 11.10.2
Copyright (C) 2012 Open Source Robotics Foundation.
Released under the Apache 2 License.
http://gazebosim.org

[Wrn] [gazebo_ros_init.cpp:178] 
#     # ####### ####### ###  #####  #######
##    # #     #    #     #  #     # #
# #   # #     #    #     #  #       #
#  #  # #     #    #     #  #       #####
#   # # #     #    #     #  #       #
#    ## #     #    #     #  #     # #
#     # #######    #    ###  #####  #######

This version of Gazebo, now called Gazebo classic, reaches end-of-life
in January 2025. Users are highly encouraged to migrate to the new Gazebo
using our migration guides (https://gazebosim.org/docs/latest/gazebo_classic_migration?utm_source=gazebo_ros_pkgs&utm_medium=cli)


[Msg] Waiting for master.
[Msg] Connected to gazebo master @ http://127.0.0.1:11345
[Msg] Publicized address: 192.168.31.60
[Msg] Loading world file [/usr/share/gazebo-11/worlds/empty.world]
XDG_RUNTIME_DIR (/run/user/1000) is not owned by us (uid 0), but by uid 1000! (This could e.g. happen if you try to connect to a non-root PulseAudio as a root user, over the native protocol. Don't do that.)
ALSA lib pcm_dmix.c:1032:(snd_pcm_dmix_open) unable to open slave
AL lib: (EE) ALCplaybackAlsa_open: Could not open playback device 'default': No such file or directory
[Err] [OpenAL.cc:84] Unable to open audio device[default]
 Audio will be disabled.
[Msg] Connected to gazebo master @ http://127.0.0.1:11345
[Msg] Publicized address: 192.168.31.60
[Wrn] [GuiIface.cc:298] Couldn't locate specified .ini. Creating file at "/root/.gazebo/gui.ini"
[Wrn] [GuiIface.cc:120] QStandardPaths: runtime directory '/run/user/1000' is not owned by UID 0, but a directory permissions 0700 owned by UID 1000 GID 1000
[Wrn] [Event.cc:61] Warning: Deleting a connection right after creation. Make sure to save the ConnectionPtr from a Connect call

libcurl: (35) error:0A000126:SSL routines::unexpected eof while reading
[Wrn] [ModelDatabase.cc:212] Unable to connect to model database using [http://models.gazebosim.org//database.config]. Only locally installed models will be available.
[Wrn] [Event.cc:61] Warning: Deleting a connection right after creation. Make sure to save the ConnectionPtr from a Connect call
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGQ1MGMwODdmNGY5YmMxYTFiZDNkMjZkMWU5YTFiYmJfWW13VUdmWFRsM0k2R1hDVWtDcVpwenhkS2xsOEJrVDBfVG9rZW46QTNqVWJFR2xzb2Z0RUR4NUxYc2NLV0tXblBiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

2.  ### æ’ä»¶åŠèŠ‚ç‚¹æœåŠ¡ä»‹ç»
    

ä½¿ç”¨ä¹‹å‰çš„å‘½ä»¤å¯åŠ¨Gazeboå¹¶åŠ è½½gazebo\_rosæ’ä»¶ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸‹é¢çš„æŒ‡ä»¤æ¥çœ‹æ’ä»¶çš„èŠ‚ç‚¹ï¼Œä»¥åŠæ”¹èŠ‚ç‚¹ä¸ºæˆ‘ä»¬æä¾›çš„æœåŠ¡æœ‰å“ªäº›ï¼Ÿ

èŠ‚ç‚¹åˆ—è¡¨

```Bash
ros2 node list
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWFlZWYzMGQyMzM2NWFhNGI2NmExMDllMTg2MGFmZGNfamR3SnRXV09QM0NKNFFhOVY5VVJ6dWJRRWhnYUl0SUlfVG9rZW46QmxUdWJUaEtwbzZzbEV4bExXZWNVQWpTbm9nXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ç„¶åæˆ‘ä»¬çœ‹çœ‹è¿™ä¸ªèŠ‚ç‚¹å¯¹å¤–æä¾›çš„æœåŠ¡æœ‰å“ªäº›ï¼Ÿ

```Bash
ros2 service list
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmVlOGQ3ZWQ4NzJjZTc1ZGNjNTEzY2Q3ODlmZTE1YjZfOWdDY3RPaUNhdHNTTWkxZjVVMmpSTVpib3JtZmlrSXdfVG9rZW46V0hodGJwTmdrb1Y1Mjd4Y01QNWNxdG1kbjliXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

é™¤å»å’Œå‚æ•°ç›¸å…³çš„å‡ ä¸ªæœåŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¦å¤–ä¸‰ä¸ªç‰¹æ®ŠæœåŠ¡ï¼š

*   /spawn\_entityï¼Œç”¨äºåŠ è½½æ¨¡å‹åˆ°gazeboä¸­
    
*   /get\_model\_listï¼Œç”¨äºè·å–æ¨¡å‹åˆ—è¡¨
    
*   /delete\_entityï¼Œç”¨äºåˆ é™¤gazbeoä¸­å·²ç»åŠ è½½çš„æ¨¡å‹
    

æˆ‘ä»¬æƒ³è¦è®©gazeboæ˜¾ç¤ºå‡ºæˆ‘ä»¬é…ç½®å¥½çš„æœºå™¨äººæ¨¡å‹ä½¿ç”¨/spawn\_entityæ¥åŠ è½½å³å¯ã€‚

æ¥ç€æˆ‘ä»¬å¯ä»¥æ¥è¯·æ±‚æœåŠ¡æ¥åŠ è½½æ¨¡å‹ï¼Œå…ˆå¸¦ä½ çœ‹ä¸€ä¸‹æœåŠ¡çš„æ¥å£ç±»å‹ã€‚

```Bash
ros2 service type /spawn_entity
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmQ0ZWE3ZDU2MDM3NjMwZDNlZjdjZmU0ZmY1MGY5MDBfUE5ETGdBTGRseXFEa1A2ckxGY00wdnhpMkNGQTdrUFVfVG9rZW46UG1FU2J6dGhub1l6TXN4OHlHV2NyZHV4bjFiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Bash
ros2 interface show gazebo_msgs/srv/SpawnEntity
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGMxODA1YWQ4NTI3ZjJmNjk0NDY3ZDJhOWM0ZTE2YzRfZGw0OHg4RnFZb0RlUUpwWWp1ZTVIbUhaNkx4OVNRZDRfVG9rZW46Rk5DQmJSdURMb1RSd294SU5Sc2N4SFRublNmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¯ä»¥çœ‹åˆ°æœåŠ¡çš„è¯·æ±‚å†…å®¹åŒ…æ‹¬ï¼š

*   string name ï¼Œéœ€è¦åŠ è½½çš„å®ä½“çš„åç§° (å¯é€‰çš„)ã€‚
    
*   string xml ï¼Œå®ä½“çš„XMLæè¿°å­—ç¬¦ä¸², URDFæˆ–è€…SDFã€‚
    
*   string robot\_namespace ï¼Œäº§ç”Ÿçš„æœºå™¨äººå’Œæ‰€æœ‰çš„ROSæ¥å£çš„å‘½åç©ºé—´ï¼Œå¤šæœºå™¨äººä»¿çœŸçš„æ—¶å€™å¾ˆæœ‰ç”¨ã€‚
    
*   geometry\_msgs/Pose initial\_pose ï¼Œæœºå™¨äººçš„åˆå§‹åŒ–ä½ç½®
    
*   string reference\_frame ï¼Œåˆå§‹å§¿æ€æ˜¯ç›¸å¯¹äºè¯¥å®ä½“çš„frameå®šä¹‰çš„ã€‚å¦‚æœä¿æŒ"empty"æˆ–"world"æˆ–â€œmapâ€ï¼Œåˆ™ä½¿ç”¨ gazeboçš„worldä½œä¸ºframeã€‚å¦‚æœæŒ‡å®šäº†ä¸å­˜åœ¨çš„å®ä½“ï¼Œåˆ™ä¼šè¿”å›é”™è¯¯
    

  

3.  ### è°ƒç”¨æœåŠ¡åŠ è½½æ¨¡å‹
    

æˆ‘ä»¬è¿™é‡Œæ•™ç¨‹ä½¿ç”¨é±¼é¦™ROSçš„fishbotæ¨¡å‹ï¼šhttps://github.com/fishros/fishbot/blob/navgation2/src/fishbot\_description/urdf/fishbot\_gazebo.urdf

```xml
<?xml version="1.0"?>
<robot name="fishbot">


  <!-- Robot Footprint -->
  <link name="base_footprint"/>

  <joint name="base_joint" type="fixed">
    <parent link="base_footprint"/>
    <child link="base_link"/>
    <origin xyz="0.0 0.0 0.076" rpy="0 0 0"/>
  </joint>


  <!-- base link -->
  <link name="base_link">
          <visual>
      <origin xyz="0 0 0.0" rpy="0 0 0"/>
      <geometry>
                <cylinder length="0.12" radius="0.10"/>
      </geometry>
      <material name="blue">
              <color rgba="0.1 0.1 1.0 0.5" /> 
      </material>
    </visual>
    <collision>
      <origin xyz="0 0 0.0" rpy="0 0 0"/>
      <geometry>
                <cylinder length="0.12" radius="0.10"/>
      </geometry>
      <material name="blue">
              <color rgba="0.1 0.1 1.0 0.5" /> 
      </material>
    </collision>
    <inertial>
      <mass value="0.2"/>
      <inertia ixx="0.0122666" ixy="0" ixz="0" iyy="0.0122666" iyz="0" izz="0.02"/>
    </inertial>
  </link>
    
  <!-- laser link -->
  <link name="laser_link">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <cylinder length="0.02" radius="0.02"/>
      </geometry>
      <material name="black">
        <color rgba="0.0 0.0 0.0 0.5" /> 
      </material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <cylinder length="0.02" radius="0.02"/>
      </geometry>
      <material name="black">
        <color rgba="0.0 0.0 0.0 0.5" /> 
      </material>
    </collision>
    <inertial>
    <mass value="0.1"/>
      <inertia ixx="0.000190416666667" ixy="0" ixz="0" iyy="0.0001904" iyz="0" izz="0.00036"/>
    </inertial>
  </link>
  
  <!-- laser joint -->
  <joint name="laser_joint" type="fixed">
      <parent link="base_link" />
      <child link="laser_link" />
      <origin xyz="0 0 0.075" />
  </joint>

  <link name="imu_link">
          <visual>
      <origin xyz="0 0 0.0" rpy="0 0 0"/>
      <geometry>
                    <box size="0.02 0.02 0.02"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0 0 0.0" rpy="0 0 0"/>
      <geometry>
                    <box size="0.02 0.02 0.02"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.1"/>
        <inertia ixx="0.000190416666667" ixy="0" ixz="0" iyy="0.0001904" iyz="0" izz="0.00036"/>
      </inertial>
  </link>

  <!-- imu joint -->
  <joint name="imu_joint" type="fixed">
      <parent link="base_link" />
      <child link="imu_link" />
      <origin xyz="0 0 0.02" />
  </joint>


  <link name="left_wheel_link">
      <visual>
        <origin xyz="0 0 0" rpy="1.57079 0 0"/>
        <geometry>
          <cylinder length="0.04" radius="0.032"/>
        </geometry>
          <material name="black">
            <color rgba="0.0 0.0 0.0 0.5" /> 
          </material>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="1.57079 0 0"/>
        <geometry>
          <cylinder length="0.04" radius="0.032"/>
        </geometry>
          <material name="black">
            <color rgba="0.0 0.0 0.0 0.5" /> 
          </material>
      </collision>
      <inertial>
        <mass value="0.2"/>
          <inertia ixx="0.000190416666667" ixy="0" ixz="0" iyy="0.0001904" iyz="0" izz="0.00036"/>
        </inertial>
  </link>
    
  <link name="right_wheel_link">
      <visual>
        <origin xyz="0 0 0" rpy="1.57079 0 0"/>
        <geometry>
          <cylinder length="0.04" radius="0.032"/>
        </geometry>
          <material name="black">
            <color rgba="0.0 0.0 0.0 0.5" /> 
          </material>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="1.57079 0 0"/>
        <geometry>
          <cylinder length="0.04" radius="0.032"/>
        </geometry>
          <material name="black">
            <color rgba="0.0 0.0 0.0 0.5" /> 
          </material>
      </collision>
      <inertial>
      <mass value="0.2"/>
      <inertia ixx="0.000190416666667" ixy="0" ixz="0" iyy="0.0001904" iyz="0" izz="0.00036"/>
    </inertial>
  </link>
    
  <joint name="left_wheel_joint" type="continuous">
      <parent link="base_link" />
      <child link="left_wheel_link" />
      <origin xyz="-0.02 0.10 -0.06" />
      <axis xyz="0 1 0" />
  </joint>

  <joint name="right_wheel_joint" type="continuous">
      <parent link="base_link" />
      <child link="right_wheel_link" />
      <origin xyz="-0.02 -0.10 -0.06" />
      <axis xyz="0 1 0" />
  </joint>

  <link name="caster_link">
      <visual>
        <origin xyz="0 0 0" rpy="1.57079 0 0"/>
        <geometry>
            <sphere radius="0.016"/>
        </geometry>
          <material name="black">
            <color rgba="0.0 0.0 0.0 0.5" /> 
          </material>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="1.57079 0 0"/>
        <geometry>
            <sphere radius="0.016"/>
        </geometry>
          <material name="black">
            <color rgba="0.0 0.0 0.0 0.5" /> 
          </material>
      </collision>
      <inertial>
      <mass value="0.02"/>
      <inertia ixx="0.000190416666667" ixy="0" ixz="0" iyy="0.0001904" iyz="0" izz="0.00036"/>
    </inertial>
  </link>
    
  <joint name="caster_joint" type="fixed">
      <parent link="base_link" />
      <child link="caster_link" />
      <origin xyz="0.06 0.0 -0.076" />
      <axis xyz="0 1 0" />
  </joint>



  <gazebo reference="caster_link">
    <material>Gazebo/Black</material>
  </gazebo>

  <gazebo reference="caster_link">
    <mu1 value="0.0"/>
    <mu2 value="0.0"/>
    <kp value="1000000.0" />
    <kd value="10.0" />
    <!-- <fdir1 value="0 0 1"/> -->
  </gazebo>


  <gazebo>
    <plugin name='diff_drive' filename='libgazebo_ros_diff_drive.so'>
          <ros>
            <namespace>/</namespace>
            <remapping>cmd_vel:=cmd_vel</remapping>
            <remapping>odom:=odom</remapping>
          </ros>
          <update_rate>30</update_rate>
          <!-- wheels -->
          <!-- <left_joint>left_wheel_joint</left_joint> -->
          <!-- <right_joint>right_wheel_joint</right_joint> -->
          <left_joint>left_wheel_joint</left_joint>
          <right_joint>right_wheel_joint</right_joint>
          <!-- kinematics -->
          <wheel_separation>0.2</wheel_separation>
          <wheel_diameter>0.065</wheel_diameter>
          <!-- limits -->
          <max_wheel_torque>20</max_wheel_torque>
          <max_wheel_acceleration>1.0</max_wheel_acceleration>
          <!-- output -->
          <publish_odom>true</publish_odom>
          <publish_odom_tf>true</publish_odom_tf>
          <publish_wheel_tf>false</publish_wheel_tf>
          <odometry_frame>odom</odometry_frame>
          <robot_base_frame>base_footprint</robot_base_frame>
      </plugin>


      <plugin name="fishbot_joint_state" filename="libgazebo_ros_joint_state_publisher.so">
        <ros>
          <remapping>~/out:=joint_states</remapping>
        </ros>
        <update_rate>30</update_rate>
        <joint_name>right_wheel_joint</joint_name>
        <joint_name>left_wheel_joint</joint_name>
      </plugin>    
      </gazebo> 

      <gazebo reference="laser_link">
        <material>Gazebo/Black</material>
      </gazebo>

    <gazebo reference="imu_link">
      <sensor name="imu_sensor" type="imu">
      <plugin filename="libgazebo_ros_imu_sensor.so" name="imu_plugin">
          <ros>
            <namespace>/</namespace>
            <remapping>~/out:=imu</remapping>
          </ros>
          <initial_orientation_as_reference>false</initial_orientation_as_reference>
        </plugin>
        <always_on>true</always_on>
        <update_rate>100</update_rate>
        <visualize>true</visualize>
        <imu>
          <angular_velocity>
            <x>
              <noise type="gaussian">
                <mean>0.0</mean>
                <stddev>2e-4</stddev>
                <bias_mean>0.0000075</bias_mean>
                <bias_stddev>0.0000008</bias_stddev>
              </noise>
            </x>
            <y>
              <noise type="gaussian">
                <mean>0.0</mean>
                <stddev>2e-4</stddev>
                <bias_mean>0.0000075</bias_mean>
                <bias_stddev>0.0000008</bias_stddev>
              </noise>
            </y>
            <z>
              <noise type="gaussian">
                <mean>0.0</mean>
                <stddev>2e-4</stddev>
                <bias_mean>0.0000075</bias_mean>
                <bias_stddev>0.0000008</bias_stddev>
              </noise>
            </z>
          </angular_velocity>
          <linear_acceleration>
            <x>
              <noise type="gaussian">
                <mean>0.0</mean>
                <stddev>1.7e-2</stddev>
                <bias_mean>0.1</bias_mean>
                <bias_stddev>0.001</bias_stddev>
              </noise>
            </x>
            <y>
              <noise type="gaussian">
                <mean>0.0</mean>
                <stddev>1.7e-2</stddev>
                <bias_mean>0.1</bias_mean>
                <bias_stddev>0.001</bias_stddev>
              </noise>
            </y>
            <z>
              <noise type="gaussian">
                <mean>0.0</mean>
                <stddev>1.7e-2</stddev>
                <bias_mean>0.1</bias_mean>
                <bias_stddev>0.001</bias_stddev>
              </noise>
            </z>
          </linear_acceleration>
        </imu>
      </sensor>
    </gazebo>

    <gazebo reference="laser_link">
      <sensor name="laser_sensor" type="ray">
      <always_on>true</always_on>
      <visualize>true</visualize>
      <update_rate>5</update_rate>
      <pose>0 0 0.075 0 0 0</pose>
      <ray>
          <scan>
            <horizontal>
              <samples>360</samples>
              <resolution>1.000000</resolution>
              <min_angle>0.000000</min_angle>
              <max_angle>6.280000</max_angle>
            </horizontal>
          </scan>
          <range>
            <min>0.120000</min>
            <max>3.5</max>
            <resolution>0.015000</resolution>
          </range>
          <noise>
            <type>gaussian</type>
            <mean>0.0</mean>
            <stddev>0.01</stddev>
          </noise>
      </ray>

      <plugin name="laserscan" filename="libgazebo_ros_ray_sensor.so">
        <ros>
          <!-- <namespace>/tb3</namespace> -->
          <remapping>~/out:=scan</remapping>
        </ros>
        <output_type>sensor_msgs/LaserScan</output_type>
        <frame_name>laser_link</frame_name>
      </plugin>
      </sensor>
    </gazebo>

</robot>
```

çœ‹åˆ°è¿™é‡Œä½ æ˜¯ä¸æ˜¯è¿«ä¸åŠå¾…æ•²èµ·æ¥å‘½ä»¤è¡Œæ¥åŠ è½½æˆ‘ä»¬çš„æœºå™¨äººåˆ°gazeboäº†ï¼Œåˆ«ç€æ€¥ï¼Œå°é±¼å†æ¨èä¸€ä¸ªå¯è§†åŒ–æœåŠ¡è¯·æ±‚å·¥å…·ï¼Œå…¶å®åœ¨ç¬¬å…­ç« ä¸­å°é±¼ä»‹ç»è¿‡ï¼Œåœ¨rqtå·¥å…·é›†é‡Œæœ‰ä¸€ä¸ªå«æœåŠ¡è¯·æ±‚å·¥å…·ã€‚

å‘½ä»¤è¡Œè¾“å…¥rqtï¼Œåœ¨æ’ä»¶é€‰é¡¹ä¸­é€‰æ‹©Services->Service Caller,ç„¶åå†ä¸‹æ‹‰æ¡†é€‰æ‹©/spawn\_entityæœåŠ¡ï¼Œå³å¯çœ‹åˆ°ä¸‹é¢çš„ç•Œé¢ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWIzMDZkNDZlZjA5MThhNWZkMzgxMDU5MjEwZjI3OTRfOFQzb051Q01pUFRiOXkzMUxzWGIzU0ZWQlpVUnlWT0pfVG9rZW46TDZaamJXbnV1b3FTRU54ZjBJNmNsWG9SblhlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ¥ç€æˆ‘ä»¬æŠŠæˆ‘ä»¬çš„FishBotçš„URDFæ¨¡å‹å¤åˆ¶ç²˜è´´ï¼Œæ”¾åˆ°xmlä¸­ï¼ˆæ³¨æ„è¦æŠŠåŸæ¥çš„''åˆ æ‰å“¦ï¼ï¼‰

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2Q3YTI5YjQyN2VmYTUxZTU0MDlmYTdjMjc3ZDAyNWFfVTBoVmdZNG5CUG15c2VoTE5JeUtvQjBqWG5iSkJURWZfVG9rZW46TThpd2I0YTh3b2ZrTTh4QkJZNmNVQmh3bjFmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ç„¶åç‚¹å³ä¸Šè§’çš„callï¼Œå¯ä»¥æ˜¾ç¤ºä¸‹å›¾æˆåŠŸäº†ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGM3YmRmY2I0ZTU1ZDM5ZjQ4MTNjYThiM2I0MTIyM2NfNkxsN1B5UGxjRjRzaTRIWktYSXBEaEhrRlhnMjFsRTVfVG9rZW46TXJQSWJBUWVtb1l2aVB4eEJNTGNPbFliblVnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ¥ç€å°±å¯ä»¥çœ‹åˆ°å·¥å‚è¿”å›è¯´æˆåŠŸæŠŠæœºå™¨äººåˆ¶ä½œå‡ºæ¥é€å…¥gazeboäº†ã€‚

æ­¤æ—¶å†çœ‹æˆ‘ä»¬çš„Gazebo,ä¸€ä¸ªå°å°çš„ï¼Œç™½ç™½çš„æœºå™¨äººå‡ºç°äº†ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTU1OWU2MjViZmExM2YyNzdjM2UxM2FmZjg0N2ZmOTNfYnJtTHlDNVFZdk9CdEZwTUlHWW02WTlkMUlIZE1RdWVfVG9rZW46Uk9abWJyS2hwb1BsV0Z4S3ZycmNaczg3bmNlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

shift+é¼ æ ‡å·¦é”®ï¼Œæˆ–è€…ç›´æ¥ç‚¹æ»šè½®ä¸­é”®ï¼Œéƒ½å¯ä»¥æ‹–åŠ¨è§†è§’ã€‚å¾ˆå¤šç©è¿‡ç¬¬ä¸‰äººç§°æ¸¸æˆçš„å­¦å¼Ÿå­¦å¦¹è‚¯å®šéƒ½ä¸é™Œç”Ÿè¿™ç§æ“æ§å§ã€‚

4.  ### åœ¨ä¸åŒä½ç½®åŠ è½½å¤šä¸ªæœºå™¨äºº
    

å¯ä»¥å†ç”Ÿäº§ä¸€ä¸ªfishbotï¼ˆä¸ºäº†åé¢éœ€è¦å¤šæœºå™¨äººä»¿çœŸçš„å°ä¼™ä¼´ï¼‰ã€‚

ä¿®æ”¹rqtä¸­çš„å‚æ•°ï¼Œå¢åŠ ä¸€ä¸ªå‘½åç©ºé—´ï¼Œç„¶åä¿®æ”¹ä¸€ä¸ªä½ç½®ï¼Œè®©ç¬¬äºŒä¸ªæœºå™¨äººå’Œç¬¬ä¸€ä¸ªç›¸è·1mçš„åœ°æ–¹ç”Ÿäº§ï¼Œç„¶åç‚¹å‡»Callã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Mjg2NWU2YWNlYWY0NWU0ZWVjZTViMTM3ZDBjM2QxYmRfRFJpbjFQemxma3IxSmJKRHVTYUhYNkRBRzcybkRaYUxfVG9rZW46V1NtamJzWjFhb0xVT2Z4YnJYWmNtTkFrbldjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿”å›æˆåŠŸï¼Œæ­¤æ—¶æ‹–é€Gazeboè§‚å¯Ÿä¸€ä¸‹ï¼Œå‘ç°å¤šå‡ºäº†ä¸€ä¸ªæœºå™¨äººï¼Œè·ç¦»åˆšå¥½æ˜¯åœ¨Xè½´ï¼ˆçº¢è‰²ï¼‰1ç±³ï¼ˆä¸€ä¸ªå°æ ¼å­ä¸€ç±³ï¼‰å¤„ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2NiZWNlN2Q0ZjUzN2E3ZDYxZWNkYjVhZWUwYTU2NmJfWVl2RTd0cVBiMmZ2bzhNVzZ3YTBuc1JIYnBhd3pFOTVfVG9rZW46U28yQWJQc1U4b2g3a3h4QnBwdGM2QW1VbmtmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

5.  ### æŸ¥è¯¢å’Œåˆ é™¤æœºå™¨äºº
    

åˆ©ç”¨rqtå·¥å…·ï¼Œæˆ‘ä»¬å†å¯¹å¦å¤–ä¸¤ä¸ªæœåŠ¡æ¥å£è¿›è¡Œè¯·æ±‚ã€‚

é¦–å…ˆå…ˆæŸ¥è¯¢æœ‰å‡ ä¸ªæ¨¡å‹åœ¨ä»¿çœŸç¯å¢ƒä¸­

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWM3NDcxZWVmM2MxODg5Y2FiZDlkMTJkY2M0MDczZWJfeDBtM2dXZEtVMU5teEZhUUxnUVdST1VOM2doUUk4UFNfVG9rZW46TnJ5VWJoUjFSb3pTNnl4TUFYdWNDdHlVbk1jXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æŸ¥åˆ°äº†ä¸‰ä¸ªæ¨¡å‹ï¼Œä¸€ä¸ªå¤§åœ°ï¼Œä¸€ä¸ªfishbotï¼Œä¸€ä¸ªfishbot\_0ã€‚

æˆ‘ä»¬æ¥ç€å°è¯•æŠŠfishbot\_0åˆ æ‰ï¼Œé€‰æ‹©åˆ é™¤å®ä½“ï¼Œè¾“å…¥fishbot\_0çš„åå­—ï¼Œæ‹¿èµ·å°ç”µè¯é€šçŸ¥å·¥å‚å›æ”¶æˆ‘ä»¬çš„0å·fishbotã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTFhZWM4OWYxOTc4MWI1ZDVhZjRiYzM1NjdlYTc0NzlfdHIwRkV6MHAyRkNONjVkNnBKbnAyNHg0TXhMNllmanFfVG9rZW46VUZyVGJEaHdlb2gyZVR4TXJhU2NmcXFIbnVnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è°ƒç”¨æˆåŠŸï¼Œè§‚å¯Ÿgazeboå‘ç°æœºå™¨äººï¼Œäººæ²¡äº†

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmYxMGY0OGI2ZTgzMmFhZTE2MmU2NDMwN2JlOTMxM2NfdmRzQnZxcExKSnFaUFFDcDZ0ZE1aQmZDd2dKNWJLcDNfVG9rZW46V2NibGJaMDA3b05qQlh4aXNRSWNkNU04bk1nXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

6.  ### åˆ›å»ºå·¥ä½œç©ºé—´
    

æœ¬èŠ‚ä»£ç å‚è€ƒé±¼é¦™ROSï¼šhttps://github.com/fishros/fishbot/tree/navgation2

```Bash
# åˆ›å»ºå·¥ä½œç©ºé—´
mkdir -p ws_simulations/src
cd ws_simulations/src
```

åˆ›å»ºåŠŸèƒ½åŒ…

```Bash
ros2 pkg create fishbot_description --build-type ament_cmake
cd fishbot_description
```

ç„¶åé…ç½®package.xml

```xml
  <exec_depend>rviz2</exec_depend>
  <exec_depend>xacro</exec_depend>
  <exec_depend>robot_state_publisher</exec_depend>
  <exec_depend>joint_state_publisher</exec_depend>
  <exec_depend>ros2launch</exec_depend>
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTI3MmYzOTJjNzVmNjIwOWNjZjA4ODc0YWU2NDM4ODlfa1hQN0IwaXBxdmo3bmxpSmpMZ0FRWFA1THVyZ053Y3RfVG9rZW46V1BaeGJrcFV6b3RETzJ4WU84VGNrMVhCbmVmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ç„¶åä¿®æ”¹cmakelists.txt

```Bash
install(
  DIRECTORY launch urdf rviz meshes
  DESTINATION share/${PROJECT_NAME}  
)
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzlmMzQ3NzMzOWEwZmRkOGIzNmY3NDMzZjNlMjBiY2VfdXNYZEpreU9ucVpPdDZWdm4ySUxJeVc5NWloNk9yS3ZfVG9rZW46SWJLTmJHalFPb2hLTFF4bDFUWGNQaGJMbjlkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å…‹éš†ä¸‹é±¼é¦™ROSçš„ä»“åº“ï¼Œå¹¶å¤åˆ¶ä¸‹é‡Œé¢çš„æ–‡ä»¶åˆ°å’±ä»¬çš„ç›®å½•ä¸‹ã€‚è¿™éƒ½æ˜¯ä¸Šä¸€èŠ‚çš„ä¸œè¥¿ï¼Œä¸æœ¬èŠ‚å­¦ä¹ æ— å…³ï¼Œç›´æ¥å¤åˆ¶å°±è¡Œã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDVhZThiZjhhMWIzYzA4YjIyZTc2MWY2NzViY2Y1ZDlfRlhjcW1aajZ5dTJxS0tNcnVxT2VpM1hqVnVPRGJra0pfVG9rZW46V1JSS2JnTFl3bzliTHl4cjlMR2NucENMbnlmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ‰“å¼€å·¥ä½œç©ºé—´ï¼Œåœ¨`src/fishbot_description/launch`ä¸­æ·»åŠ ä¸€ä¸ª`gazebo.launch.py`æ–‡ä»¶ï¼Œæˆ‘ä»¬å¼€å§‹ç¼–å†™launchæ–‡ä»¶æ¥åœ¨gazeboä¸­åŠ è½½æœºå™¨äººæ¨¡å‹ã€‚

æˆ‘ä»¬ä¸»è¦éœ€è¦åšä¸¤ä»¶äº‹ï¼š

1.  å¯åŠ¨gazeboï¼Œæˆ‘ä»¬å¯ä»¥å°†å‘½ä»¤è¡Œå†™æˆä¸€ä¸ªlaunchèŠ‚ç‚¹
    

```Python
ExecuteProcess(
        cmd=['gazebo', '--verbose','-s', 'libgazebo_ros_init.so', '-s', 'libgazebo_ros_factory.so', gazebo_world_path],
        output='screen')

```

2.  ä¸Šé¢æˆ‘ä»¬åŠ è½½æœºå™¨äººæ˜¯ç›´æ¥å°†XMLæ ¼å¼çš„URDFå¤åˆ¶è¿‡å»è¿›è¡ŒåŠ è½½çš„ï¼Œè¿™æ ·å¾ˆä¸æ–¹ä¾¿ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨gazebo\_rosä¸ºæˆ‘ä»¬æä¾›å¥½çš„ä¸€ä¸ªå«åš`spawn_entity.py`èŠ‚ç‚¹ï¼Œè¯¥èŠ‚ç‚¹æ”¯æŒä»æ–‡ä»¶åœ°å€ç›´æ¥ç”Ÿäº§æœºå™¨äººåˆ°Gazeboã€‚
    

è¯¥èŠ‚ç‚¹éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæœºå™¨äººçš„æ¨¡å‹åå­—å’Œurdfçš„æ–‡ä»¶åœ°å€ï¼Œè¿™ä¸ªç®€å•ï¼Œå‰é¢æˆ‘ä»¬æ›¾ç»ä½¿ç”¨package\_shareæ¥æ‹¼æ¥è¿‡urdfè·¯å¾„ã€‚

```Python
spawn_entity_cmd = Node(
    package='gazebo_ros', 
    executable='spawn_entity.py',
    arguments=['-entity', robot_name_in_model,  '-file', urdf_model_path ], output='screen')
```

å…ˆåŠ è½½èµµè™šå·¦è€å¸ˆçš„æ¨¡æ¿

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzZiMDFmMDA4OGEwNWQzNDEzYmQ3MTA2OWNiYjVkMDZfTDk4dGRhcFF3ZXJTRnQ1cU9SNE54NE5kcUp3UUZiaWZfVG9rZW46SDZZemIwcmg5b2E0ZVF4WmhGVWNFYVB6blNkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æˆ‘ä»¬é¦–å…ˆéœ€è¦ExecuteProcessæ¥è¾“å…¥ç»ˆç«¯å‘½ä»¤ï¼Œæ‰€ä»¥è¦å…ˆæŠŠfrom launch.actions import ExecuteProcessçš„æ³¨é‡Šå…ˆæ‰“å¼€ã€‚

ä¸ºäº†æ–¹ä¾¿ä¿®æ”¹åŠ è½½çš„æœºå™¨äººæ¨¡å‹å’Œurdf,æˆ‘ä»¬è¿˜éœ€è¦ä½¿ç”¨shareç›®å½•ï¼Œæ‰€ä»¥ä¹Ÿè¦æŠŠfrom ament\_index\_python.packages import get\_package\_share\_directoryçš„æ³¨é‡Šæ‰“å¼€ï¼Œå¹¶import osã€‚

å†™å®Œåçš„launchæ–‡ä»¶å¦‚ä¸‹ï¼š

```python
from launch import LaunchDescription
from launch_ros.actions import Node

# å°è£…ç»ˆç«¯æŒ‡ä»¤ç›¸å…³ç±»
from launch.actions import ExecuteProcess
# from launch.substitutions import FindExecutable
# å‚æ•°å£°æ˜ä¸è·å–
# from launch.actions import DeclareLaunchArgument
# from launch.substitutions import LaunchConfiguration
# æ–‡ä»¶åŒ…å«ç›¸å…³
# from launch.actions import IncludeLaunchDescription
# from launch.launch_description_sources import PythonLaunchDescriptionSource
# åˆ†ç»„ç›¸å…³
# from launch_ros.actions import PushRosNamespace
# from launch.actions import GroupAction
# äº‹ä»¶ç›¸å…³
# from launch.event_handlers import OnProcessStart,OnProcessExit
# from launch.actions import ExecuteProcess,RegisterEventHandler,LogInfo
# è·å–åŠŸèƒ½åŒ…ä¸‹shareç›®å½•æˆ–è·¯å¾„
from ament_index_python.packages import get_package_share_directory
import os

def generate_launch_description():
    robot_name_in_model = 'fishbot'
    package_name = 'fishbot_description'
    urdf_name = "fishbot_gazebo.urdf"

    pkg_share = get_package_share_directory(f"{package_name}")
    urdf_model_path = os.path.join(pkg_share, f'urdf/urdf/{urdf_name}')

    # Start Gazebo server
    start_gazebo_cmd = ExecuteProcess(
        cmd=['gazebo', '--verbose','-s', 'libgazebo_ros_init.so', '-s', 'libgazebo_ros_factory.so'],
        output='screen')
        
    # Launch the robot
    spawn_entity_cmd = Node(
        package='gazebo_ros', 
        executable='spawn_entity.py',
        arguments=['-entity', robot_name_in_model,  '-file', urdf_model_path ], output='screen')

    return LaunchDescription([start_gazebo_cmd,spawn_entity_cmd])
```

ç¼–è¯‘è¿è¡Œ

```Python
colcon build --packages-select fishbot_description
source install/setup.bash
ros2 launch fishbot_description gazebo.launch.py
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YThjMWVmOGUzYTRiNGZjMGRhNWNlZjFmMjY1MTNjYzBfUEJLaXVlVU54UHhSUDMwSWQ1eEt5Wkc1amI1emNMejFfVG9rZW46WGpQOGI1T2Jwb1RpRE54VlQ0YWNwRGgwbjJnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

7.  ### æ’ä»¶
    

ä½¿ç”¨ä¸‹é¢çš„æŒ‡ä»¤å¯ä»¥æŸ¥çœ‹æ‰€æœ‰çš„åŠ¨æ€é“¾æ¥åº“ï¼š

```Python
ls /opt/ros/humble/lib/libgazebo_ros*
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmFkNjllNWJlYWJhY2VmZDA4NDg4ODZiNTE5ZWZlY2FfeGo1djlncVFocVRmaEVBYjQ1VElnYnJZVzhQWUsyZnpfVG9rZW46Q1BnVGIyZGNNb09DNzR4elNWOWNiNDZBblpnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Plain Text
/opt/ros/humble/lib/libgazebo_ros2_control.so
/opt/ros/humble/lib/libgazebo_ros_ackermann_drive.so
/opt/ros/humble/lib/libgazebo_ros_bumper.so
/opt/ros/humble/lib/libgazebo_ros_camera.so
/opt/ros/humble/lib/libgazebo_ros_diff_drive.so
/opt/ros/humble/lib/libgazebo_ros_elevator.so
/opt/ros/humble/lib/libgazebo_ros_factory.so
/opt/ros/humble/lib/libgazebo_ros_force.so
/opt/ros/humble/lib/libgazebo_ros_force_system.so
/opt/ros/humble/lib/libgazebo_ros_ft_sensor.so
/opt/ros/humble/lib/libgazebo_ros_gps_sensor.so
/opt/ros/humble/lib/libgazebo_ros_hand_of_god.so
/opt/ros/humble/lib/libgazebo_ros_harness.so
/opt/ros/humble/lib/libgazebo_ros_imu_sensor.so
/opt/ros/humble/lib/libgazebo_ros_init.so
/opt/ros/humble/lib/libgazebo_ros_joint_pose_trajectory.so
/opt/ros/humble/lib/libgazebo_ros_joint_state_publisher.so
/opt/ros/humble/lib/libgazebo_ros_node.so
/opt/ros/humble/lib/libgazebo_ros_p3d.so
/opt/ros/humble/lib/libgazebo_ros_planar_move.so
/opt/ros/humble/lib/libgazebo_ros_projector.so
/opt/ros/humble/lib/libgazebo_ros_properties.so
/opt/ros/humble/lib/libgazebo_ros_ray_sensor.so
/opt/ros/humble/lib/libgazebo_ros_state.so
/opt/ros/humble/lib/libgazebo_ros_template.so
/opt/ros/humble/lib/libgazebo_ros_tricycle_drive.so
/opt/ros/humble/lib/libgazebo_ros_utils.so
/opt/ros/humble/lib/libgazebo_ros_vacuum_gripper.so
/opt/ros/humble/lib/libgazebo_ros_video.so
/opt/ros/humble/lib/libgazebo_ros_wheel_slip.so
```

  

1.  #### è¿åŠ¨æ§åˆ¶æ’ä»¶+é‡Œç¨‹è®¡odom
    

æœ¬èŠ‚è¯¾é€šè¿‡é…ç½®ä¸¤è½®å·®é€Ÿæ§åˆ¶æ’ä»¶ï¼Œè®©æˆ‘ä»¬çš„æœºå™¨äººåŠ¨èµ·æ¥

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDU3ZWJkOGIwYjQ2OWUxNzg1NTJjOTAyYWY4N2IxYjRfR2ZPOTZtY0FqM2FhUVoxeDZZUnFXU1J4R2hXNjdLOTZfVG9rZW46SEVRamJtbFhHb1QxS2Z4bkV6V2NQZm1xbnVmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ’ä»¶ä»‹ç»ï¼š

Gazeboæ˜¯ä¸€ä¸ªç‹¬ç«‹äºROSçš„è½¯ä»¶ï¼Œå¯¹å¤–æä¾›äº†ä¸°å¯Œçš„APIå¯ä»¥ä½¿ç”¨ï¼Œgazeboçš„æ’ä»¶æŒ‰ç…§ç”¨é€”å¤§è‡´å¯ä»¥åˆ†ä¸ºä¸¤ç§ï¼š

1.  ç”¨äºæ§åˆ¶çš„æ’ä»¶ï¼Œé€šè¿‡æ’ä»¶å¯ä»¥æ§åˆ¶æœºå™¨äººå…³èŠ‚è¿åŠ¨ï¼Œå¯ä»¥è¿›è¡Œä½ç½®ã€é€Ÿåº¦ã€åŠ›çš„æ§åˆ¶ï¼Œæ¯”å¦‚æˆ‘ä»¬è¿™èŠ‚è¯¾çš„ä¸¤è½®å·®é€Ÿæ§åˆ¶å™¨ã€‚
    
2.  ç”¨äºæ•°æ®é‡‡é›†çš„æ’ä»¶ï¼Œæ¯”å¦‚IMUä¼ æ„Ÿå™¨ç”¨äºé‡‡é›†æœºå™¨äººçš„æƒ¯æ€§ï¼Œæ¿€å…‰é›·è¾¾ç”¨äºé‡‡é›†æœºå™¨äººå‘¨å›´çš„ç‚¹äº‘ä¿¡æ¯ã€‚
    

å½“ç„¶ä¸Šé¢ä¸¤ç±»æ’ä»¶åŠŸèƒ½ä¹Ÿå¯ä»¥å†™åˆ°ä¸€ä¸ªæ’ä»¶é‡Œï¼Œä¸¤è½®å·®é€Ÿæ’ä»¶ï¼ˆgazebo\_ros\_diff\_driveï¼‰å°±æ˜¯ä¸€ä¸ªäºŒåˆä¸€åŠ å¼ºç‰ˆã€‚ï¼ˆå·®é€Ÿæ§åˆ¶+odomï¼‰

ä¸¤è½®å·®é€Ÿæ’ä»¶ç”¨äºæ§åˆ¶æœºå™¨äººè½®å­å…³èŠ‚çš„ä½ç½®å˜åŒ–ï¼ŒåŒæ—¶è¯¥æ’ä»¶è¿˜ä¼šè·å–è½®å­çš„ä½ç½®ä»¥åŠé€Ÿåº¦çš„ä¿¡æ¯çš„åé¦ˆï¼Œæ ¹æ®åé¦ˆçš„ä½ç½®ä¿¡æ¯ç»“åˆè¿åŠ¨å­¦æ¨¡å‹å³å¯è®¡ç®—å‡ºå½“å‰æœºå™¨äººçš„ä½å§¿ï¼ˆé‡Œç¨‹è®¡ï¼‰ã€‚

ä¸¤è½®å·®é€Ÿæ§åˆ¶å™¨å¯ä»¥å°†è½®å­çš„ç›®æ ‡è½¬é€Ÿå‘é€ç»™Gazeboï¼Œå¹¶ä»Gazeboè·å–åˆ°å®é™…çš„é€Ÿåº¦å’Œä½ç½®ã€‚ï¼ˆæ³¨æ„ï¼šå‘é€ç»™Gazeboæ˜¯ç›®æ ‡é€Ÿåº¦ï¼Œåé¦ˆå›æ¥çš„æ˜¯å®é™…é€Ÿåº¦ã€‚ç›®æ ‡!=å®é™…ï¼Œæ¯”å¦‚è½®å­å¡ä½äº†ï¼Œæ— è®ºä½ å‘ä»€ä¹ˆç›®æ ‡é€Ÿåº¦ï¼Œå®é™…é€Ÿåº¦éƒ½æ˜¯0ã€‚ï¼‰

è¦æƒ³å¿«é€Ÿäº†è§£ä¸€ä¸ªç³»ç»Ÿçš„åŠŸèƒ½ï¼Œæœ€ç›´æ¥çš„å°±æ˜¯çœ‹ç³»ç»Ÿçš„å¯¹å¤–çš„è¾“å…¥å’Œè¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿä»€ä¹ˆéƒ½ä¸è¦è¯´ï¼Œçœ‹ä¸‹å›¾ï¼š

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmQ1MjJiMjBjZGY4YWQzMmU4ODgzNzk4NDY0ZjZjNTJfRkdDMWhybngxUGYzcVRyQlVCRnlPQXc1SUNJYnVJWlhfVG9rZW46S2d4V2JkOHZCb3k5SGJ4aDV6UmNGRHNWbkJQXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¸Šå›¾å°±æ˜¯å¯¹gazebo\_ros\_diff\_driveçš„è¾“å…¥å’Œè¾“å‡ºä¿¡æ¯çš„æ€»ç»“ï¼Œå¯ä»¥å¾ˆç›´è§‚çš„çœ‹åˆ°è¯¥æ’ä»¶ä¸»è¦è¾“å…¥æ§åˆ¶æŒ‡ä»¤ï¼Œä¸»è¦è¾“å‡ºé‡Œç¨‹è®¡ä¿¡æ¯ã€‚æ¥ç€å°é±¼å¸¦ä½ åˆ†åˆ«è®¤è¯†ä¸€ä¸‹è¾“å…¥å’Œè¾“å‡ºä¸¤ä¸ªéƒ¨åˆ†ã€‚

è¿™ä¸ªæ’ä»¶éœ€è¦é…ç½®ä¸€ç³»åˆ—å‚æ•°å¦‚ä¸‹å›¾ï¼š

ä¸çŸ¥é“ä½ æ˜¯å¦è¿˜è®°å¾—åœ¨ç¬¬ä¸ƒç« ä¸­ï¼Œå°é±¼å¯¹ä¸¤è½®å·®é€Ÿåº•ç›˜çš„è¿åŠ¨å­¦æ­£çš„ä»‹ç»ã€‚å¦‚æœè¦å®Œæˆåº•ç›˜çš„æ­£é€†è§£å’Œé‡Œç¨‹è®¡çš„æ¨ç®—å°±å¿…é¡»è¦çŸ¥é“è½®å­çš„ç›´å¾„å’Œé—´è·ã€‚

åŒæ—¶è¯¥æ’ä»¶è¿˜æä¾›äº†ä¸€äº›å¯ä»¥æ§åˆ¶è¾“å‡ºçš„é€‰é¡¹ï¼Œå› ä¸ºæ˜¯ä»¿çœŸï¼Œæ‰€ä»¥è¿˜è¦å‘Šè¯‰æ’ä»¶è½®å­å¯¹åº”çš„jointåç§°ç­‰ä¿¡æ¯ï¼Œè¿™æ ·å°±æœ‰äº†ä¸‹é¢è¿™ä¸ªå‚æ•°è¡¨æ ¼ï¼š

<!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
| é…ç½®é¡¹ | å«ä¹‰ |
|:---|:---|
| ros | rosç›¸å…³é…ç½®ï¼ŒåŒ…å«å‘½åç©ºé—´å’Œè¯é¢˜é‡æ˜ å°„ç­‰ |
| update_rate | æ•°æ®æ›´æ–°é€Ÿç‡ |
| left_joint | å·¦è½®å…³èŠ‚åç§° |
| right_joint | å³è½®å…³èŠ‚åç§° |
| wheel_separation | å·¦å³è½®å­çš„é—´è· |
| wheel_diameter | è½®å­çš„ç›´å¾„ |
| max_wheel_torque | è½®å­æœ€å¤§çš„åŠ›çŸ© |
| max_wheel_acceleration | è½®å­æœ€å¤§çš„åŠ é€Ÿåº¦ |
| publish_odom | æ˜¯å¦å‘å¸ƒé‡Œç¨‹è®¡ |
| publish_odom_tf | æ˜¯å¦å‘å¸ƒé‡Œç¨‹è®¡çš„tfå¼€å…³ |
| publish_wheel_tf | æ˜¯å¦å‘å¸ƒè½®å­çš„tfæ•°æ®å¼€å…³ |
| odometry_frame | é‡Œç¨‹è®¡çš„framed IDï¼Œæœ€ç»ˆä½“ç°åœ¨è¯é¢˜å’ŒTFä¸Š |
| robot_base_frame | æœºå™¨äººçš„åŸºç¡€frameçš„ID |

æ§åˆ¶æŒ‡ä»¤ï¼šä¸¤è½®å·®é€Ÿæ§åˆ¶å™¨é»˜è®¤é€šè¿‡è®¢é˜…è¯é¢˜`cmd_vel`æ¥è·å–ç›®æ ‡çº¿é€Ÿåº¦å’Œè§’é€Ÿåº¦ã€‚è¯¥è¯é¢˜çš„ç±»å‹ä¸ºï¼š`geometry_msgs/msg/Twist`

è¯¥æ¥å£é‡Œä¸»è¦æ˜¯ä¸€äº›çº¿é€Ÿåº¦å’Œè§’é€Ÿåº¦éƒ½åŒ…å«åœ¨xã€yã€zï¼Œä»£è¡¨åæ ‡ç³»çš„ä¸‰ä¸ªæ–¹å‘ä¸Šçš„å¯¹åº”é€Ÿåº¦ã€‚ **ï¼ˆè¯¦ç»†çš„æ¥å£å†…å®¹è¯·çœ‹ç¡¬ä»¶å¹³å°ç« èŠ‚ï¼‰**

ä¸¤è½®å·®é€Ÿæ§åˆ¶å™¨æ”¶åˆ°è¿™ä¸ªè¯é¢˜æ•°æ®åå°†å…¶ä¸­çš„è§’é€Ÿåº¦å’Œçº¿é€Ÿåº¦è½¬æ¢ä¸Šä¸¤ä¸ªè½®å­çš„è½¬åŠ¨é€Ÿåº¦å‘é€ç»™Gazeboã€‚

  

è¾“å‡ºçš„ä¿¡æ¯ï¼š

é‡Œç¨‹è®¡ä¿¡æ¯é»˜è®¤çš„è¾“å‡ºè¯é¢˜ä¸º`odom`ï¼Œå…¶æ¶ˆæ¯ç±»å‹ä¸ºï¼š`nav_msgs/msg/Odometry`

å…¶æ•°æ®ä¸»è¦åŒ…å«ä¸‰ä¸ªéƒ¨åˆ†ï¼š **ï¼ˆè¯¦ç»†çš„æ¥å£å†…å®¹è¯·çœ‹ç¡¬ä»¶å¹³å°ç« èŠ‚ï¼‰**

*   headerï¼Œè¡¨ç¤ºè¯¥æ¶ˆæ¯å‘å¸ƒçš„æ—¶é—´
    
*   poseï¼Œè¡¨ç¤ºå½“å‰æœºå™¨äººä½ç½®å’Œæœå‘
    
*   twistï¼Œè¡¨ç¤ºå½“å‰æœºå™¨äººçš„çº¿é€Ÿåº¦å’Œè§’é€Ÿåº¦
    
*   æ•°æ®ä¸­è¿˜åŒ…å«ä¸€ä¸ªcovarianceï¼Œå…¶ä»£è¡¨åæ–¹å·®çŸ©é˜µï¼Œåé¢å°é±¼å†™ç¯‡æ–‡ç« æ¥ä»‹ç»ä¸‹ï¼Œè¿™é‡Œåªéœ€äº†è§£å…¶å«ä¹‰å³å¯ã€‚
    

  

é‡Œç¨‹è®¡TFä¿¡æ¯ä¹Ÿå¯ä»¥è¾“å‡ºï¼šè®¾ä¸ºtrueï¼Œè®¢é˜…tfè¯é¢˜é‡Œä½ å°±å¯ä»¥çœ‹åˆ°åƒä¸‹é¢çš„msgï¼Œå»ºè®®åé¢é…ç½®å¥½åï¼Œæ‰‹åŠ¨ä¿®æ”¹ä¸‹ï¼Œå¯¹æ¯”åŒºåˆ«

```yaml
- header:
    stamp:
      sec: 6157
      nanosec: 907000000
    frame_id: odom
  child_frame_id: base_footprint
  transform:
    translation:
      x: 0.0005557960241049835
      y: -0.0007350446303238693
      z: 0.01599968753145574
    rotation:
      x: 4.691143395208505e-07
      y: 7.115496626557812e-06
      z: -0.018531475772549166
      w: 0.9998282774331005
```

è½®å­TFä¿¡æ¯ä¹Ÿå¯ä»¥è¾“å‡ºï¼šè®¾ä¸ºtrueï¼Œè®¢é˜…tfè¯é¢˜é‡Œä½ å°±å¯ä»¥çœ‹åˆ°åƒä¸‹é¢çš„msgï¼Œå»ºè®®åé¢é…ç½®å¥½åï¼Œæ‰‹åŠ¨ä¿®æ”¹ä¸‹ï¼Œå¯¹æ¯”åŒºåˆ«

```yaml
- header:
    stamp:
      sec: 6157
      nanosec: 941000000
    frame_id: base_link
  child_frame_id: left_wheel_link
  transform:
    translation:
      x: -0.02
      y: 0.1
      z: -0.06
    rotation:
      x: 0.0
      y: 0.049519025127821005
      z: 0.0
      w: 0.9987731805321918
- header:
    stamp:
      sec: 6157
      nanosec: 941000000
    frame_id: base_link
  child_frame_id: right_wheel_link
  transform:
    translation:
      x: -0.02
      y: -0.1
      z: -0.06
    rotation:
      x: 0.0
      y: -0.0663387077034509
      z: 0.0
      w: 0.9977971616817898

```

  

å’±ä»¬ä¹‹å‰ä¸‹è½½çš„é‚£ä¸ªé±¼é¦™ROSçš„fishbotçš„urdfå·²ç»åŒ…å«äº†å·®é€Ÿæ’ä»¶çš„å†…å®¹ï¼Œå¦‚ä¸‹ï¼š

å› ä¸ºæ˜¯ç»™Gazeboçš„æ’ä»¶ï¼Œæ‰€ä»¥åœ¨`URDF`ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨`<gazebo>`è¿›è¡Œé…ç½®ï¼Œå› ä¸ºæ˜¯è¦ç»™`gazebo`é…ç½®æ’ä»¶ï¼Œæ‰€æœ‰è¦åœ¨`gazebo`æ ‡ç­¾ä¸‹æ·»åŠ `plugin`å­æ’ä»¶ã€‚

```xml
  <gazebo>
    <plugin name='diff_drive' filename='libgazebo_ros_diff_drive.so'>
          <ros>
            <namespace>/</namespace>
            <remapping>cmd_vel:=cmd_vel</remapping>
            <remapping>odom:=odom</remapping>
          </ros>
          <update_rate>30</update_rate>
          <!-- wheels -->
          <left_joint>left_wheel_joint</left_joint>
          <right_joint>right_wheel_joint</right_joint>
          <!-- kinematics -->
          <wheel_separation>0.2</wheel_separation>
          <wheel_diameter>0.065</wheel_diameter>
          <!-- limits -->
          <max_wheel_torque>20</max_wheel_torque>
          <max_wheel_acceleration>1.0</max_wheel_acceleration>
          <!-- output -->
          <publish_odom>true</publish_odom>
          <publish_odom_tf>true</publish_odom_tf>
          <publish_wheel_tf>true</publish_wheel_tf>
          <odometry_frame>odom</odometry_frame>
          <robot_base_frame>base_footprint</robot_base_frame>
      </plugin>
    </gazebo> 
```

  

ç¼–è¯‘ä¸€ä¸‹ï¼š

```Python
colcon build
source install/setup.bash
ros2 launch fishbot_description gazebo.launch.py
```

ç„¶åå¯ä»¥çœ‹çœ‹ä¸‹é¢è¿™ä¿©å‘½ä»¤ï¼š

```Python
ros2 node list
ros2 topic list
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Nzc3OWNmNGJmNTM2ZDU1NDdjYzgzZWQ4MDJkOTViNGZfWFFDaFFBUTc0ZTdxUGM2Sjl6OG9DQW42djNFMUtMZnhfVG9rZW46V29OaWJYUTZjb3NSZDB4dkgzbGNZZzJObmhEXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¯ä»¥çœ‹åˆ°äº†æˆ‘ä»¬æ’ä»¶è®¢é˜…çš„çš„/cmd\_velå’Œå‘å¸ƒçš„/odomäº†ã€‚

ç„¶åæˆ‘ä»¬å¯ä»¥é€šè¿‡teleop-twist-keyboardèŠ‚ç‚¹å‘å¸ƒcmd\_velæ¥æ§åˆ¶fishbotã€‚

```Python
sudo apt install ros-humble-teleop-twist-keyboard
```

ä½¿ç”¨ä¸‹æ–¹èŠ‚ç‚¹æ¥æ§åˆ¶

```Python
ros2 run teleop_twist_keyboard teleop_twist_keyboard
```

æ¥ç€å°è¯•ä½¿ç”¨æ¥æ§åˆ¶æœºå™¨äººè¿åŠ¨

```Python
   U    I    O
   J    K    L
   M    <    >
```

ç‚¹ä¸€ä¸‹ï¼Œä½ å°±èƒ½çœ‹åˆ°fishbotåœ¨Gazeboä¸­é£é€Ÿçš„ç§»åŠ¨ã€‚æ¥ç€æ‰“å¼€ç»ˆç«¯ï¼Œæ‰“å°ä¸€ä¸‹odomè¯é¢˜å’Œtfè¯é¢˜ï¼Œç§»åŠ¨æœºå™¨äººè§‚å¯Ÿæ•°æ®å˜åŒ–ã€‚

ä¹Ÿå¯ä»¥ä½¿ç”¨rqtæ˜¾ç¤ºé€Ÿåº¦æ•°æ®

```Python
rqt
```

é€‰æ‹©Plugin->Visualization->Plot

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWE4MDBiNmU0NzhiNDRhNmQ1MzNlMWNlZjk4NGY0ODZfcGV6Q2djZXZJbTlTYXBLcE9XMmNyaWtiOE9hVDlnRHJfVG9rZW46UVdKaGJxTGlQb1lQRkl4M2ZFTWNzeFRqbkFiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

åœ¨ä¸Šæ–¹Topicè¾“å…¥`/cmd_vel/linear/x`ï¼Œå†è¾“å…¥`/cmd_vel/angular/z`ï¼Œç„¶åç”¨é”®ç›˜æ§åˆ¶æœºå™¨äººç§»åŠ¨ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTQ0MjI1MmZkNTUwMjBhMDAwMDEzYTRmYzg2ODEyOTVfa0phM2ZOamg3WGtJWG5EQ0I0TjVLSXRFSUJHTzR0RkZfVG9rZW46SVNjTmJ5ZlE2b0hWWFN4SEdMUWNWbGpiblNoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGIyM2MxNDNjNTk3NmRiNGQ3OGI4YTA2ZmIzZjY3MDlfakt3WUF4cXNZY29WbjVuMFQzdGk5RTVGNlBjdXJCVEVfVG9rZW46WDl1RmI2TlFXb3E3aUl4YnVXa2N2SU82bnhoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¹Ÿå¯ä»¥åœ¨rviz2é‡Œçœ‹odom

```Python
rviz2
```

ç‚¹é”®ç›˜æ§åˆ¶èŠ‚ç‚¹æŒ‰Uï¼Œè®©æœºå™¨äººè½¬åœˆã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Mzg5ODM4MDVkOGE1NzY1M2Q0Nzg1ODRhY2E3YTZhOTJfVU1qaklEWVJ0bHNrOTYxbk9wQmtPTW1OM1M0R3lUSFpfVG9rZW46S0F4bGJtQkJob3VEN2F4aFhlS2N6dlBxbm1jXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è™½ç„¶æœºå™¨äººçš„è½¨è¿¹å·²ç»åœ¨RVIZä¸­æ˜¾ç¤ºå‡ºæ¥äº†ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰æœºå™¨äººçš„æ¨¡å‹ï¼Œä¹Ÿçœ‹ä¸åˆ°è½®å­çš„è½¬åŠ¨ï¼Œå’±ä»¬æ¥å¸¦ä½ ä¸€èµ·è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

å‰é¢å’±ä»¬ä»‹ç»è¿‡ï¼Œè¦å‘å¸ƒæœºå™¨äººæ¨¡å‹æˆ‘ä»¬æ‰€ä½¿ç”¨çš„èŠ‚ç‚¹æ˜¯`robot_state_publisher`,æ‰€ä»¥æˆ‘ä»¬åœ¨`gazebo.launch.py`ä¸­åŠ å…¥è¿™ä¸ªèŠ‚ç‚¹ï¼ŒåŒæ—¶å†åŠ ä¸Šrviz2çš„å¯åŠ¨èŠ‚ç‚¹ï¼Œæœ€ç»ˆçš„`gazebo.launch.py`å†…å®¹å¦‚ä¸‹ï¼š

```python
from launch import LaunchDescription
from launch_ros.actions import Node

# å°è£…ç»ˆç«¯æŒ‡ä»¤ç›¸å…³ç±»
from launch.actions import ExecuteProcess
# from launch.substitutions import FindExecutable
# å‚æ•°å£°æ˜ä¸è·å–
# from launch.actions import DeclareLaunchArgument
# from launch.substitutions import LaunchConfiguration
# æ–‡ä»¶åŒ…å«ç›¸å…³
# from launch.actions import IncludeLaunchDescription
# from launch.launch_description_sources import PythonLaunchDescriptionSource
# åˆ†ç»„ç›¸å…³
# from launch_ros.actions import PushRosNamespace
# from launch.actions import GroupAction
# äº‹ä»¶ç›¸å…³
# from launch.event_handlers import OnProcessStart,OnProcessExit
# from launch.actions import ExecuteProcess,RegisterEventHandler,LogInfo
# è·å–åŠŸèƒ½åŒ…ä¸‹shareç›®å½•æˆ–è·¯å¾„
from ament_index_python.packages import get_package_share_directory
import os

def generate_launch_description():
    robot_name_in_model = 'fishbot'
    package_name = 'fishbot_description'
    urdf_name = "fishbot_gazebo.urdf"

    pkg_share = get_package_share_directory(f"{package_name}")
    urdf_model_path = os.path.join(pkg_share, f'urdf/urdf/{urdf_name}')
    # gazebo_world_path = os.path.join(pkg_share, 'world/fishbot.world')

    # Start Gazebo server
    # start_gazebo_cmd = ExecuteProcess(
    #     cmd=['gazebo', '--verbose','-s', 'libgazebo_ros_init.so', '-s', 'libgazebo_ros_factory.so',gazebo_world_path],
    #     output='screen')
    start_gazebo_cmd = ExecuteProcess(
        cmd=['gazebo', '--verbose','-s', 'libgazebo_ros_init.so', '-s', 'libgazebo_ros_factory.so'],
        output='screen')
        
    # Launch the robot
    spawn_entity_cmd = Node(
        package='gazebo_ros', 
        executable='spawn_entity.py',
        arguments=['-entity', robot_name_in_model,  '-file', urdf_model_path ], output='screen')
    
    # Start Robot State publisher
    start_robot_state_publisher_cmd = Node(
        package='robot_state_publisher',
        executable='robot_state_publisher',
        arguments=[urdf_model_path]
    )

    # Launch RViz
    start_rviz_cmd = Node(
        package='rviz2',
        executable='rviz2',
        name='rviz2',
        output='screen',
        # arguments=['-d', default_rviz_config_path]
        )

    return LaunchDescription([start_gazebo_cmd,spawn_entity_cmd,start_robot_state_publisher_cmd,start_rviz_cmd])
```

ä¿å­˜ç¼–è¯‘å¯åŠ¨

```Python
colcon build
ros2 launch fishbot_description gazebo.launch.py
```

è¿™æ ·rviz2é‡Œå°±æœ‰æ¨¡å‹äº†ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTc1ODYwZGJjYjkwMjY4MDIyZmVmZDE3MzUxYmU3ZGZfdk1uaWtPRFlNWFM3R2puUlZDYkVNMTdRRGVVc0JHMXlfVG9rZW46T1MwNWIyTENUb0ZNclV4YU5xNGNLNEJFbjZnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å¯ä»¥ä¿å­˜ä¸‹rviz2çš„é…ç½®

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDExYTJiNTZmNmY3ZmJkY2IwOTI2ODVhMTU5OWQyNGFfUUVtdzVGTDZTRzZ2eVk5c2ZuRFg2NlFyWThPS1VlS0dfVG9rZW46RjBHZ2JrN0lHb3d0ZUt4MVZoaWNTcE5QbnhnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjQzNzEwYzgyZTNiZjg5NDQyZmE1YTY4NjYyY2I5YjhfVHVQZjJJTm1id3gwRXN2V3NlNEQ0RXl6bEdoNVg0MjlfVG9rZW46Q3k4VGIxVVNBb3lRTll4Qkl0RGNGR1dQbkxjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ç„¶ååœ¨launché‡Œæ·»åŠ ä¸Šrviz2çš„è·¯å¾„é…ç½®ï¼š

```Python
    default_rviz_config_path = os.path.join(pkg_share, 'rviz/rviz2.rviz')

    # Launch RViz
    start_rviz_cmd = Node(
        package='rviz2',
        executable='rviz2',
        name='rviz2',
        output='screen',
        arguments=['-d', default_rviz_config_path]
        )
```

å¦‚ä¸‹ä¸ºå…¨éƒ¨çš„launchï¼š

```python
from launch import LaunchDescription
from launch_ros.actions import Node

# å°è£…ç»ˆç«¯æŒ‡ä»¤ç›¸å…³ç±»
from launch.actions import ExecuteProcess
# from launch.substitutions import FindExecutable
# å‚æ•°å£°æ˜ä¸è·å–
# from launch.actions import DeclareLaunchArgument
# from launch.substitutions import LaunchConfiguration
# æ–‡ä»¶åŒ…å«ç›¸å…³
# from launch.actions import IncludeLaunchDescription
# from launch.launch_description_sources import PythonLaunchDescriptionSource
# åˆ†ç»„ç›¸å…³
# from launch_ros.actions import PushRosNamespace
# from launch.actions import GroupAction
# äº‹ä»¶ç›¸å…³
# from launch.event_handlers import OnProcessStart,OnProcessExit
# from launch.actions import ExecuteProcess,RegisterEventHandler,LogInfo
# è·å–åŠŸèƒ½åŒ…ä¸‹shareç›®å½•æˆ–è·¯å¾„
from ament_index_python.packages import get_package_share_directory
import os

def generate_launch_description():
    robot_name_in_model = 'fishbot'
    package_name = 'fishbot_description'
    urdf_name = "fishbot_gazebo.urdf"

    pkg_share = get_package_share_directory(f"{package_name}")
    urdf_model_path = os.path.join(pkg_share, f'urdf/urdf/{urdf_name}')
    # gazebo_world_path = os.path.join(pkg_share, 'world/fishbot.world')
    default_rviz_config_path = os.path.join(pkg_share, 'rviz/rviz2.rviz')

    # Start Gazebo server
    # start_gazebo_cmd = ExecuteProcess(
    #     cmd=['gazebo', '--verbose','-s', 'libgazebo_ros_init.so', '-s', 'libgazebo_ros_factory.so',gazebo_world_path],
    #     output='screen')
    start_gazebo_cmd = ExecuteProcess(
        cmd=['gazebo', '--verbose','-s', 'libgazebo_ros_init.so', '-s', 'libgazebo_ros_factory.so'],
        output='screen')
        
    # Launch the robot
    spawn_entity_cmd = Node(
        package='gazebo_ros', 
        executable='spawn_entity.py',
        arguments=['-entity', robot_name_in_model,  '-file', urdf_model_path ], output='screen')
    
    # Start Robot State publisher
    start_robot_state_publisher_cmd = Node(
        package='robot_state_publisher',
        executable='robot_state_publisher',
        arguments=[urdf_model_path]
    )

    # Launch RViz
    start_rviz_cmd = Node(
        package='rviz2',
        executable='rviz2',
        name='rviz2',
        output='screen',
        arguments=['-d', default_rviz_config_path]
        )

    return LaunchDescription([start_gazebo_cmd,spawn_entity_cmd,start_robot_state_publisher_cmd,start_rviz_cmd])
```

å¯ä»¥è‡ªè¡Œç¼–è¯‘æµ‹è¯•ã€‚

2.  #### æƒ¯æ€§è®¡IMU
    

ä¸ŠèŠ‚è¯¾é€šè¿‡é…ç½®ä¸¤è½®å·®é€Ÿæ§åˆ¶å™¨æˆ‘ä»¬å·²ç»æˆåŠŸçš„è®©fishbotåœ¨gazeboä¸­åŠ¨äº†èµ·æ¥ï¼Œæœ¬èŠ‚è¯¾æˆ‘ä»¬é€šè¿‡ç»™fishbotçš„URDFé…ç½®IMUä¼ æ„Ÿå™¨æ’ä»¶ï¼Œè®©IMUæ¨¡å—å·¥ä½œèµ·æ¥ã€‚

æƒ¯æ€§æµ‹é‡å•å…ƒæ˜¯æµ‹é‡ç‰©ä½“ä¸‰è½´å§¿æ€è§’(æˆ–è§’é€Ÿç‡)ä»¥åŠåŠ é€Ÿåº¦çš„è£…ç½®ã€‚ä¸€èˆ¬çš„ï¼Œä¸€ä¸ªIMUåŒ…å«äº†ä¸‰ä¸ªå•è½´çš„åŠ é€Ÿåº¦è®¡å’Œä¸‰ä¸ªå•è½´çš„é™€èºï¼ŒåŠ é€Ÿåº¦è®¡æ£€æµ‹ç‰©ä½“åœ¨è½½ä½“åæ ‡ç³»ç»Ÿç‹¬ç«‹ä¸‰è½´çš„åŠ é€Ÿåº¦ä¿¡å·ï¼Œè€Œé™€èºæ£€æµ‹è½½ä½“ç›¸å¯¹äºå¯¼èˆªåæ ‡ç³»çš„è§’é€Ÿåº¦ä¿¡å·ï¼Œæµ‹é‡ç‰©ä½“åœ¨ä¸‰ç»´ç©ºé—´ä¸­çš„è§’é€Ÿåº¦å’ŒåŠ é€Ÿåº¦ï¼Œå¹¶ä»¥æ­¤è§£ç®—å‡ºç‰©ä½“çš„å§¿æ€ã€‚åœ¨å¯¼èˆªä¸­æœ‰ç€å¾ˆé‡è¦çš„åº”ç”¨ä»·å€¼ã€‚

ä¸Šé¢è¿™æ®µè¯æ˜¯å°é±¼ä»ç™¾ç§‘ä¸­æ‘˜æŠ„å‡ºæ¥çš„ï¼Œä½ éœ€è¦çŸ¥é“çš„ä¸€ä¸ªå…³é”®ç‚¹æ˜¯IMUå¯ä»¥æµ‹é‡ä»¥ä¸‹ä¸‰ç»„æ•°æ®ï¼š

*   ä¸‰ç»´åŠ é€Ÿåº¦è®¡åŠ é€Ÿåº¦
    
*   ä¸‰ç»´é™€èºä»ªè§’é€Ÿåº¦
    
*   ä¸‰ç»´ç£åŠ›è®¡ï¼ˆæœ‰çš„ä¹Ÿæ²¡æœ‰ç£åŠ›è®¡ï¼‰
    

ç”¨å…­è½´ã€ä¹è½´ç®—æ³•æˆ–å…¶ä»–ç®—æ³•ç­‰å¯ä»¥è¾“å‡ºä¸‰è½´æ¬§æ‹‰è§’ï¼ˆYaw,Pitch,Rollï¼‰ï¼Œæ¬§æ‹‰è§’å¯ä»¥è½¬åŒ–ä¸ºå››å…ƒæ•°ã€‚

IMUé•¿å•¥æ ·ï¼Ÿç›´æ¥çº¿ä¸‹æ‰¾æ§åˆ¶ç»„è¦å°±è¡Œï¼Œä»–ä»¬ç»å¸¸ä¼šç©è¿™ä¸ªã€‚

ä¾¿å®œçš„é•¿è¿™æ ·ï¼ˆMPU6050,MPU9050ç­‰ï¼‰ï¼š

MPU6050æ˜¯å…­è½´çš„ï¼ŒMPU9050æ˜¯ä¹è½´çš„ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTY1MGEwYmMwZjU5MDRhZmU0MDYyNGUzMWNhNDhkYzZfa21VN2dHb2JObG5hR0NraDR4ZHg1UHdUYVJwbDNtRlBfVG9rZW46S0ZNc2JzcUM0bzdrbVd4SVJNbGM5UlFibk5nXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è´µçš„é•¿è¿™æ ·ï¼ˆHWT101CTï¼ŒHWT605ç­‰ï¼‰ï¼š

å…¶ä¸­HWT101CTæ˜¯ä¸‰è½´çš„ï¼ŒHWT605æ˜¯å…­è½´çš„ã€‚ï¼ˆå„æœ‰ä¼˜ç¼ºç‚¹ï¼‰

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmE0ZTE5NzVlNzYwNjU2NThlNmRiMDQyZjRjNGQ3NGJfYVZiZFhQbTVSeGhRS1h6TW13ZGFzNmxMMW1zYlh0U1FfVG9rZW46T0xsTWJteG9ab3JXZVB4b2oybGNpTXc5blhkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¸è¦é’±çš„é•¿ä»€ä¹ˆæ ·ï¼Ÿ

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWYwNmUwMTZjZTk4ZmIzZjMwZDViZDQwMDZiYjgxMjFfWkVXS3BZMjlLYkFvQktrYjZvRFVNbFZ2dmxTUlJnZUhfVG9rZW46S1Vab2JSRFhab0c5WVF4UDNYeGNVU2NUbk9jXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä»¿çœŸçš„ä¸è¦é’±å“ˆå“ˆï¼Œæ¥ç€æˆ‘ä»¬æ¥é…ç½®ä¸€ä¸‹ä»¿çœŸçš„IMUã€‚

  

IMUå¯¹åº”çš„æ¶ˆæ¯ç±»å‹ä¸º`sensor_msgs/msg/Imu`

ROSçš„imuä¿¡æ¯åªæœ‰ä¸‰è½´åŠ é€Ÿåº¦ï¼Œè§’é€Ÿåº¦å’Œå››å…ƒæ•°ã€‚ï¼ˆå¹¶æ²¡æœ‰ç£åŠ›è®¡å’Œæ¬§æ‹‰è§’ï¼Œç£åŠ›è®¡å¹¶éå¿…é¡»è¦å¡«çš„ï¼Œè€Œæ¬§æ‹‰è§’å’Œå››å…ƒæ•°å¯ä»¥äº’ç›¸è½¬æ¢ï¼Œå››å…ƒæ•°æ›´å¥½è¢«ç®—æ³•è¿ç®—ï¼Œæ‰€ä»¥é€‰æ‹©ç”¨å››å…ƒæ•°ï¼‰

å…·ä½“imuæ¥å£è¯·çœ‹ç¡¬ä»¶å¹³å°ç« èŠ‚ã€‚

å¯ä»¥çœ‹åˆ°é™¤äº†æ¯ä¸ªæ•°æ®å¯¹åº”çš„ä¸‰ä¸ªåæ–¹å·®ä¹‹å¤–ï¼Œæ¯ä¸€ä¸ªè¿˜éƒ½å¯¹åº”ä¸€ä¸ª`3*3`çš„åæ–¹å·®çŸ©é˜µã€‚

æœ‰äº†ä¸ŠèŠ‚è¯¾çš„ç»éªŒï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆè½»æ¾çš„æ·»åŠ IMUä¼ æ„Ÿå™¨ï¼Œä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œä¸ºäº†æ›´çœŸå®çš„æ¨¡æ‹ŸIMUä¼ æ„Ÿå™¨ï¼Œæˆ‘ä»¬éœ€è¦ç»™æˆ‘ä»¬çš„ä»¿çœŸIMUä¼ æ„Ÿå™¨åŠ ç‚¹æ–™ã€‚

åŠ ä»€ä¹ˆï¼ŸåŠ ç‚¹é«˜æ–¯å™ªå£°ï¼Œé«˜æ–¯å™ªå£°åªéœ€è¦æŒ‡å®šå¹³å‡å€¼å’Œæ ‡å‡†å·®ä¸¤ä¸ªå‚æ•°å³å¯ï¼Œä¸è¿‡å› ä¸ºIMUä¼ æ„Ÿå™¨çš„ç‰¹æ®Šæ€§ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç»™æ¨¡å‹æ·»åŠ ä¸¤ä¸ªåå·®å‚æ•°ï¼Œåˆ†åˆ«æ˜¯ `å¹³å‡å€¼åå·®`å’Œ`æ ‡å‡†å·®åå·®`ã€‚

æœ‰å…³Gazeboä»¿çœŸå’Œå™ªå£°æ¨¡å‹æ›´æ·±å…¥çš„ä»‹ç»å¯ä»¥å‚è€ƒé±¼é¦™ROSå‘çš„ä¸¤ç¯‡æ¨æ–‡ï¼š

*   [Gazeboä»¿çœŸè¿›é˜¶æ•™ç¨‹ä¹‹ä¼ æ„Ÿå™¨é«˜æ–¯å™ªå£°ï¼ˆä¸€ï¼‰](https://mp.weixin.qq.com/s/0-OEATkyfMf6wEyrP5csGw)
    
*   [Gazeboä»¿çœŸè¿›é˜¶æ•™ç¨‹ä¹‹ä¼ æ„Ÿå™¨é«˜æ–¯å™ªå£°ï¼ˆäºŒï¼‰](https://mp.weixin.qq.com/s/5k1SEGdASjUMbwWdSpf1PQ)
    

ä¸‹é¢æ˜¯IMUä¼ æ„Ÿå™¨çš„URDFé…ç½®ä»£ç ï¼Œå¤§å®¶ç»“åˆæ–‡ç« å¯¹åº”å¯ä»¥ç†è§£ä¸€ä¸‹ï¼ŒIMUå¯¹åº”çš„æ’ä»¶åº“`libgazebo_ros_imu_sensor.so`ï¼š

```xml
    <gazebo reference="imu_link">
      <sensor name="imu_sensor" type="imu">
      <plugin filename="libgazebo_ros_imu_sensor.so" name="imu_plugin">
          <ros>
            <namespace>/</namespace>
            <remapping>~/out:=imu</remapping>
          </ros>
          <initial_orientation_as_reference>false</initial_orientation_as_reference>
        </plugin>
        <always_on>true</always_on>
        <update_rate>100</update_rate>
        <visualize>true</visualize>
        <imu>
          <angular_velocity>
            <x>
              <noise type="gaussian">
                <mean>0.0</mean>
                <stddev>2e-4</stddev>
                <bias_mean>0.0000075</bias_mean>
                <bias_stddev>0.0000008</bias_stddev>
              </noise>
            </x>
            <y>
              <noise type="gaussian">
                <mean>0.0</mean>
                <stddev>2e-4</stddev>
                <bias_mean>0.0000075</bias_mean>
                <bias_stddev>0.0000008</bias_stddev>
              </noise>
            </y>
            <z>
              <noise type="gaussian">
                <mean>0.0</mean>
                <stddev>2e-4</stddev>
                <bias_mean>0.0000075</bias_mean>
                <bias_stddev>0.0000008</bias_stddev>
              </noise>
            </z>
          </angular_velocity>
          <linear_acceleration>
            <x>
              <noise type="gaussian">
                <mean>0.0</mean>
                <stddev>1.7e-2</stddev>
                <bias_mean>0.1</bias_mean>
                <bias_stddev>0.001</bias_stddev>
              </noise>
            </x>
            <y>
              <noise type="gaussian">
                <mean>0.0</mean>
                <stddev>1.7e-2</stddev>
                <bias_mean>0.1</bias_mean>
                <bias_stddev>0.001</bias_stddev>
              </noise>
            </y>
            <z>
              <noise type="gaussian">
                <mean>0.0</mean>
                <stddev>1.7e-2</stddev>
                <bias_mean>0.1</bias_mean>
                <bias_stddev>0.001</bias_stddev>
              </noise>
            </z>
          </linear_acceleration>
        </imu>
      </sensor>
    </gazebo>
```

æˆ‘ä»¬ä¹‹å‰ä¸‹è½½çš„fishbotå·²ç»åŒ…å«è¯¥å†…å®¹äº†ï¼Œæ‰€ä»¥ä¸ç”¨å†æ·»åŠ äº†ï¼Œç›´æ¥è¿è¡Œå³å¯ã€‚

```Python
ros2 launch fishbot_description gazebo.launch.py
```
```Python
ros2 topic list
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTUxMDk5OTBhN2I2NmYzNTkzNjQ0NjMzMzc3MDA3YTZfUEp5VlhxeEhTdUp6aGNvRXZlQ2ExNjEwd2RhM1k5T2RfVG9rZW46QW0zS2JQdzVlb2ZBMm14WkJKZmNxVml1bm1oXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Python
ros2 topic info /imu
ros2 topic echo /imu
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmNmMDJhMzMxY2ZiMGI4NTQzOWI2ZWI1MjJjYjNjOWFfbEVPb2phQmJlc2t1WVo4T25hTmJMYXNSaU84elVmN0VfVG9rZW46Wms3TmI0Z1dXb1l2U2h4Mmx5ZmNScEk5bkNkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjQ5ZjE0MTJiYTQ3MmMwZGU3YjM3OWZlMGFjZjU0OTBfbmJuaXlzWEJJWjRmTzZrZzhyQ0FPMnFleFBkQmNtR0FfVG9rZW46SjR3MmJaYk5nbzlzYWV4T1ZpY2NuVTlGbm5mXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```yaml
header:
  stamp:
    sec: 150
    nanosec: 599000000
  frame_id: base_footprint
orientation:
  x: 3.434713830866392e-07
  y: 7.119913105768616e-06
  z: -0.00028312437320413914
  w: 0.9999999598948884
orientation_covariance:
- 0.0
- 0.0
- 0.0
- 0.0
- 0.0
- 0.0
- 0.0
- 0.0
- 0.0
angular_velocity:
  x: -0.00013597855247901325
  y: 0.0006306135617081868
  z: -0.00015794894627685146
angular_velocity_covariance:
- 4.0e-08
- 0.0
- 0.0
- 0.0
- 4.0e-08
- 0.0
- 0.0
- 0.0
- 4.0e-08
linear_acceleration:
  x: 0.08679200038530369
  y: 0.07753419258567491
  z: 9.687910969061628
linear_acceleration_covariance:
- 0.00028900000000000003
- 0.0
- 0.0
- 0.0
- 0.00028900000000000003
- 0.0
- 0.0
- 0.0
- 0.00028900000000000003

```

ç”¨rqtå¯è§†åŒ–ï¼š

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Zjk1NDRkNDg2MTM3ODYxZDllNTA3OWZjNzM0MDdmNWFfdEFnc0U3ejNJalJaVFpNbDNNWGFVVmpKcFRWcFhLZlJfVG9rZW46S0VSMWJWeDlrb3Jmb254RXlvRmM4cVB2bnNmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

3.  #### é›·è¾¾Laser
    

æœ¬èŠ‚æˆ‘ä»¬æ¥è®¤è¯†ä¸€ä¸ªæ–°çš„ä¼ æ„Ÿå™¨ï¼Œè¯¥ä¼ æ„Ÿå™¨åœ¨è‡ªåŠ¨é©¾é©¶ã€å®¤å†…å¯¼èˆªç­‰åº”ç”¨éå¸¸å¤šï¼Œæ¯”å¦‚æ‰«åœ°æœºå™¨äººä¸Šå°±æ˜¯ç”¨çš„å®ƒä½œä¸ºæ„ŸçŸ¥ç¯å¢ƒçš„é‡è¦å·¥å…·ï¼Œè¯¥ä¼ æ„Ÿå™¨æ˜¯æ¿€å…‰é›·è¾¾ã€‚

æ¿€å…‰é›·è¾¾ï¼ˆLight Detection And Rangingï¼‰,ç¼©å†™`LiDAR`ï¼Œè‹±æ–‡ä¹Ÿå«laser,ç¿»è¯‘ä¸€ä¸‹å«â€”â€”æ¿€å…‰æ¢æµ‹ä¸æµ‹è·ã€‚

æ¿€å…‰é›·è¾¾çš„åŸç†ä¹Ÿå¾ˆç®€å•ï¼Œå°±åƒè™è çš„å®šä½æ–¹æ³•ä¸€æ ·ï¼Œè™è å®šä½å¤§å®¶éƒ½çŸ¥é“å§ï¼Œåƒä¸‹é¢è¿™æ ·å­çš„å›å£°å®šä½ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTAyZTg0ZWQ5MjZkZWVmMGE5OTMwNmNmYjEwNmMyZDNfS2p6YVlaY3FJUUFLZUdCendQb2hFSlEzQndPZDNEZjdfVG9rZW46TnNaemJGWUYzb2dZdHh4UERsemNYaU1LbklOXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ™®é€šçš„å•çº¿æ¿€å…‰é›·è¾¾ä¸€èˆ¬æœ‰ä¸€ä¸ªå‘å°„å™¨ï¼Œä¸€ä¸ªæ¥æ”¶å™¨ï¼Œå‘å°„å™¨å‘å‡ºæ¿€å…‰å°„çº¿åˆ°å‰æ–¹çš„ç›®æ ‡ä¸Šï¼Œç‰©å“ä¼šå°†æ¿€å…‰åå°„å›æ¥ï¼Œç„¶åæ¿€å…‰é›·è¾¾çš„æ¥å—å™¨å¯ä»¥æ£€æµ‹åˆ°åå°„çš„æ¿€å…‰ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGM5Mjg5MjBiNTdlYjVhNmFkYWExOThkMGQ2NjNjMDBfbGREcFF1WXBLVTdnQnZTSkFNVktCVXl5Z2xzRUtlM3JfVG9rZW46RGhGVmJyOWRRb09HMFV4eE5ZWGNFVmdlblRiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

é€šè¿‡è®¡ç®—å‘é€å’Œåé¦ˆä¹‹é—´çš„æ—¶é—´é—´éš”ï¼Œä¹˜ä¸Šæ¿€å…‰çš„é€Ÿåº¦ï¼Œå°±å¯ä»¥è®¡ç®—å‡ºæ¿€å…‰é£è¡Œçš„è·ç¦»ï¼Œè¯¥è®¡ç®—æ–¹æ³•æˆä¸ºTOFï¼ˆé£è¡Œæ—¶é—´æ³•Time of flightï¼Œä¹Ÿç§°æ—¶å·®æ³•ï¼‰ã€‚

é™¤äº†TOFä¹‹å¤–è¿˜æœ‰å…¶ä»–æ–¹æ³•è¿›è¡Œæµ‹è·ï¼Œæ¯”å¦‚ä¸‰è§’æ³•ï¼Œè¿™é‡Œå°±ä¸æ‹“å±•äº†æ”¾ä¸€ç¯‡æ–‡ç« ï¼Œå¤§å®¶è‡ªè¡Œé˜…è¯»ã€‚[æ¿€å…‰ä¸‰è§’æµ‹è·åŸç†è¯¦è¿°](https://www.slamtec.com/cn/News/Detail/190)

ç›®å‰å¸‚é¢ä¸Šçš„æ¿€å…‰é›·è¾¾ï¼Œå‡ ä¹éƒ½æ˜¯é‡‡ç”¨ä¸‰è§’æµ‹è·ï¼Œæ¯”å¦‚æ€å²šçš„ï¼š

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmNmNDA3Zjg3NWVlNzI1MjJhZTRmN2ZiZDQ3ZTgzODRfcDFqUjNKdHBsU0FZWlY4Szczcjg0Q1hhNUZjRlg4aGpfVG9rZW46TWxpZWIxYnFyb3BkWW54alFNYWN2Ymd4bk5jXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

éœ€è¦æ³¨æ„çš„æ˜¯è™½ç„¶åªæœ‰ä¸€ä¸ªå‘å°„å™¨å’Œä¸€ä¸ªæ¥å—å™¨ï¼Œæ¿€å…‰é›·è¾¾é€šè¿‡ç”µæœºå¯ä»¥è¿›è¡Œæ—‹è½¬ï¼Œè¿™æ ·å°±å¯ä»¥è¾¾åˆ°å¯¹å‘¨å›´ç¯å¢ƒ360åº¦æµ‹è·çš„ç›®çš„ã€‚

  

äº”ä½æ•°çš„é•¿è¿™æ ·ï¼š

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTVjYWNkN2ZmY2YyNGQ4Yzk5N2RmOGE4YzRjODVlNGFfWVF2UDg1bzQ5VTNQQzdMZVc1RjJabWQ3MUxvcGJCSThfVG9rZW46S3BYZ2JIbWRHb0VRNm94TEVWd2NneEFIbldnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å››ä½æ•°çš„é•¿è¿™æ ·ï¼ˆå’±ä»¬æœ‰ä¸€å°ï¼‰

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2NmMzYxZDUyZjU2YTVmMDk5MzA1Y2E1YzhiOGY2MzZfWkgzOThPOWhzQmd4R3l2c2I4TjdDeXIyUUs2WjZIVFVfVG9rZW46TmtiamJrTXRqb0VpRUp4NkIxeGNjQ1JtbjFmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¸‰ä½æ•°çš„é•¿è¿™æ ·ï¼ˆå’±ä»¬ä¹Ÿæœ‰ï¼‰

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWMyYTJmN2M1ZjU1ZWRjN2U4MGFmYWJhN2E1NmJhZWVfbGhtSm5mZUZGTUN0Z3lFb3kwR1BmTlpuelBVM2JPYTBfVG9rZW46S3lONGJzWlNKb08zTnp4cmhSQWM4b1kwbjVzXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¸¤ä½æ•°çš„é•¿è¿™æ ·

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzUyYzcxMTU2YmM1MDdlYzVmYzk0ZWMwYzU1MGIzODNfVDNGNHQ3d09JR0lhS3lqc1c5Rkg4OXQ1cEN6TFRMVTRfVG9rZW46Tk5TRmJldjhtb0xUQ3l4emxCTWNNQXNMblBmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¸è¦é’±çš„é•¿è¿™æ ·

ä»¿çœŸçš„ï¼Œä¸è¦é’±

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDNkMDY3NGRlMWZiZTBjYmI1MmJiMTYxZDZhNjE5ZTVfZTdPQWtjM1E2dlVBSmJ5cXQ1RVFkRldaa2d5Zmh5MHVfVG9rZW46QUhOc2JaR3h3b3BwaDh4NXloMWNNcXFybk5lXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å› ä¸ºæ¿€å…‰é›·è¾¾æ˜¯å±äºå°„çº¿ç±»ä¼ æ„Ÿå™¨ï¼Œè¯¥ç±»ä¼ æ„Ÿåœ¨åœ¨Gazeboæ’ä»¶ä¸­éƒ½è¢«å°è£…æˆäº†ä¸€ä¸ªåŠ¨æ€åº“`libgazebo_ros_ray_sensor.so`ã€‚

æ¥ç€æˆ‘ä»¬æ¥çœ‹çœ‹LiDARçš„è¯é¢˜æ¶ˆæ¯æ¥å£`sensor_msgs/msg/LaserScan`ã€‚

é›·è¾¾çš„æ•°æ®ç»“æ„æœ‰äº›å¤æ‚ï¼Œä½†é€šè¿‡æ³¨é‡Šå’Œåå­—ç›¸ä¿¡ä½ å¯ä»¥çœ‹çš„ä¸ƒä¸ƒå…«å…«ï¼Œçœ‹ä¸æ‡‚ä¹Ÿæ²¡å…³ç³»ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬ä¸ä¼šç›´æ¥çš„å¯¹é›·è¾¾çš„æ•°æ®åšæ“ä½œã€‚

  

é›·è¾¾çš„æ¨¡å‹ä¸éœ€è¦collisionï¼Œè¯·åˆ æ‰ï¼Œå¦åˆ™ä¼šæŒ¡æ¿€å…‰å°„å‡ºã€‚

  

æœ‰äº†å‰é¢çš„ç»éªŒï¼Œæˆ‘ä»¬éœ€è¦åœ¨URDFæ·»åŠ ä»¥ä¸‹å†…å®¹å³å¯ï¼Œä½†æˆ‘ä»¬ä¸‹è½½çš„æ˜¯é±¼é¦™ROSæ·»åŠ å¥½çš„ï¼Œæ‰€ä»¥ä¸ç”¨æ”¹äº†ï¼š

```xml
  <gazebo reference="laser_link">
      <sensor name="laser_sensor" type="ray">
      <always_on>true</always_on>
      <visualize>true</visualize>
      <update_rate>10</update_rate>
      <pose>0 0 0.075 0 0 0</pose>
      <ray>
          <scan>
            <horizontal>
              <samples>360</samples>
              <resolution>1.000000</resolution>
              <min_angle>0.000000</min_angle>
              <max_angle>6.280000</max_angle>
            </horizontal>
          </scan>
          <range>
            <min>0.120000</min>
            <max>3.5</max>
            <resolution>0.015000</resolution>
          </range>
          <noise>
            <type>gaussian</type>
            <mean>0.0</mean>
            <stddev>0.01</stddev>
          </noise>
      </ray>

      <plugin name="laserscan" filename="libgazebo_ros_ray_sensor.so">
        <ros>
          <remapping>~/out:=scan</remapping>
        </ros>
        <output_type>sensor_msgs/LaserScan</output_type>
        <frame_name>laser_link</frame_name>
      </plugin>
      </sensor>
    </gazebo>
```

å¯ä»¥çœ‹åˆ°:

1.  é›·è¾¾ä¹Ÿå¯ä»¥è®¾ç½®æ›´æ–°é¢‘ç‡`update_rate`ï¼Œè¿™é‡Œè®¾ç½®ä¸º5
    
2.  é›·è¾¾å¯ä»¥è®¾ç½®åˆ†è¾¨ç‡ï¼Œè®¾ç½®ä¸º1ï¼Œé‡‡æ ·æ•°é‡360ä¸ªï¼Œæœ€ç»ˆç”Ÿæˆçš„ç‚¹äº‘æ•°é‡å°±æ˜¯360
    
3.  é›·è¾¾ä¹Ÿæœ‰å™ªå£°ï¼Œæ¨¡å‹ä¸º`gaussian`
    
4.  é›·è¾¾æœ‰æ‰«æèŒƒå›´`range`ï¼Œè¿™é‡Œé…ç½®æˆ0.12-3.5ï¼Œ0.015åˆ†è¾¨ç‡
    
5.  é›·è¾¾çš„`pose`å°±æ˜¯é›·è¾¾çš„jointä¸­ä½ç½®çš„è®¾ç½®å€¼
    

ä¸‹é¢è¿™ä¸ªè“è‰²çš„å°±æ˜¯æ¿€å…‰é›·è¾¾çš„å…‰çº¿è¦†ç›–èŒƒå›´ï¼š

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmQ5ZTE4MDBkMzg4M2QwNjc5ODA0NzUxNDYyNmZmZGJfYlNkWm1lNFZvbnBXbnZyYWRNZk1LQnh1Vng4eW9PNE9fVG9rZW46QUJNV2JrTVNmb3dMdEh4S2h6QWNTU3lwbndmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Python
ros2 topic list
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTI1ZDE0OTZkYTBjMDExODZjNzI5OGEzZjYwNjgwODRfVVltakZiam5QT3hoNjhHeU96dFlacVVYcVRKeFp0cXZfVG9rZW46V2doNGI0UkVab2tFRUJ4NmdGUmNEejBYblNjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Python
ros2 topic info /scan
ros2 topic echo /scan
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODVhMmJkMDVjNDI3ZDZiNDU5YTFmMzcyYzc1NDFkZjhfd0VRNDdiMzRLdlUyNm5XdHNZSEwyNjZOcVJ5d2R0bHJfVG9rZW46RG5NcWJGcW1jb1E5OEd4MmUzaGNSdlR6bmJjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ¥ç€æˆ‘ä»¬å°è¯•ä½¿ç”¨rviz2è¿›è¡Œå¯è§†åŒ–æ¿€å…‰é›·è¾¾æ•°æ®

æ·»åŠ å’Œä¿®æ”¹RVIZ2çš„å¦‚ä¸‹ï¼šï¼ˆé€šè¿‡LaserScanæ’ä»¶å¯ä»¥çœ‹åˆ°æ¿€å…‰æ•°æ®ï¼‰

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDFmNmFjZWNkNDQyMDczNzEwY2EzZjM3MTRkNTc4ODJfakpQM1hHaWJPY3o3cm5kelJlQnFLUVZuY3Brekd0dk5fVG9rZW46U0t0M2JNcmdtbzZvcEN4VjROcWM1SnY1bldnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ç›¸ä¿¡ä½ æ”¹å®Œä¹‹åä¾ç„¶æ˜¯çœ‹ä¸åˆ°ä»»ä½•æ¿€å…‰é›·è¾¾çš„æ•°æ®çš„ï¼Œåçœ‹topicçš„echoå‡ºæ¥çš„æ•°æ®ï¼Œä¸æ˜¯0å°±æ˜¯inf(æ— é™å¤§)ï¼Œå†çœ‹çœ‹gazeboä½ ä¼šå‘ç°ï¼Œæ¿€å…‰é›·è¾¾å¹¶æ²¡æœ‰è¾¾åˆ°ä»»ä½•ä¸€ä¸ªç‰©ä½“ä¸Šã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDBhYzY5OWQ2YWQ4NzQ4Yzg4ZGMyOWM4ZWE4YmM4NDFfRk51bVNtOGRlcTRnN2YzaU83bXFjVm9DVEFDaURiSGNfVG9rZW46Qm1ZamI1a1ZKb0JZejR4UTM4bGNiemYybmNnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨çš„ç»™æ¿€å…‰é›·è¾¾å‘¨å›´æ·»åŠ ä¸€ä¸‹ä¸œè¥¿ï¼Œç‚¹å‡»Gazeboå·¥å…·æ çš„æ­£æ–¹ä½“ï¼Œåœ†çƒæˆ–è€…åœ†æŸ±ï¼Œéšæ„æ”¾ç½®å‡ ä¸ªåˆ°æˆ‘ä»¬æ¿€å…‰é›·è¾¾çš„æœ€å¤§æ‰«æåŠå¾„å†…ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWUxZThiMDgyY2M2NjA3MWI5Yzk0ZjMxNWI0YTNlNjNfazhNclJxNFdVNGVhcGE2djMyVFlrYUhYNGR2Z3R0ZWJfVG9rZW46Vjhaa2JUS1JOb1pEQjB4TGxLY2NzaG41bkxnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Yjc1YmJiZGFiZGM5NDg4ZmM2M2MzYmFlOWVlYjYzY2NfREFXamcxOEpKWDZ3MkVIelBWSGlnckd6NVdnbUJtVGNfVG9rZW46TWlkMGJFVU03b0ltMEh4S003Q2NMQnlObnhmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzY5MjlkNTY0MzQ2OGRlNDQ5OGU1NzYyYWUxMzc5ZmRfWW5PTmVYVkswdTZJT1M2NzNnN0c0ZnFUZURmQUw5VjlfVG9rZW46RVhBY2JPVDRWbzZCMXp4VDJRN2NDdkxzbjVlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

4.  #### è¶…å£°æ³¢Ultrasonic
    

è¿™ç©æ„å¯¹äºROS2ç®—æ³•æ„ä¹‰ä¸æ˜¯å¾ˆå¤§ï¼Œæ§åˆ¶ç»„ç›´æ¥åœ¨MCUä¸Šå®ç°å³å¯ï¼Œæœ‰éœ€æ±‚å¯ä»¥å­¦æœ¬èŠ‚ã€‚ **ï¼ˆå¯ä»¥è·³è¿‡æœ¬èŠ‚ï¼‰**

åœ¨å®é™…çš„æœºå™¨äººå¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šåˆ©ç”¨è¶…å£°æ³¢ä¼ æ„Ÿå™¨å®ç°å®æ—¶é¿éšœçš„åŠŸèƒ½ï¼Œæ¯•ç«Ÿè¶…å£°æ³¢çš„ä»·æ ¼ç›¸è¾ƒäºæ¿€å…‰é›·è¾¾è¦ä¾¿å®œå¾ˆå¤šï¼ˆä¾¿å®œçš„å‡ å—é’±ï¼‰ã€‚

æ‰€ä»¥æœ¬èŠ‚æˆ‘ä»¬æ¥è¯´ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨ROS2+Gazeboæ¥ä»¿çœŸè¶…å£°æ³¢ä¼ æ„Ÿå™¨ã€‚

ç™¾ç§‘æ¥ä¸€æ®µï¼š

è¶…å£°æ³¢ä¼ æ„Ÿå™¨æ˜¯å°†è¶…å£°æ³¢ä¿¡å·è½¬æ¢æˆå…¶å®ƒèƒ½é‡ä¿¡å·ï¼ˆé€šå¸¸æ˜¯ç”µä¿¡å·ï¼‰çš„ä¼ æ„Ÿå™¨ã€‚è¶…å£°æ³¢æ˜¯[æŒ¯åŠ¨é¢‘ç‡](https://baike.baidu.com/item/%E6%8C%AF%E5%8A%A8%E9%A2%91%E7%8E%87/8068137)é«˜äº20kHzçš„æœºæ¢°æ³¢ã€‚å®ƒå…·æœ‰é¢‘ç‡é«˜ã€æ³¢é•¿çŸ­ã€ç»•å°„ç°è±¡å°ï¼Œç‰¹åˆ«æ˜¯æ–¹å‘æ€§å¥½ã€èƒ½å¤Ÿæˆä¸º[å°„çº¿](https://baike.baidu.com/item/%E5%B0%84%E7%BA%BF/327964)è€Œå®šå‘ä¼ æ’­ç­‰ç‰¹ç‚¹ã€‚è¶…å£°æ³¢å¯¹æ¶²ä½“ã€å›ºä½“çš„ç©¿é€æœ¬é¢†å¾ˆå¤§ï¼Œå°¤å…¶æ˜¯åœ¨é˜³å…‰ä¸é€æ˜çš„å›ºä½“ä¸­ã€‚è¶…å£°æ³¢ç¢°åˆ°æ‚è´¨æˆ–åˆ†ç•Œé¢ä¼šäº§ç”Ÿæ˜¾è‘—åå°„å½¢æˆåå°„å›æ³¢ï¼Œç¢°åˆ°æ´»åŠ¨ç‰©ä½“èƒ½äº§ç”Ÿ[å¤šæ™®å‹’æ•ˆåº”](https://baike.baidu.com/item/%E5%A4%9A%E6%99%AE%E5%8B%92%E6%95%88%E5%BA%94/115710)ã€‚è¶…å£°æ³¢ä¼ æ„Ÿå™¨å¹¿æ³›åº”ç”¨åœ¨å·¥ä¸šã€å›½é˜²ã€ç”Ÿç‰©åŒ»å­¦ç­‰æ–¹é¢ã€‚

æ¥ç€çœ‹çœ‹é•¿ä»€ä¹ˆæ ·å­ï¼š

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTY5MjExNzY4ZWU5ZTA0NWQ0MWI2YzVjNTRlNjI4ZWVfY29pb0dSQXNkM0diYWRDUUhPV0hjeGwzSjAxU21OdGhfVG9rZW46VHdnSGJwbXRVb2ZoMjR4ek5NMGNVNUlYbjNkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¾¿å®œçš„å°±é•¿è¿™æ ·å­ï¼Œä¸€å…±ä¸¤ä¸ªå¤´ï¼Œä¸€ä¸ªå¤´ç”¨äºå‘é€æ³¢ï¼Œä¸€ä¸ªå¤´æ¥æ”¶æ³¢ã€‚è¿™ä¸ªè¿˜ç¨å¾®é«˜çº§ä¸€ç‚¹ï¼Œå¸¦ä¸€ä¸ªå…‰æ•ç”µé˜»ï¼Œå¯ä»¥ä¸ºè¶…å£°æ³¢æ•°æ®åšä¸€äº›è¡¥å¿ã€‚

è¶…å£°æ³¢ä¼ æ„Ÿå™¨åŸç†æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWI2MjM1ZWQ0YzQwZDRkMGUxODc0NjFjNjc4ODk0MTBfdjhDUGxjdjR1UUFZUFZMUU1XMGU3MUJ2eUZ1RGpjQjlfVG9rZW46V0V2UmJiZEZsb1BoMkh4aXZraWNFaHVIbnpkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Plain Text
è·ç¦»=(å‘é€æ—¶é—´-æ¥æ”¶æ—¶é—´)*é€Ÿåº¦/2Copy to clipboardErrorCopied
```

çœ‹äº†è¶…å£°æ³¢çš„åŸç†ï¼Œä½ æœ‰æ²¡æœ‰å‘ç°å’Œå‰é¢çš„æ¿€å…‰é›·è¾¾ä¼ æ„Ÿå™¨æ˜¯ä¸€æ ·çš„ï¼Œæ˜¯çš„ï¼Œæ‰€ä»¥è¶…å£°æ³¢ä¼ æ„Ÿå™¨æ’ä»¶å’Œæ¿€å…‰é›·è¾¾ä¼ æ„Ÿå™¨æ’ä»¶åœ¨Gazeboæ’ä»¶ä¸­æ˜¯åŒä¸€ä¸ªï¼š

```Plain Text
libgazebo_ros_ray_sensor.so
```

è¶…å£°æ³¢æ€»è¦è£…åœ¨æœºå™¨äººèº«ä¸ŠæŸä¸ªä½ç½®ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆæ·»åŠ ä¸€ä¸ªå…³èŠ‚å’ŒJointï¼Œä¸ºäº†çœäº‹ï¼Œlinkæˆ‘ä»¬å°±åªå†™ä¸ªåå­—ï¼Œä½ å¦‚æœæœ‰éœ€è¦å¯ä»¥æŒ‰ç…§å‰é¢çš„ç« èŠ‚é‚£æ ·æ·»åŠ ä¸€ä¸‹ã€‚

```xml
  <link name="ultrasonic_sensor_link" />

  <joint name="ultrasonic_sensor_joint" type="fixed">
    <parent link="base_link"/>
    <child link="ultrasonic_sensor_link"/>
    <origin xyz="0.07 0.0 0.076" rpy="0 0 0"/>
  </joint>
```

æ·»åŠ å®Œäº†å…³èŠ‚ï¼Œæˆ‘ä»¬å°±å¯ä»¥é…ç½®gazeboçš„æ’ä»¶äº†ï¼Œgazeboæ’ä»¶é…ç½®å¦‚ä¸‹

```xml
  <gazebo reference="ultrasonic_sensor_link">
    <sensor type="ray" name="ultrasonic_sensor">
      <pose>0 0 0 0 0 0</pose>
      <!-- æ˜¯å¦å¯è§†åŒ–ï¼Œgazeboé‡Œèƒ½ä¸èƒ½çœ‹åˆ° -->
      <visualize>true</visualize>
      <!-- æ‰«æé€Ÿç‡ï¼Œä¹Ÿå°±æ˜¯æ•°æ®æ›´æ–°é€Ÿç‡ -->
      <update_rate>5</update_rate>
      <ray>
        <scan>
          <!-- æ°´å¹³æ‰«æçš„ç‚¹æ•° -->
          <horizontal>
            <samples>5</samples>
            <resolution>1</resolution>
            <min_angle>-0.12</min_angle>
            <max_angle>0.12</max_angle>
          </horizontal>
          <!-- å‚ç›´æ–¹å‘æ‰«æçš„ç‚¹æ•° -->
          <vertical>
            <samples>5</samples>
            <resolution>1</resolution>
            <min_angle>-0.01</min_angle>
            <max_angle>0.01</max_angle>
          </vertical>
        </scan>
        <!-- è¶…å£°æ³¢æ£€æµ‹çš„èŒƒå›´å’Œæ•°æ®åˆ†è¾¨ç‡å•ä½m -->
        <range>
          <min>0.02</min>
          <max>4</max>
          <resolution>0.01</resolution>
        </range>
        <!-- æ•°æ®å™ªå£°é‡‡ç”¨é«˜æ–¯å™ªå£° -->
        <noise>
          <type>gaussian</type>
          <mean>0.0</mean>
          <stddev>0.01</stddev>
        </noise>
      </ray>
      <plugin name="ultrasonic_sensor_controller" filename="libgazebo_ros_ray_sensor.so">
        <ros>
          <!-- é‡æ˜ å°„è¾“å‡ºçš„è¯é¢˜åç§° -->
          <remapping>~/out:=ultrasonic_sensor_1</remapping>
        </ros>
        <!-- è¾“å‡ºæ¶ˆæ¯çš„ç±»å‹ï¼Œæ³¨æ„ä¸é›·è¾¾åŒºåˆ†ï¼Œè¿™é‡Œæ˜¯sensor_msgs/Range -->
        <output_type>sensor_msgs/Range</output_type>
        <!-- å°„çº¿ç±»å‹ï¼Œè¿™é‡Œè¦å†™ultrasoundï¼Œæ³¨æ„å’Œé›·è¾¾åŒºåˆ† -->
        <radiation_type>ultrasound</radiation_type>
        <!-- frameåç§°ï¼Œå¡«å†™linkåç§°å³å¯ -->
        <frame_name>ultrasonic_sensor_link</frame_name>
      </plugin>
    </sensor>
  </gazebo>

```

æ·»åŠ å®Œæˆåå°±å¯ä»¥ç¼–è¯‘æµ‹è¯•ä¸‹ä»£ç 

```Python
colcon build --packages-select fishbot_description
source install/setup.bash
ros2 launch fishbot_description gazebo.launch.py
```

æ²¡æœ‰ç‰©ä½“çš„å‰é¢å¯ä»¥æ”¾ä¸ªä¸œè¥¿

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWEwMDk2ODhkNTYxOWYyYzI5NTVmZTE5OGJjMDVhNWRfQUJmUWhTdHJpVGVoRGI5dHQweEZydVI5MjA5RVR3S2tfVG9rZW46SWZTRmJaYlA4b1RhVGt4Ym53M2NZMHVRbmdlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥ä¸‹é¢æŒ‡ä»¤

```Plain Text
ros2 topic list 
ros2 topic info /ultrasonic_sensor_1
ros2 topic echo /ultrasonic_sensor_1Copy to clipboardErrorCopied
```

ä¸å‡ºæ„å¤–å¯ä»¥çœ‹åˆ°ä¸‹é¢çš„æ•°æ®

```Plain Text
header:
  stamp:
    sec: 4458
    nanosec: 1000000
  frame_id: ultrasonic_sensor_link
radiation_type: 0
field_of_view: 0.23999999463558197
min_range: 0.019999999552965164
max_range: 4.0
range: 2.6798219680786133
```

è¿™é‡Œçš„rangeå°±æ˜¯fishbotåˆ°å¢™ä¹‹é—´çš„è·ç¦»ï¼š2.67982

æˆ‘ä»¬æ¥è®²ä¸€è®²è¶…å£°æ³¢ä¼ æ„Ÿå™¨çš„æ•°æ®ç±»å‹`sensor_msgs/msg/Range`

```Python
# ros2 topic info /ultrasonic_sensor_1
Type: sensor_msgs/msg/Range
Publisher count: 1
Subscription count: 0

```

ä½ å¯ä»¥ä½¿ç”¨`ros2 interface show sensor_msgs/msg/Range`çœ‹åˆ°è¯¦ç»†çš„è§£é‡Šï¼Œæˆ‘ä»¬ç¿»è¯‘ä¸€ä¸‹

```python
# Single range reading from an active ranger that emits energy and reports
# one range reading that is valid along an arc at the distance measured.
# This message is  not appropriate for laser scanners. See the LaserScan
# message if you are working with a laser scanner.
#
# This message also can represent a fixed-distance (binary) ranger.  This
# sensor will have min_range===max_range===distance of detection.
# These sensors follow REP 117 and will output -Inf if the object is detected
# and +Inf if the object is outside of the detection range.

std_msgs/Header header # timestamp in the header is the time the ranger
                             # returned the distance reading

# Radiation type enums
# If you want a value added to this list, send an email to the ros-users list
uint8 ULTRASOUND=0
uint8 INFRARED=1

uint8 radiation_type    # ä¼ æ„Ÿå™¨å°„çº¿ç±»å‹
                        # (sound, IR, etc) [enum]

float32 field_of_view   # è·ç¦»æ•°æ®å¯¹åº”çš„å¼§[rad]çš„å¤§å°ï¼Œæµ‹é‡ç‰©ä½“çš„èŒƒå›´ä»‹äº         
                        # -field_of_view/2 åˆ° field_of_view/2 ä¹‹é—´ã€‚
                        # 0 è§’åº¦å¯¹åº”äºä¼ æ„Ÿå™¨çš„ x è½´ã€‚

float32 min_range       # æœ€å°èŒƒå›´å€¼ [m]
float32 max_range       # æœ€å¤§èŒƒå›´å€¼ [m]
                        #  å›ºå®šè·ç¦»éœ€è¦ min_range==max_range

float32 range           # èŒƒå›´æ•°æ® [m]
                        # (Note: values < range_min or > range_max should be discarded)
                        # Fixed distance rangers only output -Inf or +Inf.
                        # -Inf represents a detection within fixed distance.
                        # (Detection too close to the sensor to quantify)
                        # +Inf represents no detection within the fixed distance.
                        # (Object out of range)

```

ç»“è®ºï¼Œä¸»è¦å…³æ³¨rangeå°±å¯ä»¥äº†ã€‚

åœ¨rviz2é‡Œæ·»åŠ è¶…å£°æ³¢æ•°æ®

Add ->By topic->Range

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWI3NGEwZDllODY5YmRkOGE2ZThiZjIwZmJhMmZhZTVfQnRGU05kcXlpaE10TG9YZTFGOWxPNU9kT0dTY3FGYzJfVG9rZW46VFZmMGJjdzlDb25tWXF4SDVITmNVVEpVbkVmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTgxYjY5MWExNTE3ZjQ2OTQxZTdkYTEzYjJlYWYzOThfTFljd0lhdzlDZXloUGVtRmpoelJRQVYyUjRDZ2pJdTlfVG9rZW46VW5FcGJPeXNBb2pFMzZ4QUFsdGNMYlNYbmZCXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

  

  

8.  ### æ­å»ºä¸–ç•Œåœ°å›¾
    

æœ¬èŠ‚æˆ‘ä»¬è¦åœ¨Gazeboä¸­å»ºç«‹ä¸€ä¸ªæµ‹è¯•çš„ç¯å¢ƒï¼Œå…¶å®ä¹Ÿå¾ˆç®€å•ï¼Œåˆ©ç”¨Gazeboçš„ç”»å¢™å·¥å…·å³å¯å®Œæˆã€‚

worldå³ä¸–ç•Œï¼Œgazeboçš„worldæ–‡ä»¶å°±æ˜¯ç”¨äºæè¿°ä¸–ç•Œæ¨¡å‹çš„ï¼Œä¹Ÿå°±æ˜¯ç¯å¢ƒæ¨¡å‹ã€‚

Gazeboå·²ç»ä¸ºæˆ‘ä»¬å‡†å¤‡äº†å¾ˆå¤šå¸¸ç”¨çš„ç‰©ä½“æ¨¡å‹ï¼Œé™¤äº†åŸºç¡€çš„åœ†çƒï¼Œåœ†æŸ±ï¼Œç«‹æ–¹ä½“å¤–çš„ï¼Œå…¶å®è¿˜æœ‰é£æœºã€æ±½è½¦ã€æˆ¿å­ç­‰ä½ ç°å®ä¸­æ— æ³•æ‹¥æœ‰çš„ã€‚

ä½†æ˜¯ä¸€å¼€å§‹å®‰è£…Gazeboçš„æ—¶å€™å¹¶ä¸ä¼šå¸®ä½ ä¸‹è½½å¥½è¿™äº›æ¨¡å‹ï¼Œéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨ä¸‹è½½ï¼Œæ‰¾ä¸€ä¸ªä½ è¦å­˜æ¨¡å‹çš„æ–‡ä»¶å¤¹ï¼Œæ‰“å¼€ç»ˆç«¯ï¼Œå¤åˆ¶ç²˜è´´ä¸‹é¢è¿™å¥

```Python
git clone https://github.com/osrf/gazebo_models
```

å¹¶æŠŠå­˜æ”¾æ¨¡å‹çš„è·¯å¾„åŠ åˆ°~/.bashrcé‡Œï¼ˆç¬¬äºŒä¸ªå†’å·åé¢çš„å¯ä»¥ä¸å†™ï¼Œç¬¬äºŒä¸ªå†’å·åé¢çš„æ˜¯å¤šä¸ªè·¯å¾„ã€‚ï¼‰

GAZEBO\_MODEL\_PATHæ˜¯è€ç‰ˆGazebo Classicçš„å®ã€‚

IGN\_GAZEBO\_RESOURCE\_PATHæ˜¯æ–°ç‰ˆIgntion Gazeboçš„å®ã€‚

æ¨¡å‹éƒ½é€šç”¨ï¼Œå¯ä»¥ä¸€èµ·é…ç½®ä¸Šã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmZiYjNjZjg0YmU0MmIxMzg4NmNkMWQ2NDU3NjdiOTRfZ2JFSGJQaDNsOWQ5azdzb1Z1UUFxandVNjliMWh3TVlfVG9rZW46V1RFV2JaTDIyb1VXY2J4NXlkOWNJS2N4bnVmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

åˆ·æ–°ç¯å¢ƒå˜é‡

```Python
source ~/.bashrc
```

æ­¤æ—¶å†æ¬¡æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥`gazebo`ï¼ŒæŠŠé€‰é¡¹å¡åˆ‡æ¢åˆ°Insert

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODQ1YjNlZTFlYThmZWUyNTE1MjZkOWZkZWUwZDQyZmZfb29ia1JST1BKcEJqNUtkN3ZJU3d0M1JVR3JjOXBpWXhfVG9rZW46Vnc3RWJtRThIb2xUSzJ4cWJaNGM3c2lvbk5oXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

åœ¨Inserté€‰é¡¹å¡ä¸‹å¯ä»¥çœ‹åˆ°ä¸€ä¸ªç›®å½•ï¼Œä»¥åŠç›®å½•ä¸‹çš„æ¨¡å‹åç§°ï¼Œéšç€ä¸‹è½½è„šæœ¬çš„ä¸æ–­ä¸‹è½½ï¼Œè¿™é‡Œçš„æ¨¡å‹ä¼šè¶Šæ¥è¶Šå¤šã€‚

éšæ‰‹æ‹–å‡ ä¸ªï¼Œæ­å»ºä¸€ä¸ªæ¼‚äº®çš„ç¯å¢ƒå‡ºæ¥~

æ¯ä¸ªæˆåŠŸçš„ç”·äººéƒ½æœ‰ä¸€è¾†è½¦ï¼Œå’±ä»¬ä¹Ÿä¸ä¾‹å¤–

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzE3ZDdjNDIwZjBmYjU1OGE4MzRiOTUwZjZmMjdjNThfNjZ6ZFp5TWpwTHBzalRqa1NpeHhLcUhTUEZOcHdqZnhfVG9rZW46VEJud2JxZmNJb3RuV2N4cFdqVmNPUEFGbkdnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¸Šé¢æ˜¯Gazeboä¸ºæˆ‘ä»¬å‡†å¤‡å¥½çš„å¼€æºæ¨¡å‹ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡Gazeboçš„å·¥å…·æ¥è‡ªå·±ç”»ä¸€ä¸ªç¯å¢ƒã€‚

  

ç„¶åä¹Ÿå¯ä»¥ç”¨å¢™å£å·¥å…·å»ºå¢™

Gazeboå·¦ä¸Šè§’->Edit->Building Editor

æ¥ç€å¯ä»¥çœ‹åˆ°è¿™æ ·ä¸€ä¸ªç¼–è¾‘ç•Œé¢

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmUwOGM4MmE3OTY0YThhZDNhY2U4ZWQ1OWFhZjgzNjBfa0hnS210TWROZEhGUGVKOFRkVDFJM0p1NkNEYVptY1RfVG9rZW46T1N4UmJZVjVkbzQyS2l4VllDa2NaYUVOblNjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ç‚¹å‡»å·¦è¾¹çš„Wall,ä½ å°±å¯ä»¥åœ¨ä¸Šæ–¹çš„ç™½è‰²åŒºåŸŸè¿›è¡Œå»ºå¢™äº†ï¼Œè¿™ä¸ªå’Œæ¨¡æ‹Ÿäººç”Ÿæ¸¸æˆä¸ä¸€æ ·ï¼Œè¿™ä¸ªæ˜¯ç”»äºŒç»´çš„å¢™ç”Ÿæˆä¸‰ç»´çš„å¢™ï¼Œæ¨¡æ‹Ÿäººç”Ÿæ˜¯ç›´æ¥åœ¨ä¸‰ç»´é‡Œç”»ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDZmMzIyNGJiZTk5NTFjMzg2NDU4YTM5NzE5MGMyN2VfVURsbmU4ZXpPUzBHWFJ3SnZjNExNcGRZRHNKekpSQ1FfVG9rZW46TFk4UWJvZ0tyb0NjTjd4eDQ2dGNOeXhYblZkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å»ºå®Œåè¿˜å¯ä»¥ç”¨é€‰Add Coloræˆ–è€…Add Textureï¼Œç„¶åç‚¹å‡»ä¸‹æ–¹å¢™ï¼Œç»™å¢™æ·»åŠ é¢œè‰²æˆ–è€…çº¹ç†ã€‚

é¦–å…ˆä½ è¦æœ‰ä¸€ä¸ªåœ°å›¾ï¼Œå°é±¼ä¸ºä½ å‡†å¤‡äº†ä¸¤ä¸ªï¼Œä¸¤ä¸ªå›¾ç‰‡éƒ½æ˜¯800\*600åƒç´ çš„ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2Q1OGNkNDI1NzZmODUyZGUzNWI5NzMzNjY4NWRjNmFfV21OOXNxSzY3MEt4bzRVTFpHb29ieVljdTRuUDNGeHlfVG9rZW46TXdGNWJTVnNIb1dqOUh4dlV0eWNqNUhXblJoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTIxMzk5MzcxODkyNjk2ZjM3MjMxZTdiZTI4MTBkZjRfMnpWNzBiRWxrYW5ybUlYbG9WT0NmRUdEc3hqMlB5aUJfVG9rZW46SExOWWJSbWdKbzJMaHF4STM0TWNjV212bkplXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ‰“å¼€Gazebo->Gazeboå·¦ä¸Šè§’->Edit->Building Editor->å·¦ä¸‹æ–¹é€‰Import

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTRiODFmMmNkMzdjMTJkMWI5M2FiYThhMTQ1YTEzNjdfbWRXUWNUVm13NTVUU0lEejlNaENtcTRXUUVYWWljT2lfVG9rZW46SVZOTWJYQkNUbzNPMlR4NWxBeGNCYThhbnhkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å°†ä¸Šé¢ä¸¤ä¸ªå›¾ç‰‡å­˜åˆ°æœ¬åœ°ï¼Œåœ¨è¿™ä¸ªç•Œé¢é€‰å›¾ç‰‡ï¼Œè®°ç€é€‰Next

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTFhNGY0Nzc2OGFjMTkzMWJlYmFlYjlmZDRiMWQxNjFfMTJjZVEyazZPcndFOWZ1b0t3dzNwV3NNMUp0c2pITTBfVG9rZW46WlhuR2JjWFI0b2xCQUR4azlTQmN1dkF4blBlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å·¦è¾¹é€‰å°ºå¯¸å¯¹åº”å…³ç³»

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NGFjZjIxM2NkMWNkNWU1OTU2N2FhZWY4YmQ5MGU3NzVfN3VkT0JHWFZ5aUd1a3lSUUtVallUZVZJYk1GNEVmRnFfVG9rZW46QkJLOGJWUkVLb2ZMaEJ4eld1bWN1aWs4bkRmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æˆ‘ä»¬é€‰æ‹©é»˜è®¤çš„ï¼Œ100åƒç´ /ç±³ã€‚ç‚¹å‡»OKï¼ˆéœ€è¦æ‰‹åŠ¨å°†100æ”¹å˜ä¸€ä¸‹æ‰èƒ½ç‚¹å‡»OKå“¦ï¼‰ï¼Œä¹‹åå°±å¯ä»¥ç”¨å›¾ç‰‡ç”»å¢™äº†ã€‚

æ³¨æ„ï¼šå¯¼å…¥å®Œå›¾ç‰‡ä¸ä¼šç›´æ¥å‡ºæ¥å¢™ï¼Œå›¾ç‰‡åªæ˜¯æä¾›äº†å¢™çš„å¤§æ¦‚ä½ç½®ï¼Œéœ€è¦ä½ æ‰‹åŠ¨ç”¨å¢™å†å°†è¾¹æä¸€éã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGQxMThlMzA2ODI2MDVmNzEyYjk3YzY4ZDg4OGUyMDRfNm1TclhQOXVMUG9WODl0clV1YlRHOHNBV0pDM1M2NVJfVG9rZW46UTBDSGJFRThpbzBGbld4OElUNGNjYm5PblFjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å»ºå®Œåç‚¹å‡»File->Exit,åœ¨é€€å‡ºçš„å¼¹æ¡†ä¸­é€‰Exitã€‚

æ¥ç€åœ¨Gazeboç•Œé¢ä¸­å°±å¯ä»¥çœ‹åˆ°å¢™äº†ï¼Œæˆ‘ä»¬å†æ‰‹åŠ¨æ·»åŠ å‡ ä¸ªç‰©ä½“ï¼Œå°±å¯ä»¥ç”¨äºä¸‹é¢çš„å¯¼èˆªä½¿ç”¨äº†ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTgzNzU4ZWI2NTQ4NzcxODM0MDhiZmE1ZDQ4ZDg4N2JfaHI3ZFZqQ1VuQ2JBS3hZajBxV3Fma0xVR2h0Y2ExanRfVG9rZW46UDQ1SWJPVkJ5b0VZN1Z4SVMwa2M4ZEFMbkRmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ·»åŠ å®Œï¼Œæ¥ç€ç‚¹å‡»File->SaveWorldï¼Œå°†æ–‡ä»¶ä¿å­˜åˆ°æˆ‘ä»¬çš„fishbot\_descrptionçš„worldä¸‹ã€‚

æ²¡æœ‰worldç›®å½•çš„å°ä¼™ä¼´å¯ä»¥å…ˆæ‰‹åŠ¨åˆ›å»ºä¸‹

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MWU0OGMyNGY1ZGUzYzNjNjMyOGVmMTI3NTI3NjZjZmJfa1hjbU02SnMyc011NmtaeUFNZmJwUUpmTnJnaU5kYWVfVG9rZW46RVc0U2JQWkRBb210UnR4bnpweWMzVmN2bnJjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

åŠ è½½worldå…¶å®ä¹Ÿå¾ˆç®€å•ï¼Œå¯ä»¥å…ˆå¯åŠ¨Gazeboï¼Œå†æ‰‹åŠ¨çš„åŠ è½½æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥åœ¨Gazeboå¯åŠ¨æ—¶åŠ è½½ï¼š

æ¯”å¦‚åœ¨å‰é¢åŠ è½½ROS2æ’ä»¶åŸºç¡€ä¸Šå†åŠ è½½fishbot.worldã€‚

```Python
gazebo --verbose  -s libgazebo_ros_init.so -s  libgazebo_ros_factory.so ä½ çš„worldæ–‡ä»¶ç›®å½•/fishbot.world
```

ä¿®æ”¹launchæ–‡ä»¶ï¼Œå°†ä¸Šé¢çš„å‘½ä»¤è¡Œå†™åˆ°`gazebo.launch.py`ä¸­å³å¯ã€‚

```Python
    gazebo_world_path = os.path.join(pkg_share, 'world/fishbot.world')

    # Start Gazebo server
    start_gazebo_cmd =  ExecuteProcess(
        cmd=['gazebo', '--verbose','-s', 'libgazebo_ros_init.so', '-s', 'libgazebo_ros_factory.so', gazebo_world_path],
        output='screen')

```

ä¸‹é¢æ˜¯æ•´ä¸ªlaunchæ–‡ä»¶ï¼š

```python
from launch import LaunchDescription
from launch_ros.actions import Node

# å°è£…ç»ˆç«¯æŒ‡ä»¤ç›¸å…³ç±»
from launch.actions import ExecuteProcess
# from launch.substitutions import FindExecutable
# å‚æ•°å£°æ˜ä¸è·å–
# from launch.actions import DeclareLaunchArgument
# from launch.substitutions import LaunchConfiguration
# æ–‡ä»¶åŒ…å«ç›¸å…³
# from launch.actions import IncludeLaunchDescription
# from launch.launch_description_sources import PythonLaunchDescriptionSource
# åˆ†ç»„ç›¸å…³
# from launch_ros.actions import PushRosNamespace
# from launch.actions import GroupAction
# äº‹ä»¶ç›¸å…³
# from launch.event_handlers import OnProcessStart,OnProcessExit
# from launch.actions import ExecuteProcess,RegisterEventHandler,LogInfo
# è·å–åŠŸèƒ½åŒ…ä¸‹shareç›®å½•æˆ–è·¯å¾„
from ament_index_python.packages import get_package_share_directory
import os

def generate_launch_description():
    robot_name_in_model = 'fishbot'
    package_name = 'fishbot_description'
    urdf_name = "fishbot_gazebo.urdf"
    world_name = "fishbot.world"

    pkg_share = get_package_share_directory(f"{package_name}")
    urdf_model_path = os.path.join(pkg_share, f'urdf/urdf/{urdf_name}')
    gazebo_world_path = os.path.join(pkg_share, f'world/{world_name}')
    default_rviz_config_path = os.path.join(pkg_share, 'rviz/rviz2.rviz')

    # Start Gazebo server
    start_gazebo_cmd = ExecuteProcess(
        cmd=['gazebo', '--verbose','-s', 'libgazebo_ros_init.so', '-s', 'libgazebo_ros_factory.so',gazebo_world_path],
        output='screen')
        
    # Launch the robot
    spawn_entity_cmd = Node(
        package='gazebo_ros', 
        executable='spawn_entity.py',
        arguments=['-entity', robot_name_in_model,  '-file', urdf_model_path ], output='screen')
    
    # Start Robot State publisher
    start_robot_state_publisher_cmd = Node(
        package='robot_state_publisher',
        executable='robot_state_publisher',
        arguments=[urdf_model_path]
    )

    # Launch RViz
    start_rviz_cmd = Node(
        package='rviz2',
        executable='rviz2',
        name='rviz2',
        output='screen',
        arguments=['-d', default_rviz_config_path]
        )

    return LaunchDescription([start_gazebo_cmd,spawn_entity_cmd,start_robot_state_publisher_cmd,start_rviz_cmd])
```

æœ€åè®°å¾—ä¿®æ”¹cmakelists.txtæ–‡ä»¶ï¼Œè®©ç¼–è¯‘åå°†worldæ–‡ä»¶æ‹·è´åˆ°installç›®å½•ä¸‹

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWVkOTU5MzExYmFlOGMxZWNhYTViNGYxY2UxZTk3ZjFfdWF5ZnZ6WE9nd0h5WEgyRjY1c1kwbGZzT3BHMHhHOHJfVG9rZW46UVBkSWJBYlFwbzZMOUZ4a0VyZGNnRTZEbkZoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```Python
colcon build
source install/setup.bash
ros2 launch fishbot_description gazebo.launch.py 
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDI2NDI5ZDA2MTNjYjM0NjJmZTRiNDRmNmRmZTI1NzZfR1pjYUE0NklVSkh3YjR6NmhXRjhTbWV4bGU3UlQxbk5fVG9rZW46QUQxVGJLYVJpbzQ3bDd4TDdnSWN3MGJJbnZrXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTk2NTcxZjAxNDUyNTRjMDRiMjg5ZmQ5NjNlZDA2ZGRfTVFPOWNYa3RxdFJXSXBSTmhFd29zcVhNYkh3QW9EQUdfVG9rZW46RjBncmJiVDRyb1ZPbTF4SUZad2NwbE1KbjFlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

9.  ### æ¡†æ¶ä¼˜åŒ–
    

æœ¬èŠ‚ä»£ç å­¦é•¿ä¹Ÿå‘åˆ°ä»“åº“äº†ï¼Œæœ‰éœ€è¦çš„å­¦å¼Ÿå­¦å¦¹è¯·çœ‹:https://github.com/tungchiahui/ROS\_WS/tree/main/ROS2\_WS%2F6.ws\_simulations%2Fsrc%2Ffishbot\_description

æ¯”å¦‚è¯´æ”¯æŒxacroç­‰ä¼˜åŒ–ã€‚

é¦–å…ˆå…ˆæŠŠåŸæ¥çš„fishbot\_gazebo.urdfé‡Œçš„å†…å®¹åˆ†æˆå¥½å‡ ä¸ªurdfå’Œxacroå†ç”¨ä¸€ä¸ªæ€»çš„fishbot.urdf.xacroå»å¼•ç”¨ã€‚ï¼ˆå­¦è¿‡xacroçš„è‚¯å®šéƒ½ä¼šï¼‰

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjIyZjk1MGZjNWJhNmE2NmM0YzgyNDQ1MmVjZTkyMzhfQ2N4SEhTTXplVzBvc3g4SmhYNmtmdTlMUkNRSEgxSWVfVG9rZW46SkJRTmJMc0NJb2k3UTN4VlIwbWNvdlpZbnlnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ä¼˜åŒ–åçš„launchå¦‚ä¸‹ï¼š

```python
from launch import LaunchDescription
from launch_ros.actions import Node

# å°è£…ç»ˆç«¯æŒ‡ä»¤ç›¸å…³ç±»
from launch.actions import ExecuteProcess
# from launch.substitutions import FindExecutable
# å‚æ•°å£°æ˜ä¸è·å–
from launch.actions import DeclareLaunchArgument
from launch.substitutions import LaunchConfiguration
# æ–‡ä»¶åŒ…å«ç›¸å…³
# from launch.actions import IncludeLaunchDescription
# from launch.launch_description_sources import PythonLaunchDescriptionSource
# åˆ†ç»„ç›¸å…³
# from launch_ros.actions import PushRosNamespace
# from launch.actions import GroupAction
# äº‹ä»¶ç›¸å…³
# from launch.event_handlers import OnProcessStart,OnProcessExit
# from launch.actions import ExecuteProcess,RegisterEventHandler,LogInfo
# è·å–åŠŸèƒ½åŒ…ä¸‹shareç›®å½•æˆ–è·¯å¾„
from ament_index_python.packages import get_package_share_directory
from launch_ros.parameter_descriptions import ParameterValue
from launch.substitutions import Command,LaunchConfiguration
import os

def generate_launch_description():
    robot_name_in_model = 'fishbot'
    package_name = 'fishbot_description'
    # urdf_xacro_name = "fishbot_gazebo.urdf"
    world_name = "fishbot.world"

    pkg_share = get_package_share_directory(f"{package_name}")
    urdf_xacro_model_path = os.path.join(pkg_share, "urdf/xacro","fishbot.urdf.xacro")
    gazebo_world_path = os.path.join(pkg_share, f'world/{world_name}')
    default_rviz_config_path = os.path.join(pkg_share, 'rviz/rviz2.rviz')

    model = DeclareLaunchArgument(name="model", default_value=urdf_xacro_model_path)
    robot_description = ParameterValue(Command(["xacro ",LaunchConfiguration("model")]))

    # Start Gazebo server
    start_gazebo_cmd = ExecuteProcess(
        cmd=['gazebo', '--verbose','-s', 'libgazebo_ros_init.so', '-s', 'libgazebo_ros_factory.so',gazebo_world_path],
        output='screen')
        
    # Launch the robot
    spawn_entity_cmd = Node(
        package='gazebo_ros', 
        executable='spawn_entity.py',
        arguments=['-entity', robot_name_in_model,  '-topic', '/robot_description' ], output='screen')
    
    # Start Robot State publisher
    start_robot_state_publisher_cmd = Node(
        package='robot_state_publisher',
        executable='robot_state_publisher',
        parameters=[{"robot_description": robot_description}]
    )

    # Launch RViz
    start_rviz_cmd = Node(
        package='rviz2',
        executable='rviz2',
        name='rviz2',
        output='screen',
        arguments=['-d', default_rviz_config_path]
        )

    return LaunchDescription([model,start_gazebo_cmd,spawn_entity_cmd,start_robot_state_publisher_cmd,start_rviz_cmd])
```
```Python
colcon build
source install/setup.bash
ros2 launch fishbot_description gazebo.launch.py
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTBiZWFhNjQ0YmIzOGE1MjczNDAwOGJiNDcxNTA1NThfdmF6VE1IWHdGY3BVR1YxUGFKYkZQdGNMVFVTT08xQXpfVG9rZW46Smx1M2IxUTJmbzR1VnF4Tkkzb2NCd2xLbnpkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjU0OGM0NGNlM2IzNjVkZDMxZTAxMmI5ZDY2NTk1OTRfS096aTlKb0tCaXF0NXZKUnB3WEVZTHRmNlg4SHBUYjJfVG9rZW46WG5abmJjaG55bzUybG54YnhUYmNuQ1NNblRnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

ç„¶åå°±å¯ä»¥å»æå¯¼èˆªå•¦ï¼ä¹Ÿå¯ä»¥æ¥ç€å­¦æ–°ç‰ˆIgnition Gazeboï¼Œä½†è¿™ä¸œè¥¿æ•™ç¨‹å·¨å°‘ï¼Œæˆªæ­¢2024å¹´åªæœ‰èµµè™šå·¦è€å¸ˆè®²äº†ã€‚

  

3.  ## Ignition Gazebo
    

1.  ### Ign Gazeboå®‰è£…ä¸è¿è¡Œ
    

Gazeboæ¯ä¸ªç‰ˆæœ¬çš„å˜åŒ–éƒ½å¾ˆå¤§ã€‚

ç‰¹åˆ«æ˜¯ROS1ç”¨çš„è€ç‰ˆGazebo(é»‘è‰²ç•Œé¢)å’ŒROS2ç”¨çš„æ–°ç‰ˆGazebo(ç™½è‰²ç•Œé¢)ã€‚

ROS2çš„ä¸åŒç‰ˆæœ¬çš„Gazeboè·¨åº¦ä¹Ÿå¾ˆå¤§ï¼Œæ¯”å¦‚Humbleå’ŒJazzyåŠJazzyä¹‹åçš„ç‰ˆæœ¬ä¹‹é—´å¾ˆå¤šæ ‡ç­¾åŒºåˆ«å¾ˆå¤§ã€‚

  

æœ¬æ–‡ä½¿ç”¨humbleç‰ˆæœ¬(å³Ignition Gazebo)å½“åšæ•™ç¨‹ã€‚

å½“ç„¶ï¼Œä¸ºäº†å…¼å®¹ä»¥åçš„Gazeboï¼Œåœ¨ä¸‹æ–¹ä¹Ÿä¼šæœ‰æ•™ç¨‹æ•™ä½ å¦‚ä½•ä»ign gazeboè¿ç§»åˆ°gazebo simï¼ˆæœ€æœ€æœ€æ–°ç‰ˆgazeboï¼‰ã€‚

Ignition Gazebo æ˜¯ ROS2 ä¸­ä½¿ç”¨çš„å…¨æ–°æœºå™¨äººä»¿çœŸå·¥å…·ï¼Œ**å®ƒæ˜¯ Gazebo çš„å‡çº§ç‰ˆæœ¬**ã€‚åœ¨Humbleä»–è¿˜å«Ignition Gazebo(ä¹Ÿå«Gazebo Fortress)ï¼Œåœ¨Jazzyä¸­å«Gazebo Harmonic(å»æ‰äº†Ignitionçš„åå­—)(https://community.gazebosim.org/t/a-new-era-for-gazebo/1356)ã€‚å®ƒå…·å¤‡æ›´å¥½çš„æ€§èƒ½å’Œå¯ç”¨æ€§ï¼Œå¹¶é€šè¿‡ç´§å¯†é›†æˆ ROS2 æ¥æä¾›å¼ºå¤§çš„ä»¿çœŸç¯å¢ƒã€‚Ignition Gazebo æ”¯æŒå„ç§æœºå™¨äººå¹³å°å’Œä¼ æ„Ÿå™¨ï¼Œå¹¶æä¾›çµæ´»çš„é…ç½®é€‰é¡¹å’Œæ˜“äºä½¿ç”¨çš„ç•Œé¢ã€‚å®ƒçš„ç‰©ç†å¼•æ“å’Œä¼ æ„Ÿå™¨æ¨¡å‹å¯ä»¥å¸®åŠ©å¼€å‘äººå‘˜è¿›è¡Œæœºå™¨äººç³»ç»Ÿçš„å¼€å‘ã€æµ‹è¯•å’ŒéªŒè¯ã€‚æ— è®ºæ˜¯ç ”ç©¶è¿˜æ˜¯æ•™è‚²ï¼ŒIgnition Gazebo éƒ½æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ã€‚

å¦‚æœæƒ³ä»Ignition Gazebo(ROS2 Humble)è¿ç§»åˆ°Gazebo(ROS2 Jazzy)ï¼Œè¯·å¾€ä¸‹ç¿»ç¿»ï¼Œä¸‹é¢æœ‰ä¸€èŠ‚æ˜¯è®²å¦‚ä½•è¿ç§»çš„ã€‚

  

https://docs.ros.org/en/humble/Tutorials/Advanced/Simulators/Gazebo/Gazebo.html

ä¸‹é¢è¿™ä¸ªç½‘ç«™æ˜¯å®˜æ–¹æ•™ç¨‹(ROS2 Humbleçš„Ignition Gazebo Fortress)ï¼š

https://gazebosim.org/docs/fortress/getstarted/

https://gazebosim.org/docs/fortress/library\_reference\_nav/

æºç ï¼šhttps://github.com/gazebosim/docs/blob/master/fortress/tutorials

**å®‰è£…**

Ignition Gazebo æ˜¯ä¸ä¾èµ–äºROS2çš„ä¸€ä¸ªç‹¬ç«‹çš„é¡¹ç›®ï¼Œå¯ä»¥ç‹¬è‡ªå®‰è£…ã€‚ä½†æ˜¯å¦‚æœå®‰è£…äº†ROS2ï¼Œåœ¨ROS2å­˜å‚¨åº“ä¸­å·²ç»é›†æˆäº†å¯¹åº”ç‰ˆæœ¬çš„ Ignition Gazeboï¼Œå¯ä»¥è°ƒç”¨å¦‚ä¸‹æŒ‡ä»¤ç›´æ¥å®‰è£…ï¼š

```Bash
# é€šç”¨å‘½ä»¤
sudo apt install ros-${ROS_DISTRO}-ros-gz

# Humbleç‰ˆæœ¬
sudo apt install ros-humble-ros-gz

# Jazzyç‰ˆæœ¬
sudo apt install ros-jazzy-ros-gz
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTVhZTBjOWE0MGVhOGM0ZWNiM2Y2ODNjMjlhMGMwMDlfbXhESk9xOHJJTDk3ZEV1OG14RHZ5ZkJ5TkZXOEhLb25fVG9rZW46TmdPcGIwRGVYb3BPUjB4UTdOQmN6bTJ0bmZkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

**è¿è¡Œ**

Ignition Gazebo å®‰è£…å®Œæ¯•ä¹‹åï¼Œå¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼å¯åŠ¨ã€‚

æ–¹å¼1ï¼Œä»¥Ignition Gazebo çš„æ–¹å¼å¯åŠ¨ï¼ŒæŒ‡ä»¤å¦‚ä¸‹ï¼š

```Bash
# Humbleç‰ˆæœ¬
ign gazebo

# Jazzyç‰ˆæœ¬
gz sim
```

æ–¹å¼2ï¼Œä»¥ROS2çš„æ–¹å¼ å¯åŠ¨ï¼ŒæŒ‡ä»¤å¦‚ä¸‹ ï¼š

```Bash
ros2 launch ros_gz_sim gz_sim.launch.py
```

äºŒè€…è¿è¡Œç»“æœä¸€è‡´ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼šåœ¨å¼¹å‡ºçª—å£ä¸­ï¼Œé€‰æ‹©ä»¿çœŸç¯å¢ƒç„¶åç‚¹å‡»`run`æŒ‰é’®å³å¯è¿è¡Œã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmNhMDAzMDJiNGM3MmUxOGQzMjQzYWI0MGVhYTgwNTRfUTlaZ1JuZ2JZcFVycjBJSEZCTmJKZUZEUXBsanlJS3pfVG9rZW46S0RIZGJoMFBpb1ZLeWt4UjNMeWNrbnllbnJlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

**ç•Œé¢ä»‹ç»**

æ¥ä¸‹æ¥ä»¥Emptyä»¿çœŸç¯å¢ƒä¸ºä¾‹ï¼Œä»‹ç»ä¸€ä¸‹Ignition Gazeboçš„ç•Œé¢ç»„æˆã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTdmMTcxOGJjOTllM2MxN2Q3ZTdjZDljMmM5YmM2OTJfVzNWMkdtYWFhYklJT21EWjNPa1haVWhaYUlHS0pJYmxfVG9rZW46Q1d3NWJBbVV4b1duTjV4RUxkTWMyTUFMbnBmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ³¨æ„ï¼šå¦‚æœä½ çš„Gazeboä¸å¡ï¼Œä½†æ˜¯Ignition Gazeboå·¨å¡çš„è¯ï¼Œè¯·ç¡®è®¤Ignition Gazeboæ˜¯ä»¥ç‹¬æ˜¾æ‰“å¼€çš„ï¼Œè€Œä¸æ˜¯æ ¸æ˜¾ã€‚

å¦‚æœä¸ä¼šåˆ‡æ¢åº”ç”¨æ˜¾å¡ï¼Œå¯ä»¥ç›´æ¥æŠŠæ ¸æ˜¾å…³é—­æ‰ï¼Œä»æ··åˆè¾“å‡ºåˆ‡æ¢ä¸ºç‹¬ç«‹æ˜¾å¡è¾“å‡ºã€‚

**å·¥å…·æ **

*   é¡¶éƒ¨çš„å·¥å…·æ åŒ…å«ä¸¤ä¸ªæŒ‰é’®ï¼Œå·¦ä¾§çš„æ–‡ä»¶èœå•æŒ‰é’®ï¼ˆæ°´å¹³æ¡çº¹ï¼‰å’Œå³ä¾§çš„æ’ä»¶æŒ‰é’®ï¼ˆå‚ç›´çœç•¥å·ï¼‰ã€‚
    

1.  æ–‡ä»¶èœå•æŒ‰é’®ï¼ˆæ°´å¹³æ¡çº¹ï¼‰
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODI3YThiM2I3MjhlYWEwNGJlODIxODhmYzYwMDY2ZDRfRHhlQlI2dVFJTnRXZlo0WWcxV3dvdHJHTDRyYXlDQ1hfVG9rZW46WUpFOWJEYmxEb3ZtY3N4bG5BSGNxQWtZbkNnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

*   æ–‡ä»¶èœå•æŒ‰é’®åŒ…å«å°†ä»¿çœŸç¯å¢ƒä¿å­˜åˆ°æ–‡ä»¶ã€ä¿å­˜å’ŒåŠ è½½ç•Œé¢é…ç½®ä»¥åŠè‡ªå®šä¹‰ç•Œé¢æ ·å¼ç­‰è®¾ç½®ã€‚
    

2.  å³ä¾§çš„æ’ä»¶æŒ‰é’®ï¼ˆå‚ç›´çœç•¥å·ï¼‰
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjVlNzA5NTE1YmEzODNkODM1NTgxOTlhYTdmZWUwOTlfeFFHRG4wS0JmbmcxUDNsbWZ2dmhEeHJRcmkzS1ROdHpfVG9rZW46SGtTWmJrVHdmb0g5UHR4VjdhVGNlSXU1blJkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

*   æ’ä»¶æŒ‰é’®åˆ—å‡ºäº†æ‰€æœ‰å¯ç”¨çš„æ’ä»¶ã€‚ç‚¹å‡»åä¼šå¼¹å‡ºæ’ä»¶åˆ—è¡¨ï¼Œå‘ä¸‹æ»šåŠ¨æ­¤åˆ—è¡¨ä»¥æŸ¥çœ‹æ‰€æœ‰æ’ä»¶ã€‚ å½“é€‰æ‹©ä¸€ä¸ªæ—¶ï¼Œå…¶ç•Œé¢å°†å‡ºç°åœ¨å³ä¾§é¢æ¿ä¸­ã€‚
    

  

**3Dè§†çª—**

*   å·¦ä¸Šæ–¹å·¥å…·æ åŒ…å«å¤šç§å‡ ä½•ä½“ï¼ˆçƒä½“ã€æ¡†ä½“ã€åœ†æŸ±ä½“ï¼‰æŒ‰é’®å’Œå˜æ¢æ§ä»¶ã€‚é€šè¿‡é›†åˆä½“æŒ‰é’®å¯ä»¥ç›´æ¥å°†ç›’å­ã€çƒä½“æˆ–åœ†æŸ±ä½“æ¨¡å‹æ’å…¥ä»¿çœŸç¯å¢ƒã€‚åªéœ€å•å‡»è¦æ’å…¥çš„å½¢çŠ¶ï¼Œç„¶åå°†å…¶æ”¾å…¥ç¯å¢ƒä¸­ã€‚è¯¥å½¢çŠ¶å°†è‡ªåŠ¨æ•æ‰åˆ°åœ°å¹³é¢ä¸Šã€‚
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTU3YjQ2ZTU0NDI4Mzk0ZGIwZGMxNmZhN2UyNThiOTNfVnFWNkNpZ0NLVGtiSDViZHlzUEZENXZMbTQ4Mnp0SWdfVG9rZW46Skx1d2JrS3E2b1U2Q2d4aDVic2NUUDlMbkZkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODc0YWJhNGIzZjdiMmVmYjc5MTIyNWQ2N2JjZmJmZWFfS3drMmdKZFRrRHdmSVdabkJrNFI0Y0lqQUxaNkUyRzZfVG9rZW46UFlMWWJmNlJ3bzQ4d254czRhRGNZTGNHbklnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

*   ä¸»è§†å›¾ä¼šæ˜¾ç¤ºä»¿çœŸç¯å¢ƒï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡é¼ æ ‡ä»¥ä¸åŒæ–¹å¼æ¥å¯¼èˆªåœºæ™¯ï¼Œç›¸å…³æ“ä½œå¦‚ä¸‹ï¼š
    

```Plain Text
å·¦é”®å•å‡»ï¼šé€‰æ‹©å®ä½“
å³é”®å•å‡»ï¼šæ‰“å¼€å¸¦æœ‰é€‰é¡¹çš„èœå•ï¼š
   Move toï¼šç§»åŠ¨åˆ°ä»¥å®ä½“ä¸ºä¸­å¿ƒçš„åœºæ™¯
   Followï¼šé€‰æ‹©ä¸€ä¸ªå®ä½“è®©è§†å›¾ä¿æŒå±…ä¸­ï¼Œæ— è®ºæ˜¯ç§»åŠ¨è¿˜æ˜¯å¹³ç§»
   Removeï¼šä»æ¨¡æ‹Ÿä¸­åˆ é™¤å®ä½“
   Copyï¼šå¤åˆ¶å®ä½“
   Past: ç²˜è´´å®ä½“
   Viewï¼šæ˜¾ç¤ºå®ä½“çš„é‡å¿ƒï¼ˆCenter of Massï¼‰ã€ç¢°æ’è¾¹ç•Œï¼ˆCollisionsï¼‰ã€æƒ¯æ€§ï¼ˆInertiaï¼‰ã€
         å…³èŠ‚ï¼ˆJointsï¼‰ã€åæ ‡ç³»ï¼ˆFramesï¼‰ã€é€æ˜åº¦ï¼ˆTransparentï¼‰ã€çº¿æ¡†ï¼ˆWireframeï¼‰ç­‰å±æ€§
å·¦é”®å•å‡»å¹¶æ‹–åŠ¨ï¼šåœ¨åœºæ™¯ä¸­å¹³ç§»
å³é”®å•å‡»å¹¶æ‹–åŠ¨ï¼šæ”¾å¤§å’Œç¼©å°
æ»šè½®å‘å‰/å‘åï¼šæ”¾å¤§å’Œç¼©å°
æ»šè½®å•å‡»å¹¶æ‹–åŠ¨ï¼šæ—‹è½¬åœºæ™¯
```

*   æƒ³ç§»åŠ¨è¿™ä¸ªçƒï¼Œéœ€è¦ç‚¹å·¦ä¸Šè§’çš„ç§»åŠ¨æ¨¡å¼ï¼Œå†å·¦é”®å•å‡»é€‰ä¸­ç‰©ä½“
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2MzZDVkZGZhMjljZGEwZmZhN2IxOTVmMzE3ODhhOGRfRlpXSDVPeFkwTmNueFFOb043OUdNNDh6TTZ5MlRxc0tfVG9rZW46WWdVWGJ4eHdGb1VPTmV4SmVtZGNibjdibkRlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjYyNTJkMzY2ZTg1OTEyNzIxM2JkNDBlMzZlNDE0NThfaUtweEFwSFlGQjU5bUx1dUUyQWlmTkpNd3RoQVI1U0VfVG9rZW46WHQyb2Jrdjdwb2xTSVp4UmdOaWN0d2dFbk1oXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

*   åœ¨è§†çª—çš„åº•éƒ¨ï¼Œä»å·¦åˆ°å³åˆ†åˆ«æ˜¯æ˜¯æ’­æ”¾ã€æ­¥é•¿æŒ‰é’®å’Œå®æ—¶å› å­ï¼ˆReal-Time Factorï¼ŒRTFï¼‰ã€‚ç‚¹å‡»æ’­æ”¾æŒ‰é’®å°†å¼€å§‹è¿è¡Œä»¿çœŸç¯å¢ƒï¼Œ å†æ¬¡ç‚¹å‡»å¯ä»¥æš‚åœè¿è¡Œã€‚æ­¥é•¿æŒ‰é’®ç”¨äºè®¾ç½®ä»¿çœŸæ—¶é—´çš„ç¦»æ•£å•ä½ï¼Œå¯ä»¥é€šè¿‡å°†é¼ æ ‡æ‚¬åœåœ¨æŒ‰é’®ä¸Šæ¥è‡ªå®šä¹‰æ­¥é•¿ã€‚å®æ—¶å› å­è¡¨ç¤ºä»¿çœŸè¿è¡Œé€Ÿåº¦ç›¸å¯¹äºçœŸå®æ—¶é—´çš„æ¯”ä¾‹ã€‚
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTFjZjI2NmM1ODAzOTJhOTM2NDkzZjhlZTVmNDQ1MGRfamdNanRHQ3J0S0ladjVIRUxUOTc0TjhSQlF2MEpBNE1fVG9rZW46UXZCSmJ3d3Rzb2RtMnB4aXpreGNudHNubjhlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

**å³ä¾§é¢æ¿**

å³ä¾§é¢æ¿ç”¨äºæ˜¾ç¤ºæ’ä»¶ï¼Œå½“å‰ä»¿çœŸç¯å¢ƒé»˜è®¤åŒ…å«ä¸¤ä¸ªæ’ä»¶ï¼šModelå’ŒEntity Treeã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWMxNzEyZWYwZDdmZDU3MzU1OGY4Y2I2N2YzM2JmNGRfd3o1RGpoQjEwTVdrSVFmM0ZBTklWQW5lQ1FaZWNYcldfVG9rZW46V1pIcmJ5ZzFhb0JUNHF4MEg4bGNzQWIybkhnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

*   Entity Tree ä¸­ä¼šæ˜¾ç¤ºä»¿çœŸç¯å¢ƒä¸­çš„å®ä½“åˆ—è¡¨ï¼›
    
*   ç‚¹å‡»Entity Treeä¸­çš„å®ä½“åï¼Œå¯ä»¥åœ¨Modelä¸­æ˜¾ç¤ºè¯¥å®ä½“çš„ç›¸å…³ä¿¡æ¯ã€‚
    
*   ä¹Ÿå¯ä»¥æŒ‰ä½ Ctrl å¹¶å•å‡»ä»¥é€‰æ‹©å¤šä¸ªå®ä½“ï¼›
    
*   è¿˜å¯ä»¥å³é”®å•å‡»ä»»ä½•æ’ä»¶ä»¥æ‰“å¼€åŸºæœ¬è®¾ç½®æˆ–å…³é—­ã€‚
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzY4MTVkYTE2N2IzMjBiODIwODJkMTQzMzg1ZWYxODhfdjA5OVRtckYzZ1phWkZhSm11Y1pTbzdCYzNWbTFUdUJfVG9rZW46SnpESmJtRDlNbzhMSEt4RnhqR2N3blY4bnJnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

åœ¨Ignition Gazeboä¸­å†…ç½®äº†è®¸å¤šæ’ä»¶ï¼Œå¯ä»¥ç‚¹å‡»å·¥å…·æ çš„å³ä¾§æŒ‰é’®è‡ªè¡Œæ·»åŠ ï¼Œæ¯”å¦‚ï¼šå¯ä»¥é€‰æ‹© Grid Config æ’ä»¶è°ƒæ•´ä¸–ç•Œç½‘æ ¼çš„ç‰¹å¾ï¼ŒåŒ…æ‹¬å•å…ƒæ ¼å¤§å°ã€ç½‘æ ¼ä½ç½®ã€å•å…ƒæ ¼è®¡æ•°ã€æˆ–é¢œè‰²ç­‰ã€‚

åæœŸéšç€åº”ç”¨çš„æ·±å…¥ï¼Œä¹Ÿä¼šé™†ç»­ä»‹ç»å…¶ä»–ä¸€äº›æ’ä»¶ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmVhN2FiMzQ3ZjYyNTU3MDkwOTA0NjgzOWQ2ZTM5YTlfY2NLdVFvaVFKTEJ5dUtOeUg0RGNXalJHS1VxZWhuclBfVG9rZW46T3VoS2JGNjZ6b3VONkd4c21BMGNhbEZobmJ4XzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjY5NTY5YWUyMWE5ZWVmOTQzMDkzNDNmNTNlNThmYjJfV0F0S1ZzVmhuVzhaSHJVRVZFbDFBTGU5UFo0azhmVHBfVG9rZW46WVo1R2JzNXF3b0hmazR4S3pNc2Nhdnlqbm5iXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

2.  ### ä¸ROS2é›†æˆ
    

æœ¬èŠ‚å°†ä»‹ç»å¦‚ä½•å®ç°Ignition Gazeboä¸ROS2çš„é›†æˆï¼Œä»¥å®ç°äºŒè€…ä¹‹é—´çš„äº¤äº’ï¼Œæ¯”å¦‚ï¼Œå¯ä»¥é€šè¿‡ROS2çš„é”®ç›˜æ§åˆ¶èŠ‚ç‚¹æ§åˆ¶æœºå™¨äººè¿åŠ¨ï¼Œå¹¶ä¸”åœ¨rviz2ä¸­æ˜¾ç¤ºæœºå™¨äººçš„é‡Œç¨‹è®¡(odom)æ•°æ®ã€‚å…¶æµç¨‹å¤§è‡´å¦‚ä¸‹ï¼š

1.  å¯åŠ¨ Ignition Gazebo ä»¿çœŸç¯å¢ƒï¼›
    
2.  é€šè¿‡ ros\_gz\_bridge å»ºç«‹ ROS2 ä¸ Ignition Gazebo çš„è¿æ¥ï¼›
    
3.  å¯åŠ¨ ROS2 ç›¸å…³èŠ‚ç‚¹å®ç°ä¸ Ignition Gazebo çš„æ•°æ®æ”¶å‘ã€‚
    

Ignition Gazeboä¸ROS2çš„çš„æ‰€æœ‰é›†æˆå®ç°ï¼ŒåŸºæœ¬éƒ½éµå¾ªä¸Šè¿°æµç¨‹ã€‚

**å¯åŠ¨ä»¿çœŸç¯å¢ƒ**

åœ¨ Ignition Gazebo å®‰è£…æ—¶ï¼Œå·²ç»å†…ç½®äº†ä¸€äº›ä»¿çœŸç¯å¢ƒï¼Œç›´æ¥å¯åŠ¨å³å¯ã€‚åœ¨æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨åä¸º`visualize_lidar.sdf`çš„ä»¿çœŸæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å¯¹åº”çš„ä»¿çœŸç¯å¢ƒä¸­åŒ…æ‹¬äº†å·®é€Ÿæœºå™¨äººä»¥åŠæ¿€å…‰é›·è¾¾çš„ä»¿çœŸã€‚å¯åŠ¨æŒ‡ä»¤å¦‚ä¸‹ï¼š

```Bash
ign gazebo -v 4 -r visualize_lidar.sdf
#æˆ–è€…
gz sim -v 4 -r visualize_lidar.sdf
```

æˆ–è€…ä¹Ÿå¯ä»¥ä»¥ROS2 launchçš„æ–¹å¼å¯åŠ¨ï¼ŒæŒ‡ä»¤å¦‚ä¸‹ï¼š

```Plain Text
ros2 launch ros_gz_sim gz_sim.launch.py gz_args:="-v 4 -r visualize_lidar.sdf" # å¯åŠ¨çŠ¶æ€
```

ä¸¤ç§æ–¹å¼æœ¬è´¨ç›¸åŒï¼Œéƒ½æ˜¯å¯åŠ¨äº†Ignition Gazeboå¹¶ä¸”åŠ è½½äº†visualize\_lidar.sdfæ–‡ä»¶ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzhiZjhjZjQyMTc0MGQ5OGEzZDIzNTBhZDA1MTllN2NfdXp4VHNjOUpETnV2VlFmbzRsRmYzRzMwTFVJU3BuMzNfVG9rZW46TXlTUWJYak81b0NXdml4MFkybWNST0x2bnloXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

**å»ºç«‹è¿æ¥**

è™½ç„¶ä»¿çœŸç¯å¢ƒä¸­çš„æœºå™¨äººå·²ç»é…ç½®äº†è¿åŠ¨æ§åˆ¶æ’ä»¶ï¼Œå¯ä»¥é€šè¿‡`/model/vehicle_blue/cmd_vel`è¯é¢˜è®¢é˜…é€Ÿåº¦æŒ‡ä»¤å¹¶è¿åŠ¨ï¼Œä½†æ˜¯Ignition Gazeboä¸ROS2ä¸­çš„æ¶ˆæ¯æ ¼å¼å¹¶ä¸ä¸€è‡´ï¼Œæ‰€ä»¥è¿˜éœ€è¦é€šè¿‡ros\_gz\_bridgeè¿™ä¸€æ¡¥æ¥åŠŸèƒ½åŒ…ï¼Œå®ç°äºŒè€…ä¹‹é—´æ¶ˆæ¯çš„è½¬æ¢ï¼Œè°ƒç”¨æŒ‡ä»¤å¦‚ä¸‹ï¼š

```Bash
ros2 run ros_gz_bridge parameter_bridge /model/vehicle_blue/cmd_vel@geometry_msgs/msg/Twist]gz.msgs.Twist
```

é€šè¿‡è¯¥æŒ‡ä»¤å¯ä»¥å°†å‘å¸ƒåœ¨`/model/vehicle_blue/cmd_vel`è¯é¢˜ä¸Šçš„`geometry_msgs/msg/Twist`ç±»å‹çš„ROS2æ¶ˆæ¯è½¬æ¢æˆå¯ä»¥è¢«Ignition Gzeboè¯†åˆ«çš„`gz.msgs.Twist`ç±»å‹çš„æ¶ˆæ¯ã€‚

**å¯åŠ¨ROS2èŠ‚ç‚¹**

å¯åŠ¨ROS2çš„é”®ç›˜æ§åˆ¶èŠ‚ç‚¹ï¼Œå¹¶å°†è¯é¢˜é‡æ˜ å°„ä¸º`/model/vehicle_blue/cmd_vel`ï¼ŒæŒ‡ä»¤å¦‚ä¸‹ï¼š

```Bash
ros2 run teleop_twist_keyboard teleop_twist_keyboard --ros-args -r /cmd_vel:=/model/vehicle_blue/cmd_vel
```

æ¥ä¸‹æ¥å°±å¯ä»¥ä½¿ç”¨é”®ç›˜æ§åˆ¶æœºå™¨äººè¿åŠ¨äº†ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmZmNTFiZTdiY2E0ZjEzMTgzMzc1YTgzMTFiYjNhMzhfYVBRUU9POXpCUUNGcDZGUWtBSG1xb01pT1N3emVHT0pfVG9rZW46U2lOUGJQVWd5b3RVU2l4SFE5OGNvREQzblNiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

3.  ### ros\_gz\_bridge
    

ros\_gz\_bridgeæ˜¯è¿æ¥ROS2ä¸Ignition Gazeboçš„æ¡¥æ¢ï¼ŒROS2ä¸Ignition Gazeboä½¿ç”¨çš„æ¶ˆæ¯å¹¶ä¸å…¼å®¹ï¼Œå¿…é¡»é€šè¿‡ros\_gz\_bridgeè¿›è¡Œè½¬æ¢ã€‚

**ros\_gz\_bridgeä½¿ç”¨è¯­æ³•**

ROS2ä¸Ignition Gazeboçš„æ¡¥æ¥æ˜¯é€šè¿‡ros\_gz\_bridgeåŒ…ä¸­çš„parameter\_bridgeèŠ‚ç‚¹å®ç°ï¼Œå…¶ä½¿ç”¨è¯­æ³•å¦‚ä¸‹ï¼š

```Bash
parameter_bridge [<topic@ROS2_type@Ign_type> ..]  [<service@ROS2_srv_type[@Ign_req_type@Ign_rep_type]> ..]
```

åœ¨è¯é¢˜Topicä¸­ï¼Œ **ç¬¬ä¸€ä¸ª@** ç¬¦å·æ˜¯è¯é¢˜åç§°å’Œæ¶ˆæ¯ç±»å‹çš„ **åˆ†éš”ç¬¦** ã€‚

ç¬¬ä¸€ä¸ª@ç¬¦å·åé¢æ˜¯ROSæ¶ˆæ¯ç±»å‹ã€‚

ROSæ¶ˆæ¯ç±»å‹åé¢æ˜¯@ã€\[æˆ–\]ç¬¦å·ï¼š

*   **@**  è¡¨ç¤ºåŒå‘æ¡¥æ¥ï¼›
    
*   **\[**  è¡¨ç¤ºä»Ignition Gazeboåˆ°ROSçš„æ¡¥æ¥ï¼›
    
*   **\]**  è¡¨ç¤ºä»ROSåˆ°Ignition Gazeboçš„æ¡¥æ¥ã€‚
    

æ–¹å‘ç¬¦å·åæ˜¯Gazebo Transportæ¶ˆæ¯ç±»å‹ã€‚

ï¼ˆä¸¤ä¸ª@ä¸æ˜¯åŒä¸€ä¸ªå«ä¹‰ï¼‰

  

åœ¨æœåŠ¡Serviceä¸­ï¼Œ **ç¬¬ä¸€ä¸ª@** ç¬¦å·æ˜¯æœåŠ¡åç§°å’Œç±»å‹çš„ **åˆ†éš”ç¬¦** ã€‚

ç¬¬ä¸€ä¸ª@ç¬¦å·åé¢æ˜¯ROSæœåŠ¡ç±»å‹ã€‚å¯ä»¥é€‰æ‹©åœ°åŒ…æ‹¬Gazeboè¯·æ±‚å’Œå“åº”ç±»å‹ï¼Œåœ¨å®ƒä»¬ä¹‹é—´ç”¨@ç¬¦å·åˆ†éš”ã€‚

**ä»…** æ”¯æŒå°†GazeboæœåŠ¡å…¬å¼€ä¸ºROSæœåŠ¡ï¼Œå³ROSæœåŠ¡å°†è¯·æ±‚è½¬å‘åˆ°GazeboæœåŠ¡ï¼Œç„¶åå°†å“åº”è½¬å‘å›ROSå®¢æˆ·ç«¯ã€‚

åŒå‘æ¡¥æ¥ç¤ºä¾‹ï¼š

```Bash
parameter_bridge /chatter@std_msgs/String@gz.msgs.StringMsg
```

ä»Gazeboåˆ°ROSçš„æ¡¥æ¥ç¤ºä¾‹ï¼š

```Bash
parameter_bridge /chatter@std_msgs/String[gz.msgs.StringMsg
```

ä»ROSåˆ°Gazeboçš„æ¡¥æ¥ç¤ºä¾‹ï¼š

```Bash
parameter_bridge /chatter@std_msgs/String]gz.msgs.StringMsg
```

æœåŠ¡æ¡¥æ¥ç¤ºä¾‹ï¼š

```Bash
parameter_bridge /world/default/control@ros_gz_interfaces/srv/ControlWorld
æˆ–è€…ï¼š
parameter_bridge /world/default/control@ros_gz_interfaces/srv/ControlWorld@gz.msgs.WorldControl@gz.msgs.Boolean
```

ä¹Ÿå¯ä»¥è¿è¡Œ`ros2 run ros_gz_bridge parameter_bridge -h`æŒ‡ä»¤æŸ¥çœ‹å®˜æ–¹è¯´æ˜æ–‡æ¡£ã€‚

**ros\_gz\_bridgeæ”¯æŒçš„æ¶ˆæ¯ç±»å‹**

ä»¥ä¸‹æ˜¯ROS2ä¸Ignition Gazeboä¸­è¯é¢˜æ¶ˆæ¯ç±»å‹å¯¹åº”è¡¨ï¼š

<!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
| ROS2æ¶ˆæ¯ç±»å‹ | Gazebo Transport ç±»å‹ |
|:---|:---|
| builtin_interfaces/msg/Time | gz.msgs.Time |
| geometry_msgs/msg/Point | gz.msgs.Vector3d |
| geometry_msgs/msg/Pose | gz.msgs.Pose |
| geometry_msgs/msg/PoseArray | gz.msgs.Pose_V |
| geometry_msgs/msg/PoseStamped | gz.msgs.Pose |
| geometry_msgs/msg/PoseWithCovariance | gz.msgs.PoseWithCovariance |
| geometry_msgs/msg/Quaternion | gz.msgs.Quaternion |
| geometry_msgs/msg/Transform | gz.msgs.Pose |
| geometry_msgs/msg/TransformStamped | gz.msgs.Pose |
| geometry_msgs/msg/Twist | gz.msgs.Twist |
| geometry_msgs/msg/TwistWithCovariance | gz.msgs.TwistWithCovariance |
| geometry_msgs/msg/TwistWithCovarianceStamped | gz.msgs.TwistWithCovariance |
| geometry_msgs/msg/Vector3 | gz.msgs.Vector3d |
| geometry_msgs/msg/Wrench | gz.msgs.Wrench |
| geometry_msgs/msg/WrenchStamped | gz.msgs.Wrench |
| nav_msgs/msg/Odometry | gz.msgs.Odometry |
| nav_msgs/msg/Odometry | gz.msgs.OdometryWithCovariance |
| rcl_interfaces/msg/ParameterValue | gz.msgs.Any |
| ros_gz_interfaces/msg/Altimeter | gz.msgs.Altimeter |
| ros_gz_interfaces/msg/Contact | gz.msgs.Contact |
| ros_gz_interfaces/msg/Contacts | gz.msgs.Contacts |
| ros_gz_interfaces/msg/Dataframe | gz.msgs.Dataframe |
| ros_gz_interfaces/msg/Entity | gz.msgs.Entity |
| ros_gz_interfaces/msg/Float32Array | gz.msgs.Float_V |
| ros_gz_interfaces/msg/GuiCamera | gz.msgs.GUICamera |
| ros_gz_interfaces/msg/JointWrench | gz.msgs.JointWrench |
| ros_gz_interfaces/msg/Light | gz.msgs.Light |
| ros_gz_interfaces/msg/SensorNoise | gz.msgs.SensorNoise |
| ros_gz_interfaces/msg/StringVec | gz.msgs.StringMsg_V |
| ros_gz_interfaces/msg/TrackVisual | gz.msgs.TrackVisual |
| ros_gz_interfaces/msg/VideoRecord | gz.msgs.VideoRecord |
| ros_gz_interfaces/msg/WorldControl | gz.msgs.WorldControl |
| rosgraph_msgs/msg/Clock* | gz.msgs.Clock* |
| sensor_msgs/msg/BatteryState | gz.msgs.BatteryState |
| sensor_msgs/msg/CameraInfo | gz.msgs.CameraInfo |
| sensor_msgs/msg/FluidPressure | gz.msgs.FluidPressure |
| sensor_msgs/msg/Image | gz.msgs.Image |
| sensor_msgs/msg/Imu | gz.msgs.IMU |
| sensor_msgs/msg/JointState | gz.msgs.Model |
| sensor_msgs/msg/Joy | gz.msgs.Joy |
| sensor_msgs/msg/LaserScan | gz.msgs.LaserScan |
| sensor_msgs/msg/MagneticField | gz.msgs.Magnetometer |
| sensor_msgs/msg/NavSatFix | gz.msgs.NavSat |
| sensor_msgs/msg/PointCloud2 | gz.msgs.PointCloudPacked |
| std_msgs/msg/Bool | gz.msgs.Boolean |
| std_msgs/msg/ColorRGBA | gz.msgs.Color |
| std_msgs/msg/Empty | gz.msgs.Empty |
| std_msgs/msg/Float32 | gz.msgs.Float |
| std_msgs/msg/Float64 | gz.msgs.Double |
| std_msgs/msg/Header | gz.msgs.Header |
| std_msgs/msg/Int32 | gz.msgs.Int32 |
| std_msgs/msg/String | gz.msgs.StringMsg |
| std_msgs/msg/UInt32 | gz.msgs.UInt32 |
| tf2_msgs/msg/TFMessage | gz.msgs.Pose_V |
| trajectory_msgs/msg/JointTrajectory | gz.msgs.JointTrajectory |

ä»¥åŠæœåŠ¡æ¶ˆæ¯ç±»å‹å¯¹åº”è¡¨ï¼š

<!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
| ROS2æ¶ˆæ¯ç±»å‹ | Gazebo è¯·æ±‚ | Gazebo å“åº” |
|:---|:---|:---|
| ros_gz_interfaces/srv/ControlWorld | gz.msgs.WorldControl | gz.msgs.Boolean |

  

4.  ### ä¸ROS2é›†æˆä¼˜åŒ–
    

åœ¨ **Ignition Gazeboä¸ROS2é›†æˆ** å®ç°ä¸­éœ€è¦åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨ä¸åŒçš„æŒ‡ä»¤å¯åŠ¨ä¸åŒæ¨¡å—ï¼Œè¯¥æµç¨‹å®ç°ç¨æ˜¾å¤æ‚ï¼Œæœ¬èŠ‚å°†ä»‹ç»å¦‚ä½•ä»¥launchæ–‡ä»¶çš„æ–¹å¼è¿›è¡Œä¼˜åŒ–ã€‚

**æ–°å»ºåŠŸèƒ½åŒ…**

è¯·é¦–å…ˆè°ƒç”¨å¦‚ä¸‹æŒ‡ä»¤åˆ›å»ºä¸€ä¸ªåŠŸèƒ½åŒ…ï¼š

```Bash
ros2 pkg create demo_gazebo_sim
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmUxYmNmMDM0Y2JjZDI5NTA0YzUzNTBlZTZiNmRmZTVfYnVWZ1NSazRvQXFuZ1Zyc2tmN0pTb1pUUnkxSFhsb2tfVG9rZW46TldBamJMc2d2b3ZyMXZ4dU1jVmNudkd1bm1iXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

**æ·»åŠ ç›®å½•**

åœ¨æ–°å»ºçš„åŠŸèƒ½åŒ…ä¸‹æ·»åŠ ç›®å½•ï¼š launchã€rvizã€worldã€‚å¹¶åœ¨CmakeLists.txtä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š

```CMake
install(DIRECTORY rviz world launch DESTINATION share/${PROJECT_NAME})
```

launchç›®å½•ç”¨äºå­˜å‚¨launchæ–‡ä»¶ï¼Œrvizç›®å½•ç”±äºå­˜å‚¨rviz2çš„é…ç½®æ–‡ä»¶ï¼Œè€Œworldç›®å½•åˆ™ç”¨äºå­˜å‚¨Ignition Gazeboä»¿çœŸç¯å¢ƒçš„ç›¸å…³æ–‡ä»¶ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmQxZjMxN2JmNTUyNmUyMzJlMDRjM2IxMjkzMDZhMjFfSGFaOVR4ME8wbVl6TGpkeHZZb0hwNEpYZHlDTGxtMTlfVG9rZW46U0t0Y2JHNThtb0drRVV4WThCemNMYjFWblpnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

**rvizç›®å½•ä¸­ç”Ÿæˆrviz2çš„é…ç½®æ–‡ä»¶**

å¯åŠ¨ rviz2ï¼Œç›´æ¥å°†é»˜è®¤é…ç½®ä¿å­˜è‡³å½“å‰åŠŸèƒ½åŒ…çš„rvizç›®å½•ï¼Œä¿å­˜æ–‡ä»¶å‘½åä¸ºsim.rvizã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODM1ZWM4MjNiMmIzNDQ0Y2Y2ZDZlNmZjM2M4NDBlNGRfcGxhcDQ0WmJoNUZwZW9xVW94RkdXUjVMbEtLbWdoc2dfVG9rZW46RkxKMmJJamdGb2dQQWN4dEk4cGNTd0NNbmRlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

**å¤åˆ¶worldæ–‡ä»¶**

åœ¨ignitionå®‰è£…è·¯å¾„ä¸‹çš„worldsç›®å½•ï¼ˆ`/usr/share/ignition/ignition-gazebo6/worlds`ï¼‰ä¸­å¤åˆ¶visualize\_lidar.sdfæ–‡ä»¶è‡³worldç›®å½•ã€‚

å¦‚æœè¯¥è·¯å¾„ä¸‹æ²¡æœ‰ï¼Œé‚£å¯èƒ½åœ¨ROSçš„å®‰è£…è·¯å¾„ä¸‹ï¼š

`/opt/ros/jazzy/opt/gz_sim_vendor/share/gz/gz-sim8/worlds/`

å¦‚æœè¿˜æ²¡æœ‰çš„è¯ï¼Œæ‰‹åŠ¨æŸ¥æ‰¾ä¸€ä¸‹ï¼š

```Bash
sudo find / -name "visualize_lidar.sdf"
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzYwNWFjYThiMmU5NGI5YmJlYjY5ZGU5ZmZlOWJhNDRfamNiUXpnT2I5cDVQWkJ3c1BrYTB5NmJPOW1mSlN1eXVfVG9rZW46UFAxR2JSWjZtb3R2eXJ4RDlYNmNLTkpJbnZoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

**ç¼–å†™launchæ–‡ä»¶**

launchç›®å½•ä¸‹æ–°å»ºlaunchæ–‡ä»¶gazebo\_sim\_demo.launch.pyï¼Œå¹¶è¾“å…¥å¦‚ä¸‹å†…å®¹ï¼š

```Python
import os

from ament_index_python.packages import get_package_share_directory

from launch import LaunchDescription
from launch.actions import DeclareLaunchArgument
from launch.actions import IncludeLaunchDescription
from launch.conditions import IfCondition
from launch.launch_description_sources import PythonLaunchDescriptionSource
from launch.substitutions import LaunchConfiguration

from launch_ros.actions import Node

def generate_launch_description():

    this_pkg = get_package_share_directory('demo_gazebo_sim')
    pkg_ros_gz_sim = get_package_share_directory('ros_gz_sim')
    world_file = os.path.join(this_pkg,'world','visualize_lidar.sdf')

    gz_sim = IncludeLaunchDescription(
        PythonLaunchDescriptionSource(
            os.path.join(pkg_ros_gz_sim, 'launch', 'gz_sim.launch.py')),
        launch_arguments={
            'gz_args': '-r ' + world_file
        }.items(),
    )

    # RViz
    rviz = Node(
       package='rviz2',
       executable='rviz2',
       arguments=['-d', os.path.join(this_pkg, 'rviz', 'sim.rviz')],
       condition=IfCondition(LaunchConfiguration('rviz'))
    )

    # Bridge
    bridge = Node(
        package='ros_gz_bridge',
        executable='parameter_bridge',
        arguments=['/model/vehicle_blue/cmd_vel@geometry_msgs/msg/Twist@gz.msgs.Twist',
                   '/model/vehicle_blue/odometry@nav_msgs/msg/Odometry@gz.msgs.Odometry',
                   '/model/vehicle_blue/tf@tf2_msgs/msg/TFMessage[gz.msgs.Pose_V',
                   ],
        parameters=[{'qos_overrides./model/vehicle_blue.subscriber.reliability': 'reliable'}],
        remappings=[
                ('/model/vehicle_blue/tf', '/tf'),
                ('/model/vehicle_blue/cmd_vel','cmd_vel')
            ],
        output='screen'
    )

    return LaunchDescription([
        gz_sim,
        DeclareLaunchArgument('rviz', default_value='true',
                              description='Open RViz.'),
        bridge,
        rviz
    ])
```

è¯¥launchæ–‡ä»¶ä¸­ï¼Œå¯åŠ¨äº†Ignition Gazeboä»¿çœŸç¯å¢ƒã€é€šè¿‡ros\_gz\_bridgeå»ºç«‹äº†ä»¿çœŸä¸ROS2çš„è¿æ¥ï¼Œå¹¶ä¸”å¯åŠ¨äº†rviz2èŠ‚ç‚¹ã€‚å…¶ä¸­å»ºç«‹è¿æ¥æ—¶ï¼Œå®ç°äº†é€Ÿåº¦æŒ‡ä»¤ã€é‡Œç¨‹è®¡ä»¥åŠåæ ‡å˜æ¢ç­‰æ¶ˆæ¯çš„è½¬æ¢ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGMxOTQyZDRiOTNkZDc5MDllNTY0ZTQ0MTU5ODExMTFfdElwdlBDZDJ1cXUyMUQwTU1tODZ4b0lQUFk0S0lNWDhfVG9rZW46UUZWWmJPang0b3BWRGx4OXZHN2NZSkxvbmJmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

**æ„å»º**

ç»ˆç«¯ä¸­è¿›å…¥å½“å‰å·¥ä½œç©ºé—´ï¼Œç¼–è¯‘åŠŸèƒ½åŒ…ï¼š

```Plain Text
colcon build  --packages-select demo_gazebo_sim
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTZlYzhjMmYwMGY2NGE3ZjVkODA5ZGZkZWQ5NjVjZGVfUEdrS0g1SmlFeE11Y2lha1VWV2h1OTJETGZFN2ZWdGVfVG9rZW46TEtyT2J5TXJmb29YR0l4dzJ6WGMzbnR0bnRmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

**æ‰§è¡Œ**

ç»ˆç«¯ä¸­è¿›å…¥å½“å‰å·¥ä½œç©ºé—´ï¼Œè°ƒç”¨å¦‚ä¸‹æŒ‡ä»¤æ‰§è¡Œlaunchæ–‡ä»¶ï¼š

```Bash
. install/setup.bash
ros2 launch demo_gazebo_sim gazebo_sim_demo.launch.py
```

æ–°å¼€ç»ˆç«¯ï¼Œå¯åŠ¨é”®ç›˜æ§åˆ¶èŠ‚ç‚¹ï¼š

```Bash
ros2 run teleop_twist_keyboard teleop_twist_keyboard
```

å†é…ç½®rviz2ï¼Œå°†`Fixed Frame`è®¾ç½®ä¸º`vehicle_blue/odom`ï¼Œæ·»åŠ TFæ’ä»¶ï¼Œæ·»åŠ Odometryæ’ä»¶å¹¶å°†è¯é¢˜è®¾ç½®ä¸º`/model/vehicle_blue/odometry`ï¼Œå½“é€šè¿‡é”®ç›˜æ§åˆ¶å‘é€é€Ÿåº¦æŒ‡ä»¤æ—¶ï¼Œä»¿çœŸç¯å¢ƒçš„æœºå™¨äººå¼€å§‹è¿åŠ¨ï¼Œå¹¶ä¸”åœ¨rviz2ä¸­å¯ä»¥å›æ˜¾åæ ‡å˜æ¢ä»¥åŠé‡Œç¨‹è®¡ç­‰æ¶ˆæ¯ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2JlMGFlOTAxNzAyODY4NTQxMjZjMWVhNmE5MmZjNDFfbWYwYUczamZub0NMN2luM0swa2JCTFJWS0lNTWRJbkJfVG9rZW46TTJpSGJYdkU4b0lRUGh4bkpiT2NiSlpqbmJnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

5.  ### ä»¿çœŸç¯å¢ƒåˆ›å»º **SDFæ–‡ä»¶**
    

å‰é¢å‡ èŠ‚å†…å®¹æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯Ignition Gazeboå†…ç½®çš„ä»¿çœŸç¯å¢ƒï¼Œæœ¬èŠ‚å¼€å§‹å°†ä»‹ç»å¦‚ä½•è‡ªè¡Œæ­å»ºä»¿çœŸç¯å¢ƒã€‚æœ¬èŠ‚æ¡ˆä¾‹å°†ä»¿çœŸä¸€ä¸ªé•¿10må®½5mçš„çŸ©å½¢æˆ¿é—´ã€‚è¯¥æ¡ˆä¾‹å¯ä»¥å…ˆå¯åŠ¨Ignition Gazeboä»¥æ‹–æ‹½çš„æ–¹å¼æ­å»ºä»¿çœŸç¯å¢ƒï¼Œç„¶åå†ä¿®æ”¹ä»¿çœŸç¯å¢ƒå¯¹åº”çš„æ–‡ä»¶ä»¥è°ƒæ•´ç»†èŠ‚ã€‚

**SDFã€URDF å’Œ Xacro çš„å…³ç³»ï¼š**

*   **URDF å’Œ SDF çš„åŒºåˆ«ï¼š**
    
    *   **å¤æ‚æ€§ï¼š** SDF æ”¯æŒçš„åŠŸèƒ½æ›´å¼ºå¤§ï¼Œèƒ½å¤Ÿæè¿°å®Œæ•´çš„ä»¿çœŸç¯å¢ƒï¼›URDF æ›´é€‚åˆå®šä¹‰æœºå™¨äººæ¨¡å‹ã€‚
        
    *   **ç”¨é€”ï¼š** URDF æ˜¯ ROS çš„æ ‡å‡†ï¼›SDF æ˜¯ Gazebo çš„æ ‡å‡†ã€‚
        
    *   **ç‰©ç†å¼•æ“æ”¯æŒï¼š** URDF é€šè¿‡æ’ä»¶æ”¯æŒ Gazeboï¼›SDF åŸç”Ÿæ”¯æŒ Gazeboã€‚
        
    *   **æ ¼å¼è½¬æ¢ï¼š** URDF å¯ä»¥è½¬æ¢ä¸º SDFï¼ˆé€šè¿‡ ROS æä¾›çš„å·¥å…·`gz sdf -p`ï¼‰ã€‚
        
*   **Xacro çš„ä½œç”¨ï¼š**
    
    *   Xacro æ˜¯ URDF çš„ç”Ÿæˆå·¥å…·ï¼Œå¸®åŠ©ç”¨æˆ·é«˜æ•ˆç¼–å†™ URDF æ–‡ä»¶ï¼Œä½†å®ƒä¸ SDF æ— ç›´æ¥å…³ç³»ã€‚
        

* * *

**å®è·µå»ºè®®**

*   **åœ¨ Gazebo ä»¿çœŸä¸­ï¼š** å¦‚æœä½ ç”¨çš„æ˜¯ ROS 2 å’Œ Gazeboï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ SDF æ–‡ä»¶ï¼ŒåŠŸèƒ½æ›´å¼ºå¤§ã€‚
    
*   **åœ¨ ROS ä¸­ï¼š** å¦‚æœä¸»è¦ç”¨äºæœºå™¨äººæ§åˆ¶å’Œè§„åˆ’ï¼Œæ¨èä½¿ç”¨ URDF æˆ–ç”± Xacro ç”Ÿæˆçš„ URDFã€‚
    
*   **ä¸¤è€…ç»“åˆï¼š** ä½¿ç”¨ URDF è¿›è¡Œæ§åˆ¶ï¼Œä½¿ç”¨ SDF è¿›è¡Œä»¿çœŸã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ URDF å®šä¹‰æœºå™¨äººç»“æ„åï¼Œå€ŸåŠ© Gazebo æ’ä»¶å°†å…¶è½¬æ¢ä¸º SDFã€‚
    

**ç¤ºä¾‹å¯¹æ¯”**

URDF ç¤ºä¾‹ï¼š

```XML
<robot name="example_robot">
  <link name="base_link">
    <inertial>
      <mass value="1.0" />
      <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0" />
    </inertial>
  </link>
</robot>

```

Xacro ç¤ºä¾‹ï¼ˆç”Ÿæˆ URDFï¼‰ï¼š

```XML
<xacro:robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="example_robot">
  <xacro:macro name="base_link" params="mass">
    <link name="base_link">
      <inertial>
        <mass value="${mass}" />
        <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0" />
      </inertial>
    </link>
  </xacro:macro>

  <xacro:base_link mass="1.0" />
</xacro:robot>
```

SDF ç¤ºä¾‹ï¼š

```XML
<sdf version="1.6">
  <model name="example_robot">
    <link name="base_link">
      <inertial>
        <mass>1.0</mass>
        <inertia>
          <ixx>1.0</ixx>
          <iyy>1.0</iyy>
          <izz>1.0</izz>
        </inertia>
      </inertial>
    </link>
  </model>
</sdf>

```

**1.åˆ›å»ºsdfæ–‡ä»¶**

é¦–å…ˆè¯·è°ƒç”¨æŒ‡ä»¤`ign gazebo`å¯åŠ¨Ignition Gazeboï¼Œé€‰æ‹©Emptyä»¿çœŸç¯å¢ƒï¼Œç„¶åæ·»åŠ ç«‹æ–¹ä½“ï¼Œæ¯ä¸€ä¸ªç«‹æ–¹ä½“éƒ½å¯¹åº”ä¸€å µå¢™ã€‚

ä¸Šä¸‹å·¦å³ç«‹æ–¹ä½“boxã€box\_1ã€box\_2ã€box\_3å¯¹åº”çš„åæ ‡åˆ†åˆ«ä¸º(5.0,0.0,0.5)ã€(-5.0,0.0,0.5)ã€(0.0,2.5,0.5)ã€(0.0,-2.5,0.5)ã€‚

ï¼ˆä»¥ä¸Šåæ ‡æ˜¯æŒ‡Xï¼ŒYï¼ŒZåæ ‡ï¼Œæ²¡æœ‰æ—‹è½¬åº¦ï¼‰

ä¿å­˜æ–‡ä»¶åˆ°åŠŸèƒ½åŒ…çš„worldç›®å½•ä¸‹ï¼Œä¿å­˜çš„æ–‡ä»¶åç§°éœ€è¦ä»¥.sdfä¸ºåç¼€ï¼Œæ­¤å¤„æ–‡ä»¶åä¸ºhouse.sdfã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWIwMmQ2M2IxMmEyY2E5YzYzNzk2ZGRjOTIzMWRmZDRfY21WTTBudzBveno2eU44cVZzemdjU1NLb0pjczlyNFdfVG9rZW46SmdkdmJZNWhzbzBuSGF4a00yUmNKMzlhbjViXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTc5NzRmNGQ1NTZiZjQ3Y2FkZjk4MGJkNGY5NGYwMTRfSGY2WjJTOVJNWkVjMml4alNFcjJxclVkdWNrbGNpWTZfVG9rZW46RHZ3SGJNUHF3b2pITTB4YjRwZWM4UHlubjVhXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

```XML
<sdf version='1.9'>
  <world name='empty'>
    <physics name='1ms' type='ignored'>
      <max_step_size>0.001</max_step_size>
      <real_time_factor>1</real_time_factor>
      <real_time_update_rate>1000</real_time_update_rate>
    </physics>
    <plugin name='gz::sim::systems::Physics' filename='ignition-gazebo-physics-system'/>
    <plugin name='gz::sim::systems::UserCommands' filename='ignition-gazebo-user-commands-system'/>
    <plugin name='gz::sim::systems::SceneBroadcaster' filename='ignition-gazebo-scene-broadcaster-system'/>
    <plugin name='gz::sim::systems::Contact' filename='ignition-gazebo-contact-system'/>
    <gravity>0 0 -9.8</gravity>
    <magnetic_field>6e-06 2.3e-05 -4.2e-05</magnetic_field>
    <atmosphere type='adiabatic'/>
    <scene>
      <ambient>0.4 0.4 0.4 1</ambient>
      <background>0.7 0.7 0.7 1</background>
      <shadows>true</shadows>
    </scene>
    <model name='ground_plane'>
      <static>true</static>
      <link name='link'>
        <collision name='collision'>
          <geometry>
            <plane>
              <normal>0 0 1</normal>
              <size>100 100</size>
            </plane>
          </geometry>
          <surface>
            <friction>
              <ode/>
            </friction>
            <bounce/>
            <contact/>
          </surface>
        </collision>
        <visual name='visual'>
          <geometry>
            <plane>
              <normal>0 0 1</normal>
              <size>100 100</size>
            </plane>
          </geometry>
          <material>
            <ambient>0.8 0.8 0.8 1</ambient>
            <diffuse>0.8 0.8 0.8 1</diffuse>
            <specular>0.8 0.8 0.8 1</specular>
          </material>
        </visual>
        <pose>0 0 0 0 -0 0</pose>
        <inertial>
          <pose>0 0 0 0 -0 0</pose>
          <mass>100</mass>
          <inertia>
            <ixx>1</ixx>
            <ixy>0</ixy>
            <ixz>0</ixz>
            <iyy>1</iyy>
            <iyz>0</iyz>
            <izz>1</izz>
          </inertia>
        </inertial>
        <enable_wind>false</enable_wind>
      </link>
      <pose>0 0 0 0 -0 0</pose>
      <self_collide>false</self_collide>
    </model>
    <model name='box'>
      <pose>5.0 0 0.5 -0 0 0</pose>
      <link name='box_link'>
        <inertial>
          <inertia>
            <ixx>16.666</ixx>
            <ixy>0</ixy>
            <ixz>0</ixz>
            <iyy>16.666</iyy>
            <iyz>0</iyz>
            <izz>16.666</izz>
          </inertia>
          <mass>100</mass>
          <pose>0 0 0 0 -0 0</pose>
        </inertial>
        <collision name='box_collision'>
          <geometry>
            <box>
              <size>0.1 5 1</size>
            </box>
          </geometry>
          <surface>
            <friction>
              <ode/>
            </friction>
            <bounce/>
            <contact/>
          </surface>
        </collision>
        <visual name='box_visual'>
          <geometry>
            <box>
              <size>0.1 5 1</size>
            </box>
          </geometry>
          <material>
            <ambient>0.3 0.3 0.3 1</ambient>
            <diffuse>0.7 0.7 0.7 1</diffuse>
            <specular>1 1 1 1</specular>
          </material>
        </visual>
        <pose>0 0 0 0 -0 0</pose>
        <enable_wind>false</enable_wind>
      </link>
      <static>false</static>
      <self_collide>false</self_collide>
    </model>
    <model name='box_0'>
      <pose>-5.0 -0 0.50000 -0 0 0</pose>
      <link name='box_link'>
        <inertial>
          <inertia>
            <ixx>16.666</ixx>
            <ixy>0</ixy>
            <ixz>0</ixz>
            <iyy>16.666</iyy>
            <iyz>0</iyz>
            <izz>16.666</izz>
          </inertia>
          <mass>100</mass>
          <pose>0 0 0 0 -0 0</pose>
        </inertial>
        <collision name='box_collision'>
          <geometry>
            <box>
              <size>0.1 5 1</size>
            </box>
          </geometry>
          <surface>
            <friction>
              <ode/>
            </friction>
            <bounce/>
            <contact/>
          </surface>
        </collision>
        <visual name='box_visual'>
          <geometry>
            <box>
              <size>0.1 5 1</size>
            </box>
          </geometry>
          <material>
            <ambient>0.3 0.3 0.3 1</ambient>
            <diffuse>0.7 0.7 0.7 1</diffuse>
            <specular>1 1 1 1</specular>
          </material>
        </visual>
        <pose>0 0 0 0 -0 0</pose>
        <enable_wind>false</enable_wind>
      </link>
      <static>false</static>
      <self_collide>false</self_collide>
    </model>
    <model name='box_1'>
      <pose>-0 -2.5 0.5 -0 -0 -0</pose>
      <link name='box_link'>
        <inertial>
          <inertia>
            <ixx>16.666</ixx>
            <ixy>0</ixy>
            <ixz>0</ixz>
            <iyy>16.666</iyy>
            <iyz>0</iyz>
            <izz>16.666</izz>
          </inertia>
          <mass>100</mass>
          <pose>0 0 0 0 -0 0</pose>
        </inertial>
        <collision name='box_collision'>
          <geometry>
            <box>
              <size>10 0.1 1</size>
            </box>
          </geometry>
          <surface>
            <friction>
              <ode/>
            </friction>
            <bounce/>
            <contact/>
          </surface>
        </collision>
        <visual name='box_visual'>
          <geometry>
            <box>
              <size>10 0.1 1</size>
            </box>
          </geometry>
          <material>
            <ambient>0.3 0.3 0.3 1</ambient>
            <diffuse>0.7 0.7 0.7 1</diffuse>
            <specular>1 1 1 1</specular>
          </material>
        </visual>
        <pose>0 0 0 0 -0 0</pose>
        <enable_wind>false</enable_wind>
      </link>
      <static>false</static>
      <self_collide>false</self_collide>
    </model>
    <model name='box_2'>
      <pose>-0 2.5 0.5 0 -0 -0</pose>
      <link name='box_link'>
        <inertial>
          <inertia>
            <ixx>16.666</ixx>
            <ixy>0</ixy>
            <ixz>0</ixz>
            <iyy>16.666</iyy>
            <iyz>0</iyz>
            <izz>16.666</izz>
          </inertia>
          <mass>100</mass>
          <pose>0 0 0 0 -0 0</pose>
        </inertial>
        <collision name='box_collision'>
          <geometry>
            <box>
              <size>10 0.1 1</size>
            </box>
          </geometry>
          <surface>
            <friction>
              <ode/>
            </friction>
            <bounce/>
            <contact/>
          </surface>
        </collision>
        <visual name='box_visual'>
          <geometry>
            <box>
              <size>10 0.1 1</size>
            </box>
          </geometry>
          <material>
            <ambient>0.3 0.3 0.3 1</ambient>
            <diffuse>0.7 0.7 0.7 1</diffuse>
            <specular>1 1 1 1</specular>
          </material>
        </visual>
        <pose>0 0 0 0 -0 0</pose>
        <enable_wind>false</enable_wind>
      </link>
      <static>false</static>
      <self_collide>false</self_collide>
    </model>
    <light name='sun' type='directional'>
      <pose>0 0 10 0 -0 0</pose>
      <cast_shadows>true</cast_shadows>
      <intensity>1</intensity>
      <direction>-0.5 0.1 -0.9</direction>
      <diffuse>0.8 0.8 0.8 1</diffuse>
      <specular>0.2 0.2 0.2 1</specular>
      <attenuation>
        <range>1000</range>
        <linear>0.01</linear>
        <constant>0.90000000000000002</constant>
        <quadratic>0.001</quadratic>
      </attenuation>
      <spot>
        <inner_angle>0</inner_angle>
        <outer_angle>0</outer_angle>
        <falloff>0</falloff>
      </spot>
    </light>
  </world>
</sdf>
```

  

**2.ä¿®æ”¹sdfæ–‡ä»¶**

ä¿®æ”¹sdfæ–‡ä»¶ï¼Œè°ƒæ•´ç«‹æ–¹ä½“çš„å°ºå¯¸ï¼Œå®ç°å¢™ä½“çš„åˆå›´ã€‚åœ¨sdfæ–‡ä»¶ä¸­ï¼Œå››ä¸ªç«‹æ–¹ä½“åˆ†åˆ«å¯¹åº”äº†å››ä¸ª`<model>`æ ‡ç­¾ï¼Œå…¶`name`å±æ€§åˆ†åˆ«ä¸º`box`ã€`box_1`ã€`box_2`ã€`box_3`ï¼Œå°†`box`å’Œ`box_1`ä¸­çš„`<size>1 1 1</size>`ä¿®æ”¹ä¸º`<size>0.1 5 1</size>`ï¼Œå°†`box_2`å’Œ`box_3`ä¸­çš„`<size>1 1 1</size>`ä¿®æ”¹ä¸º`<size>10 0.1 1</size>`ï¼ˆ*æ³¨æ„ï¼šæ¯ä¸ª*`<model>`*æ ‡ç­¾ä¸‹ï¼Œéƒ½åŒ…å«ä¸¤ä¸ª*`<size>`*æ ‡ç­¾ï¼Œåˆ†åˆ«ä½äº*`<collision>`*æ ‡ç­¾å’Œ*`<visual>`*æ ‡ç­¾ä¸‹ï¼Œä¸¤ä¸ª*`<size>`*æ ‡ç­¾å†…å®¹éƒ½éœ€è¦ä¿®æ”¹*ï¼‰ã€‚

ä¿®æ”¹åä¸çš„house.sdfæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š

```XML
<sdf version='1.9'>
  <world name='empty'>
    <physics name='1ms' type='ignored'>
      <max_step_size>0.001</max_step_size>
      <real_time_factor>1</real_time_factor>
      <real_time_update_rate>1000</real_time_update_rate>
    </physics>
    <plugin name='ign::gazebo::systems::Physics' filename='ignition-gazebo-physics-system'/>
    <plugin name='ign::gazebo::systems::UserCommands' filename='ignition-gazebo-user-commands-system'/>
    <plugin name='ign::gazebo::systems::SceneBroadcaster' filename='ignition-gazebo-scene-broadcaster-system'/>
    <plugin name='ign::gazebo::systems::Contact' filename='ignition-gazebo-contact-system'/>
    <gravity>0 0 -9.8</gravity>
    <magnetic_field>6e-06 2.3e-05 -4.2e-05</magnetic_field>
    <atmosphere type='adiabatic'/>
    <scene>
      <ambient>0.4 0.4 0.4 1</ambient>
      <background>0.7 0.7 0.7 1</background>
      <shadows>true</shadows>
    </scene>
    <model name='ground_plane'>
      <static>true</static>
      <link name='link'>
        <collision name='collision'>
          <geometry>
            <plane>
              <normal>0 0 1</normal>
              <size>100 100</size>
            </plane>
          </geometry>
          <surface>
            <friction>
              <ode/>
            </friction>
            <bounce/>
            <contact/>
          </surface>
        </collision>
        <visual name='visual'>
          <geometry>
            <plane>
              <normal>0 0 1</normal>
              <size>100 100</size>
            </plane>
          </geometry>
          <material>
            <ambient>0.8 0.8 0.8 1</ambient>
            <diffuse>0.8 0.8 0.8 1</diffuse>
            <specular>0.8 0.8 0.8 1</specular>
          </material>
        </visual>
        <pose>0 0 0 0 -0 0</pose>
        <inertial>
          <pose>0 0 0 0 -0 0</pose>
          <mass>100</mass>
          <inertia>
            <ixx>1</ixx>
            <ixy>0</ixy>
            <ixz>0</ixz>
            <iyy>1</iyy>
            <iyz>0</iyz>
            <izz>1</izz>
          </inertia>
        </inertial>
        <enable_wind>false</enable_wind>
      </link>
      <pose>0 0 0 0 -0 0</pose>
      <self_collide>false</self_collide>
    </model>
    <model name='box'>
      <pose>5.0 0 0.5 -0 0 0</pose>
      <link name='box_link'>
        <inertial>
          <inertia>
            <ixx>16.666</ixx>
            <ixy>0</ixy>
            <ixz>0</ixz>
            <iyy>16.666</iyy>
            <iyz>0</iyz>
            <izz>16.666</izz>
          </inertia>
          <mass>100</mass>
          <pose>0 0 0 0 -0 0</pose>
        </inertial>
        <collision name='box_collision'>
          <geometry>
            <box>
              <size>0.1 5 1</size>
            </box>
          </geometry>
          <surface>
            <friction>
              <ode/>
            </friction>
            <bounce/>
            <contact/>
          </surface>
        </collision>
        <visual name='box_visual'>
          <geometry>
            <box>
              <size>0.1 5 1</size>
            </box>
          </geometry>
          <material>
            <ambient>0.3 0.3 0.3 1</ambient>
            <diffuse>0.7 0.7 0.7 1</diffuse>
            <specular>1 1 1 1</specular>
          </material>
        </visual>
        <pose>0 0 0 0 -0 0</pose>
        <enable_wind>false</enable_wind>
      </link>
      <static>false</static>
      <self_collide>false</self_collide>
    </model>
    <model name='box_0'>
      <pose>-5.0 -0 0.50000 -0 0 0</pose>
      <link name='box_link'>
        <inertial>
          <inertia>
            <ixx>16.666</ixx>
            <ixy>0</ixy>
            <ixz>0</ixz>
            <iyy>16.666</iyy>
            <iyz>0</iyz>
            <izz>16.666</izz>
          </inertia>
          <mass>100</mass>
          <pose>0 0 0 0 -0 0</pose>
        </inertial>
        <collision name='box_collision'>
          <geometry>
            <box>
              <size>0.1 5 1</size>
            </box>
          </geometry>
          <surface>
            <friction>
              <ode/>
            </friction>
            <bounce/>
            <contact/>
          </surface>
        </collision>
        <visual name='box_visual'>
          <geometry>
            <box>
              <size>0.1 5 1</size>
            </box>
          </geometry>
          <material>
            <ambient>0.3 0.3 0.3 1</ambient>
            <diffuse>0.7 0.7 0.7 1</diffuse>
            <specular>1 1 1 1</specular>
          </material>
        </visual>
        <pose>0 0 0 0 -0 0</pose>
        <enable_wind>false</enable_wind>
      </link>
      <static>false</static>
      <self_collide>false</self_collide>
    </model>
    <model name='box_1'>
      <pose>-0 -2.5 0.5 -0 -0 -0</pose>
      <link name='box_link'>
        <inertial>
          <inertia>
            <ixx>16.666</ixx>
            <ixy>0</ixy>
            <ixz>0</ixz>
            <iyy>16.666</iyy>
            <iyz>0</iyz>
            <izz>16.666</izz>
          </inertia>
          <mass>100</mass>
          <pose>0 0 0 0 -0 0</pose>
        </inertial>
        <collision name='box_collision'>
          <geometry>
            <box>
              <size>10 0.1 1</size>
            </box>
          </geometry>
          <surface>
            <friction>
              <ode/>
            </friction>
            <bounce/>
            <contact/>
          </surface>
        </collision>
        <visual name='box_visual'>
          <geometry>
            <box>
              <size>10 0.1 1</size>
            </box>
          </geometry>
          <material>
            <ambient>0.3 0.3 0.3 1</ambient>
            <diffuse>0.7 0.7 0.7 1</diffuse>
            <specular>1 1 1 1</specular>
          </material>
        </visual>
        <pose>0 0 0 0 -0 0</pose>
        <enable_wind>false</enable_wind>
      </link>
      <static>false</static>
      <self_collide>false</self_collide>
    </model>
    <model name='box_2'>
      <pose>-0 2.5 0.5 0 -0 -0</pose>
      <link name='box_link'>
        <inertial>
          <inertia>
            <ixx>16.666</ixx>
            <ixy>0</ixy>
            <ixz>0</ixz>
            <iyy>16.666</iyy>
            <iyz>0</iyz>
            <izz>16.666</izz>
          </inertia>
          <mass>100</mass>
          <pose>0 0 0 0 -0 0</pose>
        </inertial>
        <collision name='box_collision'>
          <geometry>
            <box>
              <size>10 0.1 1</size>
            </box>
          </geometry>
          <surface>
            <friction>
              <ode/>
            </friction>
            <bounce/>
            <contact/>
          </surface>
        </collision>
        <visual name='box_visual'>
          <geometry>
            <box>
              <size>10 0.1 1</size>
            </box>
          </geometry>
          <material>
            <ambient>0.3 0.3 0.3 1</ambient>
            <diffuse>0.7 0.7 0.7 1</diffuse>
            <specular>1 1 1 1</specular>
          </material>
        </visual>
        <pose>0 0 0 0 -0 0</pose>
        <enable_wind>false</enable_wind>
      </link>
      <static>false</static>
      <self_collide>false</self_collide>
    </model>
    <light name='sun' type='directional'>
      <pose>0 0 10 0 -0 0</pose>
      <cast_shadows>true</cast_shadows>
      <intensity>1</intensity>
      <direction>-0.5 0.1 -0.9</direction>
      <diffuse>0.8 0.8 0.8 1</diffuse>
      <specular>0.2 0.2 0.2 1</specular>
      <attenuation>
        <range>1000</range>
        <linear>0.01</linear>
        <constant>0.90000000000000002</constant>
        <quadratic>0.001</quadratic>
      </attenuation>
      <spot>
        <inner_angle>0</inner_angle>
        <outer_angle>0</outer_angle>
        <falloff>0</falloff>
      </spot>
    </light>
  </world>
</sdf>
```

**3.ç¼–å†™launchæ–‡ä»¶**

åœ¨launchç›®å½•ä¸‹æ–°å»ºlaunchæ–‡ä»¶gazebo\_sim\_world.launch.pyï¼Œå¹¶è¾“å…¥å¦‚ä¸‹å†…å®¹ï¼š

```Python
import os

from ament_index_python.packages import get_package_share_directory

from launch import LaunchDescription
from launch.actions import IncludeLaunchDescription
from launch.launch_description_sources import PythonLaunchDescriptionSource

def generate_launch_description():

    this_pkg = get_package_share_directory('demo_gazebo_sim')
    pkg_ros_gz_sim = get_package_share_directory('ros_gz_sim')
    world_file = os.path.join(this_pkg,"world","house.sdf")

    gz_sim = IncludeLaunchDescription(
        PythonLaunchDescriptionSource(
            os.path.join(pkg_ros_gz_sim, 'launch', 'gz_sim.launch.py')),
        launch_arguments={
            'gz_args': '-r ' + world_file
        }.items(),
    )
    return LaunchDescription([
        gz_sim
    ])
```

**4.æ„å»º**

ç»ˆç«¯ä¸­è¿›å…¥å½“å‰å·¥ä½œç©ºé—´ï¼Œç¼–è¯‘åŠŸèƒ½åŒ…ï¼š

```Plain Text
colcon build  --packages-select demo_gazebo_sim
```

**5.æ‰§è¡Œ**

ç»ˆç«¯ä¸­è¿›å…¥å½“å‰å·¥ä½œç©ºé—´ï¼Œè°ƒç”¨å¦‚ä¸‹æŒ‡ä»¤æ‰§è¡Œlaunchæ–‡ä»¶ï¼š

```Plain Text
. install/setup.bash
ros2 launch demo_gazebo_sim gazebo_sim_world.launch.py
```

è¿è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚

ä¹Ÿå¯ä»¥æ ¹æ®ä¸ªäººå–œå¥½ï¼Œç»§ç»­è®¾è®¡æˆ¿é—´æ¨¡å‹ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzdkNWYyZmM0MTBjZWUxOTNjMmRlN2YwZjJmNzcxZWRfYUhFRnpnRHlianZNb29BRFNLcFRIUVBQWTg0dDBSdHFfVG9rZW46UFo2cmJ2WDJxb3RQeDF4UWxucmNqSGxrbnJnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

6.  ### **IgnGæ·»åŠ æ¨¡å‹**
    

åœ¨Ignition Gazeboå®˜ç½‘æä¾›äº†è®¸å¤šä»¿çœŸæ¨¡å‹ï¼Œå¯ä»¥è‡ªè¡Œä¸‹è½½å¹¶ä½¿ç”¨ä»¥ä¼˜åŒ–ä»¿çœŸç¯å¢ƒï¼Œä½¿å…¶æ›´å¤šæ ·ã€ç¾è§‚ä¸”çœŸå®ã€‚

**èµ„æºä¸‹è½½**

ä»¿çœŸIgnition Gazeboçš„å®˜æ–¹æ¨¡å‹é“¾æ¥ï¼š

http://app.ignitionrobotics.org/fuel/models

è‡ªè¡Œé€‰æ‹©ä»¿çœŸæ¨¡å‹ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µé¢ï¼Œç„¶åç‚¹å‡»ä¸‹è½½æŒ‰é’®å³å¯å°†æ¨¡å‹èµ„æºä¿å­˜åˆ°æœ¬åœ°ã€‚

åœ¨ç”¨æˆ·ç›®å½•ä¸‹æ–°å»ºign\_modelsç›®å½•ï¼Œå°†ä¸‹è½½çš„èµ„æºè§£å‹ç¼©åˆ°è¯¥ç›®å½•ä»¥ä½œå¤‡ç”¨ã€‚

**èµ„æºé…ç½®**

ä¸ºäº†å¯ä»¥è®©Ignition Gazeboè¯†åˆ«åˆ°æ¨¡å‹èµ„æºï¼Œä¸‹ä¸€æ­¥è¿˜éœ€è¦ä¿®æ”¹ç”¨æˆ·ç›®å½•ä¸‹çš„ .bashrc æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹ä»£ç ï¼š

```Bash
# Humbleç‰ˆæœ¬ä¸€èˆ¬æ˜¯ä¸‹é¢çš„ï¼Œä½†æ˜¯æœ‰å¯èƒ½ä¼šæ›´æ–°ï¼Œå¦‚æœä¸ç”Ÿæ•ˆï¼Œè¯·å°è¯•Jazzyçš„å®
export IGN_GAZEBO_RESOURCE_PATH=~/ign_models
# Jazzyç‰ˆæœ¬çš„å®æ”¹äº†ï¼Œå¦‚ä¸‹ï¼š
export GZ_SIM_RESOURCE_PATH=~/ign_models
```

https://gazebosim.org/docs/latest/fuel\_insert/

  

**æ¨¡å‹æ·»åŠ **

ç»ˆç«¯ä¸‹è¿›å…¥åŠŸèƒ½åŒ…demo\_gazebo\_simçš„worldç›®å½•ï¼Œä½¿ç”¨æŒ‡ä»¤`ign gazebo house.sdf` æˆ–è€…`gz sim house.sdf`å¯åŠ¨ä»¿çœŸç¯å¢ƒï¼Œç‚¹å‡»çª—å£å³ä¸Šçš„æŠ˜å æŒ‰é’®ï¼Œæœç´¢`Resource Spawner`å¹¶æ‰“å¼€ï¼Œç‚¹å‡»`Local resources`å¹¶é€‰æ‹©æ¨¡å‹æ‹–æ‹½è‡³ä»¿çœŸç¯å¢ƒä¸­ã€‚å°†ä¿®æ”¹åçš„å†…å®¹ä¿å­˜è‡³house.sdfæ–‡ä»¶ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTVhYzA2YWZiOTA2NGRmMmYwMjZmM2Y2NDg0MmRmMDdfT0lpYmpzcGJ5RHNDMTBoVUF1REREdENJa3M5Z1hOdHVfVG9rZW46TVJET2JETkU5b1cxQTJ4UnNVN2NiQTJPbnplXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ­£å¸¸ä¸‹è½½èµ„æºåï¼Œè¿™ä¸ªlocal resourcesè¿™é‡Œå°±ä¼šæ˜¾ç¤ºäº†

  

house.sdfæ–‡ä»¶ç¤ºä¾‹å†…å®¹å¦‚ä¸‹ï¼š

```XML
<sdf version='1.9'>
  <world name='empty'>
    <physics name='1ms' type='ignored'>
      <max_step_size>0.001</max_step_size>
      <real_time_factor>1</real_time_factor>
      <real_time_update_rate>1000</real_time_update_rate>
    </physics>
    <plugin name='gz::sim::systems::Physics' filename='ignition-gazebo-physics-system'/>
    <plugin name='gz::sim::systems::UserCommands' filename='ignition-gazebo-user-commands-system'/>
    <plugin name='gz::sim::systems::SceneBroadcaster' filename='ignition-gazebo-scene-broadcaster-system'/>
    <plugin name='gz::sim::systems::Contact' filename='ignition-gazebo-contact-system'/>
    <gravity>0 0 -9.8</gravity>
    <magnetic_field>6e-06 2.3e-05 -4.2e-05</magnetic_field>
    <atmosphere type='adiabatic'/>
    <scene>
      <ambient>0.4 0.4 0.4 1</ambient>
      <background>0.7 0.7 0.7 1</background>
      <shadows>true</shadows>
    </scene>
    <model name='ground_plane'>
      <static>true</static>
      <link name='link'>
        <collision name='collision'>
          <geometry>
            <plane>
              <normal>0 0 1</normal>
              <size>100 100</size>
            </plane>
          </geometry>
          <surface>
            <friction>
              <ode/>
            </friction>
            <bounce/>
            <contact/>
          </surface>
        </collision>
        <visual name='visual'>
          <geometry>
            <plane>
              <normal>0 0 1</normal>
              <size>100 100</size>
            </plane>
          </geometry>
          <material>
            <ambient>0.8 0.8 0.8 1</ambient>
            <diffuse>0.8 0.8 0.8 1</diffuse>
            <specular>0.8 0.8 0.8 1</specular>
          </material>
        </visual>
        <pose>0 0 0 0 -0 0</pose>
        <inertial>
          <pose>0 0 0 0 -0 0</pose>
          <mass>100</mass>
          <inertia>
            <ixx>1</ixx>
            <ixy>0</ixy>
            <ixz>0</ixz>
            <iyy>1</iyy>
            <iyz>0</iyz>
            <izz>1</izz>
          </inertia>
        </inertial>
        <enable_wind>false</enable_wind>
      </link>
      <pose>0 0 0 0 -0 0</pose>
      <self_collide>false</self_collide>
    </model>
    <model name='box'>
      <pose>5.02632 -2e-06 0.500002 -0 4.4e-05 4.6e-05</pose>
      <link name='box_link'>
        <inertial>
          <inertia>
            <ixx>16.666</ixx>
            <ixy>0</ixy>
            <ixz>0</ixz>
            <iyy>16.666</iyy>
            <iyz>0</iyz>
            <izz>16.666</izz>
          </inertia>
          <mass>100</mass>
          <pose>0 0 0 0 -0 0</pose>
        </inertial>
        <collision name='box_collision'>
          <geometry>
            <box>
              <size>0.1 5 1</size>
            </box>
          </geometry>
          <surface>
            <friction>
              <ode/>
            </friction>
            <bounce/>
            <contact/>
          </surface>
        </collision>
        <visual name='box_visual'>
          <geometry>
            <box>
              <size>0.1 5 1</size>
            </box>
          </geometry>
          <material>
            <ambient>0.3 0.3 0.3 1</ambient>
            <diffuse>0.7 0.7 0.7 1</diffuse>
            <specular>1 1 1 1</specular>
          </material>
        </visual>
        <pose>0 0 0 0 -0 0</pose>
        <enable_wind>false</enable_wind>
      </link>
      <static>false</static>
      <self_collide>false</self_collide>
    </model>
    <model name='box_0'>
      <pose>-5.01336 -0.00029 0.500002 0 -4.2e-05 -0.005335</pose>
      <link name='box_link'>
        <inertial>
          <inertia>
            <ixx>16.666</ixx>
            <ixy>0</ixy>
            <ixz>0</ixz>
            <iyy>16.666</iyy>
            <iyz>0</iyz>
            <izz>16.666</izz>
          </inertia>
          <mass>100</mass>
          <pose>0 0 0 0 -0 0</pose>
        </inertial>
        <collision name='box_collision'>
          <geometry>
            <box>
              <size>0.1 5 1</size>
            </box>
          </geometry>
          <surface>
            <friction>
              <ode/>
            </friction>
            <bounce/>
            <contact/>
          </surface>
        </collision>
        <visual name='box_visual'>
          <geometry>
            <box>
              <size>0.1 5 1</size>
            </box>
          </geometry>
          <material>
            <ambient>0.3 0.3 0.3 1</ambient>
            <diffuse>0.7 0.7 0.7 1</diffuse>
            <specular>1 1 1 1</specular>
          </material>
        </visual>
        <pose>0 0 0 0 -0 0</pose>
        <enable_wind>false</enable_wind>
      </link>
      <static>false</static>
      <self_collide>false</self_collide>
    </model>
    <model name='box_1'>
      <pose>-0 -2.5 0.5 1e-06 0 0</pose>
      <link name='box_link'>
        <inertial>
          <inertia>
            <ixx>16.666</ixx>
            <ixy>0</ixy>
            <ixz>0</ixz>
            <iyy>16.666</iyy>
            <iyz>0</iyz>
            <izz>16.666</izz>
          </inertia>
          <mass>100</mass>
          <pose>0 0 0 0 -0 0</pose>
        </inertial>
        <collision name='box_collision'>
          <geometry>
            <box>
              <size>10 0.1 1</size>
            </box>
          </geometry>
          <surface>
            <friction>
              <ode/>
            </friction>
            <bounce/>
            <contact/>
          </surface>
        </collision>
        <visual name='box_visual'>
          <geometry>
            <box>
              <size>10 0.1 1</size>
            </box>
          </geometry>
          <material>
            <ambient>0.3 0.3 0.3 1</ambient>
            <diffuse>0.7 0.7 0.7 1</diffuse>
            <specular>1 1 1 1</specular>
          </material>
        </visual>
        <pose>0 0 0 0 -0 0</pose>
        <enable_wind>false</enable_wind>
      </link>
      <static>false</static>
      <self_collide>false</self_collide>
    </model>
    <model name='box_2'>
      <pose>-0.000154 2.52488 0.500821 -0.018068 -0 -0.003156</pose>
      <link name='box_link'>
        <inertial>
          <inertia>
            <ixx>16.666</ixx>
            <ixy>0</ixy>
            <ixz>0</ixz>
            <iyy>16.666</iyy>
            <iyz>0</iyz>
            <izz>16.666</izz>
          </inertia>
          <mass>100</mass>
          <pose>0 0 0 0 -0 0</pose>
        </inertial>
        <collision name='box_collision'>
          <geometry>
            <box>
              <size>10 0.1 1</size>
            </box>
          </geometry>
          <surface>
            <friction>
              <ode/>
            </friction>
            <bounce/>
            <contact/>
          </surface>
        </collision>
        <visual name='box_visual'>
          <geometry>
            <box>
              <size>10 0.1 1</size>
            </box>
          </geometry>
          <material>
            <ambient>0.3 0.3 0.3 1</ambient>
            <diffuse>0.7 0.7 0.7 1</diffuse>
            <specular>1 1 1 1</specular>
          </material>
        </visual>
        <pose>0 0 0 0 -0 0</pose>
        <enable_wind>false</enable_wind>
      </link>
      <static>false</static>
      <self_collide>false</self_collide>
    </model>
    <include>
      <uri>file://Bed</uri>
      <name>Bed</name>
      <pose>2.82155 1.18752 0 0 -0 0</pose>
    </include>
    <include>
      <uri>file://Office Desk</uri>
      <name>Desk</name>
      <pose>2.78306 -1.97796 0 0 -0 1.57</pose>
    </include>
    <include>
      <uri>file://Bathtub</uri>
      <name>Bathtub</name>
      <pose>-3.87509 1.82783 0 0 -0 0</pose>
    </include>
    <include>
      <uri>file://Vanity</uri>
      <name>Vanity</name>
      <pose>-2.5974 1.85613 -0.010992 0.021648 0 -1.57</pose>
    </include>
    <include>
      <uri>file://Vanity</uri>
      <name>Vanity_1</name>
      <pose>-2.5974 0.634325 -0.010992 0.021648 0 -1.57</pose>
    </include>
    <include>
      <uri>file://Dining Table</uri>
      <name>DiningTable</name>
      <pose>-0.374337 1.33602 0 0 0 -1.57</pose>
    </include>
    <include>
      <uri>file://Chair</uri>
      <name>Chair</name>
      <pose>2.79762 -1.26474 -0 -0 0 -2.3062</pose>
    </include>
    <include>
      <uri>file://Sofa</uri>
      <name>Sofa</name>
      <pose>-0.546136 -1.92328 0.000119 -0 0 1.57</pose>
    </include>
    <light name='sun' type='directional'>
      <pose>0 0 10 0 -0 0</pose>
      <cast_shadows>true</cast_shadows>
      <intensity>1</intensity>
      <direction>-0.5 0.1 -0.9</direction>
      <diffuse>0.8 0.8 0.8 1</diffuse>
      <specular>0.2 0.2 0.2 1</specular>
      <attenuation>
        <range>1000</range>
        <linear>0.01</linear>
        <constant>0.90000000000000002</constant>
        <quadratic>0.001</quadratic>
      </attenuation>
      <spot>
        <inner_angle>0</inner_angle>
        <outer_angle>0</outer_angle>
        <falloff>0</falloff>
      </spot>
    </light>
  </world>
</sdf>
```

**æ„å»º**

ç»ˆç«¯ä¸­è¿›å…¥å½“å‰å·¥ä½œç©ºé—´ï¼Œç¼–è¯‘åŠŸèƒ½åŒ…ï¼š

```Bash
colcon build  --packages-select demo_gazebo_sim
```

**æ‰§è¡Œ**

ç»ˆç«¯ä¸­è¿›å…¥å½“å‰å·¥ä½œç©ºé—´ï¼Œè°ƒç”¨å¦‚ä¸‹æŒ‡ä»¤æ‰§è¡Œlaunchæ–‡ä»¶ï¼š

```Bash
. install/setup.bash
ros2 launch demo_gazebo_sim gazebo_sim_world.launch.py
```

è¿è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjYwNDhjZDY5ZWViZTFiODkzNmJkNDlmYmM4Mjg2ZDFfeExmSHBQWEswdVd3Z2c4eElTVXlDQ2lGVzFlM21aM2JfVG9rZW46TDdQM2JNZURmb0NRQzd4b0o2NGNSYlQybmhmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

7.  ### IgnGæ·»åŠ æœºå™¨äºº
    

Ignition Gazeboä¸­å¯ä»¥ç›´æ¥åˆ›å»ºæœºå™¨äººæ¨¡å‹ï¼Œæˆ–è€…ä¹Ÿå¯ä»¥åŠ è½½ROS2ä¸­URDFæ ¼å¼çš„æœºå™¨äººæ¨¡å‹ï¼Œæ­¤å¤„æˆ‘ä»¬ä½¿ç”¨åè€…ï¼ˆä¹Ÿå¯ä»¥é€‰æ‹©ç”¨è‡ªå·±çš„urdfå°è½¦ï¼Œä½†æ˜¯æ³¨æ„ä¿®æ”¹launchçš„è·¯å¾„ï¼‰ã€‚

æˆ‘æ²¡æœ‰ç”¨èµµè™šå·¦è€å¸ˆçš„mycar\_descriptionï¼Œç”¨çš„è‡ªå·±çš„å°è½¦æ¨¡å‹ï¼Œåé¢çš„ä¸€ç³»åˆ—æºç éƒ½åœ¨ä¸‹æ–¹è¿™ä¸ªGithubä»“åº“ä¸­ï¼Œéœ€è¦çš„å¯ä»¥è‡ªè¡Œclone.

https://github.com/tungchiahui/ROS2\_WS/tree/main/6.ws\_simulations

**å‡†å¤‡æœºå™¨äººæ¨¡å‹åŠŸèƒ½åŒ…**

å¤åˆ¶æœºå™¨äººæè¿°åŠŸèƒ½åŒ…mycar\_descriptionåˆ°å·¥ä½œç©ºé—´çš„srcç›®å½•ï¼Œign\_modelsä¸­æ–°å»ºmycar\_descriptionç›®å½•ï¼Œå¹¶å°†åŠŸèƒ½åŒ…mycar\_descriptionä¸‹çš„meshç›®å½•å¤åˆ¶è¿›ign\_modelsä¸­çš„mycar\_descriptionç›®å½•ã€‚

**æœºå™¨äººæ¨¡å‹åŠŸèƒ½åŒ…ä¸‹æ–°å»ºlaunchæ–‡ä»¶**

æ–°å»ºlaunchæ–‡ä»¶mycar\_desc\_sim.launch.pyï¼Œå¹¶è¾“å…¥å¦‚ä¸‹å†…å®¹ï¼š

```Python
from launch import LaunchDescription
from launch_ros.actions import Node
import os
from ament_index_python.packages import get_package_share_directory
from launch_ros.parameter_descriptions import ParameterValue
from launch.substitutions import Command,LaunchConfiguration
from launch.actions import DeclareLaunchArgument

#ç¤ºä¾‹ï¼š ros2 launch cpp06_urdf display.launch.py model:=`ros2 pkg prefix --share cpp06_urdf`/urdf/urdf/demo01_helloworld.urdf
def generate_launch_description():

    MYCAR_MODEL = os.environ['MYCAR_MODEL']

    mycar_description = get_package_share_directory("mycar_description")
    default_model_path = os.path.join(mycar_description,"urdf",MYCAR_MODEL + ".urdf")
    model = DeclareLaunchArgument(name="model", default_value=default_model_path)

    # åŠ è½½æœºå™¨äººæ¨¡å‹
    # å¯åŠ¨ robot_state_publisher èŠ‚ç‚¹å¹¶ä»¥å‚æ•°æ–¹å¼åŠ è½½ urdf æ–‡ä»¶
    robot_description = ParameterValue(Command(["xacro ",LaunchConfiguration("model")]))
    robot_state_publisher = Node(
        package="robot_state_publisher",
        executable="robot_state_publisher",
        parameters=[{"robot_description": robot_description}]
    )

    return LaunchDescription([
        model,
        robot_state_publisher,
    ])
```

è¾ƒä¹‹äºä»¥å¾€è¯¥æ–‡ä»¶ç¼ºå°‘äº†joint\_state\_publisherèŠ‚ç‚¹ï¼Œè¯¥èŠ‚ç‚¹ä½œç”¨æ˜¯å‘å¸ƒæ´»åŠ¨å…³èŠ‚çŠ¶æ€ï¼Œè¿™ä¸€åŠŸèƒ½åç»­ç”±ignitionå®ç°ã€‚

**æ·»åŠ æœºå™¨äººæ¨¡å‹**

ä¿®æ”¹gazebo\_sim\_world.launch.pyæ–‡ä»¶ï¼ŒåŒ…å«æœºå™¨äººæ¨¡å‹çš„å‘å¸ƒæ–‡ä»¶å¹¶åœ¨Gazeboä¸­ç”Ÿæˆæœºå™¨äººæ¨¡å‹ï¼Œä¿®æ”¹åçš„ä»£ç å¦‚ä¸‹ï¼š

```Python
import os

from ament_index_python.packages import get_package_share_directory

from launch import LaunchDescription
from launch.actions import IncludeLaunchDescription
from launch.launch_description_sources import PythonLaunchDescriptionSource
from launch_ros.actions import Node

def generate_launch_description():

    this_pkg = get_package_share_directory("demo_gazebo_sim")
    mycar_desc_pkg = get_package_share_directory("mycar_description")
    pkg_ros_gz_sim = get_package_share_directory("ros_gz_sim")
    world_file = os.path.join(this_pkg,"world","house.sdf")

    gz_sim = IncludeLaunchDescription(
        PythonLaunchDescriptionSource(
            os.path.join(pkg_ros_gz_sim, "launch", "gz_sim.launch.py")),
        launch_arguments={
            "gz_args": "-r " + world_file
        }.items(),
    )
    mycar_desc = IncludeLaunchDescription(
        PythonLaunchDescriptionSource(
            os.path.join(mycar_desc_pkg,"launch","mycar_desc_sim.launch.py")
        )
    )
    spawn = Node(package="ros_gz_sim", executable="create",
                arguments=[
                "-name", "mycar",
                "-x", "0",
                "-z", "0.01", #è®¾ç½®ä¸º0,å¯èƒ½ä¼šé™·è¿›åœ°é‡Œ
                "-y", "0",
                "-topic", "/robot_description"],
            output="screen")

    return LaunchDescription([
        gz_sim,
        spawn,
        mycar_desc,
    ])
```

**æ„å»º**

ç»ˆç«¯ä¸­è¿›å…¥å½“å‰å·¥ä½œç©ºé—´ï¼Œç¼–è¯‘åŠŸèƒ½åŒ…ï¼š

```Bash
colcon build --packages-select mycar_description demo_gazebo_sim
```

**æ‰§è¡Œ**

ç»ˆç«¯ä¸­è¿›å…¥å½“å‰å·¥ä½œç©ºé—´ï¼Œè°ƒç”¨å¦‚ä¸‹æŒ‡ä»¤æ‰§è¡Œlaunchæ–‡ä»¶ï¼šï¼ˆæ‰§è¡Œèµ·æ¥æœ‰é—®é¢˜çš„è¯ï¼Œä½ åªè¦å­¦è¿‡urdfæ€ä¹ˆè·‘ï¼Œåº”è¯¥æ‹¥æœ‰è‡ªæˆ‘å¯»æ‰¾é”™è¯¯çš„èƒ½åŠ›äº†ï¼Œè‡ªå·±æ‰¾å§ï¼‰

```Bash
. install/setup.bash
# MYCAR_MODELå€¼å¯ä»¥è®¾ç½®ä¸ºarduinoã€stm32_2w æˆ–stm32_4wï¼ˆè¿™ä¸ªæ˜¯å…·ä½“çš„urdfæ–‡ä»¶åï¼Œåœ¨mycar_descriptionåŒ…ä¸‹çš„ï¼‰
export MYCAR_MODEL=stm32_4w
ros2 launch demo_gazebo_sim gazebo_sim_world.launch.py
```

è¿è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmZkMTBlMjU2NDQ5MjkzOTg4OGY3ZGI4ZjY2YzE0ZjVfRVpTN0VvNHdaRWswQzh2dlQ5d1VmQXprclkwUG8wYkJfVG9rZW46RjN4UGJuZHFmbzRkNmZ4c3FMQWNLam1pbjVkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

8.  ### Â Â  IgnGè¿åŠ¨æ§åˆ¶å™¨(å®è´¨ä¸Šå°±æ˜¯<gazebo>æ ‡ç­¾)
    

æœ¬èŠ‚å°†ä»‹ç»å¦‚ä½•è®©ä½ çš„æœºå™¨äººåŠ¨èµ·æ¥ã€‚

åŸç†å°±æ˜¯ç»™urdfæˆ–xacroç­‰æ·»åŠ <gazebo>æ ‡ç­¾ï¼š

http://sdformat.org/tutorials?tut=sdformat\_urdf\_extensions&cat=specification&

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDAyMzEyZjFlZmVhMWU2ZDgyZmMyYTkyYWE4Njg1MjVfV2VQb2hoOGFBRTF1WmVGVDFTbFhKVFRKUTFEaG9uV0lfVG9rZW46VkFINGI4Wnphb3l6a1F4VXFzQWNqZXVHbmloXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

https://gazebosim.org/api/plugin/2/index.html

å®‰è£…åº“ï¼š

https://gazebosim.org/api/plugin/2/installation.html

```Bash
sudo apt-get update
sudo apt-get install lsb-release
sudo sh -c 'echo "deb http://packages.osrfoundation.org/gazebo/ubuntu-stable `lsb_release -cs` main" > /etc/apt/sources.list.d/gazebo-stable.list'
wget http://packages.osrfoundation.org/gazebo.key -O - | sudo apt-key add -
sudo apt-get update
sudo apt install libgz-plugin2-dev
```

  

åˆ©ç”¨æ’ä»¶å»è®©å°è½¦åŠ¨ï¼Œæ¯”å¦‚æœ‰ä¸¤è½®å·®é€Ÿæ’ä»¶ï¼Œå››è½®éº¦è½®æ’ä»¶ç­‰ç­‰

åŒæ—¶è¯¥æ’ä»¶è¿˜æä¾›äº†ä¸€äº›å¯ä»¥æ§åˆ¶è¾“å‡ºçš„é€‰é¡¹ï¼Œå› ä¸ºæ˜¯ä»¿çœŸï¼Œæ‰€ä»¥è¿˜è¦å‘Šè¯‰æ’ä»¶è½®å­å¯¹åº”çš„jointåç§°ç­‰ä¿¡æ¯ï¼Œè¿™æ ·å°±æœ‰äº†ä¸‹é¢è¿™ä¸ªå‚æ•°è¡¨æ ¼ï¼š

<!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
| é…ç½®é¡¹ | å«ä¹‰ |
|:---|:---|
| ros | rosç›¸å…³é…ç½®ï¼ŒåŒ…å«å‘½åç©ºé—´å’Œè¯é¢˜é‡æ˜ å°„ç­‰ |
| update_rate | æ•°æ®æ›´æ–°é€Ÿç‡ |
| left_joint | å·¦è½®å…³èŠ‚åç§° |
| right_joint | å³è½®å…³èŠ‚åç§° |
| wheel_separation | å·¦å³è½®å­çš„é—´è· |
| wheel_diameter | è½®å­çš„ç›´å¾„ |
| max_wheel_torque | è½®å­æœ€å¤§çš„åŠ›çŸ© |
| max_wheel_acceleration | è½®å­æœ€å¤§çš„åŠ é€Ÿåº¦ |
| publish_odom | æ˜¯å¦å‘å¸ƒé‡Œç¨‹è®¡ |
| publish_odom_tf | æ˜¯å¦å‘å¸ƒé‡Œç¨‹è®¡çš„tfå¼€å…³ |
| publish_wheel_tf | æ˜¯å¦å‘å¸ƒè½®å­çš„tfæ•°æ®å¼€å…³ |
| odometry_frame | é‡Œç¨‹è®¡çš„framed IDï¼Œæœ€ç»ˆä½“ç°åœ¨è¯é¢˜å’ŒTFä¸Š |
| robot_base_frame | æœºå™¨äººçš„åŸºç¡€frameçš„ID |

  

  

**ä¿®æ”¹URDFæ–‡ä»¶**

arduino.urdf å’Œ stm32\_2w.urdf æ–‡ä»¶ä¸­ï¼Œåœ¨`<robot>`æ ¹æ ‡ç­¾ä¸‹æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š

```XML
  <!-- è¿åŠ¨æ§åˆ¶æ’ä»¶ -->
  <gazebo>
      <plugin filename="libignition-gazebo-diff-drive-system.so"
        name="ignition::gazebo::systems::DiffDrive">
        <left_joint>left_joint</left_joint>
        <right_joint>right_joint</right_joint>
        <wheel_separation>0.2097</wheel_separation>
        <wheel_radius>0.03415</wheel_radius>
        <odom_publish_frequency>10</odom_publish_frequency>
        <frame_id>odom</frame_id>
        <child_frame_id>base_footprint</child_frame_id>
        <topic>/cmd_vel</topic>
        <max_linear_acceleration>10</max_linear_acceleration>
        <min_linear_acceleration>-10</min_linear_acceleration>
        <max_angular_acceleration>10</max_angular_acceleration>
        <min_angular_acceleration>-10</min_angular_acceleration>
        <max_linear_velocity>0.5</max_linear_velocity>
        <min_linear_velocity>-0.5</min_linear_velocity>
        <max_angular_velocity>1</max_angular_velocity>
        <min_angular_velocity>-1</min_angular_velocity>
      </plugin>

  </gazebo>

  <!-- å…³èŠ‚çŠ¶æ€å‘å¸ƒ -->
  <gazebo>
    <plugin filename="ignition-gazebo-joint-state-publisher-system"
      name="ignition::gazebo::systems::JointStatePublisher">
    </plugin>
  </gazebo>
```

stm32\_4w.urdf æ–‡ä»¶ä¸­ï¼Œåœ¨`<robot>`æ ¹æ ‡ç­¾ä¸‹æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š

```XML
<!-- è¿åŠ¨æ§åˆ¶æ’ä»¶ -->
<gazebo>
    <plugin
        filename="ignition-gazebo-diff-drive-system"
        name="ignition::gazebo::systems::DiffDrive">
        <left_joint>left_former_joint</left_joint>
        <left_joint>left_rear_joint</left_joint>
        <right_joint>right_former_joint</right_joint>
        <right_joint>right_rear_joint</right_joint>
        <wheel_separation>0.4</wheel_separation>
        <wheel_radius>0.0415</wheel_radius>
        <odom_publish_frequency>50</odom_publish_frequency>
        <frame_id>odom</frame_id>
        <child_frame_id>base_footprint</child_frame_id>
        <topic>/cmd_vel</topic>
        <max_linear_acceleration>10</max_linear_acceleration>
        <min_linear_acceleration>-10</min_linear_acceleration>
        <max_angular_acceleration>10</max_angular_acceleration>
        <min_angular_acceleration>-10</min_angular_acceleration>
        <max_linear_velocity>0.5</max_linear_velocity>
        <min_linear_velocity>-0.5</min_linear_velocity>
        <max_angular_velocity>1</max_angular_velocity>
        <min_angular_velocity>-1</min_angular_velocity>
      </plugin>
  </gazebo>
  <!-- å…³èŠ‚çŠ¶æ€å‘å¸ƒ -->
  <gazebo>
    <plugin filename="ignition-gazebo-joint-state-publisher-system"
      name="ignition::gazebo::systems::JointStatePublisher">
    </plugin>
  </gazebo>
```

å¦‚æœæ˜¯éº¦è½®ï¼ˆROS1çš„ï¼ŒROS2çš„å¾…æ›´æ–°ï¼‰ï¼ˆæŠŠè½®å­å…³èŠ‚è®¾ç½®ä¸ºè‡ªå·±è½®å­å…³èŠ‚åå³å¯ï¼‰ï¼š

```XML
<robot name="mycar" xmlns:xacro="http://wiki.ros.org/xacro">
 
    <!-- ä¼ åŠ¨å®ç°:ç”¨äºè¿æ¥æ§åˆ¶å™¨ä¸å…³èŠ‚ -->
    <xacro:macro name="joint_trans" params="joint_name">
        <!-- Transmission is important to link the joints and the controller -->
        <transmission name="${joint_name}_trans">
            <type>transmission_interface/SimpleTransmission</type>
            <joint name="${joint_name}">
                <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>
            </joint>
            <actuator name="${joint_name}_motor">
                <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>
                <mechanicalReduction>1</mechanicalReduction>
            </actuator>
        </transmission>
    </xacro:macro>
 
    <!-- æ¯ä¸€ä¸ªé©±åŠ¨è½®éƒ½éœ€è¦é…ç½®ä¼ åŠ¨è£…ç½® -->
    <xacro:joint_trans joint_name="LeftFrontwheelToBase" />
    <xacro:joint_trans joint_name="LeftBackwheelToBase" />
    <xacro:joint_trans joint_name="RightFrontwheelToBase" />
    <xacro:joint_trans joint_name="RightBackwheelToBase" />
 
    <!-- éº¦è½®æ§åˆ¶å™¨ -->
    <gazebo>
        <plugin name="mecanum_controller" filename="libgazebo_ros_planar_move.so">
            <commandTopic>cmd_vel</commandTopic>
            <odometryTopic>odom</odometryTopic>
            <odometryFrame>odom</odometryFrame>
            <leftFrontJoint>LeftFrontwheelToBase</leftFrontJoint>
            <rightFrontJoint>RightFrontwheelToBase</rightFrontJoint>
            <leftRearJoint>LeftBackwheelToBase</leftRearJoint>
            <rightRearJoint>RightBackwheelToBase</rightRearJoint>
            <odometryRate>100</odometryRate>
            <robotBaseFrame>base_footprint</robotBaseFrame>
            <broadcastTF>1</broadcastTF>
        </plugin>
    </gazebo>
 
</robot>
```

  

**ä¿®æ”¹launchæ–‡ä»¶**

ä¿®æ”¹gazebo\_sim\_world.launch.pyæ–‡ä»¶ï¼Œä¿®æ”¹åçš„ä»£ç å¦‚ä¸‹ï¼š

```JavaScript
import os

from ament_index_python.packages import get_package_share_directory

from launch import LaunchDescription
from launch.actions import IncludeLaunchDescription
from launch.launch_description_sources import PythonLaunchDescriptionSource
from launch_ros.actions import Node

def generate_launch_description():

    this_pkg = get_package_share_directory("demo_gazebo_sim")
    mycar_desc_pkg = get_package_share_directory("mycar_description")
    pkg_ros_gz_sim = get_package_share_directory("ros_gz_sim")
    world_file = os.path.join(this_pkg,"world","base.sdf")

    gz_sim = IncludeLaunchDescription(
        PythonLaunchDescriptionSource(
            os.path.join(pkg_ros_gz_sim, "launch", "gz_sim.launch.py")),
        launch_arguments={
            "gz_args": "-r " + world_file
        }.items(),
    )
    mycar_desc = IncludeLaunchDescription(
        PythonLaunchDescriptionSource(
            os.path.join(mycar_desc_pkg,"launch","mycar_desc_sim.launch.py")
        )
    )
    spawn = Node(package="ros_gz_sim", executable="create",
                arguments=[
                "-name", "mycar",
                "-x", "-4",
                "-z", "0.01", #è®¾ç½®ä¸º0,å¯èƒ½ä¼šé™·è¿›åœ°é‡Œ
                "-y", "0",
                "-topic", "/robot_description"],
            output="screen")

    # Bridge
    bridge = Node(
        package="ros_gz_bridge",
        executable="parameter_bridge",
        arguments=["/cmd_vel@geometry_msgs/msg/Twist@gz.msgs.Twist",
                   "/model/mycar/odometry@nav_msgs/msg/Odometry@gz.msgs.Odometry",
                   "/model/mycar/tf@tf2_msgs/msg/TFMessage[gz.msgs.Pose_V",
                   "/clock@rosgraph_msgs/msg/Clock[gz.msgs.Clock",
                   "/world/empty/model/mycar/joint_state@sensor_msgs/msg/JointState[gz.msgs.Model",
                   ],
        parameters=[{"qos_overrides./model/mycar.subscriber.reliability": "reliable"}],
        remappings=[
                ("/model/mycar/tf", "/tf"),
                ("/world/empty/model/mycar/joint_state","joint_states"),
                ("/model/mycar/odometry","/odom")
            ],
        output="screen"
    )

    return LaunchDescription([
        gz_sim,
        spawn,
        mycar_desc,
        bridge
    ])
```

**æ„å»º**

ç»ˆç«¯ä¸­è¿›å…¥å½“å‰å·¥ä½œç©ºé—´ï¼Œç¼–è¯‘åŠŸèƒ½åŒ…ï¼š

```Bash
colcon build --packages-select mycar_description demo_gazebo_sim
```

**æ‰§è¡Œ**

ç»ˆç«¯ä¸­è¿›å…¥å½“å‰å·¥ä½œç©ºé—´ï¼Œè°ƒç”¨å¦‚ä¸‹æŒ‡ä»¤æ‰§è¡Œlaunchæ–‡ä»¶ï¼š

```Bash
. install/setup.bash
export MYCAR_MODEL=stm32_4w # MYCAR_MODELå€¼å¯ä»¥è®¾ç½®ä¸ºarduinoã€stm32_2w æˆ–stm32_4wï¼ˆè¿™ä¸ªæ˜¯å…·ä½“çš„urdfæ–‡ä»¶åï¼Œåœ¨mycar_descriptionåŒ…ä¸‹çš„ï¼‰
ros2 launch demo_gazebo_sim gazebo_sim_world.launch.py
```

å†å¯åŠ¨é”®ç›˜æ§åˆ¶èŠ‚ç‚¹ï¼Œå°±å¯ä»¥æ§åˆ¶æœºå™¨äººè¿åŠ¨äº†ã€‚

```Bash
ros2 run teleop_twist_keyboard teleop_twist_keyboard
```

è¿˜å¯ä»¥å¯åŠ¨rviz2ï¼Œä»¥æŸ¥çœ‹é‡Œç¨‹è®¡æ¶ˆæ¯ä»¥åŠåæ ‡å˜æ¢ã€‚ç»ˆç«¯ä¸­è¿›å…¥å½“å‰å·¥ä½œç©ºé—´ï¼Œè°ƒç”¨å¦‚ä¸‹æŒ‡ä»¤æ‰§è¡Œlaunchæ–‡ä»¶ï¼š

å¯åŠ¨rviz2

```Bash
. install/setup.bash
rviz2
```

RVIZ2è½¯ä»¶é…ç½®å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTYyNmQ1NzYzZTQxOTIzNWFiNDc4NmI5NWJlNmIxOGZfQzQwamV2eFhBeFgwam5VclI1WThuWFpjdHJQWHlNT3hfVG9rZW46V2lVT2JiRXlTb0JLcDF4WmhyRWNsalZLbldjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTBjMjBiNGRiZTM1OTNhYzg5ZmI4MDc0MmFkYzQyZGNfTEVIT2wxbFp2blVPQVBWV0VEam1Ld2g4eHA4RHJkRjlfVG9rZW46SjdIQmJSeVpPb01XVmx4b2I1MWM3bkdJbkRiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzIxMmIxNzcxYTNkYzMyYjllYjJhMjJlYzFhOTVkYjJfMzh2SGVZNm5hTUhiaWY2TlU4YjhCTTVWNDh1OTUydktfVG9rZW46WDlmTWJ5REVLbzJNcHJ4b3dSeGNwQlJRbldnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

9.  ### Ignition Gazeboä»¿çœŸä¹‹ä¼ æ„Ÿå™¨
    

æœ¬èŠ‚å°†ä»‹ç»å¦‚ä½•ä¸ºä»¿çœŸæœºå™¨äººæ·»åŠ é›·è¾¾ã€ç›¸æœºç­‰ä¼ æ„Ÿå™¨ã€‚æœ¬èŠ‚ä»£ç éƒ¨åˆ†å†…å®¹å¯¹äºæˆ‘ä»¬æ•™ç¨‹ä¸­æ¶‰åŠåˆ°çš„arduinoã€stm32\_2wä»¥åŠstm32\_4wç­‰æœºå™¨äººæ¨¡å‹è€Œè¨€æ˜¯å®Œå…¨é€šç”¨çš„ã€‚

**æ·»åŠ ä¼ æ„Ÿå™¨æ’ä»¶**

åœ¨è¿›è¡Œä¼ æ„Ÿå™¨æ¨¡æ‹Ÿä¹‹å‰ï¼Œéœ€è¦å…ˆæ·»åŠ ä¸€ä¸ªåä¸º`ignition-gazebo-sensors-system`çš„æ’ä»¶ï¼Œæ‰“å¼€urdfæ–‡ä»¶ï¼Œåœ¨`<robot>`æ ¹æ ‡ç­¾å†…æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š

```XML
  <!-- æ·»åŠ ä¼ æ„Ÿå™¨æ’ä»¶ -->

<gazebo>
    <plugin
      filename="ignition-gazebo-sensors-system"
      name="ignition::gazebo::systems::Sensors">
      <render_engine>ogre2</render_engine>
    </plugin>
  </gazebo>
```

ignition-gazebo-sensors-systemæ˜¯Ignition Gazeboä»¿çœŸç¯å¢ƒçš„æ’ä»¶ï¼Œæä¾›ä¼ æ„Ÿå™¨æ¨¡å‹å’Œç›¸å…³åŠŸèƒ½ï¼Œç”¨äºåˆ›å»ºã€æ¨¡æ‹Ÿå’Œæµ‹è¯•å„ç§ä¼ æ„Ÿå™¨è®¾å¤‡ã€‚å®ƒåŒ…å«å¸¸è§ä¼ æ„Ÿå™¨æ¨¡å‹ï¼Œå¦‚æ‘„åƒå¤´ã€æ¿€å…‰é›·è¾¾ç­‰ã€‚

**æ·»åŠ å„ç§ä¼ æ„Ÿå™¨**

**(æ³¨æ„ï¼Œä½ çš„æ¨¡å‹ä¸€å®šè¦æœ‰ä»¥ä¸‹å‡ ä¸ªä¼ æ„Ÿå™¨çš„æ¨¡å‹)**

é›·è¾¾çš„æ¨¡å‹ä¸éœ€è¦collisionï¼Œè¯·åˆ æ‰ï¼Œå¦åˆ™ä¼šæŒ¡æ¿€å…‰å°„å‡ºã€‚

```XML
 <!-- é›·è¾¾ä¼ æ„Ÿå™¨ -->
  <gazebo reference="laser">
    <sensor name='gpu_lidar' type='gpu_lidar'>
      <topic>scan</topic>
      <update_rate>30</update_rate>
      <lidar>
        <scan>
          <horizontal>
            <samples>640</samples>
            <resolution>1</resolution>
            <min_angle>-3.1415926</min_angle>
            <max_angle>3.1415926</max_angle>
          </horizontal>
          <vertical>
            <samples>16</samples>
            <resolution>1</resolution>
            <min_angle>-0.261799</min_angle>
            <max_angle>0.261799</max_angle>
          </vertical>
        </scan>
        <range>
          <min>0.08</min>
          <max>10.0</max>
          <resolution>0.01</resolution>
        </range>
      </lidar>
      <alwaysOn>1</alwaysOn>
      <visualize>true</visualize>
      <ignition_frame_id>laser</ignition_frame_id>
    </sensor>
  </gazebo>

  <!-- å•ç›®ç›¸æœº -->

  <gazebo reference="camera" >
    <sensor name="cam_link" type="camera">
      <update_rate>10.0</update_rate>
      <always_on>true</always_on>
      <ignition_frame_id>camera</ignition_frame_id>
      <pose>0 0 0 0 0 0</pose>
      <topic>/image_raw</topic>
      <camera name="my_camera">
        <horizontal_fov>1.3962634</horizontal_fov>
        <image>
           <width>600</width>
           <height>600</height>
           <format>R8G8B8</format>
        </image>
        <clip>
          <near>0.02</near>
          <far>300</far>
        </clip>
      </camera>
    </sensor>
  </gazebo>

  <!-- æ·±åº¦ç›¸æœº -->

  <gazebo reference="camera">
    <sensor name="depth_camera" type="depth_camera">
          <update_rate>10</update_rate>
          <topic>depth_camera</topic>
          <camera>
            <horizontal_fov>1.05</horizontal_fov>
            <image>
              <width>256</width>
              <height>256</height>
              <format>R_FLOAT32</format>
            </image>
            <clip>
              <near>0.1</near>
              <far>10.0</far>
            </clip>
          </camera>
          <alwaysOn>1</alwaysOn>
          <ignition_frame_id>camera</ignition_frame_id>
      </sensor>
  </gazebo>
```

ä»å®˜ç½‘æ‰¾åˆ°çš„imuä¼ æ„Ÿå™¨çš„

```XML
    <!-- æ·»åŠ IMUä¼ æ„Ÿå™¨æ’ä»¶ï¼ˆå’Œé›·è¾¾ï¼Œæ‘„åƒå¤´ç­‰ä¸æ˜¯ä¸€ä¸ªæ’ä»¶ï¼‰ -->
    <gazebo>
        <plugin filename="libignition-gazebo-imu-system.so"
                name="ignition::gazebo::systems::Imu">
        </plugin>
    </gazebo>

    <!-- é™€èºä»ª -->
    <!-- imuåæ ‡ç³»ç›´æ¥ç”¨base_link-->
    <gazebo reference="base_link">
        <sensor name="imu_sensor" type="imu">
            <always_on>1</always_on>
            <update_rate>30</update_rate>
            <visualize>true</visualize>
            <topic>imu</topic>
        </sensor>
    </gazebo>
```

å¯ä»¥ç”¨`ign topic -e -t /imu`æµ‹è¯•gazeboæ˜¯å¦å‘å¸ƒäº†è¯é¢˜ï¼Œåé¢å†ç”¨gazebo\_bridgeæŠŠè¯é¢˜ç»™ROS2å°±è¡Œäº†ã€‚

é»˜è®¤æƒ…å†µä¸‹ï¼Œrviz2æ²¡æœ‰æ˜¾ç¤ºimuæ¶ˆæ¯çš„æ’ä»¶ï¼Œéœ€è¦è‡ªè¡Œå®‰è£…ç›¸å…³æ’ä»¶ï¼Œå…·ä½“å®‰è£…æŒ‡ä»¤å¦‚ä¸‹ï¼š

```C++
sudo apt install ros-${ROS_DISTRO}-imu-tools
```

  

  

SolidWorksè‡ªåŠ¨ç”Ÿæˆçš„æ¨¡å‹å¯èƒ½ç¿»è½¬äº†laser\_joint,è¯·ä½ ä¿®æ”¹å›æ­£ï¼Œè¿™æ ·å¯èƒ½rivz2å°±æœ‰æ¿€å…‰äº†ï¼Œç„¶åä¿®æ”¹ä¸€ä¸‹å¯è§†åŒ–çš„æ¨¡å‹ï¼Œè®©æ¨¡å‹æ­£å¸¸ï¼Œä¸è¦ç»™ç¢°æ’ï¼Œä¸ç„¶å¯èƒ½ä¼šé®æŒ¡æ¿€å…‰ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWM0ODBkMmFkYTA2YmE5ZmM3N2MxNjQ2NmIzZTlkOWVfVHRaNE4yN1BrVDBEa3A4THFEYWVyMnZyMkw5eXlWUFJfVG9rZW46UFNQa2Jkdnd1b3pHd3p4RXdVOWNBdjhTbnhjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

ä¿®æ”¹gazebo\_sim\_world.launch.pyæ–‡ä»¶ï¼Œä¿®æ”¹åçš„ä»£ç å¦‚ä¸‹ï¼š

```Python
import os

from ament_index_python.packages import get_package_share_directory

from launch import LaunchDescription
from launch.actions import IncludeLaunchDescription
from launch.launch_description_sources import PythonLaunchDescriptionSource
from launch_ros.actions import Node

def generate_launch_description():

    this_pkg = get_package_share_directory("demo_gazebo_sim")
    mycar_desc_pkg = get_package_share_directory("mycar_description")
    pkg_ros_gz_sim = get_package_share_directory("ros_gz_sim")
    world_file = os.path.join(this_pkg,"world","house.sdf")

    gz_sim = IncludeLaunchDescription(
    PythonLaunchDescriptionSource(
        os.path.join(pkg_ros_gz_sim, "launch", "gz_sim.launch.py")),
        launch_arguments={
        "gz_args": "-r " + world_file
        }.items(),
    )
    mycar_desc = IncludeLaunchDescription(
        PythonLaunchDescriptionSource(
            os.path.join(mycar_desc_pkg,"launch","mycar_desc_sim.launch.py")
        )
    )
    spawn = Node(package="ros_gz_sim", executable="create",
        arguments=[
            "-name", "mycar",
            "-x", "-4",
            "-z", "0.01", #è®¾ç½®ä¸º0,å¯èƒ½ä¼šé™·è¿›åœ°é‡Œ
            "-y", "0",
            "-topic", "/robot_description"],
        output="screen")

    # Bridge
    bridge = Node(
        package="ros_gz_bridge",
        executable="parameter_bridge",
        arguments=["/cmd_vel@geometry_msgs/msg/Twist@gz.msgs.Twist",
            "/model/mycar/odometry@nav_msgs/msg/Odometry@gz.msgs.Odometry",
            "/model/mycar/tf@tf2_msgs/msg/TFMessage[gz.msgs.Pose_V",
            "/clock@rosgraph_msgs/msg/Clock[gz.msgs.Clock",
            "/world/empty/model/mycar/joint_state@sensor_msgs/msg/JointState[gz.msgs.Model",
            "/scan@sensor_msgs/msg/LaserScan@gz.msgs.LaserScan",
            "/scan/points@sensor_msgs/msg/PointCloud2@gz.msgs.PointCloudPacked",
            "/image_raw@sensor_msgs/msg/Image@gz.msgs.Image",
            "/camera_info@sensor_msgs/msg/CameraInfo@gz.msgs.CameraInfo",
            "/depth_camera@sensor_msgs/msg/Image@gz.msgs.Image",
            "/imu@sensor_msgs/msg/Imu[gz.msgs.IMU",
            "/imu/angular_velocity@geometry_msgs/msg/Vector3[gz.msgs.Vector3d"
        ],
        parameters=[{"qos_overrides./model/mycar.subscriber.reliability": "reliable"}],
        remappings=[
            ("/model/mycar/tf", "/tf"),
            ("/world/empty/model/mycar/joint_state","joint_states"),
            ("/model/mycar/odometry","/odom")
        ],
        output="screen"
    )

    return LaunchDescription([
        gz_sim,
        spawn,
        mycar_desc,
        bridge
    ])
```

**æ„å»º**

ç»ˆç«¯ä¸­è¿›å…¥å½“å‰å·¥ä½œç©ºé—´ï¼Œç¼–è¯‘åŠŸèƒ½åŒ…ï¼š

```Bash
colcon build --packages-select mycar_description demo_gazebo_sim
```

**æ‰§è¡Œ**

ç»ˆç«¯ä¸­è¿›å…¥å½“å‰å·¥ä½œç©ºé—´ï¼Œè°ƒç”¨å¦‚ä¸‹æŒ‡ä»¤æ‰§è¡Œlaunchæ–‡ä»¶ï¼š

```Bash
. install/setup.bash
export MYCAR_MODEL=stm32_4w # MYCAR_MODELå€¼å¯ä»¥è®¾ç½®ä¸ºarduinoã€stm32_2w æˆ–stm32_4w
ros2 launch demo_gazebo_sim gazebo_sim_world.launch.py
```

å†å¯åŠ¨é”®ç›˜æ§åˆ¶èŠ‚ç‚¹ï¼Œå°±å¯ä»¥æ§åˆ¶æœºå™¨äººè¿åŠ¨äº†ã€‚

è¿˜å¯ä»¥å¯åŠ¨rviz2ï¼Œä»¥æŸ¥çœ‹æœºå™¨äººå‘å¸ƒçš„è¯¸å¤šæ•°æ®ã€‚ç»ˆç«¯ä¸­è¿›å…¥å½“å‰å·¥ä½œç©ºé—´ï¼Œè°ƒç”¨å¦‚ä¸‹æŒ‡ä»¤æ‰§è¡Œlaunchæ–‡ä»¶ï¼š

```Bash
. install/setup.bash
rviz2
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2MzYTM0YjY1OTQ5ZmIzNDU2ZjY4MGQ0Y2RhNTc5YjVfQ01nUk5BejZzcmtEYkJ5YW85WWdKRzZPY2VsNXZBZzNfVG9rZW46UEduZGJuVnBab3JTaFR4RVNVTmN4anpXbjBlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWQ0YWNkNjY3ZTI3MTgwNDk0YTIwMWE4MTI0ODU1YTdfbEgxZ0xnY3Z4V3NYS1pIRlc2M3NSUVoyODlTWkpqZU1fVG9rZW46SXdRSGJVc3Qxb0VVWWV4QnoxMGNHV1NObjZnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æˆ‘æ²¡æœ‰ç”¨èµµè™šå·¦è€å¸ˆçš„mycar\_descriptionï¼Œç”¨çš„è‡ªå·±çš„å°è½¦æ¨¡å‹ï¼Œåé¢çš„ä¸€ç³»åˆ—æºç éƒ½åœ¨ä¸‹æ–¹è¿™ä¸ªGithubä»“åº“ä¸­ï¼Œéœ€è¦çš„å¯ä»¥è‡ªè¡Œclone.

https://github.com/tungchiahui/ROS2\_WS/tree/main/6.ws\_simulations

(æŠŠä¸Šé¢çš„å…¨éƒ¨å¤ç°ï¼Œæ‰èƒ½å¤Ÿè¿›è¡Œä¸‹ä¸€ç« å¯¼èˆªï¼Œä¸‹ä¸€ç« å¯¼èˆªä¾ç„¶åŸºäºä»¿çœŸ)

  

4.  ## å°†Ign Gazeboè¿ç§»è‡³Gz Sim
    

**ï¼ˆå³ROS2Humbleè¿ç§»è‡³ROS2JazzyåŠä¹‹åçš„ç‰ˆæœ¬ï¼Œåªç”¨Humbleçš„ä¹Ÿè¦çœ‹ä¸€ä¸‹ï¼‰**

ç”±äºåªæœ‰ROS2 Humbleçš„Gazeboå«åšign gazeboï¼Œåˆ°äº†ROS2 JazzyåŠä¹‹åçš„ç‰ˆæœ¬ï¼Œåº”è¯¥ä¼šéƒ½æ”¹åå«gazeboï¼ˆç®€ç§°gz simï¼‰ã€‚

å¦‚æœä½ è¦æŠŠä»£ç ä»ROS2 Humbleè¿ç§»åˆ°ROS2 Jazzyï¼Œé‚£ä¹ˆå…¼å®¹æ€§é—®é¢˜æœ€å¤§çš„åœ°æ–¹å°±æ˜¯Gazeboï¼Œéœ€è¦ä¿®æ”¹å¾ˆå¤šä¸œè¥¿ã€‚

ä½†æ˜¯Ign Gazeboä¸Gz Simçš„æœ€å¤§åŒºåˆ«å…¶å®å°±æ˜¯é‡å‘½åäº†ä¸€ä¸‹ï¼Œæ‰€ä»¥è¿ç§»å¾ˆå¥½è¿ç§»ã€‚

ä¸ºä½•éƒ½æ˜¯ROS2ï¼Œä¸”gazeboç•Œé¢åŠŸèƒ½å‡ ä¹éƒ½ä¸€æ¨¡ä¸€æ ·è¿˜ä»£ç ä¸äº’é€šå‘¢ï¼Ÿ

æ˜¯å› ä¸ºgazeboç»„ç»‡æ—©æœŸåœ¨ä¸ºROS2å¼€å‘æ–°ç‰ˆGazeboæ—¶ï¼Œä¸ºäº†å’ŒGazebo Classicåšå‡ºåŒºåˆ†ï¼Œæ‰€ä»¥ç»™æ–°ç‰ˆGazeboå‘½åä¸ºIgnition Gazeboï¼Œå¹¶åœ¨ROS2 Humbleä¸Šæ¨è¡Œã€‚

åæ¥Gazeboç»„ç»‡å‘ç°è¿™ç§å‘½åæ–¹å¼åŠå…¶éº»çƒ¦ï¼Œæ‰€ä»¥åœ¨æ–°ç‰ˆROS2 Jazzyä¸Šåˆä¿®æ”¹å›äº†Gazeboçš„åå­—(ç®€ç§°Gz Sim)ã€‚

æ‰€ä»¥å¹¶ä¸æ˜¯åŠŸèƒ½ä¸äº’é€šï¼Œä»…ä»…æ˜¯åå­—ä¸äº’é€šç½¢äº†ï¼Œåªéœ€è¦é‡å‘½åï¼Œå°±è¿™ä¹ˆç®€å•ã€‚

https://gazebosim.org/docs/harmonic/migration\_from\_ignition/

ä¸»è¦ä¿®æ”¹ä»¥ä¸‹éƒ¨åˆ†ï¼š

1.  ### SDFæ–‡ä»¶
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWQwYjVhZTJjNzc1NTVjNWRjZGZhNDdiNWJhMTBmYTlfcTZYdFNrMmlzS3RycGczVEdqZG43emJQa2hsUmE0UWhfVG9rZW46WG9FaGIxampjb243Vkd4WHh4NmNkQmdEbkZoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ ¹æ®å®˜æ–¹æ‰€è¯´ï¼Œæ™®é€šçš„è¦æŠŠignitionå…¨éƒ¨æ›¿æ¢ä¸ºgz.

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Zjk0MzZhZWRjMzQ5NzhjOTM4MzZlZDhkNjYzMTRmYmJfNzB1Ym5XbW1GWE1JQmFvTGRPZXBRTnJkNnF0dUtveEZfVG9rZW46Uk1JOGJmbjN3b2U3ZTJ4V3J4NWM1SWI5bjBjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æ’ä»¶è¦æŒ‰ç…§ä¸Šé¢çš„ä¿®æ”¹ï¼Œæ¯”å¦‚ignition::gazeboæ”¹ä¸ºgz::simã€‚ç„¶åignition::ä¿®æ”¹ä¸ºgz::ã€‚

*   æ‰€æœ‰ `ignition-` å‰ç¼€ â†’ `gz-`
    
*   æ‰€æœ‰ `ignition::gazebo` å‘½åç©ºé—´ â†’ `gz::sim`
    
*   æ’ä»¶ç³»ç»Ÿåç§° `ignition-gazebo-XXX-system` â†’ `gz-sim-XXX-system`
    
*   æ–°ç‰ˆæœ¬ä¸­`alwaysOn`å·²è¢«always\_onæ›¿ä»£ï¼Œ`gz_frame_id`æ”¹ä¸ºpose relative\_to""
    
*   ç¡®ä¿æ‰€æœ‰ç¯å¢ƒå˜é‡ï¼ˆå¦‚`IGN_GAZEBO_RESOURCE_PATH`ï¼‰æ›´æ–°ä¸º`GZ_SIM_RESOURCE_PATH`
    

<!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
| åŸå­—æ®µ | æ–°å­—æ®µ | ç¤ºä¾‹åœºæ™¯ |
|:---|:---|:---|
| ignition-gazebo-* | gz-sim-* | æ’ä»¶æ–‡ä»¶å |
| ignition::gazebo::* | gz::sim::* | æ’ä»¶å‘½åç©ºé—´ |
| IGN_GAZEBOç¯å¢ƒå˜é‡å‰ç¼€ | GZ_SIMå‰ç¼€ | èµ„æºè·¯å¾„é…ç½® |

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MWZiZTNjNDY5ZDZlMmJmYTM5ZjNjZWQ1OThjYjAyZWRfUjZMMVVlaDh0VDNBVmlpQmo2Rm9XMHZaVWJqU255MUZfVG9rZW46T09xWGJOektQb1RCME14eEFpZmN1V0JEbnZiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTk1YmE0YWNkYTgyMjNjOGVjNzA1YTgwNGU0MTI3YWRfSmRzUllvWnd5bDNoVUw1VkoxTlczcVpsekU1QjlBMXJfVG9rZW46UEpxVmJvR3lxb0dKWVl4bDY0QmNoOVNpbkZkXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

å…·ä½“ä»£ç çœ‹æˆ‘çš„ä»“åº“ï¼š

https://github.com/CyberNaviRobot/CyberRobot\_ROS2\_Jazzy\_WS

  

  

  

  

5.  ## æœ¬ç« å°ç»“
    

æœ¬ç« ä¸»è¦ä»‹ç»äº†2Dä»¿çœŸå·¥å…·stage\_ros2ä»¥åŠ3Dä»¿çœŸå·¥å…·ignition gazeboåœ¨ROS2ä¸­çš„åº”ç”¨ã€‚

ç›¸å…³çŸ¥è¯†ç‚¹å¦‚ä¸‹ï¼š

*   ä»¿çœŸçš„ç†è®ºçŸ¥è¯†ï¼›
    
*   stage\_ros2åœ¨ROS2ä¸­çš„ä½¿ç”¨ï¼›
    
*   ignition gazeboåœ¨ROS2ä¸­çš„ä½¿ç”¨ã€‚
    

é€šè¿‡ä¸Šè¿°å†…å®¹æˆ‘ä»¬ä»‹ç»äº†ä»¿çœŸåœ¨ROS2ä¸­çš„åº”ç”¨åœºæ™¯ã€æ¦‚å¿µï¼Œä»¥åŠè¾ƒä¹‹äºå®ä½“æœºå™¨äººï¼Œä»¿çœŸçš„ä¼˜åŠ¿å’Œä¸è¶³ã€‚è¿˜å­¦ä¹ äº†å¦‚ä½•åŸºäºstage\_ros2ä»¥åŠignition gazeboåˆ†åˆ«æ­å»ºä»¿çœŸç¯å¢ƒå¹¶æ¨¡æ‹Ÿæœºå™¨äººï¼Œä¸ºåç»­çš„å­¦ä¹ å¥ å®šäº†åŸºç¡€ã€‚

å¦å¤–ï¼Œé™¤äº†stage\_ros2å’Œignition gazeboä¹‹å¤–ï¼Œè¿˜æœ‰å…¶ä»–ä¸€äº›å¯ç”¨äºROS2ä»¿çœŸçš„è½¯ä»¶ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„é€‰æ‹©ï¼š

*   Webots: Webotsæ˜¯ä¸€ä¸ªå¼ºå¤§çš„å¼€æºå¤šæœºå™¨äººä»¿çœŸè½¯ä»¶å¹³å°ï¼Œå®ƒæ”¯æŒå„ç§æœºå™¨äººç¡¬ä»¶å’Œä¼ æ„Ÿå™¨æ¨¡æ‹Ÿï¼Œå¹¶ä¸”å¯ä»¥ä¸ROS 2è¿›è¡Œé›†æˆã€‚
    
*   Gazebo Classic: Gazebo Classicæ˜¯ROS 1ä¸­å¸¸ç”¨çš„ä»¿çœŸå™¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ROS 2è¿›è¡Œè¿æ¥å’Œä½¿ç”¨ã€‚
    
*   MORSE: MORSEæ˜¯ä¸€ä¸ªåŸºäºPythonçš„å¼€æºä»¿çœŸå™¨ï¼Œå¯ä»¥ç”¨äºROS 2ä»¿çœŸå’Œæœºå™¨äººå¼€å‘ï¼Œæ”¯æŒå¤šç§ä¼ æ„Ÿå™¨å’Œè¡Œä¸ºæ¨¡å‹ã€‚
    
*   V-REP: V-REPæ˜¯ä¸€ä¸ªå¼ºå¤§çš„å¤šæœºå™¨äººä»¿çœŸå¹³å°ï¼Œå®ƒæ”¯æŒROS 2ä¸å…¶è¿›è¡Œé€šä¿¡ï¼Œå¯ä»¥å®ç°å„ç§æœºå™¨äººæ¨¡å‹å’Œåœºæ™¯çš„ä»¿çœŸã€‚
    

è¿™äº›éƒ½æ˜¯ä¸€äº›å¸¸è§çš„ROS 2ä»¿çœŸè½¯ä»¶ï¼Œä½ å¯ä»¥æ ¹æ®å…·ä½“çš„éœ€æ±‚é€‰æ‹©åˆé€‚çš„è½¯ä»¶æ¥è¿›è¡Œä»¿çœŸå’Œå¼€å‘ã€‚è¯·æ³¨æ„ï¼ŒæŸäº›ä»¿çœŸå™¨å¯èƒ½éœ€è¦è¿›è¡Œé€‚é…å’Œé…ç½®ä»¥ä¸ROS 2å…¼å®¹ã€‚

  

  

12.  # æœºå™¨äººå¯¼èˆªNavigation2(ä»¿çœŸç¯‡)
    

1.  ## å¯¼èˆªæ¦‚è¿°
    

1.  ### å¯¼èˆªç®€è¿°
    

**æ¦‚å¿µ**

æœºå™¨äººå¯¼èˆªæ˜¯æŒ‡åœ¨æ²¡æœ‰äººä¸ºå¹²é¢„çš„æƒ…å†µä¸‹ï¼Œæœºå™¨äººå¯ä»¥è‡ªä¸»åœ°ä»ä¸€ä¸ªä½ç½®ç§»åŠ¨åˆ°å¦ä¸€ä¸ªä½ç½®ã€‚åœ¨ROS2ä¸­ï¼Œå¯¼èˆªå®ç°æœ€ä¸ºå¸¸ç”¨çš„æ¡†æ¶æ˜¯Nav2ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2Q5MDg1MTU2MzUxMDIyODM5YjEzYTQzMTE2ODdlOTRfVGdxNjJzMlJMT3pSOTFPc2YwTlRqRERtZEdSdGoxQ1lfVG9rZW46WWl6SmJHY2xCb0g3QTJ4THpaOWNrNm1iblBoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

Nav2ä¹Ÿå³Navigation2ï¼Œå®ƒç»§æ‰¿è‡ªROSçš„å¯¼èˆªå †æ ˆã€‚å®ƒé‡‡ç”¨äº†ä¸è‡ªåŠ¨é©¾é©¶è½¦è¾†ç›¸åŒçš„å‰æ²¿æŠ€æœ¯ï¼Œå¹¶ç»è¿‡ä¼˜åŒ–å’Œæ”¹é€ ï¼Œä¸“é—¨é€‚ç”¨äºç§»åŠ¨æœºå™¨äººå’Œåœ°é¢æœºå™¨äººçš„å¯¼èˆªéœ€æ±‚ã€‚è¿™ä¸ªé¡¹ç›®èµ‹äºˆç§»åŠ¨æœºå™¨äººç©¿è¶Šå¤æ‚ç¯å¢ƒçš„èƒ½åŠ›ï¼Œä½¿å…¶èƒ½å¤Ÿå®Œæˆç”¨æˆ·å®šä¹‰çš„å„ç§åº”ç”¨ä»»åŠ¡ï¼Œå‡ ä¹é€‚ç”¨äºä»»ä½•ç±»å‹çš„æœºå™¨äººåŠ¨åŠ›å­¦ã€‚Nav2ä¸ä»…æ”¯æŒæœºå™¨äººä»Aç‚¹åˆ°Bç‚¹çš„ç§»åŠ¨ï¼Œè¿˜èƒ½è®¾ç½®ä¸­é—´å§¿æ€ï¼Œå¹¶æ‰§è¡Œå¤šç§ä»»åŠ¡ï¼Œå¦‚ç‰©ä½“è·Ÿè¸ªã€å…¨é¢è¦†ç›–å¯¼èˆªç­‰ã€‚ä½œä¸ºå…¨çƒ100å¤šå®¶å…¬å¸ä¿¡èµ–çš„ç”Ÿäº§çº§é«˜è´¨é‡å¯¼èˆªæ¡†æ¶ï¼ŒNav2ä»¥å…¶å“è¶Šçš„å¯é æ€§å’Œç¨³å®šæ€§èµ¢å¾—äº†å¹¿æ³›èµèª‰ã€‚

**ä½œç”¨**

Nav2åœ¨æœºå™¨äººå¯¼èˆªé¢†åŸŸä½œç”¨æ˜¾è‘—ï¼Œä¸»è¦è¡¨ç°åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ã€‚

*   Nav2å…·å¤‡å¤šæ ·çš„å¯¼èˆªåŠŸèƒ½ï¼Œæ”¯æŒæ¿€å…‰é›·è¾¾ã€æ‘„åƒå¤´ç­‰å¤šç§ä¼ æ„Ÿå™¨è¾“å…¥ï¼Œå®æ—¶è·å–ç¯å¢ƒä¿¡æ¯ï¼Œå®ç°æ™ºèƒ½è·¯å¾„è§„åˆ’å’Œç²¾ç¡®è¿åŠ¨æ§åˆ¶ã€‚å®ƒæ”¯æŒå¤šç§å¯¼èˆªæ¨¡å¼ï¼Œæ»¡è¶³ä¸åŒåº”ç”¨éœ€æ±‚ï¼Œå¹¶å…·å¤‡å¼ºå¤§çš„æ‰©å±•æ€§ï¼Œå¯ä¸ROS 2ç»„ä»¶æ— ç¼é›†æˆã€‚
    
*   Nav2æ€§èƒ½å“è¶Šï¼Œé‡‡ç”¨é«˜æ•ˆç®—æ³•å’Œæ•°æ®å¤„ç†æŠ€æœ¯ï¼Œç¡®ä¿æœºå™¨äººåœ¨å¯¼èˆªè¿‡ç¨‹ä¸­å“åº”è¿…é€Ÿä¸”ç¨³å®šã€‚
    
*   å®‰å…¨æ–¹é¢ï¼ŒNav2é‡‡ç”¨å¤šç§é¿éšœç®—æ³•å’Œå‚æ•°è°ƒèŠ‚åŠŸèƒ½ï¼Œè®¾å®šå®‰å…¨åŒºåŸŸï¼Œæä¾›è¯Šæ–­ç›‘æ§ï¼Œç¡®ä¿æœºå™¨äººå®‰å…¨å¯¼èˆªã€‚
    

æ€»ä¹‹ï¼ŒNav2ä¸ºæœºå™¨äººçš„å¯¼èˆªå’Œåº”ç”¨æä¾›äº†å¼ºå¤§çš„æ”¯æŒã€‚æ— è®ºæ˜¯å·¥ä¸šé¢†åŸŸçš„è‡ªåŠ¨åŒ–ç”Ÿäº§ï¼Œè¿˜æ˜¯æœåŠ¡é¢†åŸŸçš„æ™ºèƒ½æœºå™¨äººï¼ŒNav2éƒ½èƒ½å¤Ÿå‘æŒ¥é‡è¦ä½œç”¨ï¼Œæå‡æœºå™¨äººçš„è‡ªä¸»æ€§å’Œæ™ºèƒ½åŒ–æ°´å¹³ã€‚

  

  

2.  ### å¯¼èˆªå®‰è£…
    

å€ŸåŠ©äºUbuntuçš„åŒ…èµ„æºç®¡ç†å™¨ï¼Œå¯ä»¥ä½¿ç”¨äºŒè¿›åˆ¶çš„æ–¹å¼å®‰è£…Nav2ï¼Œå®‰è£…æŒ‡ä»¤å¦‚ä¸‹ï¼š

```Bash
sudo apt install ros-<ros2-distro>-navigation2
sudo apt install ros-<ros2-distro>-nav2-bringup

# Humble
sudo apt install ros-humble-navigation2
sudo apt install ros-humble-nav2-bringup

# Jazzy
sudo apt install ros-jazzy-navigation2
sudo apt install ros-jazzy-nav2-bringup
```

æŒ‡ä»¤ä¸­çš„`<ros2-distro>`è¯·æ›¿æ¢æˆå½“å‰æ‰€ä½¿ç”¨çš„ROS2ç‰ˆæœ¬ã€‚

  

3.  ### å¯¼èˆªæ¡ä»¶
    

æ·±å…¥å­¦ä¹ Nav2ï¼Œéœ€äº†è§£ROS2æœºå™¨äººåŸºç¡€çŸ¥è¯†ï¼Œå¹¶é…å¤‡ä»¿çœŸæˆ–å®ä½“æœºå™¨äººä½œä¸ºå®è·µç¯å¢ƒã€‚

**ROS2åŸºç¡€**

*   **ROS2é€šä¿¡** ï¼šäº†è§£ROS2ä¸­çš„èŠ‚ç‚¹ï¼ˆNodesï¼‰ã€è¯é¢˜ï¼ˆTopicsï¼‰ã€æœåŠ¡ï¼ˆServicesï¼‰ã€åŠ¨ä½œï¼ˆActionsï¼‰ç­‰åŸºæœ¬æ¦‚å¿µï¼Œä»¥åŠå¦‚ä½•é€šè¿‡è¿™äº›æœºåˆ¶å®ç°èŠ‚ç‚¹é—´çš„é€šä¿¡ã€‚
    
*   **ç”Ÿå‘½å‘¨æœŸç®¡ç†** ï¼šç†Ÿæ‚‰ROS2ä¸­çš„ç”Ÿå‘½å‘¨æœŸèŠ‚ç‚¹ï¼ˆLifecycle Nodesï¼‰ï¼Œç†è§£èŠ‚ç‚¹çš„å¯åŠ¨ã€é…ç½®ã€æ¿€æ´»ã€å»æ¿€æ´»ã€æ¸…ç†ç­‰çŠ¶æ€è½¬æ¢è¿‡ç¨‹ï¼Œè¿™å¯¹äºç®¡ç†å¤æ‚çš„ROS2ç³»ç»Ÿè‡³å…³é‡è¦ã€‚
    
*   **rviz2ï¼š** ç†Ÿç»ƒä½¿ç”¨rviz2è¿›è¡Œå¯è§†åŒ–è°ƒè¯•ï¼ŒåŒ…æ‹¬å¦‚ä½•è®¾ç½®ä¸åŒçš„æ˜¾ç¤ºç±»å‹ï¼ˆå¦‚ç‚¹äº‘ã€åœ°å›¾ã€è·¯å¾„ç­‰ï¼‰ï¼Œä»¥åŠå¦‚ä½•é€šè¿‡rviz2ä¸ROS2èŠ‚ç‚¹è¿›è¡Œäº¤äº’ï¼ˆå¦‚è®¾ç½®å¯¼èˆªç›®æ ‡ç‚¹ã€è§‚å¯Ÿæœºå™¨äººçŠ¶æ€ç­‰ï¼‰ã€‚
    
*   **URDFï¼š** äº†è§£URDFï¼ˆUnified Robot Description Formatï¼‰æ–‡ä»¶ï¼Œè¿™æ˜¯ROSä¸­ç”¨äºæè¿°æœºå™¨äººæ¨¡å‹çš„ä¸€ç§XMLæ ¼å¼ã€‚ç†Ÿæ‚‰å¦‚ä½•ç¼–å†™å’Œä¿®æ”¹URDFæ–‡ä»¶ï¼Œä»¥ä¾¿åœ¨ä»¿çœŸæˆ–å®é™…ç¯å¢ƒä¸­å‡†ç¡®åœ°è¡¨ç¤ºæœºå™¨äººç»“æ„ã€‚
    
*   **TFåæ ‡å˜æ¢ï¼š** æŒæ¡TFï¼ˆTransformï¼‰åº“çš„ä½¿ç”¨ï¼Œç†è§£åæ ‡å˜æ¢åœ¨æœºå™¨äººå¯¼èˆªä¸­çš„é‡è¦æ€§ã€‚å­¦ä¼šå¦‚ä½•è®¾ç½®å’ŒæŸ¥è¯¢ä¸åŒåæ ‡ç³»ä¹‹é—´çš„å˜æ¢å…³ç³»ï¼Œä»¥ç¡®ä¿æœºå™¨äººèƒ½å¤Ÿå‡†ç¡®åœ°å®šä½è‡ªèº«å’Œå‘¨å›´ç¯å¢ƒã€‚
    

å®è·µç¯å¢ƒ

*   **ä»¿çœŸç¯å¢ƒï¼š** æ­å»ºä¸€ä¸ªROS2å…¼å®¹çš„ä»¿çœŸç¯å¢ƒï¼Œå¹¶é…ç½®å¥½ç›¸åº”çš„æœºå™¨äººæ¨¡å‹ã€ä¼ æ„Ÿå™¨ï¼ˆå¦‚æ¿€å…‰é›·è¾¾ã€ç›¸æœºç­‰ï¼‰å’Œä»¿çœŸä¸–ç•Œã€‚ç¡®ä¿ä»¿çœŸç¯å¢ƒä¸­çš„æœºå™¨äººèƒ½å¤Ÿæ¥æ”¶é€Ÿåº¦æŒ‡ä»¤ã€åé¦ˆé‡Œç¨‹è®¡æ¶ˆæ¯ã€å‘å¸ƒä¼ æ„Ÿå™¨æ•°æ®å’ŒTFåæ ‡å˜æ¢ç­‰ã€‚
    
*   **å®ä½“æœºå™¨äººï¼š** å¦‚æœæ¡ä»¶å…è®¸ï¼Œå‡†å¤‡ä¸€å°å®ä½“æœºå™¨äººã€‚è¿™å°æœºå™¨äººåº”è¯¥å…·å¤‡ä¸ä»¿çœŸç¯å¢ƒä¸­ç›¸ä¼¼çš„åŠŸèƒ½ï¼Œå³èƒ½å¤Ÿæ¥æ”¶é€Ÿåº¦æŒ‡ä»¤ã€åé¦ˆé‡Œç¨‹è®¡æ¶ˆæ¯ã€å‘å¸ƒæ¿€å…‰é›·è¾¾ç­‰ä¼ æ„Ÿå™¨æ•°æ®ä»¥åŠå‘å¸ƒTFåæ ‡å˜æ¢ã€‚åŒæ—¶ï¼Œç¡®ä¿å®ä½“æœºå™¨äººå·²ç»å®‰è£…äº†ROS2ç³»ç»Ÿï¼Œå¹¶ä¸”å·²ç»é…ç½®å¥½ç›¸åº”çš„é©±åŠ¨ç¨‹åºå’Œç®—æ³•åº“ã€‚
    
*   **Nav2è½¯ä»¶åŒ…ï¼š** å®‰è£…å¹¶é…ç½®å¥½Nav2è½¯ä»¶åŒ…åŠå…¶ä¾èµ–é¡¹ã€‚Nav2æ˜¯ROS2ä¸­ç”¨äºæœºå™¨äººå¯¼èˆªçš„ç»¼åˆæ€§è½¯ä»¶åŒ…ï¼Œå®ƒåŒ…å«äº†è·¯å¾„è§„åˆ’ã€é¿éšœã€å±€éƒ¨å’Œå…¨å±€åœ°å›¾ç»´æŠ¤ç­‰å¤šä¸ªåŠŸèƒ½æ¨¡å—ã€‚ç¡®ä¿Nav2è½¯ä»¶åŒ…ä¸æ‚¨çš„ROS2ç‰ˆæœ¬å…¼å®¹ï¼Œå¹¶ä¸”å·²ç»æ ¹æ®éœ€è¦è¿›è¡Œäº†é€‚å½“çš„é…ç½®ã€‚
    

é€šè¿‡æŒæ¡ä¸Šè¿°åŸºç¡€çŸ¥è¯†å¹¶å‡†å¤‡å¥½å®è·µç¯å¢ƒï¼Œæ‚¨å°†èƒ½å¤Ÿæ›´å¥½åœ°å­¦ä¹ å’Œåº”ç”¨Nav2è¿›è¡Œæœºå™¨äººå¯¼èˆªä»»åŠ¡çš„å¼€å‘ä¸è°ƒè¯•ã€‚

  

4.  ### å¯¼èˆªå‚æ•°å‚è€ƒ
    

https://docs.nav2.org/configuration/index.html

  

2.  ## SLAM å®šä½ä¸å»ºå›¾
    

**æ¦‚å¿µ**

SLAMï¼ˆSimultaneous Localization and Mappingï¼Œå³æ—¶å®šä½ä¸å»ºå›¾ï¼‰æ˜¯æœºå™¨äººå­¦å’Œè‡ªåŠ¨å¯¼èˆªé¢†åŸŸçš„ä¸€ç§å…³é”®æŠ€æœ¯ï¼Œå…è®¸æœºå™¨äººåœ¨æœªçŸ¥ç¯å¢ƒä¸­ç»˜åˆ¶ç¯å¢ƒåœ°å›¾ã€‚

åœ¨ROS 2ä¸‹è¿›è¡ŒSLAMï¼Œé€šå¸¸æ¶‰åŠä½¿ç”¨ä¸“é—¨ä¸ºROS 2å¼€å‘çš„SLAMç›¸å…³è½¯ä»¶åŒ…ã€‚è¿™äº›è½¯ä»¶åŒ…åˆ©ç”¨ROS 2çš„é€šè®¯æ¡†æ¶ï¼ˆå¦‚è¯é¢˜ã€æœåŠ¡å’Œactionï¼‰æ¥å¤„ç†æ¥æ”¶åˆ°çš„ä¼ æ„Ÿå™¨æ•°æ®ï¼ŒåŒ…æ‹¬æ¿€å…‰é›·è¾¾ã€ç›¸æœºã€æƒ¯æ€§æµ‹é‡å•å…ƒç­‰ã€‚

ä»¥ä¸‹åˆ—ä¸¾äº†ä¸€äº›å¸¸è§çš„åœ¨ROS2ä¸­ä½¿ç”¨çš„SLAMç³»ç»Ÿï¼š

1.  **SLAM Toolbox** ï¼šSLAM Toolbox æ˜¯ä¸€ç§åœ¨ ROS 2 ä¸­æ™®éä½¿ç”¨çš„ SLAM è§£å†³æ–¹æ¡ˆï¼Œç”± Steve Macenski ç»´æŠ¤ã€‚å®ƒæ˜¯ä¸ºäº†æ›¿ä»£åŸæœ‰çš„ROSä¸­è‘—åçš„gmappingåŒ…å’ŒCartographer SLAMåŒ…è€Œå¼€å‘çš„ï¼Œæä¾›äº†2Dæ¿€å…‰SLAMé¢†åŸŸä¸­çš„å¤šç§åŠŸèƒ½ã€‚
    
2.  **Cartographer for ROS 2** ï¼šCartographeræ˜¯ç”±Googleå¼€å‘çš„ä¸€ä¸ª2Då’Œ3Dç¯å¢ƒSLAMåº“ã€‚å°½ç®¡å®ƒæœ€åˆæ˜¯ä¸ºROSå¼€å‘çš„ï¼Œä½†å·²ç»æœ‰ä¸ºROS 2åˆ›å»ºçš„é€‚é…ç‰ˆæœ¬ï¼Œå¯ä»¥åœ¨ROS 2ç”Ÿæ€ç³»ç»Ÿå†…ä½¿ç”¨ã€‚
    

è¦åœ¨ROS 2ä¸­å¼€å§‹ä¸€ä¸ªSLAMé¡¹ç›®ï¼Œè¿˜éœ€è¦å…·ä½“çš„ä¼ æ„Ÿå™¨ï¼ˆä¾‹å¦‚æ¿€å…‰é›·è¾¾æˆ–æ‘„åƒå¤´ï¼‰ï¼Œè®¡ç®—æœºè¦æœ‰è¶³å¤Ÿçš„ç®—åŠ›æ¥è¿è¡ŒSLAMç®—æ³•ï¼Œä»¥åŠç†Ÿæ‚‰ROS 2èŠ‚ç‚¹ã€è¯é¢˜ã€æœåŠ¡ã€actionã€å‚æ•°ç­‰çŸ¥è¯†ï¼Œä»¥å®ç°æœ‰æ•ˆçš„æ•°æ®å¤„ç†å’Œé€šä¿¡ã€‚éšç€é¡¹ç›®çš„å‘å±•ï¼Œå¯èƒ½è¿˜éœ€è¦è€ƒè™‘åŠ¨æ€é‡é…ç½®ã€3Då»ºå›¾å’Œè·¯å¾„è§„åˆ’ç­‰é«˜çº§åŠŸèƒ½ã€‚

**ä½œç”¨**

å¿…é¡»å…ˆè¯´æ˜çš„æ˜¯ï¼šSLAMä¸Nav2å¹¶æ²¡æœ‰ç›´æ¥çš„ä¾èµ–å…³ç³»ï¼Œå®ƒä»¬æ˜¯ä¸¤ç§ç›¸å¯¹ç‹¬ç«‹çš„æŠ€æœ¯æ¡†æ¶ã€‚ç„¶è€Œï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™ä¸¤è€…å´å±•ç°å‡ºç´§å¯†çš„è”ç³»ä¸äº’è¡¥æ€§ã€‚

> **ç‹¬ç«‹æ€§ï¼š** SLAMèƒ½å¤Ÿç‹¬ç«‹å®Œæˆç¯å¢ƒåœ°å›¾çš„æ„å»ºï¼Œæ— éœ€Nav2çš„ä»‹å…¥ã€‚å®ƒä¾é ä¼ æ„Ÿå™¨æ•°æ®æ¥æ„ŸçŸ¥ç¯å¢ƒï¼Œå¹¶é€šè¿‡ç®—æ³•ä¼°è®¡æœºå™¨äººçš„ä½ç½®ä¸å§¿æ€ï¼Œä»è€Œæ„å»ºå‡ºç¯å¢ƒçš„åœ°å›¾ã€‚ä¸æ­¤åŒæ—¶ï¼ŒNav2ä¹Ÿå…·å¤‡è‡ªä¸»å¯¼èˆªçš„èƒ½åŠ›ã€‚å³ä½¿æ²¡æœ‰SLAMåœ°å›¾ä½œä¸ºè¾“å…¥ï¼Œå®ƒä¹Ÿèƒ½ä¾èµ–å…¶ä»–æ¥æºçš„ç¯å¢ƒä¿¡æ¯è¿›è¡Œå¯¼èˆªã€‚
> 
> **äº’è¡¥æ€§ï¼š** å°½ç®¡ä¸¤è€…åœ¨æŠ€æœ¯ä¸Šå„è‡ªç‹¬ç«‹ï¼Œä½†å®ƒä»¬çš„ç»“åˆå´å¸¦æ¥äº†æ˜¾è‘—çš„ä¼˜åŠ¿ã€‚Nav2èƒ½å¤Ÿåˆ©ç”¨SLAMåˆ›å»ºçš„ç²¾ç¡®åœ°å›¾è¿›è¡Œé«˜æ•ˆçš„è·¯å¾„è§„åˆ’ï¼Œç¡®ä¿æœºå™¨äººèƒ½å¤Ÿé¡ºåˆ©å¯¼èˆªè‡³ç›®æ ‡ä½ç½®ã€‚è€ŒSLAMåˆ™èƒ½å€ŸåŠ©Nav2çš„å¯¼èˆªæ§åˆ¶åŠŸèƒ½ï¼Œåœ¨æœºå™¨äººç§»åŠ¨è¿‡ç¨‹ä¸­å®æ—¶æ”¶é›†ç¯å¢ƒä¿¡æ¯ï¼Œä»è€Œè¿›ä¸€æ­¥æé«˜åœ°å›¾æ„å»ºçš„æ•ˆç‡å’Œå‡†ç¡®æ€§ã€‚

å› æ­¤ï¼Œå°½ç®¡SLAMä¸Nav2åœ¨æŠ€æœ¯ä¸Šå„è‡ªç‹¬ç«‹ï¼Œä½†åœ¨æ„å»ºå®Œæ•´çš„æœºå™¨äººå¯¼èˆªç³»ç»Ÿä¸­ï¼Œå®ƒä»¬çš„äº’è¡¥æ€§ä½¿å¾—æœºå™¨äººèƒ½å¤Ÿåœ¨å¤æ‚ç¯å¢ƒä¸­å®ç°æ›´åŠ è‡ªä¸»ã€ç²¾å‡†çš„å»ºå›¾æˆ–å¯¼èˆªã€‚

  

1.  ### slam\_toolboxæ¦‚è¿°
    

æ¦‚å¿µ

SLAM Toolboxæ˜¯ä¸€ä¸ªåŸºäºå¼€æºè½¯ä»¶çš„ç”¨æ¥æ„å»º **2Dåœ°å›¾** çš„å·¥å…·é›†ï¼Œæ—¨åœ¨ä¸ºç ”ç©¶äººå‘˜å’Œå¼€å‘è€…æä¾›ä¸€ä¸ªå¿«é€Ÿæ„å»ºå’Œå®ç°SLAMç®—æ³•çš„å¹³å°ã€‚å®ƒé›†æˆäº†å¤šç§å¸¸ç”¨çš„SLAMç®—æ³•ï¼Œå¹¶æä¾›äº†ä¸°å¯Œçš„æ•°æ®å¤„ç†å’Œæ»¤æ³¢å‡½æ•°ï¼Œä»¥åŠåœ°å›¾æ„å»ºå’Œç¯å¢ƒå»ºæ¨¡çš„å·¥å…·ã€‚

åŠŸèƒ½

*   **ç®—æ³•é›†æˆ** åŒ…å«åŸºäºå¡å°”æ›¼æ»¤æ³¢å™¨å’Œç²’å­æ»¤æ³¢å™¨çš„SLAMç®—æ³•ï¼Œä»¥åŠåŸºäºå›¾ä¼˜åŒ–çš„SLAMç®—æ³•ç­‰ã€‚
    
*   **æ•°æ®å¤„ç†** æä¾›æ•°æ®èåˆã€æ•°æ®é¢„å¤„ç†å’Œå¼‚å¸¸æ£€æµ‹ç­‰åŠŸèƒ½ï¼Œæ”¯æŒæ¿€å…‰é›·è¾¾ã€æ‘„åƒå¤´ã€IMUç­‰å¤šç§ä¼ æ„Ÿå™¨æ•°æ®çš„å¤„ç†ã€‚
    
*   **åœ°å›¾æ„å»º** åˆ©ç”¨ä¼ æ„Ÿå™¨æ•°æ®å’Œæœºå™¨äººè¿åŠ¨ä¿¡æ¯æ„å»ºå‡†ç¡®çš„åœ°å›¾ï¼Œå¹¶è¿›è¡Œæ›´æ–°å’Œä¼˜åŒ–ã€‚
    
*   **æ¨¡å—åŒ–è®¾è®¡** æ”¯æŒç”¨æˆ·æ’å…¥è‡ªå·±çš„ç®—æ³•æˆ–æ›¿æ¢ç°æœ‰æ¨¡å—ï¼Œå®ç°é«˜åº¦å®šåˆ¶åŒ–çš„SLAMè§£å†³æ–¹æ¡ˆã€‚
    

ä¼˜ç‚¹

*   **å¼€æºæ€§å’Œçµæ´»æ€§** ä½œä¸ºå¼€æºè½¯ä»¶ï¼ŒSLAM Toolboxæä¾›äº†æºä»£ç å’Œæ–‡æ¡£ï¼Œç”¨æˆ·å¯ä»¥è‡ªç”±ä¿®æ”¹å’Œæ‰©å±•ç®—æ³•ã€‚
    
*   **å¤šç§ä¼ æ„Ÿå™¨æ”¯æŒ** æ”¯æŒæ¿€å…‰é›·è¾¾ã€æ‘„åƒå¤´ã€IMUç­‰å¤šç§ä¼ æ„Ÿå™¨æ•°æ®ï¼Œé€‚åº”ä¸åŒåº”ç”¨åœºæ™¯çš„éœ€æ±‚ã€‚
    
*   **é«˜æ•ˆæ€§** åˆ©ç”¨ç°ä»£C++çš„ç‰¹æ€§ä¼˜åŒ–æ€§èƒ½ï¼Œç¡®ä¿åœ¨èµ„æºå—é™çš„ç¡¬ä»¶ä¸Šä¹Ÿèƒ½é«˜æ•ˆè¿è¡Œã€‚
    
*   **å¹¿æ³›çš„åº”ç”¨å‰æ™¯** é€‚ç”¨äºå­¦æœ¯ç ”ç©¶ã€æ— äººæœºå¯¼èˆªã€è‡ªåŠ¨é©¾é©¶æ±½è½¦ã€å®¤å†…æœºå™¨äººå’Œå·¥ä¸šè‡ªåŠ¨åŒ–ç­‰å¤šä¸ªé¢†åŸŸã€‚
    

  

2.  ### slam\_toolboxå®‰è£…
    

å€ŸåŠ©äºAdvanced Packaging Tools([APT](https://c6.y.qq.com/base/fcgi-bin/u?__=bqEbdGxIB7mM))åŒ…èµ„æºç®¡ç†å™¨ï¼Œå¯ä»¥ä½¿ç”¨äºŒè¿›åˆ¶çš„æ–¹å¼å®‰è£…slam\_toolboxï¼Œå®‰è£…æŒ‡ä»¤å¦‚ä¸‹ï¼š

```Bash
sudo apt install ros-<ros2-distro>-slam-toolbox

#humble
sudo apt install ros-humble-slam-toolbox
#jazzy
sudo apt install ros-jazzy-slam-toolbox
```

æŒ‡ä»¤ä¸­çš„`<ros2-distro>`è¯·æ›¿æ¢æˆå½“å‰æ‰€ä½¿ç”¨çš„ROS2ç‰ˆæœ¬ã€‚

3.  ### slam\_toolboxèŠ‚ç‚¹è¯´æ˜
    

åœ¨slam\_toolboxä¸­å¸¸ç”¨çš„èŠ‚ç‚¹æœ‰ä¸¤ä¸ªï¼šsync\_slam\_toolbox\_nodeå’Œasync\_slam\_toolbox\_nodeã€‚

> **sync\_slam\_toolbox\_nodeï¼š**
> 
> è¿™æ˜¯ä¸€ä¸ªåŒæ­¥èŠ‚ç‚¹ï¼Œä¼šç­‰å¾…æ‰€æœ‰ä¼ æ„Ÿå™¨æ•°æ®åˆ°è¾¾åå†å¤„ç†ï¼Œç¡®ä¿æ•°æ®å®Œæ•´æ€§å’Œä¸€è‡´æ€§ï¼Œæé«˜å®šä½å’Œå»ºå›¾å‡†ç¡®æ€§ã€‚ä½†åŒæ­¥å¤„ç†å¯èƒ½å¯¼è‡´å»¶è¿Ÿï¼Œæ›´é€‚åˆå¯¹æ•°æ®ä¸€è‡´æ€§å’Œå‡†ç¡®æ€§è¦æ±‚é«˜ã€å®æ—¶æ€§è¦æ±‚ä¸é«˜çš„åœºæ™¯ã€‚
> 
> **async\_slam\_toolbox\_nodeï¼š**
> 
> ä¸åŒæ­¥èŠ‚ç‚¹ä¸åŒï¼Œè¿™æ˜¯ä¸€ä¸ªå¼‚æ­¥èŠ‚ç‚¹ï¼Œå¯ä»¥ç«‹å³å¤„ç†å·²æ¥æ”¶çš„æ•°æ®ï¼Œå‡å°å»¶è¿Ÿï¼Œæé«˜å“åº”é€Ÿåº¦ã€‚ä½†å¼‚æ­¥å¤„ç†å¯èƒ½å¯¼è‡´æ•°æ®ä¸å®Œå…¨åŒæ­¥ï¼Œå®šä½å’Œå»ºå›¾ç»“æœå¯èƒ½ä¸å¦‚åŒæ­¥æ–¹å¼å‡†ç¡®ã€‚å› æ­¤ï¼Œå®ƒæ›´é€‚åˆå¯¹å®æ—¶æ€§è¦æ±‚é«˜ã€å¯¹æ•°æ®ä¸€è‡´æ€§å’Œå‡†ç¡®æ€§è¦æ±‚ç›¸å¯¹è¾ƒä½çš„åœºæ™¯ã€‚

åœ¨é€‰æ‹©ä½¿ç”¨sync\_slam\_toolbox\_nodeè¿˜æ˜¯async\_slam\_toolbox\_nodeæ—¶ï¼Œéœ€æ ¹æ®åº”ç”¨éœ€æ±‚å’Œç¯å¢ƒæƒè¡¡ã€‚è‹¥å®æ—¶æ€§å…³é”®ä¸”èƒ½æ¥å—ä¸€å®šå®šä½æˆ–å»ºå›¾è¯¯å·®ï¼Œé€‰æ‹©async\_slam\_toolbox\_nodeã€‚è‹¥å¯¹æ•°æ®ä¸€è‡´æ€§å’Œå‡†ç¡®æ€§è¦æ±‚è¾ƒé«˜ï¼Œä¸”å®æ—¶æ€§éé¦–è¦è€ƒè™‘ï¼Œåˆ™é€‰æ‹©sync\_slam\_toolbox\_nodeã€‚å¦å¤–äºŒè€…çš„ä¸»è¦åŒºåˆ«åœ¨äºæ•°æ®å¤„ç†çš„æ–¹å¼ï¼Œè€Œä¸¤ä¸ªèŠ‚ç‚¹å‘å¸ƒçš„è¯é¢˜ã€è®¢é˜…çš„è¯é¢˜ã€å‘å¸ƒçš„æœåŠ¡ä»¥åŠä½¿ç”¨çš„å‚æ•°ç­‰éƒ½æ˜¯ä¸€æ ·çš„ã€‚

1.  è®¢é˜…çš„è¯é¢˜
    

<!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
| è¯é¢˜ | ç±»å‹ | æè¿° |
|:---|:---|:---|
| /scan | sensor_msgs/msg/LaserScan | æ¥è‡ªæ¿€å…‰é›·è¾¾è¾“å…¥çš„æ‰«ææ•°æ® |
| /tf | tf2_msgs/msg/TFMessage | é…ç½®çš„odom_frameåˆ°base_frameçš„è½¬æ¢ |

è™½ç„¶ä¸è®¢é˜…/odom,ä½†æ˜¯éœ€è¦å‘å¸ƒ/odom,ä»¥æ”¹å˜åæ ‡ã€‚

<!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
| ç‰¹æ€§ | slam_toolbox | hector_slam |
|:---|:---|:---|
| åœ°å›¾ç²¾åº¦ | é«˜ | ä¸­ |
| å®æ—¶æ€§ | è¾ƒå¥½ï¼Œä½†ä¾èµ–ä¼˜åŒ–ï¼ˆå›ç¯æ£€æµ‹ï¼‰ | æé«˜ |
| ä¾èµ–æ•°æ® | æ¿€å…‰é›·è¾¾ã€TF æ ‘ã€é‡Œç¨‹è®¡ | æ¿€å…‰é›·è¾¾ï¼ˆå¯é€‰ IMUï¼‰ |
| å›ç¯æ£€æµ‹ | æ”¯æŒ | ä¸æ”¯æŒ |
| é•¿æœŸè¿è¡Œ | æ”¯æŒ | ä¸æ”¯æŒ |
| é€‚ç”¨åœºæ™¯ | åŠ¨æ€å¯¼èˆªã€å¤æ‚ç¯å¢ƒ | ç®€å•ç¯å¢ƒï¼Œæˆ–æ— é‡Œç¨‹è®¡æ—¶ |

  

2.  å‘å¸ƒçš„è¯é¢˜
    

<!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
| è¯é¢˜ | ç±»å‹ | æè¿° |
|:---|:---|:---|
| /map | nav_msgs/msg/OccupancyGrid | pose-graphï¼ˆå§¿æ€å›¾ï¼‰åœ¨ç‰¹å®šçš„æ›´æ–°é¢‘ç‡ï¼ˆmap_update_intervalï¼‰ä¸‹çš„å ç”¨æ …æ ¼è¡¨ç¤ºã€‚ |
| /pose | geometry_msgs/msg/PoseWithCovarianceStamped | é…ç½®çš„map_frameä¸­base_frameçš„ä½å§¿ä»¥åŠæ ¹æ®æ‰«æåŒ¹é…è®¡ç®—çš„åæ–¹å·® |

3.  å‘å¸ƒçš„æœåŠ¡
    

<!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
| è¯é¢˜ | ç±»å‹ | æè¿° |
|:---|:---|:---|
| /slam_toolbox/clear_changes | slam_toolbox/srv/Clear | æ¸…é™¤æ‰€æœ‰å¾…å¤„ç†çš„æ‰‹åŠ¨ä½å§¿å›¾æ“ä½œçš„æ›´æ”¹ |
| /slam_toolbox/deserialize_map | slam_toolbox/srv/DeserializePoseGraph | ä»ç£ç›˜åŠ è½½ä¿å­˜çš„åºåˆ—åŒ–ä½å§¿å›¾æ–‡ä»¶ |
| /slam_toolbox/dynamic_map | nav_msgs/OccupancyGrid | è¯·æ±‚ä½å§¿å›¾çš„å½“å‰çŠ¶æ€ä½œä¸ºå ç”¨ç½‘æ ¼ |
| /slam_toolbox/manual_loop_closure | slam_toolbox/srv/LoopClosure | è¯·æ±‚å¯¹ä½å§¿å›¾è¿›è¡Œæ‰‹åŠ¨æ›´æ”¹ |
| /slam_toolbox/pause_new_measurements | slam_toolbox/srv/Pause | æš‚åœå¤„ç†æ–°ä¼ å…¥çš„æ¿€å…‰æ‰«æ |
| /slam_toolbox/save_map | slam_toolbox/srv/SaveMap | ä¿å­˜å¯ç”¨äºæ˜¾ç¤º AMCL å®šä½çš„åœ°å›¾å›¾åƒæ–‡ä»¶ã€‚ |
| /slam_toolbox/serialize_map | slam_toolbox/srv/SerializePoseGraph | ä¿å­˜åœ°å›¾ä½å§¿å›¾å’Œæ•°æ®ï¼Œå¯ç”¨äºç»§ç»­å»ºå›¾ã€slam_toolbox å®šä½ã€ç¦»çº¿æ“ä½œç­‰ |
| /slam_toolbox/toggle_interactive_mode | slam_toolbox/srv/ToggleInteractive | åœ¨äº¤äº’æ¨¡å¼ä¸éäº¤äº’æ¨¡å¼ä¹‹é—´åˆ‡æ¢ï¼Œå‘å¸ƒèŠ‚ç‚¹çš„äº¤äº’å¼æ ‡è®°åŠå…¶ä½ç½®ï¼Œä»¥ä¾¿åœ¨åº”ç”¨ç¨‹åºä¸­è¿›è¡Œæ›´æ–° |
| /slam_toolbox/reset | slam_toolbox/srv/Reset | å°†å½“å‰åœ°å›¾é‡ç½®å›åˆå§‹çŠ¶æ€ |

4.  å‚æ•°
    
    1.  æ±‚è§£å™¨å‚æ•°
        

*   **solver\_plugin**  ç”¨äº karto æ‰«æè§£ç®—å™¨çš„éçº¿æ€§è§£ç®—å™¨ç±»å‹ã€‚é€‰é¡¹ï¼šsolver\_plugins::CeresSolver, - solver\_plugins::SpaSolver, solver\_plugins::G2oSolver. Default: solver\_plugins::CeresSolver.
    
*   **ceres\_linear\_solver**  Ceres ä½¿ç”¨çš„çº¿æ€§æ±‚è§£å™¨ã€‚é€‰é¡¹ï¼šSPARSE\_NORMAL\_CHOLESKYã€SPARSE\_SCHURã€ITERATIVE\_SCHURã€CGNRã€‚é»˜è®¤ä¸º SPARSE\_NORMAL\_CHOLESKYã€‚
    
*   **ceres\_preconditioner**  ä¸è¯¥æ±‚è§£å™¨ä¸€èµ·ä½¿ç”¨çš„é¢„å¤„ç†å™¨ã€‚é€‰é¡¹ï¼šJACOBIã€IDENTITYï¼ˆnoneï¼‰ã€SCHUR\_JACOBIã€‚é»˜è®¤ä¸ºJACOBIã€‚
    
*   **ceres\_trust\_strategy**  ä¿¡ä»»åŒºåŸŸç­–ç•¥ã€‚è¡Œæœç´¢ç­–ç•¥æ²¡æœ‰å…¬å¼€ï¼Œå› ä¸ºå®ƒä»¬å¯¹äºè¿™ç§ç”¨é€”è¡¨ç°ä¸ä½³ã€‚é€‰é¡¹ï¼šLEVENBERG\_MARQUARDTã€DOGLEGã€‚é»˜è®¤å€¼ï¼šLEVENBERG\_MARQUARDTã€‚
    
*   **ceres\_dogleg\_type**  å¦‚æœä¿¡ä»»ç­–ç•¥æ˜¯ DOGLEGï¼Œåˆ™ä½¿ç”¨doglegç­–ç•¥ã€‚é€‰é¡¹ï¼šTRADITIONAL\_DOGLEGã€SUBSPACE\_DOGLEGã€‚é»˜è®¤å€¼ï¼šTRADITIONAL\_DOGLEG
    
*   **ceres\_loss\_function**  æ‹’ç»å¼‚å¸¸å€¼çš„æŸå¤±å‡½æ•°ç±»å‹ã€‚æ²¡æœ‰ä¸€ä¸ªç­‰äºæŸå¤±å¹³æ–¹ã€‚é€‰é¡¹ï¼šNoneã€HuberLossã€CauchyLossã€‚é»˜è®¤å€¼ï¼šNoneã€‚
    
*   **mode**  â€œå»ºå›¾â€æˆ–â€œå®šä½â€æ¨¡å¼ï¼Œç”¨äº Ceres é—®é¢˜åˆ›å»ºä¸­çš„æ€§èƒ½ä¼˜åŒ–
    
    *   Toolboxå‚æ•°
        
*   **odom\_frame**  é‡Œç¨‹è®¡åæ ‡ç³»
    
*   **map\_frame**  åœ°å›¾åæ ‡ç³»
    
*   **base\_frame**  åŸºåæ ‡ç³»
    
*   **scan\_topic**  æ‰«æä¸»é¢˜åï¼Œ æ³¨æ„æ˜¯/scan ä¸æ˜¯scan
    
*   **scan\_queue\_size**  æ‰«ææ¶ˆæ¯å¯¹é˜Ÿåˆ—é•¿åº¦ã€‚åœ¨å¼‚æ­¥æ¨¡å¼ä¸‹åº”å§‹ç»ˆè®¾ç½®ä¸º 1
    
*   **use\_map\_saver**  å®ä¾‹åŒ–åœ°å›¾æœåŠ¡ç¨‹åºå¹¶è‡ªè¡Œè®¢é˜…mapä¸»é¢˜
    
*   **map\_file\_name**  å¯åŠ¨æ—¶åŠ è½½çš„ä½å§¿å›¾æ–‡ä»¶çš„åç§°ï¼ˆå¦‚æœå¯ç”¨ï¼‰
    
*   **map\_start\_pose**  å¯åŠ¨å»ºå›¾/å®šä½æ—¶çš„ä½å§¿ï¼ˆå¦‚æœå¯ç”¨ï¼‰
    
*   **map\_start\_at\_dock**  åœ¨dockï¼ˆç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼‰å¤„å¯åŠ¨å§¿åŠ¿å›¾åŠ è½½ï¼ˆå¦‚æœå¯ç”¨ï¼‰ã€‚å¦‚æœåŒæ—¶è®¾ç½®äº†poseå’Œdockï¼Œä¼˜å…ˆä½¿ç”¨pose
    
*   **debug\_logging**  æ›´æ”¹æ—¥å¿—ä»¥è¿›è¡Œè°ƒè¯•
    
*   **throttle\_scans**  åœ¨åŒæ­¥æ¨¡å¼ä¸‹é™åˆ¶çš„æ‰«ææ¬¡æ•°
    
*   **transform\_publish\_period**  é‡Œç¨‹è®¡odomå˜æ¢å‘å¸ƒå‘¨æœŸã€‚ 0 ä¸ä¼šå‘å¸ƒå˜æ¢ã€‚
    
*   **map\_update\_interval**  æ›´æ–° 2D å ç”¨åœ°å›¾çš„æ—¶é—´é—´éš”
    
*   **enable\_interactive\_mode**  æ˜¯å¦å…è®¸å¯ç”¨äº¤äº’æ¨¡å¼ã€‚äº¤äº’æ¨¡å¼å°†ä¿ç•™æ˜ å°„åˆ°å…¶ ID çš„æ¿€å…‰æ‰«æç¼“å­˜ï¼Œä»¥ä¾¿åœ¨äº¤äº’æ¨¡å¼ä¸‹è¿›è¡Œå¯è§†åŒ–ã€‚ç»“æœï¼Œè¯¥è¿›ç¨‹çš„å†…å­˜å°†ä¼šå¢åŠ ã€‚åœ¨å®šä½å’Œé•¿æœŸå»ºå›¾æ¨¡å¼ä¸‹å¯ä»¥æ‰‹åŠ¨ç¦ç”¨æ­¤åŠŸèƒ½ï¼Œå› ä¸ºå®ƒä»¬ä¼šéšç€æ—¶é—´çš„æ¨ç§»å¢åŠ å†…å­˜åˆ©ç”¨ç‡ã€‚å¯¹äºå»ºå›¾æˆ–è¿ç»­å»ºå›¾æ¨¡å¼å‡æœ‰æ•ˆã€‚
    
*   **position\_covariance\_scale**  ä»æ‰«æåŒ¹é…å‘å¸ƒå§¿åŠ¿æ—¶ç¼©æ”¾ä½ç½®åæ–¹å·®çš„é‡ã€‚è¿™å¯ç”¨äºè°ƒæ•´ä¸‹æ¸¸å®šä½æ»¤æ³¢å™¨ä¸­ä½å§¿çš„å½±å“ã€‚åæ–¹å·®è¡¨ç¤ºæµ‹é‡çš„ä¸ç¡®å®šæ€§ï¼Œå› æ­¤æ‰©å¤§åæ–¹å·®å°†å‡å°ä½å§¿å¯¹ä¸‹æ¸¸æ»¤æ³¢å™¨çš„å½±å“ã€‚é»˜è®¤å€¼ï¼š1.0
    
*   **yaw\_covariance\_scale**  ä»æ‰«æåŒ¹é…å‘å¸ƒä½å§¿æ—¶ç¼©æ”¾åèˆªåæ–¹å·®çš„é‡ã€‚è¯·å‚é˜…position\_covariance\_scale çš„æè¿°ã€‚é»˜è®¤å€¼ï¼š1.0
    
*   **resolution**  ç”Ÿæˆçš„ 2D å ç”¨å›¾çš„åˆ†è¾¨ç‡
    
*   **max\_laser\_range**  ç”¨äº 2D å ç”¨åœ°å›¾å…‰æ …åŒ–çš„æœ€å¤§æ¿€å…‰èŒƒå›´
    
*   **minimum\_time\_interval**  åœ¨åŒæ­¥æ¨¡å¼ä¸‹å¤„ç†çš„æ‰«æä¹‹é—´çš„æœ€çŸ­æŒç»­æ—¶é—´
    
*   **transform\_timeout**  æŸ¥æ‰¾è½¬æ¢ TF è¶…æ—¶æ—¶é—´é™åˆ¶
    
*   **tf\_buffer\_duration**  å­˜å‚¨ TF æ¶ˆæ¯ä»¥ä¾›æŸ¥è¯¢çš„æ—¶é—´ã€‚å¦‚æœåœ¨åŒæ­¥æ¨¡å¼ä¸‹ä»¥å€é€Ÿè„±æœºè¿è¡Œï¼Œåˆ™è®¾ç½®é«˜ä¸€äº›ã€‚
    
*   **stack\_size\_to\_use**  å°†å †æ ˆå¤§å°é‡ç½®ä¸ºçš„å­—èŠ‚æ•°ï¼Œä»¥å¯ç”¨æ–‡ä»¶çš„åºåˆ—åŒ–/ååºåˆ—åŒ–ã€‚è‡ªç”±é»˜è®¤å€¼ä¸º 40000000ï¼Œä½†è¶Šå°‘è¶Šå¥½ã€‚
    
*   **minimum\_travel\_distance**  å¤„ç†æ–°æ‰«æä¹‹å‰çš„æœ€å°è¡Œè¿›è·ç¦»
    
    *   åŒ¹é…å™¨å‚æ•°
        
*   **use\_scan\_matching**  æ˜¯å¦ä½¿ç”¨æ‰«æåŒ¹é…æ¥ä¼˜åŒ–é‡Œç¨‹ä½å§¿
    
*   **use\_scan\_barycenter**  æ˜¯å¦ä½¿ç”¨é‡å¿ƒæˆ–æ‰«æä½å§¿
    
*   **minimum\_travel\_heading**  åˆç†æ›´æ–°çš„æœ€å°èˆªå‘å˜åŒ–
    
*   **scan\_buffer\_size**  ç¼“å†²åˆ°é“¾ä¸­çš„æ‰«ææ¬¡æ•°ï¼Œä¹Ÿç”¨ä½œå®šä½æ¨¡å¼å¾ªç¯ç¼“å†²åŒºä¸­çš„æ‰«ææ¬¡æ•°
    
*   **scan\_buffer\_maximum\_scan\_distance**  ä»ç¼“å†²åŒºä¸­åˆ é™¤ä¹‹å‰æ‰«æï¼Œè·ç¦»ä¹‹å‰ä½å§¿çš„æœ€å¤§è·ç¦»
    
*   **link\_match\_minimum\_response\_fine**  ç²¾ç»†åˆ†è¾¨ç‡é€šè¿‡çš„é˜ˆå€¼é“¾æ¥åŒ¹é…ç®—æ³•å“åº”
    
*   **link\_scan\_maximum\_distance**  æœ‰æ•ˆé“¾æ¥æ‰«æä¹‹é—´çš„æœ€å¤§è·ç¦»
    
*   **Loop\_search\_maximum\_distance**  å¾ªç¯é—­åˆæ—¶è€ƒè™‘çš„æ‰«æè·ç¦»çš„æœ€å¤§é˜ˆå€¼
    
*   **do\_loop\_close**  æ˜¯å¦è¿›è¡Œå¾ªç¯é—­åˆï¼ˆå¦‚æœä¸ç¡®å®šï¼Œç­”æ¡ˆæ˜¯â€œtrueâ€ï¼‰
    
*   **Loop\_match\_minimum\_chain\_size**  å¯»æ‰¾å¾ªç¯é—­åˆçš„æ‰«æçš„æœ€å°é“¾é•¿åº¦
    
*   **Loop\_match\_maximum\_variance\_coarse**  ç²—ç•¥æœç´¢ä¸­ä¼ é€’ç»™ç»†åŒ–çš„é˜ˆå€¼æ–¹å·®
    
*   **Loop\_match\_minimum\_response\_coarse**  ç²—ç•¥æœç´¢ä¸­ç¯è·¯é—­åˆç®—æ³•çš„é˜ˆå€¼å“åº”è¦ä¼ é€’ç»™ç»†åŒ–
    
*   **Loop\_match\_minimum\_response\_fine**  ç²¾ç»†æœç´¢ä¸­å¾ªç¯é—­åˆç®—æ³•çš„é˜ˆå€¼å“åº”ä¼ é€’ç»™ç»†åŒ–
    
*   **correlation\_search\_space\_dimension** æœç´¢ç½‘æ ¼å¤§å°ä»¥è¿›è¡Œæ‰«æç›¸å…³æ€§
    
*   **correlation\_search\_space\_resolution**  æœç´¢ç½‘æ ¼åˆ†è¾¨ç‡ä»¥è¿›è¡Œæ‰«æç›¸å…³æ€§
    
*   **correlation\_search\_space\_smear\_deviation**  ç”¨äºå¹³æ»‘å“åº”çš„å¤šæ¨¡æ€æ¶‚æŠ¹é‡
    
*   **loop\_search\_space\_dimension**  å¾ªç¯é—­åˆç®—æ³•çš„æœç´¢ç½‘æ ¼çš„å¤§å°
    
*   **loop\_search\_space\_resolution**  æœç´¢ç½‘æ ¼åˆ†è¾¨ç‡ä»¥è¿›è¡Œå¾ªç¯é—­åˆ
    
*   **loop\_search\_space\_smear\_deviation**  ç”¨äºå¹³æ»‘å“åº”çš„å¤šæ¨¡æ€æ¶‚æŠ¹é‡
    
*   **distance\_variance\_penalty**  åº”ç”¨äºåŒ¹é…æ‰«æçš„æƒ©ç½šï¼Œå› ä¸ºå®ƒä¸é‡Œç¨‹å§¿åŠ¿ä¸åŒ
    
*   **angle\_variance\_penalty**  åº”ç”¨äºåŒ¹é…æ‰«æçš„æƒ©ç½šï¼Œå› ä¸ºå®ƒä¸é‡Œç¨‹å§¿åŠ¿ä¸åŒ
    
*   **fine\_search\_angle\_offset**  ç”¨äºæµ‹è¯•ç²¾ç»†æ‰«æåŒ¹é…çš„è§’åº¦èŒƒå›´
    
*   **rough\_search\_angle\_offset**  ç”¨äºæµ‹è¯•ç²—ç•¥æ‰«æåŒ¹é…çš„è§’åº¦èŒƒå›´
    
*   **coarse\_angle\_resolution**  åœ¨æ‰«æåŒ¹é…ä¸­æµ‹è¯•çš„åç§»èŒƒå›´å†…çš„è§’åº¦åˆ†è¾¨ç‡
    
*   **minimum\_angle\_penalty**  ç¡®ä¿å°ºå¯¸ä¸ä¼šè†¨èƒ€çš„æœ€å°æƒ©ç½šè§’åº¦
    
*   **minimum\_distance\_penalty**  æ‰«æå¯ä»¥ç¡®ä¿å¤§å°ä¸ä¼šçˆ†ç‚¸çš„æœ€å°æƒ©ç½š
    
*   **use\_response\_expansion**  å¦‚æœæ²¡æœ‰æ‰¾åˆ°å¯è¡Œçš„åŒ¹é…ï¼Œæ˜¯å¦è‡ªåŠ¨å¢åŠ æœç´¢ç½‘æ ¼å¤§å°
    

  

4.  ### slam\_toolboxåŸºæœ¬ä½¿ç”¨
    

1.  å‡†å¤‡å·¥ä½œ
    

åœ¨srcç›®å½•ä¸‹ï¼Œè¯·å…ˆè°ƒç”¨å¦‚ä¸‹æŒ‡ä»¤åœ¨å·¥ä½œç©ºé—´çš„srcç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåŠŸèƒ½åŒ…ï¼š

```Plain Text
ros2 pkg create mycar_slam_slam_toolbox --dependencies slam_toolbox
```

2.  ç¼–å†™launchæ–‡ä»¶ä¸å‚æ•°æ–‡ä»¶
    

åœ¨åŠŸèƒ½åŒ…ä¸‹ï¼Œæ–°å»ºlaunchç›®å½•å’Œparamsç›®å½•ï¼Œlaunchç›®å½•ä¸‹æ–°å»º`online_sync_launch.py`æ–‡ä»¶å¹¶è¾“å…¥å¦‚ä¸‹å†…å®¹ï¼š

```Python
import os

from launch import LaunchDescription
from launch.actions import DeclareLaunchArgument
from launch.substitutions import LaunchConfiguration
from launch_ros.actions import Node
from ament_index_python.packages import get_package_share_directory

def generate_launch_description():
    use_sim_time = LaunchConfiguration('use_sim_time')
    slam_params_file = LaunchConfiguration('slam_params_file')

    declare_use_sim_time_argument = DeclareLaunchArgument(
        'use_sim_time',
        default_value='false',
        description='Use simulation/Gazebo clock')
    declare_slam_params_file_cmd = DeclareLaunchArgument(
        'slam_params_file',
        default_value=os.path.join(get_package_share_directory("mycar_slam_slam_toolbox"),
                                   'params', 'mapper_params_online_sync.yaml'),
        description='Full path to the ROS2 parameters file to use for the slam_toolbox node')

    start_sync_slam_toolbox_node = Node(
        parameters=[
          slam_params_file,
          {'use_sim_time': use_sim_time}
        ],
        package='slam_toolbox',
        executable='sync_slam_toolbox_node',
        name='slam_toolbox',
        output='screen')

    ld = LaunchDescription()

    ld.add_action(declare_use_sim_time_argument)
    ld.add_action(declare_slam_params_file_cmd)
    ld.add_action(start_sync_slam_toolbox_node)

    return ld
```

è¯¥launchæ–‡ä»¶ä¸»è¦æ˜¯åŠ è½½äº†slam\_toolboxä¸‹çš„sync\_slam\_toolbox\_nodeèŠ‚ç‚¹ï¼Œå¹¶ä¸”ä¼šä»å½“å‰åŠŸèƒ½åŒ…çš„paramsä¸‹è¯»å–ä¸€ä¸ªåä¸º`mapper_params_online_sync.yaml`çš„é…ç½®æ–‡ä»¶ã€‚è¿™ä¸ªé…ç½®æ–‡ä»¶è¿˜ä¸å­˜åœ¨ï¼Œæ¥ä¸‹æ¥éœ€è¦åœ¨paramsç›®å½•ä¸‹æ–°å»º`mapper_params_online_sync.yaml`æ–‡ä»¶ï¼Œå¹¶è¾“å…¥å¦‚ä¸‹å†…å®¹ï¼š

```YAML
slam_toolbox:
  ros__parameters:
    solver_plugin: solver_plugins::CeresSolver
    ceres_linear_solver: SPARSE_NORMAL_CHOLESKY
    ceres_preconditioner: SCHUR_JACOBI
    ceres_trust_strategy: LEVENBERG_MARQUARDT
    ceres_dogleg_type: TRADITIONAL_DOGLEG
    ceres_loss_function: None

    odom_frame: odom
    map_frame: map
    base_frame: base_link
    scan_topic: /scan
    mode: mapping #localization

    #map_file_name: test_steve
    #map_start_pose: [0.0, 0.0, 0.0]
    #map_start_at_dock: true

    debug_logging: false
    throttle_scans: 1
    transform_publish_period: 0.02 
    map_update_interval: 2.0
    resolution: 0.05
    max_laser_range: 20.0 
    minimum_time_interval: 0.5
    transform_timeout: 0.2
    tf_buffer_duration: 30.
    stack_size_to_use: 40000000 
    enable_interactive_mode: true

    use_scan_matching: true
    use_scan_barycenter: true
    minimum_travel_distance: 0.1
    minimum_travel_heading: 0.1
    scan_buffer_size: 100
    scan_buffer_maximum_scan_distance: 10.0
    link_match_minimum_response_fine: 0.1  
    link_scan_maximum_distance: 1.5
    loop_search_maximum_distance: 3.0
    do_loop_closing: true 
    loop_match_minimum_chain_size: 10           
    loop_match_maximum_variance_coarse: 3.0  
    loop_match_minimum_response_coarse: 0.35    
    loop_match_minimum_response_fine: 0.45

    correlation_search_space_dimension: 0.5
    correlation_search_space_resolution: 0.01
    correlation_search_space_smear_deviation: 0.1 

    loop_search_space_dimension: 8.0
    loop_search_space_resolution: 0.05
    loop_search_space_smear_deviation: 0.03

    distance_variance_penalty: 0.5      
    angle_variance_penalty: 1.0    

    fine_search_angle_offset: 0.00349     
    coarse_search_angle_offset: 0.349   
    coarse_angle_resolution: 0.0349        
    minimum_angle_penalty: 0.9
    minimum_distance_penalty: 0.5
    use_response_expansion: true
```

é…ç½®æ–‡ä»¶çš„å†…å®¹éœ€è¦æ ¹æ®å®é™…æƒ…å†µè¿›è¡ŒåŠ¨æ€è°ƒæ•´ã€‚

3.  ç¼–è¾‘é…ç½®æ–‡ä»¶
    

æ‰“å¼€`CMakeLists.txt` å¹¶è¾“å…¥å¦‚ä¸‹å†…å®¹ï¼š

```CMake
install(DIRECTORY launch params
  DESTINATION share/${PROJECT_NAME}
)
```

4.  ç¼–è¯‘
    

ç»ˆç«¯ä¸­è¿›å…¥å½“å‰å·¥ä½œç©ºé—´ï¼Œç¼–è¯‘åŠŸèƒ½åŒ…ï¼š

```Bash
colcon build --packages-select mycar_slam_slam_toolbox
```

5.  æ‰§è¡Œ
    
    1.  è¯·å…ˆè°ƒç”¨å¦‚ä¸‹æŒ‡ä»¤å¯åŠ¨ä»¿çœŸç¯å¢ƒï¼š
        
    ```Bash
    . install/setup.bash
    ros2 launch stage_ros2 my_house.launch.py
    ```
    3.  ç„¶ååœ¨ç»ˆç«¯ä¸‹è¿›å…¥å½“å‰å·¥ä½œç©ºé—´ï¼Œè¾“å…¥å¦‚ä¸‹æŒ‡ä»¤ï¼š
        
    ```Bash
    . install/setup.bash
    ros2 launch mycar_slam_slam_toolbox online_sync_launch.py use_sim_time:=True
    ```
    5.  å¯åŠ¨rviz2ï¼Œå°†Fixed Frameè®¾ç½®ä¸ºmapï¼Œæ·»åŠ mapæ’ä»¶å¹¶å°†è¯é¢˜è®¾ç½®ä¸º/mapï¼Œå³å¯æ˜¾ç¤ºslam\_toolboxåˆ›å»ºçš„åœ°å›¾äº†ï¼Œå½“æœºå™¨äººè¿åŠ¨æ—¶ï¼Œåœ°å›¾ä¹Ÿä¼šéšä¹‹æ›´æ–°ã€‚
        
    6.  use\_sim\_time:=Trueå‚æ•°è¡¨ç¤ºä½¿ç”¨ä»¿çœŸçš„æ—¶é—´ã€‚
        
    
    Â Â æœ€åéœ€è¦è¯´æ˜çš„æ˜¯ï¼Œæœ¬èŠ‚å†…å®¹ä½¿ç”¨çš„æ˜¯`sync_slam_toolbox_node` èŠ‚ç‚¹ï¼Œå³ä»¥åŒæ­¥æ–¹å¼å»ºå›¾ï¼Œè€Œå¼‚æ­¥å»ºå›¾èŠ‚ç‚¹`async_slam_toolbox_node` çš„ä½¿ç”¨ä¸åŒæ­¥ç±»ä¼¼ã€‚
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDA1NzdmYTgwOTVlNDhhYTVkNzY0NTg3MGI1MWZjOGNfalBuZDA1eWw4V3d4VXpZU0pMdW1JTUdHTDZiUzNFS0FfVG9rZW46QWNET2JTcVpob1NKNlZ4ZFdQSGNISzJBbkpoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

æˆ‘ä»¬ç”¨é”®ç›˜æ§åˆ¶èŠ‚ç‚¹å»æ§åˆ¶æœºå™¨äººè·‘æ»¡æ•´å¼ åœ°å›¾ï¼Œ

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDY3MTU5NjEwZjQ2Y2VmMmUyNDU2Nzk2Nzc0OWRlNTVfZm4wWEIwRUFJb2NValVzM3h6QUhpNktmR2U5a2M3bGVfVG9rZW46V3BrM2JjQ20xb2Y0WHl4WXh4N2M5aTdkbkxoXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

é»‘è‰²ï¼šéšœç¢ç‰©

ç™½è‰²ï¼šæ— éšœç¢ç‰©åŒº

ç°è‰²ï¼šæœªçŸ¥åŒº

  

SLAMæ˜¯å»ºå›¾ä¸å®šä½ï¼Œä»¥ä¸Šå°±æ˜¯å»ºå›¾ï¼Œé‚£ä¹ˆå®šä½æ˜¯å•¥å‘¢ï¼Ÿ

å®šä½å°±æ˜¯Slamä¼šå‘å¸ƒä¸€ä¸ª/tfï¼Œè¿™é‡Œé¢ä¼šåŒ…å«æœºå™¨äººåˆ°mapä¹‹é—´çš„åæ ‡å˜æ¢ã€‚

è¿™ä¸ª/tfå‘å¸ƒçš„å…·ä½“æ˜¯mapåˆ°odomçš„åæ ‡å˜æ¢ï¼Œæ‰€ä»¥éœ€è¦ä½ è‡ªå·±å»å¤„ç†odomå’Œbase\_linkä¹‹é—´çš„åæ ‡å…³ç³»ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjgzYTc0MmUzZTlhM2RlYWU3NDM2NTQwNmMwZWFlNDVfang0YzluWnl4RUZaQXA1clQyQ05lUkNlZllTd0d1bGJfVG9rZW46V2VTOWJRWDJEb2lESmd4U01XUmNLeXdWbnNlXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

è¿™æ ·çš„è®¾è®¡ï¼Œå¯ä»¥è®©æ•´æ¡åæ ‡æ ‘æ˜¯ä¸€ä¸ªé“¾å¼ç»“æ„ï¼Œé¿å…base\_linkæˆ–è€…base\_foot\_printå‡ºç°ä¸¤ä¸ªçˆ¶ç±»ï¼Œè¿™æ ·è®¡ç®—é‡ä¼šå˜å¤§ã€‚

  

  

  

5.  ### cartographeræ¦‚è¿°
    

**æ¦‚å¿µ**

Cartographeræ˜¯Googleæ¨å‡ºçš„ä¸€å¥—åŸºäºå›¾ä¼˜åŒ–çš„æ¿€å…‰SLAMç®—æ³•åº“ï¼Œæ”¯æŒäºŒç»´å’Œä¸‰ç»´åœ°å›¾çš„æ„å»ºã€‚å®ƒç»“åˆäº†æ¿€å…‰é›·è¾¾å’Œæƒ¯æ€§æµ‹é‡å•å…ƒï¼ˆIMUï¼‰çš„æ•°æ®ï¼Œé€šè¿‡é«˜æ•ˆçš„ç®—æ³•å®ç°å®æ—¶ã€å‡†ç¡®çš„å®šä½å’Œå»ºå›¾ã€‚

**åŠŸèƒ½**

*   **å¹¶è¡Œæ‰«æåŒ¹é…** åˆ©ç”¨å¹¶è¡Œè®¡ç®—æŠ€æœ¯åŠ å¿«æ‰«æåŒ¹é…é€Ÿåº¦ï¼Œæé«˜å»ºå›¾æ•ˆç‡ã€‚
    
*   **ä½å§¿å›¾ä¼˜åŒ–** é€šè¿‡å›¾ä¼˜åŒ–æŠ€æœ¯ä¼°è®¡æœºå™¨äººçš„å§¿æ€å’Œåœ°å›¾çš„æ‹“æ‰‘ç»“æ„ï¼Œå‡å°‘ç´¯ç§¯è¯¯å·®ã€‚
    
*   **å®æ—¶åœ°å›¾æ›´æ–°** åœ¨æœºå™¨äººç§»åŠ¨è¿‡ç¨‹ä¸­å®æ—¶æ›´æ–°åœ°å›¾ï¼Œç¡®ä¿åœ°å›¾çš„å‡†ç¡®æ€§å’Œæ—¶æ•ˆæ€§ã€‚
    
*   **å›ç¯æ£€æµ‹** é€šè¿‡å›ç¯æ£€æµ‹è¯†åˆ«æœºå™¨äººæ›¾ç»è®¿é—®è¿‡çš„åŒºåŸŸï¼Œè¿›ä¸€æ­¥å‡å°‘ç´¯ç§¯è¯¯å·®ï¼Œæé«˜åœ°å›¾çš„å…¨å±€ä¸€è‡´æ€§ã€‚
    
*   **å¤šä¼ æ„Ÿå™¨èåˆ** æ”¯æŒæ¿€å…‰é›·è¾¾ã€IMUã€é‡Œç¨‹è®¡ç­‰å¤šç§ä¼ æ„Ÿå™¨æ•°æ®çš„èåˆï¼Œæé«˜å®šä½å’Œå»ºå›¾çš„ç²¾åº¦ã€‚
    

ä¼˜ç‚¹

*   **é«˜æ•ˆç¨³å®š** Cartographerçš„ç®—æ³•ç»è¿‡ç²¾å¿ƒè®¾è®¡å’Œä¼˜åŒ–ï¼Œèƒ½å¤Ÿåœ¨å¤æ‚ç¯å¢ƒä¸­é«˜æ•ˆç¨³å®šåœ°è¿è¡Œã€‚
    
*   **é«˜ç²¾åº¦** é€šè¿‡å›¾ä¼˜åŒ–å’Œå›ç¯æ£€æµ‹æŠ€æœ¯æä¾›é«˜ç²¾åº¦çš„å®šä½å’Œå»ºå›¾ç»“æœã€‚
    
*   **çµæ´»æ€§** æ”¯æŒäºŒç»´å’Œä¸‰ç»´åœ°å›¾æ„å»ºï¼Œé€‚åº”ä¸åŒåº”ç”¨åœºæ™¯çš„éœ€æ±‚ã€‚
    
*   **å¼€æºå…è´¹** Cartographeræ˜¯å¼€æºé¡¹ç›®ï¼Œç”¨æˆ·å¯ä»¥å…è´¹è·å–å’Œä½¿ç”¨å…¶æºä»£ç å’Œæ–‡æ¡£ã€‚
    
*   **ç¤¾åŒºæ”¯æŒ** æ‹¥æœ‰æ´»è·ƒçš„ç¤¾åŒºæ”¯æŒä½“ç³»ï¼Œç”¨æˆ·å¯ä»¥è·å–æ¥è‡ªå…¨çƒå¼€å‘è€…çš„å¸®åŠ©å’Œæ”¯æŒã€‚
    

  

6.  ### cartographerå®‰è£…
    

å€ŸåŠ©äºUbuntuçš„åŒ…èµ„æºç®¡ç†å™¨ï¼Œå¯ä»¥ä½¿ç”¨äºŒè¿›åˆ¶çš„æ–¹å¼å®‰è£…cartographerï¼Œå®‰è£…æŒ‡ä»¤å¦‚ä¸‹ï¼š

```Bash
sudo apt install ros-<ros2-distro>-cartographer
sudo apt install ros-<ros2-distro>-cartographer-ros

# humble
sudo apt install ros-humble-cartographer
sudo apt install ros-humble-cartographer-ros
#jazzy
sudo apt install ros-jazzy-cartographer
sudo apt install ros-jazzy-cartographer-ros
```

ä¸Šè¿°ä¸¤æ¡å®‰è£…æŒ‡ä»¤ä¸­ï¼Œå‰è€…ç”¨äºå®‰è£…cartographerçš„æ ¸å¿ƒåº“ï¼Œè¿™ä¸ªåŒ…ä¸ç›´æ¥ä¸ROS2é›†æˆï¼Œè€Œæ˜¯ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„ç®—æ³•åº“å­˜åœ¨ï¼Œä¸ºåœ°å›¾æ„å»ºå’Œå®šä½æä¾›åº•å±‚çš„è®¡ç®—æ”¯æŒã€‚åè€…åˆ™æ˜¯cartographeråœ¨ROS2ç¯å¢ƒä¸‹çš„å°è£…ï¼Œå®ƒæä¾›äº†ä¸ROS2ç³»ç»Ÿçš„æ¥å£ï¼Œä½¿å¾—Cartographerç®—æ³•èƒ½å¤Ÿåœ¨ROS2ç¯å¢ƒä¸­è¿è¡Œã€‚å¦å¤–æŒ‡ä»¤ä¸­çš„`<ros2-distro>`è¯·æ›¿æ¢æˆå½“å‰æ‰€ä½¿ç”¨çš„ROS2ç‰ˆæœ¬ã€‚

  

7.  ### cartographerèŠ‚ç‚¹è¯´æ˜
    

åœ¨Cartographeræ¡†æ¶ä¸­ï¼Œ`cartographer_node`å’Œ`cartographer_occupancy_grid_node`æ˜¯ä¸¤ä¸ªå…³é”®çš„èŠ‚ç‚¹ï¼Œå®ƒä»¬å„è‡ªæ‰¿æ‹…ç€ä¸åŒçš„è§’è‰²å’ŒåŠŸèƒ½ã€‚è¯¦ç»†ä»‹ç»å¦‚ä¸‹ã€‚

> **cartographer\_nodeï¼š**
> 
> ä¸»è¦è´Ÿè´£è®¢é˜…æ¥è‡ªå„ç§ä¼ æ„Ÿå™¨çš„æ•°æ®ï¼ˆå¦‚æ¿€å…‰é›·è¾¾ã€IMUã€é‡Œç¨‹è®¡ç­‰ï¼‰ï¼Œå¹¶åŸºäºè¿™äº›æ•°æ®å®æ—¶æ„å»ºåœ°å›¾ã€‚å®ƒé‡‡ç”¨å­å›¾ï¼ˆsubmapï¼‰çš„æ–¹æ³•æ¥é€æ­¥æ„å»ºå’Œæ›´æ–°åœ°å›¾ï¼Œç¡®ä¿å®šä½çš„å‡†ç¡®æ€§å’Œå»ºå›¾çš„å®æ—¶æ€§ã€‚
> 
> **cartographer\_occupancy\_grid\_nodeï¼š**
> 
> è¯¥èŠ‚ç‚¹è´Ÿè´£æ¥æ”¶`cartographer_node`å‘å¸ƒçš„å­å›¾åˆ—è¡¨ï¼ˆ`/submap_list`ï¼‰ï¼Œå¹¶å°†å…¶æ‹¼æ¥æˆå®Œæ•´çš„æ …æ ¼åœ°å›¾ï¼ˆoccupancy grid mapï¼‰ï¼Œç„¶åå‘å¸ƒè¿™ä¸ªåœ°å›¾ã€‚è¿™ä¸ªèŠ‚ç‚¹æ˜¯åœ°å›¾ç”Ÿæˆçš„æœ€ç»ˆç¯èŠ‚ï¼Œå®ƒä½¿å¾—Cartographerèƒ½å¤Ÿè¾“å‡ºäººç±»å¯è¯»ä¸”æ˜“äºå¯è§†åŒ–çš„åœ°å›¾ã€‚

è¿™ä¸¤ä¸ªèŠ‚ç‚¹çš„ååŒå·¥ä½œï¼Œå‰è€…è´Ÿè´£å®æ—¶æ„å»ºå’Œæ›´æ–°åœ°å›¾ï¼Œåè€…åˆ™è´Ÿè´£å°†å­å›¾æ‹¼æ¥æˆå®Œæ•´çš„æ …æ ¼åœ°å›¾å¹¶å‘å¸ƒï¼Œä½¿å¾—Cartographerèƒ½å¤Ÿé«˜æ•ˆåœ°å®ç°SLAMåŠŸèƒ½ã€‚

1.  cartographer\_nodeè®¢é˜…çš„è¯é¢˜
    

<!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
| è¯é¢˜ | ç±»å‹ | æè¿° |
|:---|:---|:---|
| /scan | sensor_msgs/msg/LaserScan | æ¥è‡ªæ¿€å…‰é›·è¾¾è¾“å…¥çš„æ‰«ææ•°æ® |
| /odom | nav_msgs/msg/Odometry | é‡Œç¨‹è®¡æ¶ˆæ¯ |

2.  cartographer\_nodeå‘å¸ƒçš„è¯é¢˜
    

<!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
| è¯é¢˜ | ç±»å‹ | æè¿° |
|:---|:---|:---|
| /scan_matched_points2 | sensors_msgs/msg/PointCloud2 | åŒ¹é…å¥½çš„ç‚¹äº‘æ•°æ®ï¼Œç”¨äºscan-to-submap matching |
| /submap_list | cartographer_ros_msgs/SubmapList | å‘å¸ƒæ„å»ºå¥½çš„å­å›¾åˆ—è¡¨ |

3.  cartographer\_nodeå‘å¸ƒçš„æœåŠ¡
    

<!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
| è¯é¢˜ | ç±»å‹ | æè¿° |
|:---|:---|:---|
| /submap_query | cartographer_ros_msgs/srv/SubmapQuery | æä¾›æŸ¥è¯¢å­å›¾çš„æœåŠ¡ï¼Œè·å–åˆ°æŸ¥è¯¢çš„å­å›¾ |
| /start_trajectory | cartographer_ros_msgs/srv/StartTrajectory | å¼€å§‹ä¸€æ¡è½¨è¿¹ |
| /finish_trajectory | cartographer_ros_msgs/srv/FinishTrajectory | ç»“æŸä¸€æ¡ç»™å®šIDçš„è½¨è¿¹ |
| /write_state | cartographer_ros_msgs/srv/WriteState | å°†å½“å‰çŠ¶æ€å†™å…¥ç£ç›˜æ–‡ä»¶ä¸­ |
| /get_trajectory_states | cartographer_ros_msgs/srv/GetTrajectoryStates | è·å–æŒ‡å®šè½¨è¿¹çš„çŠ¶æ€ |
| /read_metrics | cartographer_ros_msgs/srv/ReadMetrics | è¯»å–æ€§èƒ½æŒ‡æ ‡ |

4.  cartographer\_nodeå‚æ•°
    

`cartographer_node`èŠ‚ç‚¹éœ€è¦æ¥æ”¶ä¸€ä¸ªå‚æ•°é…ç½®æ–‡ä»¶ï¼Œè¯¥é…ç½®æ–‡ä»¶åŒ…å«äº†åœ°å›¾æ„å»ºã€è½¨è¿¹è·Ÿè¸ªç­‰æ‰€éœ€çš„å„é¡¹å‚æ•°ã€‚

5.  cartographer\_occupancy\_grid\_nodeè®¢é˜…çš„è¯é¢˜
    

<!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
| è¯é¢˜ | ç±»å‹ | æè¿° |
|:---|:---|:---|
| /submap_list | cartographer_ros_msgs/SubmapList | å­å›¾åˆ—è¡¨ |

6.  cartographer\_occupancy\_grid\_nodeå‘å¸ƒçš„è¯é¢˜
    

<!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
| è¯é¢˜ | ç±»å‹ | æè¿° |
|:---|:---|:---|
| /map | nav_msgs/msg/OccupancyGrid | å‘å¸ƒçš„æ …æ ¼åœ°å›¾ |

7.  cartographer\_occupancy\_grid\_nodeè¯·æ±‚çš„æœåŠ¡
    

<!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
| è¯é¢˜ | ç±»å‹ | æè¿° |
|:---|:---|:---|
| /submap_query | cartographer_ros_msgs/srv/SubmapQuery | è·å–å­å›¾ |

8.  cartographer\_occupancy\_grid\_nodeå‚æ•°
    

`cartographer_occupancy_grid_node`èŠ‚ç‚¹éœ€è¦é…ç½®åœ°å›¾çš„åˆ†è¾¨ç‡å’Œæ›´æ–°å‘¨æœŸç­‰å‚æ•°ï¼Œä»¥ç¡®ä¿ç”Ÿæˆçš„æ …æ ¼åœ°å›¾æ»¡è¶³ç‰¹å®šçš„ç²¾åº¦å’Œå®æ—¶æ€§è¦æ±‚ã€‚

  

  

8.  ### cartogarpheråŸºæœ¬ä½¿ç”¨
    

1.  å‡†å¤‡å·¥ä½œ
    

åœ¨srcç›®å½•ä¸‹ï¼Œè¯·å…ˆè°ƒç”¨å¦‚ä¸‹æŒ‡ä»¤åœ¨å·¥ä½œç©ºé—´çš„srcç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåŠŸèƒ½åŒ…ï¼š

```Bash
ros2 pkg create mycar_slam_cartographer --dependencies cartographer
```

2.  ç¼–å†™launchæ–‡ä»¶ä¸å‚æ•°æ–‡ä»¶
    

åœ¨åŠŸèƒ½åŒ…ä¸‹ï¼Œæ–°å»ºlaunchç›®å½•å’Œparamsç›®å½•ï¼Œlaunchç›®å½•ä¸‹æ–°å»º`cartographer.launch.py`æ–‡ä»¶å¹¶è¾“å…¥å¦‚ä¸‹å†…å®¹ï¼š

```Python
from launch import LaunchDescription
from launch.actions import DeclareLaunchArgument
from launch.substitutions import LaunchConfiguration
from launch_ros.actions import Node
import os
from ament_index_python.packages import get_package_share_directory

def generate_launch_description():

    use_sim_time_arg = DeclareLaunchArgument('use_sim_time', default_value = 'True')
    resolution_arg = DeclareLaunchArgument('resolution', default_value='0.05')

    cartographer_node = Node(
        package = 'cartographer_ros',
        executable = 'cartographer_node',
        parameters = [{'use_sim_time': LaunchConfiguration('use_sim_time')}],
        arguments = [
            '-configuration_directory', os.path.join(get_package_share_directory("mycar_slam_cartographer"),"params"),
            '-configuration_basename', 'mycar.lua'],
        output = 'screen'
    )

    cartographer_occupancy_grid_node = Node(
        package = 'cartographer_ros',
        executable = 'cartographer_occupancy_grid_node',
        parameters = [
            {'use_sim_time': LaunchConfiguration('use_sim_time')},
            {'resolution': LaunchConfiguration('resolution')}],
    )

    return LaunchDescription([
        use_sim_time_arg,
        resolution_arg,
        cartographer_node,
        cartographer_occupancy_grid_node,
    ])
```

è¯¥launchæ–‡ä»¶ä¸»è¦æ˜¯åŠ è½½äº†cartographer\_rosä¸‹çš„cartographer\_nodeä¸cartographer\_occupancy\_grid\_nodeèŠ‚ç‚¹ï¼Œå¹¶ä¸”ä¼šä»å½“å‰åŠŸèƒ½åŒ…çš„paramsä¸‹è¯»å–ä¸€ä¸ªåä¸ºmycar.luaçš„é…ç½®æ–‡ä»¶ã€‚è¿™ä¸ªé…ç½®æ–‡ä»¶è¿˜ä¸å­˜åœ¨ï¼Œæ¥ä¸‹æ¥éœ€è¦åœ¨paramsç›®å½•ä¸‹æ–°å»ºmycar.luaæ–‡ä»¶ï¼Œå¹¶è¾“å…¥å¦‚ä¸‹å†…å®¹ï¼š

```Lua
include "map_builder.lua" -- åœ°å›¾æ„å»ºå™¨
include "trajectory_builder.lua" -- è½¨è¿¹æ„å»ºå™¨

options = {
  map_builder = MAP_BUILDER,
  trajectory_builder = TRAJECTORY_BUILDER,
  map_frame = "map",  -- åœ°å›¾åæ ‡ç³»
  tracking_frame = "base_link", -- è·Ÿè¸ªçš„åæ ‡ç³»ï¼Œå¯ä»¥æ˜¯åŸºåæ ‡ç³»ã€é›·è¾¾æˆ–imuçš„åæ ‡ç³»
  published_frame = "odom", -- cartographerå‘å¸ƒçš„ä½å§¿ï¼ˆposeï¼‰çš„åæ ‡ç³»
  odom_frame = "carto_odom",  -- cartographer è®¡ç®—åä¼˜åŒ–çš„é‡Œç¨‹è®¡ï¼Œå¹¶éæœºå™¨äººæœ¬èº«é‡Œç¨‹è®¡
  provide_odom_frame = false, -- æ˜¯å¦å‘å¸ƒcartographerçš„é‡Œç¨‹è®¡
  publish_frame_projected_to_2d = true, -- æ˜¯å¦è½¬æ¢æˆ2d(æ— ä¿¯ä»°ã€æ»šåŠ¨çš„æƒ…å†µä¸‹ä¸º true)
  use_odometry = true, -- æ˜¯å¦è®¢é˜…é‡Œç¨‹è®¡æ•°æ®
  use_nav_sat = false, -- æ˜¯å¦è®¢é˜…GPS
  use_landmarks = false, -- æ˜¯å¦è®¢é˜…è·¯æ ‡
  num_laser_scans = 1, -- è®¢é˜…çš„é›·è¾¾çš„æ•°é‡
  num_multi_echo_laser_scans = 0, -- è®¢é˜…çš„å¤šå±‚å›æ³¢æ¿€å…‰é›·è¾¾æ•°é‡
  num_subdivisions_per_laser_scan = 1, -- å°†æ¿€å…‰é›·è¾¾çš„æ•°æ®æ‹†åˆ†æˆå¤šå°‘éƒ¨åˆ†å‘å¸ƒ
  num_point_clouds = 0, -- è®¢é˜…å¤šçº¿æ¿€å…‰é›·è¾¾çš„æ•°é‡
  lookup_transform_timeout_sec = 1.5, -- åæ ‡å˜æ¢è¶…æ—¶æ—¶é—´
  submap_publish_period_sec = 0.5, -- å‘å¸ƒå­å›¾çš„æ—¶é—´é—´éš”
  pose_publish_period_sec = 5e-3, -- å‘å¸ƒposeçš„æ—¶é—´é—´éš”
  trajectory_publish_period_sec = 30e-3, -- å‘å¸ƒè½¨è¿¹çš„æ—¶é—´é—´éš”
  rangefinder_sampling_ratio = 1., -- é›·è¾¾é‡‡æ ·æ¯”ä¾‹
  odometry_sampling_ratio = 0.8, -- é‡Œç¨‹è®¡é‡‡æ ·æ¯”ä¾‹(å¦‚æœé‡Œç¨‹è®¡ç²¾åº¦ä½ï¼Œå¯ä»¥å‡å°è¯¥è®¾ç½®å€¼)
  fixed_frame_pose_sampling_ratio = 1., -- å‚è€ƒåæ ‡ç³»é‡‡æ ·æ¯”ä¾‹
  imu_sampling_ratio = 1.,-- imué‡‡æ ·æ¯”ä¾‹
  landmarks_sampling_ratio = 1., -- è·¯æ ‡é‡‡æ ·æ¯”ä¾‹
}

MAP_BUILDER.use_trajectory_builder_2d = true -- å¯ç”¨2Dè½¨è¿¹æ„å»ºå™¨

TRAJECTORY_BUILDER_2D.min_range = 0.15 -- æœ€å°é›·è¾¾æœ‰æ•ˆè·ç¦»
TRAJECTORY_BUILDER_2D.max_range = 6.0 -- æœ€å¤§é›·è¾¾æœ‰æ•ˆè·ç¦»
TRAJECTORY_BUILDER_2D.missing_data_ray_length = 3. -- ç¼ºå¤±æ•°æ®çš„å°„çº¿é•¿åº¦
TRAJECTORY_BUILDER_2D.use_imu_data = false -- æ˜¯å¦ä½¿ç”¨ imu æ•°æ®
TRAJECTORY_BUILDER_2D.use_online_correlative_scan_matching = true -- æ˜¯å¦ä½¿ç”¨åœ¨çº¿ç›¸å…³æ‰«æåŒ¹é…
TRAJECTORY_BUILDER_2D.motion_filter.max_angle_radians = math.rad(0.1) -- è¿åŠ¨æ»¤æ³¢å™¨çš„æœ€å¤§è§’åº¦é™åˆ¶ï¼ˆä»¥å¼§åº¦ä¸ºå•ä½ï¼‰

POSE_GRAPH.constraint_builder.min_score = 0.65 -- å»ºçº¦æŸæ—¶çš„æœ€å°åˆ†æ•°
POSE_GRAPH.constraint_builder.global_localization_min_score = 0.7 -- å…¨å±€å®šä½æ—¶çš„æœ€å°åˆ†æ•°

-- POSE_GRAPH.optimize_every_n_nodes = 0

return options
```

é…ç½®æ–‡ä»¶çš„å†…å®¹éœ€è¦æ ¹æ®å®é™…æƒ…å†µè¿›è¡ŒåŠ¨æ€è°ƒæ•´ã€‚

3.  ç¼–è¾‘é…ç½®æ–‡ä»¶
    

æ‰“å¼€`CMakeLists.txt` å¹¶è¾“å…¥å¦‚ä¸‹å†…å®¹ï¼š

```CMake
install(DIRECTORY launch params
  DESTINATION share/${PROJECT_NAME}
)
```

4.  ç¼–è¯‘
    

ç»ˆç«¯ä¸­è¿›å…¥å½“å‰å·¥ä½œç©ºé—´ï¼Œç¼–è¯‘åŠŸèƒ½åŒ…ï¼š

```Bash
colcon build --packages-select mycar_slam_cartographer
```

5.  æ‰§è¡Œ
    

ï¼ˆ1ï¼‰è¯·å…ˆè°ƒç”¨å¦‚ä¸‹æŒ‡ä»¤å¯åŠ¨ä»¿çœŸç¯å¢ƒï¼š

```Plain Text
. install/setup.bash
ros2 launch stage_ros2 my_house.launch.py
```

ï¼ˆ2ï¼‰ç„¶ååœ¨ç»ˆç«¯ä¸‹è¿›å…¥å½“å‰å·¥ä½œç©ºé—´ï¼Œè¾“å…¥å¦‚ä¸‹æŒ‡ä»¤ï¼š

```Plain Text
. install/setup.bash
ros2 launch mycar_slam_cartographer cartographer.launch.py
```

ï¼ˆ3ï¼‰å¯åŠ¨rviz2ï¼Œå°†Fixed Frameè®¾ç½®ä¸ºmapï¼Œæ·»åŠ mapæ’ä»¶å¹¶å°†è¯é¢˜è®¾ç½®ä¸º/mapï¼Œå³å¯æ˜¾ç¤ºåˆ›å»ºçš„åœ°å›¾äº†ï¼Œå½“æœºå™¨äººè¿åŠ¨æ—¶ï¼Œåœ°å›¾ä¹Ÿä¼šéšä¹‹æ›´æ–°ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmU5YTMwMGU2MWUyYmIxMzA3MjljMGNlNmQ5NDc3Y2NfUmpXU0U3WjVzU2lRV1pvdjVtTlBveWJUdzQ4Z2JNSlBfVG9rZW46SHVBeGJYdG9pb3hzODd4ckY0ZGNjNDEybktmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjEyNDdjYjNjZTQzMGQ3ZmY3OTA5NDRlYzQ4ZGMzZDJfeWxnYUVSVjZOTkhNbEdUcVMzaE5HcHJ5d2huTnkySlBfVG9rZW46WGJKemJRUFlIbzk2eEl4VVpxbGNvMVNBblhnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTE2Y2VmM2MyMTk3ZDA0YTQ2ZGE5YzdkY2M1Yjc2ZGJfM296SVFLTHA1MTZhY3RnU1Aybm1MZ2dSY21JQmpubHlfVG9rZW46S0Y0QmI4NkxNb0NOVWh4ajdZSmNHYW5ObmN4XzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

3.  ## åœ°å›¾æœåŠ¡
    

SLAMå»ºå›¾æ—¶ï¼Œåœ°å›¾æ•°æ®æ˜¯ä¿å­˜åœ¨å†…å­˜ä¸­çš„ï¼Œè¿™ä¹Ÿæ„å‘³ç€ï¼Œä¸€æ—¦èŠ‚ç‚¹å…³é—­ï¼Œæ•°æ®ä¹Ÿä¼šä¸€å¹¶è¢«é‡Šæ”¾ï¼Œè€Œæ›´åˆç†çš„å®ç°åº”è¯¥æ˜¯å°†æ„å»ºçš„åœ°å›¾åºåˆ—åŒ–åˆ°çš„ç£ç›˜ä»¥æŒä¹…åŒ–å­˜å‚¨ï¼Œå¹¶ä¸”åæœŸè¿˜è¦é€šè¿‡ååºåˆ—åŒ–è¯»å–ç£ç›˜çš„åœ°å›¾æ•°æ®ä»¥åšå…¶ä»–æ“ä½œã€‚åœ¨Nav2ä¸­å·²ç»å·²ç»å°è£…å¥½äº†åœ°å›¾åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„ç›¸å…³åŠŸèƒ½åŒ…ï¼Œè¯¥åŒ…æ˜¯ï¼š`nav2_map_server`ã€‚

åœ¨`nav2_map_server`ä¸­ï¼Œå¯ä»¥é€šè¿‡è¯é¢˜å’ŒæœåŠ¡æ¥å£ä¸Nav2ç³»ç»Ÿçš„å…¶ä½™éƒ¨åˆ†è¿›è¡Œäº¤äº’ã€‚`nav2_map_server`åŒ…ä¸‹æœ‰ä¸¤ä¸ªé‡è¦çš„èŠ‚ç‚¹ï¼Œåˆ†åˆ«æ˜¯`map_saver_cli`å’Œ`map_server`ï¼Œé€šè¿‡`map_saver_cli`èŠ‚ç‚¹åˆ™å¯ä»¥ä¿å­˜åœ°å›¾ï¼Œè€Œ`map_server`èŠ‚ç‚¹åˆ™å¯ä»¥åœ¨å¯åŠ¨æ—¶æ˜¾ç¤ºåœ°å›¾ã€‚

  

1.  ### ä¿å­˜åœ°å›¾(åºåˆ—åŒ–)
    

  

1.  #### åœ°å›¾ä¿å­˜èŠ‚ç‚¹è¯´æ˜
    

åœ¨`nav2_map_server`ä¸­çš„åœ°å›¾ä¿å­˜èŠ‚ç‚¹æ˜¯`map_saver_server`ï¼Œè¯¥èŠ‚ç‚¹ç›¸å…³ä¿¡æ¯å¦‚ä¸‹ã€‚

1.  è®¢é˜…çš„è¯é¢˜
    

<!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
| è¯é¢˜ | æ¥å£ | æè¿° |
|:---|:---|:---|
| /map | nav_msgs/msg/OccupancyGrid | SLAMèŠ‚ç‚¹å‘å¸ƒçš„åœ°å›¾æ•°æ® |

2.  å‚æ•°
    

*   **save\_map\_timeout**  ä¿å­˜åœ°å›¾æ“ä½œçš„æœ€å¤§ç­‰å¾…æ—¶é—´ã€‚
    
*   **free\_thresh\_default**  æ …æ ¼å•å…ƒè¢«è®¤ä¸ºæœªè¢«å ç”¨çš„æ¦‚ç‡é˜ˆå€¼ã€‚
    
*   **occupied\_thresh\_default**  æ …æ ¼å•å…ƒè¢«è®¤ä¸ºå ç”¨çš„æ¦‚ç‡é˜ˆå€¼ã€‚
    
*   **map\_subscribe\_transient\_local**  èŠ‚ç‚¹é‡å¯åæ¶ˆæ¯ä¸ä¿ç•™ï¼Œé»˜è®¤ä¸º trueã€‚
    

3.  map\_saver\_cli
    

å¦å¤–ï¼Œè€Œä¸ºäº†ä¾¿äºä½¿ç”¨ï¼Œåœ¨`map_saver_server`çš„åŸºç¡€ä¹‹ä¸Šè¿˜å°è£…äº†ä¸€ä¸ªåä¸º`map_saver_cli`çš„å¯æ‰§è¡Œç¨‹åºï¼Œå®ƒå¯ä»¥ä»¥å®å‚çš„æ–¹å¼æ›´æ–¹ä¾¿çš„è®¾ç½®åœ°å›¾ä¿å­˜ç›¸å…³æ•°æ®ï¼Œå¹¶ä¸”åç»­æ‰§è¡Œæ—¶ä¹Ÿæ˜¯è°ƒç”¨`map_saver_cli`ï¼Œå…¶å®å‚åˆ—è¡¨å¦‚ä¸‹ï¼š

*   **\-t** è®¢é˜…çš„åœ°å›¾è¯é¢˜ã€‚
    
*   **\-f** åœ°å›¾å­˜å‚¨è·¯å¾„ã€‚
    
*   **\--occ** æ …æ ¼å•å…ƒè¢«è®¤ä¸ºå ç”¨çš„æ¦‚ç‡é˜ˆå€¼ã€‚
    
*   **\--free** æ …æ ¼å•å…ƒè¢«è®¤ä¸ºæœªè¢«å ç”¨çš„æ¦‚ç‡é˜ˆå€¼ã€‚
    
*   **\--fmt** å›¾ç‰‡æ ¼å¼ã€‚
    
*   **\--mode** åœ°å›¾æ¨¡å¼ï¼Œtrinary(é»˜è®¤)æˆ–scaleæˆ–rawã€‚
    

  

2.  #### åœ°å›¾ä¿å­˜åŸºæœ¬æ“ä½œ
    

**å‡†å¤‡å·¥ä½œ**

è¯·å…ˆå¯åŠ¨ä»¿çœŸæˆ–å®ä½“æœºå™¨äººï¼Œç„¶åå¯åŠ¨SLAMç›¸å…³èŠ‚ç‚¹ï¼Œå®ç°åŸºæœ¬çš„å»ºå›¾åŠŸèƒ½ã€‚

**ä¿å­˜åœ°å›¾**

SLAMå»ºå›¾å®Œæ¯•ï¼Œåœ¨ç»ˆç«¯ä¸‹è¿›å…¥å·¥ä½œç©ºé—´ï¼Œè°ƒç”¨å¦‚ä¸‹æŒ‡ä»¤ä¿å­˜åœ°å›¾ï¼š

```Bash
ros2 run nav2_map_server map_saver_cli -f map/my_map
```

ä¸Šè¿°æŒ‡ä»¤å°†è®¢é˜…/mapè¯é¢˜ï¼Œå¹¶æŠŠ/mapè¯é¢˜é‡Œçš„æ•°æ®ä¿å­˜ä¸ºæ–‡ä»¶ï¼Œåœ¨å·¥ä½œç©ºé—´ä¸‹çš„mapç›®å½•(*éœ€è¦è‡ªè¡Œåˆ›å»ºè¯¥ç›®å½•ï¼Œå¦åˆ™å°†ä¼šæŠ›å‡ºå¼‚å¸¸*)ä¸­ï¼Œç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼Œåˆ†åˆ«åä¸ºï¼š`my_map.yaml`å’Œ`my_map.pgm`ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTVmZTFhM2Q2NGI0NTgxZTFlZjMzMDIyNDZmNTgzMWNfWTJJQUFOaGtVQkI5SmlrWWVhNWljNkZCdWZ6OXljV1dfVG9rZW46WEtIVWJRd3BrbzRNTk94cmlNbmNBT3k3bmdjXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmZlMWFiMjg2M2MwZDlhNTZmZTFkOWFlZDhjZWQyNThfNm1oRFV2eGZxaW5idkJsdnJ5WUFndVpyU0NDM3Zzc0JfVG9rZW46Sm1NMGJQMks0b0FzbUx4WUIwZGNNdFJDbjRiXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

3.  #### åœ°å›¾æ¥å£
    

åœ¨Nav2ä¸­åœ°å›¾ç›¸å…³çš„æ¥å£ä¸»è¦æœ‰ä¸¤ä¸ªï¼š

*   **nav\_msgs/msg/MapMetaData** åœ°å›¾å…ƒæ•°æ®ï¼ŒåŒ…æ‹¬åœ°å›¾çš„å®½åº¦ã€é«˜åº¦ã€åˆ†è¾¨ç‡ç­‰ã€‚
    
*   **nav\_msgs/msg/OccupancyGrid** åœ°å›¾æ …æ ¼æ•°æ®ï¼Œä¸€èˆ¬ä¼šåœ¨rvizä¸­ä»¥å›¾å½¢åŒ–çš„æ–¹å¼æ˜¾ç¤ºã€‚
    

  

**nav\_msgs/msg/MapMetaData**

è°ƒç”¨æŒ‡ä»¤`ros2 interface show nav_msgs/msg/MapMetaData`æŸ¥çœ‹æ¥å£æ ¼å¼ï¼Œæ˜¾ç¤ºå¦‚ä¸‹å†…å®¹ï¼ˆæ³¨é‡Šå·²æ±‰åŒ–ï¼‰ï¼š

```Plain Text
# å®ƒåŒ…å«äº†å…³äºOccupancyGridç‰¹æ€§çš„åŸºæœ¬ä¿¡æ¯
# åœ°å›¾åŠ è½½æ—¶é—´
builtin_interfaces/Time map_load_time
        int32 sec
        uint32 nanosec

# åœ°å›¾åˆ†è¾¨ç‡ [ç±³/åƒç´ ]
float32 resolution

# åœ°å›¾å®½åº¦ [åƒç´ ]
uint32 width

# åœ°å›¾é«˜åº¦ [åƒç´ ]
uint32 height

#åœ°å›¾çš„åŸç‚¹åæ ‡[ç±³ï¼Œç±³ï¼Œå¼§åº¦]ã€‚è¿™æ˜¯åœ°å›¾ä¸­å•å…ƒæ ¼(0,0)å·¦ä¸‹è§’åœ¨ç°å®ä¸–ç•Œä¸­çš„ä½ç½®å’Œæ–¹å‘ã€‚
geometry_msgs/Pose origin
        Point position
                float64 x
                float64 y
                float64 z
        Quaternion orientation
                float64 x 0
                float64 y 0
                float64 z 0
                float64 w 1
```

**nav\_msgs/msg/OccupancyGrid**

è°ƒç”¨æŒ‡ä»¤`ros2 interface show nav_msgs/msg/OccupancyGrid`æŸ¥çœ‹æ¥å£æ ¼å¼ï¼Œæ˜¾ç¤ºå¦‚ä¸‹å†…å®¹ï¼ˆæ³¨é‡Šå·²æ±‰åŒ–ï¼‰ï¼š

```Plain Text
# å®ƒä»£è¡¨ä¸€ä¸ªäºŒç»´ç½‘æ ¼åœ°å›¾ã€‚
std_msgs/Header header
        builtin_interfaces/Time stamp
                int32 sec
                uint32 nanosec
        string frame_id

# åœ°å›¾å…ƒæ•°æ®
MapMetaData info
        builtin_interfaces/Time map_load_time
                int32 sec
                uint32 nanosec
        float32 resolution
        uint32 width
        uint32 height
        geometry_msgs/Pose origin
                Point position
                        float64 x
                        float64 y
                        float64 z
                Quaternion orientation
                        float64 x 0
                        float64 y 0
                        float64 z 0
                        float64 w 1

# åœ°å›¾æ•°æ®æŒ‰ç…§è¡Œä¼˜å…ˆçš„é¡ºåºè¿›è¡Œæ’åˆ—ï¼Œ
# è¿™æ„å‘³ç€é¦–å…ˆå¡«å……ç¬¬ä¸€è¡Œçš„æ‰€æœ‰å•å…ƒæ ¼ï¼Œ
# ç„¶åå¡«å……ç¬¬äºŒè¡Œï¼Œä¾æ­¤ç±»æ¨ã€‚
# èµ·å§‹å•å…ƒæ ¼æ˜¯(0,0)ï¼Œä¹Ÿå°±æ˜¯åœ°å›¾çš„å·¦ä¸Šè§’ã€‚
# å•å…ƒæ ¼(1, 0)ç´§æ¥ç€(0,0)ï¼Œæ˜¯xæ–¹å‘ä¸Šç´§é‚»çš„ä¸‹ä¸€ä¸ªå•å…ƒæ ¼ã€‚
# è€Œå•å…ƒæ ¼(0, 1)åˆ™ä½äºç¬¬ä¸€è¡Œçš„ç¬¬äºŒä¸ªä½ç½®ï¼Œå…¶ç´¢å¼•ç­‰äºåœ°å›¾çš„å®½åº¦ï¼ˆinfo.widthï¼‰ï¼Œ
# ç„¶åæ‰æ˜¯(1, 1)å•å…ƒæ ¼ï¼Œå³ç¬¬äºŒè¡Œçš„ç¬¬äºŒä¸ªå•å…ƒæ ¼ã€‚

# å…³äºåœ°å›¾æ•°æ®çš„å€¼ï¼Œå®ƒä»¬æ ¹æ®å…·ä½“çš„åº”ç”¨éœ€æ±‚æ¥å®šä¹‰ã€‚ä½†åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œ
# ä¼šä½¿ç”¨0è¡¨ç¤ºè¯¥å•å…ƒæ ¼æ˜¯æœªå ç”¨çš„ï¼Œå³æœºå™¨äººå¯ä»¥å®‰å…¨é€šè¿‡ï¼›
# 1è¡¨ç¤ºè¯¥å•å…ƒæ ¼æ˜¯ç¡®å®šå ç”¨çš„ï¼Œå³å­˜åœ¨éšœç¢ç‰©ï¼›
# è€Œ-1è¡¨ç¤ºè¯¥å•å…ƒæ ¼çš„çŠ¶æ€æ˜¯æœªçŸ¥çš„ï¼Œå³æœºå™¨äººå°šæœªæ¢æµ‹åˆ°è¯¥åŒºåŸŸçš„çŠ¶æ€ã€‚
int8[] data
```

4.  #### åœ°å›¾å­˜å‚¨æ ¼å¼
    

åœ¨ **åœ°å›¾ä¿å­˜åŸºæœ¬æ“ä½œ**  ä¸€èŠ‚ä¸­ï¼Œåœ°å›¾ä¿å­˜ååç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼Œè¿™ä¸¤ä¸ªæ–‡ä»¶å°±æ˜¯ç”¨æ¥å­˜å‚¨åºåˆ—åŒ–åçš„åœ°å›¾æ•°æ®çš„ã€‚å…¶ä¸­ï¼Œmy\_map.pgmæ˜¯ä¸€å¼ å›¾ç‰‡èµ„æºï¼Œä½¿ç”¨å›¾ç‰‡æŸ¥çœ‹ç¨‹åºæ‰“å¼€å³å¯ï¼Œè€Œmy\_map.yamlä¿å­˜çš„æ˜¯åœ°å›¾çš„å…ƒæ•°æ®ä¿¡æ¯ï¼Œç”¨äºæè¿°å›¾ç‰‡ï¼Œå†…å®¹æ ¼å¼å¦‚ä¸‹ï¼š

```YAML
image: my_map.pgm
mode: trinary
resolution: 0.05
origin: [-0.955, -10.9, 0]
negate: 0
occupied_thresh: 0.65
free_thresh: 0.25
```

**å‚æ•°è§£é‡Šï¼š**

*   **image**  è¢«æè¿°çš„å›¾ç‰‡èµ„æºè·¯å¾„ï¼Œå¯ä»¥æ˜¯ç»å¯¹è·¯å¾„ä¹Ÿå¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„ã€‚
    
*   **resolution** å›¾ç‰‡åˆ†ç‰‡ç‡(å•ä½: m/åƒç´ )ã€‚
    
*   **origin** åœ°å›¾ä¸­å·¦ä¸‹åƒç´ çš„äºŒç»´å§¿æ€ï¼Œä¸ºï¼ˆxï¼Œyï¼Œzï¼‰ï¼Œåèˆªä¸ºé€†æ—¶é’ˆæ—‹è½¬ï¼ˆåèˆª=0 è¡¨ç¤ºæ— æ—‹è½¬ï¼‰ã€‚
    
*   **occupied\_thresh** å ç”¨æ¦‚ç‡å¤§äºæ­¤é˜ˆå€¼çš„åƒç´ è¢«è§†ä¸ºå®Œå…¨å ç”¨ã€‚
    
*   **free\_thresh** å ç”¨ç‡å°äºæ­¤é˜ˆå€¼çš„åƒç´ è¢«è§†ä¸ºå®Œå…¨ç©ºé—²ã€‚
    
*   **negate** æ˜¯å¦åº”è¯¥é¢ å€’ç™½è‰²/é»‘è‰² è‡ªç”±/å ç”¨çš„è¯­ä¹‰ã€‚
    
*   **mode**  åœ°å›¾æ¨¡å¼ï¼Œtrinary(é»˜è®¤)æˆ–scaleæˆ–rawã€‚
    

  

2.  ### è¯»å–åœ°å›¾(ååºåˆ—åŒ–)
    

1.  #### åœ°å›¾è¯»å–èŠ‚ç‚¹è¯´æ˜
    

åœ¨`nav2_map_server`ä¸­çš„åœ°å›¾è¯»å–èŠ‚ç‚¹æ˜¯`map_server`ï¼Œè¯¥èŠ‚ç‚¹ç›¸å…³ä¿¡æ¯å¦‚ä¸‹ã€‚

**å‘å¸ƒçš„è¯é¢˜**

<!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
| è¯é¢˜ | æ¥å£ | æè¿° |
|:---|:---|:---|
| /map | nav_msgs/msg/OccupancyGrid | åœ°å›¾æ•°æ® |

**å‚æ•°**

*   **frame\_id**  åœ°å›¾åæ ‡ç³»åç§°ã€‚
    
*   **topic\_name**  è¯é¢˜åç§°ã€‚
    
*   **yaml\_filename**  åœ°å›¾æ•°æ®æºã€‚
    

  

2.  #### åœ°å›¾è¯»å–åŸºæœ¬æ“ä½œ
    

**å‡†å¤‡å·¥ä½œ**

è¯·å…ˆè°ƒç”¨å¦‚ä¸‹æŒ‡ä»¤åœ¨å·¥ä½œç©ºé—´çš„srcç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåŠŸèƒ½åŒ…ï¼š

```Bash
ros2 pkg create mycar_map_server --dependencies nav2_map_server
```

åœ¨åŠŸèƒ½åŒ…ä¸‹ï¼Œæ–°å»ºlaunchæ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨CMakeLists.txtä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š

```CMake
install(DIRECTORY launch DESTINATION share/${PROJECT_NAME})
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGU0NTNlZmUxYzRkYjNmOTNkODA5ZDYwM2ZiMmVlZjZfT013WUs2Z09MRG5yODU5TEVNbFJsQXpaTGFYa0lNREpfVG9rZW46VWx0WWJyQ2NUb01hdFF4UzJBYWMyNDdFbkpnXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

**è¯»å–åœ°å›¾**

ä½¿ç”¨`map_server`è¯»å–åœ°å›¾æ—¶ï¼Œå¸¸ç”¨çš„æ–¹å¼æœ‰ä¸¤ç§ï¼Œåˆ†åˆ«æ˜¯ä½¿ç”¨ç»ˆç«¯æŒ‡ä»¤ä¸launchæ–‡ä»¶é›†æˆã€‚ä¸¤ç§æ–¹å¼æ•ˆæœä¸€è‡´ï¼Œéƒ½å¯ä»¥ä»¥è¯é¢˜çš„æ–¹å¼å‘å¸ƒåœ°å›¾æ¶ˆæ¯ã€‚

```Bash
colcon build
source ./install/setup.bash
```

**æ–¹å¼1ï¼šç»ˆç«¯æŒ‡ä»¤**

è¯·åœ¨ç»ˆç«¯ä¸‹è¿›å…¥å·¥ä½œç©ºé—´ï¼Œè¾“å…¥å¦‚ä¸‹æŒ‡ä»¤ï¼š

```Bash
ros2 run nav2_map_server map_server --ros-args -p yaml_filename:=map/my_map.yaml
```

ç”±äº`map_server`æ˜¯å…·æœ‰ç”Ÿå‘½å‘¨æœŸçš„èŠ‚ç‚¹ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥è¿˜éœ€è¦å¯¹èŠ‚ç‚¹è¿›è¡Œé…ç½®å’Œæ¿€æ´»ï¼Œè¯·æ–°å¼€ç»ˆç«¯æ‰§è¡Œå¦‚ä¸‹æŒ‡ä»¤ï¼š

```Bash
ros2 lifecycle set /map_server configure
ros2 lifecycle set /map_server activate
```

æ‰§è¡Œå®Œæ¯•è‹¥æ— å¼‚å¸¸ï¼Œå†è°ƒç”¨`ros2 topic list`å³å¯æŸ¥çœ‹åˆ°`/map`è¯é¢˜äº†ï¼Œè¯´æ˜åœ°å›¾æ¶ˆæ¯å·²ç»è¢«å‘å¸ƒäº†ã€‚

**æ–¹å¼2ï¼šlaunché›†æˆ**

æ–¹å¼1éœ€è¦æ‰‹åŠ¨è®¾ç½®`map_server`ç”Ÿå‘½å‘¨æœŸï¼Œæ­¥éª¤ç¨æ˜¾ç¹çï¼Œå› æ­¤ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å°†è¯¥èŠ‚ç‚¹é›†æˆè¿›launchæ–‡ä»¶ï¼Œä»¥ç®€åŒ–å¯åŠ¨æ­¥éª¤ã€‚åœ¨launchç›®å½•ä¸‹æ–°å»ºåä¸º`map_server.launch.py`çš„æ–‡ä»¶ï¼Œå¹¶è¾“å…¥å¦‚ä¸‹å†…å®¹ï¼š

```Python
import os
from launch import LaunchDescription
from launch_ros.actions import Node
def generate_launch_description():
  map_file = os.path.join('map', 'my_map.yaml')
  map_server_node = Node(
      package='nav2_map_server',
      executable='map_server',
      name='map_server',
      output='screen',
      parameters=[{'use_sim_time': True},
                  {'yaml_filename':map_file}]
  )
  manager_mapper_node = Node(
    package='nav2_lifecycle_manager',
    executable='lifecycle_manager',
    name='lifecycle_manager_mapper',
    output='screen',
    parameters=[{'use_sim_time': True},
      {'autostart': True},
      {'node_names': ['map_server']}]
  )
  return LaunchDescription([map_server_node,manager_mapper_node])
```

åœ¨è¯¥æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨äº†åŠŸèƒ½åŒ…ä¸­`nav2_lifecycle_manager`ä¸­çš„`lifecycle_manager`ç»„ä»¶ï¼Œè¯¥ç»„ä»¶å¯ä»¥è‡ªåŠ¨çš„é…ç½®ã€æ¿€æ´»å…¶æ‰€ç®¡ç†çš„å…·æœ‰ç”Ÿå‘½å‘¨æœŸçš„èŠ‚ç‚¹ã€‚æ„å»ºåŠŸèƒ½åŒ…åå¹¶æ‰§è¡Œè¯¥launchæ–‡ä»¶ï¼Œå…¶æœ€ç»ˆæ•ˆæœä¸æ–¹å¼ä¸€ç±»ä¼¼ã€‚

```Bash
ros2 launch mycar_map_server map_server.launch.py
```

  

  

**æ˜¾ç¤ºåœ°å›¾**

æ‰“å¼€rviz2ï¼Œç„¶åæ·»åŠ Mapæ’ä»¶ï¼Œå¹¶å°†è¯é¢˜è®¾ç½®ä¸º/mapï¼Œå¹¶å°†è¯¥è¯é¢˜çš„`Durability Policy`

é€‰é¡¹è®¾ç½®ä¸º`Transient Local`ï¼Œå°±å¯ä»¥æ­£å¸¸æ˜¾ç¤ºåœ°å›¾æ•°æ®äº†ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDM2ZjBmOGMyNmNhZDZmOTk1MjUzNmU2MGVkZjQ0ZTJfUWk2MmJrUWpxejQ0eWFHZ1B6RlNQNjZIZUg2Y1I0Z25fVG9rZW46SG1iZGIxMUZLb1NPaEp4SzFyZWNrVUtBbnBmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjMzZTdhMzIwNzRlZTc2OGQyYjRlNmI2ZWQxOTEzMjlfQVJ4cDVleTRoZkZtT1JLamRrMHh4c3p1TklCSzJicU1fVG9rZW46UUNWVmJZZzFFbzNlSGZ4QVpzUWNlSnhtbkZmXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjMzMDhlYjlkODhiNjZkMzgyMmZmN2M1ZDU0OWI2MjdfYWhRTHgzaloyMnJyNHNWMDRBekdXTFlEdXRZV295VFZfVG9rZW46VFNEemIwT0lIb2p0Y2Z4d1dpSGN3S2llbm5oXzE3NjA5NTc3NzQ6MTc2MDk2MTM3NF9WNA)

  

  

  

  

  

4.  ## AMCLè‡ªé€‚åº”è’™ç‰¹å¡æ´›å®šä½
    

å®šä½æ˜¯æœºå™¨äººåœ¨å·²çŸ¥åœ°å›¾ä¸Šç¡®å®šè‡ªèº«ä½ç½®çš„è¿‡ç¨‹ï¼Œä¸ºæœºå™¨äººçš„å¯¼èˆªæä¾›äº†åŸºç¡€ä¿¡æ¯ã€‚

Nav2ä¸­çš„å®šä½æŠ€æœ¯æŠ€æœ¯ç§°ä¹‹ä¸ºAMCLï¼Œå…¨ç§°Adaptive Monte Carlo Localizationï¼Œå³è‡ªé€‚åº”è’™ç‰¹å¡æ´›å®šä½ï¼Œæ˜¯ä¸€ç§åŸºäºç²’å­æ»¤æ³¢å™¨çš„å®šä½ç®—æ³•ã€‚å®ƒé€šè¿‡è’™ç‰¹å¡æ´›æ–¹æ³•è¿›è¡Œè‡ªé€‚åº”å®šä½ï¼Œåˆ©ç”¨å¯¹æœºå™¨äººå‘¨å›´ç¯å¢ƒçš„æ„ŸçŸ¥å’Œè§‚æµ‹æ•°æ®çš„åˆ†æï¼Œæ¥ç¡®å®šæœºå™¨äººåœ¨ç¯å¢ƒä¸­çš„ä½ç½®å’Œå§¿æ€ã€‚åœ¨Nav2ä¸­å¯¹åº”çš„åŠŸèƒ½åŒ…ä¸º`nav2_amcl`ã€‚

åœ¨AMCLä¸­ï¼Œç²’å­æ»¤æ³¢å™¨çš„æ ¸å¿ƒæ€æƒ³æ˜¯ä½¿ç”¨ä¸€ç»„ç²’å­ï¼ˆæ ·æœ¬ï¼‰æ¥ä»£è¡¨æœºå™¨äººåœ¨åœ°å›¾ä¸Šçš„å¯èƒ½ä½ç½®ã€‚æ¯ä¸ªç²’å­éƒ½æœ‰ä¸€ä¸ªæƒé‡ï¼Œè¡¨ç¤ºè¯¥ç²’å­æ‰€ä»£è¡¨çš„ä½ç½®çš„ç½®ä¿¡åº¦ã€‚ç®—æ³•ä¼šæ ¹æ®æœºå™¨äººçš„è¿åŠ¨æ¨¡å‹å’Œä¼ æ„Ÿå™¨æ•°æ®æ¥æ›´æ–°è¿™äº›ç²’å­çš„ä½ç½®å’Œæƒé‡ã€‚éšç€æ—¶é—´çš„æ¨ç§»ï¼Œç²’å­ä¼šé€æ¸æ”¶æ•›åˆ°æœºå™¨äººå®é™…ä½ç½®é™„è¿‘ï¼Œä»è€Œå®ç°å¯¹æœºå™¨äººä½ç½®çš„å‡†ç¡®ä¼°è®¡ã€‚

  

1.  ### å®šä½èŠ‚ç‚¹è¯´æ˜
    

åŠŸèƒ½åŒ…`nav2_amcl`ä¸­çš„æ ¸å¿ƒèŠ‚ç‚¹ä¸ºamclã€‚è¯¥èŠ‚ç‚¹ç›¸å…³ä¿¡æ¯å¦‚ä¸‹ã€‚

**1.è®¢é˜…çš„è¯é¢˜**

<!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
| è¯é¢˜ | æ¥å£ | æè¿° |
|:---|:---|:---|
| /map | /nav_msgs/msg/OccupancyGrid | åœ°å›¾æ•°æ® |
| /scan | /sensor_msgs/msg/LaserScan | æ¿€å…‰é›·è¾¾æ•°æ® |
| /initialpose | /geometry_msgs/msg/PoseWithCovarianceStamped | ç”¨æ¥åˆå§‹åŒ–ç²’å­æ»¤æ³¢å™¨çš„å‡å€¼å’Œåæ–¹å·® |
| /tf | /tf2_msgs/msg/TFMessage | åæ ‡å˜æ¢æ¶ˆæ¯ |

**2.å‘å¸ƒçš„è¯é¢˜**

<!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
| è¯é¢˜ | æ¥å£ | æè¿° |
|:---|:---|:---|
| /amcl_pose | /geometry_msgs/msg/PoseWithCovarianceStamped | æœºå™¨äººåœ¨åœ°å›¾ä¸­çš„ä½å§¿ä¼°è®¡ |
| /particle_cloud | /nav2_msgs/msg/ParticleCloud | ä½å§¿ä¼°è®¡é›†åˆï¼Œrvizä¸­å¯ä»¥è¢« PoseArray è®¢é˜…ç„¶åå›¾å½¢åŒ–æ˜¾ç¤ºæœºå™¨äººçš„ä½å§¿ä¼°è®¡é›†åˆ |
| /tf | /tf2_msgs/msg/TFMessage | å‘å¸ƒä» odom ä¸ map çš„è½¬æ¢ |

**3.å‘å¸ƒçš„æœåŠ¡**

<!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
| è¯é¢˜ | æ¥å£ | æè¿° |
|:---|:---|:---|
| /reinitialize_global_localization | std_srvs/srv/Empty | åœ¨å…¨å±€èŒƒå›´å†…åˆå§‹åŒ–ç²’å­ä½å§¿ |
| /request_nomotion_update | std_srvs/srv/Empty | åœ¨æ²¡æœ‰è¿åŠ¨æ¨¡å‹æ›´æ–°çš„æƒ…å†µä¸‹æ‰‹åŠ¨è§¦å‘ç²’å­ç¾¤çš„æ›´æ–° |

**4.å‚æ•°**

**é€šç”¨å‚æ•°**

*   `bond_disable_heartbeat_timeout`: è®¾ç½®ä¸º`true`æ—¶ï¼Œç¦ç”¨amclèŠ‚ç‚¹ä¸å…¶ä»–èŠ‚ç‚¹ä¹‹é—´åŸºäºå¿ƒè·³çš„è¶…æ—¶æ£€æµ‹ã€‚è¿™é€šå¸¸ç”¨äºå½“èŠ‚ç‚¹ä¹‹é—´çš„è¿æ¥éå¸¸ç¨³å®šï¼Œä¸éœ€è¦é¢‘ç¹çš„å¿ƒè·³æ£€æµ‹æ¥ç¡®è®¤è¿æ¥çŠ¶æ€æ—¶ã€‚
    
*   `base_frame_id`: å®šä¹‰æœºå™¨äººåŸºåæ ‡ç³»çš„IDï¼Œé€šå¸¸æ˜¯`base_link`æˆ–ç±»ä¼¼çš„åç§°ã€‚
    
*   `global_frame_id`: å®šä¹‰å…¨å±€åœ°å›¾åæ ‡ç³»çš„IDï¼Œé€šå¸¸æ˜¯`map`ã€‚
    
*   `odom_frame_id`: å®šä¹‰é‡Œç¨‹è®¡åæ ‡ç³»çš„IDï¼Œé€šå¸¸æ˜¯`odom`ã€‚
    
*   `tf_broadcast`: è®¾ç½®ä¸º`true`æ—¶ï¼ŒamclèŠ‚ç‚¹ä¼šå‘å¸ƒä»é‡Œç¨‹è®¡åæ ‡ç³»åˆ°å…¨å±€åœ°å›¾åæ ‡ç³»çš„å˜æ¢ã€‚
    
*   `transform_tolerance`: è®¾ç½®TFå˜æ¢çš„å®¹å¿åº¦ï¼Œç”¨äºå¤„ç†TFæ ‘ä¸­çš„æ—¶é—´ä¸ä¸€è‡´æ€§ã€‚
    
*   `use_sim_time`: è®¾ç½®ä¸º`true`æ—¶ï¼Œamclå°†ä½¿ç”¨ROS 2çš„æ¨¡æ‹Ÿæ—¶é—´ï¼ˆå¦‚æœå¯ç”¨ï¼‰ã€‚è¿™åœ¨ä»¿çœŸç¯å¢ƒä¸­å¾ˆæœ‰ç”¨ã€‚
    

**æ¿€å…‰æ¨¡å‹å‚æ•°**

*   `laser_model_type`: è®¾ç½®æ¿€å…‰æ¨¡å‹ç±»å‹ï¼Œ`likelihood_field`æ˜¯ä¸€ç§å¸¸ç”¨çš„æ¨¡å‹ï¼Œå®ƒè€ƒè™‘äº†æ¿€å…‰æŸå‡»ä¸­éšœç¢ç‰©çš„æ¦‚ç‡ã€‚
    
*   `laser_max_range`å’Œ`laser_min_range`: åˆ†åˆ«è®¾ç½®æ¿€å…‰é›·è¾¾çš„æœ€å¤§å’Œæœ€å°æ¢æµ‹èŒƒå›´ã€‚
    
*   `laser_likelihood_max_dist`: è®¾ç½®æ¿€å…‰æ¨¡å‹è€ƒè™‘çš„æœ€å¤§è·ç¦»ï¼Œè¶…è¿‡è¿™ä¸ªè·ç¦»çš„æ•°æ®å°†è¢«å¿½ç•¥ã€‚
    
*   `do_beamskip`å’Œç›¸å…³å‚æ•°ï¼ˆ`beam_skip_distance`ã€`beam_skip_threshold`ã€`beam_skip_error_threshold`ï¼‰: è¿™äº›å‚æ•°ç”¨äºæ§åˆ¶æ˜¯å¦è·³è¿‡æŸäº›æ¿€å…‰æŸçš„å¤„ç†ï¼Œä»¥å‡å°‘è®¡ç®—é‡ã€‚ç„¶è€Œï¼Œ`do_beamskip`è¢«è®¾ç½®ä¸º`false`ï¼Œæ„å‘³ç€ä¸è·³è¿‡ä»»ä½•æ¿€å…‰æŸã€‚
    

**ç²’å­æ»¤æ³¢å™¨å‚æ•°**

*   `alpha1`**åˆ°**`alpha5`: è¿™äº›å‚æ•°ç”¨äºæ§åˆ¶ç²’å­æ»¤æ³¢å™¨ä¸­çš„æƒé‡æ›´æ–°è¿‡ç¨‹ï¼Œä½†å®ƒä»¬çš„å…·ä½“ä½œç”¨å¯èƒ½å› amclçš„å®ç°è€Œå¼‚ã€‚åœ¨æ ‡å‡†çš„amclå®ç°ä¸­ï¼Œè¿™äº›å‚æ•°å¯èƒ½ä¸æ˜¯ç›´æ¥ä½¿ç”¨çš„ã€‚
    
*   `max_particles`å’Œ`min_particles`: åˆ†åˆ«è®¾ç½®ç²’å­æ»¤æ³¢å™¨çš„æœ€å¤§å’Œæœ€å°ç²’å­æ•°ã€‚
    
*   `resample_interval`: è®¾ç½®åœ¨é‡é‡‡æ ·å‰éœ€è¦çš„æ»¤æ³¢æ›´æ–°æ¬¡æ•°ã€‚
    
*   `pf_err`å’Œ`pf_z`: è¿™äº›å‚æ•°ç”¨äºæ§åˆ¶ç²’å­æ»¤æ³¢å™¨çš„æ€§èƒ½ï¼Œä½†å®ƒä»¬çš„å…·ä½“ä½œç”¨å¯èƒ½ä¾èµ–äºamclçš„å®ç°ç»†èŠ‚ã€‚
    

**åˆå§‹ä½å§¿å‚æ•°**

*   `initial_pose`: å®šä¹‰äº†æœºå™¨äººçš„åˆå§‹ä½å§¿ï¼ˆx, y, yaw, zï¼‰ï¼Œä½†åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œå¦‚æœ`set_initial_pose`è¢«è®¾ç½®ä¸º`true`ï¼Œåˆ™è¿™ä¸ªåˆå§‹ä½å§¿å¯èƒ½ä¼šè¢«é€šè¿‡æœåŠ¡è¯·æ±‚è®¾ç½®çš„åˆå§‹ä½å§¿æ‰€è¦†ç›–ã€‚
    
*   `set_initial_pose`: è®¾ç½®ä¸º`true`æ—¶ï¼Œå…è®¸é€šè¿‡æœåŠ¡è¯·æ±‚æ¥è®¾ç½®æœºå™¨äººçš„åˆå§‹ä½å§¿ã€‚
    
*   `always_reset_initial_pose`: è®¾ç½®ä¸º`false`æ—¶ï¼Œè¡¨ç¤ºä¸ä¼šåœ¨æ¯ä¸ªå®šä½ä¼šè¯å¼€å§‹æ—¶è‡ªåŠ¨é‡ç½®åˆå§‹ä½å§¿ã€‚
    

**å…¶ä»–å‚æ•°**

*   `first_map_only`: å½“è®¾ç½®ä¸º`false`æ—¶ï¼Œè¡¨ç¤ºamclå°†è®¢é˜…å¹¶å¤„ç†ä¸æ–­æ›´æ–°çš„åœ°å›¾è¯é¢˜ã€‚
    
*   `map_topic`: å®šä¹‰åœ°å›¾è¯é¢˜çš„åç§°ï¼Œamclå°†è®¢é˜…è¿™ä¸ªè¯é¢˜ä»¥è·å–åœ°å›¾ä¿¡æ¯ã€‚
    
*   `scan_topic`: å®šä¹‰æ¿€å…‰é›·è¾¾æ‰«ææ•°æ®è¯é¢˜çš„åç§°ï¼Œamclå°†è®¢é˜…è¿™ä¸ªè¯é¢˜ä»¥è·å–ç”¨äºå®šä½çš„æ•°æ®ã€‚
    
*   `save_pose_rate`: è®¾ç½®ä¿å­˜æœºå™¨äººä½å§¿çš„é€Ÿç‡ï¼ˆä»¥Hzä¸ºå•ä½ï¼‰ã€‚
    
*   `recovery_alpha_fast`å’Œ`recovery_alpha_slow`: è¿™äº›å‚æ•°åœ¨æ ‡å‡†çš„amclå®ç°ä¸­å¯èƒ½ä¸æ˜¯ç›´æ¥ä½¿ç”¨çš„ï¼Œå®ƒä»¬å¯èƒ½å±äºæŸä¸ªç‰¹å®šç‰ˆæœ¬çš„amclæˆ–æ‰©å±•ã€‚
    
*   `z_hit`ã€`z_rand`ã€`z_short`ã€`z_max`å’Œ`sigma_hit`: è¿™äº›å‚æ•°å®šä¹‰äº†æ¿€å…‰æ¨¡å‹ä¸­çš„æ¦‚ç‡åˆ†å¸ƒï¼Œç”¨äºè®¡ç®—æ¿€å…‰æŸå‡»ä¸­éšœç¢ç‰©æˆ–éšæœºä½ç½®çš„æ¦‚ç‡ã€‚
    

  

2.  ### å®šä½èŠ‚ç‚¹åŸºæœ¬æ“ä½œ
    

**1.å‡†å¤‡å·¥ä½œ**

è¯·å…ˆè°ƒç”¨å¦‚ä¸‹æŒ‡ä»¤åœ¨å·¥ä½œç©ºé—´çš„srcç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåŠŸèƒ½åŒ…ï¼š

```Bash
ros2 pkg create mycar_localization --dependencies nav2_amcl mycar_map_server
```

**2.ç¼–å†™launchæ–‡ä»¶ä¸å‚æ•°æ–‡ä»¶**

åœ¨åŠŸèƒ½åŒ…ä¸‹ï¼Œæ–°å»ºlaunchå’Œparamsæ–‡ä»¶å¤¹ï¼Œåœ¨launchç›®å½•ä¸‹æ–°å»ºåä¸º`mycar_loca.launch.py`çš„æ–‡ä»¶ï¼Œå¹¶è¾“å…¥å¦‚ä¸‹å†…å®¹ï¼š

```Python
import os
from ament_index_python.packages import get_package_share_directory
from launch import LaunchDescription
from launch_ros.actions import Node
from launch.actions import IncludeLaunchDescription
from launch.launch_description_sources import PythonLaunchDescriptionSource

def generate_launch_description():
    amcl_yaml = os.path.join(get_package_share_directory('mycar_localization'),
        'params', 'amcl.yaml')
    amcl_node = Node(
        package='nav2_amcl',
        executable='amcl',
        name='amcl',
        output='screen',
        parameters=[amcl_yaml]
    )
    manager_localization_node = Node(
        package='nav2_lifecycle_manager',
        executable='lifecycle_manager',
        name='lifecycle_manager_localization',
        output='screen',
        parameters=[{'use_sim_time': True},
            {'autostart': True},
            {'node_names': ['amcl']}]
    )
    map_server_launch = IncludeLaunchDescription(
        launch_description_source=PythonLaunchDescriptionSource(
            launch_file_path=([get_package_share_directory("mycar_map_server"),"/launch/map_server.launch.py"])
        )
    )
    return LaunchDescription([amcl_node,manager_localization_node,map_server_launch])
```

åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œåˆ›å»ºäº†`amcl`èŠ‚ç‚¹ï¼Œå¹¶ä»`params`ç›®å½•åŠ è½½äº†åä¸º`amcl.yaml`çš„é…ç½®æ–‡ä»¶ï¼Œä¸”ç”±äº`amcl`ä¹Ÿæ˜¯æ‹¥æœ‰ç”Ÿå‘½å‘¨æœŸçš„èŠ‚ç‚¹ï¼Œæ‰€ä»¥å°†å…¶æ·»åŠ è¿›äº†ç”Ÿå‘½å‘¨æœŸç®¡ç†å™¨ã€‚æœ€åï¼Œå®šä½å¿…é¡»ä¾èµ–äºåœ°å›¾ä¿¡æ¯ï¼Œå› æ­¤åˆåŒ…å«äº† **åœ°å›¾è¯»å–åŸºæœ¬æ“ä½œ**  ä¸­çš„launchæ–‡ä»¶ï¼Œä»¥åŠ è½½åœ°å›¾ã€‚

åœ¨paramsç›®å½•ä¸‹æ–°å»ºåä¸º`amcl.yaml`çš„æ–‡ä»¶ï¼Œå¹¶è¾“å…¥å¦‚ä¸‹å†…å®¹ï¼š

```YAML
/**:
  ros__parameters:
    use_sim_time: True
    alpha1: 0.2
    alpha2: 0.2
    alpha3: 0.2
    alpha4: 0.2
    alpha5: 0.2
    base_frame_id: "base_link"
    beam_skip_distance: 0.5
    beam_skip_error_threshold: 0.9
    beam_skip_threshold: 0.3
    do_beamskip: false
    global_frame_id: "map"
    lambda_short: 0.1
    laser_likelihood_max_dist: 2.0
    laser_max_range: 100.0
    laser_min_range: -1.0
    laser_model_type: "likelihood_field"
    max_beams: 60
    max_particles: 2000
    min_particles: 500
    odom_frame_id: "odom"
    pf_err: 0.05
    pf_z: 0.99
    recovery_alpha_fast: 0.0
    recovery_alpha_slow: 0.0
    resample_interval: 1
    robot_model_type: "nav2_amcl::DifferentialMotionModel"
    save_pose_rate: 0.5
    sigma_hit: 0.2
    tf_broadcast: true
    transform_tolerance: 2.0
    update_min_a: 0.2
    update_min_d: 0.25
    z_hit: 0.5
    z_max: 0.05
    z_rand: 0.5
    z_short: 0.05
    scan_topic: scan
    set_initial_pose: false
```

å…³äºå‚æ•°çš„å…·ä½“å«ä¹‰ï¼Œå¯ä»¥å‚è€ƒ **å®šä½èŠ‚ç‚¹è¯´æ˜** ä¸­å‚æ•°ç›¸å…³å†…å®¹ã€‚

**3.ç¼–è¾‘é…ç½®æ–‡ä»¶**

æ‰“å¼€`CMakeLists.txt` å¹¶è¾“å…¥å¦‚ä¸‹å†…å®¹ï¼š

```CMake
install(DIRECTORY launch params
  DESTINATION share/${PROJECT_NAME}
)
```

**4.ç¼–è¯‘**

ç»ˆç«¯ä¸­è¿›å…¥å½“å‰å·¥ä½œç©ºé—´ï¼Œç¼–è¯‘åŠŸèƒ½åŒ…ï¼š

```Bash
colcon build --packages-select mycar_localization
```

**5.æ‰§è¡Œ**

ï¼ˆ1ï¼‰è¯·å…ˆè°ƒç”¨å¦‚ä¸‹æŒ‡ä»¤å¯åŠ¨ä»¿çœŸç¯å¢ƒï¼š

```Bash
. install/setup.bash
ros2 launch stage_ros2 my_house.launch.py
```

ï¼ˆ2ï¼‰ç„¶ååœ¨ç»ˆç«¯ä¸‹è¿›å…¥å½“å‰å·¥ä½œç©ºé—´ï¼Œè¾“å…¥å¦‚ä¸‹æŒ‡ä»¤ï¼š

```Bash
. install/setup.bash
ros2 launch mycar_localization mycar_loca.launch.py
```

ï¼ˆ3ï¼‰å¯åŠ¨é”®ç›˜æ§åˆ¶èŠ‚ç‚¹ä»¥ä½œå¤‡ç”¨ï¼š

```Bash
ros2 run teleop_twist_keyboard teleop_twist_keyboard
```

ï¼ˆ4ï¼‰åœ¨rviz2ä¸­ï¼Œå°†Fixed Frmeè®¾ç½®ä¸ºmapï¼Œæ·»åŠ TFæ’ä»¶ï¼ŒæŒ‰ç…§ **åœ°å›¾è¯»å–åŸºæœ¬æ“ä½œ**  æ·»åŠ å¹¶æ˜¾ç¤ºåœ°å›¾ã€‚

æ¥ä¸‹æ¥ï¼Œç‚¹å‡»rviz2èœå•æ çš„`2D Pose Estimate`åœ¨åœ°å›¾ä¸­ä¸ºæœºå™¨äººè®¾ç½®ä¸€ä¸ªåˆå§‹ä½å§¿ã€‚

è¿™é‡Œéœ€è¦ç»™ä¸€ä¸ªå¤§æ¦‚çš„æœºå™¨äººä½ç½®å’Œæœºå™¨äººçš„æœå‘ï¼Œä¸æ˜¯å¾ˆå‡†ç¡®ä¹Ÿå¯ä»¥ï¼Œæœºå™¨äººä¼šåœ¨è¿åŠ¨ä¸­é€æ¸é€šè¿‡AMCLæ ¡å‡†ã€‚

å…ˆç‚¹å‡»`2D Pose Estimate`ï¼Œå·¦é”®åœ¨åœ°å›¾ä¸Šç‚¹å‡»æœºå™¨äººæ‰€åœ¨ä½ç½®ï¼Œé•¿æ‘åˆ«æ¾æ‰‹ï¼Œé¼ æ ‡å¾€æœºå™¨äººæœå‘çš„ä½ç½®åˆ’ï¼Œå‡ºç°ä¸‹æ–¹è¿™ç§ç»¿è‰²ç®­å¤´ï¼Œå†æ¾æ‰‹å³å¯ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWMxNDM1NjhjOWZjOWFiMDMzZTgxYmY1NTgxYTFmNmRfajViUXhXejg2ZGlzdVFZZnpKVFlpa3g4eWpKRlBhRkZfVG9rZW46UzM1NWJIOG9rb3I5Q2d4UVdCeGNGUmwyblZiXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

å†æ·»åŠ `ParticleCloud`æ’ä»¶ï¼Œå°†è¯é¢˜è®¾ç½®ä¸º`/particle_cloud`ï¼Œå¹¶å°†è¯é¢˜ä¸‹`Reliability Policy`è®¾ç½®ä¸º`Best Effort`ï¼Œæœ€åä½¿ç”¨é”®ç›˜æ§åˆ¶æœºå™¨äººè¿åŠ¨æ—¶ï¼Œä¼šå‘ç°ï¼Œæœºå™¨äººå‘¨è¾¹ä¼šå‡ºç°ç‚¹äº‘ï¼Œå¹¶ä¸”éšç€æœºå™¨äººçš„è¿åŠ¨ï¼Œç‚¹äº‘ä¼šå‡ºç°ä¸åŒç¨‹åº¦çš„æ”¶æ•›æˆ–å‘æ•£ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGFkYmQ5YWJhZTdjYTNhNjNlYjk1MTY5ZmZhNzU5MTBfTmpxaXdmejhHNklwamtsNkNQNjdlZkFOUUZhZGVxcWdfVG9rZW46TlZwaGI3SGk1b2k0enJ4eUthRmM5N3RmblpmXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGRkNWYwOTFlOTgzMWJmYzMxNTZhMGExYzA3ZTI0ODRfcVJWd0lRNUJoTTRWUHd6b3B2TVY0YjlsQkhkR0hSQlNfVG9rZW46VFFiTGJ3OUR2b1Z5eUh4RTc5QWNvbjNybkZEXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTIyN2Y0MTViMGM3ZGViMzEyMWY1ZWY3YmQwMjBhNjZfV1N2bzg4NnFMNW5hS3dXbXV2cnFyOG9KemtabzBrTUdfVG9rZW46UG9iRGI2bm9sb1NBSzd4UmpLVWM0TURmbkFlXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

å³ä¾¿ä½ çš„æœºå™¨äººæ’å¢™äº†ï¼Œrviz2å’ŒGazeboçš„æœºå™¨äººä½ç½®å®Œå…¨åç§»äº†ï¼Œåªè¦å†è®©æœºå™¨äººè¿åŠ¨ä¸€ä¼šå„¿ï¼Œæœºå™¨äººä½ç½®ä¼šè¢«é‡æ–°é¢„ä¼°å‡ºæ¥ï¼ŒAMCLéå¸¸å¼ºã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTkzNzI3YjM0NGFlNGU2ZmRkZDI3M2Q4ODI3ZWE0M2JfWDlYMEM1UmdIeVpJRFgzVmFlUXIxRjM1RjhPbktENVJfVG9rZW46UmZWTGJ6UmRZbzlnelV4d0VyU2N3WGtKbjVjXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

å¦‚ä¸Šå›¾ä½ç½®å·²ç»å®Œå…¨åç§»äº†ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWI4NTQ0MzhkYWQ4ZTcxMDBhMDU5OThmYjBhZmY1YzJfaHV5U2cyOFRHbGZ3RVZhR3VFd1pDcVVlbnBOendmVGdfVG9rZW46VkIyYmJMWTc1b3FSREJ4WGptQmNtb21Jbk9lXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

ç»è¿‡ä¸€æ®µæ—¶é—´è¡Œé©¶ï¼Œå§¿æ€ä½ç½®å†æ¬¡è¢«é¢„ä¼°æˆåŠŸã€‚

  

  

  

5.  ## å¯¼èˆªæœåŠ¡å™¨
    

æœ¬èŠ‚å°†ä»‹ç»å¯¼èˆªæœåŠ¡å™¨ä¸­æ ¸å¿ƒèŠ‚ç‚¹ï¼Œå®ç°åŸºæœ¬å¯¼èˆªåŠŸèƒ½ï¼Œå¹¶å°†å¯¼èˆªä¸SLAMé›†æˆï¼Œä»¥å®ç°è‡ªä¸»æ¢ç´¢å»ºå›¾ã€‚

ä¸‹æ–¹ç½‘ç«™æ˜¯å®˜æ–¹NAV2çš„å„ä¸ªèŠ‚ç‚¹çš„å‚æ•°è¯´æ˜(**è°ƒå‚çš„æ—¶å€™éå¸¸å¸¸ç”¨çš„ç½‘ç«™**):

https://docs.nav2.org/configuration/index.html

çœ‹ä¸æ‡‚çš„è‹±æ–‡å¯ä»¥ç”¨æ²‰æµ¸å¼ç¿»è¯‘è¿™ä¸ªchromeæ’ä»¶æ¥ç¿»è¯‘,å¯ä»¥è¿›è¡Œä¸­è‹±æ–‡å¯¹ç…§ç¿»è¯‘,éå¸¸å¥½ç”¨.

https://chromewebstore.google.com/detail/%E6%B2%89%E6%B5%B8%E5%BC%8F%E7%BF%BB%E8%AF%91-%E7%BD%91%E9%A1%B5%E7%BF%BB%E8%AF%91%E6%8F%92%E4%BB%B6-pdf%E7%BF%BB%E8%AF%91-%E5%85%8D%E8%B4%B9/bpoadfkcbjbfhfodiogcnhhhpibjhbnh?utm\_source=official&pli=1

https://microsoftedge.microsoft.com/addons/detail/%E6%B2%89%E6%B5%B8%E5%BC%8F%E7%BF%BB%E8%AF%91-%E7%BD%91%E9%A1%B5%E7%BF%BB%E8%AF%91%E6%8F%92%E4%BB%B6-pdf%E7%BF%BB%E8%AF%91-/amkbmndfnliijdhojkpoglbnaaahippg?utm\_source=official

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTE3MzcxN2RiYjYzYTA5MGM2NzlmN2MxNjU5NGY3MmNfNENMT25sZTI4aXVYNFk2QmJ2WnJYYmo3WlhiS2trYjJfVG9rZW46RkJOVmI4Y0VWb1BaY014M0laWGNnekpsblNnXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTlkMTI4M2M5M2U4YTYyYzczZmZkOTNkMThhZjhkZTNfS2NaazA4Y2VrbWpSYzY3Z0xMWnFYOWNnb1VoZ0N4WHJfVG9rZW46VHYzc2J3cTZ6b0xCMFJ4NHVJWmNlcDdvbmpmXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

ä¸ä¼šç”¨è¿™ä¸ªæ’ä»¶çš„è¯,ä¹Ÿå¯ä»¥çœ‹é±¼é¦™ROSç¿»è¯‘å¥½çš„ç‰ˆæœ¬(ä½†æ˜¯ç½‘ç«™ä¸ç¨³å®š):

http://fishros.org/doc/nav2/configuration/index.html

  

  

1.  ### ç”Ÿå‘½å‘¨æœŸç®¡ç†èŠ‚ç‚¹è¯´æ˜
    

Nav2ä¸­é€šè¿‡çš„`nav2_lifecycle_manager`åŠŸèƒ½åŒ…ä¸‹çš„`lifecycle_manager`èŠ‚ç‚¹ç®¡ç†å…¶ä»–èŠ‚ç‚¹çš„ç”Ÿå‘½å‘¨æœŸçŠ¶æ€è½¬æ¢ã€‚`lifecycle_manager`èŠ‚ç‚¹é€šè¿‡ROS 2çš„ç”Ÿå‘½å‘¨æœŸèŠ‚ç‚¹ï¼ˆLifecycle Nodeï¼‰æœºåˆ¶ï¼Œæä¾›äº†ä¸€ç§æ ‡å‡†åŒ–çš„æ–¹æ³•æ¥æ§åˆ¶Nav2ä¸­å„ä¸ªèŠ‚ç‚¹çš„çŠ¶æ€è½¬æ¢ã€‚è¿™äº›çŠ¶æ€åŒ…æ‹¬æœªé…ç½®ï¼ˆUnconfiguredï¼‰ã€éæ´»åŠ¨ï¼ˆInactiveï¼‰ã€æ´»åŠ¨ï¼ˆActiveï¼‰å’Œç»“æŸï¼ˆFinalizedï¼‰ç­‰ã€‚é€šè¿‡ç²¾ç»†æ§åˆ¶è¿™äº›çŠ¶æ€è½¬æ¢ï¼Œ`lifecycle_manager`èŠ‚ç‚¹èƒ½å¤Ÿç¡®ä¿Nav2ç³»ç»Ÿçš„å„ä¸ªéƒ¨åˆ†åœ¨æ­£ç¡®çš„æ—¶æœºå¯åŠ¨ã€è¿è¡Œå’Œåœæ­¢ï¼Œä»è€Œæé«˜ç³»ç»Ÿçš„å¯é æ€§å’Œç¨³å®šæ€§ã€‚

**å‚æ•°**

*   `/bond_disable_heartbeat_timeout`: è¯¥å‚æ•°ä¸èŠ‚ç‚¹ä¹‹é—´çš„é€šä¿¡ç»‘å®šï¼ˆbondingï¼‰æœ‰å…³ã€‚èŠ‚ç‚¹ä¹‹é—´çš„é€šä¿¡å¯ä»¥é€šè¿‡ç»‘å®šæ¥å¢å¼ºå¯é æ€§ï¼Œè€Œå¿ƒè·³è¶…æ—¶æ˜¯æ£€æµ‹èŠ‚ç‚¹æ˜¯å¦ä»ç„¶æ´»è·ƒçš„ä¸€ç§æ–¹å¼ã€‚è®¾ç½®ä¸º`false`æ„å‘³ç€å¯ç”¨å¿ƒè·³è¶…æ—¶æ£€æµ‹ã€‚
    
*   `attempt_respawn_reconnection`: å–å€¼ä¸ºboolå€¼ï¼Œè®¾ç½®ä¸º`true`æ—¶ï¼Œè¡¨ç¤ºå¦‚æœç®¡ç†çš„èŠ‚ç‚¹æ„å¤–ç»ˆæ­¢ï¼Œç”Ÿå‘½å‘¨æœŸç®¡ç†å™¨å°†å°è¯•é‡æ–°å¯åŠ¨å®ƒã€‚
    
*   `autostart`: å–å€¼ä¸ºboolå€¼ï¼Œè®¾ç½®ä¸º`true`æ—¶ï¼Œè¡¨ç¤ºåœ¨ç”Ÿå‘½å‘¨æœŸç®¡ç†å™¨å¯åŠ¨æ—¶ï¼Œå®ƒå°†è‡ªåŠ¨å°è¯•å¯åŠ¨å…¶ç®¡ç†çš„èŠ‚ç‚¹ã€‚
    
*   `bond_respawn_max_duration`: é‡æ–°è¿æ¥æˆ–é‡æ–°å¯åŠ¨èŠ‚ç‚¹æ—¶çš„æœ€å¤§æŒç»­æ—¶é—´ã€‚
    
*   `bond_timeout`: ä¸èŠ‚ç‚¹ä¹‹é—´çš„é€šä¿¡ç»‘å®šè¶…æ—¶æœ‰å…³ã€‚å¦‚æœåœ¨è¿™ä¸ªæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°æ¥è‡ªå¦ä¸€ä¸ªèŠ‚ç‚¹çš„æ¶ˆæ¯ï¼Œåˆ™è®¤ä¸ºè¯¥èŠ‚ç‚¹å·²ç»æ–­å¼€è¿æ¥ã€‚
    
*   `diagnostic_updater`:
    
    *   `period`: è¯Šæ–­æ›´æ–°å™¨çš„æ›´æ–°å‘¨æœŸã€‚è¯Šæ–­æ›´æ–°å™¨ç”¨äºæ”¶é›†å’Œå‘å¸ƒæœ‰å…³èŠ‚ç‚¹çŠ¶æ€çš„è¯Šæ–­ä¿¡æ¯ï¼Œå®šä¹‰äº†è¿™äº›ä¿¡æ¯æ›´æ–°çš„é¢‘ç‡ã€‚
        
*   `node_names`: ç”±è¯¥ç”Ÿå‘½å‘¨æœŸç®¡ç†å™¨ç®¡ç†çš„èŠ‚ç‚¹åç§°åˆ—è¡¨ã€‚
    
*   `use_sim_time`:æ˜¯å¦ä½¿ç”¨ä»¿çœŸå®è·µã€‚
    

2.  ### è¡Œä¸ºæ ‘èŠ‚ç‚¹è¯´æ˜
    

**è¡Œä¸ºæ ‘ï¼ˆBTï¼‰** æ˜¯ä¸€ç§åœ¨æ™ºèƒ½ä½“ï¼ˆå¦‚æœºå™¨äººæˆ–ç”µè„‘æ¸¸æˆä¸­çš„è™šæ‹Ÿå®ä½“ï¼‰ä¸­æ„å»ºä¸åŒä»»åŠ¡ä¹‹é—´åˆ‡æ¢ç»“æ„çš„æ–¹å¼ã€‚å®ƒæ˜¯ä¸€ç§å½¢å¼åŒ–çš„å›¾å½¢å»ºæ¨¡è¯­è¨€ï¼Œä»¥å±‚æ¬¡åŒ–çš„èŠ‚ç‚¹ç»„ç»‡ä¸ºç‰¹å¾ï¼Œç”¨äºæè¿°å’Œè§„åˆ’å¤æ‚ç³»ç»Ÿä¸­å„ç§å®ä½“çš„äº¤äº’å’Œå†³ç­–ã€‚`nav2_bt_navigator`åŠŸèƒ½åŒ…ä¸‹çš„`/bt_navigator`æ˜¯Nav2ä¸­çš„è¡Œä¸ºæ ‘å¯¼èˆªå™¨èŠ‚ç‚¹ï¼Œå®ƒå®ç°äº†åŸºäºè¡Œä¸ºæ ‘çš„å¯¼èˆªç­–ç•¥ã€‚è¡Œä¸ºæ ‘æ˜¯ä¸€ç§ç”¨äºæè¿°å¤æ‚è¡Œä¸ºçš„æ ‘çŠ¶ç»“æ„ï¼Œé€šè¿‡ç»„åˆä¸åŒçš„è¡Œä¸ºèŠ‚ç‚¹ï¼Œå¯ä»¥çµæ´»åœ°å®šä¹‰æœºå™¨äººçš„å¯¼èˆªè¡Œä¸ºï¼ŒåŒ…æ‹¬è·¯å¾„è§„åˆ’ã€é¿éšœã€æ¢å¤ç­‰ã€‚ä»¥ä¸‹æ˜¯å®˜ç½‘ã€‚

https://www.behaviortree.dev/

https://arxiv.org/abs/1709.00084

githubé“¾æ¥å¦‚ä¸‹ï¼š

https://github.com/BehaviorTree/BehaviorTree.CPP

BTå¯è§†åŒ–å·¥å…·Groot2ä¸‹è½½ï¼š

https://www.behaviortree.dev/groot/

  

1.  è®¢é˜…çš„è¯é¢˜
    

<!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
| è¯é¢˜ | æ¥å£ | æè¿° |
|:---|:---|:---|
| /goal_pose | geometry_msgs/msg/PoseStamped | å¯¼èˆªç›®æ ‡ç‚¹ï¼Œç”¨äºè§¦å‘å¯¼èˆªä»»åŠ¡ |
| /tf | tf2_msgs/msg/TFMessage | åæ ‡å˜æ¢æ¶ˆæ¯ï¼Œç”¨äºä¸åŒåæ ‡ç³»ä¹‹é—´çš„è½¬æ¢ |
| /odom | nav_msgs/msg/Odometry | é‡Œç¨‹è®¡æ•°æ®ï¼Œæä¾›æœºå™¨äººä½ç½®å’Œè¿åŠ¨ä¿¡æ¯ |

2.  è¯·æ±‚çš„Action
    

<!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
| Action | æ¥å£ | æè¿° |
|:---|:---|:---|
| /navigate_to_pose | nav2_msgs/action/NavigateToPose | è¯·æ±‚å¯¼èˆªåˆ°æŒ‡å®šä½å§¿çš„Actionï¼ŒåŒ…æ‹¬ç›®æ ‡ä½å§¿å’Œå®¹å¿åº¦ç­‰å‚æ•° |

3.  å‚æ•°
    

*   `use_sim_time`: æŒ‡å®šæ˜¯å¦ä½¿ç”¨æ¨¡æ‹Ÿæ—¶é—´è€Œéå®é™…æ—¶é—´ã€‚
    
*   `global_frame`: å®šä¹‰å…¨å±€åæ ‡ç³»çš„åç§°ï¼Œé€šå¸¸ä¸ºåœ°å›¾åæ ‡ç³»ã€‚
    
*   `robot_base_frame`: æŒ‡å®šæœºå™¨äººåŸºåº§çš„åæ ‡ç³»åç§°ã€‚
    
*   `odom_topic`: é‡Œç¨‹è®¡æ•°æ®çš„ROSè¯é¢˜åç§°ã€‚
    
*   `bt_loop_duration`: è¡Œä¸ºæ ‘æ‰§è¡Œå¾ªç¯çš„æŒç»­æ—¶é—´ï¼ˆå•ä½å¯èƒ½æ ¹æ®å®ç°è€Œå¼‚ï¼‰ã€‚
    
*   `default_server_timeout`: å¯¼èˆªæœåŠ¡å™¨æ“ä½œçš„é»˜è®¤è¶…æ—¶æ—¶é—´ã€‚
    
*   `enable_groot_monitoring`: å¯ç”¨æˆ–ç¦ç”¨Grootç›‘æ§åŠŸèƒ½ã€‚
    
*   `groot_zmq_publisher_port`: Grootç›‘æ§ä¸­ZeroMQå‘å¸ƒè€…çš„ç«¯å£å·ã€‚
    
*   `groot_zmq_server_port`: Grootç›‘æ§ä¸­ZeroMQæœåŠ¡å™¨çš„ç«¯å£å·ã€‚
    
*   `plugin_lib_names`: åŒ…å«å¯¼èˆªæ‰€éœ€æ’ä»¶çš„åº“åç§°åˆ—è¡¨ã€‚
    

  

3.  ### è§„åˆ’å™¨èŠ‚ç‚¹è¯´æ˜
    

åœ¨Nav2 å¯¼èˆªæ¡†æ¶ä¸­`nav2_planner`åŠŸèƒ½åŒ…ä¸‹çš„`planner_server`èŠ‚ç‚¹ï¼Œè´Ÿè´£å¤„ç†è·¯å¾„è§„åˆ’è¯·æ±‚ï¼Œç”Ÿæˆä»å½“å‰ä½ç½®åˆ°ç›®æ ‡ä½ç½®çš„è·¯å¾„ã€‚è¯¥èŠ‚ç‚¹åœ¨æ‰§è¡Œæ—¶éœ€è¦ä¾èµ–äº`/global_costmap/global_costmap`èŠ‚ç‚¹æä¾›çš„åœ°å›¾æ¶ˆæ¯ã€‚

1.  planner\_serverå‘å¸ƒçš„è¯é¢˜
    

<!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
| è¯é¢˜ | æ¥å£ | æè¿° |
|:---|:---|:---|
| /plan | nav_msgs/msg/Path | å½“å‰ä½ç½®åˆ°ç›®æ ‡ç‚¹çš„å…¨å±€è·¯å¾„ |

2.  planner\_server å‚æ•°
    

*   `/bond_disable_heartbeat_timeout`: è¿™ä¸ªå‚æ•°æ§åˆ¶æ˜¯å¦ç¦ç”¨å¿ƒè·³è¶…æ—¶æ£€æµ‹ï¼Œåœ¨ROS 2ä¸­ï¼ŒèŠ‚ç‚¹ä¹‹é—´çš„é€šä¿¡ç»‘å®šï¼ˆbondingï¼‰æœºåˆ¶ç”¨äºå¢å¼ºé€šä¿¡çš„å¯é æ€§ã€‚å¿ƒè·³è¶…æ—¶æ˜¯æ£€æµ‹èŠ‚ç‚¹æ˜¯å¦ä»ç„¶æ´»è·ƒçš„ä¸€ç§æœºåˆ¶ã€‚å¦‚æœè¯¥å‚æ•°è®¾ç½®ä¸º`true`ï¼Œåˆ™è¡¨ç¤ºç¦ç”¨äº†å¿ƒè·³è¶…æ—¶æ£€æµ‹ï¼Œè¿™å¯èƒ½åœ¨æŸäº›ç‰¹å®šçš„ç½‘ç»œç¯å¢ƒä¸‹æˆ–å½“ç¡®ä¿¡èŠ‚ç‚¹é—´é€šä¿¡éå¸¸ç¨³å®šæ—¶ä½¿ç”¨ã€‚
    
*   `GridBased`: è¿™æ˜¯ä¸€ä¸ªé…ç½®å—ï¼Œä¸“é—¨ç”¨äºè®¾ç½®åŸºäºç½‘æ ¼çš„è§„åˆ’å™¨çš„å‚æ•°ã€‚åŸºäºç½‘æ ¼çš„è§„åˆ’å™¨é€šå¸¸ä½¿ç”¨åœ°å›¾çš„ç½‘æ ¼åŒ–è¡¨ç¤ºæ¥è§„åˆ’è·¯å¾„ã€‚
    
    *   `allow_unknown`: æ§åˆ¶è§„åˆ’å™¨æ˜¯å¦å…è®¸åœ¨åœ°å›¾çš„æœªçŸ¥ï¼ˆå³æœªæ¢ç´¢ï¼‰åŒºåŸŸä¸­è§„åˆ’è·¯å¾„ã€‚
        
    *   `plugin`: æŒ‡å®šä½¿ç”¨çš„è§„åˆ’å™¨æ’ä»¶ã€‚
        
    *   `tolerance`: è®¾ç½®è§„åˆ’è·¯å¾„æ—¶çš„å®¹å¿åº¦ï¼Œé€šå¸¸ç”¨äºè€ƒè™‘æœºå™¨äººå°ºå¯¸å’Œå®šä½çš„ä¸ç¡®å®šæ€§ã€‚
        
    *   `use_astar`: æ§åˆ¶æ˜¯å¦ä½¿ç”¨A\* ç®—æ³•è¿›è¡Œè·¯å¾„è§„åˆ’*ã€‚A\** ç®—æ³•æ˜¯ä¸€ç§å¯å‘å¼æœç´¢ç®—æ³•ï¼Œèƒ½å¤Ÿæ‰¾åˆ°ä»èµ·ç‚¹åˆ°ç»ˆç‚¹çš„æœ€çŸ­è·¯å¾„ã€‚
        
    *   `use_final_approach_orientation`: æ§åˆ¶è§„åˆ’å™¨æ˜¯å¦åœ¨è·¯å¾„çš„ç»ˆç‚¹é™„è¿‘è€ƒè™‘æœºå™¨äººçš„æœ€ç»ˆæœå‘ã€‚
        
*   `expected_planner_frequency`: è¿™ä¸ªå‚æ•°è¡¨ç¤ºå¯¹è§„åˆ’å™¨ç”Ÿæˆæ–°è·¯å¾„çš„é¢‘ç‡çš„é¢„æœŸå€¼ã€‚å®ƒå¸®åŠ©ç³»ç»Ÿç›‘æ§è§„åˆ’å™¨çš„æ€§èƒ½ï¼Œå¹¶å¯èƒ½ç”¨äºè°ƒè¯•æˆ–æ€§èƒ½ä¼˜åŒ–ã€‚
    
*   `planner_plugins`: è¿™æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼ŒæŒ‡å®šäº†å¯ç”¨çš„è§„åˆ’å™¨æ’ä»¶ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå®ƒåªåŒ…å«äº†ä¸€ä¸ª`GridBased`è§„åˆ’å™¨ï¼Œä½†ç†è®ºä¸Šå¯ä»¥åŒ…å«å¤šä¸ªä¸åŒç±»å‹çš„è§„åˆ’å™¨ï¼Œä»¥é€‚åº”ä¸åŒçš„å¯¼èˆªéœ€æ±‚ã€‚
    
*   `use_sim_time`: è¿™ä¸ªå‚æ•°æ§åˆ¶æ˜¯å¦ä½¿ç”¨æ¨¡æ‹Ÿæ—¶é—´ã€‚åœ¨ä»¿çœŸç¯å¢ƒä¸­ï¼Œæ—¶é—´æ˜¯ç”±ä»¿çœŸè½¯ä»¶æ§åˆ¶çš„ï¼Œè€Œä¸æ˜¯ç”±å®é™…çš„ç‰©ç†æ—¶é’Ÿæ§åˆ¶çš„ã€‚å°†æ­¤å‚æ•°è®¾ç½®ä¸º`true`å…è®¸èŠ‚ç‚¹åœ¨ä»¿çœŸç¯å¢ƒä¸­æ­£å¸¸è¿è¡Œï¼Œè€Œæ— éœ€ä¾èµ–å®é™…çš„ç³»ç»Ÿæ—¶é—´ã€‚è¿™å¯¹äºå¼€å‘å’Œæµ‹è¯•å¯¼èˆªç®—æ³•éå¸¸æœ‰ç”¨ã€‚
    

3.  /global\_costmap/global\_costmapè®¢é˜…çš„è¯é¢˜
    

<!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
| è¯é¢˜ | æ¥å£ | æè¿° |
|:---|:---|:---|
| /global_costmap/footprint | geometry_msgs/msg/Polygon | æœºå™¨äººï¼ˆæˆ–ä»»ä½•ç§»åŠ¨å¹³å°ï¼‰çš„è¶³è¿¹ï¼ˆfootprintï¼‰ä¿¡æ¯ã€‚è¶³è¿¹æ˜¯æœºå™¨äººåœ¨åœ°å›¾ä¸Šå æ®çš„ç©ºé—´å½¢çŠ¶ï¼Œé€šå¸¸ç”¨å¤šè¾¹å½¢è¡¨ç¤ºã€‚ |
| /map | nav_msgs/msg/OccupancyGrid | å‘å¸ƒç¯å¢ƒåœ°å›¾ï¼Œç‰¹åˆ«æ˜¯ç”¨äºå¯¼èˆªçš„å ç”¨ç½‘æ ¼å›¾ï¼ˆOccupancy Grid Mapï¼‰ã€‚ |
| /scan | sensor_msgs/msg/LaserScan | æ¿€å…‰æ‰«ææ•°æ®ã€‚ |

4.  /global\_costmap/global\_costmapå‘å¸ƒçš„è¯é¢˜
    

<!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
| è¯é¢˜ | æ¥å£ | æè¿° |
|:---|:---|:---|
| /global_costmap/costmap | nav_msgs/msg/OccupancyGrid | å‘å¸ƒå…¨å±€ä»£ä»·åœ°å›¾çš„å½“å‰çŠ¶æ€ã€‚ |
| /global_costmap/costmap_raw | nav2_msgs/msg/Costmap | æœªç»è¿›ä¸€æ­¥å¤„ç†çš„åŸå§‹ä»£ä»·åœ°å›¾æ•°æ®ã€‚ |
| /global_costmap/costmap_updates | map_msgs/msg/OccupancyGridUpdate | å…¨å±€ä»£ä»·åœ°å›¾çš„æ›´æ–°ï¼Œè¯¥æ¶ˆæ¯å¯ä»¥é«˜æ•ˆæ›´æ–°åœ°å›¾ã€‚ |
| /global_costmap/published_footprint | geometry_msgs/msg/PolygonStamped | å‘å¸ƒæœºå™¨äººçš„è¶³è¿¹ï¼ˆfootprintï¼‰ï¼Œå³æœºå™¨äººåœ¨åœ°å›¾ä¸Šå æ®çš„ç©ºé—´å½¢çŠ¶ã€‚ |

5.  /global\_costmap/global\_costmapå‚æ•°
    

*   `/bond_disable_heartbeat_timeout`: æ§åˆ¶æ˜¯å¦ç¦ç”¨å¿ƒè·³è¶…æ—¶æ£€æµ‹ï¼Œè¿™åœ¨èŠ‚ç‚¹é—´é€šä¿¡ç»‘å®šæ—¶ç”¨äºç›‘æ§å¯¹æ–¹èŠ‚ç‚¹çš„æ´»è·ƒåº¦ã€‚
    
*   `always_send_full_costmap`: æ§åˆ¶æ˜¯å¦æ€»æ˜¯å‘é€å®Œæ•´çš„ä»£ä»·åœ°å›¾ä¿¡æ¯ï¼Œè€Œä¸æ˜¯ä»…å‘é€å˜åŒ–çš„éƒ¨åˆ†ã€‚
    
*   `clearable_layers`: åˆ—å‡ºå¯ä»¥è¢«æ¸…é™¤çš„ä»£ä»·å›¾å±‚ï¼Œè¿™äº›å›¾å±‚ä¸­çš„éšœç¢ç‰©ä¿¡æ¯å¯ä»¥é€šè¿‡æŸç§æ–¹å¼ï¼ˆå¦‚ä¼ æ„Ÿå™¨æ•°æ®ï¼‰è¢«æ›´æ–°æˆ–æ¸…é™¤ã€‚
    
*   `filters`: å®šä¹‰åº”ç”¨äºä»£ä»·åœ°å›¾çš„è¿‡æ»¤å™¨åˆ—è¡¨ï¼Œç”¨äºé¢„å¤„ç†æˆ–ä¿®æ”¹åœ°å›¾æ•°æ®ã€‚
    
*   `footprint`: æŒ‡å®šæœºå™¨äººåœ¨åœ°å›¾ä¸Šçš„è¶³è¿¹å½¢çŠ¶ï¼Œå³æœºå™¨äººå æ®çš„ç©ºé—´èŒƒå›´ã€‚
    
*   `footprint_padding`: ä¸ºæœºå™¨äººçš„è¶³è¿¹æ·»åŠ é¢å¤–çš„å¡«å……ç©ºé—´ï¼Œä»¥è€ƒè™‘æœºå™¨äººè¿åŠ¨æ—¶çš„é¢å¤–ç©ºé—´éœ€æ±‚ã€‚
    
*   `global_frame`: å®šä¹‰å…¨å±€ä»£ä»·åœ°å›¾æ‰€ä½¿ç”¨çš„å‚è€ƒåæ ‡ç³»ã€‚
    
*   `height`å’Œ`width`: å®šä¹‰å…¨å±€ä»£ä»·åœ°å›¾çš„é«˜åº¦å’Œå®½åº¦ï¼ˆä»¥å•å…ƒæ ¼æ•°è®¡ï¼‰ã€‚
    
*   `inflation_layer`: é…ç½®è†¨èƒ€å±‚çš„å‚æ•°ï¼Œè†¨èƒ€å±‚ç”¨äºåœ¨éšœç¢ç‰©å‘¨å›´å¢åŠ ä¸€å®šå®½åº¦çš„â€œç¼“å†²åŒºâ€ï¼Œä»¥é¿å…æœºå™¨äººä¸éšœç¢ç‰©è¿‡è¿‘ã€‚
    
    *   `cost_scaling_factor`: è†¨èƒ€æˆæœ¬çš„ç¼©æ”¾å› å­ã€‚
        
    *   `enabled`: æ§åˆ¶è†¨èƒ€å±‚æ˜¯å¦å¯ç”¨ã€‚
        
    *   `inflate_around_unknown`: æ§åˆ¶æ˜¯å¦åœ¨æœªçŸ¥ç©ºé—´å‘¨å›´è¿›è¡Œè†¨èƒ€ã€‚
        
    *   `inflate_unknown`: æ§åˆ¶æ˜¯å¦å°†æœªçŸ¥ç©ºé—´è§†ä¸ºéšœç¢ç‰©å¹¶è¿›è¡Œè†¨èƒ€ã€‚
        
    *   `inflation_radius`: è†¨èƒ€çš„åŠå¾„ã€‚
        
    *   `plugin`: æŒ‡å®šä½¿ç”¨çš„è†¨èƒ€å±‚æ’ä»¶ã€‚
        
*   `lethal_cost_threshold`: å®šä¹‰ä»£ä»·åœ°å›¾ä¸­è§†ä¸ºâ€œè‡´å‘½â€éšœç¢ç‰©çš„æˆæœ¬é˜ˆå€¼ã€‚
    
*   `map_topic`: æŒ‡å®šè®¢é˜…ä»¥è·å–åœ°å›¾ä¿¡æ¯çš„ROSè¯é¢˜ã€‚
    
*   `observation_sources`: å®šä¹‰ä»£ä»·åœ°å›¾çš„è§‚æµ‹æºï¼Œå³å“ªäº›ä¼ æ„Ÿå™¨æˆ–æ•°æ®æºç”¨äºæ›´æ–°åœ°å›¾ã€‚
    
*   `obstacle_layer`: é…ç½®éšœç¢ç‰©å±‚çš„å‚æ•°ï¼Œéšœç¢ç‰©å±‚è´Ÿè´£å¤„ç†ä¼ æ„Ÿå™¨è§‚æµ‹åˆ°çš„éšœç¢ç‰©ä¿¡æ¯ã€‚
    
    *   `combination_method`: å®šä¹‰å¦‚ä½•ç»„åˆå¤šä¸ªè§‚æµ‹æºçš„ä¿¡æ¯ã€‚
        
    *   `enabled`: æ§åˆ¶éšœç¢ç‰©å±‚æ˜¯å¦å¯ç”¨ã€‚
        
    *   `footprint_clearing_enabled`: æ§åˆ¶æ˜¯å¦æ¸…é™¤æœºå™¨äººè¶³è¿¹å†…çš„éšœç¢ç‰©ä¿¡æ¯ã€‚
        
    *   `max_obstacle_height`å’Œ`min_obstacle_height`: å®šä¹‰éšœç¢ç‰©çš„é«˜åº¦èŒƒå›´ã€‚
        
    *   `observation_sources`: æŒ‡å®šéšœç¢ç‰©ä¿¡æ¯çš„æ¥æºã€‚
        
    *   `plugin`: æŒ‡å®šä½¿ç”¨çš„éšœç¢ç‰©å±‚æ’ä»¶ã€‚
        
    *   `scan`: åŒ…å«ä¸æ¿€å…‰æ‰«æç›¸å…³çš„é…ç½®ï¼Œå¦‚æ‰«ææ•°æ®çš„å¤„ç†æ–¹å¼ã€‚
        
*   `origin_x`å’Œ`origin_y`: å®šä¹‰å…¨å±€ä»£ä»·åœ°å›¾åŸç‚¹çš„åæ ‡ã€‚
    
*   `plugins`: åˆ—å‡ºå¯ç”¨çš„ä»£ä»·åœ°å›¾æ’ä»¶ï¼Œè¿™äº›æ’ä»¶å®šä¹‰äº†å¦‚ä½•æ„å»ºå’Œæ›´æ–°ä»£ä»·åœ°å›¾ã€‚
    
*   `publish_frequency`: å®šä¹‰å‘å¸ƒä»£ä»·åœ°å›¾çš„é¢‘ç‡ã€‚
    
*   `resolution`: å®šä¹‰ä»£ä»·åœ°å›¾çš„åˆ†è¾¨ç‡ï¼Œå³æ¯ä¸ªå•å…ƒæ ¼ä»£è¡¨çš„å®é™…ç‰©ç†å°ºå¯¸ã€‚
    
*   `robot_base_frame`: å®šä¹‰æœºå™¨äººåŸºåº§çš„å‚è€ƒåæ ‡ç³»ã€‚
    
*   `robot_radius`: å®šä¹‰æœºå™¨äººçš„åŠå¾„ï¼Œç”¨äºè®¡ç®—æœºå™¨äººåœ¨åœ°å›¾ä¸Šçš„å ç”¨ç©ºé—´ã€‚
    
*   `rolling_window`: æ§åˆ¶æ˜¯å¦ä½¿ç”¨æ»šåŠ¨çª—å£ï¼ˆå³åŠ¨æ€å˜åŒ–çš„åœ°å›¾åŒºåŸŸï¼‰è€Œéå›ºå®šå¤§å°çš„åœ°å›¾ã€‚
    
*   `static_layer`: é…ç½®é™æ€å±‚çš„å‚æ•°ï¼Œé™æ€å±‚è´Ÿè´£å¤„ç†åœ°å›¾ä¸­çš„é™æ€éšœç¢ç‰©ä¿¡æ¯ã€‚
    
    *   `enabled`: æ§åˆ¶é™æ€å±‚æ˜¯å¦å¯ç”¨ã€‚
        
    *   `map_subscribe_transient_local`: æ§åˆ¶æ˜¯å¦è®¢é˜…ç¬æ€æœ¬åœ°åœ°å›¾æ›´æ–°ã€‚
        
    *   `map_topic`: æŒ‡å®šé™æ€åœ°å›¾çš„ROSè¯é¢˜ï¼ˆå¦‚æœä¸åŒäºå…¨å±€åœ°å›¾ï¼‰ã€‚
        
    *   `plugin`: æŒ‡å®šä½¿ç”¨çš„é™æ€å±‚æ’ä»¶ã€‚
        
    *   `subscribe_to_updates`: æ§åˆ¶æ˜¯å¦è®¢é˜…åœ°å›¾æ›´æ–°ã€‚
        
    *   `transform_tolerance`: å®šä¹‰åæ ‡å˜æ¢çš„å®¹å¿åº¦ã€‚
        
*   `track_unknown_space`: æ§åˆ¶æ˜¯å¦è·Ÿè¸ªåœ°å›¾ä¸­çš„æœªçŸ¥ç©ºé—´ã€‚
    
*   `transform_tolerance`: å®šä¹‰åœ¨åæ ‡å˜æ¢è¿‡ç¨‹ä¸­å…è®¸çš„è¯¯å·®èŒƒå›´ã€‚
    
*   `trinary_costmap`: æ§åˆ¶æ˜¯å¦ä½¿ç”¨ä¸‰æ€ä»£ä»·åœ°å›¾ï¼ˆç©ºé—²ã€å ç”¨ã€æœªçŸ¥ï¼‰ï¼Œè€Œä¸æ˜¯ä»…ä½¿ç”¨äºŒæ€ï¼ˆç©ºé—²ã€å ç”¨ï¼‰ã€‚
    
*   `unknown_cost_value`: å®šä¹‰åœ¨ä»£ä»·åœ°å›¾ä¸­è¡¨ç¤ºæœªçŸ¥ç©ºé—´çš„å€¼ã€‚
    
*   `update_frequency`: å®šä¹‰æ›´æ–°ä»£ä»·åœ°å›¾çš„é¢‘ç‡ã€‚
    
*   `use_maximum`: æ§åˆ¶æ˜¯å¦ä½¿ç”¨å¤šä¸ªè§‚æµ‹æºä¸­çš„æœ€å¤§å€¼æ¥æ›´æ–°ä»£ä»·åœ°å›¾ã€‚
    
*   `use_sim_time`: æ§åˆ¶æ˜¯å¦ä½¿ç”¨ä»¿çœŸæ—¶é—´ï¼ˆåœ¨ä»¿çœŸç¯å¢ƒä¸­å¾ˆæœ‰ç”¨ï¼‰ã€‚
    
*   `voxel_layer`: é…ç½®ä½“ç´ å±‚çš„å‚æ•°ï¼Œä½“ç´ å±‚ä½¿ç”¨ä½“ç´ ç½‘æ ¼æ¥è¡¨ç¤ºä¸‰ç»´ç©ºé—´ä¸­çš„éšœç¢ç‰©ä¿¡æ¯ã€‚
    
    *   `enabled`: æ§åˆ¶ä½“ç´ å±‚æ˜¯å¦å¯ç”¨ã€‚
        
    *   `footprint_clearing_enabled`: æ§åˆ¶æ˜¯å¦æ¸…é™¤æœºå™¨äººè¶³è¿¹å†…çš„ä½“ç´ ä¿¡æ¯ã€‚
        
    *   `mark_threshold`å’Œ`unknown_threshold`: å®šä¹‰å°†ä½“ç´ è§†ä¸ºéšœç¢ç‰©æˆ–æœªçŸ¥çš„é˜ˆå€¼ã€‚
        
    *   `max_obstacle_height`å’Œ`min_obstacle_height`: å®šä¹‰ä½“ç´ è¡¨ç¤ºçš„éšœç¢ç‰©çš„é«˜åº¦èŒƒå›´ã€‚
        
    *   `observation_sources`: æŒ‡å®šä½“ç´ ä¿¡æ¯çš„æ¥æºã€‚
        
    *   `origin_z`: å®šä¹‰ä½“ç´ ç½‘æ ¼åœ¨Zè½´ä¸Šçš„åŸç‚¹ã€‚
        
    *   `plugin`: æŒ‡å®šä½¿ç”¨çš„ä½“ç´ å±‚æ’ä»¶ã€‚
        
    *   `publish_voxel_map`: æ§åˆ¶æ˜¯å¦å‘å¸ƒä½“ç´ åœ°å›¾ã€‚
        
    *   `scan`: åŒ…å«ä¸æ¿€å…‰æ‰«æç›¸å…³çš„é…ç½®ï¼Œå¦‚æ‰«ææ•°æ®çš„å¤„ç†æ–¹å¼ã€‚
        
    *   `z_resolution`å’Œ`z_voxels`: å®šä¹‰ä½“ç´ ç½‘æ ¼åœ¨Zè½´ä¸Šçš„åˆ†è¾¨ç‡å’Œä½“ç´ æ•°ã€‚
        

  

4.  ### æ§åˆ¶å™¨èŠ‚ç‚¹è¯´æ˜
    

åœ¨Nav2å¯¼èˆªç³»ç»Ÿä¸­`nav2_controller`åŠŸèƒ½åŒ…çš„`controller_server`è´Ÿè´£å¤„ç†å¯¼èˆªä»»åŠ¡ä¸­çš„æ§åˆ¶è¯·æ±‚ï¼Œç¡®ä¿æœºå™¨äººèƒ½å¤ŸæŒ‰ç…§è§„åˆ’çš„è·¯å¾„è¿›è¡Œç§»åŠ¨ã€‚å…¶ä¸»è¦åŠŸèƒ½æ˜¯æ ¹æ®`nav2_planner`æ¨¡å—è®¡ç®—å‡ºçš„å…¨å±€æˆ–å±€éƒ¨è·¯å¾„ï¼Œç”Ÿæˆé€Ÿåº¦ã€æ–¹å‘æ§åˆ¶çš„å‘½ä»¤ï¼Œå³æ§åˆ¶æœºå™¨äººæ²¿ç€è§„åˆ’å¥½çš„è·¯å¾„è¡Œèµ°ã€‚è¯¥èŠ‚ç‚¹åœ¨æ‰§è¡Œæ—¶è¿˜éœ€è¦ä¾èµ–äº`/local_costmap/local_costmap`èŠ‚ç‚¹æä¾›çš„åœ°å›¾æ¶ˆæ¯ã€‚

**1.controller\_serverè®¢é˜…çš„è¯é¢˜**

<!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
| è¯é¢˜ | æ¥å£ | æè¿° |
|:---|:---|:---|
| /odom | nav_msgs/msg/Odometry | æœºå™¨äººçš„é‡Œç¨‹è®¡ä¿¡æ¯ï¼ŒåŒ…å«ä½ç½®ã€é€Ÿåº¦å’Œå§¿æ€ |
| /speed_limit | nav2_msgs/msg/SpeedLimit | å¯¼èˆªè¿‡ç¨‹ä¸­çš„é€Ÿåº¦é™åˆ¶ä¿¡æ¯ï¼Œç”¨äºåŠ¨æ€è°ƒæ•´æœºå™¨äººçš„ç§»åŠ¨é€Ÿåº¦ |

**2.controller\_serverå‘å¸ƒçš„è¯é¢˜**

<!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
| è¯é¢˜åç§° | æ¶ˆæ¯ç±»å‹ | æè¿° |
|:---|:---|:---|
| /cmd_vel_nav | geometry_msgs/msg/Twist | å‘å¸ƒæ§åˆ¶å‘½ä»¤ï¼ŒåŒ…æ‹¬çº¿æ€§å’Œè§’é€Ÿåº¦ï¼Œç”¨äºæ§åˆ¶æœºå™¨äººæŒ‰ç…§è§„åˆ’è·¯å¾„ç§»åŠ¨ã€‚ |
| /cost_cloud | sensor_msgs/msg/PointCloud2 | å‘å¸ƒæˆæœ¬åœ°å›¾ä¸­çš„ç‚¹äº‘æ•°æ®ï¼Œç”¨äºé¿éšœå’Œè·¯å¾„è§„åˆ’ã€‚ |
| /local_plan | nav_msgs/msg/Path | å‘å¸ƒå±€éƒ¨è·¯å¾„è§„åˆ’ç»“æœï¼Œå³æœºå™¨äººåº”å¦‚ä½•åˆ°è¾¾å½“å‰ç›®æ ‡ç‚¹é™„è¿‘çš„ä¸€ä¸ªç‚¹ã€‚ |
| /marker | visualization_msgs/msg/MarkerArray | å‘å¸ƒå¯è§†åŒ–æ ‡è®°ï¼Œç”¨äºåœ¨RVizç­‰å¯è§†åŒ–å·¥å…·ä¸­æ˜¾ç¤ºè·¯å¾„ã€éšœç¢ç‰©ç­‰ä¿¡æ¯ã€‚ |
| /received_global_plan | nav_msgs/msg/Path | å‘å¸ƒä»å…¨å±€è§„åˆ’å™¨æ¥æ”¶åˆ°çš„å…¨å±€è·¯å¾„ï¼Œå³å½“å‰ä½ç½®åˆ°ç›®æ ‡ç‚¹çš„è·¯å¾„ã€‚ |
| /transformed_global_plan | nav_msgs/msg/Path | å‘å¸ƒç»è¿‡åæ ‡å˜æ¢çš„å…¨å±€è·¯å¾„ï¼Œç¡®ä¿è·¯å¾„ä¸æœºå™¨äººçš„å½“å‰åæ ‡ç³»ä¸€è‡´ã€‚ |

**3.controller\_serverå‚æ•°**

*   FollowPath: è¿™ä¸ªéƒ¨åˆ†å®šä¹‰äº†ä¸€ä¸ªåä¸ºFollowPathçš„æ’ä»¶æˆ–é…ç½®é›†ï¼Œå®ƒå¯èƒ½æ˜¯ä¸€ä¸ªè·¯å¾„è·Ÿéšè¡Œä¸ºæˆ–ç®—æ³•çš„é…ç½®ã€‚å®ƒåŒ…å«äº†å¤šä¸ªå­å‚æ•°å’Œå­é…ç½®ï¼Œç”¨äºå®šä¹‰å¦‚ä½•è·Ÿéšè·¯å¾„ã€‚
    
    *   BaseObstacle: å®šä¹‰äº†åŸºæœ¬çš„éšœç¢ç‰©è¯„ä¼°å‚æ•°ï¼Œç”¨äºåœ¨è·¯å¾„è·Ÿéšè¿‡ç¨‹ä¸­é¿å…éšœç¢ç‰©ã€‚
        
        *   class: æŒ‡å®šäº†ç±»çš„åç§°ï¼Œè¿™é‡Œæ˜¯BaseObstacleï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªåŸºæœ¬éšœç¢ç‰©è¯„ä¼°ç»„ä»¶ã€‚
            
        *   scale: å®šä¹‰äº†è¯¥éšœç¢ç‰©è¯„ä¼°åœ¨æ•´ä½“è¯„ä¼°ä¸­çš„æƒé‡æˆ–å½±å“ç¨‹åº¦ã€‚
            
        *   sum\_scores: æŒ‡ç¤ºæ˜¯å¦ç´¯åŠ å¤šä¸ªéšœç¢ç‰©çš„åˆ†æ•°ï¼Œfalseå¯èƒ½è¡¨ç¤ºä½¿ç”¨æœ€å¤§å€¼æˆ–å…¶ä»–é€»è¾‘ã€‚
            
    *   GoalAlign, GoalDist, PathAlign, PathDist, RotateToGoal, Oscillation: è¿™äº›éƒ½æ˜¯è·¯å¾„è·Ÿéšè¿‡ç¨‹ä¸­çš„ä¸åŒè¯„ä¼°æˆ–è¡Œä¸ºç»„ä»¶ï¼Œæ¯ä¸ªéƒ½æœ‰å…¶ç‰¹å®šçš„å‚æ•°å’Œç”¨é€”ï¼Œå¦‚å¯¹é½ç›®æ ‡ã€ä¿æŒä¸ç›®æ ‡æˆ–è·¯å¾„çš„è·ç¦»ã€å‡å°‘æŒ¯è¡ç­‰ã€‚
        
    *   acc\_lim\_theta, acc\_lim\_x, acc\_lim\_y: è¿™äº›å‚æ•°å®šä¹‰äº†æœºå™¨äººåœ¨ä¸åŒæ–¹å‘ä¸Šçš„åŠ é€Ÿåº¦é™åˆ¶ã€‚
        
    *   critics: æŒ‡å®šäº†å“ªäº›è¯„ä¼°ç»„ä»¶ï¼ˆæˆ–â€œæ‰¹è¯„å®¶â€ï¼‰å°†è¢«ç”¨äºè·¯å¾„è·Ÿéšå†³ç­–ã€‚
        
    *   debug\_trajectory\_details: æŒ‡ç¤ºæ˜¯å¦å‘å¸ƒè½¨è¿¹çš„è¯¦ç»†è°ƒè¯•ä¿¡æ¯ã€‚
        
    *   å…¶ä»–ä¸é€Ÿåº¦ã€åŠ é€Ÿåº¦ã€æ—¶é—´ç²’åº¦ã€è½¨è¿¹ç”Ÿæˆç­‰ç›¸å…³çš„å‚æ•°ï¼Œå…±åŒå®šä¹‰äº†è·¯å¾„è·Ÿéšç®—æ³•çš„è¡Œä¸ºå’Œæ€§èƒ½ã€‚
        
*   controller\_frequency: æŒ‡å®šäº†æ§åˆ¶å™¨ï¼ˆå¯èƒ½æ˜¯FollowPathæˆ–å…¶ä»–æ§åˆ¶å™¨ï¼‰çš„è¿è¡Œé¢‘ç‡ï¼Œä»¥èµ«å…¹ä¸ºå•ä½ã€‚
    
*   controller\_plugins: æŒ‡å®šäº†å°†è¦ä½¿ç”¨çš„æ§åˆ¶å™¨æ’ä»¶åˆ—è¡¨ï¼Œè¿™é‡ŒåªåŒ…å«äº†FollowPathã€‚
    
*   failure\_tolerance: å®šä¹‰äº†å®¹å¿å¤±è´¥çš„æ—¶é—´æˆ–è·ç¦»ï¼Œç”¨äºåœ¨è¯„ä¼°æ§åˆ¶å™¨æ˜¯å¦å¤±è´¥æ—¶æä¾›ä¸€å®šçš„ç¼“å†²ã€‚
    
*   general\_goal\_checker: å®šä¹‰äº†ä¸€ä¸ªé€šç”¨çš„ç›®æ ‡æ£€æŸ¥å™¨ï¼Œç”¨äºç¡®å®šæœºå™¨äººæ˜¯å¦å·²è¾¾åˆ°å…¶ç›®æ ‡ä½ç½®å’Œæ–¹å‘ã€‚
    
*   goal\_checker\_plugins: æŒ‡å®šäº†å°†è¦ä½¿ç”¨çš„ç›®æ ‡æ£€æŸ¥å™¨æ’ä»¶åˆ—è¡¨ã€‚
    
*   min\_theta\_velocity\_threshold, min\_x\_velocity\_threshold, min\_y\_velocity\_threshold: è¿™äº›å®šä¹‰äº†æœºå™¨äººåœ¨ä¸åŒæ–¹å‘ä¸Šçš„æœ€å°é€Ÿåº¦é˜ˆå€¼ï¼Œä½äºè¿™äº›é˜ˆå€¼å¯èƒ½è¢«è§†ä¸ºåœæ­¢æˆ–é™æ­¢ã€‚
    
*   odom\_topic: æŒ‡å®šäº†é‡Œç¨‹è®¡ä¿¡æ¯çš„ROSä¸»é¢˜ã€‚
    
*   progress\_checker: å®šä¹‰äº†ä¸€ä¸ªè¿›åº¦æ£€æŸ¥å™¨ï¼Œç”¨äºè¯„ä¼°æœºå™¨äººæ˜¯å¦åœ¨å‘ç›®æ ‡ç§»åŠ¨ã€‚
    
*   qos\_overrides: å®šä¹‰äº†ROSæœåŠ¡æˆ–ä¸»é¢˜çš„QoSï¼ˆæœåŠ¡è´¨é‡ï¼‰è¦†ç›–è®¾ç½®ï¼Œç”¨äºè°ƒæ•´æ¶ˆæ¯ä¼ é€’çš„å¯é æ€§å’Œæ€§èƒ½ã€‚
    
*   speed\_limit\_topic: æŒ‡å®šäº†é€Ÿåº¦é™åˆ¶ä¿¡æ¯çš„ROSä¸»é¢˜ã€‚
    
*   use\_sim\_time: æŒ‡ç¤ºæ˜¯å¦ä½¿ç”¨æ¨¡æ‹Ÿæ—¶é—´ï¼Œè¿™åœ¨ROSä»¿çœŸç¯å¢ƒä¸­éå¸¸æœ‰ç”¨ã€‚
    

**4./local\_costmap/local\_costmapè®¢é˜…çš„è¯é¢˜**

<!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
| è¯é¢˜ | æ¥å£ | æè¿° |
|:---|:---|:---|
| /local_costmap/footprint | geometry_msgs/msg/Polygon | æœºå™¨äººæˆ–ç§»åŠ¨å¹³å°çš„è¶³è¿¹å¤šè¾¹å½¢ï¼Œç”¨äºæœ¬åœ°ä»£ä»·åœ°å›¾çš„è®¡ç®— |
| /scan | sensor_msgs/msg/LaserScan | æ¿€å…‰æ‰«æä»ªçš„æ‰«ææ•°æ®ï¼Œç”¨äºç¯å¢ƒæ„ŸçŸ¥å’Œé¿éšœ |

**5./local\_costmap/local\_costmapå‘å¸ƒçš„è¯é¢˜**

<!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
| è¯é¢˜ | æ¥å£ | æè¿° |
|:---|:---|:---|
| /local_costmap/clearing_endpoints | sensor_msgs/msg/PointCloud2 | æ¸…é™¤æˆæœ¬å›¾ä¸Šçš„éšœç¢ç‰©ç‚¹äº‘æ•°æ®ï¼Œé€šå¸¸ç”¨äºåŠ¨æ€éšœç¢ç‰©å¤„ç† |
| /local_costmap/costmap | nav_msgs/msg/OccupancyGrid | æœ¬åœ°æˆæœ¬å›¾ï¼Œè¡¨ç¤ºæœºå™¨äººå‘¨å›´ç¯å¢ƒçš„å¯é€šè¡Œæ€§ |
| /local_costmap/costmap_raw | nav2_msgs/msg/Costmap | æœªç»å¤„ç†çš„æœ¬åœ°æˆæœ¬å›¾ï¼Œå¯èƒ½åŒ…å«æ›´è¯¦ç»†çš„ä¿¡æ¯ |
| /local_costmap/costmap_updates | map_msgs/msg/OccupancyGridUpdate | æœ¬åœ°æˆæœ¬å›¾çš„æ›´æ–°ä¿¡æ¯ï¼ŒåŒ…æ‹¬å“ªäº›åŒºåŸŸå‘ç”Ÿäº†å˜åŒ– |
| /local_costmap/published_footprint | geometry_msgs/msg/PolygonStamped | å‘å¸ƒçš„æœºå™¨äººè¶³è¿¹å¤šè¾¹å½¢ï¼Œæ—¶é—´æˆ³è¡¨ç¤ºå‘å¸ƒæ—¶é—´ |
| /local_costmap/voxel_grid | nav2_msgs/msg/VoxelGrid | ä½“ç´ ç½‘æ ¼æ•°æ®ï¼Œç”¨äºæˆæœ¬å›¾ç”Ÿæˆä¸­çš„ç©ºé—´åˆ’åˆ†å’Œä¼˜åŒ– |

**6./local\_costmap/local\_costmapå‚æ•°**

*   `/bond_disable_heartbeat_timeout`: æ˜¯å¦ç¦ç”¨èŠ‚ç‚¹é—´çš„å¿ƒè·³è¶…æ—¶æ£€æŸ¥ã€‚å½“è®¾ç½®ä¸º`true`æ—¶ï¼Œè¡¨ç¤ºç¦ç”¨è¯¥åŠŸèƒ½ï¼Œå¯èƒ½ç”¨äºå‡å°‘ç½‘ç»œé€šä¿¡é‡æˆ–é€‚åº”ç‰¹å®šç½‘ç»œç¯å¢ƒã€‚
    
*   `always_send_full_costmap`: æ˜¯å¦æ€»æ˜¯å‘é€å®Œæ•´çš„æˆæœ¬å›¾ã€‚å½“è®¾ç½®ä¸º`true`æ—¶ï¼ŒèŠ‚ç‚¹å°†ä¸ä¾èµ–äºå¢é‡æ›´æ–°ï¼Œè€Œæ˜¯å§‹ç»ˆå‘é€å®Œæ•´çš„æˆæœ¬å›¾æ•°æ®ã€‚
    
*   `clearable_layers`: æŒ‡å®šå¯ä»¥è¢«æ¸…é™¤çš„å±‚åˆ—è¡¨ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒåŒ…æ‹¬`obstacle_layer`ã€`voxel_layer`å’Œ`range_layer`ï¼Œè¿™æ„å‘³ç€è¿™äº›å±‚ä¸­çš„éšœç¢ç‰©æ•°æ®å¯ä»¥è¢«æ¸…é™¤ã€‚
    
*   `filters`: ç”¨äºæŒ‡å®šåº”ç”¨äºæˆæœ¬å›¾çš„è¿‡æ»¤å™¨åˆ—è¡¨ã€‚æ­¤å¤„ä¸ºç©ºï¼Œè¡¨ç¤ºæ²¡æœ‰åº”ç”¨ä»»ä½•è¿‡æ»¤å™¨ã€‚
    
*   `footprint`: æœºå™¨äººçš„è¶³è¿¹å¤šè¾¹å½¢ï¼Œå®šä¹‰äº†æœºå™¨äººåœ¨äºŒç»´ç©ºé—´ä¸­çš„ç‰©ç†å ç”¨åŒºåŸŸã€‚
    
*   `footprint_padding`: è¶³è¿¹çš„å¡«å……é‡ï¼Œç”¨äºåœ¨è®¡ç®—æˆæœ¬å›¾æ—¶ç»™æœºå™¨äººè¶³è¿¹æ·»åŠ é¢å¤–çš„ç©ºé—´ã€‚
    
*   `global_frame`: å…¨å±€å‚è€ƒåæ ‡ç³»çš„åç§°ï¼Œé€šå¸¸ç”¨äºå®šä½å’Œå¯¼èˆªä»»åŠ¡ã€‚
    
*   `height`: æˆæœ¬å›¾çš„é«˜åº¦ï¼ˆä»¥å•å…ƒæ ¼æ•°é‡è®¡ï¼‰ã€‚
    
*   `inflation_layer`: è†¨èƒ€å±‚çš„é…ç½®ï¼Œç”¨äºåœ¨éšœç¢ç‰©å‘¨å›´æ·»åŠ ä¸€å®šèŒƒå›´çš„è†¨èƒ€åŒºåŸŸï¼Œä½¿æœºå™¨äººä¸éšœç¢ç‰©ä¿æŒå®‰å…¨è·ç¦»ã€‚
    
*   `lethal_cost_threshold`: è‡´å‘½æˆæœ¬é˜ˆå€¼ï¼Œè¶…è¿‡æ­¤é˜ˆå€¼çš„æˆæœ¬å€¼è¡¨ç¤ºä¸å¯é€šè¡Œçš„åŒºåŸŸã€‚
    
*   `map_topic`: è®¢é˜…çš„åœ°å›¾ä¸»é¢˜åç§°ï¼Œç”¨äºè·å–å…¨å±€åœ°å›¾ä¿¡æ¯ã€‚
    
*   `observation_sources`: è§‚å¯Ÿæºçš„é…ç½®ï¼Œç”¨äºæŒ‡å®šå“ªäº›ä¼ æ„Ÿå™¨æ•°æ®å°†è¢«ç”¨äºæ›´æ–°æˆæœ¬å›¾ã€‚æ­¤å¤„ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œå¯èƒ½æ˜¯é»˜è®¤å€¼æˆ–é…ç½®æ–¹å¼çš„ä¸åŒã€‚
    
*   `obstacle_layer`: éšœç¢ç‰©å±‚çš„é…ç½®ï¼Œç”¨äºå¤„ç†æ¥è‡ªä¼ æ„Ÿå™¨ï¼ˆå¦‚æ¿€å…‰é›·è¾¾ï¼‰çš„éšœç¢ç‰©æ•°æ®ã€‚
    
*   `origin_x`,`origin_y`: æˆæœ¬å›¾åŸç‚¹çš„Xå’ŒYåæ ‡ï¼Œå®šä¹‰äº†æˆæœ¬å›¾åœ¨å…¨å±€åæ ‡ç³»ä¸­çš„ä½ç½®ã€‚
    
*   `plugins`: å¯ç”¨çš„æ’ä»¶åˆ—è¡¨ï¼Œå®šä¹‰äº†æˆæœ¬å›¾ä½¿ç”¨çš„ä¸åŒå±‚ï¼ˆå¦‚éšœç¢ç‰©å±‚ã€è†¨èƒ€å±‚ç­‰ï¼‰ã€‚
    
*   `publish_frequency`: æˆæœ¬å›¾çš„å‘å¸ƒé¢‘ç‡ï¼ˆä»¥Hzä¸ºå•ä½ï¼‰ã€‚
    
*   `resolution`: æˆæœ¬å›¾çš„åˆ†è¾¨ç‡ï¼ˆä»¥ç±³/å•å…ƒæ ¼è®¡ï¼‰ã€‚
    
*   `robot_base_frame`: æœºå™¨äººåŸºåº§çš„å‚è€ƒåæ ‡ç³»åç§°ï¼Œç”¨äºå®šä½æœºå™¨äººã€‚
    
*   `robot_radius`: æœºå™¨äººçš„åŠå¾„ï¼Œç”¨äºåœ¨æˆæœ¬å›¾ä¸­è¡¨ç¤ºæœºå™¨äººçš„ç‰©ç†å°ºå¯¸ã€‚
    
*   `rolling_window`: æ˜¯å¦ä½¿ç”¨æ»šåŠ¨çª—å£ã€‚å½“è®¾ç½®ä¸º`true`æ—¶ï¼Œæˆæœ¬å›¾å°†éšç€æœºå™¨äººçš„ç§»åŠ¨è€Œæ›´æ–°å…¶ä½ç½®å’ŒèŒƒå›´ã€‚
    
*   `track_unknown_space`: æ˜¯å¦è·Ÿè¸ªæœªçŸ¥ç©ºé—´ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¿™å¯èƒ½ç”¨äºå¤„ç†æœªæ¢ç´¢æˆ–æœªçŸ¥çš„åŒºåŸŸã€‚
    
*   `transform_tolerance`: å˜æ¢å®¹å·®ï¼Œå®šä¹‰äº†æ¥å—å˜æ¢çš„æ—¶é—´å·®å’Œè§’åº¦å·®çš„é˜ˆå€¼ã€‚
    
*   `trinary_costmap`: æ˜¯å¦ä½¿ç”¨ä¸‰æ€æˆæœ¬å›¾ï¼ˆé€šå¸¸æ˜¯è‡ªç”±ã€å ç”¨ã€æœªçŸ¥ï¼‰ã€‚
    
*   `unknown_cost_value`: æœªçŸ¥åŒºåŸŸåœ¨æˆæœ¬å›¾ä¸­çš„æˆæœ¬å€¼ã€‚
    
*   `update_frequency`: æˆæœ¬å›¾çš„æ›´æ–°é¢‘ç‡ï¼ˆä»¥Hzä¸ºå•ä½ï¼‰ï¼Œä¸åŒäºå‘å¸ƒé¢‘ç‡ã€‚
    
*   `use_maximum`: æ˜¯å¦åœ¨å¤šä¸ªæºæä¾›ç›¸åŒä½ç½®çš„æˆæœ¬ä¿¡æ¯æ—¶ä½¿ç”¨æœ€å¤§å€¼ã€‚
    
*   `use_sim_time`: æ˜¯å¦ä½¿ç”¨æ¨¡æ‹Ÿæ—¶é—´è€Œéç³»ç»Ÿæ—¶é—´ã€‚è¿™åœ¨ä»¿çœŸç¯å¢ƒä¸­å¾ˆæœ‰ç”¨ã€‚
    
*   `voxel_layer`: ä½“ç´ å±‚çš„é…ç½®ï¼Œç”¨äºå°†ä¸‰ç»´ç©ºé—´åˆ’åˆ†ä¸ºä½“ç´ ï¼ˆä½“ç§¯åƒç´ ï¼‰ï¼Œä»¥æé«˜æˆæœ¬å›¾çš„å¤„ç†æ•ˆç‡ã€‚
    

  

  

5.  ### æ¢å¤å™¨èŠ‚ç‚¹è¯´æ˜
    

æ¢å¤è¡Œä¸ºæ˜¯æœºå™¨äººå¯¼èˆªè¿‡ç¨‹ä¸­ä¸€ä¸ªè‡³å…³é‡è¦çš„éƒ¨åˆ†ï¼Œå®ƒå…è®¸æœºå™¨äººåœ¨é‡åˆ°éšœç¢ã€å¡ä½æˆ–å…¶ä»–å¯¼èˆªé—®é¢˜æ—¶é‡‡å–ä¸€ç³»åˆ—é¢„å®šä¹‰çš„åŠ¨ä½œæ¥å°è¯•æ¢å¤ã€‚åœ¨Nav2ä¸­ç”±`nav2_behaviors`åŠŸèƒ½åŒ…çš„`behavior_server`å®ç°è¿™ä¸€åŠŸèƒ½ã€‚

**1.è®¢é˜…çš„è¯é¢˜**

<!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
| è¯é¢˜ | æ¥å£ | æè¿° |
|:---|:---|:---|
| /clock | rosgraph_msgs/msg/Clock | ROSç³»ç»Ÿæ—¶é—´ |
| /cmd_vel_teleop | geometry_msgs/msg/Twist | é¥æ“ä½œå‘½ä»¤ï¼Œç”¨äºæ§åˆ¶æœºå™¨äººçš„çº¿æ€§å’Œè§’é€Ÿåº¦ |
| /local_costmap/costmap_raw | nav2_msgs/msg/Costmap | å±€éƒ¨ä»£ä»·åœ°å›¾çš„åŸå§‹æ•°æ® |
| /local_costmap/published_footprint | geometry_msgs/msg/PolygonStamped | æœºå™¨äººåœ¨å±€éƒ¨ä»£ä»·åœ°å›¾ä¸­çš„å·²å‘å¸ƒè¶³è¿¹ |
| /preempt_teleop | std_msgs/msg/Empty | é¥æ“ä½œæŠ¢å ä¿¡å·ï¼Œç”¨äºä¸­æ–­å½“å‰é¥æ“ä½œ |

**2.å‘å¸ƒçš„è¯é¢˜**

<!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
| è¯é¢˜ | æ¥å£ | æè¿° |
|:---|:---|:---|
| /cmd_vel | geometry_msgs/msg/Twist | å‘é€ç»™åº•å±‚æ§åˆ¶å™¨çš„é€Ÿåº¦å‘½ä»¤ |

**3.æä¾›çš„ActionæœåŠ¡å™¨**

<!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
| è¯é¢˜ | Actionæ¥å£ | æè¿° |
|:---|:---|:---|
| /assisted_teleop | nav2_msgs/action/AssistedTeleop | é¥æ§è¾…åŠ©æ“ä½œæœåŠ¡ï¼Œå…è®¸ç”¨æˆ·åœ¨å¯¼èˆªæ—¶æä¾›æ–¹å‘æ€§è¾“å…¥ |
| /backup | nav2_msgs/action/BackUp | åé€€åŠ¨ä½œæœåŠ¡ï¼Œç”¨äºåœ¨ç‰¹å®šæƒ…å†µä¸‹ä½¿æœºå™¨äººåé€€ |
| /drive_on_heading | nav2_msgs/action/DriveOnHeading | æŒ‰æŒ‡å®šèˆªå‘è¡Œé©¶çš„åŠ¨ä½œæœåŠ¡ |
| /spin | nav2_msgs/action/Spin | æ—‹è½¬åŠ¨ä½œæœåŠ¡ï¼Œå…è®¸æœºå™¨äººåœ¨åŸåœ°æ—‹è½¬ |
| /wait | nav2_msgs/action/Wait | ç­‰å¾…åŠ¨ä½œæœåŠ¡ï¼Œä½¿æœºå™¨äººåœ¨å½“å‰ä½ç½®ç­‰å¾…ä¸€å®šæ—¶é—´ |

**4.å‚æ•°**

*   `use_sim_time`: è¯¥å‚æ•°æŒ‡å®šæ˜¯å¦ä½¿ç”¨æ¨¡æ‹Ÿæ—¶é—´è€Œéå®é™…æ—¶é—´ã€‚è¿™åœ¨ä»¿çœŸç¯å¢ƒä¸­éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºä»¿çœŸç¯å¢ƒå¯ä»¥åŠ é€Ÿæˆ–å‡é€Ÿæ—¶é—´æµé€ï¼Œè€Œä¸éœ€è¦ç­‰å¾…å®é™…æ—¶é—´çš„æµé€ã€‚
    
*   `global_frame`: å®šä¹‰å…¨å±€åæ ‡ç³»çš„åç§°ï¼Œè¯¥åæ ‡ç³»é€šå¸¸ç”¨äºå¯¼èˆªä»»åŠ¡ä¸­çš„å®šä½å’Œè·¯å¾„è§„åˆ’ã€‚åœ¨è¿™é‡Œï¼Œå®ƒè¢«è®¾ç½®ä¸º`odom`ï¼Œæ„å‘³ç€ä½¿ç”¨é‡Œç¨‹è®¡æ•°æ®æ¥ä½œä¸ºå…¨å±€åæ ‡ç³»çš„å‚è€ƒã€‚
    
*   `robot_base_frame`: æŒ‡å®šæœºå™¨äººåŸºåº§çš„åæ ‡ç³»åç§°ã€‚è¿™æ˜¯æœºå™¨äººä¸Šç”¨äºå®šä½å’Œè¿åŠ¨æ§åˆ¶çš„å‚è€ƒç‚¹ï¼Œé€šå¸¸ä¸æœºå™¨äººçš„ç‰©ç†ä¸­å¿ƒæˆ–é©±åŠ¨è½®çš„ä¸­å¿ƒç›¸å¯¹åº”ã€‚
    
*   `odom_topic`: è¿™æ˜¯ä¸€ä¸ªROSè¯é¢˜åç§°ï¼Œç”¨äºå‘å¸ƒé‡Œç¨‹è®¡æ•°æ®ã€‚é‡Œç¨‹è®¡æ•°æ®åŒ…å«äº†æœºå™¨äººéšæ—¶é—´æ¨ç§»çš„ä½ç½®å’Œå§¿æ€å˜åŒ–ä¿¡æ¯ï¼Œæ˜¯å¯¼èˆªå’Œå®šä½ç³»ç»Ÿçš„å…³é”®è¾“å…¥ä¹‹ä¸€ã€‚
    
*   `/bond_disable_heartbeat_timeout`ï¼šè¿™ä¸ªå‚æ•°å¯èƒ½ç”¨äºé…ç½®ROSèŠ‚ç‚¹ä¹‹é—´çš„å¿ƒè·³æ£€æµ‹æœºåˆ¶ã€‚å°†å…¶è®¾ç½®ä¸º`true`å¯èƒ½æ„å‘³ç€ç¦ç”¨æˆ–è°ƒæ•´å¿ƒè·³è¶…æ—¶çš„è¡Œä¸ºï¼Œä»¥ä¾¿åœ¨ç‰¹å®šæƒ…å†µä¸‹ï¼ˆå¦‚ä»¿çœŸç¯å¢ƒï¼‰é¿å…ä¸å¿…è¦çš„è¶…æ—¶é”™è¯¯ã€‚
    
*   `assisted_teleop`,`backup`,`drive_on_heading`,`spin`,`wait`: è¿™äº›æ˜¯è¡Œä¸ºæ ‘ä¸­å¯èƒ½ä½¿ç”¨çš„è¡Œä¸ºæ’ä»¶çš„é…ç½®é¡¹ã€‚æ¯ä¸ªæ’ä»¶éƒ½å®šä¹‰äº†æœºå™¨äººå¯ä»¥æ‰§è¡Œçš„ä¸€ç§ç‰¹å®šè¡Œä¸ºï¼Œå¦‚è¾…åŠ©é¥æ“ä½œã€åé€€ã€æŒ‰æŒ‡å®šæ–¹å‘è¡Œé©¶ã€åŸåœ°æ—‹è½¬å’Œç­‰å¾…ã€‚
    
*   `behavior_plugins`: åˆ—å‡ºäº†åœ¨è¡Œä¸ºæ ‘ä¸­å¯ç”¨çš„è¡Œä¸ºæ’ä»¶åç§°ã€‚
    
*   `cmd_vel_teleop`: æŒ‡å®šäº†ç”¨äºé¥æ“ä½œçš„é€Ÿåº¦æ§åˆ¶å‘½ä»¤çš„ROSè¯é¢˜åç§°ã€‚
    
*   `costmap_topic`: å®šä¹‰äº†å±€éƒ¨ä»£ä»·åœ°å›¾çš„ROSè¯é¢˜åç§°ï¼Œä»£ä»·åœ°å›¾ç”¨äºè¡¨ç¤ºç¯å¢ƒä¸­çš„éšœç¢ç‰©å’Œå¯é€šè¡ŒåŒºåŸŸã€‚
    
*   `cycle_frequency`: å®šä¹‰äº†å¯¼èˆªç³»ç»Ÿæ›´æ–°å…¶çŠ¶æ€å’Œè§„åˆ’æ–°è·¯å¾„çš„é¢‘ç‡ï¼ˆä»¥èµ«å…¹ä¸ºå•ä½ï¼‰ã€‚
    
*   `max_rotational_vel`,`min_rotational_vel`,`rotational_acc_lim`: è¿™äº›å‚æ•°å®šä¹‰äº†æœºå™¨äººæ—‹è½¬æ—¶çš„æœ€å¤§é€Ÿåº¦ã€æœ€å°é€Ÿåº¦å’ŒåŠ é€Ÿåº¦é™åˆ¶ã€‚
    
*   `projection_time`: ä¸ä»£ä»·åœ°å›¾çš„æ›´æ–°æˆ–é¢„æµ‹æœªæ¥éšœç¢ç‰©ä½ç½®æœ‰å…³çš„æ—¶é—´å‚æ•°ã€‚
    
*   `footprint_topic`: å®šä¹‰äº†å‘å¸ƒæœºå™¨äººè¶³è¿¹ï¼ˆå³æœºå™¨äººå æ®çš„ç©ºé—´ï¼‰çš„ROSè¯é¢˜åç§°ã€‚
    
*   `simulate_ahead_time`,`simulation_time_step`: è¿™äº›å‚æ•°ä¸ä»¿çœŸç¯å¢ƒç›¸å…³ï¼Œå¯èƒ½ç”¨äºæ§åˆ¶ä»¿çœŸè¿‡ç¨‹ä¸­çš„æ—¶é—´æµé€å’Œæ­¥é•¿ã€‚
    
*   `transform_tolerance`: å®šä¹‰äº†åæ ‡å˜æ¢æ—¶çš„å®¹å·®èŒƒå›´ï¼Œç”¨äºå¤„ç†ä¸åŒåæ ‡ç³»ä¹‹é—´çš„å¾®å°å·®å¼‚ã€‚
    

  

6.  ### èˆªç‚¹è·ŸéšèŠ‚ç‚¹è¯´æ˜
    

åœ¨Nav2 å¯¼èˆªå †æ ˆä¸­ï¼Œ`nav2_waypoint_follower`åŒ…ä¸‹çš„`/waypoint_follower`èŠ‚ç‚¹è´Ÿè´£è·Ÿè¸ªç”±è·¯å¾„è§„åˆ’å™¨ç”Ÿæˆçš„ä¸€ç³»åˆ—èˆªç‚¹ï¼ˆwaypointsï¼‰ï¼Œä»¥ç¡®ä¿æœºå™¨äººèƒ½å¤Ÿæ²¿ç€é¢„å®šçš„è·¯å¾„å®‰å…¨ã€å‡†ç¡®åœ°ç§»åŠ¨ã€‚è¯¥èŠ‚ç‚¹çš„ä¸»è¦åŠŸèƒ½æ˜¯æ ¹æ®å½“å‰æœºå™¨äººä½ç½®å’Œé€Ÿåº¦ä¿¡æ¯ï¼Œä»¥åŠç”±è·¯å¾„è§„åˆ’å™¨ï¼ˆå¦‚`nav2_global_planner`å’Œ`nav2_local_planner`ï¼‰æä¾›çš„èˆªç‚¹åˆ—è¡¨ï¼Œè®¡ç®—å‡ºæ§åˆ¶æŒ‡ä»¤æ¥æ§åˆ¶æœºå™¨äººçš„è¿åŠ¨ã€‚è¿™äº›æ§åˆ¶æŒ‡ä»¤å¯èƒ½åŒ…æ‹¬çº¿æ€§å’Œè§’é€Ÿåº¦å‘½ä»¤ï¼Œæˆ–è€…æ›´å…·ä½“çš„è¿åŠ¨å­¦æˆ–åŠ¨åŠ›å­¦å‘½ä»¤ï¼Œå…·ä½“å–å†³äºæœºå™¨äººçš„ç±»å‹å’Œé…ç½®ã€‚

**1.æä¾›çš„ActionæœåŠ¡å™¨**

<!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
| è¯é¢˜ | Actionæ¥å£ | æè¿° |
|:---|:---|:---|
| /follow_waypoints | nav2_msgs/action/FollowWaypoints | å…è®¸å®¢æˆ·ç«¯è¯·æ±‚planner_serveræŒ‰ç…§ä¸€ç³»åˆ—è·¯ç‚¹è¿›è¡Œå¯¼èˆª |

**2.è¯·æ±‚çš„ActionæœåŠ¡**

<!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
| è¯é¢˜ | Actionæ¥å£ | æè¿° |
|:---|:---|:---|
| /navigate_to_pose | nav2_msgs/action/NavigateToPose | å…è®¸planner_serverï¼ˆæˆ–è°ƒç”¨å®ƒçš„èŠ‚ç‚¹ï¼‰è¯·æ±‚å¯¼èˆªåˆ°æŒ‡å®šçš„ä½å§¿ |

**3.å‚æ•°**

*   `use_sim_time`: æŒ‡å®šæ˜¯å¦ä½¿ç”¨æ¨¡æ‹Ÿæ—¶é—´è€Œéå®é™…æ—¶é—´è¿›è¡ŒèŠ‚ç‚¹çš„è®¡æ—¶å’ŒåŒæ­¥ã€‚è¿™åœ¨ä»¿çœŸç¯å¢ƒä¸­ç‰¹åˆ«æœ‰ç”¨ï¼Œå› ä¸ºä»¿çœŸç¯å¢ƒå¯èƒ½æ— æ³•æä¾›ä¸çœŸå®æ—¶é—´å®Œå…¨åŒæ­¥çš„æ—¶é’Ÿã€‚
    
*   `loop_rate`: å®šä¹‰äº†èŠ‚ç‚¹çš„ä¸»å¾ªç¯é€Ÿç‡ï¼Œå³èŠ‚ç‚¹æ¯ç§’æ‰§è¡Œå…¶ä¸»è¦ä»»åŠ¡ï¼ˆå¦‚å¤„ç†æ•°æ®ã€å‘å¸ƒä¿¡æ¯ç­‰ï¼‰çš„æ¬¡æ•°ã€‚è¿™ä¸ªå‚æ•°å¯¹äºæ§åˆ¶èŠ‚ç‚¹çš„å“åº”æ€§å’Œèµ„æºä½¿ç”¨éå¸¸é‡è¦ã€‚
    
*   `stop_on_failure`: æŒ‡æ˜å½“å¯¼èˆªä»»åŠ¡é‡åˆ°æ— æ³•å…‹æœçš„éšœç¢æˆ–è¾¾åˆ°å…¶ä»–å¤±è´¥æ¡ä»¶æ—¶ï¼ŒèŠ‚ç‚¹æ˜¯å¦åº”è¯¥åœæ­¢æ‰§è¡Œã€‚è¿™å¯¹äºç¡®ä¿åœ¨å¤±è´¥æƒ…å†µä¸‹ç³»ç»Ÿèƒ½å¤Ÿå®‰å…¨åœ°åœæ­¢å¹¶ç­‰å¾…è¿›ä¸€æ­¥æŒ‡ä»¤å¾ˆé‡è¦ã€‚
    
*   `bond_disable_heartbeat_timeout`: æ¶‰åŠèŠ‚ç‚¹é—´é€šä¿¡çš„å¯é æ€§æœºåˆ¶ã€‚Bondæ˜¯ROS 2ä¸­ç”¨äºèŠ‚ç‚¹é—´ç¨³å®šé€šä¿¡çš„ä¸€ç§æœºåˆ¶ï¼Œå…¶ä¸­å¿ƒè·³ä¿¡å·ç”¨äºæ£€æµ‹èŠ‚ç‚¹æ˜¯å¦ä»ç„¶æ´»è·ƒã€‚å°†æ­¤å‚æ•°è®¾ç½®ä¸ºtrueä¼šç¦ç”¨å¿ƒè·³è¶…æ—¶æ£€æµ‹ï¼Œè¿™å¯èƒ½åœ¨æŸäº›ç‰¹å®šçš„ç½‘ç»œé…ç½®æˆ–åº”ç”¨åœºæ™¯ä¸­æ˜¯æœ‰ç”¨çš„ã€‚
    
*   `waypoint_task_executor_plugin`: æŒ‡å®šäº†åœ¨æ‰§è¡Œè·¯å¾„ç‚¹å¯¼èˆªä»»åŠ¡æ—¶è¦ä½¿ç”¨çš„æ’ä»¶ã€‚è·¯å¾„ç‚¹å¯¼èˆªé€šå¸¸æ¶‰åŠä¸€ç³»åˆ—é¢„å…ˆå®šä¹‰çš„ç‚¹ï¼Œæœºå™¨äººéœ€è¦æŒ‰é¡ºåºè®¿é—®è¿™äº›ç‚¹ã€‚è¿™ä¸ªå‚æ•°å…è®¸ç”¨æˆ·æŒ‡å®šç”¨äºæ‰§è¡Œè¿™ç§ç±»å‹ä»»åŠ¡çš„ç‰¹å®šæ’ä»¶æˆ–ç®—æ³•ã€‚
    
*   `wait_at_waypoint`: è¿™æ˜¯ä¸€ä¸ªå¤åˆå‚æ•°ï¼Œç”¨äºé…ç½®åœ¨è·¯å¾„ç‚¹ç­‰å¾…çš„ç‰¹å®šè¡Œä¸ºã€‚
    
    *   `enabled`: å¯ç”¨æˆ–ç¦ç”¨åœ¨åˆ°è¾¾æ¯ä¸ªè·¯å¾„ç‚¹æ—¶ç­‰å¾…çš„åŠŸèƒ½ã€‚
        
    *   `plugin`: æŒ‡å®šå®ç°ç­‰å¾…åŠŸèƒ½çš„æ’ä»¶ç±»å‹ã€‚è¿™å…è®¸ç”¨æˆ·æ ¹æ®éœ€è¦é€‰æ‹©ä¸åŒçš„ç­‰å¾…ç­–ç•¥æˆ–è¡Œä¸ºã€‚
        
    *   `waypoint_pause_duration`: å®šä¹‰äº†åœ¨æ¯ä¸ªè·¯å¾„ç‚¹å¤„ç­‰å¾…çš„æŒç»­æ—¶é—´ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ã€‚è¿™å¯ä»¥ç”¨äºç¡®ä¿æœºå™¨äººåœ¨ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªè·¯å¾„ç‚¹ä¹‹å‰å·²ç»ç¨³å®šæˆ–å·²ç»å®Œæˆäº†æŸäº›æ“ä½œã€‚
        

  

7.  ### è·¯å¾„å¹³æ»‘èŠ‚ç‚¹è¯´æ˜
    

åœ¨Nav2æ¡†æ¶ä¸­`nav2_smoother`åŠŸèƒ½åŒ…ä¸‹çš„`smoother_server`èŠ‚ç‚¹é€šè¿‡åŠ è½½å’Œè¿è¡Œå„ç§å¹³æ»‘å™¨æ’ä»¶ï¼Œå¯¹è§„åˆ’å‡ºçš„è·¯å¾„è¿›è¡Œå¹³æ»‘å¤„ç†ï¼Œä½¿å¾—æœºå™¨äººèƒ½å¤Ÿæ›´æµç•…ã€è¿ç»­ä¸”å®‰å…¨åœ°ç§»åŠ¨ã€‚è¿™ä¸€åŠŸèƒ½å¯¹äºæé«˜æœºå™¨äººçš„å¯¼èˆªæ€§èƒ½å’Œå‡å°‘ç¡¬ä»¶ç£¨æŸå…·æœ‰é‡è¦æ„ä¹‰ã€‚

**1.è®¢é˜…çš„è¯é¢˜**

<!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
| è¯é¢˜ | æ¥å£ | æè¿° |
|:---|:---|:---|
| /global_costmap/costmap_raw | nav2_msgs/msg/Costmap | å…¨å±€ä»£ä»·åœ°å›¾çš„åŸå§‹æ•°æ®ï¼Œç”¨äºè·¯å¾„è§„åˆ’ |
| /global_costmap/published_footprint | geometry_msgs/msg/PolygonStamped | æœºå™¨äººåœ¨å…¨å±€ä»£ä»·åœ°å›¾ä¸­çš„è¶³è¿¹è¡¨ç¤º |

**2.å‘å¸ƒçš„è¯é¢˜**

<!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
| è¯é¢˜ | æ¥å£ | æè¿° |
|:---|:---|:---|
| /plan_smoothed | nav_msgs/msg/Path | ç»è¿‡å¹³æ»‘å¤„ç†åçš„å…¨å±€è·¯å¾„ |

**3.æä¾›çš„ActionæœåŠ¡å™¨**

<!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
| è¯é¢˜ | åŠ¨ä½œç±»å‹ | æè¿° |
|:---|:---|:---|
| /smooth_path | nav2_msgs/action/SmoothPath | æä¾›å¹³æ»‘è·¯å¾„çš„æœåŠ¡ï¼Œæ¥å—è·¯å¾„å¹³æ»‘çš„è¯·æ±‚ï¼Œå¹¶è¿”å›å¹³æ»‘åçš„è·¯å¾„ã€‚è¿™å…è®¸å®¢æˆ·ç«¯ï¼ˆå¦‚è¡Œä¸ºæ ‘ï¼‰å¼‚æ­¥åœ°è¯·æ±‚è·¯å¾„å¹³æ»‘ï¼Œå¹¶åœ¨å¹³æ»‘å®Œæˆåæ¥æ”¶ç»“æœã€‚ |

**4.å‚æ•°**

*   `/bond_disable_heartbeat_timeout`: æŒ‡ç¤ºæ˜¯å¦ç¦ç”¨Bondçš„å¿ƒè·³è¶…æ—¶åŠŸèƒ½ã€‚åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼ŒBondç”¨äºç®¡ç†èŠ‚ç‚¹é—´çš„è¿æ¥å’Œå¿ƒè·³ï¼Œæ­¤å‚æ•°ç”¨äºè°ƒæ•´å¿ƒè·³ç›¸å…³çš„è¡Œä¸ºã€‚
    
*   `costmap_topic`: ä»£ä»·åœ°å›¾æ•°æ®çš„ROSè¯é¢˜åç§°ï¼Œé€šå¸¸æ˜¯å…¨å±€ä»£ä»·åœ°å›¾çš„åŸå§‹æ•°æ®ã€‚
    
*   `footprint_topic`: æœºå™¨äººè¶³è¿¹ï¼ˆå³æœºå™¨äººåœ¨åœ°å›¾ä¸Šçš„å ç”¨åŒºåŸŸï¼‰çš„ROSè¯é¢˜åç§°ï¼Œç”¨äºåœ¨å…¨å±€ä»£ä»·åœ°å›¾ä¸­è¡¨ç¤ºæœºå™¨äººçš„ç‰©ç†å°ºå¯¸ã€‚
    
*   `robot_base_frame`: æŒ‡å®šæœºå™¨äººåŸºåº§çš„åæ ‡ç³»åç§°ï¼Œè¿™æ˜¯æœºå™¨äººå¯¼èˆªä¸­ç”¨äºå®šä½å’Œç§»åŠ¨çš„å‚è€ƒç‚¹ã€‚
    
*   `simple_smoother`:
    
    *   `do_refinement`: æŒ‡ç¤ºæ˜¯å¦å¯ç”¨è·¯å¾„çš„ç»†åŒ–ï¼ˆæˆ–è¿›ä¸€æ­¥ä¼˜åŒ–ï¼‰è¿‡ç¨‹ã€‚
        
    *   `max_its`: å¹³æ»‘è¿‡ç¨‹ä¸­å…è®¸çš„æœ€å¤§è¿­ä»£æ¬¡æ•°ï¼Œç”¨äºæ§åˆ¶å¹³æ»‘ç®—æ³•çš„æ”¶æ•›æ—¶é—´ã€‚
        
    *   `plugin`: å¹³æ»‘æ’ä»¶çš„ç±»å‹ï¼Œè¿™é‡Œæ˜¯`nav2_smoother::SimpleSmoother`ï¼Œè¡¨ç¤ºä½¿ç”¨ç®€å•çš„å¹³æ»‘ç®—æ³•ã€‚
        
    *   `tolerance`: å¹³æ»‘ç®—æ³•çš„æ”¶æ•›å®¹å·®ï¼Œå½“è·¯å¾„å˜åŒ–å°äºæ­¤å€¼æ—¶ï¼Œè®¤ä¸ºå¹³æ»‘è¿‡ç¨‹å·²å®Œæˆã€‚
        
    *   `w_data`: å¹³æ»‘è¿‡ç¨‹ä¸­æ•°æ®é¡¹ï¼ˆå¦‚éšœç¢ç‰©è·ç¦»ï¼‰çš„æƒé‡ã€‚
        
    *   `w_smooth`: å¹³æ»‘è¿‡ç¨‹ä¸­å¹³æ»‘é¡¹ï¼ˆå¦‚è·¯å¾„æ›²ç‡ï¼‰çš„æƒé‡ã€‚
        
*   `smoother_plugins`: å®šä¹‰çš„å¹³æ»‘æ’ä»¶åˆ—è¡¨ï¼Œè¿™é‡Œåˆ—å‡ºäº†`simple_smoother`ï¼Œè¡¨ç¤ºå°†ä½¿ç”¨æ­¤æ’ä»¶è¿›è¡Œè·¯å¾„å¹³æ»‘ã€‚
    
*   `transform_tolerance`: åæ ‡å˜æ¢çš„å®¹å·®ï¼Œç”¨äºå¤„ç†ä¸åŒåæ ‡ç³»ä¹‹é—´çš„è½¬æ¢æ—¶çš„ä¸ç¡®å®šæ€§ã€‚
    
*   `use_sim_time`: æŒ‡å®šæ˜¯å¦ä½¿ç”¨æ¨¡æ‹Ÿæ—¶é—´è€Œéå®é™…æ—¶é—´ã€‚åœ¨ä»¿çœŸç¯å¢ƒä¸­ï¼Œè¿™é€šå¸¸è®¾ç½®ä¸º`true`ï¼Œä»¥åŒ¹é…ä»¿çœŸå™¨çš„è™šæ‹Ÿæ—¶é—´ï¼›åœ¨çœŸå®ç¯å¢ƒä¸­ï¼Œåº”è®¾ç½®ä¸º`false`ä»¥ä½¿ç”¨ROSç³»ç»Ÿçš„å®é™…æ—¶é—´ã€‚
    

  

  

8.  ### é€Ÿåº¦å¹³æ»‘èŠ‚ç‚¹è¯´æ˜
    

Nav2æ¡†æ¶ä¸­çš„`nav2_velocity_smoother`åŒ…ä¸‹çš„`velocity_smoother`èŠ‚ç‚¹ä¸»è¦è´Ÿè´£å¹³æ»‘ç”±Nav2æ¡†æ¶å‘é€ç»™æœºå™¨äººæ§åˆ¶å™¨çš„é€Ÿåº¦æŒ‡ä»¤ã€‚å…¶æ ¸å¿ƒåŠŸèƒ½æ˜¯å®ç°é€Ÿåº¦å’ŒåŠ é€Ÿåº¦å¹³æ»‘ã€‚è¿™ä¸€åŠŸèƒ½å¯¹äºç¡®ä¿æœºå™¨äººåœ¨å¯¼èˆªè¿‡ç¨‹ä¸­çš„ç¨³å®šæ€§å’Œå®‰å…¨æ€§è‡³å…³é‡è¦ã€‚

**1.è®¢é˜…çš„è¯é¢˜**

<!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
| è¯é¢˜ | æ¥å£ | æè¿° |
|:---|:---|:---|
| /cmd_vel_nav | geometry_msgs/msg/Twist | æ¥æ”¶æ¥è‡ªå…¶ä»–èŠ‚ç‚¹çš„é€Ÿåº¦æ§åˆ¶æŒ‡ä»¤çš„è¯é¢˜ |

**2.å‘å¸ƒçš„è¯é¢˜**

<!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
| è¯é¢˜ | æ¥å£ | æè¿° |
|:---|:---|:---|
| /cmd_vel | geometry_msgs/msg/Twist | å‘å¸ƒç»è¿‡å¤„ç†æˆ–å¹³æ»‘åçš„é€Ÿåº¦æ§åˆ¶æŒ‡ä»¤çš„è¯é¢˜ |

**3.å‚æ•°**

*   `bond_disable_heartbeat_timeout`: æŒ‡ç¤ºæ˜¯å¦ç¦ç”¨èŠ‚ç‚¹é—´çš„å¿ƒè·³è¶…æ—¶æœºåˆ¶ã€‚å¦‚æœä¸º`true`ï¼Œåˆ™èŠ‚ç‚¹é—´çš„å¿ƒè·³æ£€æµ‹ä¸ä¼šå› è¶…æ—¶è€Œæ–­å¼€è¿æ¥ã€‚
    
*   `deadband_velocity`: å®šä¹‰åœ¨å“ªäº›é€Ÿåº¦åˆ†é‡ä¸Šåº”ç”¨æ­»åŒºå¹³æ»‘ï¼ˆå³å¿½ç•¥å°äºæ­¤é˜ˆå€¼çš„å¾®å°é€Ÿåº¦å˜åŒ–ï¼‰ã€‚è¿™é‡Œåˆ†åˆ«ä¸ºXè½´ã€Yè½´å’Œåèˆªè§’é€Ÿåº¦ï¼ˆthetaï¼‰è®¾ç½®äº†æ­»åŒºå€¼ã€‚
    
*   `feedback`: æŒ‡å®šé€Ÿåº¦å¹³æ»‘å™¨çš„åé¦ˆç±»å‹ã€‚`OPEN_LOOP`è¡¨ç¤ºå¼€ç¯æ§åˆ¶ï¼Œå³ä¸è€ƒè™‘æœºå™¨äººçš„å®é™…é€Ÿåº¦åé¦ˆè¿›è¡Œé€Ÿåº¦è°ƒæ•´ã€‚
    
*   `max_accel`: å®šä¹‰æœºå™¨äººåœ¨å„ä¸ªæ–¹å‘ä¸Šçš„æœ€å¤§åŠ é€Ÿåº¦é™åˆ¶ï¼ŒåŒ…æ‹¬Xè½´ã€Yè½´å’Œåèˆªè§’é€Ÿåº¦ï¼ˆthetaï¼‰ã€‚
    
*   `max_decel`: å®šä¹‰æœºå™¨äººåœ¨å„ä¸ªæ–¹å‘ä¸Šçš„æœ€å¤§å‡é€Ÿåº¦é™åˆ¶ï¼ŒåŒ…æ‹¬Xè½´ã€Yè½´å’Œåèˆªè§’é€Ÿåº¦ï¼ˆthetaï¼‰ã€‚æ³¨æ„ï¼Œå‡é€Ÿåº¦å€¼ä»¥è´Ÿæ•°è¡¨ç¤ºã€‚
    
*   `max_velocity`: å®šä¹‰æœºå™¨äººåœ¨å„ä¸ªæ–¹å‘ä¸Šçš„æœ€å¤§é€Ÿåº¦é™åˆ¶ï¼ŒåŒ…æ‹¬Xè½´ã€Yè½´å’Œåèˆªè§’é€Ÿåº¦ï¼ˆthetaï¼‰ã€‚
    
*   `min_velocity`: å®šä¹‰æœºå™¨äººåœ¨å„ä¸ªæ–¹å‘ä¸Šçš„æœ€å°é€Ÿåº¦é™åˆ¶ï¼ŒåŒ…æ‹¬Xè½´ã€Yè½´å’Œåèˆªè§’é€Ÿåº¦ï¼ˆthetaï¼‰ã€‚è¿™é€šå¸¸ç”¨äºé¿å…å‘é€è¿‡å°çš„é€Ÿåº¦æŒ‡ä»¤ç»™åº•å±‚æ§åˆ¶å™¨ã€‚
    
*   `odom_duration`: ä¸é‡Œç¨‹è®¡æ•°æ®ç›¸å…³çš„å‚æ•°ï¼Œä½†åœ¨æ­¤ä¸Šä¸‹æ–‡ä¸­å¯èƒ½ä¸ç›´æ¥ç”¨äº`velocity_smoother`èŠ‚ç‚¹ï¼Œå¯èƒ½æ˜¯é—ç•™æˆ–ä¸å…¶ä»–åŠŸèƒ½ç›¸å…³è”ã€‚
    
*   `odom_topic`: æŒ‡å®šé‡Œç¨‹è®¡æ•°æ®çš„ROSè¯é¢˜åç§°ï¼Œ`velocity_smoother`èŠ‚ç‚¹å°†è®¢é˜…æ­¤è¯é¢˜ä»¥è·å–æœºå™¨äººçš„è¿åŠ¨ä¿¡æ¯ã€‚
    
*   `scale_velocities`: æŒ‡ç¤ºæ˜¯å¦æ ¹æ®åŠ é€Ÿåº¦é™åˆ¶åŒæ¯”ä¾‹è°ƒæ•´é€Ÿåº¦çš„å…¶ä»–åˆ†é‡ã€‚å¦‚æœä¸º`false`ï¼Œåˆ™ä¸ä¼šè¿›è¡Œé€Ÿåº¦ç¼©æ”¾ã€‚
    
*   `smoothing_frequency`: å®šä¹‰é€Ÿåº¦å¹³æ»‘æ“ä½œçš„æ‰§è¡Œé¢‘ç‡ï¼ˆHzï¼‰ï¼Œå³æ¯ç§’è¿›è¡Œå¤šå°‘æ¬¡å¹³æ»‘è®¡ç®—ã€‚
    
*   `use_sim_time`: æŒ‡å®šæ˜¯å¦ä½¿ç”¨æ¨¡æ‹Ÿæ—¶é—´è€Œéå®é™…ç³»ç»Ÿæ—¶é—´ã€‚è¿™å¯¹äºä»¿çœŸç¯å¢ƒç‰¹åˆ«æœ‰ç”¨ï¼Œå¯ä»¥ç¡®ä¿æ—¶é—´çš„ä¸€è‡´æ€§å’Œå¯é¢„æµ‹æ€§ã€‚
    
*   `velocity_timeout`: å¦‚æœåœ¨æŒ‡å®šæ—¶é—´å†…æœªæ¥æ”¶åˆ°æ–°çš„é€Ÿåº¦æŒ‡ä»¤ï¼Œåˆ™`velocity_smoother`èŠ‚ç‚¹å°†åœæ­¢å‘å¸ƒé€Ÿåº¦æŒ‡ä»¤ï¼Œå¹¶å¯èƒ½å‘é€é›¶é€Ÿåº¦æŒ‡ä»¤ä»¥åœæ­¢æœºå™¨äººè¿åŠ¨ã€‚è¿™æ˜¯ä¸ºäº†é˜²æ­¢åœ¨å¤±å»é€Ÿåº¦æ§åˆ¶æ—¶æœºå™¨äººç»§ç»­ç§»åŠ¨ã€‚
    

  

9.  ### å¯¼èˆªåŠŸèƒ½é›†æˆ(é‡è¦)
    

**1.å‡†å¤‡å·¥ä½œ**

è¯·å…ˆè°ƒç”¨å¦‚ä¸‹æŒ‡ä»¤åœ¨å·¥ä½œç©ºé—´çš„srcç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåŠŸèƒ½åŒ…ï¼š

```Bash
ros2 pkg create mycar_navigation2 --dependencies navigation2 nav2_common
```

**2.ç¼–å†™launchæ–‡ä»¶ä¸å‚æ•°æ–‡ä»¶**

åœ¨åŠŸèƒ½åŒ…ä¸‹ï¼Œæ–°å»ºlaunchç›®å½•ã€paramsç›®å½•å’Œbtsç›®å½•ã€‚

launchç›®å½•ä¸‹æ–°å»º`nav2.launch.py`æ–‡ä»¶å¹¶è¾“å…¥å¦‚ä¸‹å†…å®¹ï¼š

```Python
import os

from ament_index_python.packages import get_package_share_directory
from launch import LaunchDescription
from launch_ros.actions import Node

def generate_launch_description():

    current_pkg = get_package_share_directory("mycar_navigation2")
    bt_params = os.path.join(get_package_share_directory("mycar_navigation2"),"params","bt.yaml")
    planner_params = os.path.join(get_package_share_directory("mycar_navigation2"),"params","planner.yaml")       
    controller_params = os.path.join(get_package_share_directory("mycar_navigation2"),"params","controller.yaml")       
    behavior_params = os.path.join(get_package_share_directory("mycar_navigation2"),"params","behavior.yaml")       
    waypoint_params = os.path.join(get_package_share_directory("mycar_navigation2"),"params","waypoint.yaml")       
    velocity_params = os.path.join(get_package_share_directory("mycar_navigation2"),"params","velocity.yaml")       
    smoother_params = os.path.join(get_package_share_directory("mycar_navigation2"),"params","smoother.yaml")       

    planner_server_node = Node(
        package='nav2_planner',
        executable='planner_server',
        name='planner_server',
        output='screen',
        parameters=[planner_params],
        )

    controller_server_node = Node(
        package='nav2_controller',
        executable='controller_server',
        output='screen',
        parameters=[controller_params],
        remappings=[('cmd_vel', 'cmd_vel_nav')]
    )

    behavior_server_node = Node(
        package='nav2_behaviors',
        executable='behavior_server',
        name='behavior_server',
        output='screen',
        parameters=[behavior_params]
    )

    waypoint_node = Node(
        package='nav2_waypoint_follower',
        executable='waypoint_follower',
        name='waypoint_follower',
        output='screen',
        parameters=[waypoint_params]
    )

    velocity_smoother_node = Node(
        package='nav2_velocity_smoother',
        executable='velocity_smoother',
        name='velocity_smoother',
        output='screen',
        respawn_delay=2.0,
        parameters=[velocity_params],
        remappings=
                [('cmd_vel', 'cmd_vel_nav'), ('cmd_vel_smoothed', 'cmd_vel')]
    )
    smoother_server_node = Node(
        package='nav2_smoother',
        executable='smoother_server',
        name='smoother_server',
        output='screen',
        parameters=[smoother_params],
    )
    bt_navigator_node = Node(
        package='nav2_bt_navigator',
        executable='bt_navigator',
        name='bt_navigator',
        output='screen',      
        parameters=[
            bt_params,
            {"default_nav_to_pose_bt_xml": os.path.join(current_pkg,"bts","bt_planner_controller_behavior.xml")},
            {"default_nav_through_poses_bt_xml": os.path.join(current_pkg,"bts","bt_planner_controller_behavior_poses.xml")}
            ],
        )

    lifecycle_manager_node = Node(
        package='nav2_lifecycle_manager',
        executable='lifecycle_manager',
        name='lifecycle_manager_navigation',
        output='screen',
        parameters=[{'use_sim_time': True},
                    {'autostart': True},
                    {'node_names': [
                        'bt_navigator',
                        'planner_server',
                        'controller_server',
                        'behavior_server',
                        'waypoint_follower',
                        'velocity_smoother',
                        'smoother_server'
                    ]}])

    return LaunchDescription([
        lifecycle_manager_node,
        bt_navigator_node,
        planner_server_node,
        controller_server_node,
        behavior_server_node,
        waypoint_node,
        velocity_smoother_node,
        smoother_server_node
    ])
```

è¯¥launchæ–‡ä»¶ä¸»è¦æ˜¯åŠ è½½äº†ç”Ÿå‘½å‘¨æœŸç®¡ç†å™¨ã€è¡Œä¸ºæ ‘ã€è§„åˆ’å™¨ã€æ§åˆ¶å™¨ã€æ¢å¤å™¨ã€èˆªç‚¹è·Ÿè¸ªã€è·¯å¾„å¹³æ»‘ä»¥åŠé€Ÿåº¦å¹³æ»‘ç­‰èŠ‚ç‚¹ã€‚å¹¶ä¸”é™¤äº†ç”Ÿå‘½å‘¨æœŸç®¡ç†å™¨èŠ‚ç‚¹å¤–ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½è¿˜ä¼šåŠ è½½ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œæ¥ä¸‹æ¥éœ€è¦ç¼–è¾‘è¿™äº›é…ç½®æ–‡ã€‚

**ï¼ˆ1ï¼‰bt\_navigatorç›¸å…³é…ç½®æ–‡ä»¶**

bt\_navigatorç›¸å…³é…ç½®æ–‡ä»¶æœ‰ä¸¤ä¸ªï¼Œåˆ†åˆ«æ˜¯æè¿°è¡Œä¸ºæ ‘çš„xmlæ–‡ä»¶ï¼Œä»¥åŠyamlæ ¼å¼çš„å‚æ•°æ–‡ä»¶ï¼Œå‰è€…å­˜å‚¨åœ¨btsç›®å½•ä¸‹ï¼Œåè€…å­˜å‚¨åœ¨paramsç›®å½•ä¸‹ã€‚

è¯·åœ¨btsç›®å½•ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªåä¸º`bt_planner_controller_behavior.xml`çš„æ–‡ä»¶å¹¶è¾“å…¥å¦‚ä¸‹å†…å®¹ï¼š

```XML
<!--
  This Behavior Tree replans the global path periodically at 1 Hz and it also has
  recovery actions specific to planning / control as well as general system issues.
  This will be continuous if a kinematically valid planner is selected.
-->
<root main_tree_to_execute="MainTree">
  <BehaviorTree ID="MainTree">
    <RecoveryNode number_of_retries="6" name="NavigateRecovery">
      <PipelineSequence name="NavigateWithReplanning">
        <RateController hz="1.0">
          <RecoveryNode number_of_retries="1" name="ComputePathToPose">
            <ComputePathToPose goal="{goal}" path="{path}" planner_id="GridBased"/>
            <ClearEntireCostmap name="ClearGlobalCostmap-Context" service_name="global_costmap/clear_entirely_global_costmap"/>
          </RecoveryNode>
        </RateController>
        <RecoveryNode number_of_retries="1" name="FollowPath">
          <FollowPath path="{path}" controller_id="FollowPath"/>
          <ClearEntireCostmap name="ClearLocalCostmap-Context" service_name="local_costmap/clear_entirely_local_costmap"/>
        </RecoveryNode>
      </PipelineSequence>
      <ReactiveFallback name="RecoveryFallback">
        <GoalUpdated/>
        <RoundRobin name="RecoveryActions">
          <Sequence name="ClearingActions">
            <ClearEntireCostmap name="ClearLocalCostmap-Subtree" service_name="local_costmap/clear_entirely_local_costmap"/>
            <ClearEntireCostmap name="ClearGlobalCostmap-Subtree" service_name="global_costmap/clear_entirely_global_costmap"/>
          </Sequence>
          <Spin spin_dist="1.57"/>
          <Wait wait_duration="5"/>
          <BackUp backup_dist="0.30" backup_speed="0.05"/>
        </RoundRobin>
      </ReactiveFallback>
    </RecoveryNode>
  </BehaviorTree>
</root>
```

ç»§ç»­åœ¨btsç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªåä¸º`bt_planner_controller_behavior_poses.xml`çš„æ–‡ä»¶ï¼Œå¹¶è¾“å…¥å¦‚ä¸‹å†…å®¹ï¼š

```XML
<!--
  This Behavior Tree replans the global path periodically at 1 Hz through an array of poses continuously
   and it also has recovery actions specific to planning / control as well as general system issues.
-->
<root main_tree_to_execute="MainTree">
  <BehaviorTree ID="MainTree">
    <RecoveryNode number_of_retries="6" name="NavigateRecovery">
      <PipelineSequence name="NavigateWithReplanning">
        <RateController hz="0.333">
          <RecoveryNode number_of_retries="1" name="ComputePathThroughPoses">
            <ReactiveSequence>
              <RemovePassedGoals input_goals="{goals}" output_goals="{goals}" radius="0.7"/>
              <ComputePathThroughPoses goals="{goals}" path="{path}" planner_id="GridBased"/>
            </ReactiveSequence>
            <ClearEntireCostmap name="ClearGlobalCostmap-Context" service_name="global_costmap/clear_entirely_global_costmap"/>
          </RecoveryNode>
        </RateController>
        <RecoveryNode number_of_retries="1" name="FollowPath">
          <FollowPath path="{path}" controller_id="FollowPath"/>
          <ClearEntireCostmap name="ClearLocalCostmap-Context" service_name="local_costmap/clear_entirely_local_costmap"/>
        </RecoveryNode>
      </PipelineSequence>
      <ReactiveFallback name="RecoveryFallback">
        <GoalUpdated/>
        <RoundRobin name="RecoveryActions">
          <Sequence name="ClearingActions">
            <ClearEntireCostmap name="ClearLocalCostmap-Subtree" service_name="local_costmap/clear_entirely_local_costmap"/>
            <ClearEntireCostmap name="ClearGlobalCostmap-Subtree" service_name="global_costmap/clear_entirely_global_costmap"/>
          </Sequence>
          <Spin spin_dist="1.57"/>
          <Wait wait_duration="5"/>
          <BackUp backup_dist="0.30" backup_speed="0.05"/>
        </RoundRobin>
      </ReactiveFallback>
    </RecoveryNode>
  </BehaviorTree>
</root>
```

åœ¨paramsç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªåä¸º`bt.yaml`çš„æ–‡ä»¶ï¼Œå¹¶è¾“å…¥å¦‚ä¸‹å†…å®¹ï¼š

```YAML
/**:
  ros__parameters:
    use_sim_time: True
    global_frame: map
    robot_base_frame: base_link
    odom_topic: /odom
    default_bt_xml_filename: "navigate_w_replanning_and_recovery.xml"
    bt_loop_duration: 10
    default_server_timeout: 20
    enable_groot_monitoring: True
    groot_zmq_publisher_port: 1666
    groot_zmq_server_port: 1667
    plugin_lib_names:
    - nav2_compute_path_to_pose_action_bt_node
    - nav2_compute_path_through_poses_action_bt_node
    - nav2_follow_path_action_bt_node
    - nav2_back_up_action_bt_node
    - nav2_spin_action_bt_node
    - nav2_wait_action_bt_node
    - nav2_clear_costmap_service_bt_node
    - nav2_is_stuck_condition_bt_node
    - nav2_goal_reached_condition_bt_node
    - nav2_goal_updated_condition_bt_node
    - nav2_initial_pose_received_condition_bt_node
    - nav2_reinitialize_global_localization_service_bt_node
    - nav2_rate_controller_bt_node
    - nav2_distance_controller_bt_node
    - nav2_speed_controller_bt_node
    - nav2_truncate_path_action_bt_node
    - nav2_goal_updater_node_bt_node
    - nav2_recovery_node_bt_node
    - nav2_pipeline_sequence_bt_node
    - nav2_round_robin_node_bt_node
    - nav2_transform_available_condition_bt_node
    - nav2_time_expired_condition_bt_node
    - nav2_distance_traveled_condition_bt_node
    - nav2_single_trigger_bt_node
    - nav2_is_battery_low_condition_bt_node
    - nav2_navigate_through_poses_action_bt_node
    - nav2_navigate_to_pose_action_bt_node
    - nav2_remove_passed_goals_action_bt_node
    - nav2_planner_selector_bt_node
    - nav2_controller_selector_bt_node
    - nav2_goal_checker_selector_bt_node
```

**ï¼ˆ2ï¼‰planner\_serverç›¸å…³é…ç½®æ–‡ä»¶**

åœ¨paramsç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªåä¸º`planner.yaml`çš„æ–‡ä»¶ï¼Œå¹¶è¾“å…¥å¦‚ä¸‹å†…å®¹ï¼š

```YAML
/**:
  ros__parameters:
    expected_planner_frequency: 20.0
    use_sim_time: True
    planner_plugins: ["GridBased"]
    GridBased:
      plugin: "nav2_navfn_planner/NavfnPlanner"
      tolerance: 0.5
      use_astar: false
      allow_unknown: true

/**:
  global_costmap:
    ros__parameters:
      update_frequency: 1.0
      publish_frequency: 1.0
      global_frame: map
      robot_base_frame: base_link
      use_sim_time: True
      # robot_radius: 0.2
      footprint: "[[0.19, 0.13], [0.19, -0.13], [-0.19, -0.13], [-0.19, 0.13]]"
      resolution: 0.05
      track_unknown_space: true
      plugins: ["static_layer", "obstacle_layer", "voxel_layer", "inflation_layer"]
      obstacle_layer:
        plugin: "nav2_costmap_2d::ObstacleLayer"
        enabled: True
        observation_sources: scan
        scan:
          topic: /scan
          max_obstacle_height: 2.0
          clearing: True
          marking: True
          data_type: "LaserScan"
          raytrace_max_range: 3.0
          raytrace_min_range: 0.0
          obstacle_max_range: 2.5
          obstacle_min_range: 0.0
      voxel_layer:
        plugin: "nav2_costmap_2d::VoxelLayer"
        enabled: True
        publish_voxel_map: True
        origin_z: 0.0
        z_resolution: 0.05
        z_voxels: 16
        max_obstacle_height: 2.0
        mark_threshold: 0
        observation_sources: scan
        scan:
          topic: /scan
          max_obstacle_height: 2.0
          clearing: True
          marking: True
          data_type: "LaserScan"
          raytrace_max_range: 3.0
          raytrace_min_range: 0.0
          obstacle_max_range: 2.5
          obstacle_min_range: 0.0
      static_layer:
        plugin: "nav2_costmap_2d::StaticLayer"
        map_subscribe_transient_local: True
      inflation_layer:
        plugin: "nav2_costmap_2d::InflationLayer"
        cost_scaling_factor: 4.0
        inflation_radius: 0.55
      always_send_full_costmap: False
```

**ï¼ˆ3ï¼‰controller\_serverç›¸å…³é…ç½®æ–‡ä»¶**

åœ¨paramsç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªåä¸º`controller.yaml`çš„æ–‡ä»¶ï¼Œå¹¶è¾“å…¥å¦‚ä¸‹å†…å®¹ï¼š

```YAML
/**:
  ros__parameters:
    use_sim_time: True
    controller_frequency: 10.0
    min_x_velocity_threshold: 0.001
    min_y_velocity_threshold: 0.5
    min_theta_velocity_threshold: 0.001
    # failure_tolerance: 0.3
    failure_tolerance: 1.0
    progress_checker_plugin: "progress_checker"
    goal_checker_plugins: ["general_goal_checker"] 
    controller_plugins: ["FollowPath"]

    # Progress checker parameters
    progress_checker:
      plugin: "nav2_controller::SimpleProgressChecker"
      required_movement_radius: 0.5
      movement_time_allowance: 10.0

    general_goal_checker:
      stateful: True
      plugin: "nav2_controller::SimpleGoalChecker"
      xy_goal_tolerance: 0.25
      yaw_goal_tolerance: 0.25

    # DWB parameters
    FollowPath:
      plugin: "dwb_core::DWBLocalPlanner"
      debug_trajectory_details: True
      min_vel_x: 0.0
      min_vel_y: 0.0
      # max_vel_x: 0.15
      max_vel_x: 0.2
      max_vel_y: 0.0
      # max_vel_theta: 1.0
      max_vel_theta: 1.0
      min_speed_xy: 0.0
      max_speed_xy: 0.2
      min_speed_theta: 0.0
      # Add high threshold velocity for turtlebot 3 issue.
      # https://github.com/ROBOTIS-GIT/turtlebot3_simulations/issues/75
      acc_lim_x: 1.0
      acc_lim_y: 0.0
      acc_lim_theta: 3.2
      decel_lim_x: -1.0
      decel_lim_y: 0.0
      decel_lim_theta: -3.2
      # vx_samples: 20
      vx_samples: 20
      vy_samples: 5
      vtheta_samples: 20
      sim_time: 1.7
      linear_granularity: 0.05
      angular_granularity: 0.025
      # transform_tolerance: 0.2
      transform_tolerance: 1.0
      xy_goal_tolerance: 0.15
      trans_stopped_velocity: 0.25
      short_circuit_trajectory_evaluation: True
      stateful: True
      critics: ["RotateToGoal", "Oscillation", "BaseObstacle", "GoalAlign", "PathAlign", "PathDist", "GoalDist"]
      BaseObstacle.scale: 0.02
      PathAlign.scale: 32.0
      PathAlign.forward_point_distance: 0.1
      GoalAlign.scale: 24.0
      GoalAlign.forward_point_distance: 0.1
      PathDist.scale: 32.0
      GoalDist.scale: 24.0
      RotateToGoal.scale: 32.0
      RotateToGoal.slowing_factor: 5.0
      RotateToGoal.lookahead_time: -1.0
/**:
  local_costmap:
    ros__parameters:
      update_frequency: 5.0
      publish_frequency: 2.0
      global_frame: odom
      robot_base_frame: base_link
      use_sim_time: True
      rolling_window: True
      width: 2
      height: 2
      resolution: 0.05
      # robot_radius: 0.20
      footprint: "[[0.19, 0.13], [0.19, -0.13], [-0.19, -0.13], [-0.19, 0.13]]"
      plugins: ["obstacle_layer", "voxel_layer", "inflation_layer"]
      inflation_layer:
        plugin: "nav2_costmap_2d::InflationLayer"
        inflation_radius: 0.5
        cost_scaling_factor: 4.0
      obstacle_layer:
        plugin: "nav2_costmap_2d::ObstacleLayer"
        enabled: True
        observation_sources: scan
        scan:
          topic: /scan
          max_obstacle_height: 2.0
          clearing: True
          marking: True
          data_type: "LaserScan"
      voxel_layer:
        plugin: "nav2_costmap_2d::VoxelLayer"
        enabled: True
        publish_voxel_map: True
        origin_z: 0.0
        z_resolution: 0.05
        z_voxels: 16
        max_obstacle_height: 2.0
        mark_threshold: 0
        observation_sources: scan
        scan:
          topic: /scan
          max_obstacle_height: 2.0
          clearing: True
          marking: True
          data_type: "LaserScan"
          raytrace_max_range: 3.0
          raytrace_min_range: 0.0
          obstacle_max_range: 2.5
          obstacle_min_range: 0.0
      static_layer:
        map_subscribe_transient_local: True
      always_send_full_costmap: True
```

Footprint

*   å°†æ¯«ç±³è½¬æ¢ä¸ºç±³ï¼šé•¿0.96mï¼Œå®½0.45m
    
*   ä»¥æœºå™¨äººä¸­å¿ƒï¼ˆ`base_link`åæ ‡ç³»åŸç‚¹ï¼‰ä¸ºåŸºå‡†ï¼Œè®¡ç®—çŸ©å½¢é¡¶ç‚¹åæ ‡ï¼š
    

*è¯´æ˜*ï¼šé¡¶ç‚¹æŒ‰é¡ºæ—¶é’ˆæˆ–é€†æ—¶é’ˆé¡ºåºæ’åˆ—ï¼Œè¦†ç›–æœºå™¨äººé•¿å®½è¾¹ç•Œã€‚ï¼ˆå³æ‰‹åæ ‡ç³»ï¼‰

ä¾‹å¦‚é•¿960å®½450é•¿400

```C++
footprint: [[0.48, 0.225], [0.48, -0.225], [-0.48, -0.225], [-0.48, 0.225]]
```

  

**ï¼ˆ4ï¼‰behavior\_serverç›¸å…³é…ç½®æ–‡ä»¶**

åœ¨paramsç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªåä¸º`behavior.yaml`çš„æ–‡ä»¶ï¼Œå¹¶è¾“å…¥å¦‚ä¸‹å†…å®¹ï¼š

```YAML
/**:
  ros__parameters:
    costmap_topic: local_costmap/costmap_raw
    footprint_topic: local_costmap/published_footprint
    cycle_frequency: 5.0
    behavior_plugins: ["spin", "backup", "drive_on_heading", "assisted_teleop", "wait"]
    spin:
      plugin: "nav2_behaviors/Spin"
    backup:
      plugin: "nav2_behaviors/BackUp"
    drive_on_heading:
      plugin: "nav2_behaviors/DriveOnHeading"
    wait:
      plugin: "nav2_behaviors/Wait"
    assisted_teleop:
      plugin: "nav2_behaviors/AssistedTeleop"
    global_frame: odom
    robot_base_frame: base_link
    transform_tolerance: 0.1
    use_sim_time: True
    simulate_ahead_time: 2.0
    max_rotational_vel: 1.0
    min_rotational_vel: 0.4
    rotational_acc_lim: 3.2
```

**ï¼ˆ5ï¼‰waypoint\_followerç›¸å…³é…ç½®æ–‡ä»¶**

åœ¨paramsç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªåä¸º`waypoint.yaml`çš„æ–‡ä»¶ï¼Œå¹¶è¾“å…¥å¦‚ä¸‹å†…å®¹ï¼š

```YAML
/**:
  ros__parameters:
    use_sim_time: True
    loop_rate: 20
    stop_on_failure: false
    waypoint_task_executor_plugin: "wait_at_waypoint"
    wait_at_waypoint:
      plugin: "nav2_waypoint_follower::WaitAtWaypoint"
      enabled: True
      waypoint_pause_duration: 5000
```

**ï¼ˆ6ï¼‰velocity\_smootherç›¸å…³é…ç½®æ–‡ä»¶**

åœ¨paramsç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªåä¸º`velocity.yaml`çš„æ–‡ä»¶ï¼Œå¹¶è¾“å…¥å¦‚ä¸‹å†…å®¹ï¼š

```YAML
/**:
  ros__parameters:
    use_sim_time: True
    smoothing_frequency: 20.0
    scale_velocities: False
    feedback: "OPEN_LOOP"
    max_velocity: [0.1, 0.0, 1.0]
    min_velocity: [-0.1, 0.0, -1.0]
    max_accel: [2.5, 0.0, 3.2]
    max_decel: [-2.5, 0.0, -3.2]
    odom_topic: "odom"
    odom_duration: 0.1
    deadband_velocity: [0.0, 0.0, 0.0]
    velocity_timeout: 1.0
```

**ï¼ˆ7ï¼‰smoother\_serverç›¸å…³é…ç½®æ–‡ä»¶**

åœ¨paramsç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªåä¸º`smootherr.yaml`çš„æ–‡ä»¶ï¼Œå¹¶è¾“å…¥å¦‚ä¸‹å†…å®¹ï¼š

```YAML
/**:
  ros__parameters:
    costmap_topic: global_costmap/costmap_raw
    footprint_topic: global_costmap/published_footprint
    robot_base_frame: base_link
    transform_timeout: 0.1
    smoother_plugins: ["simple_smoother"]
    simple_smoother:
      plugin: "nav2_smoother::SimpleSmoother"
      tolerance: 1.0e-10
      do_refinement: True
```

**3.launché›†æˆ**

å¯¼èˆªå®ç°æ—¶ï¼Œéœ€è¦ä¾èµ–äºåœ°å›¾ä¸å®šä½åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ªlaunchæ–‡ä»¶ä¸­é›†æˆä¹‹å‰çš„å®šä½launchä»¥åŠå½“å‰ç¼–å†™çš„å¯¼èˆªæ ¸å¿ƒæ¨¡å—çš„launchï¼Œä»¥ç®€åŒ–å¯¼èˆªåŠŸèƒ½çš„å¯åŠ¨ï¼Œåœ¨launchç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªåä¸º`bringup.launch.py`çš„launchæ–‡ä»¶ï¼Œå¹¶è¾“å…¥å¦‚ä¸‹å†…å®¹ï¼š

```Python
import os

from ament_index_python.packages import get_package_share_directory

from launch import LaunchDescription
from launch.actions import IncludeLaunchDescription
from launch.launch_description_sources import PythonLaunchDescriptionSource

def generate_launch_description():

    amcl_pkg = get_package_share_directory("mycar_localization")
    nav2_pkg = get_package_share_directory("mycar_navigation2")

    amcl_launch = IncludeLaunchDescription(
        PythonLaunchDescriptionSource(os.path.join(amcl_pkg,'launch',
                                                    'mycar_loca.launch.py'))
        )

    nav2_launch = IncludeLaunchDescription(
        PythonLaunchDescriptionSource(os.path.join(nav2_pkg,'launch', 
                                                    'nav2.launch.py'))
        )

    ld = LaunchDescription()
    ld.add_action(amcl_launch)
    ld.add_action(nav2_launch)
    return ld
```

**4.ç¼–è¾‘é…ç½®æ–‡ä»¶**

æ‰“å¼€`CMakeLists.txt` å¹¶è¾“å…¥å¦‚ä¸‹å†…å®¹ï¼š

```CMake
install(DIRECTORY launch params bts
  DESTINATION share/${PROJECT_NAME}
)
```

**5.ç¼–è¯‘**

ç»ˆç«¯ä¸­è¿›å…¥å½“å‰å·¥ä½œç©ºé—´ï¼Œç¼–è¯‘åŠŸèƒ½åŒ…ï¼š

```Bash
colcon build --packages-select mycar_navigation2
```

**6.æ‰§è¡Œ**

ï¼ˆ1ï¼‰è¯·å…ˆè°ƒç”¨å¦‚ä¸‹æŒ‡ä»¤å¯åŠ¨ä»¿çœŸç¯å¢ƒï¼š

```Bash
. install/setup.bash
ros2 launch stage_ros2 my_house.launch.py
```

ï¼ˆ2ï¼‰ç„¶ååœ¨ç»ˆç«¯ä¸‹è¿›å…¥å½“å‰å·¥ä½œç©ºé—´ï¼Œè¾“å…¥å¦‚ä¸‹æŒ‡ä»¤å¯åŠ¨å¯¼èˆªåŠŸèƒ½ï¼š

```Bash
. install/setup.bash
ros2 launch mycar_navigation2 bringup.launch.py
```

ï¼ˆ3ï¼‰å¯åŠ¨rviz2ï¼ŒåŠ è½½`/opt/ros/humble/share/nav2_bringup/rviz`ä¸‹çš„`nav2_default_view.rviz`æ–‡ä»¶ï¼Œä¸ºæœºå™¨äººè®¾ç½®åˆå§‹ä½å§¿åï¼Œå†é€šè¿‡èœå•æ çš„`Nav2 Goal`è®¾ç½®ç›®æ ‡ç‚¹ï¼Œæœºå™¨äººå°±å¯ä»¥è‡ªåŠ¨å¯¼èˆªè‡³ç›®æ ‡ç‚¹äº†ã€‚

```Bash
rviz2 -d /opt/ros/humble/share/nav2_bringup/rviz/nav2_default_view.rviz
```

*   `rviz2`ï¼šå¯åŠ¨ `rviz2` å·¥å…·ã€‚
    
*   `-d`ï¼šæŒ‡å®šè¦åŠ è½½çš„ `.rviz` é…ç½®æ–‡ä»¶ã€‚
    
*   `/opt/ros/humble/share/nav2_bringup/rviz/nav2_default_view.rviz`ï¼š`.rviz` é…ç½®æ–‡ä»¶çš„è·¯å¾„ã€‚
    

è¿è¡Œè¯¥å‘½ä»¤åï¼Œ`rviz2` å°†å¯åŠ¨å¹¶åŠ è½½ `nav2_default_view.rviz` é…ç½®æ–‡ä»¶ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzM0ODU3OTViMzdiMmEwN2Q3YzIwN2Y4YmYwM2ZiZDFfcUtsZ1lnd1p4RzMyWFpIckVFaENyTUJKeGJkakx0UzJfVG9rZW46RHR1bmJoSURBbzNSSWp4R09UemNNQmNIbnBoXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGNkZWM3NTU4MjdmOTMxYWRmMTQ4MWFmOWJlM2I4NjNfZnBVdjRFWFlmR1BDMXFra0ZXZTVlR2sxU2hPTjNENFdfVG9rZW46T0NRWGJjc0dQb3ZWemt4TWZsUWMxQjZtblBkXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

å¦‚ä¸Šå›¾ï¼Œå·¦å›¾æ˜¯é€‰æ‹©åˆå§‹ä½ç½®ï¼Œå³å›¾æ˜¯é€‰æ‹©ç›®æ ‡ä½ç½®ã€‚

ä¸Šå›¾ä¸­ï¼Œæ¯ä¸ªéšœç¢ç‰©å’Œå¢™é™„è¿‘çš„å…‰åœˆæ˜¯å±é™©ç¨‹åº¦ï¼Œé¢œè‰²è¶Šçº¢è¡¨ç¤ºæœºå™¨äººç»è¿‡æ­¤åœ°è¶Šå±é™©ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDFjMGExZjkwMDI4NDcxYTA3OTVlMTEwN2ZkYWE1MjVfZWhKQmpjcWw2MkZxdlpYM3RnSmtPM2R1ak8xMDlsVzRfVG9rZW46RE44UGJySVdKb01YMzJ4d29RMmM3a2pvbjRnXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTExMDUwMzE2ZmExY2MyNjNiMDZhN2M3M2U3ZTVjZmJfMGZBVVBGckxZUmpFSDV6eVRETUVicjB0V3FqclJRMzZfVG9rZW46VGpGTWJOV1dLb3RlYXN4SHNpdWMzNmVobktoXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

  

  

10.  ### è‡ªä¸»æ¢ç´¢SLAM
    

å¯¼èˆªéœ€è¦ä¾èµ–äºåœ°å›¾ä¸å®šä½ï¼Œä¾‹å¦‚åœ¨ä¸Šä¸€èŠ‚ **å¯¼èˆªåŠŸèƒ½é›†æˆ** ä¸­ï¼Œå¯¼èˆªå®ç°æ—¶å°±æ˜¯ä»¥launchæ–‡ä»¶çš„æ–¹å¼é›†æˆäº† **å®šä½AMCL** ä¸€èŠ‚ä¸­çš„å®šä½åŠŸèƒ½ï¼Œè€Œæœºå™¨äººSLAMæ—¶ï¼Œä¹Ÿæ˜¯å‘å¸ƒåœ°å›¾æ•°æ®ä¸å®šä½ä¿¡æ¯çš„ï¼Œæ‰€ä»¥å¯¼èˆªæ—¶ä¹Ÿå¯ä»¥ä¸å€ŸåŠ©äºamclè€Œæ˜¯ç›´æ¥ä¸SLAMç»“åˆï¼Œè¾¾åˆ°è‡ªä¸»æ¢ç´¢çš„SLAMæ•ˆæœã€‚

**1.ç¼–å†™launchæ–‡ä»¶**

åœ¨åŠŸèƒ½åŒ…mycar\_navigation2çš„launchç›®å½•ä¸‹æ–°å»ºåä¸º`auto_slam.launch.py`çš„launchæ–‡ä»¶ï¼Œå¹¶è¾“å…¥å¦‚ä¸‹å†…å®¹ï¼š

```Python
import os

from ament_index_python.packages import get_package_share_directory

from launch import LaunchDescription
from launch.actions import IncludeLaunchDescription
from launch.launch_description_sources import PythonLaunchDescriptionSource

def generate_launch_description():

    slam_pkg = get_package_share_directory("mycar_slam_slam_toolbox")
    nav2_pkg = get_package_share_directory("mycar_navigation2")

    slam_launch = IncludeLaunchDescription(
        PythonLaunchDescriptionSource(os.path.join(slam_pkg,'launch',
                                                    'online_sync_launch.py'))
        )

    # slam_launch = IncludeLaunchDescription(
    #     PythonLaunchDescriptionSource(os.path.join(slam_pkg,'launch',
    #                                                 'online_async_launch.py'))
    #     )

    nav2_launch = IncludeLaunchDescription(
        PythonLaunchDescriptionSource(os.path.join(nav2_pkg,'launch', 
                                                    'nav2.launch.py'))
        )

    ld = LaunchDescription()
    ld.add_action(slam_launch)
    ld.add_action(nav2_launch)
    return ld
```

**2.ç¼–è¯‘**

ç»ˆç«¯ä¸­è¿›å…¥å½“å‰å·¥ä½œç©ºé—´ï¼Œç¼–è¯‘åŠŸèƒ½åŒ…ï¼š

```Bash
colcon build --packages-select mycar_navigation2
```

**3.æ‰§è¡Œ**

ï¼ˆ1ï¼‰è¯·å…ˆè°ƒç”¨å¦‚ä¸‹æŒ‡ä»¤å¯åŠ¨ä»¿çœŸç¯å¢ƒï¼š

```Bash
. install/setup.bash
ros2 launch stage_ros2 my_house.launch.py
```

ï¼ˆ2ï¼‰ç„¶ååœ¨ç»ˆç«¯ä¸‹è¿›å…¥å½“å‰å·¥ä½œç©ºé—´ï¼Œè¾“å…¥å¦‚ä¸‹æŒ‡ä»¤å¯åŠ¨è‡ªä¸»SLAMåŠŸèƒ½ï¼š

```Bash
. install/setup.bash
ros2 launch mycar_navigation2 auto_slam.launch.py
```

ï¼ˆ3ï¼‰å¯åŠ¨rviz2ï¼ŒåŠ è½½`/opt/ros/humble/share/nav2_bringup/rviz`ä¸‹çš„`nav2_default_view.rviz`æ–‡ä»¶ï¼Œå†é€šè¿‡èœå•æ çš„`Nav2 Goal`è®¾ç½®ç›®æ ‡ç‚¹ï¼Œæœºå™¨äººå°±å¯ä»¥è‡ªåŠ¨å¯¼èˆªè‡³ç›®æ ‡ç‚¹ï¼Œå¹¶ä¸”å¯¼èˆªä¸­è¿˜ä¼šå®ç°å»ºå›¾çš„åŠŸèƒ½ã€‚

```Bash
rviz2 -d /opt/ros/humble/share/nav2_bringup/rviz/nav2_default_view.rviz
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTFkOWNhODMxOTgwNmM5OTY1ZjY4MDg3ZmNiZWUyMGJfWWoyNGlPSGVZTWVBU1VFbW1ES0dXVEhxeWE1VUJ6YkhfVG9rZW46VERyZ2JNM0hTb0tHVW14UkpYZ2NKYVBabm1oXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWE2MTFjNWJmNTYzNDdhZGE3Y2UxNDIzM2Y1NjRlYmJfdGNTWTI1cTg3MDUyN1g3OTVzdnZhc2htcEh6NDhTbDVfVG9rZW46S0xodmJsSUcyb09FUmZ4UGFMc2NzZFM1bm1oXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

  

6.  ## å¤šè½¦ç¼–é˜Ÿ
    

å¤šè½¦ç¼–é˜ŸæŠ€æœ¯é€šè¿‡å…ˆè¿›çš„ä¼ æ„Ÿå™¨ã€å®æ—¶æ•°æ®åˆ†æå’Œé«˜åº¦æ™ºèƒ½åŒ–çš„æ§åˆ¶ç³»ç»Ÿï¼Œä½¿å¾—ä¸€ç»„è½¦è¾†èƒ½å¤Ÿåœ¨æ²¡æœ‰äººå·¥å¹²é¢„çš„æƒ…å†µä¸‹å®ç°ååŒè¿è¡Œï¼Œä½œä¸ºä¸€ç§å…ˆè¿›çš„æ™ºèƒ½äº¤é€šç³»ç»Ÿåº”ç”¨ï¼Œå·²ç»åœ¨å¤šä¸ªé¢†åŸŸå±•ç°å‡ºå…¶å·¨å¤§çš„æ½œåŠ›å’Œå¹¿æ³›çš„åº”ç”¨åœºæ™¯ã€‚æ¯”å¦‚ï¼š

> æ—¶é—´ä¼˜åŒ–ï¼šå¤šè½¦ç¼–é˜ŸæŠ€æœ¯æ¶ˆé™¤äº†äººä¸ºæ“ä½œä¸­çš„è¯¯å·®å’Œå»¶è¯¯ï¼Œé™ä½äº†äººåŠ›èµ„æºæˆæœ¬å’Œè¿è¥é£é™©ã€‚
> 
> ç©ºé—´ä¼˜åŒ–ï¼šå¤šè½¦ç¼–é˜ŸæŠ€æœ¯å¯ä»¥å‡å°‘è½¦è¾†é—´çš„ç©ºéš™ï¼Œæœ€å¤§åŒ–é“è·¯åˆ©ç”¨ç‡ã€‚
> 
> æ€§èƒ½ä¼˜åŒ–ï¼šå¯†é›†ç¼–é˜Ÿè¡Œé©¶å‡å°‘äº†ç©ºæ°”åŠ¨åŠ›å­¦é˜»åŠ›ï¼Œé™ä½äº†èƒ½è€—å’Œç‡ƒæ–™æ¶ˆè€—ã€‚

æ€»ä¹‹ï¼Œå¤šè½¦ç¼–é˜ŸæŠ€æœ¯åœ¨æœºå™¨äººé¢†åŸŸæœ‰ç€ç‹¬ç‰¹çš„ä½œç”¨å’Œä»·å€¼ã€‚æœ¬èŠ‚å°†ä»‹ç»å¦‚ä½•åœ¨ROS2ä¸­å®ç°å¤šè½¦ç¼–é˜Ÿã€‚

  

  

  

13.  # ROS2 Serial
    

1.  ## ROS1ä¸²å£åº“1.1
    

è¿™æ˜¯ROS1çš„åº“ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥ä»ç¬¬ä¸‰æ–¹æºç ç¼–è¯‘è¿™ä¸ªåº“ï¼Œç”¨äºROS2.

http://wjwwood.io/serial/doc/1.1.0/index.html

  

2.  ## ROS2ä¸²å£åº“1.2
    

é¡¾åæ€ä¹‰ï¼Œæ˜¯ä¸€ä¸ªä¸²å£åŒ…ï¼Œ

è¯¥åº“é€‚ç”¨äºROS Humbleå’ŒROS Jazzyç‰ˆæœ¬ã€‚

å®˜æ–¹è¯¦è§£:

https://docs.ros.org/en/humble/p/serial\_driver/generated/index.html#

https://index.ros.org/p/serial\_driver/

ä¸‹é¢æ˜¯æ ¹æ®å®˜æ–¹æ–‡æ¡£æ‰‹æ“çš„æ•™ç¨‹ï¼ˆæˆªè‡³æ•™ç¨‹å‡ºä¹‹å‰ï¼Œè¿˜æ²¡æœ‰ä»»ä½•ä¸€ä¸ªåƒæ ·çš„æ•™ç¨‹ï¼‰

  

1.  ### SerialDriveråº“ç‰¹ç‚¹
    

è¯¥åº“ä¸»è¦åŸºäºBoost.Asioåº“ï¼Œæ‰€ä»¥è¯´åŸç†å°±æ˜¯Boost.Asioåº“çš„ç‰¹ç‚¹ï¼š

**äº‹ä»¶é©±åŠ¨** Boost.Asio ä½¿ç”¨æ“ä½œç³»ç»Ÿæä¾›çš„åº•å±‚ I/O å¤ç”¨æœºåˆ¶ï¼ˆå¦‚ Linux çš„ `epoll`ã€Windows çš„ I/O Completion Portsï¼‰æ¥ç›‘æ§æ–‡ä»¶æè¿°ç¬¦ï¼ˆå¦‚ä¸²å£ã€å¥—æ¥å­—ç­‰ï¼‰æ˜¯å¦æœ‰å¯ç”¨çš„æ•°æ®ã€‚å½“æ•°æ®åˆ°è¾¾æ—¶ï¼Œè§¦å‘ç›¸åº”çš„äº‹ä»¶ã€‚

**å›è°ƒæœºåˆ¶** ç”¨æˆ·è°ƒç”¨å¼‚æ­¥æ–¹æ³•ï¼ˆå¦‚ `async_read` æˆ– `async_receive`ï¼‰æ—¶ï¼Œä¼ å…¥ä¸€ä¸ªå›è°ƒå‡½æ•°ã€‚å½“æŒ‡å®šçš„äº‹ä»¶ï¼ˆå¦‚æ•°æ®æ¥æ”¶å®Œæˆï¼‰å‘ç”Ÿåï¼ŒBoost.Asio ä¼šè‡ªåŠ¨è°ƒç”¨ç”¨æˆ·æä¾›çš„å›è°ƒå‡½æ•°ã€‚

**I/O æœåŠ¡å¯¹è±¡** Boost.Asio çš„æ ¸å¿ƒæ˜¯ä¸€ä¸ª `io_service` æˆ– `io_context` å¯¹è±¡ï¼Œå®ƒç®¡ç†æ‰€æœ‰çš„å¼‚æ­¥æ“ä½œå’Œå›è°ƒçš„è°ƒåº¦ã€‚å¼‚æ­¥æ¥æ”¶æ—¶ï¼š

*   ç”¨æˆ·å°†æ“ä½œï¼ˆå¦‚ `async_receive`ï¼‰æ³¨å†Œåˆ° `io_context`ã€‚
    
*   `io_context` å°†å¼‚æ­¥æ“ä½œæŒ‚èµ·ï¼Œå¹¶ç­‰å¾… I/O äº‹ä»¶çš„è§¦å‘ã€‚
    
*   å½“ I/O äº‹ä»¶è§¦å‘æ—¶ï¼Œ`io_context` è°ƒç”¨å¯¹åº”çš„å›è°ƒå‡½æ•°ã€‚
    

**ä¸é˜»å¡ä¸»çº¿ç¨‹** å¼‚æ­¥æ“ä½œä¸ä¼šé˜»å¡è°ƒç”¨çº¿ç¨‹ã€‚ä¸»çº¿ç¨‹å¯ä»¥ç»§ç»­æ‰§è¡Œå…¶ä»–ä»»åŠ¡ï¼Œè€Œå¼‚æ­¥æ“ä½œåœ¨åå°å®Œæˆã€‚

  

2.  ### åŸºäºBoost.Asioåº“çš„ä¼˜ç‚¹
    

Boost.Asioåº“æ˜¯é ç³»ç»ŸIOè¿›è¡Œäº‹ä»¶è§¦å‘çš„ï¼Œå¹¶ä¸”å•ç‹¬å¼€äº†ä¸€ä¸ªçº¿ç¨‹å»å¹²è¿™ä»¶äº‹ï¼Œæ‰€ä»¥è¿™å°±ä½¿booståº“æ‹¥æœ‰å•ç‰‡æœºçš„ä¸²å£ä¸­æ–­çš„ç‰¹ç‚¹ï¼Œåˆæ‹¥æœ‰çœŸå¤šçº¿ç¨‹çš„ç‰¹ç‚¹ã€‚

è€Œå•ç‰‡æœºçš„ä¸²å£ä¸­æ–­ï¼Œè™½ç„¶ä¹Ÿèƒ½é€šè¿‡IOè¿›è¡Œäº‹ä»¶è§¦å‘ï¼Œä½†æ˜¯ç”±äºå•ç‰‡æœºåªæœ‰ä¸€ä¸ªçœŸçº¿ç¨‹ï¼Œæ‰€ä»¥åœ¨è¿›å…¥ä¸­æ–­æ—¶ï¼Œä¸€å®šä¼šé˜»å¡ä¸»çº¿ç¨‹ï¼Œé€ æˆæ•ˆç‡æŸå¤±ã€‚

å¦‚æœåœ¨ä¸»çº¿ç¨‹é‡Œç›´æ¥æ¥æ”¶å¹¶åŠ ä¸Šæ­»å¾ªç¯å’Œå»¶æ—¶ï¼Œè¿™ç§æ•ˆç‡å¾€å¾€æ˜¯æœ€ä½çš„ï¼Œå¹¶ä¸”æœ‰å¾ˆå¤§çš„å®‰å…¨é£é™©ï¼Œéå¸¸ä¸å»ºè®®ä½¿ç”¨ã€‚

æ•ˆç‡ï¼šBoost.Asioæ¥æ”¶ >> å•ç‰‡æœºä¸²å£ä¸­æ–­ >> å¤šçº¿ç¨‹é˜»å¡å¼æ¥æ”¶ >> å•çº¿ç¨‹é˜»å¡å¼æ¥æ”¶ï¼ˆåœ¨ä¼ è¾“é€Ÿåº¦éå¸¸å¿«çš„æƒ…å†µä¸‹ï¼Œå…¨éƒ½æ˜¯è¿œè¿œå¤§äº>>ï¼‰

  

3.  ### å®‰è£…ROS2ä¸²å£åŒ…
    

**serial\_driver** æ˜¯ä¸€ä¸ªå°è£…äº†ä¸²å£é€šä¿¡åŠŸèƒ½çš„åº“ï¼Œå®ƒåˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š

*   **ROS2 ä¾èµ–ç‰ˆæœ¬** ï¼šç”¨äº ROS2 ç¯å¢ƒä¸­ï¼Œä¾èµ–äº ROS2 çš„é€šä¿¡æœºåˆ¶ï¼ˆå¦‚ `rclcpp`ï¼‰ã€‚
    
*   **ç‹¬ç«‹åº“ç‰ˆæœ¬** ï¼šä¸ä¾èµ– ROS2ï¼Œå¯ä»¥ç›´æ¥åœ¨æ™®é€šçš„ C++ é¡¹ç›®ä¸­ä½¿ç”¨ã€‚(æœªç»æµ‹è¯•)
    

  

1.  #### **æ–¹å¼ä¸€ï¼šåœ¨ROS2ä¸­å®‰è£…**
    

```Bash
sudo apt install ros-<ros2-distro>-asio-cmake-module
sudo apt install ros-<ros2-distro>-serial-driver

#humble
sudo apt install ros-humble-asio-cmake-module
sudo apt install ros-humble-serial-driver
#jazzy
sudo apt install ros-jazzy-asio-cmake-module
sudo apt install ros-jazzy-serial-driver
```

2.  #### **æ–¹å¼äºŒï¼šé€šç”¨ï¼ˆè¯¥æ–¹æ³•æœªç»æµ‹è¯•ï¼Œå¦‚æœä½ æµ‹è¯•äº†ï¼Œè¯·å¸®å¿™åˆ æ‰æœ¬å¥è¯ï¼‰**
    

å¦‚æœä½ åœ¨ROS1æˆ–è€…è¯´å…¶ä»–åœ°æ–¹ä½¿ç”¨ï¼Œè€Œä¸”æ²¡æœ‰å®‰è£…ROS2ï¼Œè¯·é€‰æ‹©è¯¥æ–¹æ³•ã€‚

**å…‹éš†ä»“åº“**

é¦–å…ˆï¼Œå…‹éš† **transport\_drivers** ä»“åº“ï¼ˆåŒ…å« `serial_driver`ï¼‰ï¼š

https://github.com/ros-drivers/transport\_drivers

```Bash
git clone https://github.com/ros-drivers/transport_drivers.git
```

**å®‰è£…ä¾èµ–**

`serial_driver` ä¾èµ–äº **ASIO** åº“ï¼ˆä¸€ä¸ªè·¨å¹³å°çš„ C++ ç½‘ç»œç¼–ç¨‹åº“ï¼‰ã€‚ç¡®ä¿ç³»ç»Ÿä¸­å·²å®‰è£… ASIOï¼š

```Bash
sudo apt install libasio-dev
```

**ç¼–è¯‘ç‹¬ç«‹åº“**

è¿›å…¥ `serial_driver` ç›®å½•å¹¶ç¼–è¯‘ï¼š

```Bash
cd transport_drivers/serial_driver
mkdir build
cd build
cmake ..
make
sudo make install
```

å®‰è£…å®Œæ¯•åï¼Œåœ¨CMakeé‡Œæ­£å¸¸æ·»åŠ è¯¥åŒ…å°±å¯ä»¥ã€‚

  

3.  #### å…¶ä»–å‡†å¤‡å·¥ä½œ
    

**ä¸²å£è°ƒè¯•åŠ©æ‰‹å®‰è£…(Linuxç‰ˆ) (å¦‚æœéœ€è¦Windowsç‰ˆï¼Œé—®æ§åˆ¶ç»„è¦å»)**

```Bash
sudo apt-get install cutecom
```

**æƒé™**

```Bash
# å°†ç”¨æˆ·æƒé™æé«˜
sudo usermod -aG dialout $USER
newgrp dialout
```

æœ‰å…³Linuxçš„USBè®¾å¤‡çš„æ›´å¤šæ“ä½œè¯·çœ‹[Vinciæœºå™¨äººé˜ŸLinuxå…¥é—¨æ•™ç¨‹](https://sdutvincirobot.feishu.cn/wiki/GIKnwJo39iREkHkFGvqcy5Osntc)

  

4.  ### åˆå§‹åŒ–è¯¦è§£
    

1.  åˆ›å»ºåŠŸèƒ½åŒ…
    

```Bash
ros2 pkg create cpp01_serial --build-type ament_cmake --dependencies rclcpp serial_driver --node-name demo01_uart_send
```

2.  å¼•ç”¨å¤´æ–‡ä»¶ï¼š`#include "serial_driver/serial_driver.hpp"`
    
3.  é¦–å…ˆè¦åˆå§‹åŒ–ä¸²å£ï¼š
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzE1NmY4OTdjMDEzNTlkN2U4NDIzZDM1MDU0OTVkMzRfRlF4enN0bHB2Y1ZHME1NRzFEYUo1cUxnd3RCQVl4b0VfVG9rZW46RWt2SWJGZUwwb0g5Wjl4RGR2N2NUMzdZbkJPXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjE1MmI4Mzk2NWYyZWI5YWQxNzFmYTQ3MWEzMjMzMzBfR3RuQVhxMXBYUjg1elA5UUVLbnVWOExBeUxFNmQwVzJfVG9rZW46VDBxSWJ4OGNNb3pkRXZ4SFFSZ2NIZnp5bjZlXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTMyZWFkOWUwYzI5YWY3M2JhZTYxMjZlNjJkMDU1OWJfQkx0R1QyRFNRbE5UZ1BnekFyUHROZktwc0k2NGp5a29fVG9rZW46S0N1TGI3SXd3b1BnQUt4OW5JNGNMV2ZMbmVnXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTUwYzNiY2Y0MGZjOGNlM2RmZDQxYjk2NTYzMDY0NDdfbjJ1bG1uSE1POFhzRTNoUXdFM1c0WGJLOHB5ZFV6NTRfVG9rZW46S1FTUWJwdlZqb3hRVmh4MkRMQWNzRm5rbldoXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

ä¸²å£åˆå§‹åŒ–å‡½æ•°`init_port()`æœ‰ä¿©å‚æ•°ï¼Œ

ç¬¬ä¸€ä¸ªå‚æ•°device\_name æ˜¯ç«¯å£åç§°

ç¬¬äºŒä¸ªå‚æ•°config æ˜¯ä¸²å£å‚æ•°è®¾ç½®

device\_nameæ˜¯ä¸ªå­—ç¬¦ä¸²ï¼Œæ˜¯å¡«`/dev`ä¸‹çš„è®¾å¤‡å

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWQyYzVhOGRmYjI4MWEwNDU4OGNiMzNlZjc0NDJkZDhfVk95Zk1qMWlwNXkzY1lxQ0xja2o2a3RWemhNWlZ1YnZfVG9rZW46TFZvUGJUVElqb3lUWXR4TFpNN2NBNmtjbjVnXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjM3ZWIxZjc0ZGE0NjI2NTNmMTkxMTc1ZjhmY2M3YWRfU0NDT3VEbUpZTlZoS3NEaVpHeEZZRWtQcEFieHI2YVRfVG9rZW46U3ltZ2JUSGlkb2gwS0h4ZTJLY2NlTXA4blpkXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

```Bash
ls /dev | grep USB
```

æœ‰å…³Linuxçš„USBè®¾å¤‡çš„æ›´å¤šæ“ä½œè¯·çœ‹[Vinciæœºå™¨äººé˜ŸLinuxå…¥é—¨æ•™ç¨‹](https://sdutvincirobot.feishu.cn/wiki/GIKnwJo39iREkHkFGvqcy5Osntc)

configæ˜¯ä¸ªç±»å¯¹è±¡ï¼Œæ‰€ä»¥è¦åˆ›å»ºä¸€ä¸‹è¿™ä¸ªç±»å¯¹è±¡å¦‚ä¸‹ï¼š

è¿™ç©æ„æ˜¯ä¸ªè½»é‡åŒ–çš„ç±»ï¼Œæ²¡å¿…è¦æ”¾åœ¨å †åŒºï¼Œç›´æ¥åœ¨æ ˆåŒºé‡Œåˆ›å»ºå³å¯ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTE5OTVlYjVmODQ3NmY5YmNiMmVhMDU3Nzc1YmEyNjhfUTZ3UjZzOVBWcFUxMXpmaEt3blQ2NkhvSDJxa3NtMlJfVG9rZW46T1ZtRWJQMGtlb0w2Vmh4ckZ2N2NHMkE0bkhnXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

SerialPortConfig(uint32\_t baud\_rate, **drivers::serial\_driver::FlowControl flow\_control** , drivers::serial\_driver::Parity parity, drivers::serial\_driver::StopBits stop\_bits)

ä»è¿™ä¸ªé‡è½½å‡½æ•°å¯ä»¥çœ‹åˆ°(å‚æ•°ä¸æ‡‚çš„é—®æ§åˆ¶ç»„)

ç¬¬ä¸€ä¸ªå‚æ•°baud\_rate æ³¢ç‰¹ç‡

ç¬¬äºŒä¸ªå‚æ•°flow\_control æµæ§åˆ¶

ç¬¬ä¸‰ä¸ªå‚æ•°parity å¥‡å¶æ•ˆéªŒ

ç¬¬å››ä¸ªå‚æ•°stop\_bits åœæ­¢ä½

å…·ä½“çš„å‚æ•°åœ¨`serial_port.hpp`ä¸­æœ‰

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzYyYjRlYjIxNTkyMDUzNDg1MDFlNDgzZDM5NmI5YTZfVWpkNEptdGRZRTFBRmxxd1ZqNzBLYTFieUFHRllHOVVfVG9rZW46QkMyOGJTM2Rab1RtSGN4dzJHNWNiVWJSbkNnXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

è¿™æ ·ä¸²å£å°±åˆå§‹åŒ–æˆåŠŸäº†ã€‚

5.  ### å‘é€ä»£ç è¯¦è§£
    

1.  å‘é€ä¸»é€»è¾‘
    

æˆ‘ä»¬æ¥ä¸‹æ¥å†™å‘é€ä¸»é€»è¾‘ï¼Œé¦–å…ˆè¦åˆ›å»ºä¸€ä¸ªå»¶æ—¶ï¼Œä¸è¦ä½¿ç”¨while(true)è¿™ç§æ­»å¾ªç¯å»¶è¿Ÿï¼ŒROS2æä¾›äº†å®šæ—¶å™¨ã€‚

å…ˆåˆ›å»ºå®šæ—¶å™¨ï¼ˆåˆ›å»ºå®šæ—¶å™¨ä¸ç”¨è¯¦è§£äº†ï¼Œä¸æ‡‚çš„å›é¡¾ä¸Šé¢èµµè€å¸ˆçš„è§†é¢‘ï¼‰

å°±éœ€è¦æ³¨æ„ä¸€ä¸ªç‚¹ï¼Œæˆ‘ä»¬ç”¨çš„æ˜¯ **æ¯«ç§’milliseconds** ï¼Œä¸æ˜¯ **å¾®ç§’microseconds** ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzE2ZGYyMzYyOGI1YTQzNGU5NzZiNmUxYTBjZTFmMTZfWFZaaGw0dUVjbnZlaEs1cVphUTlMR2RNQUJVZG9Hak5fVG9rZW46UnpGSWI0S29ib0NVc1R4d1JzNWNmYU0wbktlXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzU1YWJiMDIwNTA3Mzc5ZTA2OWVhYzJkODQ2OGY1ZDRfUkltUWpubmw4cTlQV281cEhxV2F0WG1Ob3hPZ3lYVVBfVG9rZW46TU1jVGJXdWJDb0JpQm54QlJucmNDM2o2bk5kXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

å‘é€æ ¸å¿ƒå‡½æ•°æ˜¯è¿™ä¸ªsendå‡½æ•°ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œå…¥å£å‚æ•°æ˜¯vectorç±»å‹çš„å‘é‡ï¼Œ

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTc5NWNjYzIyMjFhZTE0M2IzM2Y1NDNhMTBiOGZjMjhfMk1DN3JPMDd6MjVhbm9WRkljakR4c0dhUDNMeWJoSnpfVG9rZW46RnVzNmI5SnFYb2pIN0l4eGZueWN5RVRTbnRlXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

```C++
#include "rclcpp/rclcpp.hpp"
#include "serial_driver/serial_driver.hpp"

class Serial_Node : public rclcpp::Node
{
public:
  Serial_Node() : Node("serial_node_cpp")
  {
    // ç­‰è®¾å¤‡å‡†å¤‡å¥½å†åˆå§‹åŒ–
    // std::this_thread::sleep_for(std::chrono::milliseconds(500));

    // ä¸²å£è®¾å¤‡åï¼ˆæ ¹æ®å®é™…è®¾å¤‡è°ƒæ•´ï¼‰
    const std::string device_name = "/dev/ttyUSB0";

    RCLCPP_INFO(this->get_logger(), "Serial port Node Open!");
    // åˆ›å»ºä¸²å£é…ç½®å¯¹è±¡
    // æ³¢ç‰¹ç‡115200ï¼›ä¸å¼€å¯æµæ§åˆ¶ï¼›æ— å¥‡å¶æ•ˆéªŒï¼›åœæ­¢ä½1ã€‚
    drivers::serial_driver::SerialPortConfig config(
        9600,
        drivers::serial_driver::FlowControl::NONE,
        drivers::serial_driver::Parity::NONE,
        drivers::serial_driver::StopBits::ONE);
    
    // åˆå§‹åŒ–ä¸²å£
    try
    {
      io_context_ = std::make_shared<drivers::common::IoContext>(1);
      // åˆå§‹åŒ– serial_driver_
      serial_driver_ = std::make_shared<drivers::serial_driver::SerialDriver>(*io_context_);
      serial_driver_->init_port(device_name, config);
      serial_driver_->port()->open();
      
      RCLCPP_INFO(this->get_logger(), "Serial port initialized successfully");
      RCLCPP_INFO(this->get_logger(), "Using device: %s", serial_driver_->port().get()->device_name().c_str());
      RCLCPP_INFO(this->get_logger(), "Baud_rate: %d", config.get_baud_rate());
    }
    catch (const std::exception &ex)
    {
      RCLCPP_ERROR(this->get_logger(), "Failed to initialize serial port: %s", ex.what());
      return;
    }

    // è®¾ç½®å‘é€å®šæ—¶å™¨
    send_timer_ = this->create_wall_timer(
        std::chrono::milliseconds(500),
        std::bind(&Serial_Node::send_message_timer_callback, this));
  }

private:
  void send_message_timer_callback()
  {
    // å‘é€ä¸€ä¸²å­—ç¬¦ä¸²
    const std::string message = "Hello from ROS 2!\n";
    std::vector<uint8_t> data(message.begin(), message.end());
    // std::vector<uint8_t> hex_data = {0x48, 0x65, 0x6C, 0x6C, 0x6F}; // "Hello" in ASCII
    auto port = serial_driver_->port();

    try
    {
      size_t bytes_sent_size = port->send(data);
      RCLCPP_INFO(this->get_logger(), "Sent: %s (%ld bytes)", message.c_str(), bytes_sent_size);
    }
    catch(const std::exception &ex)
    {
      RCLCPP_ERROR(this->get_logger(), "Error Transmiting from serial port:%s",ex.what());
    }
  }

  std::shared_ptr<drivers::serial_driver::SerialDriver> serial_driver_;
  std::shared_ptr<drivers::common::IoContext> io_context_;
  rclcpp::TimerBase::SharedPtr send_timer_;
};

int main(int argc, char **argv)
{
  rclcpp::init(argc, argv);

  auto node = std::make_shared<Serial_Node>();

  rclcpp::spin(node);

  rclcpp::shutdown();
  return 0;
}
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDY2OGIyMDdmMTc5ZWVhODJkN2FlOWJkOWVmODFmNDVfWVFnS2Q1b1kyZ0xuMVN5ek1BMHlBaWNLSHFndlNkdk9fVG9rZW46S21BWmJJQTBvbzdIbkV4MkRBVGNjU1FMbngxXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTQzZDE1ZjFmN2E2ZWEwNmM0MmZhMzY5MjdmNTRhNzRfQndJb0o0WGFXcmZzam5PNGUyQThHcnMzQUdMMVo5ZFVfVG9rZW46S2x2MWJJMzNab2NiYTV4b3RBZWNTWjBNbkhkXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

  

  

6.  ### æ¥æ”¶ä»£ç è¯¦è§£
    

1.  #### å®šæ—¶å™¨æ–¹å¼(ä½æ•ˆï¼Œä¸å»ºè®®ç”¨)
    

```C++
#include "rclcpp/rclcpp.hpp"
#include "serial_driver/serial_driver.hpp"
#include <string>

class Serial_Node : public rclcpp::Node
{
public:
  Serial_Node() : Node("serial_node_cpp")
  {
    // ç­‰è®¾å¤‡å‡†å¤‡å¥½å†åˆå§‹åŒ–
    // std::this_thread::sleep_for(std::chrono::milliseconds(500));

    // ä¸²å£è®¾å¤‡åï¼ˆæ ¹æ®å®é™…è®¾å¤‡è°ƒæ•´ï¼‰
    const std::string device_name = "/dev/ttyUSB0";

    RCLCPP_INFO(this->get_logger(), "Serial port Node Open!");
    // åˆ›å»ºä¸²å£é…ç½®å¯¹è±¡
    // æ³¢ç‰¹ç‡115200ï¼›ä¸å¼€å¯æµæ§åˆ¶ï¼›æ— å¥‡å¶æ•ˆéªŒï¼›åœæ­¢ä½1ã€‚
    drivers::serial_driver::SerialPortConfig config(
        9600,
        drivers::serial_driver::FlowControl::NONE,
        drivers::serial_driver::Parity::NONE,
        drivers::serial_driver::StopBits::ONE);
    
    // åˆå§‹åŒ–ä¸²å£
    try
    {
      io_context_ = std::make_shared<drivers::common::IoContext>(1);
      // åˆå§‹åŒ– serial_driver_
      serial_driver_ = std::make_shared<drivers::serial_driver::SerialDriver>(*io_context_);
      serial_driver_->init_port(device_name, config);
      serial_driver_->port()->open();
      
      RCLCPP_INFO(this->get_logger(), "Serial port initialized successfully");
      RCLCPP_INFO(this->get_logger(), "Using device: %s", serial_driver_->port().get()->device_name().c_str());
      RCLCPP_INFO(this->get_logger(), "Baud_rate: %d", config.get_baud_rate());
    }
    catch (const std::exception &ex)
    {
      RCLCPP_ERROR(this->get_logger(), "Failed to initialize serial port: %s", ex.what());
      return;
    }

    // è®¾ç½®å‘é€å®šæ—¶å™¨
    receive_timer_ = this->create_wall_timer(
        std::chrono::milliseconds(3),
        std::bind(&Serial_Node::receive_message_timer_callback, this));
  }

private:
  void receive_message_timer_callback()
  {
    std::vector<uint8_t> data(100); // "Hello" in ASCII
    auto port = serial_driver_->port();

    try
    {
      size_t bytes_receive_size = port->receive(data);
      if(bytes_receive_size > 0)
      {
        std::string message(data.begin(),data.begin() + bytes_receive_size);
        RCLCPP_INFO(this->get_logger(), "Receive: %s (%ld bytes)", message.c_str(), bytes_receive_size);
      }
    }
    catch(const std::exception &ex)
    {
      RCLCPP_ERROR(this->get_logger(), "Error Receiving from serial port:%s",ex.what());
    }
  }

  std::shared_ptr<drivers::serial_driver::SerialDriver> serial_driver_;
  std::shared_ptr<drivers::common::IoContext> io_context_;
  rclcpp::TimerBase::SharedPtr receive_timer_;
};

int main(int argc, char **argv)
{
  rclcpp::init(argc, argv);

  auto node = std::make_shared<Serial_Node>();

  rclcpp::spin(node);

  rclcpp::shutdown();
  return 0;
}
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTA2MDc0OTkzZThkZTMzMTVhYzg0MzVkYzBlZDA2NmZfbjRxWWlNUzcwdWtRWXJDNThjSHpCcHhOdmI5eEI5SnRfVG9rZW46Q2hyMmJFNlNjb3Bxdmp4N005bGN2SDRNbjdnXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

  

2.  #### å¼‚æ­¥æ–¹å¼(é«˜æ•ˆ)
    

```C++
#include "rclcpp/rclcpp.hpp"
#include "serial_driver/serial_driver.hpp"
#include <string>

class Serial_Node : public rclcpp::Node
{
public:
  Serial_Node() : Node("serial_node_cpp")
  {
    // ç­‰è®¾å¤‡å‡†å¤‡å¥½å†åˆå§‹åŒ–
    // std::this_thread::sleep_for(std::chrono::milliseconds(500));

    // ä¸²å£è®¾å¤‡åï¼ˆæ ¹æ®å®é™…è®¾å¤‡è°ƒæ•´ï¼‰
    const std::string device_name = "/dev/ttyUSB0";

    RCLCPP_INFO(this->get_logger(), "Serial port Node Open!");
    // åˆ›å»ºä¸²å£é…ç½®å¯¹è±¡
    // æ³¢ç‰¹ç‡115200ï¼›ä¸å¼€å¯æµæ§åˆ¶ï¼›æ— å¥‡å¶æ•ˆéªŒï¼›åœæ­¢ä½1ã€‚
    drivers::serial_driver::SerialPortConfig config(
        9600,
        drivers::serial_driver::FlowControl::NONE,
        drivers::serial_driver::Parity::NONE,
        drivers::serial_driver::StopBits::ONE);
    
    // åˆå§‹åŒ–ä¸²å£
    try
    {
      io_context_ = std::make_shared<drivers::common::IoContext>(1);
      // åˆå§‹åŒ– serial_driver_
      serial_driver_ = std::make_shared<drivers::serial_driver::SerialDriver>(*io_context_);
      serial_driver_->init_port(device_name, config);
      serial_driver_->port()->open();
      
      RCLCPP_INFO(this->get_logger(), "Serial port initialized successfully");
      RCLCPP_INFO(this->get_logger(), "Using device: %s", serial_driver_->port().get()->device_name().c_str());
      RCLCPP_INFO(this->get_logger(), "Baud_rate: %d", config.get_baud_rate());
    }
    catch (const std::exception &ex)
    {
      RCLCPP_ERROR(this->get_logger(), "Failed to initialize serial port: %s", ex.what());
      return;
    }

    async_receive_message();
  }

private:
  void async_receive_message()  //åˆ›å»ºä¸€ä¸ªå‡½æ•°æ›´æ–¹ä¾¿é‡æ–°è°ƒç”¨
  {
    auto port = serial_driver_->port();

    // è®¾ç½®æ¥æ”¶å›è°ƒå‡½æ•°
    port->async_receive([this](const std::vector<uint8_t> &data,const size_t &size) 
    {
        if (size > 0)
        {
            // å¤„ç†æ¥æ”¶åˆ°çš„æ•°æ®
            std::string received_message(data.begin(), data.begin() + size);
            RCLCPP_INFO(this->get_logger(), "Received: %s (%ld bytes)", received_message.c_str(),size);
        }
        // ç»§ç»­ç›‘å¬æ–°çš„æ•°æ®
        async_receive_message();
    }
    );
  }

  std::shared_ptr<drivers::serial_driver::SerialDriver> serial_driver_;
  std::shared_ptr<drivers::common::IoContext> io_context_;
  std::vector<uint8_t> receive_data_buffer = std::vector<uint8_t>(1024); // æ¥æ”¶ç¼“å†²åŒº
};

int main(int argc, char **argv)
{
  rclcpp::init(argc, argv);

  auto node = std::make_shared<Serial_Node>();

  rclcpp::spin(node);

  rclcpp::shutdown();
  return 0;
}
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTNhYmUxYjc2MjFhMjJhZTA1MDdjYWViZTNlZmQxZjNfMloyTjdRbkZlTmVNVkQ2cGR3NHVsYkJiTVNVMktUQlZfVG9rZW46TmdaUWJSTGQ1b2hyS2N4YVVuWmNqM0w2bnNiXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

  

  

7.  ### æ€»ä»£ç (åˆå‘åˆæ”¶)
    

```C++
#include "rclcpp/rclcpp.hpp"
#include "serial_driver/serial_driver.hpp"
#include <string>

class Serial_Node : public rclcpp::Node
{
public:
  Serial_Node() : Node("serial_node_cpp")
  {
    // ç­‰è®¾å¤‡å‡†å¤‡å¥½å†åˆå§‹åŒ–
    // std::this_thread::sleep_for(std::chrono::milliseconds(500));

    // ä¸²å£è®¾å¤‡åï¼ˆæ ¹æ®å®é™…è®¾å¤‡è°ƒæ•´ï¼‰
    const std::string device_name = "/dev/ttyUSB0";

    RCLCPP_INFO(this->get_logger(), "Serial port Node Open!");
    // åˆ›å»ºä¸²å£é…ç½®å¯¹è±¡
    // æ³¢ç‰¹ç‡115200ï¼›ä¸å¼€å¯æµæ§åˆ¶ï¼›æ— å¥‡å¶æ•ˆéªŒï¼›åœæ­¢ä½1ã€‚
    drivers::serial_driver::SerialPortConfig config(
        9600,
        drivers::serial_driver::FlowControl::NONE,
        drivers::serial_driver::Parity::NONE,
        drivers::serial_driver::StopBits::ONE);
    
    // åˆå§‹åŒ–ä¸²å£
    try
    {
      io_context_ = std::make_shared<drivers::common::IoContext>(1);
      // åˆå§‹åŒ– serial_driver_
      serial_driver_ = std::make_shared<drivers::serial_driver::SerialDriver>(*io_context_);
      serial_driver_->init_port(device_name, config);
      serial_driver_->port()->open();
      
      RCLCPP_INFO(this->get_logger(), "Serial port initialized successfully");
      RCLCPP_INFO(this->get_logger(), "Using device: %s", serial_driver_->port().get()->device_name().c_str());
      RCLCPP_INFO(this->get_logger(), "Baud_rate: %d", config.get_baud_rate());
    }
    catch (const std::exception &ex)
    {
      RCLCPP_ERROR(this->get_logger(), "Failed to initialize serial port: %s", ex.what());
      return;
    }

        // è®¾ç½®å‘é€å®šæ—¶å™¨
    transmit_timer_ = this->create_wall_timer(
        std::chrono::milliseconds(5000),
        std::bind(&Serial_Node::send_message_timer_callback, this));

    async_receive_message();   //è¿›å…¥å¼‚æ­¥æ¥æ”¶
  }

private:

  void send_message_timer_callback()
  {
    // å‘é€ä¸€ä¸²å­—ç¬¦ä¸²
    const std::string transmitted_message = "Hello from ROS 2!\n";
    transmit_data_buffer = std::vector<uint8_t>(transmitted_message.begin(), transmitted_message.end());
    // std::vector<uint8_t> hex_data = {0x48, 0x65, 0x6C, 0x6C, 0x6F}; // "Hello" in ASCII
    auto port = serial_driver_->port();

    try
    {
      size_t bytes_transmit_size = port->send(transmit_data_buffer);
      RCLCPP_INFO(this->get_logger(), "Transmitted: %s (%ld bytes)", transmitted_message.c_str(), bytes_transmit_size);
    }
    catch(const std::exception &ex)
    {
      RCLCPP_ERROR(this->get_logger(), "Error Transmiting from serial port:%s",ex.what());
    }
  }

  void async_receive_message()  //åˆ›å»ºä¸€ä¸ªå‡½æ•°æ›´æ–¹ä¾¿é‡æ–°è°ƒç”¨
  {
    auto port = serial_driver_->port();

    // è®¾ç½®æ¥æ”¶å›è°ƒå‡½æ•°
    port->async_receive([this](const std::vector<uint8_t> &data,const size_t &size) 
    {
        if (size > 0)
        {
            // å¤„ç†æ¥æ”¶åˆ°çš„æ•°æ®
            std::string received_message(data.begin(), data.begin() + size);
            RCLCPP_INFO(this->get_logger(), "Received: %s (%ld bytes)", received_message.c_str(),size);
        }
        // ç»§ç»­ç›‘å¬æ–°çš„æ•°æ®
        async_receive_message();
    }
    );
  }

  std::shared_ptr<drivers::serial_driver::SerialDriver> serial_driver_;
  std::shared_ptr<drivers::common::IoContext> io_context_;
  rclcpp::TimerBase::SharedPtr transmit_timer_;
  std::vector<uint8_t> transmit_data_buffer = std::vector<uint8_t>(1024); // å‘é€ç¼“å†²åŒº
  std::vector<uint8_t> receive_data_buffer = std::vector<uint8_t>(1024);  // æ¥æ”¶ç¼“å†²åŒº
};

int main(int argc, char **argv)
{
  rclcpp::init(argc, argv);

  auto node = std::make_shared<Serial_Node>();

  rclcpp::spin(node);

  rclcpp::shutdown();
  return 0;
}
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWQ3M2VlMjg5OGIzYmZlMzEzMTUwMTEzNDI3NmQ0ZTJfZ2paSU5udGpDemRhYUJNMmJ2Vk1OQmV5VDhqRmViMFdfVG9rZW46SjdCeWJFazQ4b1pjQkx4TlYxZGN5UUpLbjlrXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWE3NDllNGE4OTMzZWU0YzA2ZjU4MjM3NTlhZTAwNmRfeG45U1FHNWdZVUh4U1FlVGo2RUdzMVU3c0NjOHF5a3RfVG9rZW46U0tjcGJXUTUyb3NGbGl4Mk5BY2N6Vk9XbnhjXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDcwNDgyN2NjYjg3MDRhZWQzODA2Y2Q3NzhhMTRkYjhfUnlCWkgzd0ZJUnpoQTU0TVBJWjVxamM5YmNYS3BxczBfVG9rZW46VnpxVGJCQ3prbzhTOVd4YmlJOWNYeEMwbmxjXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

  

8.  ### æ³¨æ„äº‹é¡¹
    

1.  ç¦æ­¢å¼•ç”¨`boost/asio.hpp`ï¼šç”±äºè¯¥åº“çš„åŸç†å°±æ˜¯booståº“ï¼Œè€Œä¸”æ˜¯ROS2è‡ªå¸¦çš„booståº“ï¼Œæ‰€ä»¥ä½ ç”¨é€šç”¨ç‰ˆçš„`boost/asio.hpp`ï¼Œä¼šå¯¼è‡´æŠ¥é”™å‡ºç°å¾ˆå¤šæ ‡å¿—é‡å¤çš„é—®é¢˜ã€‚
    

  

  

  

  

  

14.  # æœºå™¨äººç¡¬ä»¶
    

1.  ## æœºå™¨äººç»„æˆ
    

ç«‹è¶³è§’åº¦ä¸åŒï¼Œå¯¹æœºå™¨äººç»„æˆçš„è®¤è¯†ä¹Ÿä¼šæœ‰æ‰€ä¸åŒã€‚å®è§‚ä¸Šè®²ï¼Œæœºå™¨äººç”±ç¡¬ä»¶ä»¥åŠè½¯ä»¶ä¸¤å¤§éƒ¨åˆ†ç»„æˆã€‚è¿›ä¸€æ­¥ç»†åŒ–ï¼Œæœºå™¨äººåˆå¯ä»¥åˆ†ä¸ºä¸‰å¤§éƒ¨åˆ†ï¼š **æ§åˆ¶ç³»ç»Ÿ** ã€ **ä¼ æ„Ÿç³»ç»Ÿ** ä¸ **ç¡¬ä»¶å¹³å°** ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODdiZGUyZTM0YzZjNzBhMDIyMDhiZWQxMzg4YzQwYjhfcFZ0eXd0aHJtRm45ZWVwbVJrN21rdXJsOFpCc1piZGVfVG9rZW46VFd3amJDYTRpb2NkMFd4MDNrd2NhSm9tbm1lXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

1.æ§åˆ¶ç³»ç»Ÿ

æ§åˆ¶ç³»ç»Ÿç›¸å½“äºæœºå™¨äººçš„å¤§è„‘ï¼Œç”±å®‰è£…äº†æœºå™¨äººæ“ä½œç³»ç»Ÿçš„å¤„ç†å™¨ç»„æˆï¼Œæ˜¯æœºå™¨äººçš„æ ¸å¿ƒã€‚æ§åˆ¶ç³»ç»Ÿçš„ä¸»è¦ä»»åŠ¡æ˜¯æ ¹æ®ä½œä¸šæŒ‡ä»¤å’Œä¼ æ„Ÿå™¨åé¦ˆç”Ÿæˆæ§åˆ¶å‘½ä»¤ï¼ŒåŒæ—¶è´Ÿè´£ç®—æ³•å¤„ç†å’Œäººæœºäº¤äº’ç­‰åŠŸèƒ½ã€‚å®ƒåœ¨æœºå™¨äººä¸­æ‰®æ¼”ç€æ™ºèƒ½å†³ç­–å’Œæ‰§è¡Œä»»åŠ¡çš„å…³é”®è§’è‰²ã€‚

2.ä¼ æ„Ÿç³»ç»Ÿ

ä¼ æ„Ÿç³»ç»Ÿç›¸å½“äºæœºå™¨äººçš„æ„Ÿå®˜ï¼Œåˆ†ä¸ºå†…éƒ¨ä¼ æ„Ÿå™¨æ¨¡å—å’Œå¤–éƒ¨ä¼ æ„Ÿå™¨æ¨¡å—ã€‚

*   å†…éƒ¨ä¼ æ„Ÿç³»ç»ŸåŒ…æ‹¬ç”µæœºçš„ç¼–ç å™¨ã€é™€èºä»ªç­‰ï¼Œå¯ä»¥é€šè¿‡è‡ªèº«ä¿¡å·åé¦ˆæ¥æ£€æµ‹æœºå™¨äººçš„ä½å§¿çŠ¶æ€ã€‚
    
*   å¤–éƒ¨ä¼ æ„Ÿç³»ç»ŸåŒ…æ‹¬æ‘„åƒå¤´ã€é›·è¾¾ç­‰ï¼Œç”¨äºæ„ŸçŸ¥å¤–éƒ¨ç¯å¢ƒã€‚
    

ä¼ æ„Ÿç³»ç»Ÿè·å–æœ‰ç”¨çš„ä¿¡æ¯ï¼Œå¸®åŠ©æœºå™¨äººæ„ŸçŸ¥å’Œç†è§£å‘¨å›´çš„ç¯å¢ƒï¼Œèµ·åˆ°è¾…åŠ©æœºå™¨äººæ“ä½œå’Œå†³ç­–çš„ä½œç”¨ã€‚

3.ç¡¬ä»¶å¹³å°

ç¡¬ä»¶å¹³å°ç›¸å½“äºæœºå™¨äººçš„èº¯ä½“ï¼Œæä¾›äº†å¯¹æœºå™¨äººçš„ç‰©ç†æ”¯æŒï¼Œé€šå¸¸ç”±é©±åŠ¨ç³»ç»Ÿå’Œæ‰§è¡Œæœºæ„ä¸¤éƒ¨åˆ†ç»„æˆã€‚

*   é©±åŠ¨ç³»ç»Ÿä¸»è¦è´Ÿè´£é©±åŠ¨æ‰§è¡Œæœºæ„ï¼Œå°†æ§åˆ¶ç³»ç»Ÿä¸‹è¾¾çš„å‘½ä»¤è½¬æ¢ä¸ºæ‰§è¡Œæœºæ„æ‰€éœ€çš„ä¿¡å·ï¼Œç±»ä¼¼äºäººçš„å°è„‘å’Œç¥ç»ã€‚
    
*   æ‰§è¡Œæœºæ„æ˜¯æœºå™¨äººçš„æœºæ¢°éƒ¨åˆ†ï¼Œç±»ä¼¼äºäººçš„æ‰‹å’Œè„šï¼Œä¾‹å¦‚æœºå™¨äººçš„è¡Œèµ°éƒ¨åˆ†å’Œæœºæ¢°è‡‚ã€‚
    

ç›®å‰ï¼Œæœºå™¨äººçš„ç¡¬ä»¶å¹³å°å·²ç»éå¸¸æˆç†Ÿï¼Œç§ç±»ä¹Ÿéå¸¸ä¸°å¯Œã€‚åŒ…æ‹¬ä½†ä¸é™äºé£è¡Œå™¨ã€è½®å¼æœºå™¨äººã€å››è¶³æœºå™¨äººã€äººå½¢æœºå™¨äººã€è½¯ä½“æœºå™¨äººå’Œæ°´ä¸‹æœºå™¨äººç­‰ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥æ ¹æ®ä¸°å¯Œçš„å‚è€ƒèµ„æ–™åˆ¶ä½œç®€æ˜“çš„æœºå™¨äººã€‚åœ¨å­¦ä¹ å’Œå·¥ä½œä¸­ï¼Œå¤§å®¶å¯ä»¥æ ¹æ®å®é™…éœ€æ±‚é€‰æ‹©é€‚åˆçš„æœºå™¨äººå¹³å°ã€‚

2.  ## å·¥æ§æœºä¹‹è¿œç¨‹å¼€å‘ç¯å¢ƒ
    

**åœºæ™¯**

æœºå™¨äººå¹³å°ä¸€èˆ¬è‡ªå¸¦é¢„è£…äº†ROSçš„æ§åˆ¶ç³»ç»Ÿã€‚è¿™å¥—æ§åˆ¶ç³»ç»Ÿä¸æˆ‘ä»¬å‰ä¸€é˜¶æ®µçš„å­¦ä¹ ç¯å¢ƒåŸºæœ¬æ— å¼‚ï¼Œå…·ä½“åˆ°å¼€å‘æˆ–åº”ç”¨å±‚é¢ä¹Ÿå¤§è‡´ç›¸åŒï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©äºå¹³å°å¤–è®¾çš„é¼ æ ‡ã€é”®ç›˜ã€æ˜¾ç¤ºå™¨ç­‰ç›´æ¥åœ¨å…¶ä¸Šå¼€å‘ã€è°ƒè¯•ç¨‹åºæˆ–æ§åˆ¶è¯¥æœºå™¨äººã€‚ä½†æ˜¯åœ¨â€é¢å‘å¹³å°â€œå¼€å‘æ—¶å¯èƒ½é‡åˆ°ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚ï¼š

> 1.  æœºå™¨äººæ˜¯ä¸€è¾†ç§»åŠ¨å¼å¹³å°æ—¶ï¼Œâ€é¢å‘å¹³å°â€œçš„å¼€å‘æ¨¡å¼ä¸‹å¯èƒ½éœ€è¦äººéšè½¦èµ°ï¼Œè¿™æ˜¾ç„¶æ•ˆç‡ä½ä¸‹ï¼Œå¹¶å­˜åœ¨ä¸€å®šçš„å®‰å…¨éšæ‚£ï¼›
>     
> 2.  â€é¢å‘å¹³å°â€œçš„å¼€å‘æ¨¡å¼ï¼Œè¿˜ä¼šå—é™äºç¯å¢ƒã€åœ°å½¢ç­‰è¯¸å¤šå› ç´ çš„çº¦æŸï¼›
>     
> 3.  æœºå™¨äººä¸å¼€å‘äººå‘˜ä¹‹é—´å¯èƒ½æ˜¯ä¸€å¯¹å¤šçš„å…³ç³»ï¼Œä¹Ÿå³å¤šä½å¼€å‘æˆ–æµ‹è¯•å·¥ç¨‹å¸ˆä½¿ç”¨åŒä¸€å°è®¾å¤‡ï¼Œâ€é¢å‘å¹³å°â€œçš„å¼€å‘æ¨¡å¼ä¸‹ä¸å…ä¼šå‡ºç°èµ„æºæŠ¢å çš„æƒ…å†µï¼›
>     

æ€»è€Œè¨€ä¹‹ï¼Œâ€é¢å‘å¹³å°â€œå¼€å‘æœ‰å…¶å¯è¡Œæ€§ï¼Œä½†æ˜¯ä¹Ÿå­˜åœ¨è¯¸å¤šä¸ä¾¿ï¼Œæ­¤èƒŒæ™¯ä¸‹ï¼Œå°±å¯ä»¥é€šè¿‡æ­å»ºè¿œç¨‹å¼€å‘ç¯å¢ƒæ¥è§£å†³ä¸Šè¿°é—®é¢˜äº†ã€‚

**æ¦‚å¿µ**

**è¿œç¨‹å¼€å‘** æ˜¯ä¸€ç§åœ¨è¿œç¨‹ä¸»æœºä¸Šè¿›è¡Œç¼–å†™ã€ç¼–è¯‘æˆ–è¿è¡Œç¨‹åºçš„å¼€å‘æ–¹å¼ã€‚ç›¸å¯¹äºæœ¬åœ°å¼€å‘ï¼Œè¿œç¨‹å¼€å‘éœ€è¦å°†æœ¬åœ°è®¾å¤‡è¿æ¥åˆ°è¿œç¨‹ä¸»æœºï¼Œä»¥å®ç°æ•°æ®ä¼ è¾“å’Œæ“ä½œåŒæ­¥ã€‚

**ä½œç”¨**

è¿œç¨‹å¼€å‘å¯ä»¥å¸¦æ¥ä¸€äº›ä¼˜åŠ¿ï¼Œæ¯”å¦‚æä¾›æ›´å¼ºå¤§çš„è®¡ç®—èµ„æºã€ä¾¿äºå›¢é˜Ÿåä½œã€ç»Ÿä¸€å¼€å‘ç¯å¢ƒç­‰ã€‚åŒæ—¶ï¼Œè¿œç¨‹å¼€å‘ä¹Ÿéœ€è¦è€ƒè™‘ç½‘ç»œå»¶è¿Ÿå’Œç¨³å®šæ€§ç­‰å› ç´ ã€‚æ€»çš„æ¥è¯´ï¼Œè¿œç¨‹å¼€å‘å¯ä»¥æä¾›æ›´çµæ´»å’Œä¾¿æ·çš„å¼€å‘ç¯å¢ƒï¼Œé€‚ç”¨äºä¸åŒåœºæ™¯å’Œéœ€æ±‚ã€‚

**å®ç°æ–¹å¼**

åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ä¸»è¦ä»‹ç»ä¸¤ç§å¸¸ç”¨çš„è¿œç¨‹å¼€å‘æ¨¡å¼ï¼šSSHå’ŒNoMachineã€‚è¿™æ˜¯ä¸¤ç§å¸¸è§çš„è¿œç¨‹è¿æ¥æ–¹å¼ï¼Œå®ƒä»¬åœ¨åŠŸèƒ½å’Œä½¿ç”¨æ–¹å¼ä¸Šæœ‰ä¸€äº›å·®å¼‚ã€‚

*   SSHæ˜¯ä¸€ç§å‘½ä»¤è¡Œç•Œé¢çš„è¿æ¥æ–¹å¼ï¼Œç”¨æˆ·éœ€è¦é€šè¿‡å‘½ä»¤è¡Œè¾“å…¥æŒ‡ä»¤è¿›è¡Œè¿œç¨‹æ“ä½œã€‚å¯¹äºç†Ÿæ‚‰å‘½ä»¤è¡Œçš„ç”¨æˆ·æ¥è¯´ï¼ŒSSHå¯èƒ½æ›´åŠ çµæ´»å’Œé«˜æ•ˆã€‚
    
*   NoMachineæä¾›äº†å›¾å½¢ç•Œé¢çš„è¿œç¨‹è¿æ¥ï¼Œç”¨æˆ·å¯ä»¥ç›´è§‚åœ°æ“ä½œè¿œç¨‹è®¡ç®—æœºçš„æ¡Œé¢ã€‚å®ƒæ”¯æŒçª—å£ã€å¤šæ˜¾ç¤ºå™¨å’Œæ–‡ä»¶ä¼ è¾“ç­‰åŠŸèƒ½ï¼Œé€‚åˆé‚£äº›éœ€è¦å›¾å½¢ç•Œé¢çš„è¿œç¨‹æ“ä½œã€‚
    

æ€»çš„æ¥è¯´ï¼ŒSSHæ›´é€‚åˆéœ€è¦æ‰§è¡Œå‘½ä»¤è¡Œæ“ä½œå’Œå¿«é€Ÿè®¿é—®çš„åœºæ™¯ï¼Œè€ŒNoMachineæ›´é€‚åˆéœ€è¦å›¾å½¢ç•Œé¢è¿œç¨‹æ¡Œé¢è®¿é—®çš„åœºæ™¯ã€‚é€‰æ‹©å“ªç§æ–¹å¼åº”è¯¥æ ¹æ®å…·ä½“çš„éœ€æ±‚å’Œä½¿ç”¨ä¹ æƒ¯æ¥å†³å®šã€‚

1.  ### è¿œç¨‹å¼€å‘SSH
    

è¯¦è§[Vinciæœºå™¨äººé˜ŸLinuxå…¥é—¨æ•™ç¨‹](https://sdutvincirobot.feishu.cn/wiki/GIKnwJo39iREkHkFGvqcy5Osntc)

2.  ### è¿œç¨‹è®¿é—®æ¡Œé¢
    

è¯¦è§[Vinciæœºå™¨äººé˜ŸLinuxå…¥é—¨æ•™ç¨‹](https://sdutvincirobot.feishu.cn/wiki/GIKnwJo39iREkHkFGvqcy5Osntc)

3.  ## å·¥æ§æœºä¹‹å¤–æ¥USBè®¾å¤‡
    

è¯¦è§[Vinciæœºå™¨äººé˜ŸLinuxå…¥é—¨æ•™ç¨‹](https://sdutvincirobot.feishu.cn/wiki/GIKnwJo39iREkHkFGvqcy5Osntc)

4.  ## åˆ†å¸ƒå¼æ­å»º
    

åœ¨ **ROS2å…¶ä»–é€šä¿¡æœºåˆ¶** ç« èŠ‚é‡Œ

  

5.  ## ä¼˜åŒ–æ—¥å¿—
    

åœ¨å®é™…åº”ç”¨ä¸Š,æˆ‘ä»¬å¾ˆå°‘ä½¿ç”¨`RCLCPP_INFO`,åŸå› æ˜¯æ‰“å°æ•°æ®å¼€é”€å¤ªå¤§,åƒNvidia Jetson Xavierç­‰å·¥æ§æœºè®¾å¤‡å¯èƒ½åƒä¸æ¶ˆ.

åƒä¸‹æ–¹è¿™ä¸ªå›¾å°±æ˜¾ç¤ºäº†åœ¨æ ‘è“æ´¾4bä¸‹æ‰“å°çš„å¼€é”€:

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjlkYjJkOTQyMGUxNzZmZTA5MWFjZTE5OWQyZTBhYzlfWndvVVk3ckcyRmhRNjlnOTlFb0Nua1FLWFBqSU90azdfVG9rZW46VXlnRWJLVlNZbzRMNU94aWZsQ2NmWUFRbkFWXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

ç”±äºæˆ‘ä»¬æƒ³é¿å…é‚£ä¹ˆå¤§çš„å¼€é”€,åˆæƒ³åœ¨å¿…è¦æ—¶æŸ¥çœ‹æ‰“å°çš„æ•°æ®è¿›è¡Œè°ƒè¯•,æ‰€ä»¥æˆ‘ä»¬å¸¸é‡‡ç”¨`RCLCPP_DEBUG`æ¥æ‰“å°æ•°æ®,åœ¨å¿…è¦æ—¶æœŸæ‰æ‰“å°æ•°æ®.

`RCLCPP_DEBUG` **çš„æ ¸å¿ƒä½œç”¨**

*   **è°ƒè¯•ä¸“ç”¨** ï¼šä»…åœ¨è°ƒè¯•é˜¶æ®µè¾“å‡ºä¿¡æ¯ï¼Œç”Ÿäº§ç¯å¢ƒè‡ªåŠ¨é™é»˜
    
*   **æ€§èƒ½ä¼˜åŒ–** ï¼šé€šè¿‡ç¼–è¯‘é€‰é¡¹å®Œå…¨ç§»é™¤è°ƒè¯•ä»£ç ï¼Œé›¶è¿è¡Œæ—¶å¼€é”€
    
*   **åˆ†çº§æ§åˆ¶** ï¼šä¸å…¶ä»–æ—¥å¿—çº§åˆ«ï¼ˆINFO/WARN/ERRORï¼‰è§£è€¦
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2YyYjg0ZDM3YWU0MDk1OWYwNWY5YWI5NmRlMDBmYzBfYlVZT3A5bFBRVjNvY1NlOVFLVHVhb3J3dFFNcUM2S2hfVG9rZW46UU1mMGJ4SjNub0Z4Yzh4ZVhXR2N4U3ptbjFjXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

  

**æ‰“å°å‡ºæ¥rclcpp\_debugçš„æ–¹å¼:**

**æ–¹å¼ä¸€:**

```Bash
ros2 run <package_name> <node_name> --ros-args --log-level debug
```

**æ–¹å¼äºŒ:**

```Python
from launch import LaunchDescription
from launch_ros.actions import Node

def generate_launch_description():
    return LaunchDescription([
        Node(
            package='my_package',
            executable='my_node',
            name='my_node',
            output='screen',
            parameters=[],
            arguments=['--ros-args', '--log-level', 'debug']
        )
    ])

```

`/opt/ros/humble/include/rcutils/rcutils/logging.h`å®šä¹‰ï¼š

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzdlY2ZhZWQ0MmRkMzc5MmRjMDhmYjk4MTA4YzkzNTdfdHROV2RGcHc1MXM3eVA3OGNzYk5nWG5QTXJFT0k5ZVZfVG9rZW46VUdVQWJwWFppb0FTVTN4RUc1YmNlSzNmbm5mXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

  

  

6.  ## ç¡¬ä»¶å¹³å°
    

ç¡¬ä»¶å¹³å°çš„é€‰æ‹©æ˜¯å…·æœ‰å¤šæ ·æ€§çš„ï¼Œæ¯”å¦‚ï¼šè½®å¼åº•ç›˜ã€ä¸¤è¶³æˆ–å››è¶³æœºå™¨äººã€æ— äººæœºç­‰ç­‰ã€‚ç°åœ¨ç¡¬ä»¶å¹³å°ç›¸å…³æŠ€æœ¯å‘å±•çš„å·²ç»æ¯”è¾ƒæˆç†Ÿäº†ï¼Œå¯ä»¥è‡ªå·±åˆ¶ä½œï¼Œä¹Ÿå¯ä»¥ç›´æ¥é‡‡è´­ï¼Œå‡è®¾é€‰æ‹©åè€…çš„è¯ï¼Œé‚£ä¹ˆè´­ä¹°åï¼Œå…³äºå…·ä½“ä½¿ç”¨ï¼Œå¯ä»¥å‚è€ƒé…å¥—çš„ä½¿ç”¨æ‰‹å†Œã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¾›åº”å•†ä¼šæä¾›å¯¹åº”çš„é©±åŠ¨åŒ…ï¼Œç›´æ¥ä¸‹è½½å¹¶ç¼–è¯‘æ‰§è¡Œå³å¯é©±åŠ¨ç¡¬ä»¶å¹³å°ï¼Œå½“ç„¶å¦‚æœæ˜¯é›†æˆäº†ä¸Šä½æœºçš„æ•´å¥—æœºå™¨äººæ–¹æ¡ˆï¼Œé‚£ä¹ˆä¸€èˆ¬å·²ç»é¢„ç½®äº†é©±åŠ¨ç¨‹åºï¼Œå±Šæ—¶ç›´æ¥è¿è¡Œå³å¯ã€‚

æœºå™¨äººä¸‹ä½æœºå¸¸ç”¨çš„å¼€å‘æ¿æœ‰STM32ï¼ŒESP32ï¼ŒGD32ï¼ŒArduinoï¼Œ51MCUç­‰ç­‰ã€‚ï¼ˆä¸æ‡‚çš„é—®æ§åˆ¶ç»„å’Œç”µè·¯ç»„ï¼‰

ä¸æœºå™¨äººä¸‹ä½æœºå¼€å‘æ¿é€šä¿¡å¸¸ç”¨çš„æœ‰ä¸²å£é€šä¿¡ï¼ŒMicroROSç­‰æ–¹å¼ï¼Œå¯ä»¥çœ‹ä¸Šæ–¹çš„æ•™ç¨‹ã€‚

æˆ‘ä»¬å¯ä»¥è®©ä¸‹ä½æœºä¼ ç»™ä¸Šä½æœºçš„æ•°æ®æœ‰é‡Œç¨‹è®¡ODOMæ•°æ®ï¼Œæƒ¯æ€§è®¡IMUæ•°æ®ï¼Œå…¨çƒå®šä½GNSSæ•°æ®ç­‰ç­‰ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥è®©è¿™äº›è®¾å¤‡ç›´æ¥ä¸å·¥æ§æœºé€šä¿¡ï¼Œè®©å·¥æ§æœºå¤„ç†å¥½æœºå™¨äººçš„å®šä½ä¿¡æ¯å†ä¸€èµ·ä¼ ç»™ä¸‹ä½æœºã€‚

ä¸‹é¢éœ€è¦ä»‹ç»è¿™äº›æ•°æ®å¦‚ä½•è¿›è¡Œä¼ è¾“ã€‚

  

è‡ªå·±å†™çš„å¤§éƒ¨åˆ†æºç ä»…ä¾›å‚è€ƒï¼Œå¦‚æœæœ‰æ›´å¥½çš„æ€è·¯å¯ä»¥è¯´ï¼š

æˆ‘ç”¨Jazzyç‰ˆæœ¬å¤šä¸€äº›ï¼Œä¸€åˆ‡ä»¥Jazzyç‰ˆæœ¬ä¸ºæœ€ç»ˆå‚è€ƒï¼ŒHumbleå…¶å®ä¸Jazzyæœ€å¤§åŒºåˆ«å°±æ˜¯Gazebo,å…³äºGazeboçš„ä»£ç å¯ä»¥çœ‹Humbleä»“åº“çš„ã€‚

https://github.com/CyberNaviRobot/CyberRobot\_ROS2\_Humble\_WS

https://github.com/CyberNaviRobot/CyberRobot\_ROS2\_Jazzy\_WS

  

  

1.  ### é‡Œç¨‹è®¡Odom
    

1.  #### åŠŸèƒ½åŒ…åˆ›å»º
    

ä¸ä¸€å®šéå¾—è¦ç ç›˜(é‡Œç¨‹è®¡Odom)çš„æ•°æ®ï¼Œåªè¦æŠŠæœºå™¨äºº6ä¸ªè‡ªç”±åº¦DOFï¼Œå¯ä»¥ç”±ç”µæœºç¼–ç å™¨è®¡ç®—è€Œæ¥ï¼ˆx,y,z,yaw,pitch,rollä¸æ‡‚çš„çœ‹ä¸Šæ–¹Moveit2é‡Œçš„æ•™å­¦ï¼‰å…¨éƒ¨å‘è¿‡æ¥å°±è¡Œã€‚

é¦–å…ˆå…ˆåˆ›å»ºåŠŸèƒ½åŒ…

```Bash
ros2 pkg create odom_plumb --build-type ament_cmake --dependencies rclcpp nav_msgs geometry_msgs tf2_ros --node-name odom_node
```

å…ˆç¼–è¯‘ä¸€ä¸‹

```Bash
colcon build --cmake-args -DCMAKE_EXPORT_COMPILE_COMMANDS=ON
```

  

2.  #### æ¶ˆæ¯æ¥å£
    

åº•ç›˜é©±åŠ¨å¯åŠ¨ä¹‹åï¼Œä¼šæŒç»­å¹¿æ’­ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„æ•°æ®â€”â€”é‡Œç¨‹è®¡ã€‚é‡Œç¨‹è®¡ç”¨äºæè¿°å½“å‰æœºå™¨äººç›¸å¯¹äºå‡ºå‘ç‚¹çš„ä½å§¿ä»¥åŠé€Ÿåº¦ç­‰ä¿¡æ¯ï¼Œé‡Œç¨‹è®¡åœ¨æœºå™¨äººå®šä½å’Œå¯¼èˆªçš„å±€éƒ¨è·¯å¾„è§„åˆ’ä¸­æœ‰ç€é‡è¦çš„ä½œç”¨ã€‚åœ¨ROS2ä¸­é‡Œç¨‹è®¡æ¶ˆæ¯è¢«å°è£…ä¸ºäº†`nav_msgs/msg/Odometry`æ¥å£ï¼Œå¯é€šè¿‡æŒ‡ä»¤`ros2 interface show nav_msgs/msg/Odometry`æŸ¥çœ‹è¯¥æ¥å£çš„å…·ä½“æ•°æ®ç»“æ„ï¼Œç»“æœå¦‚ä¸‹ï¼š

å®ƒæè¿°çš„æ˜¯æœºå™¨äººä½å§¿ä¸é€Ÿåº¦çš„é¢„ä¼°ä¿¡æ¯ã€‚ å…¶ä¸­ä½å§¿ä¿¡æ¯æ˜¯ä»¥headerä¸­çš„frame\_idä¸ºå‚è€ƒç³»çš„ï¼Œè€Œé€Ÿåº¦ä¿¡æ¯åˆ™æ˜¯ä»¥child\_frame\_idä¸ºå‚è€ƒç³»çš„ã€‚

åœ¨ **ROS2** ä¸­ï¼Œ **odom åæ ‡ç³»** ï¼ˆé€šå¸¸æ˜¯ `odom` frameï¼‰éµå¾ª **å³æ‰‹åæ ‡ç³»** ï¼Œå…¶å®šä¹‰å¦‚ä¸‹ï¼š

*   **X è½´** ï¼šå‘å‰ï¼ˆå‰è¿›æ–¹å‘ï¼‰ä¸º **æ­£**
    
*   **Y è½´** ï¼šå‘å·¦ï¼ˆå·¦ä¾§æ–¹å‘ï¼‰ä¸º **æ­£**
    
*   **Z è½´** ï¼šå‘ä¸Šï¼ˆå‚ç›´åœ°é¢ï¼‰ä¸º **æ­£**
    

åœ¨ **ROS2 çš„ odom åæ ‡ç³»** ï¼ˆå³æ‰‹åæ ‡ç³»ï¼‰ä¸­ï¼Œ **yaw è§’çš„å®šä¹‰** å¦‚ä¸‹ï¼š

*   **yaw = 0** ï¼šæœºå™¨äººé¢å‘ **X è½´æ­£æ–¹å‘** ï¼ˆå‘å‰ï¼‰ã€‚
    
*   **é€†æ—¶é’ˆï¼ˆCCWï¼ŒCounter Clockwiseï¼‰æ—‹è½¬ä¸ºæ­£** ã€‚
    
*   **é¡ºæ—¶é’ˆï¼ˆCWï¼ŒClockwiseï¼‰æ—‹è½¬ä¸ºè´Ÿ** ã€‚
    

**yaw è§’èŒƒå›´**

*   `yaw âˆˆ (-Ï€, Ï€]` **ï¼ˆå³ `-180Â°` åˆ° `180Â°`ï¼‰**
    
*   å½“ `yaw = Ï€`ï¼ˆ180Â°ï¼‰ï¼Œå¦‚æœç»§ç»­å¢åŠ ï¼Œåº”è¯¥è·³è½¬åˆ° `-Ï€`ï¼ˆ-180Â°ï¼‰ï¼Œè€Œä¸æ˜¯ `Ï€`ã€‚
    
*   å½“ `yaw = -Ï€`ï¼ˆ-180Â°ï¼‰ï¼Œå¦‚æœç»§ç»­å‡å°‘ï¼Œåº”è¯¥è·³è½¬åˆ° `Ï€`ï¼ˆ180Â°ï¼‰ã€‚
    

```Plain Text
std_msgs/Header header # æ ‡å¤´
    builtin_interfaces/Time stamp # æ—¶é—´æˆ³
        int32 sec
        uint32 nanosec
    string frame_id # ä½å§¿ä¿¡æ¯æ‰€å‚è€ƒçš„åæ ‡ç³»
ä½å§¿ä¿¡æ¯æ‰€æŒ‡å‘çš„åæ ‡ç³»ï¼Œä¹Ÿæ˜¯é€Ÿåº¦ä¿¡æ¯æ‰€å‚è€ƒçš„åæ ‡ç³»
string child_frame_id
ç›¸å¯¹äºframe_idçš„é¢„ä¼°ä½å§¿ä¿¡æ¯
geometry_msgs/PoseWithCovariance pose
    Pose pose
        Point position # åæ ‡
            float64 x
            float64 y
            float64 z
        Quaternion orientation # å››å…ƒæ•°
            float64 x 0
            float64 y 0
            float64 z 0
            float64 w 1
    float64[36] covariance
ç›¸å¯¹äºchild_frame_idçš„é¢„ä¼°çº¿é€Ÿåº¦ä¸è§’é€Ÿåº¦
geometry_msgs/TwistWithCovariance twist
    Twist twist
        Vector3  linear # çº¿é€Ÿåº¦
            float64 x
            float64 y
            float64 z
        Vector3  angular # è§’é€Ÿåº¦
            float64 x
            float64 y
            float64 z
    float64[36] covariance
```

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ

1.  åæ ‡å’Œä½å§¿æ˜¯ç›¸å¯¹äº**frame\_id**çš„ï¼Œä¸€èˆ¬æ˜¯odomè‡ªå·±ã€‚
    
2.  è€Œçº¿é€Ÿåº¦å’Œè§’é€Ÿåº¦æ˜¯ç›¸å¯¹äº**child\_frame\_id**çš„ã€‚ä¸€èˆ¬æ˜¯base\_link **ã€‚** ï¼ˆè¿™é‡Œæ³¨æ„ï¼Œå­¦é•¿æˆ‘æœ€åˆå°±å¼„é”™äº†ï¼‰
    
3.  è™½ç„¶Twistæ˜¯ç›¸å¯¹äºchild\_frame\_id **ï¼ˆ** base\_linkï¼‰çš„ï¼Œä½†æ˜¯ä»–è¡¨è¾¾çš„æ˜¯**ç¬æ—¶å€¼**ï¼Œå°±å’Œæ±½è½¦ä¸€æ ·ï¼Œæ±½è½¦ä¸Šé¢çš„é€Ÿåº¦è¡¨ä¹Ÿæ˜¯ç›¸å¯¹äºè½¦èº«çš„**ç¬æ—¶å€¼**ã€‚
    
4.  é‡Œç¨‹è®¡åœ¨è®¡ç®—æ—¶æ˜¯å­˜åœ¨ç´¯è®¡è¯¯å·®çš„ï¼Œå®ƒæ‰€æè¿°çš„æ˜¯æœºå™¨äººçš„é¢„ä¼°ä½å§¿ï¼Œå¹¶ä¸ç»å¯¹å‡†ç¡®ã€‚
    

  

  

3.  #### èŠ‚ç‚¹ä¸»è¦é€»è¾‘
    

æ‰€ä»¥æˆ‘ä»¬éœ€è¦åˆå§‹åŒ–`nav_msgs::msg::Odometry`å¹¶å‘å¸ƒå‡ºå»ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmVkOTYxNjg0ZjhkYzk2NmUxNTQ1MGUxYTBiZjk2NjVfYkZCdFRXQndOZGR4ZWNjc1FKbUVGQXFTaHdnMTNReU1fVG9rZW46Q2htZWJaRWhKb1VTZDB4b1d1SGNXcDF6bmR4XzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGQ4ZjZhMzQ2MWQzMzgwN2E1MzdkNTM2NTUxMzMzYjBfQWxYeGN4VXVMT0NDeDBDTGxodGhpYWFMS3J5Um92NzBfVG9rZW46QmFTdWJBbXpyb041Qjh4SnZZMmNldVNabllkXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NGNjM2RjZmM5MTZjZTI5OTMyZWNjNDEyOTJjMjZhMGJfQ2tYVDhtWDNkODFucmFMWDBCMmxzdU9iUFh1b3VHRllfVG9rZW46Rk50c2JFU2Yxb3l1TEJ4NmIxd2NOMURUbm9ZXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2IyZGE4YWNmYjYwNWM2ZWEzYzkwZWM2ZjNiNWZhNTVfNk12Z1A1RmtsQzN2anlKQVNDUzNFTmR1Q3JPUU5Td3ZfVG9rZW46UTFGUWJHZnFEb0hqTUV4WDhKRmM1UUZ6bmljXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

æ‰€ä»¥ä½ éœ€è¦ä»MCUå•ç‰‡æœºä¸Šå»è·å–è¿™äº›æ•°æ®ï¼Œæˆ–è€…è®¡ç®—è¿™äº›æ•°æ®ï¼Œå¹¶ä»¥`nav_msgs::msg::Odometry`ç±»å‹çš„æ¶ˆæ¯å‘é€å‡ºå»ã€‚

æ³¨æ„ï¼Œå¦‚æœä½ æ²¡æœ‰æ­£å„¿å…«ç»çš„é‡Œç¨‹è®¡ï¼Œé‚£ä¹ˆé‡Œç¨‹è®¡çš„æ•°æ®å¯ä»¥ç”±åº•ç›˜ç”µæœºç¼–ç å™¨æ•°æ®è®¡ç®—è€Œæˆã€‚

é™¤äº†å‘å¸ƒè¯é¢˜çš„ä»£ç ï¼Œåˆ«å¿˜è®°å‘å¸ƒodomä¸base\_linkä¹‹é—´çš„åŠ¨æ€åæ ‡å˜æ¢ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGY5Y2I0YzZjNjIwZDA0OTI4YmEzOGI3YTdiOTFlYWJfaHZOR0hUTXByaFZmczdFSTlubms2RWlzU0JiMXU3ZHRfVG9rZW46SmZ3Z2JHT1FEb1ZQeWF4VVVCYWN1OUhpblBiXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

ä¸‹æ–¹æ˜¯è¿åŠ¨å­¦æ­£è§£ç®—å‡ºæ¥çš„odomæ•°æ®:

```C++
#include "odom_mg513.h"
#include "mg513_gmr500ppr.h"
//#include <cmath>
#include "arm_math.h"

ODOM_Motor odom_motor_;

// åæ ‡ç³»æ»¡è¶³å³æ‰‹åæ ‡ç³»

//ï¼ˆå•ä½ï¼šç±³ï¼‰
//è½®è·
extern fp32 Wheel_Spacing;
//è½´è·
extern fp32 Alex_Spacing;
//è½®å­åŠå¾„
extern fp32 Wheel_Radius;

void ODOM_Motor::Analysis(fp32 dt)
{
  this->dt = dt;
  for(int16_t i = 0;i < 4;i++)
    {
        // å°† RPM è½¬æ¢ä¸º m/s
      encoder_wheel_velocities_[i] = mg513_gmr500ppr_motor[i].encoder.motor_data.motor_speed  * 2.0f * 3.14159265358979f * Wheel_Radius / 60.0f;
    }
    // è®¡ç®—æœºå™¨äººå‰è¿›çš„çº¿é€Ÿåº¦å’Œè§’é€Ÿåº¦ï¼Œå…¬å¼ä¸éœ€è¦è½®åŠå¾„
    //çº¿é€Ÿåº¦ï¼Œå››ä¸ªè½®å­åœ¨æœºå™¨äººçš„è¿åŠ¨å­¦æ¨¡å‹ä¸­è´¡çŒ®ç›¸åŒï¼Œæ‰€ä»¥è¦é™¤ä»¥4
    this->vx = ( encoder_wheel_velocities_[0] + encoder_wheel_velocities_[1] - encoder_wheel_velocities_[2] - encoder_wheel_velocities_[3]) / 4.0f;
    this->vy = ( encoder_wheel_velocities_[0] - encoder_wheel_velocities_[1] - encoder_wheel_velocities_[2] + encoder_wheel_velocities_[3]) / 4.0f;

    //çº¿é€Ÿåº¦ï¼Œè½®è·ï¼ˆwheel_spacingï¼‰ å†³å®šäº†å·¦å³è½®å¯¹æ—‹è½¬çš„è´¡çŒ®ç¨‹åº¦ï¼Œè½´è·ï¼ˆalex_spacingï¼‰ å†³å®šäº†å‰åè½®å¯¹æ—‹è½¬çš„è´¡çŒ®ç¨‹åº¦ï¼Œ
    //æ‰€ä»¥è¦é™¤ä»¥åº•ç›˜å°ºå¯¸ï¼Œalex_spacing + wheel_spacing æ˜¯åº•ç›˜å°ºå¯¸ã€‚
    this->vw = (-encoder_wheel_velocities_[0] - encoder_wheel_velocities_[1] - encoder_wheel_velocities_[2] - encoder_wheel_velocities_[3]) / (4.0f * (Wheel_Spacing + Alex_Spacing));

    // æ›´æ–°æœºå™¨äººçš„ä½ç½®ï¼ˆå‡è®¾æœºå™¨äººæ²¿ç€yè½´ç§»åŠ¨ï¼‰
//     this->x_position += this->vx * std::__math::cos(this->yaw) * this->dt;  
//     this->y_position += this->vy * std::__math::sin(this->yaw) * this->dt;
    this->x_position += this->vx * arm_cos_f32(this->yaw) * this->dt;  
    this->y_position += this->vy * arm_sin_f32(this->yaw) * this->dt;
    this->yaw += this->vw * this->dt;

    // ä¿è¯ yaw å§‹ç»ˆåœ¨ -PI åˆ° PI ä¹‹é—´
    if(this->yaw > 3.14159265358979f) 
    {
      this->yaw -= 2.0 * 3.14159265358979f;
    }
    if(this->yaw < -3.14159265358979f) 
    {
      this->yaw += 2.0 * 3.14159265358979f;
    }
    
//    this->yaw_deg = this->yaw *  180.0f / 3.14159265358979f;
   
    
}

```

  

ROS2æ€»ä»£ç å¦‚ä¸‹ï¼š

```C++
#include "rclcpp/rclcpp.hpp"
#include "serial_driver/serial_driver.hpp"
#include <chrono>
#include <functional>
#include <rclcpp/logging.hpp>
#include <string>
#include "sensor04_odom_kc/serial_pack.h"
#include "geometry_msgs/msg/twist.hpp"
#include "nav_msgs/msg/odometry.hpp"
#include <tf2/LinearMath/Quaternion.h>
#include <tf2_ros/transform_broadcaster.h>

extern std::vector<uint8_t> tx_data_buffer;

class Odom_KC_Node : public rclcpp::Node
{
public:
  Odom_KC_Node() : Node("Odom_KC_Node")
  {
    // å£°æ˜å‚æ•°ï¼ˆå¸¦é»˜è®¤å€¼ï¼‰
    // ä¸²å£è®¾å¤‡é»˜è®¤åï¼ˆæ ¹æ®å®é™…è®¾å¤‡è°ƒæ•´ï¼‰
    this->declare_parameter("device_name", "/dev/ttyACM1");
    //ä¸²å£é»˜è®¤æ³¢ç‰¹ç‡
    this->declare_parameter("baud_rate", 115200);

    // è·å–å‚æ•°å€¼
    const std::string device_name = this->get_parameter("device_name").as_string();
    const uint32_t baud_rate = this->get_parameter("baud_rate").as_int();

    RCLCPP_INFO(this->get_logger(), "Serial port Node Open!");
    // åˆ›å»ºä¸²å£é…ç½®å¯¹è±¡
    // æ³¢ç‰¹ç‡é»˜è®¤115200ï¼›ä¸å¼€å¯æµæ§åˆ¶ï¼›æ— å¥‡å¶æ•ˆéªŒï¼›åœæ­¢ä½1ã€‚
    drivers::serial_driver::SerialPortConfig config(
        baud_rate,
        drivers::serial_driver::FlowControl::NONE,
        drivers::serial_driver::Parity::NONE,
        drivers::serial_driver::StopBits::ONE);
    
    // åˆå§‹åŒ–ä¸²å£
    try
    {
      io_context_ = std::make_shared<drivers::common::IoContext>(1);
      // åˆå§‹åŒ– serial_driver_
      serial_driver_ = std::make_shared<drivers::serial_driver::SerialDriver>(*io_context_);
      serial_driver_->init_port(device_name, config);
      serial_driver_->port()->open();
      
      RCLCPP_INFO(this->get_logger(), "Serial port initialized successfully");
      RCLCPP_INFO(this->get_logger(), "Using device: %s", serial_driver_->port().get()->device_name().c_str());
      RCLCPP_INFO(this->get_logger(), "Baud_rate: %d", config.get_baud_rate());
    }
    catch (const std::exception &ex)
    {
      RCLCPP_ERROR(this->get_logger(), "Failed to initialize serial port: %s", ex.what());
      return;
    }

    //ä¸²å£å‘å¸ƒæ–¹
    odom_pub_ = this->create_publisher<nav_msgs::msg::Odometry>("odom",10);

    //åˆå§‹åŒ–tfå¹¿æ’­å™¨
    tf_broadcaster_ = std::make_unique<tf2_ros::TransformBroadcaster>(*this);

    //åˆå§‹åŒ–cmd_velæ¶ˆæ¯è®¢é˜…
    cmd_vel_sub_ = this->create_subscription<geometry_msgs::msg::Twist>("cmd_vel",10,std::bind(&Odom_KC_Node::cmd_vel_sub_callback,this,std::placeholders::_1));

    async_receive_message();   //è¿›å…¥å¼‚æ­¥æ¥æ”¶
  }

private:
  std::shared_ptr<drivers::serial_driver::SerialDriver> serial_driver_;
  std::shared_ptr<drivers::common::IoContext> io_context_;
  
  rclcpp::Publisher<nav_msgs::msg::Odometry>::SharedPtr odom_pub_;
  std::unique_ptr<tf2_ros::TransformBroadcaster> tf_broadcaster_;

  rclcpp::Subscription<geometry_msgs::msg::Twist>::SharedPtr cmd_vel_sub_;

  // // å››ä¸ªè½®å­çš„é€Ÿåº¦(å¯¹åº”å•ç‰‡æœºçš„é¡ºåº)ï¼ˆå•ä½ï¼šrpmï¼‰
  // fp32 received_encoder_wheel_velocities_[4] = {0.0, 0.0, 0.0, 0.0};
  // // å››ä¸ªè½®å­çš„é€Ÿåº¦(å¯¹åº”å•ç‰‡æœºçš„é¡ºåº)ï¼ˆå•ä½ï¼šm/sï¼‰
  // fp32 encoder_wheel_velocities_[4] = {0.0, 0.0, 0.0, 0.0};  

  // // å››ä¸ªè½®å­çš„é€Ÿåº¦(å¯¹åº”å•ç‰‡æœºçš„é¡ºåº)ï¼ˆå•ä½ï¼š2000pcï¼‰
  // fp32 received_encoder_wheel_angle_[4] = {0.0, 0.0, 0.0, 0.0};

  //éº¦å…‹çº³å§†è½®åº•ç›˜å‚æ•°
  const fp32 wheel_spacing = 0.093; // è½®é—´è·ï¼ˆå•ä½ï¼šç±³ï¼‰
  const fp32 alex_spacing = 0.085; // è½®è·ï¼ˆå•ä½ï¼šç±³ï¼‰
  const fp32 wheel_radius_ = 0.0375; // è½®å­åŠå¾„ï¼ˆå•ä½ï¼šç±³ï¼‰
  

  fp32 vy=0.0,vx=0.0,vw=0.0;
  fp32 yaw_ = 0.0; // æœºå™¨äººèˆªå‘è§’ï¼ˆå•ä½ï¼šå¼§åº¦ï¼‰
  fp32 dt_;

  fp32 x_position_ = 0.0; // xä½ç½®
  fp32 y_position_ = 0.0; // yä½ç½®
  

  void async_receive_message()  //åˆ›å»ºä¸€ä¸ªå‡½æ•°æ›´æ–¹ä¾¿é‡æ–°è°ƒç”¨
  {
    auto port = serial_driver_->port();

    // è®¾ç½®æ¥æ”¶å›è°ƒå‡½æ•°
    port->async_receive([this](const std::vector<uint8_t> &data,const size_t &size) 
    {
      //åˆ›å»ºodomæ¶ˆæ¯ç±»å‹
      auto odom_msg = nav_msgs::msg::Odometry();

        if (size > 0)
        {
          for(int16_t i = 0;i < (int16_t)size;++i)
          {
            uint8_t data_buffer = data[i];
            // å¤„ç†æ¥æ”¶åˆ°çš„æ•°æ®
            serial_pack_.rx.Data_Analysis(
              &data_buffer,
              0x01,
            0,
            0,
            0,
            0,
            8);
          }
          //ç”±äºåœ¨ROS2ä¸­ï¼Œnodeæ˜¯å±€éƒ¨å˜é‡ï¼Œæ‰€ä»¥å‘å¸ƒæ–¹åªèƒ½åœ¨nodeç±»é‡Œï¼Œæ•…Data_Applyä¸å†™ä»»ä½•ä¸œè¥¿ï¼Œç›´æ¥åœ¨æ¥æ”¶ä¸‹é¢çš„å›è°ƒå‡½æ•°é‡Œå®ç°åŠŸèƒ½ã€‚
          if(serial_pack_.rx.data.cmd == 0x01)
          {
            RCLCPP_DEBUG(this->get_logger(), "\n");
            RCLCPP_DEBUG(this->get_logger(), "ä»¥ä¸‹æ˜¯ç”µæœºç¼–ç å™¨çš„odomæ•°æ®ï¼š");

            // // å­˜å‚¨ç”µæœºé€Ÿåº¦æ•°æ®
            // received_encoder_wheel_velocities_[0] = serial_pack_.rx.data.fp32_buffer[0];  // ç”µæœº 0 é€Ÿåº¦
            // received_encoder_wheel_velocities_[1] = serial_pack_.rx.data.fp32_buffer[1];  // ç”µæœº 1 é€Ÿåº¦
            // received_encoder_wheel_velocities_[2] = serial_pack_.rx.data.fp32_buffer[2];  // ç”µæœº 2 é€Ÿåº¦
            // received_encoder_wheel_velocities_[3] = serial_pack_.rx.data.fp32_buffer[3];  // ç”µæœº 3 é€Ÿåº¦

            // // å­˜å‚¨ç”µæœºä½ç½®æ•°æ®
            // received_encoder_wheel_angle_[0] = serial_pack_.rx.data.fp32_buffer[4];  // ç”µæœº 0 ä½ç½®
            // received_encoder_wheel_angle_[1] = serial_pack_.rx.data.fp32_buffer[5];  // ç”µæœº 1 ä½ç½®
            // received_encoder_wheel_angle_[2] = serial_pack_.rx.data.fp32_buffer[6];  // ç”µæœº 2 ä½ç½®
            // received_encoder_wheel_angle_[3] = serial_pack_.rx.data.fp32_buffer[7];  // ç”µæœº 3 ä½ç½®

            // vx = serial_pack_.rx.data.fp32_buffer[8];
            // vy = serial_pack_.rx.data.fp32_buffer[9];
            // vw = serial_pack_.rx.data.fp32_buffer[10];
            // yaw_ = serial_pack_.rx.data.fp32_buffer[11];
            // dt_ = serial_pack_.rx.data.fp32_buffer[12];
            // x_position_ = serial_pack_.rx.data.fp32_buffer[13];
            // y_position_ = serial_pack_.rx.data.fp32_buffer[14];

            vx = serial_pack_.rx.data.fp32_buffer[0];
            vy = serial_pack_.rx.data.fp32_buffer[1];
            vw = serial_pack_.rx.data.fp32_buffer[2];
            yaw_ = serial_pack_.rx.data.fp32_buffer[3];
            dt_ = serial_pack_.rx.data.fp32_buffer[4];
            x_position_ = serial_pack_.rx.data.fp32_buffer[5];
            y_position_ = serial_pack_.rx.data.fp32_buffer[6];

            // æ‰“å°ç”µæœºé€Ÿåº¦å’Œä½ç½®ï¼ˆè§’åº¦ï¼‰
            for (int i = 0; i < 4; ++i) 
            {
                // RCLCPP_DEBUG(this->get_logger(), "%då·ç”µæœºçš„é€Ÿåº¦: %.6f RPM, ä½ç½®: %.6f (2000pc)",
                //             i, received_encoder_wheel_velocities_[i], received_encoder_wheel_angle_[i]);

                RCLCPP_DEBUG(this->get_logger(),"çº¿é€Ÿåº¦:x:%.6f,y:%.6f,z:%.6f",vx,vy,0.0f);
                RCLCPP_DEBUG(this->get_logger(),"è§’é€Ÿåº¦:x:%.6f,y:%.6f,z:%.6f",0.0f,0.0f,vw);
                RCLCPP_DEBUG(this->get_logger(),"æ¬§æ‹‰è§’(é€†æ­£é¡ºè´Ÿ):r:%.6f,p:%.6f,y:%.6f",0.0f,0.0f,yaw_);
                RCLCPP_DEBUG(this->get_logger(),"ç§¯åˆ†é—´éš”:%.6f",dt_);
                RCLCPP_DEBUG(this->get_logger(),"å³æ‰‹åæ ‡ç³»Xåæ ‡(å‰æ­£åè´Ÿ):%.6f",x_position_);
                RCLCPP_DEBUG(this->get_logger(),"å³æ‰‹åæ ‡ç³»Yåæ ‡(å·¦æ­£å³è´Ÿ):%.6f",y_position_);
            }

            //æ—¶é—´æˆ³
            odom_msg.header.stamp = this->get_clock()->now();

            //ä½å§¿ä¿¡æ¯æ‰€å‚è€ƒçš„åæ ‡ç³»
            odom_msg.header.frame_id = "odom";

            // è®¾ç½®child_frame_idï¼ˆåº•ç›˜åæ ‡ç³»ï¼‰
            odom_msg.child_frame_id = "base_link";  // è®¾ç½®å­åæ ‡ç³»ä¸ºæœºå™¨äººåº•ç›˜åæ ‡ç³»

            //DOFå¹³åŠ¨ä½ç½®
            odom_msg.pose.pose.position.x = x_position_;
            odom_msg.pose.pose.position.y = y_position_;
            odom_msg.pose.pose.position.z = 0.0;

            //ä»æ¬§æ‹‰è§’è½¬æ¢ä¸ºå››å…ƒæ•°
            tf2::Quaternion q;
            q.setRPY(0,0,yaw_);
            //DOFè½¬åŠ¨ï¼ˆå››å…ƒæ•°ï¼‰
            odom_msg.pose.pose.orientation.x = q.x();
            odom_msg.pose.pose.orientation.y = q.y();
            odom_msg.pose.pose.orientation.z = q.z();
            odom_msg.pose.pose.orientation.w = q.w();

            //çº¿é€Ÿåº¦
            odom_msg.twist.twist.linear.x = vx;
            odom_msg.twist.twist.linear.y = vy;
            odom_msg.twist.twist.linear.z = 0.0;

            //è§’é€Ÿåº¦
            odom_msg.twist.twist.angular.x = 0.0;
            odom_msg.twist.twist.angular.y = 0.0;
            odom_msg.twist.twist.angular.z = vw;

            // å‘å¸ƒæ¶ˆæ¯
            odom_pub_->publish(odom_msg);

            // æ‰“å°ä½ç½®ï¼ˆXYZï¼‰
            RCLCPP_DEBUG(
              this->get_logger(),
              "ä½ç½®Position(XYZ): %.6f, %.6f, %.6f",
              odom_msg.pose.pose.position.x,
              odom_msg.pose.pose.position.y,
              odom_msg.pose.pose.position.z
            );

            // æ‰“å°å§¿æ€ï¼ˆå››å…ƒæ•°WXYZï¼‰
            RCLCPP_DEBUG(
              this->get_logger(),
              "å§¿æ€Orientation(WXYZ): %.6f, %.6f, %.6f, %.6f",
              odom_msg.pose.pose.orientation.w,  // æ³¨æ„é¡ºåºï¼šWXYZ
              odom_msg.pose.pose.orientation.x,
              odom_msg.pose.pose.orientation.y,
              odom_msg.pose.pose.orientation.z
            );

            // æ‰“å°å§¿æ€ï¼ˆæ¬§æ‹‰è§’RPYï¼‰
            RCLCPP_DEBUG(
              this->get_logger(),
              "æ¬§æ‹‰è§’Euler(RPY): %.6f, %.6f, %.6f",
              0.0,
              0.0,
              yaw_
            );

            // æ‰“å°çº¿é€Ÿåº¦ï¼ˆXYZï¼‰
            RCLCPP_DEBUG(
              this->get_logger(),
              "çº¿é€Ÿåº¦LinearVel(XYZ): %.6f, %.6f, %.6f",
              odom_msg.twist.twist.linear.x,
              odom_msg.twist.twist.linear.y,
              odom_msg.twist.twist.linear.z
            );

            // æ‰“å°è§’é€Ÿåº¦ï¼ˆXYZï¼‰
            RCLCPP_DEBUG(
              this->get_logger(),
              "è§’é€Ÿåº¦AngularVel(XYZ): %.6f, %.6f, %.6f",
              odom_msg.twist.twist.angular.x,
              odom_msg.twist.twist.angular.y,
              odom_msg.twist.twist.angular.z
            );

            /* æ¥ä¸‹æ¥å‘å¸ƒtf */
            auto transform = geometry_msgs::msg::TransformStamped();
            transform.header.stamp = odom_msg.header.stamp; // æ—¶é—´æˆ³ä¸odomåŒæ­¥
            transform.header.frame_id = "odom";
            transform.child_frame_id = "base_link";
            transform.transform.translation.x = x_position_;
            transform.transform.translation.y = y_position_;
            transform.transform.translation.z = 0.0;
            transform.transform.rotation = odom_msg.pose.pose.orientation; // å¤ç”¨å››å…ƒæ•°
            tf_broadcaster_->sendTransform(transform);
          }

        }
        // ç»§ç»­ç›‘å¬æ–°çš„æ•°æ®
        async_receive_message();
    }
    );
  }

  void cmd_vel_sub_callback(const geometry_msgs::msg::Twist &cmd_msg)
  {
    // bool bool_buffer[] = {1, 0, 1, 0};
    // int8_t int8_buffer[] = {0x11,0x22};
    // int16_t int16_buffer[] = {2000,6666};
    // int32_t int32_buffer[] = {305419896};
    fp32 fp32_buffer[] = {(fp32)cmd_msg.linear.x,(fp32)cmd_msg.linear.y,(fp32)cmd_msg.linear.z,
                          (fp32)cmd_msg.angular.x,(fp32)cmd_msg.angular.y,(fp32)cmd_msg.angular.z};

    //ç”±äºROS2ä¸­nodeä¸ºå±€éƒ¨å˜é‡ï¼Œæ‰€ä»¥åªèƒ½åœ¨nodeä¸­è°ƒç”¨sendå‡½æ•°ï¼Œæ‰€ä»¥Serial_Transmitåªè´Ÿè´£å¤„ç†data_bufferã€‚
    serial_pack_.tx.Data_Pack(0x01, 
                                 nullptr, 0,
                                 nullptr, 0,
                                 nullptr, 0,
                                 nullptr, 0,
                                 fp32_buffer, sizeof(fp32_buffer) / sizeof(fp32));

    auto port = serial_driver_->port();

    try
    {
      size_t bytes_size = port->send(tx_data_buffer);

      RCLCPP_DEBUG(this->get_logger(), "å¹³åŠ¨XYZï¼š%.6f,%.6f,%.6f", fp32_buffer[0],fp32_buffer[1],fp32_buffer[2]);
      RCLCPP_DEBUG(this->get_logger(), "è½¬åŠ¨XYZï¼š%.6f,%.6f,%.6f", fp32_buffer[3],fp32_buffer[4],fp32_buffer[5]);
      RCLCPP_DEBUG(this->get_logger(), "(%ld bytes)", bytes_size);
    }
    catch(const std::exception &ex)
    {
      RCLCPP_ERROR(this->get_logger(), "Error Transmiting from serial port:%s",ex.what());
    }
  }
};

int main(int argc, char **argv)
{
  rclcpp::init(argc, argv);

  auto node = std::make_shared<Odom_KC_Node>();

  rclcpp::spin(node);

  rclcpp::shutdown();
  return 0;
}
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzMxNzNlMDMzYmUxMWE0NWQ2ZmU5ODI3ZmFjODI5ZTBfNUVvNmg1TGlxRDYzTEJQdXMxU2JTZTU2bkUxT0JMSVpfVG9rZW46T1VUR2JkNWtyb20zdEd4SEhqUGN0QmU4bnFnXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

æœ€ç»ˆodomæœ‰æ•ˆæ•°æ®åº”è¯¥åœ¨250Hzå·¦å³,4mså‘å¸ƒä¸€æ¬¡,å¯¹äºå¯¼èˆªä¹Ÿæ˜¯å®Œå…¨å¤Ÿç”¨çš„.

  

  

  

2.  ### æƒ¯æ€§è®¡IMU
    

1.  #### ç®€ä»‹
    

**æ¦‚å¿µ**

IMUæ˜¯æƒ¯æ€§æµ‹é‡å•å…ƒï¼ˆInertial Measurement Unitï¼‰çš„ç¼©å†™ï¼Œå®ƒæ˜¯ä¸€ç§é›†æˆäº†å¤šä¸ªæƒ¯æ€§ä¼ æ„Ÿå™¨å¦‚åŠ é€Ÿåº¦è®¡ã€é™€èºä»ªã€ç£åŠ›è®¡ç­‰çš„å¯¼èˆªä¼ æ„Ÿå™¨ã€‚IMUå¯ä»¥å®æ—¶åœ°æµ‹é‡å’Œè®°å½•å…¶æ‰€åœ¨ç‰©ä½“çš„åŠ é€Ÿåº¦ã€è§’é€Ÿåº¦å’Œæ–¹å‘ç­‰ä¿¡æ¯ï¼Œå¹¶é€šè¿‡ä¿¡å·å¤„ç†å’Œæ•°å­¦æ¨¡å‹æ¥è®¡ç®—å‡ºç‰©ä½“çš„å§¿æ€ã€ä½ç½®å’Œè¿åŠ¨çŠ¶æ€ç­‰ã€‚

IMUï¼ˆæƒ¯æ€§æµ‹é‡å•å…ƒï¼‰ä¸»è¦ç”±ä»¥ä¸‹å‡ ç§ç±»å‹ç»„æˆï¼š

1.  åŠ é€Ÿåº¦è®¡ï¼ˆAccelerometerï¼‰ï¼šç”¨äºæµ‹é‡ç‰©ä½“çš„åŠ é€Ÿåº¦ï¼Œé€šå¸¸ä»¥ä¸‰ä¸ªè½´å‘ï¼ˆXã€Yã€Zï¼‰æä¾›åŠ é€Ÿåº¦æ•°æ®ã€‚åŠ é€Ÿåº¦è®¡å¯ä»¥å¸®åŠ©åˆ¤æ–­ç‰©ä½“çš„çº¿æ€§è¿åŠ¨å’ŒåŠ¨ä½œå§¿æ€å˜åŒ–ã€‚
    
2.  é™€èºä»ªï¼ˆGyroscopeï¼‰ï¼šç”¨äºæµ‹é‡ç‰©ä½“çš„è§’é€Ÿåº¦æˆ–è§’åº¦å˜åŒ–ç‡ã€‚é™€èºä»ªå¯ä»¥æä¾›å…³äºç‰©ä½“æ—‹è½¬çš„ä¿¡æ¯ï¼Œåˆ¤æ–­ç‰©ä½“çš„è§’åº¦ã€æ–¹å‘å’Œè½¬åŠ¨åŠ¨ä½œã€‚
    
3.  ç£åŠ›è®¡ï¼ˆMagnetometerï¼‰ï¼šç”¨äºæµ‹é‡ç‰©ä½“å‘¨å›´çš„ç£åœºå¼ºåº¦å’Œæ–¹å‘ï¼ˆå³æµ‹é‡åœºå¼ºï¼‰ã€‚ç£åŠ›è®¡å¯ä»¥å¸®åŠ©åˆ¤æ–­ç‰©ä½“çš„æ–¹å‘å’Œå¯¼èˆªï¼Œå°¤å…¶åœ¨åœ°ç£å®šä½å’Œèˆªå‘æ§åˆ¶ä¸­èµ·é‡è¦ä½œç”¨ã€‚
    

è¿™äº›ä¼ æ„Ÿå™¨é€šå¸¸é›†æˆåœ¨ä¸€èµ·å½¢æˆIMUï¼Œå¹¶é€šè¿‡æ•°æ®èåˆç®—æ³•å°†å®ƒä»¬çš„è¾“å‡ºç»“åˆèµ·æ¥ï¼Œæä¾›ç»¼åˆçš„å§¿æ€ã€ä½ç½®å’Œè¿åŠ¨ä¿¡æ¯ã€‚

**ä½œç”¨**

IMUæ˜¯ä¸€ç§é‡è¦çš„ä¼ æ„Ÿå™¨ç»„ä»¶ï¼Œå®ƒåœ¨å§¿æ€æ„ŸçŸ¥ã€è¡Œé©¶çŠ¶æ€ç›‘æµ‹ã€éGPSå®šä½ä¸­å‘æŒ¥ç€é‡è¦çš„ä½œç”¨ã€‚

**ç‰¹ç‚¹**

æƒ¯æ€§æµ‹é‡å•å…ƒï¼ˆIMUï¼‰ä½œä¸ºä¸€ç§å¸¸è§çš„ä¼ æ„Ÿå™¨ï¼Œåœ¨æœºå™¨äººé¢†åŸŸä¸­ä¹Ÿæœ‰è®¸å¤šåº”ç”¨ï¼Œä¸‹é¢æ˜¯IMUåœ¨æœºå™¨äººé¢†åŸŸçš„ä¸€äº›ä¼˜ç‚¹å’Œç¼ºç‚¹ï¼š

ï¼ˆ1ï¼‰ä¼˜ç‚¹ï¼š

*   **å®æ—¶æ€§é«˜ï¼š** IMUèƒ½å¤Ÿä»¥å¾ˆé«˜çš„é‡‡æ ·é¢‘ç‡è·å–å§¿æ€å’ŒåŠ é€Ÿåº¦æ•°æ®ï¼Œæä¾›å®æ—¶çš„è¿åŠ¨ä¿¡æ¯ã€‚
    
*   **ç²¾åº¦è¾ƒé«˜ï¼š** IMUå¯ä»¥æµ‹é‡ç‰©ä½“çš„åŠ é€Ÿåº¦å’Œè§’é€Ÿåº¦ï¼Œç»è¿‡åˆæˆå’Œæ»¤æ³¢å¤„ç†åï¼Œå¯æä¾›è¾ƒé«˜ç²¾åº¦çš„å§¿æ€ä¼°è®¡å’Œè¿åŠ¨è·Ÿè¸ªã€‚
    
*   **ä¸å—å…‰ç…§æ¡ä»¶é™åˆ¶ï¼š** IMUä¸ä¾èµ–äºå…‰ç…§æ¡ä»¶ï¼Œé€‚ç”¨äºå„ç§ç¯å¢ƒï¼Œå¦‚å®¤å†…ã€å®¤å¤–å’Œä½å…‰æ¡ä»¶ã€‚
    
*   **å°ºå¯¸å°å·§ï¼š** IMUé€šå¸¸å…·æœ‰å°å‹ã€è½»é‡çº§å’Œç´§å‡‘çš„è®¾è®¡ï¼Œé€‚åˆåµŒå…¥å¼ç³»ç»Ÿå’Œå¯¹ç©ºé—´è¦æ±‚è¾ƒé«˜çš„æœºå™¨äººå¹³å°ã€‚
    
*   **ä½åŠŸè€—ï¼š** IMUçš„åŠŸè€—ç›¸å¯¹è¾ƒä½ï¼Œé€‚åˆèµ„æºå—é™æˆ–éœ€è¦é•¿æ—¶é—´è¿è¡Œçš„åº”ç”¨ã€‚
    

ï¼ˆ2ï¼‰ç¼ºç‚¹ï¼š

*   **ç´¯ç§¯è¯¯å·®ï¼š** ç”±äºç§¯åˆ†è®¡ç®—çš„è¯¯å·®ä¼šéšæ—¶é—´ç´¯ç§¯ï¼ŒIMUçš„å§¿æ€ä¼°è®¡éšç€æ—¶é—´æ¨ç§»å¯èƒ½ä¼šå‡ºç°æ¼‚ç§»ï¼Œéœ€è¦ä¸å…¶ä»–ä¼ æ„Ÿå™¨è¿›è¡Œèåˆæˆ–é‡‡ç”¨æ ¡å‡†æ–¹æ³•è¿›è¡Œè¡¥å¿ã€‚
    
*   **å—å¤–éƒ¨å¹²æ‰°å½±å“ï¼š** IMUçš„æµ‹é‡ç»“æœå®¹æ˜“å—åˆ°æŒ¯åŠ¨ã€éœ‡åŠ¨å’Œæ¸©åº¦å˜åŒ–ç­‰å¤–ç•Œå¹²æ‰°çš„å½±å“ï¼Œå¯èƒ½å¯¼è‡´å§¿æ€ä¼°è®¡ä¸ç¨³å®šæˆ–ä¸å‡†ç¡®ã€‚
    
*   **ä¸é€‚ç”¨äºç»å¯¹å®šä½ï¼š** å•ç‹¬ä½¿ç”¨IMUæ— æ³•æä¾›ç‰©ä½“çš„ç»å¯¹ä½ç½®ä¿¡æ¯ï¼Œéœ€è¦ç»“åˆå…¶ä»–ä¼ æ„Ÿå™¨ï¼ˆå¦‚GNSSï¼‰æ¥å®ç°ç»å¯¹å®šä½ã€‚
    
*   **æ— æ³•æ„ŸçŸ¥ç¯å¢ƒä¿¡æ¯ï¼š** IMUåªèƒ½æä¾›è‡ªèº«çš„åŠ é€Ÿåº¦å’Œè§’é€Ÿåº¦æ•°æ®ï¼Œæ— æ³•ç›´æ¥æ„ŸçŸ¥ç¯å¢ƒæˆ–æ£€æµ‹å‘¨å›´ç‰©ä½“ã€‚
    

ç»¼ä¸Šæ‰€è¿°ï¼ŒIMUåœ¨æœºå™¨äººé¢†åŸŸå…·æœ‰å®æ—¶æ€§é«˜ã€ç²¾åº¦è¾ƒé«˜ã€ä¸å—å…‰ç…§æ¡ä»¶é™åˆ¶ã€å°ºå¯¸å°å·§å’Œä½åŠŸè€—ç­‰ä¼˜ç‚¹ã€‚ç„¶è€Œï¼Œå®ƒä¹Ÿå­˜åœ¨ç´¯ç§¯è¯¯å·®ã€å—å¤–éƒ¨å¹²æ‰°å½±å“ã€ä¸é€‚ç”¨äºç»å¯¹å®šä½å’Œæ— æ³•æ„ŸçŸ¥ç¯å¢ƒä¿¡æ¯ç­‰ç¼ºç‚¹ã€‚å› æ­¤ï¼Œåœ¨è®¾è®¡æœºå™¨äººç³»ç»Ÿæ—¶éœ€ç»¼åˆè€ƒè™‘åº”ç”¨éœ€æ±‚ï¼Œå¹¶ä¸å…¶ä»–ä¼ æ„Ÿå™¨ï¼ˆå¦‚ç›¸æœºã€æ¿€å…‰é›·è¾¾ç­‰ï¼‰è¿›è¡Œèåˆï¼Œä»¥æå‡æœºå™¨äººçš„æ„ŸçŸ¥ã€å®šä½å’Œæ§åˆ¶èƒ½åŠ›ã€‚

2.  #### æ¶ˆæ¯æ¥å£
    

åœ¨ROS2ä¸­imuæ¶ˆæ¯è¢«å°è£…ä¸ºäº†`sensor_msgs/msg/Imu`æ¥å£ï¼Œå¯é€šè¿‡æŒ‡ä»¤`ros2 interface show sensor_msgs/msg/Imu`æŸ¥çœ‹è¯¥æ¥å£çš„å…·ä½“æ•°æ®ç»“æ„ï¼Œç»“æœå¦‚ä¸‹ï¼š

```Plain Text
# è¿™æ˜¯ä¸€ä¸ªä»æƒ¯æ€§æµ‹é‡å•å…ƒï¼ˆInertial Measurement Unitï¼Œç®€ç§°IMUï¼‰è·å–æ•°æ®çš„æ¶ˆæ¯ã€‚
#
# åŠ é€Ÿåº¦åº”è¯¥ä»¥ç±³/ç§’^2ä¸ºå•ä½ï¼ˆä¸æ˜¯ä»¥gä¸ºå•ä½ï¼‰ï¼Œæ—‹è½¬é€Ÿåº¦åº”è¯¥ä»¥å¼§åº¦/ç§’ä¸ºå•ä½ã€‚
#
# å¦‚æœæµ‹é‡çš„åæ–¹å·®å·²çŸ¥ï¼Œåˆ™åº”è¯¥å¡«å†™ç›¸åº”å€¼ã€‚å…¨é›¶çš„åæ–¹å·®çŸ©é˜µå°†è¢«è§£é‡Šä¸ºâ€œåæ–¹å·®æœªçŸ¥â€ï¼Œå¿…é¡»ä»å…¶ä»–æºè·å–åæ–¹å·®æ‰èƒ½ä½¿ç”¨åæ–¹å·®æ•°æ®ã€‚
#
# å¦‚æœæ²¡æœ‰å…¶ä¸­ä¸€ä¸ªæ•°æ®å…ƒç´ çš„ä¼°è®¡å€¼ï¼ˆä¾‹å¦‚ï¼Œä½ çš„IMUä¸ä¼šäº§ç”Ÿæ–¹å‘ä¼°è®¡ï¼‰ï¼Œè¯·å°†ç›¸å…³åæ–¹å·®çŸ©é˜µçš„ç¬¬ 0 ä¸ªå…ƒç´ è®¾ç½®ä¸º -1ã€‚
# å¦‚æœä½ æ­£åœ¨è§£ææ­¤æ¶ˆæ¯ï¼Œè¯·æ£€æŸ¥æ¯ä¸ªåæ–¹å·®çŸ©é˜µçš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¸­æ˜¯å¦æœ‰ -1 çš„å€¼ï¼Œå¹¶å¿½ç•¥ç›¸å…³çš„ä¼°è®¡å€¼ã€‚

std_msgs/Header header # æ ‡å¤´
    builtin_interfaces/Time stamp # æ—¶é—´æˆ³
        int32 sec
        uint32 nanosec
    string frame_id # imuåæ ‡ç³»

geometry_msgs/Quaternion orientation # å››å…ƒæ•°å§¿æ€
    float64 x 0
    float64 y 0
    float64 z 0
    float64 w 1
float64[9] orientation_covariance # å§¿æ€åæ–¹å·®çŸ©é˜µ

geometry_msgs/Vector3 angular_velocity # ä¸‰è½´è§’é€Ÿåº¦
    float64 x
    float64 y
    float64 z
float64[9] angular_velocity_covariance # è§’é€Ÿåº¦åæ–¹å·®çŸ©é˜µ

geometry_msgs/Vector3 linear_acceleration # ä¸‰è½´çº¿æ€§åŠ é€Ÿåº¦
    float64 x
    float64 y
    float64 z
float64[9] linear_acceleration_covariance # çº¿æ€§åŠ é€Ÿåº¦åæ–¹å·®çŸ©é˜µ
```

3.  #### åŠŸèƒ½åŒ…åˆ›å»º
    

é¦–å…ˆå…ˆåˆ›å»ºåŠŸèƒ½åŒ…

```Bash
ros2 pkg create imu_plumb --build-type ament_cmake --dependencies rclcpp sensor_msgs --node-name imu_node
```

å…ˆç¼–è¯‘ä¸€ä¸‹

```Bash
colcon build --cmake-args -DCMAKE_EXPORT_COMPILE_COMMANDS=ON
```

  

4.  #### èŠ‚ç‚¹ä¸»è¦é€»è¾‘
    

```C++
#include "rclcpp/rclcpp.hpp"
#include "serial_driver/serial_driver.hpp"
#include "cyber_imu/WitStandardProtocol.h"
#include "sensor_msgs/msg/imu.hpp"
#include <cstdint>
#include <rclcpp/logging.hpp>
#include <sensor_msgs/msg/detail/imu__struct.hpp>
#include <tf2/LinearMath/Quaternion.h>

class ImuNode: public rclcpp::Node
{
  public:
    ImuNode():Node("ImuNode_node_cpp")
    {
      RCLCPP_INFO(this->get_logger(),"æƒ¯æ€§è®¡imuèŠ‚ç‚¹å¯åŠ¨!");
      
      //åˆ›å»ºodomè¯é¢˜é€šä¿¡å‘å¸ƒæ–¹
      imu_pub_ = this->create_publisher<sensor_msgs::msg::Imu>("/imu",10);

    // å£°æ˜å‚æ•°ï¼ˆå¸¦é»˜è®¤å€¼ï¼‰
    // ä¸²å£é»˜è®¤è®¾å¤‡åï¼ˆæ ¹æ®å®é™…è®¾å¤‡è°ƒæ•´ï¼‰
    this->declare_parameter("device_name", "/dev/ttyUSB0");
    //ä¸²å£é»˜è®¤æ³¢ç‰¹ç‡
    this->declare_parameter("baud_rate", 115200);

    // è·å–å‚æ•°å€¼
    const std::string device_name = this->get_parameter("device_name").as_string();
    const uint32_t baud_rate = this->get_parameter("baud_rate").as_int();

      // åˆ›å»ºä¸²å£é…ç½®å¯¹è±¡
      // æ³¢ç‰¹ç‡é»˜è®¤115200ï¼›ä¸å¼€å¯æµæ§åˆ¶ï¼›æ— å¥‡å¶æ•ˆéªŒï¼›åœæ­¢ä½1ã€‚
      drivers::serial_driver::SerialPortConfig config(
          baud_rate,
          drivers::serial_driver::FlowControl::NONE,
          drivers::serial_driver::Parity::NONE,
          drivers::serial_driver::StopBits::ONE);
      
      // åˆå§‹åŒ–ä¸²å£
      try
      {
        io_context_ = std::make_shared<drivers::common::IoContext>(1);
        // åˆå§‹åŒ– serial_driver_
        serial_driver_ = std::make_shared<drivers::serial_driver::SerialDriver>(*io_context_);
        serial_driver_->init_port(device_name, config);
        serial_driver_->port()->open();
        
        RCLCPP_INFO(this->get_logger(), "Serial port initialized successfully");
        RCLCPP_INFO(this->get_logger(), "Using device: %s", serial_driver_->port().get()->device_name().c_str());
        RCLCPP_INFO(this->get_logger(), "Baud_rate: %d", config.get_baud_rate());
      }
      catch (const std::exception &ex)
      {
        RCLCPP_ERROR(this->get_logger(), "Failed to initialize serial port: %s", ex.what());
        return;
      }

      async_receive_message();   //è¿›å…¥å¼‚æ­¥æ¥æ”¶
    }

  private:
    rclcpp::Publisher<sensor_msgs::msg::Imu>::SharedPtr imu_pub_;

    std::shared_ptr<drivers::serial_driver::SerialDriver> serial_driver_;
    std::shared_ptr<drivers::common::IoContext> io_context_;

    void async_receive_message()  //åˆ›å»ºä¸€ä¸ªå‡½æ•°æ›´æ–¹ä¾¿é‡æ–°è°ƒç”¨
    {
      auto port = serial_driver_->port();

      // è®¾ç½®æ¥æ”¶å›è°ƒå‡½æ•°
      port->async_receive([this](const std::vector<uint8_t> &data,const size_t &size) 
      {
          if (size > 0)
          {
            RCLCPP_DEBUG(this->get_logger(),"\n");
            RCLCPP_DEBUG(this->get_logger(),"ä»¥ä¸‹æ˜¯æ¥æ”¶åˆ°çš„IMUæƒ¯æ€§è®¡æ•°æ®:");
            //åˆ›å»ºimuæ¶ˆæ¯ç±»å‹
            auto imu_msg = sensor_msgs::msg::Imu();
            bool valid_frame = false;  // æ·»åŠ æœ‰æ•ˆå¸§æ ‡å¿—
            bool valid_data = false;  // æ·»åŠ æœ‰æ•ˆå¸§æ ‡å¿—

            for(int16_t i = 0;i < (int16_t)size;++i)
            {
              uint8_t data_buffer = data[i];
              // RCLCPP_INFO(this->get_logger(),"æ¥æ”¶åˆ°çš„å­—èŠ‚ï¼š%x",data_buffer);
              // å¤„ç†æ¥æ”¶åˆ°çš„æ•°æ®
              if(wit_imu_.rx.Data_Analysis(&data_buffer) == true)
              {
                valid_frame = true;  // æ ‡è®°æœ‰æœ‰æ•ˆå¸§éœ€è¦å¤„ç†
              }

              if(valid_frame == true)
              {
                if(wit_imu_.rx.data.cmd == 0x51)
                {
                  // å­˜å‚¨åŠ é€Ÿåº¦è®¡æ•°æ®
                  wit_imu_.rx.data.imu.Accel.X = wit_imu_.rx.data.int16_buffer[0];
                  wit_imu_.rx.data.imu.Accel.Y = wit_imu_.rx.data.int16_buffer[1];
                  wit_imu_.rx.data.imu.Accel.Z = wit_imu_.rx.data.int16_buffer[2];
                  wit_imu_.rx.data.imu.Temp    = wit_imu_.rx.data.int16_buffer[3];
                  
                  //åŠ é€Ÿåº¦å•ä½m/s2ï¼Œæ¸©åº¦å•ä½â„ƒæ‘„æ°åº¦
                  wit_imu_.rx.data.imu.Accel.X = wit_imu_.rx.data.imu.Accel.X / 32768.0f * 16.0f * 9.8f;
                  wit_imu_.rx.data.imu.Accel.Y = wit_imu_.rx.data.imu.Accel.Y / 32768.0f * 16.0f * 9.8f;
                  wit_imu_.rx.data.imu.Accel.Z = wit_imu_.rx.data.imu.Accel.Z / 32768.0f * 16.0f * 9.8f;
                  wit_imu_.rx.data.imu.Temp    =  wit_imu_.rx.data.imu.Temp / 100.0f;

                  // æ‰“å°åŠ é€Ÿåº¦è®¡æ•°æ®
                  RCLCPP_DEBUG(this->get_logger(), "åŠ é€Ÿåº¦(XYZ): %.6f, %.6f, %.6f",
                              wit_imu_.rx.data.imu.Accel.X, wit_imu_.rx.data.imu.Accel.Y, wit_imu_.rx.data.imu.Accel.Z);
                  //å‡å°‘æ—¶é—´æˆ³å¸¦æ¥çš„å»¶è¿Ÿ
                  imu_msg.header.stamp = this->get_clock()->now();
                }

                else if(wit_imu_.rx.data.cmd == 0x52)
                {
                  // å­˜å‚¨é™€èºä»ªæ•°æ®
                  wit_imu_.rx.data.imu.Gyro.X = wit_imu_.rx.data.int16_buffer[0];
                  wit_imu_.rx.data.imu.Gyro.Y = wit_imu_.rx.data.int16_buffer[1];
                  wit_imu_.rx.data.imu.Gyro.Z = wit_imu_.rx.data.int16_buffer[2];
                  
                  //è§’é€Ÿåº¦å•ä½rad/s
                  wit_imu_.rx.data.imu.Gyro.X = wit_imu_.rx.data.imu.Gyro.X / 32768.0f * 2000.0f * (M_PI / 180.0f);
                  wit_imu_.rx.data.imu.Gyro.Y = wit_imu_.rx.data.imu.Gyro.Y / 32768.0f * 2000.0f * (M_PI / 180.0f);
                  wit_imu_.rx.data.imu.Gyro.Z = wit_imu_.rx.data.imu.Gyro.Z / 32768.0f * 2000.0f * (M_PI / 180.0f);

                  // æ‰“å°é™€èºä»ªæ•°æ®
                  RCLCPP_DEBUG(this->get_logger(), "è§’é€Ÿåº¦(XYZ): %.6f, %.6f, %.6f",
                              wit_imu_.rx.data.imu.Gyro.X, wit_imu_.rx.data.imu.Gyro.Y, wit_imu_.rx.data.imu.Gyro.Z);
                }

                else if(wit_imu_.rx.data.cmd == 0x54)
                {
                  // å­˜å‚¨ç£åŠ›è®¡æ•°æ®(å•ä½lsb)
                  wit_imu_.rx.data.imu.Magnet.X = wit_imu_.rx.data.int16_buffer[0];
                  wit_imu_.rx.data.imu.Magnet.Y = wit_imu_.rx.data.int16_buffer[1];
                  wit_imu_.rx.data.imu.Magnet.Z = wit_imu_.rx.data.int16_buffer[2];
                  
                  //ç£åœºå•ä½uT
                  // wit_imu_.rx.data.imu.Magnet.X = wit_imu_.rx.data.imu.Magnet.X / 1.0f;
                  // wit_imu_.rx.data.imu.Magnet.Y = wit_imu_.rx.data.imu.Magnet.Y / 1.0f;
                  // wit_imu_.rx.data.imu.Magnet.Z = wit_imu_.rx.data.imu.Magnet.Z / 1.0f;

                  // æ‰“å°ç£åŠ›è®¡æ•°æ®
                  RCLCPP_DEBUG(this->get_logger(), "ç£åœº(XYZ): %.6f, %.6f, %.6f",
                              wit_imu_.rx.data.imu.Magnet.X, wit_imu_.rx.data.imu.Magnet.Y, wit_imu_.rx.data.imu.Magnet.Z);
                }

                else if(wit_imu_.rx.data.cmd == 0x53)
                {
                  // å­˜å‚¨æ¬§æ‹‰è§’æ•°æ®
                  wit_imu_.rx.data.imu.Euler.roll = wit_imu_.rx.data.int16_buffer[0];
                  wit_imu_.rx.data.imu.Euler.pitch = wit_imu_.rx.data.int16_buffer[1];
                  wit_imu_.rx.data.imu.Euler.yaw = wit_imu_.rx.data.int16_buffer[2];
                  
                  //æ¬§æ‹‰è§’å•ä½dec
                  wit_imu_.rx.data.imu.Euler.roll = wit_imu_.rx.data.imu.Euler.roll / 32768.0f * 180.0f;
                  wit_imu_.rx.data.imu.Euler.pitch = wit_imu_.rx.data.imu.Euler.pitch / 32768.0f * 180.0f;
                  wit_imu_.rx.data.imu.Euler.yaw = wit_imu_.rx.data.imu.Euler.yaw / 32768.0f * 180.0f;

                  // æ‰“å°æ¬§æ‹‰è§’æ•°æ®
                  RCLCPP_DEBUG(this->get_logger(), "æ¬§æ‹‰è§’(XYZ_RPY): %.6f, %.6f, %.6f",
                              wit_imu_.rx.data.imu.Euler.roll, wit_imu_.rx.data.imu.Euler.pitch, wit_imu_.rx.data.imu.Euler.yaw);

                  //æ¬§æ‹‰è§’å•ä½rad
                  wit_imu_.rx.data.imu.Euler.roll = wit_imu_.rx.data.imu.Euler.roll * (M_PI / 180.0f);
                  wit_imu_.rx.data.imu.Euler.pitch = wit_imu_.rx.data.imu.Euler.pitch  * (M_PI / 180.0f);
                  wit_imu_.rx.data.imu.Euler.yaw = wit_imu_.rx.data.imu.Euler.yaw  * (M_PI / 180.0f);
                }

                else if(wit_imu_.rx.data.cmd == 0x59)
                {
                  for(int16_t i = 0 ; i < 4 ; i++)
                  {
                    // å­˜å‚¨å››å…ƒæ•°æ•°æ®
                    wit_imu_.rx.data.imu.Quat.q[i] = wit_imu_.rx.data.int16_buffer[i];

                    //å››å…ƒæ•°æ˜¯å½’ä¸€åŒ–çš„å››å…ƒæ•°
                    wit_imu_.rx.data.imu.Quat.q[i] = wit_imu_.rx.data.imu.Quat.q[i] / 32768.0f;
                  }

                  // æ‰“å°å››å…ƒæ•°æ•°æ®
                  //æ³¨æ„ï¼Œ0å¯¹åº”yï¼Œ1å¯¹åº”xï¼Œ-2æ‰å¯¹åº”zã€‚
                  RCLCPP_DEBUG(this->get_logger(), "å››å…ƒæ•°(xyzw): %.6f, %.6f, %.6f, %.6f",
                              wit_imu_.rx.data.imu.Quat.q[1],wit_imu_.rx.data.imu.Quat.q[0],-wit_imu_.rx.data.imu.Quat.q[2],wit_imu_.rx.data.imu.Quat.q[3]);
                  valid_data = true;
                }
                wit_imu_.rx.data.cmd = 0x00;   //è·‘è¿‡ä¸€æ¬¡å°±è¿›è¡Œæ¸…0
                valid_frame = false;
              }
            }

            if(valid_data == true)
            {
              //æ—¶é—´æˆ³
              // imu_msg.header.stamp = this->get_clock()->now();
              //ä½å§¿ä¿¡æ¯æ‰€å‚è€ƒçš„åæ ‡ç³»
              imu_msg.header.frame_id = "imu";

              // tf2::Quaternion q;
              // //DOFæ¬§æ‹‰è§’å•ä½rad
              // q.setRPY(roll_, pitch_, yaw_);
              // //DOFæ¬§æ‹‰è§’ï¼ˆå››å…ƒæ•°ï¼‰
              // imu_msg.orientation.x = q.x();
              // imu_msg.orientation.y = q.y();
              // imu_msg.orientation.z = q.z();
              // imu_msg.orientation.w = q.w();

              //DOFæ¬§æ‹‰è§’ï¼ˆå››å…ƒæ•°ï¼‰
              //æ³¨æ„å¯¹åº”å…³ç³»
              // ä¼ æ„Ÿå™¨åæ ‡ç³» -> ROSåæ ‡ç³»ï¼š
              // X -> Y
              // Y -> X
              // Z -> -Z
              imu_msg.orientation.x =   wit_imu_.rx.data.imu.Quat.q[1];
              imu_msg.orientation.y =   wit_imu_.rx.data.imu.Quat.q[0];
              imu_msg.orientation.z = - wit_imu_.rx.data.imu.Quat.q[2];
              imu_msg.orientation.w =   wit_imu_.rx.data.imu.Quat.q[3];

              //åŠ é€Ÿåº¦
              imu_msg.linear_acceleration.x = wit_imu_.rx.data.imu.Accel.X;
              imu_msg.linear_acceleration.y = wit_imu_.rx.data.imu.Accel.Y;
              imu_msg.linear_acceleration.z = wit_imu_.rx.data.imu.Accel.Z;

              //è§’é€Ÿåº¦
              imu_msg.angular_velocity.x = wit_imu_.rx.data.imu.Gyro.X;
              imu_msg.angular_velocity.y = wit_imu_.rx.data.imu.Gyro.Y;
              imu_msg.angular_velocity.z = wit_imu_.rx.data.imu.Gyro.Z;

              imu_pub_->publish(imu_msg);
              valid_data = false;
            }

          }
          // ç»§ç»­ç›‘å¬æ–°çš„æ•°æ®
          async_receive_message();
      }
      );
    }
};

int main(int argc, char ** argv)
{
  rclcpp::init(argc,argv);

  auto node = std::make_shared<ImuNode>();

  rclcpp::spin(node);

  rclcpp::shutdown();
  return 0;
}
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2E5ZDY1ZTAzOTM1NmZlN2U2MzQzODlhNzdjNTE3OGFfNEVtd3RUYlBqa3BxeDhZS0Znck1MaTZGTmtkZzA0RUpfVG9rZW46R01ndmJsNENRb2d6ZHd4VnNxT2NjZ2hRbnBiXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWUxZTM0ZWU1ZWViZmUzMDczOWZjYzk4Y2E0ZTM4ZTFfb3JYc1RMUGFmb1BhRWhQd3dXdGhoek85MXE3bVo0Ym9fVG9rZW46RlBDdGJWbHRlb1QxbnZ4bmRacmNMYkYyblJmXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

è¿™ç§æ¡†æ¶å¯¹äºä¸€ä¸ª250Hzï¼ˆæ¯4msè¾“å‡ºä¸€æ¬¡ï¼‰çš„é™€èºä»ªæ¥è¯´,æœ€å/imuçš„å‘å¸ƒé¢‘ç‡æ˜¯100Hzï¼ˆæ¯10mså‘å¸ƒä¸€æ¬¡ï¼‰,æ•ˆç‡ä¹Ÿæ˜¯è¿˜å¯ä»¥æ¥å—çš„.

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjFjNTllYjM0MzM2MjUzMWYwNzcwYWM4ZmMxYTlhM2RfU0RNejJhaHc2Qk9mQ1Uxa0ZzNWdJdktla2xtWXROQnBfVG9rZW46RzhZVWJYRlRob0dzSnZ4RkJyMWNsMjdrbkFkXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

  

  

  

  

3.  ### æ¿€å…‰é›·è¾¾LiDAR
    

  

  

4.  ### ç›¸æœºCamera
    

  

  

5.  ### å…¨çƒå®šä½GNSS
    

  

  

6.  ### é”®ç›˜æ§åˆ¶èŠ‚ç‚¹
    

1.  #### ç®€ä»‹
    

è¦åœ¨ ROS2 ä¸­ä½¿ç”¨ `keyboard` èŠ‚ç‚¹æ§åˆ¶åº•ç›˜ï¼Œæˆ‘ä»¬éœ€è¦å®ç°ä»¥ä¸‹æ­¥éª¤ï¼š

1.  **åˆ›å»º ROS2 åŒ…** åˆ›å»ºä¸€ä¸ªæ–°çš„ ROS2 åŒ…ç”¨äºå®ç°é”®ç›˜æ§åˆ¶åŠŸèƒ½ã€‚
    
2.  **ç¼–å†™é”®ç›˜æ§åˆ¶èŠ‚ç‚¹** ç¼–å†™ä¸€ä¸ª C++ èŠ‚ç‚¹ï¼Œç”¨äºç›‘å¬é”®ç›˜è¾“å…¥å¹¶å‘å¸ƒé€Ÿåº¦å‘½ä»¤ã€‚
    
3.  **ä¸éº¦è½®åº•ç›˜é€šä¿¡** å°†å‘å¸ƒçš„é€Ÿåº¦å‘½ä»¤ä¸åº•ç›˜æ§åˆ¶ç»“åˆã€‚
    

  

2.  #### Twistæ¶ˆæ¯æ¥å£
    

```Bash
ros2 interface show geometry_msgs/msg/Twist
```
```Plain Text
# This expresses velocity in free space broken into its linear and angular parts.
# è¯¥æ¶ˆæ¯è¡¨ç¤ºè‡ªç”±ç©ºé—´ä¸­çš„é€Ÿåº¦ï¼Œåˆ†ä¸ºçº¿é€Ÿåº¦å’Œè§’é€Ÿåº¦ä¸¤éƒ¨åˆ†ã€‚

Vector3  linear
        float64 x  # çº¿é€Ÿåº¦çš„ x åˆ†é‡ï¼ˆé€šå¸¸è¡¨ç¤ºå‰åæ–¹å‘çš„é€Ÿåº¦ï¼‰
        float64 y  # çº¿é€Ÿåº¦çš„ y åˆ†é‡ï¼ˆé€šå¸¸è¡¨ç¤ºå·¦å³æ–¹å‘çš„é€Ÿåº¦ï¼‰
        float64 z  # çº¿é€Ÿåº¦çš„ z åˆ†é‡ï¼ˆé€šå¸¸è¡¨ç¤ºä¸Šä¸‹æ–¹å‘çš„é€Ÿåº¦ï¼‰

Vector3  angular
        float64 x  # è§’é€Ÿåº¦çš„ x åˆ†é‡ï¼ˆç»• x è½´çš„æ—‹è½¬é€Ÿåº¦ï¼‰
        float64 y  # è§’é€Ÿåº¦çš„ y åˆ†é‡ï¼ˆç»• y è½´çš„æ—‹è½¬é€Ÿåº¦ï¼‰
        float64 z  # è§’é€Ÿåº¦çš„ z åˆ†é‡ï¼ˆç»• z è½´çš„æ—‹è½¬é€Ÿåº¦ï¼‰

```

*   **çº¿é€Ÿåº¦ï¼ˆlinearï¼‰** ï¼šæè¿°ç‰©ä½“åœ¨ä¸‰ç»´ç©ºé—´ä¸­æ²¿ç›´çº¿è¿åŠ¨çš„é€Ÿåº¦ã€‚é€šå¸¸åœ¨ç§»åŠ¨æœºå™¨äººä¸­ï¼š
    
    *   `x` è¡¨ç¤ºå‰è¿›/åé€€ã€‚
        
    *   `y` è¡¨ç¤ºå·¦å³å¹³ç§»ã€‚
        
    *   `z` é€šå¸¸ä¸º 0ï¼Œå› ä¸ºå¤§éƒ¨åˆ†åœ°é¢æœºå™¨äººåªåœ¨å¹³é¢ä¸Šè¿åŠ¨ã€‚
        
*   **è§’é€Ÿåº¦ï¼ˆangularï¼‰** ï¼šæè¿°ç‰©ä½“åœ¨ä¸‰ç»´ç©ºé—´ä¸­ç»•æŸä¸€è½´æ—‹è½¬çš„é€Ÿåº¦ã€‚é€šå¸¸åœ¨ç§»åŠ¨æœºå™¨äººä¸­ï¼š
    
    *   `z` è¡¨ç¤ºç»•å‚ç›´è½´çš„æ—‹è½¬ï¼ˆé¡ºæ—¶é’ˆ/é€†æ—¶é’ˆï¼‰ã€‚
        
    *   `x` å’Œ `y` é€šå¸¸ä¸º 0ï¼Œå› ä¸ºå¤§å¤šæ•°åœ°é¢æœºå™¨äººåªéœ€è¦åœ¨å¹³é¢ä¸Šæ—‹è½¬ã€‚
        

è¿™ä¸ªæ¶ˆæ¯ç±»å‹å¹¿æ³›ç”¨äºæ§åˆ¶æœºå™¨äººè¿åŠ¨ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„DOFè‡ªç”±åº¦ï¼Œé€šè¿‡å‘å¸ƒåˆ° `/cmd_vel` è¯é¢˜ï¼Œå¯ä»¥ä¸ºæœºå™¨äººæä¾›è¿åŠ¨æŒ‡ä»¤ã€‚

  

3.  #### å‘å¸ƒcmd\_velç»™å•ç‰‡æœº
    

```C++
//åˆå§‹åŒ–ä¸²å£æ¶ˆæ¯è®¢é˜…
rclcpp::Subscription<geometry_msgs::msg::Twist>::SharedPtr cmd_vel_sub_;
cmd_vel_sub_ = this->create_subscription<geometry_msgs::msg::Twist("cmd_vel",10,std::bind(&Serial_Node::cmd_vel_sub_callback,this,std::placeholders::_1));
  
  void cmd_vel_sub_callback(const geometry_msgs::msg::Twist &cmd_msg)
  {
    // bool bool_buffer[] = {1, 0, 1, 0};
    // int8_t int8_buffer[] = {0x11,0x22};
    // int16_t int16_buffer[] = {2000,6666};
    // int32_t int32_buffer[] = {305419896};
    fp32 fp32_buffer[] = {(fp32)cmd_msg.linear.x,(fp32)cmd_msg.linear.y,(fp32)cmd_msg.linear.z,
                          (fp32)cmd_msg.angular.x,(fp32)cmd_msg.angular.y,(fp32)cmd_msg.angular.z};

    //ç”±äºROS2ä¸­nodeä¸ºå±€éƒ¨å˜é‡ï¼Œæ‰€ä»¥åªèƒ½åœ¨nodeä¸­è°ƒç”¨sendå‡½æ•°ï¼Œæ‰€ä»¥Serial_Transmitåªè´Ÿè´£å¤„ç†data_bufferã€‚
    serial_pack_.tx.Data_Pack(0x01, 
                                 nullptr, 0,
                                 nullptr, 0,
                                 nullptr, 0,
                                 nullptr, 0,
                                 fp32_buffer, sizeof(fp32_buffer) / sizeof(fp32));

    auto port = serial_driver_->port();

    try
    {
      size_t bytes_size = port->send(data_buffer);
      // RCLCPP_INFO(this->get_logger(), "Transmitted: ");
      // for (size_t i = 0; i < data_buffer.size(); ++i) 
      // {
        // RCLCPP_INFO(this->get_logger(), "0x%02X ", data_buffer[i]);  //ä»¥åå…­è¿›åˆ¶æ ¼å¼æ‰“å°æ¯ä¸ªå­—èŠ‚
      // }
      RCLCPP_INFO(this->get_logger(), "å¹³åŠ¨XYZï¼š%.6f,%.6f,%.6f", fp32_buffer[0],fp32_buffer[1],fp32_buffer[2]);
      RCLCPP_INFO(this->get_logger(), "è½¬åŠ¨XYZï¼š%.6f,%.6f,%.6f", fp32_buffer[3],fp32_buffer[4],fp32_buffer[5]);
      RCLCPP_INFO(this->get_logger(), "(%ld bytes)", bytes_size);
      // (void)bytes_size;
    }
    catch(const std::exception &ex)
    {
      RCLCPP_ERROR(this->get_logger(), "Error Transmiting from serial port:%s",ex.what());
    }
  }
};
```

  

STM32éƒ¨åˆ†ä»£ç ï¼š

```C++
    case CHASSIS_ROS2_CMD: //ROS2æ¥ç®¡æ¨¡å¼
        //å•ä½å°±æ˜¯m/så’Œrad/s
        this->oriChassis.Speed.vx =   cmd_vel_.Linear.Y;
        this->oriChassis.Speed.vy =   cmd_vel_.Linear.X;
        this->oriChassis.Speed.vw = - cmd_vel_.Angular.Z;
        break;
```

ç”±äºæˆ‘çš„STM32ä»¥Yä¸ºåº•ç›˜å‰åæ–¹å‘ï¼ŒROS2ä»¥Xä¸ºåº•ç›˜å‰åæ–¹å‘ï¼Œæ‰€ä»¥æˆ‘è¿™é‡Œå¹¶ä¸æ˜¯å®Œå…¨å¯¹åº”çš„ã€‚

  

4.  #### å®˜æ–¹èŠ‚ç‚¹
    

```Bash
ros2 run teleop_twist_keyboard teleop_twist_keyboard
```

*   `i`: å‘å‰ç§»åŠ¨ï¼ˆå¢åŠ çº¿é€Ÿåº¦ `linear.x`ï¼‰
    
*   `,` **(é€—å·)** : å‘åç§»åŠ¨ï¼ˆå‡å°‘çº¿é€Ÿåº¦ `linear.x`ï¼‰
    
*   `j`: å·¦è½¬ï¼ˆå¢åŠ è§’é€Ÿåº¦ `angular.z`ï¼Œé€†æ—¶é’ˆï¼‰
    
*   `l`: å³è½¬ï¼ˆå‡å°‘è§’é€Ÿåº¦ `angular.z`ï¼Œé¡ºæ—¶é’ˆï¼‰
    
*   `k`: ç´§æ€¥åœæ­¢ï¼ˆå°†çº¿é€Ÿåº¦å’Œè§’é€Ÿåº¦å½’é›¶ï¼‰
    

  

*   `u`: å‘å‰å·¦è½¬ï¼ˆç»„åˆè¿åŠ¨ï¼š`linear.x` + `angular.z`ï¼‰
    
*   `o`: å‘å‰å³è½¬ï¼ˆç»„åˆè¿åŠ¨ï¼š`linear.x` + `angular.z`ï¼‰
    
*   `m`: å‘åå·¦è½¬ï¼ˆç»„åˆè¿åŠ¨ï¼š`-linear.x` + `angular.z`ï¼‰
    
*   `.` **(å¥å·)** : å‘åå³è½¬ï¼ˆç»„åˆè¿åŠ¨ï¼š`-linear.x` + `angular.z`ï¼‰
    

  

*   `w`**/**`x`: å¢åŠ /å‡å°‘ **çº¿é€Ÿåº¦** ï¼ˆ`linear.x` çš„å¢é‡æ­¥é•¿ï¼‰
    
*   `a`**/**`d`: å¢åŠ /å‡å°‘ **è§’é€Ÿåº¦** ï¼ˆ`angular.z` çš„å¢é‡æ­¥é•¿ï¼‰
    
*   `s`**/**`S`: ç´§æ€¥åœæ­¢ï¼ˆå°†çº¿é€Ÿåº¦å’Œè§’é€Ÿåº¦å½’é›¶ï¼‰
    

å»ºè®®å¯ä»¥ä½¿ç”¨å®˜æ–¹çš„èŠ‚ç‚¹ã€‚è®°å¾—è·‘ä¹‹å‰ï¼Œå…ˆå°†æ­¥é•¿é™ä½ã€‚

  

5.  #### è‡ªå®šä¹‰èŠ‚ç‚¹
    

1.  ##### åŠŸèƒ½åŒ…åˆ›å»º
    

```Bash
ros2 pkg create cyber_teleop_twist_keyboard --build-type ament_cmake --dependencies rclcpp geometry_msgs --node-name teleop_twist_keyboard
```

2.  ##### èŠ‚ç‚¹ä¸»é€»è¾‘
    

`w/s/a/d`ï¼šæ§åˆ¶æœºå™¨äººå‰è¿›/åé€€/å·¦å¹³ç§»/å³å¹³ç§»ã€‚

`q/e`ï¼šæ§åˆ¶æœºå™¨äººé€†æ—¶é’ˆ/é¡ºæ—¶é’ˆæ—‹è½¬ã€‚

`i/,`ï¼šè°ƒæ•´çº¿é€Ÿåº¦æ­¥é•¿ï¼ˆåŠ é€Ÿ/å‡é€Ÿæ­¥é•¿ï¼‰ã€‚

`j/l`ï¼šè°ƒæ•´è§’é€Ÿåº¦æ­¥é•¿ï¼ˆå‡é€Ÿ/åŠ é€Ÿæ­¥é•¿ï¼‰ã€‚

`k`ï¼šåœæ­¢æ‰€æœ‰è¿åŠ¨ã€‚

  

ä¸‹æ–¹æ˜¯ä¸€ä¸ªæ ¸å¿ƒå‡½æ•°ï¼Œç”¨äºæ£€æµ‹æŒ‰é”®ã€‚

```C++
#include <termios.h>
#include <unistd.h>
#include <fcntl.h>
    
    //æŸ¥é”®ç›˜è¾“å…¥çš„å‡½æ•°ï¼Œå®ƒä¸éœ€è¦æŒ‰å›è½¦å°±èƒ½è¿”å›é”®ç›˜è¾“å…¥ã€‚å®ƒé€šè¿‡ä¿®æ”¹ç»ˆç«¯è®¾ç½®ï¼Œä½¿å¾—å¯ä»¥ç›´æ¥è·å–æŒ‰é”®çš„å€¼ã€‚
    int kbhit(void)
    {
      struct termios oldt, newt;
      int ch;
      int oldf;

      tcgetattr(STDIN_FILENO, &oldt);        // è·å–å½“å‰ç»ˆç«¯çš„è®¾ç½®
      newt = oldt;
      newt.c_lflag &= ~(ICANON | ECHO);       // ç¦ç”¨ç¼“å†²æ¨¡å¼å’Œå›æ˜¾
      newt.c_cc[VMIN] = 1;
      newt.c_cc[VTIME] = 0;
      tcsetattr(STDIN_FILENO, TCSANOW, &newt); // è®¾ç½®æ–°çš„ç»ˆç«¯è®¾ç½®

      oldf = fcntl(STDIN_FILENO, F_GETFL, 0);
      fcntl(STDIN_FILENO, F_SETFL, oldf | O_NONBLOCK); // è®¾ç½®ä¸ºéé˜»å¡æ¨¡å¼

      ch = getchar(); // è·å–å­—ç¬¦
      tcsetattr(STDIN_FILENO, TCSANOW, &oldt);   // æ¢å¤ç»ˆç«¯è®¾ç½®
      fcntl(STDIN_FILENO, F_SETFL, oldf);         // æ¢å¤æ–‡ä»¶æè¿°ç¬¦è®¾ç½®

      if(ch != EOF) { 
          ungetc(ch, stdin);  // å°†å­—ç¬¦æ”¾å›æ ‡å‡†è¾“å…¥æµ
          return 1;           // å¦‚æœè¯»å–äº†å­—ç¬¦ï¼Œè¿”å› 1
      }

      return 0;   // æ²¡æœ‰è¯»å–åˆ°å­—ç¬¦
    }
```

ä»¥ä¸‹ä»£ç æœªç»éªŒè¯ï¼Œè°¨æ…ä½¿ç”¨ï¼Œæœ¬äººç›´æ¥é‡‡ç”¨äº†å®˜æ–¹çš„èŠ‚ç‚¹ï¼Œå¹¶æœªä½¿ç”¨è‡ªå®šä¹‰èŠ‚ç‚¹ã€‚

```C++
#include "rclcpp/rclcpp.hpp"
#include "geometry_msgs/msg/twist.hpp"
#include <geometry_msgs/msg/detail/twist__struct.hpp>
#include <termios.h>
#include <unistd.h>
#include <fcntl.h>
#include "cyber_teleop_twist_keyboard/struct_typedef.h"

class TeleopTwistKeyboardNode: public rclcpp::Node
{
  public:
    TeleopTwistKeyboardNode():Node("CyberTeleopTwistKeyboardNode_cpp")
    {
      RCLCPP_INFO(this->get_logger(),"TeleopTwistKeyboardNode Running!");
      RCLCPP_INFO(this->get_logger(),"é”®ç›˜æ§åˆ¶æœºå™¨äººèŠ‚ç‚¹å·²å¯åŠ¨ï¼");
      // åˆ›å»ºä¸€ä¸ªå‘å¸ƒè€…ï¼Œç±»å‹æ˜¯ geometry_msgs/msg/Twistï¼Œå‘å¸ƒåˆ° "cmd_vel" è¯é¢˜
      keyboard_control_pub_ = this->create_publisher<geometry_msgs::msg::Twist>("cmd_vel", 10);
        
      // å®šæ—¶å™¨ï¼Œå‘¨æœŸæ€§è°ƒç”¨å‘å¸ƒå‡½æ•°
      keyboard_control_pub_timer_ = this->create_wall_timer(
          std::chrono::milliseconds(100), 
          std::bind(&TeleopTwistKeyboardNode::cmd_vel_publish_timer_callback, this)
        );

    }

  private:
    rclcpp::Publisher<geometry_msgs::msg::Twist>::SharedPtr keyboard_control_pub_;
    rclcpp::TimerBase::SharedPtr keyboard_control_pub_timer_;

    // æ­¥é•¿
    fp64 linear_step_ = 0.1;
    fp64 angular_step_ = 0.1;

    // å½“å‰çº¿é€Ÿåº¦å’Œè§’é€Ÿåº¦
    fp64 linear_speed_ = 0.0;
    fp64 angular_speed_ = 0.0;

    // æœ€å¤§é€Ÿåº¦é™åˆ¶
    fp64 max_linear_speed_ = 0.5;
    fp64 max_angular_speed_ = 0.2;

    // æœ€å°é€Ÿåº¦é™åˆ¶
    fp64 min_linear_speed_ = 0.0;
    fp64 min_angular_speed_ = 0.0;

    geometry_msgs::msg::Twist cmd_msg;

    //æŸ¥é”®ç›˜è¾“å…¥çš„å‡½æ•°ï¼Œå®ƒä¸éœ€è¦æŒ‰å›è½¦å°±èƒ½è¿”å›é”®ç›˜è¾“å…¥ã€‚å®ƒé€šè¿‡ä¿®æ”¹ç»ˆç«¯è®¾ç½®ï¼Œä½¿å¾—å¯ä»¥ç›´æ¥è·å–æŒ‰é”®çš„å€¼ã€‚
    int kbhit(void)
    {
      struct termios oldt, newt;
      int ch;
      int oldf;

      tcgetattr(STDIN_FILENO, &oldt);        // è·å–å½“å‰ç»ˆç«¯çš„è®¾ç½®
      newt = oldt;
      newt.c_lflag &= ~(ICANON | ECHO);       // ç¦ç”¨ç¼“å†²æ¨¡å¼å’Œå›æ˜¾
      newt.c_cc[VMIN] = 1;
      newt.c_cc[VTIME] = 0;
      tcsetattr(STDIN_FILENO, TCSANOW, &newt); // è®¾ç½®æ–°çš„ç»ˆç«¯è®¾ç½®

      oldf = fcntl(STDIN_FILENO, F_GETFL, 0);
      fcntl(STDIN_FILENO, F_SETFL, oldf | O_NONBLOCK); // è®¾ç½®ä¸ºéé˜»å¡æ¨¡å¼

      ch = getchar(); // è·å–å­—ç¬¦
      tcsetattr(STDIN_FILENO, TCSANOW, &oldt);   // æ¢å¤ç»ˆç«¯è®¾ç½®
      fcntl(STDIN_FILENO, F_SETFL, oldf);         // æ¢å¤æ–‡ä»¶æè¿°ç¬¦è®¾ç½®

      if(ch != EOF) { 
          ungetc(ch, stdin);  // å°†å­—ç¬¦æ”¾å›æ ‡å‡†è¾“å…¥æµ
          return 1;           // å¦‚æœè¯»å–äº†å­—ç¬¦ï¼Œè¿”å› 1
      }

      return 0;   // æ²¡æœ‰è¯»å–åˆ°å­—ç¬¦
    }

  void cmd_vel_publish_timer_callback()
  {

    cmd_msg.linear.y = 0.0;
    cmd_msg.linear.x = 0.0;
    cmd_msg.angular.z = 0.0;

    // å½“æœ‰é”®ç›˜è¾“å…¥æ—¶ï¼Œå¤„ç†å®ƒ
    if (kbhit()) 
    {
      char key = getchar();  // è·å–é”®ç›˜è¾“å…¥çš„å­—ç¬¦

      if(key == EOF)
      {
        return;
      }
      RCLCPP_INFO(this->get_logger(),"æŒ‰ä¸‹äº†:%c",key);
      // æ ¹æ®æŒ‰é”®å†³å®šæœºå™¨äººè¿åŠ¨æ–¹å‘
      switch(key)
      {
        case 'w': // å‰è¿›
          cmd_msg.linear.y = linear_speed_;
          cmd_msg.linear.x = 0.0;
          cmd_msg.angular.z = 0.0;
          break;
        case 's': // åé€€
          cmd_msg.linear.y = - linear_speed_;
          cmd_msg.linear.x = 0.0;
          cmd_msg.angular.z = 0.0;
          break;
        case 'a': // å·¦å¹³ç§»
          cmd_msg.linear.y = 0.0;
          cmd_msg.linear.x = - linear_speed_;
          cmd_msg.angular.z = 0.0;
          break;
        case 'd': // å³å¹³ç§»
          cmd_msg.linear.y = 0.0;
          cmd_msg.linear.x = linear_speed_;
          cmd_msg.angular.z = 0.0;
          break;
        case 'q': // é€†æ—¶é’ˆæ—‹è½¬
          cmd_msg.linear.y = 0.0;
          cmd_msg.linear.x = 0.0;
          cmd_msg.angular.z = - angular_speed_;
          break;
        case 'e': // é¡ºæ—¶é’ˆæ—‹è½¬
          cmd_msg.angular.z = angular_speed_;
          break;
        case 'i': // å¢åŠ çº¿é€Ÿåº¦
          linear_speed_ = std::clamp(linear_speed_ + linear_step_, min_linear_speed_, max_linear_speed_);
          RCLCPP_INFO(this->get_logger(), "Linear increased to: %.2f", linear_speed_);
          break;
        case ',': // å‡å°çº¿é€Ÿåº¦
          linear_speed_ = std::clamp(linear_speed_ - linear_step_, min_linear_speed_, max_linear_speed_);
          RCLCPP_INFO(this->get_logger(), "Linear decreased to: %.2f", linear_speed_);
          break;
        case 'l': // å¢åŠ è§’é€Ÿåº¦
          angular_speed_ = std::clamp(angular_speed_ + angular_step_, min_angular_speed_, max_angular_speed_);
          RCLCPP_INFO(this->get_logger(), "Angular increased to: %.2f", angular_speed_);
          break;
        case 'j': // å‡å°è§’é€Ÿåº¦
          angular_speed_ = std::clamp(angular_speed_ - angular_step_, min_angular_speed_, max_angular_speed_);
          RCLCPP_INFO(this->get_logger(), "Angular decreased to: %.2f", angular_speed_);
          break;
        case 'k': // åœæ­¢
          cmd_msg.linear.y = 0.0;
          cmd_msg.linear.x = 0.0;
          cmd_msg.angular.z = 0.0;
          break;
        default:
          RCLCPP_WARN(this->get_logger(), "Unknown key pressed!");
      }
    }
    keyboard_control_pub_->publish(cmd_msg);
  }

};

int main(int argc, char ** argv)
{
  rclcpp::init(argc,argv);

  auto node = std::make_shared<TeleopTwistKeyboardNode>();

  rclcpp::spin(node);

  rclcpp::shutdown();
  return 0;
}
```

  

7.  ## åæ ‡ç³»ä¸è¯é¢˜å…³ç³»
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWU5NTBhM2QxNjk1MTJjMTZhYmM5MzUzMjFiMzMwMTFfSEdWZksxdUVmZngxOEU2YUhUcFpzMENJS2RHUERCNm5fVG9rZW46U01sbmJGejlPb2l6Q3p4NjVtb2NJM2pGbktnXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzRlM2RkMDI0N2FjZjMzMTI2MTFkNDVhNDc3NjdlMDdfdGV2UEQ5UnVmbGVFZHlIcnFTeG94Skd3TDVZRExIRVVfVG9rZW46R2gyeGJrNjRGb2xQQ1d4bU5aQ2NQTzI1bkxnXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

**odomåæ ‡ç³»** ä¸æ˜¯å›ºå®šä¸åŠ¨çš„ï¼ŒåŸç‚¹æ˜¯æœºå™¨äººçš„åˆå§‹ä½ç½®ã€‚

**base\_linkåæ ‡ç³»** æ˜¯æœºå™¨äººæœ¬ä½“çš„åæ ‡ç³»ï¼Œå›ºå®šåœ¨æœºå™¨äººä¸­å¿ƒï¼ˆå¦‚åº•ç›˜ï¼‰ã€‚å½“æœºå™¨äººç§»åŠ¨æ—¶ï¼Œ/odomè¯é¢˜å‘å¸ƒæœºå™¨äººè¿åŠ¨æ•°æ®ï¼Œbase\_linkåæ ‡ç³»ä¼šç›¸å¯¹äºodomåæ ‡ç³»ç§»åŠ¨ã€‚

**laser\_linkå’Œimu\_linkç­‰åæ ‡ç³»** å’Œbase\_linkä¹‹é—´çš„ä½ç½®æ˜¯é™æ€çš„ï¼Œæ‰€ä»¥å½“base\_linkç§»åŠ¨äº†ï¼Œå…¶ä»–å­åæ ‡ç³»ä¹Ÿä¼šè·Ÿéšç§»åŠ¨ã€‚

  

odomåæ ‡ç³»æ˜¯æ ¹æ®æœºå™¨äººç”µæœºç¼–ç å™¨æˆ–è€…é‡Œç¨‹è®¡åé¦ˆå›æ¥çš„æ•°æ®é¢„ä¼°çš„æœºå™¨äººå‡ºå‘æ—¶çš„ä½ç½®ï¼Œä¸€èˆ¬éƒ½ä¼šæµ®åŠ¨ã€‚

mapåæ ‡ç³»æ˜¯é€šè¿‡ç®—æ³•ç”¨æ¿€å…‰é›·è¾¾ç­‰ä¼ æ„Ÿå™¨é¢„ä¼°å‡ºæ¥çš„æœºå™¨äººå‡ºå‘æ—¶çš„ä½ç½®ã€‚

ä½†æ˜¯ç”±äºå»ºè®®ä½¿ç”¨æ ‘å½¢TFï¼Œæ‰€ä»¥æˆ‘ä»¬é€šå¸¸å°†mapåæ ‡ç³»ä½œä¸ºæ ¹åæ ‡ç³»ï¼Œæ‰€ä»¥æ­¤æ—¶mapåœ¨rviz2é‡Œæ˜¯ä¸åŠ¨çš„ï¼Œodomä½œä¸ºmapåæ ‡ç³»çš„ä¸‹è¡Œåæ ‡ç³»ã€‚ï¼ˆå¯ä»¥å¬ä¸€ä¸‹èµµè€å¸ˆROS1çš„è¯¾ç¨‹ï¼Œè¿™é‡Œè®²çš„å¾ˆå¥½ï¼‰

  

8.  ## ç¡¬ä»¶å¹³å°è¿›é˜¶
    

1.  ### è½®å¼é‡Œç¨‹è®¡æ ‡å®šä¸èåˆ
    

**åœºæ™¯**

é‡Œç¨‹è®¡åœ¨ROSä¸­æ‰®æ¼”ç€é‡è¦çš„è§’è‰²ï¼Œèƒ½å¤Ÿä¸ºæœºå™¨äººçš„å®šä½ã€è·¯å¾„è§„åˆ’å’Œè¿åŠ¨æ§åˆ¶ç­‰ä»»åŠ¡æä¾›é‡è¦çš„æ•°æ®æ”¯æŒã€‚ç„¶è€Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œé‡Œç¨‹è®¡å¹¶ä¸èƒ½å‡†ç¡®åœ°åæ˜ æœºå™¨äººçš„ä½ç½®å’Œè¿åŠ¨çŠ¶æ€ï¼Œå‡ºç°çš„é—®é¢˜åŒ…æ‹¬ï¼š

> 1.é‡Œç¨‹è®¡ä¸­çš„çº¿é€Ÿåº¦ã€è§’é€Ÿåº¦å’Œæœºå™¨äººå®é™…çš„çº¿é€Ÿåº¦ã€è§’é€Ÿåº¦æ˜æ˜¾æœ‰å·®å¼‚ï¼Œè€Œä¸”é‡Œç¨‹è®¡ä¸­æä¾›çš„æœºå™¨äººä½å§¿ä¸çœŸå®ä½å§¿ä¸ä¸€è‡´ï¼›
> 
> 2.å½“æœºå™¨äººè½¦è½®æ‰“æ»‘æˆ–å—åˆ°å¤–åŠ›å½±å“è€Œå‡ºç°å§¿æ€æ”¹å˜æ—¶ï¼Œè¿™ç§å§¿æ€çš„å˜åŒ–æ— æ³•é€šè¿‡è½®å¼é‡Œç¨‹è®¡æ­£ç¡®åé¦ˆã€‚

åœ¨è¿™äº›åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿›è¡Œé‡Œç¨‹è®¡æ ‡å®šå’Œèåˆæ¥ä¼˜åŒ–è§£å†³è¿™äº›é—®é¢˜ã€‚

**æ¦‚å¿µ**

**é‡Œç¨‹è®¡æ ‡å®šï¼š** é‡Œç¨‹è®¡æ ‡å®šæ˜¯æŒ‡é€šè¿‡å¯¹æœºå™¨äººé‡Œç¨‹è®¡è¿›è¡Œç²¾ç¡®çš„æ ¡å‡†å’Œè°ƒæ•´ï¼Œä»¥å‡å°æˆ–æ¶ˆé™¤é‡Œç¨‹è®¡æµ‹é‡ä¸­çš„è¯¯å·®å’Œä¸å‡†ç¡®æ€§ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥é€šè¿‡æµ‹é‡è°ƒæ•´è½®èƒç›´å¾„å’Œè½´è·ç­‰å‚æ•°æ¥æ ¡å‡†æœºå™¨äººçš„çº¿é€Ÿåº¦å’Œè§’é€Ÿåº¦ï¼Œä»è€Œä½¿é‡Œç¨‹è®¡æµ‹é‡ç»“æœæ›´åŠ å‡†ç¡®ã€‚é‡Œç¨‹è®¡æ ‡å®šçš„ä¸»è¦ç›®æ ‡æ˜¯ç¡®ä¿é‡Œç¨‹è®¡æµ‹é‡ç»“æœä¸å®é™…æœºå™¨äººçš„è¿åŠ¨è½¨è¿¹ä¸€è‡´ï¼Œä»è€Œæé«˜æœºå™¨äººçš„å®šä½ç²¾åº¦å’Œè·¯å¾„è§„åˆ’å‡†ç¡®æ€§ã€‚

**é‡Œç¨‹è®¡èåˆï¼š** é‡Œç¨‹è®¡èåˆæ˜¯åˆ©ç”¨å¤šä¸ªæ¥æºçš„é‡Œç¨‹è®¡æ•°æ®è¿›è¡Œèåˆï¼Œä»¥è·å¾—æ›´å‡†ç¡®å¯é çš„æœºå™¨äººå®šä½å’Œè¿åŠ¨ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œå°†è½¦è½®ç¼–ç å™¨å’Œæƒ¯æ€§æµ‹é‡å•å…ƒï¼ˆIMUï¼‰çš„æ•°æ®èåˆï¼Œå¯ä»¥æé«˜å®šä½çš„å‡†ç¡®æ€§ã€‚é€šè¿‡ç»“åˆä¸åŒçš„ä¼ æ„Ÿå™¨å’Œç®—æ³•ï¼Œèƒ½å¤Ÿæé«˜æœºå™¨äººåœ¨å¯¼èˆªå’Œæ§åˆ¶ä»»åŠ¡ä¸­çš„å‡†ç¡®æ€§å’Œé²æ£’æ€§ï¼Œä»è€Œå®ç°æ›´é«˜çº§åˆ«çš„è‡ªä¸»ç§»åŠ¨èƒ½åŠ›ã€‚

**ä½œç”¨**

é‡Œç¨‹è®¡æ ‡å®šå’Œèåˆæ˜¯æœºå™¨äººé¢†åŸŸä¸­çš„ä¸¤ä¸ªé‡è¦æŠ€æœ¯ï¼Œé€šè¿‡åˆ©ç”¨è¿™äº›æŠ€æœ¯ï¼Œæœºå™¨äººå¯ä»¥æ›´åŠ å‡†ç¡®åœ°äº†è§£è‡ªèº«ä½ç½®å’Œè¿åŠ¨çŠ¶æ€ï¼Œæé«˜æœºå™¨äººçš„å®šä½å’Œå¯¼èˆªç²¾åº¦ï¼Œä¸ºæœºå™¨äººçš„è‡ªä¸»å¯¼èˆªã€è·¯å¾„è§„åˆ’ç­‰ä»»åŠ¡æä¾›åŸºç¡€ã€‚

1.  #### è½®å¼é‡Œç¨‹è®¡æ ‡å®š
    

è½®å¼é‡Œç¨‹è®¡æ ‡å®šæ˜¯æ ¡å‡†æœºå™¨äººè½®å­çš„æ—‹è½¬å’Œç§»åŠ¨ï¼Œä»¥æä¾›æœºå™¨äººè¿åŠ¨ä¸­çš„å‡†ç¡®ä½ç½®å’Œå§¿æ€ä¿¡æ¯çš„æ–¹æ³•ã€‚é€šè¿‡æ ‡å®šï¼Œå¯ä»¥ä¿®æ­£å› è½®å­å°ºå¯¸å’Œè½®è·ç­‰å› ç´ å¼•èµ·çš„è¯¯å·®ï¼Œè·å¾—æ›´å‡†ç¡®çš„è¿åŠ¨è½¨è¿¹ã€‚æœ¬èŠ‚å°†ä»¥MyCarå¯¼èˆªæœºå™¨äººä¸ºä¾‹æ¼”ç¤ºæ ‡å®šè¿‡ç¨‹ï¼Œå…¶æ ‡å®šæ­¥éª¤å¦‚ä¸‹ï¼š

1.  å‡†å¤‡æµ‹é‡åœºåœ°ï¼›
    
2.  çº¿æ€§ä½ç§»æ ‡å®šï¼›
    
3.  è½¬è§’ä½ç§»æ ‡å®šï¼›
    
4.  éªŒè¯å’Œè°ƒæ•´ã€‚
    

å¦å¤–ï¼Œè¯¥è¿‡ç¨‹è¿˜éœ€è¦ä½¿ç”¨å°ºå­ä½œä¸ºæµ‹é‡å·¥å…·ã€‚

**1.å‡†å¤‡æµ‹é‡åœºåœ°**

é€‰æ‹©ä¸€ä¸ªå¼€æ”¾è€Œå¹³å¦çš„åŒºåŸŸï¼Œç¡®ä¿æ²¡æœ‰éšœç¢ç‰©å’Œå…¶ä»–å¹²æ‰°å› ç´ ã€‚

**2.çº¿æ€§ä½ç§»æ ‡å®š**

çº¿æ€§ä½ç§»æ ‡å®šæ˜¯ç”¨æ¥æ ‡å®šæœºå™¨äººåœ¨ç›´çº¿ç§»åŠ¨æ—¶è¡Œè¿›çš„è·ç¦»ã€‚è¯¥æ ‡å®šä¸è½¦è½®ç›´å¾„å‚æ•°å¯†åˆ‡ç›¸å…³ï¼Œå½“è½¦è½®ç›´å¾„æµ‹é‡ä¸å‡†ç¡®æˆ–è½®èƒç£¨æŸæ—¶ï¼Œä¼šå¯¼è‡´è½®å¼é‡Œç¨‹è®¡çš„çº¿æ€§ä½ç§»å‡ºç°è¯¯å·®ã€‚ä»¥ä¸‹æ˜¯çº¿æ€§ä½ç§»æ ‡å®šçš„ä¸»è¦æ­¥éª¤ï¼š

**ï¼ˆ1ï¼‰å®é™…æ•°æ®é‡‡é›†**

å¯åŠ¨æœºå™¨äººåº•ç›˜å’Œé”®ç›˜æ§åˆ¶èŠ‚ç‚¹ï¼Œä½¿ç”¨é”®ç›˜æ§åˆ¶æœºå™¨äººå‘å‰ç›´çº¿è¿åŠ¨ä¸€æ®µè·ç¦»ï¼Œå¹¶æµ‹é‡çº¿æ€§ä½ç§»æ•°æ®ã€‚

**ï¼ˆ2ï¼‰é‡Œç¨‹è®¡æ¶ˆæ¯é‡‡é›†**

æœºå™¨äººåœæ­¢åï¼Œè¾“å‡ºé‡Œç¨‹è®¡æ¶ˆæ¯ï¼Œå¹¶è·å–é‡Œç¨‹è®¡æ¶ˆæ¯ä¸­çš„æœºå™¨äººçš„ä½ç§»æ•°æ®ã€‚

**ï¼ˆ3ï¼‰å‚æ•°è®¡ç®—ä»¥åŠä¿®æ”¹**

æ”¶é›†å®é™…ä½ç§»æ•°æ®ï¼ˆw1ï¼‰å’Œé‡Œç¨‹è®¡æ¶ˆæ¯ä¸­çš„ä½ç§»æ•°æ®ï¼ˆw2ï¼‰ï¼Œå¹¶ç»“åˆé©±åŠ¨åŒ…é…ç½®æ–‡ä»¶ä¸­çš„åŸè½®èƒç›´å¾„å€¼ï¼ˆd1ï¼‰ï¼Œå³å¯è®¡ç®—ä¿®æ­£åçš„è½®èƒç›´å¾„å€¼ï¼ˆdï¼‰ã€‚è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š

```C++
d = w1 / w2 * d1;
```

å°†è®¡ç®—å‡ºçš„ç»“æœå†™å…¥ MyCar æœºå™¨äººçš„é…ç½®æ–‡ä»¶å¯¹åº”çš„å‚æ•°ï¼Œå¹¶é‡æ–°æ„å»ºã€‚

ä¸ºäº†è·å¾—æœ€ä½³ç»“æœï¼Œå¯ä»¥å¤šæ¬¡æ‰§è¡Œä¸Šè¿°æµç¨‹ã€‚æ¯æ¬¡æ‰§è¡Œåï¼Œæµ‹é‡å¹¶è®°å½•æ–°çš„å®é™…ä½ç§»æ•°æ®ï¼ˆw1ï¼‰å’Œé‡Œç¨‹è®¡æ¶ˆæ¯ä¸­çš„ä½ç§»æ•°æ®ï¼ˆw2ï¼‰ï¼Œç„¶åæ ¹æ®æ–°çš„æ•°æ®å†æ¬¡è®¡ç®—ä¿®æ­£åçš„è½®èƒç›´å¾„å€¼ï¼ˆdï¼‰ã€‚ä¸æ–­è¿­ä»£è¿™ä¸ªè¿‡ç¨‹ï¼Œå¯ä»¥é€æ­¥ä¼˜åŒ–è½®èƒç›´å¾„çš„ä¼°è®¡å€¼ï¼Œå‡å°é‡Œç¨‹è®¡çš„çº¿æ€§ä½ç§»è¯¯å·®ã€‚

*å°æç¤ºï¼š*

> å¦‚æœä½¿ç”¨çš„æ˜¯ä»¥Arduinoä¸ºä¸»æ§çš„MyCarä¸¤è½®å·®é€Ÿæœºå™¨äººï¼Œé‚£ä¹ˆéœ€è¦ä¿®æ”¹ros2\_arduino\_bridgeåŠŸèƒ½åŒ…ä¸‹çš„params/arduino.yamlæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶ä¸­æœ‰ä¸€ä¸ªåä¸ºwheel\_diameterå‚æ•°å³ä¸ºè½¦è½®ç›´å¾„ï¼›
> 
> å¦‚æœä½¿ç”¨çš„æ˜¯ä»¥Stm32ä¸ºä¸»æ§çš„MyCarä¸¤è½®å·®é€Ÿæœºå™¨äººï¼Œé‚£ä¹ˆéœ€è¦ä¿®æ”¹ros2\_stm32\_bridgeåŠŸèƒ½åŒ…ä¸‹çš„params/stm32\_2w.yamlæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶ä¸­æœ‰ä¸€ä¸ªåä¸ºwheel\_diameterå‚æ•°å³ä¸ºè½¦è½®ç›´å¾„ï¼›
> 
> å¦‚æœä½¿ç”¨çš„æ˜¯ä»¥Stm32ä¸ºä¸»æ§çš„MyCarå››è½®å·®é€Ÿæœºå™¨äººï¼Œé‚£ä¹ˆéœ€è¦ä¿®æ”¹ros2\_stm32\_bridgeåŠŸèƒ½åŒ…ä¸‹çš„params/stm32\_4w.yamlæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶ä¸­æœ‰ä¸€ä¸ªåä¸ºwheel\_diameterå‚æ•°å³ä¸ºè½¦è½®ç›´å¾„ã€‚

**3.è½¬è§’ä½ç§»æ ‡å®š**

è½¬è§’ä½ç§»æ ‡å®šæ˜¯ç”¨æ¥æ ‡å®šæœºå™¨äººåœ¨è½¬å¼¯æ—¶çš„è§’åº¦å˜åŒ–ã€‚è¯¥æ ‡å®šä¸åº•ç›˜çš„æ—‹è½¬åŠå¾„å‚æ•°å¯†åˆ‡ç›¸å…³ï¼Œå½“æ—‹è½¬åŠå¾„è®¾ç½®ä¸å½“æ—¶ï¼Œä¼šå¯¼è‡´è½¬è§’ä½ç§»çš„æµ‹é‡è¯¯å·®ã€‚å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæ˜¯ä¸¤è½®å·®é€Ÿæœºå™¨äººï¼Œé‚£ä¹ˆæ—‹è½¬åŠå¾„å’Œè½®é—´è·åŸºæœ¬ä¸€è‡´ã€‚è¿™æ˜¯å› ä¸ºä¸¤è½®å·®é€Ÿæœºå™¨äººåœ¨æ—‹è½¬æ—¶æ²¡æœ‰é€ æˆè½¦ä½“çš„ä¾§æ»‘è¿åŠ¨ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨è½®é—´è·æ¥è®¡ç®—æ—‹è½¬è§’åº¦ï¼Œå¹¶ä¸”æ—‹è½¬åŠå¾„å¯ä»¥è¿‘ä¼¼ç­‰äºè½®é—´è·ã€‚ç„¶è€Œï¼Œå¯¹äºå››è½®å·®é€Ÿæœºå™¨äººï¼Œåœ¨æ—‹è½¬æ—¶ä¼šäº§ç”Ÿä¾§æ»‘ï¼Œè½®é—´è·æ— æ³•ç›´æ¥ç”¨äºè®¡ç®—æ—‹è½¬è§’åº¦ã€‚å››è½®å·®é€Ÿæœºå™¨äººçš„æ—‹è½¬åŠå¾„éœ€è¦é€šè¿‡å®éªŒè·å–ï¼Œå› ä¸ºå®ƒçš„æ—‹è½¬åŠå¾„å—åˆ°ä¾§æ»‘è¿åŠ¨çš„å½±å“ã€‚æ­¤å¤–ï¼Œç”±äºæœºå™¨äººçš„å·¦å³ä¾§è½®èƒå·®å¼‚æˆ–è½¦è¾†é‡å¿ƒåç§»ç­‰åŸå› ï¼Œå·¦æ—‹è½¬å’Œå³æ—‹è½¬æ—¶è®¡ç®—æ—‹è½¬è§’åº¦æ‰€ä½¿ç”¨çš„æ—‹è½¬åŠå¾„å¯èƒ½ä¸åŒï¼Œå› æ­¤éœ€è¦è¿›è¡Œåˆ†åˆ«å®éªŒæ¥è·å–å·¦å³æ—‹è½¬æ—¶çš„æ—‹è½¬åŠå¾„ã€‚

ä»¥ä¸‹æ˜¯è½¬è§’ä½ç§»æ ‡å®šçš„ä¸»è¦æ­¥éª¤ï¼š

**ï¼ˆ1ï¼‰å®é™…æ•°æ®é‡‡é›†**

å¯åŠ¨æœºå™¨äººåº•ç›˜å’Œé”®ç›˜æ§åˆ¶èŠ‚ç‚¹ï¼Œä½¿ç”¨é”®ç›˜æ§åˆ¶æœºå™¨äººåŸåœ°æ—‹è½¬ï¼Œå¹¶æµ‹é‡è½¬è§’ä½ç§»æ•°æ®ï¼Œæ¯”å¦‚å¯ä»¥åŸåœ°æ—‹è½¬ä¸€å‘¨ã€‚

**ï¼ˆ2ï¼‰é‡Œç¨‹è®¡æ¶ˆæ¯é‡‡é›†**

æœºå™¨äººåœæ­¢åï¼Œæ‰“å¼€rviz2ï¼Œå¹¶æ·»åŠ tfæ’ä»¶ï¼Œä»¥æ˜¾ç¤ºæœºå™¨äººåŸºåæ ‡ç³»ï¼ˆä¸€èˆ¬æ˜¯base\_linkæˆ–base\_footprintï¼‰ä¸é‡Œç¨‹è®¡åæ ‡ç³»ï¼ˆä¸€èˆ¬æ˜¯odomï¼‰ç›¸å¯¹å…³ç³»ã€‚

**ï¼ˆ3ï¼‰å‚æ•°è®¡ç®—ä»¥åŠä¿®æ”¹**

åœ¨æœºå™¨äººåŸåœ°æ—‹è½¬ä¸€å‘¨æ—¶ï¼Œå¦‚æœæœºå™¨äººåŸºåæ ‡ç³»ä¸é‡Œç¨‹è®¡åæ ‡ç³»ç›¸å»åˆï¼Œé‚£ä¹ˆæ—‹è½¬åŠå¾„å‚æ•°æ— éœ€è°ƒæ•´ï¼›å¦‚æœæœºå™¨äººåŸºåæ ‡ç³»ä¸é‡Œç¨‹è®¡åæ ‡ç³»ä¸å»åˆä¸”rviz2ä¸­æœºå™¨äººçš„æ—‹è½¬è§’åº¦å¤§äºå®é™…æ—‹è½¬è§’åº¦ï¼Œé‚£ä¹ˆè¯·å°†æ—‹è½¬åŠå¾„è°ƒå¤§ï¼›å¦‚æœæœºå™¨äººåŸºåæ ‡ç³»ä¸é‡Œç¨‹è®¡åæ ‡ç³»ä¸å»åˆä¸”rviz2ä¸­æœºå™¨äººçš„æ—‹è½¬è§’åº¦å°äºå®é™…æ—‹è½¬è§’åº¦ï¼Œé‚£ä¹ˆè¯·å°†æ—‹è½¬åŠå¾„è°ƒå°ã€‚å°†è®¡ç®—å‡ºçš„ç»“æœå†™å…¥ MyCar æœºå™¨äººçš„é…ç½®æ–‡ä»¶å¯¹åº”çš„å‚æ•°ï¼Œå¹¶é‡æ–°æ„å»ºã€‚

ä¸ºäº†è·å¾—æœ€ä½³ç»“æœï¼Œå¯ä»¥å¤šæ¬¡æ‰§è¡Œä¸Šè¿°æµç¨‹ã€‚æ¯æ¬¡æ‰§è¡Œåï¼Œæµ‹é‡å¹¶è®°å½•æ–°çš„å®é™…è½¬è§’ä½ç§»æ•°æ®å’Œrviz2ä¸­çš„åæ ‡ç³»ç›¸å¯¹å…³ç³»ï¼Œç„¶åæ ¹æ®æ–°çš„æ•°æ®å†æ¬¡ä¿®æ­£æ—‹è½¬åŠå¾„ã€‚é€šè¿‡ä¸æ–­è¿­ä»£è¿™ä¸ªè¿‡ç¨‹ï¼Œå¯ä»¥é€æ­¥ä¼˜åŒ–æ—‹è½¬åŠå¾„çš„ä¼°è®¡å€¼ï¼Œå‡å°è½¬è§’ä½ç§»çš„æµ‹é‡è¯¯å·®ã€‚

*å°æç¤ºï¼š*

> å¦‚æœä½¿ç”¨çš„æ˜¯ä»¥Arduinoä¸ºä¸»æ§çš„MyCarä¸¤è½®å·®é€Ÿæœºå™¨äººï¼Œé‚£ä¹ˆéœ€è¦ä¿®æ”¹ros2\_arduino\_bridgeåŠŸèƒ½åŒ…ä¸‹çš„params/arduino.yamlæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶ä¸­æœ‰ä¸€ä¸ªåä¸ºwheel\_trackå‚æ•°å³ä¸ºè½¦è½®ç›´å¾„ï¼Œåœ¨ros2\_arduino\_bridgeä¸­å¹¶æœªå¯¹å·¦æ—‹è½¬å’Œå³æ—‹è½¬åšåŒºåˆ†ï¼›
> 
> å¦‚æœä½¿ç”¨çš„æ˜¯ä»¥Stm32ä¸ºä¸»æ§çš„MyCarä¸¤è½®å·®é€Ÿæœºå™¨äººï¼Œé‚£ä¹ˆéœ€è¦ä¿®æ”¹ros2\_stm32\_bridgeåŠŸèƒ½åŒ…ä¸‹çš„params/stm32\_2w.yamlæ–‡ä»¶ï¼Œåœ¨æœºå™¨äººå·¦æ—‹è½¬æ—¶ï¼Œè¦æ ‡å®šçš„æ˜¯åä¸ºmodel\_param\_acwçš„å‚æ•°ï¼Œåœ¨æœºå™¨äººå³æ—‹è½¬æ—¶ï¼Œè¦æ ‡å®šçš„æ˜¯åä¸ºmodel\_param\_cwçš„å‚æ•°ï¼›
> 
> å¦‚æœä½¿ç”¨çš„æ˜¯ä»¥Stm32ä¸ºä¸»æ§çš„MyCarå››è½®å·®é€Ÿæœºå™¨äººï¼Œé‚£ä¹ˆéœ€è¦ä¿®æ”¹ros2\_stm32\_bridgeåŠŸèƒ½åŒ…ä¸‹çš„params/stm32\_4w.yamlæ–‡ä»¶ï¼Œå’Œä¸¤è½®å·®é€Ÿç±»ä¼¼çš„ï¼Œåœ¨æœºå™¨äººå·¦æ—‹è½¬æ—¶ï¼Œè¦æ ‡å®šçš„æ˜¯åä¸ºmodel\_param\_acwçš„å‚æ•°ï¼Œåœ¨æœºå™¨äººå³æ—‹è½¬æ—¶ï¼Œè¦æ ‡å®šçš„æ˜¯åä¸ºmodel\_param\_cwçš„å‚æ•°ã€‚

**4.éªŒè¯å’Œè°ƒæ•´**

å°†æ ‡å®šåçš„è½®å¼é‡Œç¨‹è®¡åº”ç”¨äºå®é™…åœºæ™¯ä¸­ï¼Œå¹¶è¿›è¡ŒéªŒè¯å’Œè°ƒæ•´ã€‚è§‚å¯Ÿè½¦è¾†çš„å®é™…ä½ç½®å’Œè¿åŠ¨ä¸ä¼°è®¡å€¼çš„å·®å¼‚ï¼Œå¹¶è¿›è¡Œå¿…è¦çš„è°ƒæ•´å’Œæ ¡å‡†ã€‚å¦å¤–ï¼Œå½“è½¦è¾†ä½¿ç”¨ç¯å¢ƒå‘ç”Ÿæ”¹å˜ï¼Œæˆ–æŒç»­ä½¿ç”¨è¾ƒé•¿ä¸€æ®µæ—¶é—´åï¼Œå»ºè®®å¯¹é‡Œç¨‹è®¡è¿›è¡Œé‡æ–°æ ‡å®šã€‚

  

2.  #### è½®å¼é‡Œç¨‹è®¡ä¸IMUèåˆ
    

è½®å¼é‡Œç¨‹è®¡å¯ä»¥é€šè¿‡ç›‘æµ‹è½®å­è½¬åŠ¨æ¥ä¼°è®¡æœºå™¨äººçš„ä½ç½®å’Œå§¿æ€å˜åŒ–ï¼Œä½†å®¹æ˜“å—åˆ°æ»‘åŠ¨å’Œä¸å‡åŒ€åœ°é¢ç­‰ç‰¹æ®Šæƒ…å†µçš„å½±å“ã€‚IMUå¯ä»¥æµ‹é‡åŠ é€Ÿåº¦å’Œè§’é€Ÿåº¦ï¼Œæä¾›é«˜é¢‘ç‡çš„è¿åŠ¨ä¿¡æ¯ï¼Œä½†å®¹æ˜“å—åˆ°ç§¯åˆ†æ¼‚ç§»å’Œå™ªå£°çš„å½±å“ã€‚å°†å®ƒä»¬çš„æ•°æ®èåˆå¯ä»¥å¼¥è¡¥å½¼æ­¤çš„ä¸è¶³ï¼Œæä¾›æ›´å¯é å’Œå‡†ç¡®çš„å®šä½ç»“æœï¼Œå……åˆ†åˆ©ç”¨å„è‡ªçš„ä¼˜åŠ¿ï¼Œå‡å°‘å±€é™æ€§ã€‚åœ¨ROS2ä¸­ï¼Œæä¾›äº†robot\_localizationåŠŸèƒ½åŒ…ï¼Œå¯ä»¥æ–¹ä¾¿çš„å¸®åŠ©å¼€å‘äººå‘˜å®ç°äºŒè€…çš„èåˆã€‚

**1.robot\_localizationç®€ä»‹**

robot\_localizationæ˜¯ROS2ä¸­çš„ä¸€ä¸ªåŠŸèƒ½åŒ…ï¼Œç”¨äºå®ç°å¤šä¼ æ„Ÿå™¨æ•°æ®èåˆçš„æœºå™¨äººå®šä½å’Œå¯¼èˆªã€‚å®ƒæä¾›äº†ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥å°†æ¥è‡ªä¸åŒä¼ æ„Ÿå™¨ï¼ˆå¦‚è½®å¼é‡Œç¨‹è®¡ã€IMUã€GPSã€æ¿€å…‰é›·è¾¾ç­‰ï¼‰çš„æ•°æ®è¿›è¡Œèåˆï¼Œä»¥è·å¾—æ›´å‡†ç¡®å’Œé²æ£’çš„å®šä½ç»“æœã€‚åœ¨è¯¥åŠŸèƒ½åŒ…ä¸­ï¼Œèåˆç®—æ³•å·²ç»é€šè¿‡èŠ‚ç‚¹å°è£…å®Œæ¯•ï¼Œè°ƒç”¨è€…åªéœ€åœ¨è°ƒç”¨èŠ‚ç‚¹æ—¶æ³¨å…¥å‚æ•°å³å¯ã€‚

è¯·è°ƒç”¨å¦‚ä¸‹æŒ‡ä»¤å®‰è£…robot\_localizationï¼š

```Bash
sudo apt install ros-<distro>-robot-localization
```

è¯·å°†`<distro>`æ›¿æ¢ä¸ºæ­£åœ¨ä½¿ç”¨çš„ROS2å‘è¡Œç‰ˆä»£å·ã€‚

**2.robot\_localizationèŠ‚ç‚¹è¯´æ˜**

åœ¨robot\_localizationåŠŸèƒ½åŒ…ä¸­æä¾›äº†`ekf_node`ã€`ukf_node`å’Œ`navsat_transform_node`å¤šä¸ªèŠ‚ç‚¹æ¥å®ç°æœºå™¨äººçš„çŠ¶æ€ä¼°è®¡å’Œå®šä½ã€‚ä¸åŒèŠ‚ç‚¹ä»‹ç»å¦‚ä¸‹ï¼š

*   `ekf_node`æ˜¯åŸºäºå¢å¼ºå¡å°”æ›¼æ»¤æ³¢å™¨ï¼ˆEKFï¼‰çš„èŠ‚ç‚¹ï¼Œç”¨äºèåˆå¤šä¸ªä¼ æ„Ÿå™¨æ•°æ®æ¥è¿›è¡ŒçŠ¶æ€ä¼°è®¡ã€‚å®ƒæ¥æ”¶æ¥è‡ªé‡Œç¨‹è®¡ã€IMUã€æ¿€å…‰é›·è¾¾ç­‰ä¼ æ„Ÿå™¨çš„æ•°æ®ï¼Œå¹¶å°†å®ƒä»¬èåˆåœ¨ä¸€èµ·ä»¥æä¾›æ›´å‡†ç¡®çš„æœºå™¨äººçŠ¶æ€ä¼°è®¡ã€‚EKFèŠ‚ç‚¹ä½¿ç”¨æœºå™¨äººçš„è¿åŠ¨æ¨¡å‹å’Œä¼ æ„Ÿå™¨æµ‹é‡æ¨¡å‹æ¥ä¼°è®¡æœºå™¨äººçš„ä½ç½®ã€å§¿æ€å’Œé€Ÿåº¦ç­‰çŠ¶æ€å˜é‡ã€‚
    
*   `ukf_node`æ˜¯åŸºäºæ— è¿¹å¡å°”æ›¼æ»¤æ³¢å™¨ï¼ˆUKFï¼‰çš„èŠ‚ç‚¹ï¼Œç”¨äºå®ç°æœºå™¨äººçš„çŠ¶æ€ä¼°è®¡å’Œæœ¬åœ°åŒ–ã€‚UKFèŠ‚ç‚¹é‡‡ç”¨æ— è¿¹å˜æ¢ï¼ˆUnscented Transformï¼‰æ¥å¤„ç†éçº¿æ€§ç³»ç»Ÿï¼Œé€šè¿‡ä¼°è®¡æœºå™¨äººåœ¨ç©ºé—´ä¸­çš„ä½ç½®å’Œå§¿æ€ï¼Œæä¾›æ›´å‡†ç¡®çš„çŠ¶æ€ä¼°è®¡ã€‚ä¸EKFç›¸æ¯”ï¼ŒUKFèŠ‚ç‚¹å¯ä»¥æ›´å¥½åœ°å¤„ç†éçº¿æ€§ç³»ç»Ÿçš„ä¼°è®¡é—®é¢˜ã€‚
    
*   `navsat_transform_node`ç”¨äºå°†å…¨çƒå®šä½ç³»ç»Ÿï¼ˆGNSSï¼‰å¯¼èˆªå«æ˜Ÿæ•°æ®ä¸æƒ¯æ€§æµ‹é‡å•å…ƒï¼ˆIMUï¼‰æ•°æ®è¿›è¡Œèåˆï¼Œä»¥æä¾›ç²¾ç¡®çš„ä½ç½®ä¼°è®¡ã€‚è¯¥èŠ‚ç‚¹æ ¡æ­£GNSSä¿¡å·çš„è¯¯å·®ï¼Œå¹¶å°†å…¶è½¬åŒ–ä¸ºå¸¦æœ‰é«˜ç²¾åº¦çš„ä½ç½®ä¿¡æ¯ã€‚è¿™æœ‰åŠ©äºæ”¹å–„åœ¨å®¤å†…æˆ–å…·æœ‰GNSSä¿¡å·ä¸ç¨³å®šæ€§çš„ç¯å¢ƒä¸­çš„æœºå™¨äººå®šä½ç²¾åº¦ã€‚
    

è¿™äº›èŠ‚ç‚¹æ˜¯robot\_localizationåŠŸèƒ½åŒ…ä¸­çš„æ ¸å¿ƒç»„ä»¶ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥èåˆä»»æ„æ•°é‡çš„ä¼ æ„Ÿå™¨ï¼ˆæƒ¯æ€§æµ‹é‡å•å…ƒï¼ˆIMUï¼‰ï¼Œé‡Œç¨‹è®¡ï¼Œå®¤å†…å®šä½ç³»ç»Ÿï¼Œå…¨çƒå®šä½ç³»ç»Ÿæ¥æ”¶å™¨ç­‰ï¼‰ï¼Œå®ƒä»¬æ”¯æŒ nav\_msgs/msg/Odometryï¼ˆä½ç½®ã€æ–¹å‘å’Œçº¿æ€§ã€è§’é€Ÿåº¦ï¼‰ã€geometry\_msgs/msg/PoseWithCovarianceStampedï¼ˆä½ç½®å’Œæ–¹å‘ï¼‰ã€geometry\_msgs/msg/TwistWithCovarianceStampedï¼ˆçº¿æ€§å’Œè§’é€Ÿåº¦ï¼‰å’Œsensor\_msgs/msg/Imuï¼ˆæ–¹å‘ã€è§’é€Ÿåº¦å’Œçº¿æ€§åŠ é€Ÿåº¦ï¼‰æ¶ˆæ¯ï¼Œä»¥è·Ÿè¸ªæœºå™¨äººçš„15ç»´ï¼ˆxã€yã€zã€æ»šåŠ¨ã€ä¿¯ä»°ã€åèˆªã€xË™ã€yË™ã€zË™ã€æ»šåŠ¨Ë™ã€ä¿¯ä»°Ë™ã€åèˆªË™ã€xÂ¨ã€yÂ¨ã€zÂ¨ï¼‰çŠ¶æ€ã€‚

åŸºäºè¿™äº›æµ‹é‡æ•°æ®ï¼ŒçŠ¶æ€ä¼°è®¡èŠ‚ç‚¹å°†è¿‡æ»¤åçš„ä½ç½®ã€æ–¹å‘å’Œçº¿æ€§ã€è§’é€Ÿåº¦ï¼ˆnav\_msgs/Odometryï¼‰å‘å¸ƒåˆ° /odometry/filtered è¯é¢˜ä¸Šï¼Œå¹¶åœ¨å¯ç”¨æ—¶å°†è¿‡æ»¤åçš„åŠ é€Ÿåº¦å‘å¸ƒåˆ° /accel/filtered è¯é¢˜ä¸Šã€‚

æ­¤å¤–ï¼Œå®ƒä»¬å¯ä»¥ï¼ˆé»˜è®¤å¯ç”¨ï¼‰å°†ç›¸åº”çš„å˜æ¢ä½œä¸º tf2 å˜æ¢è¿›è¡Œå‘å¸ƒï¼Œæ— è®ºæ˜¯ odom â†’ base\_link å˜æ¢è¿˜æ˜¯ map â†’ odom å˜æ¢ã€‚

**3.robot\_localizationä½¿ç”¨ç¤ºä¾‹**

å‡è®¾è¦èåˆè½®å¼é‡Œç¨‹è®¡ä¸IMUï¼Œé‚£ä¹ˆè¯·å…ˆä¿è¯æœºå™¨äººåº•ç›˜å¯ä»¥å‘å¸ƒé‡Œç¨‹è®¡æ¶ˆæ¯ä»¥åŠIMUæ¶ˆæ¯ã€‚åœ¨MyCarå¯¼èˆªæœºå™¨äººä¸­ï¼ŒStm32åº•ç›˜æ˜¯æ»¡è¶³æ¡ä»¶çš„ï¼Œä½†æ˜¯Arduinoåº•ç›˜ä¸åŒ…å«IMUä¼ æ„Ÿå™¨ï¼Œéœ€è¦è‡ªè¡Œå®‰è£…ã€‚èåˆæ—¶ï¼Œå¯ä»¥ä½¿ç”¨`ekf_node`æˆ–`ukf_node`èŠ‚ç‚¹ã€‚æœ¬æ¡ˆä¾‹ä¸­ä½¿ç”¨çš„æ˜¯stm32 4wåº•ç›˜ç»“åˆ`ekf_node`å®ç°ã€‚å…¶å¤§è‡´æ­¥éª¤å¦‚ä¸‹ï¼š

1.  ç¼–å†™luanchæ–‡ä»¶ï¼›
    
2.  ç¼–å†™é…ç½®æ–‡ä»¶ï¼›
    
3.  ç¼–è¯‘ï¼›
    
4.  æ‰§è¡Œå¹¶æŸ¥çœ‹ç»“æœã€‚
    

ç”±äºrobot\_localizationå¯¹èåˆå®ç°å·²ç»åšäº†å¾ˆå¥½çš„å°è£…ï¼Œæ‰€ä»¥æ•´ä¸ªå®ç°æµç¨‹æ˜¯æ¯”è¾ƒç®€å•çš„ã€‚

**ï¼ˆ1ï¼‰ç¼–å†™launchæ–‡ä»¶**

åœ¨ros2\_stm32\_bridgeåŠŸèƒ½åŒ…çš„launchç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶driver\_ekf.launch.pyï¼Œå¹¶è¾“å…¥ä»¥ä¸‹å†…å®¹ï¼š

```Python
from launch import LaunchDescription
from ament_index_python.packages import get_package_share_directory
import launch_ros.actions
import os

def generate_launch_description():
    MYCAR_MODEL = os.environ['MYCAR_MODEL']return LaunchDescription([
        launch_ros.actions.Node(
            package='robot_localization',
            executable='ekf_node',
            name='ekf_filter_node',
            output='screen',
            parameters=[os.path.join(get_package_share_directory("ros2_stm32_bridge"), 'params', 'ekf.yaml')],
           ),
        launch_ros.actions.Node(
            package='tf2_ros',
            executable='static_transform_publisher',
            arguments=['--frame-id', 'base_footprint', '--child-frame-id', 'imu_link', '--x', '-0.15']
        ),
        launch_ros.actions.Node(
            package="ros2_stm32_bridge",
            executable="base_controller",
            parameters=[
                os.path.join(get_package_share_directory("ros2_stm32_bridge"), "params", MYCAR_MODEL + "_ekf.yaml"),],
        )
    ])
```

è¯¥launchæ–‡ä»¶ä¸­ï¼Œå¯åŠ¨äº†æœºå™¨äººåº•ç›˜é©±åŠ¨ï¼Œå¯åŠ¨äº†robot\_localizationåŒ…ä¸­`ekf_node`èŠ‚ç‚¹ï¼Œå¹¶ä¸”è¿˜å‘å¸ƒäº†base\_footprintä¸imu\_linkçš„åæ ‡å˜æ¢ã€‚

**ï¼ˆ2ï¼‰ç¼–å†™é…ç½®æ–‡ä»¶**

*   åœ¨ros2\_stm32\_bridgeåŠŸèƒ½åŒ…çš„paramsç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶stm32\_4w\_ekf.yamlï¼Œå¹¶è¾“å…¥ä»¥ä¸‹å†…å®¹ï¼š
    

```Plain Text
/mini_driver:
# /**:  ros__parameters:    base_frame: base_footprint
    baud_rate: 115200    control_rate: 10    encoder_resolution: 44.0    kd: 130    ki: 0    kp: 100    maximum_encoding: 100.0    model_param_acw: 0.45    model_param_cw: 0.45    odom_frame: odom
    port_name: /dev/mycar
    publish_tf: false    qos_overrides:
      /parameter_events:
        publisher:          depth: 1000          durability: volatile
          history: keep_last
          reliability: reliable
      /tf:
        publisher:          depth: 100          durability: volatile
          history: keep_last
          reliability: reliable
    reduction_ratio: 90.0    use_sim_time: false    wheel_diameter: 0.080
```

åœ¨è¯¥æ–‡ä»¶ä¸­ï¼Œä¸€ä¸ªé‡è¦æ“ä½œæ˜¯å°†publish\_tfå‚æ•°è®¾ç½®ä¸ºfalseï¼Œè®¾ç½®ä¸ºfalseåï¼Œåº•ç›˜é©±åŠ¨ä¸å†å‘å¸ƒbase\_footprintä¸odomçš„åæ ‡å˜æ¢ï¼Œè€Œæ˜¯ç”±`ekf_node`å–è€Œä»£ä¹‹ã€‚

*   åœ¨ros2\_stm32\_bridgeåŠŸèƒ½åŒ…çš„paramsç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶ekf.yamlï¼Œå¹¶è¾“å…¥ä»¥ä¸‹å†…å®¹ï¼š
    

```YAML
### ekf config file ###
ekf_filter_node:
    ros__parameters:
# The frequency, in Hz, at which the filter will output a position estimate. Note that the filter will not begin
# computation until it receives at least one message from one of the inputs. It will then run continuously at the
# frequency specified here, regardless of whether it receives more measurements. Defaults to 30 if unspecified.
        frequency: 30.0

# The period, in seconds, after which we consider a sensor to have timed out. In this event, we carry out a predict
# cycle on the EKF without correcting it. This parameter can be thought of as the minimum frequency with which the
# filter will generate new output. Defaults to 1 / frequency if not specified.
        sensor_timeout: 0.1

# ekf_localization_node and ukf_localization_node both use a 3D omnidirectional motion model. If this parameter is
# set to true, no 3D information will be used in your state estimate. Use this if you are operating in a planar
# environment and want to ignore the effect of small variations in the ground plane that might otherwise be detected
# by, for example, an IMU. Defaults to false if unspecified.
        two_d_mode: false

# Use this parameter to provide an offset to the transform generated by ekf_localization_node. This can be used for
# future dating the transform, which is required for interaction with some other packages. Defaults to 0.0 if
# unspecified.
        transform_time_offset: 0.0

# Use this parameter to provide specify how long the tf listener should wait for a transform to become available. 
# Defaults to 0.0 if unspecified.
        transform_timeout: 0.0

# If you're having trouble, try setting this to true, and then echo the /diagnostics_agg topic to see if the node is
# unhappy with any settings or data.
        print_diagnostics: true

# Debug settings. Not for the faint of heart. Outputs a ludicrous amount of information to the file specified by
# debug_out_file. I hope you like matrices! Please note that setting this to true will have strongly deleterious
# effects on the performance of the node. Defaults to false if unspecified.
        debug: false

# Defaults to "robot_localization_debug.txt" if unspecified. Please specify the full path.
        debug_out_file: /path/to/debug/file.txt

# Whether we'll allow old measurements to cause a re-publication of the updated state
        permit_corrected_publication: false

# Whether to publish the acceleration state. Defaults to false if unspecified.
        publish_acceleration: false

# Whether to broadcast the transformation over the /tf topic. Defaults to true if unspecified.
        publish_tf: true

# REP-105 (http://www.ros.org/reps/rep-0105.html) specifies four principal coordinate frames: base_link, odom, map, and
# earth. base_link is the coordinate frame that is affixed to the robot. Both odom and map are world-fixed frames.
# The robot's position in the odom frame will drift over time, but is accurate in the short term and should be
# continuous. The odom frame is therefore the best frame for executing local motion plans. The map frame, like the odom
# frame, is a world-fixed coordinate frame, and while it contains the most globally accurate position estimate for your
# robot, it is subject to discrete jumps, e.g., due to the fusion of GPS data or a correction from a map-based
# localization node. The earth frame is used to relate multiple map frames by giving them a common reference frame.
# ekf_localization_node and ukf_localization_node are not concerned with the earth frame.
# Here is how to use the following settings:
# 1. Set the map_frame, odom_frame, and base_link frames to the appropriate frame names for your system.
#     1a. If your system does not have a map_frame, just remove it, and make sure "world_frame" is set to the value of
#         odom_frame.
# 2. If you are fusing continuous position data such as wheel encoder odometry, visual odometry, or IMU data, set
#   "world_frame" to your odom_frame value. This is the default behavior for robot_localization's state estimation nodes.
# 3. If you are fusing global absolute position data that is subject to discrete jumps (e.g., GPS or position updates
# from landmark observations) then:
#     3a. Set your "world_frame" to your map_frame value
#     3b. MAKE SURE something else is generating the odom->base_link transform. Note that this can even be another state
#         estimation node from robot_localization! However, that instance should *not* fuse the global data.
        map_frame: map              # Defaults to "map" if unspecified
        odom_frame: odom            # Defaults to "odom" if unspecified
        base_link_frame: base_footprint  # Defaults to "base_link" if unspecified
        world_frame: odom           # Defaults to the value of odom_frame if unspecified

# The filter accepts an arbitrary number of inputs from each input message type (nav_msgs/Odometry,
# geometry_msgs/PoseWithCovarianceStamped, geometry_msgs/TwistWithCovarianceStamped,
# sensor_msgs/Imu). To add an input, simply append the next number in the sequence to its "base" name, e.g., odom0,
# odom1, twist0, twist1, imu0, imu1, imu2, etc. The value should be the topic name. These parameters obviously have no
# default values, and must be specified.
        odom0: odom

# Each sensor reading updates some or all of the filter's state. These options give you greater control over which
# values from each measurement are fed to the filter. For example, if you have an odometry message as input, but only
# want to use its Z position value, then set the entire vector to false, except for the third entry. The order of the
# values is x, y, z, roll, pitch, yaw, vx, vy, vz, vroll, vpitch, vyaw, ax, ay, az. Note that not some message types
# do not provide some of the state variables estimated by the filter. For example, a TwistWithCovarianceStamped message
# has no pose information, so the first six values would be meaningless in that case. Each vector defaults to all false
# if unspecified, effectively making this parameter required for each sensor.
        odom0_config: [false,  false,  false,
                       false, false, false,
                       true, false, false,
                       false, false, false,
                       false, false, false]

# If you have high-frequency data or are running with a low frequency parameter value, then you may want to increase
# the size of the subscription queue so that more measurements are fused.
        odom0_queue_size: 2

# [ADVANCED] Large messages in ROS can exhibit strange behavior when they arrive at a high frequency. This is a result
# of Nagle's algorithm. This option tells the ROS subscriber to use the tcpNoDelay option, which disables Nagle's
# algorithm.
        odom0_nodelay: false

# [ADVANCED] When measuring one pose variable with two sensors, a situation can arise in which both sensors under-
# report their covariances. This can lead to the filter rapidly jumping back and forth between each measurement as they
# arrive. In these cases, it often makes sense to (a) correct the measurement covariances, or (b) if velocity is also
# measured by one of the sensors, let one sensor measure pose, and the other velocity. However, doing (a) or (b) isn't
# always feasible, and so we expose the differential parameter. When differential mode is enabled, all absolute pose
# data is converted to velocity data by differentiating the absolute pose measurements. These velocities are then
# integrated as usual. NOTE: this only applies to sensors that provide pose measurements; setting differential to true
# for twist measurements has no effect.
        odom0_differential: false

# [ADVANCED] When the node starts, if this parameter is true, then the first measurement is treated as a "zero point"
# for all future measurements. While you can achieve the same effect with the differential paremeter, the key
# difference is that the relative parameter doesn't cause the measurement to be converted to a velocity before
# integrating it. If you simply want your measurements to start at 0 for a given sensor, set this to true.
        odom0_relative: false

# [ADVANCED] If your data is subject to outliers, use these threshold settings, expressed as Mahalanobis distances, to
# control how far away from the current vehicle state a sensor measurement is permitted to be. Each defaults to
# numeric_limits<double>::max() if unspecified. It is strongly recommended that these parameters be removed if not
# required. Data is specified at the level of pose and twist variables, rather than for each variable in isolation.
# For messages that have both pose and twist data, the parameter specifies to which part of the message we are applying
# the thresholds.
        odom0_pose_rejection_threshold: 5.0
        odom0_twist_rejection_threshold: 1.0


        imu0: imu
        imu0_config: [false, false, false,
                      false, false,  true,
                      false, false, false,
                      false, false,  true,
                      false, false,  false]
        imu0_nodelay: false
        imu0_differential: false
        imu0_relative: true
        imu0_queue_size: 5
        imu0_pose_rejection_threshold: 0.8                 # Note the difference in parameter names
        imu0_twist_rejection_threshold: 0.8                #
        imu0_linear_acceleration_rejection_threshold: 0.8  #

# [ADVANCED] Some IMUs automatically remove acceleration due to gravity, and others don't. If yours doesn't, please set
# this to true, and *make sure* your data conforms to REP-103, specifically, that the data is in ENU frame.
        imu0_remove_gravitational_acceleration: true

# [ADVANCED]  The EKF and UKF models follow a standard predict/correct cycle. During prediction, if there is no
# acceleration reference, the velocity at time t+1 is simply predicted to be the same as the velocity at time t. During
# correction, this predicted value is fused with the measured value to produce the new velocity estimate. This can be
# problematic, as the final velocity will effectively be a weighted average of the old velocity and the new one. When
# this velocity is the integrated into a new pose, the result can be sluggish covergence. This effect is especially
# noticeable with LIDAR data during rotations. To get around it, users can try inflating the process_noise_covariance
# for the velocity variable in question, or decrease the  variance of the variable in question in the measurement
# itself. In addition, users can also take advantage of the control command being issued to the robot at the time we
# make the prediction. If control is used, it will get converted into an acceleration term, which will be used during
# predicition. Note that if an acceleration measurement for the variable in question is available from one of the
# inputs, the control term will be ignored.
# Whether or not we use the control input during predicition. Defaults to false.
        use_control: true
# Whether the input (assumed to be cmd_vel) is a geometry_msgs/Twist or geometry_msgs/TwistStamped message. Defaults to
# false.
        stamped_control: false
# The last issued control command will be used in prediction for this period. Defaults to 0.2.
        control_timeout: 0.2
# Which velocities are being controlled. Order is vx, vy, vz, vroll, vpitch, vyaw.
        control_config: [true, false, false, false, false, true]
# Places limits on how large the acceleration term will be. Should match your robot's kinematics.
        acceleration_limits: [1.3, 0.0, 0.0, 0.0, 0.0, 3.4]
# Acceleration and deceleration limits are not always the same for robots.
        deceleration_limits: [1.3, 0.0, 0.0, 0.0, 0.0, 4.5]
# If your robot cannot instantaneously reach its acceleration limit, the permitted change can be controlled with these
# gains
        acceleration_gains: [0.8, 0.0, 0.0, 0.0, 0.0, 0.9]
# If your robot cannot instantaneously reach its deceleration limit, the permitted change can be controlled with these
# gains
        deceleration_gains: [1.0, 0.0, 0.0, 0.0, 0.0, 1.0]
# [ADVANCED] The process noise covariance matrix can be difficult to tune, and can vary for each application, so it is
# exposed as a configuration parameter. This matrix represents the noise we add to the total error after each
# prediction step. The better the omnidirectional motion model matches your system, the smaller these values can be.
# However, if users find that a given variable is slow to converge, one approach is to increase the
# process_noise_covariance diagonal value for the variable in question, which will cause the filter's predicted error
# to be larger, which will cause the filter to trust the incoming measurement more during correction. The values are
# ordered as x, y, z, roll, pitch, yaw, vx, vy, vz, vroll, vpitch, vyaw, ax, ay, az. Defaults to the matrix below if
# unspecified.
        process_noise_covariance: [0.05, 0.0,    0.0,    0.0,    0.0,    0.0,    0.0,     0.0,     0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,
                                   0.0,    0.05, 0.0,    0.0,    0.0,    0.0,    0.0,     0.0,     0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,
                                   0.0,    0.0,    0.06, 0.0,    0.0,    0.0,    0.0,     0.0,     0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,
                                   0.0,    0.0,    0.0,    0.03, 0.0,    0.0,    0.0,     0.0,     0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,
                                   0.0,    0.0,    0.0,    0.0,    0.03, 0.0,    0.0,     0.0,     0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,
                                   0.0,    0.0,    0.0,    0.0,    0.0,    0.06, 0.0,     0.0,     0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,
                                   0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.025, 0.0,     0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,
                                   0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,     0.025, 0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,
                                   0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,     0.0,     0.04, 0.0,    0.0,    0.0,    0.0,    0.0,    0.0,
                                   0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,     0.0,     0.0,    0.01, 0.0,    0.0,    0.0,    0.0,    0.0,
                                   0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,     0.0,     0.0,    0.0,    0.01, 0.0,    0.0,    0.0,    0.0,
                                   0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,     0.0,     0.0,    0.0,    0.0,    0.02, 0.0,    0.0,    0.0,
                                   0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,     0.0,     0.0,    0.0,    0.0,    0.0,    0.01, 0.0,    0.0,
                                   0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,     0.0,     0.0,    0.0,    0.0,    0.0,    0.0,    0.01, 0.0,
                                   0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,     0.0,     0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.015]
# [ADVANCED] This represents the initial value for the state estimate error covariance matrix. Setting a diagonal
# value (variance) to a large value will result in rapid convergence for initial measurements of the variable in
# question. Users should take care not to use large values for variables that will not be measured directly. The values
# are ordered as x, y, z, roll, pitch, yaw, vx, vy, vz, vroll, vpitch, vyaw, ax, ay, az. Defaults to the matrix below
#if unspecified.
        initial_estimate_covariance: [1e-9, 0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,     0.0,     0.0,     0.0,    0.0,    0.0,
                                      0.0,    1e-9, 0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,     0.0,     0.0,     0.0,    0.0,    0.0,
                                      0.0,    0.0,    1e-9, 0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,     0.0,     0.0,     0.0,    0.0,    0.0,
                                      0.0,    0.0,    0.0,    1e-9, 0.0,    0.0,    0.0,    0.0,    0.0,    0.0,     0.0,     0.0,     0.0,    0.0,    0.0,
                                      0.0,    0.0,    0.0,    0.0,    1e-9, 0.0,    0.0,    0.0,    0.0,    0.0,     0.0,     0.0,     0.0,    0.0,    0.0,
                                      0.0,    0.0,    0.0,    0.0,    0.0,    1e-9, 0.0,    0.0,    0.0,    0.0,     0.0,     0.0,     0.0,    0.0,    0.0,
                                      0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    1e-9, 0.0,    0.0,    0.0,     0.0,     0.0,     0.0,    0.0,    0.0,
                                      0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    1e-9, 0.0,    0.0,     0.0,     0.0,     0.0,    0.0,    0.0,
                                      0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    1e-9, 0.0,     0.0,     0.0,     0.0,    0.0,    0.0,
                                      0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    1e-9,  0.0,     0.0,     0.0,    0.0,    0.0,
                                      0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,     1e-9,  0.0,     0.0,    0.0,    0.0,
                                      0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,     0.0,     1e-9,  0.0,    0.0,    0.0,
                                      0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,     0.0,     0.0,     1e-9, 0.0,    0.0,
                                      0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,     0.0,     0.0,     0.0,    1e-9, 0.0,
                                      0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    0.0,     0.0,     0.0,     0.0,    0.0,    1e-9]
```

åœ¨è¯¥æ–‡ä»¶ä¸­ï¼Œå…³é”®é…ç½®å¦‚ä¸‹ï¼š

```YAML
#......
        odom0_config: [false,  false,  false,
                       false, false, false,
                       true, false, false,
                       false, false, false,
                       false, false, false]
#......
        imu0_config: [false, false, false,
                      false, false,  true,
                      false, false, false,
                      false, false,  true,
                      false, false,  false]
```

ä¸Šè¿°é…ç½®ä¸»è¦æ˜¯èåˆäº†é‡Œç¨‹è®¡æ¶ˆæ¯ä¸­çš„xæ–¹å‘é€Ÿåº¦ä¸imuæ¶ˆæ¯ä¸­çš„yawè§’åº¦ç”Ÿæˆæ–°çš„é‡Œç¨‹è®¡æ•°æ®ã€‚

**ï¼ˆ3ï¼‰ç¼–è¯‘**

ç»ˆç«¯ä¸­è¿›å…¥å½“å‰å·¥ä½œç©ºé—´ï¼Œç¼–è¯‘åŠŸèƒ½åŒ…ï¼š

```Bash
colcon build --packages-select ros2_stm32_bridge
```

**ï¼ˆ4ï¼‰æ‰§è¡Œ**

ç»ˆç«¯ä¸­è¿›å…¥å½“å‰å·¥ä½œç©ºé—´ï¼Œæ‰§è¡Œlaunchæ–‡ä»¶ï¼š

```Bash
. install/setup.bash
ros2 launch ros2_stm32_bridge driver_ekf.launch.py
```

å†å¯åŠ¨rviz2ä»¥åŠé”®ç›˜æ§åˆ¶èŠ‚ç‚¹ï¼Œåœ¨rviz2ä¸­å°†å‚è€ƒåæ ‡ç³»è®¾ç½®ä¸ºodomï¼Œæ·»åŠ tfæ’ä»¶ï¼Œå†æ·»åŠ ä¸¤ä¸ªodometryæ’ä»¶å¹¶å°†è¯é¢˜åˆ†åˆ«è®¾ç½®ä¸ºodomå’Œodometry/filteredã€‚ä½¿ç”¨é”®ç›˜æ§åˆ¶æœºå™¨äººå‰è¿›ï¼Œä¸¤ä¸ªé‡Œç¨‹è®¡æ’ä»¶æ˜¾ç¤ºçš„æ•°æ®å’Œæœºå™¨äººçš„å®é™…è¿è¡ŒåŸºæœ¬ç›¸ç¬¦ï¼Œå‰è¿›ä¸€æ®µæ—¶é—´åï¼Œæ‰‹åŠ¨æ¬åŠ¨æœºå™¨äººè®©å…¶äº§ç”Ÿä¸€å®šè§’åº¦çš„åèˆªï¼Œè¯¥åŠ¨ä½œä¹Ÿèƒ½åœ¨èåˆåçš„é‡Œç¨‹è®¡ä»¥åŠåæ ‡å˜æ¢ä¸­å‡†ç¡®æ˜¾ç¤ºï¼Œè€Œè½®å¼é‡Œç¨‹è®¡ç”±äºç”µæœºå¹¶æœªæ—‹è½¬è€Œæ²¡æœ‰æ”¹å˜ï¼ˆå¦‚ä¸‹å›¾æ‰€ç¤ºï¼‰ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWNmYzc5NzlmNTdkNjkwNDBhN2RlYmRhNTQ4NGJmOTlfbFdsMXVsMUZiM1FXbWpSY1UyTVhYUWFQY2xyOFlySEdfVG9rZW46VlFXcmJxaUc2b2VXbjh4R095Y2M5dkYybmJlXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

  

2.  ### æ¿€å…‰é›·è¾¾å·¥å…·
    

  

  

3.  ### ç›¸æœºä½¿ç”¨è¿›é˜¶
    

  

  

15.  # æœºå™¨äººå¯¼èˆªNavigation2(å®ä½“ç¯‡)
    

1.  ## å‡†å¤‡å·¥ä½œ
    

1.  å®ç‰©
    
2.  å·²ç»è·‘è¿‡ä¸€éæœºå™¨äººå¯¼èˆªNavigation2(ä»¿çœŸç¯‡)
    
3.  æœ¬ç« åªè®²å¤§ä½“æ€è·¯å®ç°ï¼Œä¸€èˆ¬åªè¦ä½ ä»¿çœŸç¯‡ææ˜ç™½äº†ï¼Œå®ä½“ç¯‡çœ‹çœ‹å¤§ä½“æ€è·¯å°±æ‡‚æ€ä¹ˆå®ç°äº†ã€‚
    
4.  æœ¬ç« éèµµè™šå·¦æ•™ç¨‹ï¼Œæ˜¯è‡ªå·±çš„å®ç°æ€è·¯ï¼Œä»…ä¾›å‚è€ƒï¼Œå¯èƒ½èµµè€å¸ˆæœ‰æ›´å¥½çš„åŠæ³•ï¼Œä¸è¿‡ä»–è¿˜æ²¡å‡ºå®ä½“ç¯‡æ•™ç¨‹ã€‚
    
5.  æœ¬ç« ç”¨çš„æ˜¯4è½®éº¦å…‹çº³å§†è½®å®ç°çš„ï¼Œä»…ä¾›å‚è€ƒã€‚
    

ä»¥ä¸‹ä»£ç éƒ½åœ¨ä¸‹æ–¹è¿™ä¸ªgithubä»“åº“é‡Œï¼š

https://github.com/CyberNaviRobot/CyberRobot\_ROS2\_WS

*ä¸‹æ–¹çš„æ•™ç¨‹åªæœ‰å®ç°æ€è·¯ï¼Œä¸ä¼šæ”¾æºç ï¼Œæ‰€ä»¥å»ºè®®å…‹éš†ä¸€ä¸‹è¿™ä¸ªä»“åº“ï¼Œçœ‹çœ‹æºç ã€‚*

  

2.  ## å¯¼èˆªå‚æ•°å‚è€ƒ
    

https://docs.nav2.org/configuration/index.html

  

3.  ## SLAM å®šä½ä¸å»ºå›¾
    

1.  ### slam\_toolbox
    

æ ¹æ®ä¸Šæ–¹çš„èŠ‚ç‚¹è¯´æ˜ï¼Œæˆ‘ä»¬è¦è®¢é˜…/scanå’Œ/tfã€‚

ä¸€èˆ¬æ¿€å…‰é›·è¾¾çš„è¯´æ˜ä¹¦éƒ½ä¼šæä¾›æºç å»å‘å¸ƒ/scan,æ‰€ä»¥è¿™ä¸ªè¯·çœ‹ä½ ç¡¬ä»¶çš„è¯´æ˜ä¹¦ã€‚

/tfåˆ™éœ€è¦æˆ‘ä»¬å‘å¸ƒodom\_frameåˆ°base\_frameçš„è½¬æ¢ï¼Œæˆ‘ä»¬å¿…é¡»ä½¿ç”¨C++ä»£ç å»åŠ¨æ€å‘å¸ƒodomçš„åæ ‡å˜æ¢ã€‚

ä½†æ˜¯è¿™é‡Œä½ éœ€è¦å‘å¸ƒ/odom,ä»¥ä¾¿äºçŸ¥é“æœºå™¨äººçš„ä½ç½®å’Œå§¿æ€ï¼Œè¿™æ ·æ‰èƒ½å¤Ÿå¤Ÿæ¨ç®—å‡ºæœºå™¨äººåœ¨mapä¸­çš„ä½ç½®ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Njc2NDc4NzczYzBhNGJjNjk3MDI2ZTQwOGI5MDlhZTlfZUt3SzdGZW43TExGYmZLS08xcVVOaU1DZ0k3d3ZxN0FfVG9rZW46RHNqQWJ0d0Rob3c0b2F4N0w0YmNTSTJhbkFkXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

ç¡®ä¿slam toolboxå„é¡¹å‚æ•°æ²¡æœ‰è®¾ç½®é”™ï¼Œç‰¹åˆ«æ˜¯åæ ‡ç³»ç­‰ç­‰ï¼Œå…¶ä»–å‚æ•°å¯ä»¥çœ‹ç€è¯´æ˜å¾®è°ƒã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTZiZGJjYTY3ZDg1YWRkYmFmNWZlZDM0MjA3ZWQzMWVfTWZ1ZUNzTHY4RGdXZEFtYnB5b2FMWTlGeHNXYzB6c2hfVG9rZW46S05Id2Jrc3Zob0dzOER4RUhjeGNXTzloblllXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

ç¡®ä¿æ¿€å…‰é›·è¾¾å‘å¸ƒçš„è¯é¢˜æ˜¯/scanã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWRhYWNmMjcyOGFlMDI3NzhkYTEyMThiZWQ4YjE2NmZfSjRzV3pXQjdjZ2FwdUpEbWlncTlIQk9KSlUycWhnVGFfVG9rZW46SVVzVWJtOU1yb1ZDUFN4Y1NnQ2NPOThPbjlmXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

  

å…ˆå¯åŠ¨æ¿€å…‰é›·è¾¾

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTc2Y2Q0Njg0NWJjYjhhZWVjYTE4ZDE1YzEzMGNhNjhfelpZVzB3YVhiTk9mRUs1Q3RtbDJheU0xeHpjOEZmWXJfVG9rZW46Q01mMmJVY2t2b3VXQmV4ajBYaWNHMEhlbjZKXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

å†å¯åŠ¨urdfæ¨¡å‹ï¼ŒåŒæ—¶å‘å¸ƒtfã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NmI0OTY2Y2U2YmQ5MGFmY2QzN2ViM2E2NzVlNmFjMGZfajR1cE1Nc1ZORkY5amRyUHBFekpjWjlwampwZDFFRGhfVG9rZW46WDBpQWJhaW11b1FtTmR4RkpIZmNkbDhSbnBnXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

æœ€åå¼€å¯slam

```Bash
ros2 launch mycar_slam_slam_toolbox online_sync_launch.py use_sim_time:=false
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGU4OGQwY2M0OWZlNmIzOTZhOWI1YzI4MjQ3YWU0ODhfOGtiVFVqSzhDeXVRS1hoS3hYQUNNa1lYODdoM3JiQXBfVG9rZW46WjU4RWJQa3A0b2IzN2t4anl3ZGNPVTJabk1kXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGNhMWJkM2Y2YjdmNmIzYmQyMWFiMWJjZWEzOTgwODFfZlpIUDR1SGthYUJqc1RZWWE5YmJFMTJCaTNVbjJFN1JfVG9rZW46Q1pVMmJrYzdjb3B4eDh4RHVBaWNTWmhDbmU5XzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODM5MmQ3ZjcxOWIxZDM0MjUyMmFjNzk1YTE4MThmNzBfUDlvS3hMWXQxRm51SnYzWFJmTUNzQ3BkR3I0aUV5dmpfVG9rZW46UlprQWJuODI2b1hFbWt4RWh5U2NGa1AwbnljXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

  

2.  ### cartographer
    

æ ¹æ®cartographerè¯´æ˜ï¼Œæˆ‘ä»¬éœ€è¦/scanå’Œ/odomå³å¯ã€‚

å…ˆæ‰“å¼€ä¸²å£æ¥æ”¶èŠ‚ç‚¹ï¼Œæ¥æ”¶stm32ä¼ è¿‡æ¥çš„æ•°æ®ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTg0ZGMxNGNhNmNiM2QyYzVkYzIxN2ZlYmMwMGFlZTVfYWNRZk9VUHFvOXlqcVV4cmNvWnRnSjZNaEdNMmg2M3NfVG9rZW46QTAzZGJGenMzb0ZzYWF4eDJHeWNia1RRbnhiXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

ç„¶åå†æ‰“å¼€é‡Œç¨‹è®¡èŠ‚ç‚¹ï¼Œå‘å¸ƒodomè¯é¢˜

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YWYxYTlkYmNlMjA5NmMxZjg5NDhhZGMxZDAxMTI2MjZfSGFVWG9HQ3hSSnVNbHNFYlQ2SjIxOHMxZTc2d3ZnMWlfVG9rZW46Q29icmJzTFZGb3lNMmN4VWpobmNid2w5blNRXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGNiYTM0MWM2YTQ2NTg1MTUzYTBmYWNjZjAwNzA1YWJfZnVyaExZWGhrRjZPcEp2NkEzQUhHcE5xQWdjVkxVQVFfVG9rZW46RFZtWGJzWXFkb0lXbTZ4Q3phWGNmQWp2bmhjXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

å†å‘å¸ƒä¸€ä¸‹TFï¼Œå¯ä»¥ç›´æ¥ç”¨launchå¼€å¯robot\_state\_publisherå’Œjoint\_state\_publisher,å¹¶æ‰“å¼€urdfæ¨¡å‹æ¥å‘å¸ƒTFã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTJmMzdjODJjMDBkN2NlM2ZhNmIzMmJjMTFlMzM4ZDFfM0FkRkVtNDRReU9aNk4zclp5WWdENllCZGZzNFhpODNfVG9rZW46SmhkMGJHamtJbzQ4aHB4QVdOb2N6c0F2bmJjXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

æ‰“å¼€æ¿€å…‰é›·è¾¾çš„èŠ‚ç‚¹ï¼Œå‘å¸ƒscanè¯é¢˜

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDFlMDIwNjc3MjkwMjczODc4ZjdlMjMzZjBmMzc5NzVfNmRhTkRTN01IM0ltNGZPU2o1cmlMY3RURWFKOWdGRVFfVG9rZW46WjFwRGJmZXJtb2pYUTd4SkRORGNpZk4ybk1oXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

ç­‰/odom,/scanå’ŒTFå…¨å‘äº†ä¹‹åï¼Œå†æ‰“å¼€cartographerå»ºå›¾ï¼Œç„¶åå¯ä»¥æ£€æŸ¥mapçš„TFæ˜¯å¦å‘å¸ƒã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmEwZTQ0MjRhN2MzYzcxMWIzMjhhNjEzMDQ1Y2RkMjlfMlB2WWhzQ1RFUnROTW5Mcm5QRkpNNzVacFp4VEh6bEZfVG9rZW46Wm5jaWJJMlRYb0hoSGF4emRrNmNKdTMwbktlXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

æ£€æŸ¥TFæ ‘å¦‚ä¸‹ï¼š

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmJlZjNiNGRlNzM1N2EzNTcxYTg0Mjc0NDBkMzU4ZGJfZHNMT3RwQktPYlc4ZkpCOG1Yc2lJS3dxeEZVd3dRb0tfVG9rZW46RUJyYmJMclU0b2tsZXp4enAzdWNBb0tzbjhjXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

å»ºå›¾å¦‚ä¸‹

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGEyODg1ZjUwYWMyZjhjNTNiNDU1NmYzYmU4YWZhZjlfVkdqQlg4UlRtZXppWm5qOUNUbTVpVVRSTDFjOHpaRzRfVG9rZW46VWduZGIxdEdDb2lMb2J4WU9IdmN6Zm9tbktjXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTdhNzhlMzA3ZTRjN2UyZGY3YTQ3NTlhNjI3MTU5NjVfR1NKTXBWMzZCWGFmNE56NkREV1NIRXFPSVk4a24ydWFfVG9rZW46Tk5RTmJ1Sjdub0dXQlp4MVBqWGNRcDI2blpmXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

  

4.  ## åœ°å›¾æœåŠ¡
    

1.  ### ä¿å­˜åœ°å›¾(åºåˆ—åŒ–)
    

```Bash
mkdir ./map
ros2 run nav2_map_server map_saver_cli -f map/my_map
```

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDQzZDU2YTM0NjNkM2U5NTgzNTU3MTVmZTNmMzU2MmZfUDdmVDdCUnVZZ1p6Z3JuZVloeGlLVjdETTBYb0dKZndfVG9rZW46SkZMUmJUN3pUb1o1bmh4VGZENGNvd285bmloXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTNiMmYzYzZiZTllZDVjN2YwYzA3MmIzZmEzM2Q5NGVfSlhsMElJdDNsSXBZRDQyZUVPUGlIOGF5YkRKYmNTSzJfVG9rZW46Q2VyMGI1OE1Zb0plY1d4cXJDOGNkNG5NbjJmXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

  

2.  ### è¯»å–åœ°å›¾(ååºåˆ—åŒ–)
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2FkYTU2Mzc3OGIxY2RlYTIyYWY3ZTNhZGZjM2VjM2ZfOHo2MHg4TWJsVHdYczJ6UVFwWHIwaUZacnJzN0kya1VfVG9rZW46V2VhVWJ5WDM0b3ZleFV4azFlUWNWcnc5bkFiXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

```Bash
ros2 launch mycar_map_server map_server.launch.py
```

5.  ## AMCLè‡ªé€‚åº”è’™ç‰¹å¡æ´›å®šä½
    

é¦–å…ˆéœ€è¦åœ°å›¾çš„æ•°æ®ï¼Œå‘å¸ƒ/mapè¯é¢˜ã€‚

å…¶æ¬¡éœ€è¦æ¿€å…‰é›·è¾¾æ•°æ®ï¼Œå³/scanè¯é¢˜ã€‚

ç„¶åéœ€è¦åæ ‡å˜æ¢æ¶ˆæ¯ï¼Œå³/tfè¯é¢˜ã€‚

ç„¶åé‚£ä¸ª/initial\_poseè¯é¢˜ï¼Œæ˜¯2Dåœ°å›¾ä¸Šçš„åˆå§‹ä½ç½®ï¼Œå¯ä»¥ç”¨rviz2å‘å¸ƒï¼Œä¹Ÿå¯ä»¥ç”¨C++ä»£ç å‘å¸ƒã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWFjNjc0MGRiY2QzMjBmZmUxYTczZmMxMTZlNmRjMGNfUWJhcDc3Rk1CdzNmQmNXQlc0MXZxTU1ISFF0VFBQclVfVG9rZW46TzZ3Q2I2cEh6bzBpWUJ4bkVYZmNja1NVbnFkXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

ç„¶åéœ€è¦ä¿®æ”¹ä¸€ä¸‹å‚æ•°ï¼š

è¿™ä¸ªæ˜¯å‚æ•°çš„å®˜æ–¹ç½‘ç«™ï¼š

https://docs.nav2.org/configuration/packages/configuring-amcl.html#

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjhlOTBiZGIyYTIxNjdiNjU5NjJiMzQ3YWQ4YjRkM2NfN04zSm9DclkyNGVkV24xVngyU0dMT25uaktrOE9KZXRfVG9rZW46VU9ZTWJzN096b0ZtQkd4b0RiWmNLVk1PbnVnXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

ä¿®æ”¹å®ŒLaunchåï¼Œå†ä¿®æ”¹paramså‚æ•°ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjU3NDQ1NjA3NWUxYTg1ZjRhODg5NGQ0ZTU5ODAxYTBfb3dlVEFpSzhGUXJMeFRSRVc1OExRRkxNUDdVR1lpWHdfVG9rZW46UU1LcmJJRHlOb2JtTG54cHpZcGM4S21abkdlXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

è¿™é‡Œçš„OmniChassisä¸æ­¢æŒ‡å…¨å‘è½®åº•ç›˜ï¼Œè€Œæ˜¯å¹¿ä¹‰çš„å…¨å‘è½®åº•ç›˜ï¼Œåƒå…¨å‘è½®åº•ç›˜ï¼Œéº¦è½®åº•ç›˜éƒ½æ˜¯å…¨å‘è½®åº•ç›˜ã€‚å½“ç„¶ä¹Ÿå¯ä»¥è‡ªå®šä¹‰åº•ç›˜ç±»å‹ã€‚

è¿™ä¸ªé…ç½®æ–‡ä»¶æœ€é¡¶ä¸Šçš„é‚£ä¸ªuse\_sim\_timeè®¾ç½®ä¸ºFalseã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDE1YWQ4MmNkOWJmNWE3MDk4YjVmZmIyOWRiMWVhNjJfNk5BYnQ0dHdrWG1rZkhrUW5vSDVPU0UyVTZia2xEQTBfVG9rZW46Q3pibGJLb29rb1NRRHN4dHBHNmNUcEZWblFjXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDdmNzY4OTE0YTM1NGI1NDIwMWE0NjY0M2RmY2VjMDVfSVhTRjZua2RPemJkZVFvRUhROVMyTmEzVzVYMkJqb2tfVG9rZW46TzVGSWJRM2Rtb3NMd3h4ZEtybmNPaUg5bmNoXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjA1OWM3NGU3MDYzMmQyZGIxZWRhYmM0Yzg0OWZiYzJfRG1XbXZMaGp0VDFnem9MZ2ZlQnRENUFsOHpFWmxKaHdfVG9rZW46VGNSOWJLVllXb3FKdE94UTZ2MmNKYnNvblBjXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmE2MzI1ZDFkMjNhMzdjMWExNWQ5NTMzN2VmYzk4ZjdfSDhOVnZ4ZGM2ejR2SkVqRzdRa3F2alRiNndXdWJ5MXdfVG9rZW46SlA4MmJpRlV1b1dReXp4b0tLbmNCVVdCbjhiXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NGJiYjVlNTdiNzRiYmRmNDRkZjA2NWZmZGNkZjI2Yjlfb0p4Z09qRW5qSWc4ZGtJSlM4bHFuSnNlUXpLZ2t6OE9fVG9rZW46TXZqV2IxSGlwb0c3NU94V2I4amNScTdLbndiXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

  

6.  ## å¯¼èˆªæœåŠ¡å™¨
    

æ¶‰åŠçš„è¯é¢˜å¤ªå¤šäº†ï¼Œæ‰€ä»¥æˆ‘ä»¬åˆ—å‡ºæ¥äº†ä¸€ä¸ªè¡¨ï¼š

1.  è®¢é˜…çš„è¯é¢˜
    

<!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
| è¯é¢˜ | æ¥å£ | æè¿° |
|:---|:---|:---|
| /goal_pose | geometry_msgs/msg/PoseStamped | å¯¼èˆªç›®æ ‡ç‚¹ï¼Œç”¨äºè§¦å‘å¯¼èˆªä»»åŠ¡ |
| /tf | tf2_msgs/msg/TFMessage | åæ ‡å˜æ¢æ¶ˆæ¯ï¼Œç”¨äºä¸åŒåæ ‡ç³»ä¹‹é—´çš„è½¬æ¢ |
| /odom | nav_msgs/msg/Odometry | é‡Œç¨‹è®¡æ•°æ®ï¼Œæä¾›æœºå™¨äººä½ç½®å’Œè¿åŠ¨ä¿¡æ¯ |
| è¯é¢˜ | æ¥å£ | æè¿° |
| /global_costmap/footprint | geometry_msgs/msg/Polygon | æœºå™¨äººï¼ˆæˆ–ä»»ä½•ç§»åŠ¨å¹³å°ï¼‰çš„è¶³è¿¹ï¼ˆfootprintï¼‰ä¿¡æ¯ã€‚è¶³è¿¹æ˜¯æœºå™¨äººåœ¨åœ°å›¾ä¸Šå æ®çš„ç©ºé—´å½¢çŠ¶ï¼Œé€šå¸¸ç”¨å¤šè¾¹å½¢è¡¨ç¤ºã€‚ |
| /map | nav_msgs/msg/OccupancyGrid | å‘å¸ƒç¯å¢ƒåœ°å›¾ï¼Œç‰¹åˆ«æ˜¯ç”¨äºå¯¼èˆªçš„å ç”¨ç½‘æ ¼å›¾ï¼ˆOccupancy Grid Mapï¼‰ã€‚ |
| /scan | sensor_msgs/msg/LaserScan | æ¿€å…‰æ‰«ææ•°æ®ã€‚ |
| è¯é¢˜ | æ¥å£ | æè¿° |
| /odom | nav_msgs/msg/Odometry | æœºå™¨äººçš„é‡Œç¨‹è®¡ä¿¡æ¯ï¼ŒåŒ…å«ä½ç½®ã€é€Ÿåº¦å’Œå§¿æ€ |
| /speed_limit | nav2_msgs/msg/SpeedLimit | å¯¼èˆªè¿‡ç¨‹ä¸­çš„é€Ÿåº¦é™åˆ¶ä¿¡æ¯ï¼Œç”¨äºåŠ¨æ€è°ƒæ•´æœºå™¨äººçš„ç§»åŠ¨é€Ÿåº¦ |
| è¯é¢˜ | æ¥å£ | æè¿° |
| /local_costmap/footprint | geometry_msgs/msg/Polygon | æœºå™¨äººæˆ–ç§»åŠ¨å¹³å°çš„è¶³è¿¹å¤šè¾¹å½¢ï¼Œç”¨äºæœ¬åœ°ä»£ä»·åœ°å›¾çš„è®¡ç®— |
| /scan | sensor_msgs/msg/LaserScan | æ¿€å…‰æ‰«æä»ªçš„æ‰«ææ•°æ®ï¼Œç”¨äºç¯å¢ƒæ„ŸçŸ¥å’Œé¿éšœ |
| è¯é¢˜ | æ¥å£ | æè¿° |
| /clock | rosgraph_msgs/msg/Clock | ROSç³»ç»Ÿæ—¶é—´ |
| /cmd_vel_teleop | geometry_msgs/msg/Twist | é¥æ“ä½œå‘½ä»¤ï¼Œç”¨äºæ§åˆ¶æœºå™¨äººçš„çº¿æ€§å’Œè§’é€Ÿåº¦ |
| /local_costmap/costmap_raw | nav2_msgs/msg/Costmap | å±€éƒ¨ä»£ä»·åœ°å›¾çš„åŸå§‹æ•°æ® |
| /local_costmap/published_footprint | geometry_msgs/msg/PolygonStamped | æœºå™¨äººåœ¨å±€éƒ¨ä»£ä»·åœ°å›¾ä¸­çš„å·²å‘å¸ƒè¶³è¿¹ |
| /preempt_teleop | std_msgs/msg/Empty | é¥æ“ä½œæŠ¢å ä¿¡å·ï¼Œç”¨äºä¸­æ–­å½“å‰é¥æ“ä½œ |
| è¯é¢˜ | æ¥å£ | æè¿° |
| /global_costmap/costmap_raw | nav2_msgs/msg/Costmap | å…¨å±€ä»£ä»·åœ°å›¾çš„åŸå§‹æ•°æ®ï¼Œç”¨äºè·¯å¾„è§„åˆ’ |
| /global_costmap/published_footprint | geometry_msgs/msg/PolygonStamped | æœºå™¨äººåœ¨å…¨å±€ä»£ä»·åœ°å›¾ä¸­çš„è¶³è¿¹è¡¨ç¤º |
| è¯é¢˜ | æ¥å£ | æè¿° |
| /cmd_vel_nav | geometry_msgs/msg/Twist | æ¥æ”¶æ¥è‡ªå…¶ä»–èŠ‚ç‚¹çš„é€Ÿåº¦æ§åˆ¶æŒ‡ä»¤çš„è¯é¢˜ |

  

  

2.  å‘å¸ƒçš„è¯é¢˜
    

<!--br {mso-data-placement:same-cell;}--> td {white-space:nowrap;border:0.5pt solid #dee0e3;font-size:10pt;font-style:normal;font-weight:normal;vertical-align:middle;word-break:normal;word-wrap:normal;}
| è¯é¢˜ | æ¥å£ | æè¿° |
|:---|:---|:---|
| /plan | nav_msgs/msg/Path | å½“å‰ä½ç½®åˆ°ç›®æ ‡ç‚¹çš„å…¨å±€è·¯å¾„ |
| è¯é¢˜ | æ¥å£ | æè¿° |
| /global_costmap/costmap | nav_msgs/msg/OccupancyGrid | å‘å¸ƒå…¨å±€ä»£ä»·åœ°å›¾çš„å½“å‰çŠ¶æ€ã€‚ |
| /global_costmap/costmap_raw | nav2_msgs/msg/Costmap | æœªç»è¿›ä¸€æ­¥å¤„ç†çš„åŸå§‹ä»£ä»·åœ°å›¾æ•°æ®ã€‚ |
| /global_costmap/costmap_updates | map_msgs/msg/OccupancyGridUpdate | å…¨å±€ä»£ä»·åœ°å›¾çš„æ›´æ–°ï¼Œè¯¥æ¶ˆæ¯å¯ä»¥é«˜æ•ˆæ›´æ–°åœ°å›¾ã€‚ |
| /global_costmap/published_footprint | geometry_msgs/msg/PolygonStamped | å‘å¸ƒæœºå™¨äººçš„è¶³è¿¹ï¼ˆfootprintï¼‰ï¼Œå³æœºå™¨äººåœ¨åœ°å›¾ä¸Šå æ®çš„ç©ºé—´å½¢çŠ¶ã€‚ |
| è¯é¢˜åç§° | æ¶ˆæ¯ç±»å‹ | æè¿° |
| /cmd_vel_nav | geometry_msgs/msg/Twist | å‘å¸ƒæ§åˆ¶å‘½ä»¤ï¼ŒåŒ…æ‹¬çº¿æ€§å’Œè§’é€Ÿåº¦ï¼Œç”¨äºæ§åˆ¶æœºå™¨äººæŒ‰ç…§è§„åˆ’è·¯å¾„ç§»åŠ¨ã€‚ |
| /cost_cloud | sensor_msgs/msg/PointCloud2 | å‘å¸ƒæˆæœ¬åœ°å›¾ä¸­çš„ç‚¹äº‘æ•°æ®ï¼Œç”¨äºé¿éšœå’Œè·¯å¾„è§„åˆ’ã€‚ |
| /local_plan | nav_msgs/msg/Path | å‘å¸ƒå±€éƒ¨è·¯å¾„è§„åˆ’ç»“æœï¼Œå³æœºå™¨äººåº”å¦‚ä½•åˆ°è¾¾å½“å‰ç›®æ ‡ç‚¹é™„è¿‘çš„ä¸€ä¸ªç‚¹ã€‚ |
| /marker | visualization_msgs/msg/MarkerArray | å‘å¸ƒå¯è§†åŒ–æ ‡è®°ï¼Œç”¨äºåœ¨RVizç­‰å¯è§†åŒ–å·¥å…·ä¸­æ˜¾ç¤ºè·¯å¾„ã€éšœç¢ç‰©ç­‰ä¿¡æ¯ã€‚ |
| /received_global_plan | nav_msgs/msg/Path | å‘å¸ƒä»å…¨å±€è§„åˆ’å™¨æ¥æ”¶åˆ°çš„å…¨å±€è·¯å¾„ï¼Œå³å½“å‰ä½ç½®åˆ°ç›®æ ‡ç‚¹çš„è·¯å¾„ã€‚ |
| /transformed_global_plan | nav_msgs/msg/Path | å‘å¸ƒç»è¿‡åæ ‡å˜æ¢çš„å…¨å±€è·¯å¾„ï¼Œç¡®ä¿è·¯å¾„ä¸æœºå™¨äººçš„å½“å‰åæ ‡ç³»ä¸€è‡´ã€‚ |
| è¯é¢˜ | æ¥å£ | æè¿° |
| /local_costmap/clearing_endpoints | sensor_msgs/msg/PointCloud2 | æ¸…é™¤æˆæœ¬å›¾ä¸Šçš„éšœç¢ç‰©ç‚¹äº‘æ•°æ®ï¼Œé€šå¸¸ç”¨äºåŠ¨æ€éšœç¢ç‰©å¤„ç† |
| /local_costmap/costmap | nav_msgs/msg/OccupancyGrid | æœ¬åœ°æˆæœ¬å›¾ï¼Œè¡¨ç¤ºæœºå™¨äººå‘¨å›´ç¯å¢ƒçš„å¯é€šè¡Œæ€§ |
| /local_costmap/costmap_raw | nav2_msgs/msg/Costmap | æœªç»å¤„ç†çš„æœ¬åœ°æˆæœ¬å›¾ï¼Œå¯èƒ½åŒ…å«æ›´è¯¦ç»†çš„ä¿¡æ¯ |
| /local_costmap/costmap_updates | map_msgs/msg/OccupancyGridUpdate | æœ¬åœ°æˆæœ¬å›¾çš„æ›´æ–°ä¿¡æ¯ï¼ŒåŒ…æ‹¬å“ªäº›åŒºåŸŸå‘ç”Ÿäº†å˜åŒ– |
| /local_costmap/published_footprint | geometry_msgs/msg/PolygonStamped | å‘å¸ƒçš„æœºå™¨äººè¶³è¿¹å¤šè¾¹å½¢ï¼Œæ—¶é—´æˆ³è¡¨ç¤ºå‘å¸ƒæ—¶é—´ |
| /local_costmap/voxel_grid | nav2_msgs/msg/VoxelGrid | ä½“ç´ ç½‘æ ¼æ•°æ®ï¼Œç”¨äºæˆæœ¬å›¾ç”Ÿæˆä¸­çš„ç©ºé—´åˆ’åˆ†å’Œä¼˜åŒ– |
| è¯é¢˜ | æ¥å£ | æè¿° |
| /cmd_vel | geometry_msgs/msg/Twist | å‘é€ç»™åº•å±‚æ§åˆ¶å™¨çš„é€Ÿåº¦å‘½ä»¤ |
| è¯é¢˜ | æ¥å£ | æè¿° |
| /plan_smoothed | nav_msgs/msg/Path | ç»è¿‡å¹³æ»‘å¤„ç†åçš„å…¨å±€è·¯å¾„ |
| è¯é¢˜ | æ¥å£ | æè¿° |
| /cmd_vel | geometry_msgs/msg/Twist | å‘å¸ƒç»è¿‡å¤„ç†æˆ–å¹³æ»‘åçš„é€Ÿåº¦æ§åˆ¶æŒ‡ä»¤çš„è¯é¢˜ |

ç”±äºèµµè™šå·¦æ˜¯æŠŠå®˜æ–¹çš„æºç é‡æ–°å†™åœ¨äº†WSé‡Œï¼Œè¿™æ ·å¯¹äºåˆå­¦è€…æ¥è¯´ä¼šæ¯”è¾ƒéº»çƒ¦ï¼Œå¯¹äºåˆå­¦è€…æ¥è¯´å»ºè®®ä½¿ç”¨å®˜æ–¹å†™å¥½çš„bringupèŠ‚ç‚¹ï¼Œä»¥ä¸‹æ˜¯æˆ‘æ ¹æ®å®˜æ–¹Wikiæ€»ç»“å‡ºæ¥çš„ä½¿ç”¨æ–¹æ³•ï¼šï¼ˆè¿™é‡Œé€‰æ‹©ä½¿ç”¨å®˜æ–¹çš„bringupèŠ‚ç‚¹ï¼Œè€Œä¸æ˜¯èµµè™šå·¦è€å¸ˆçš„èŠ‚ç‚¹ã€‚ï¼‰

ä»¥ä¸‹æ˜¯é…ç½®çš„`nav2.launch.py`æ–‡ä»¶ï¼š

```Python
import os

from ament_index_python.packages import get_package_share_directory
from launch import LaunchDescription
from launch.actions import DeclareLaunchArgument
from launch.actions import IncludeLaunchDescription
from launch.launch_description_sources import PythonLaunchDescriptionSource
from launch.substitutions import LaunchConfiguration
# from launch_ros.actions import Node



def generate_launch_description():
    navigation2_dir = get_package_share_directory('nav05_navigation2')
    nav2_bringup_dir = get_package_share_directory('nav2_bringup')

    # launchçš„å‚æ•°çš„ä¼˜å…ˆçº§æ¯”yamlçš„å‚æ•°ä¼˜å…ˆçº§é«˜
    use_sim_time = LaunchConfiguration('use_sim_time', default='flase')
    map_yaml_path = LaunchConfiguration('map',default=os.path.join(navigation2_dir,'map','house.yaml'))
    nav2_param_path = LaunchConfiguration('params_file',default=os.path.join(navigation2_dir,'params','nav2.yaml'))

    return LaunchDescription([
        DeclareLaunchArgument('use_sim_time',default_value=use_sim_time,description='Use simulation (Gazebo) clock if true'),
        DeclareLaunchArgument('map',default_value=map_yaml_path,description='Full path to map file to load'),
        DeclareLaunchArgument('params_file',default_value=nav2_param_path,description='Full path to param file to load'),

        IncludeLaunchDescription(
            PythonLaunchDescriptionSource([nav2_bringup_dir,'/launch','/bringup_launch.py']),
            launch_arguments={
                'map': map_yaml_path,
                'use_sim_time': use_sim_time,
                'params_file': nav2_param_path}.items(),
        ),
    ])
```

ä»¥ä¸‹æ˜¯`rviz2.launch.py`ï¼š

```Python
import os

from ament_index_python.packages import get_package_share_directory
from launch import LaunchDescription
from launch.actions import DeclareLaunchArgument
from launch.substitutions import LaunchConfiguration
from launch_ros.actions import Node



def generate_launch_description():
    navigation2_dir = get_package_share_directory('nav05_navigation2')

    use_sim_time = LaunchConfiguration('use_sim_time', default='false')

    rviz_config_dir = os.path.join(navigation2_dir,'rviz','nav2.rviz')

    return LaunchDescription([
        DeclareLaunchArgument('use_sim_time',default_value=use_sim_time,description='Use simulation (Gazebo) clock if true'),

        Node(
            package='rviz2',
            executable='rviz2',
            name='rviz2',
            arguments=['-d', rviz_config_dir],
            parameters=[{'use_sim_time': use_sim_time}],
            output='screen'),
    ])
```

ä»¥ä¸‹æ˜¯`nav2.yaml`é…ç½®æ–‡ä»¶ï¼ˆå·®é€Ÿæ¨¡å‹+DWEå±€éƒ¨è§„åˆ’å™¨ï¼‰ï¼š

```Python
amcl:
  ros__parameters:
    use_sim_time: false
    alpha1: 0.2
    alpha2: 0.2
    alpha3: 0.2
    alpha4: 0.2
    alpha5: 0.2
    base_frame_id: "base_link"
    beam_skip_distance: 0.5
    beam_skip_error_threshold: 0.9
    beam_skip_threshold: 0.3
    do_beamskip: false
    global_frame_id: "map"
    lambda_short: 0.1
    laser_likelihood_max_dist: 2.0
    laser_max_range: 100.0
    laser_min_range: -1.0
    laser_model_type: "likelihood_field"
    max_beams: 60
    max_particles: 2000
    min_particles: 500
    odom_frame_id: "odom"
    pf_err: 0.05
    pf_z: 0.99
    recovery_alpha_fast: 0.0
    recovery_alpha_slow: 0.0
    resample_interval: 1
    robot_model_type: "nav2_amcl::DifferentialMotionModel"
    save_pose_rate: 0.5
    sigma_hit: 0.2
    tf_broadcast: true
    transform_tolerance: 1.0
    update_min_a: 0.2
    update_min_d: 0.25
    z_hit: 0.5
    z_max: 0.05
    z_rand: 0.5
    z_short: 0.05
    scan_topic: scan

amcl_map_client:
  ros__parameters:
    use_sim_time: false

amcl_rclcpp_node:
  ros__parameters:
    use_sim_time: false

bt_navigator:
  ros__parameters:
    use_sim_time: false
    global_frame: map
    robot_base_frame: base_link
    odom_topic: /odom
    bt_loop_duration: 10
    default_server_timeout: 20
    # 'default_nav_through_poses_bt_xml' and 'default_nav_to_pose_bt_xml' are use defaults:
    # nav2_bt_navigator/navigate_to_pose_w_replanning_and_recovery.xml
    # nav2_bt_navigator/navigate_through_poses_w_replanning_and_recovery.xml
    # They can be set here or via a RewrittenYaml remap from a parent launch file to Nav2.
    plugin_lib_names:
    - nav2_compute_path_to_pose_action_bt_node
    - nav2_compute_path_through_poses_action_bt_node
    - nav2_smooth_path_action_bt_node
    - nav2_follow_path_action_bt_node
    - nav2_spin_action_bt_node
    - nav2_wait_action_bt_node
    - nav2_back_up_action_bt_node
    - nav2_drive_on_heading_bt_node
    - nav2_clear_costmap_service_bt_node
    - nav2_is_stuck_condition_bt_node
    - nav2_goal_reached_condition_bt_node
    - nav2_goal_updated_condition_bt_node
    - nav2_globally_updated_goal_condition_bt_node
    - nav2_is_path_valid_condition_bt_node
    - nav2_initial_pose_received_condition_bt_node
    - nav2_reinitialize_global_localization_service_bt_node
    - nav2_rate_controller_bt_node
    - nav2_distance_controller_bt_node
    - nav2_speed_controller_bt_node
    - nav2_truncate_path_action_bt_node
    - nav2_truncate_path_local_action_bt_node
    - nav2_goal_updater_node_bt_node
    - nav2_recovery_node_bt_node
    - nav2_pipeline_sequence_bt_node
    - nav2_round_robin_node_bt_node
    - nav2_transform_available_condition_bt_node
    - nav2_time_expired_condition_bt_node
    - nav2_path_expiring_timer_condition
    - nav2_distance_traveled_condition_bt_node
    - nav2_single_trigger_bt_node
    - nav2_is_battery_low_condition_bt_node
    - nav2_navigate_through_poses_action_bt_node
    - nav2_navigate_to_pose_action_bt_node
    - nav2_remove_passed_goals_action_bt_node
    - nav2_planner_selector_bt_node
    - nav2_controller_selector_bt_node
    - nav2_goal_checker_selector_bt_node
    - nav2_controller_cancel_bt_node
    - nav2_path_longer_on_approach_bt_node
    - nav2_wait_cancel_bt_node
    - nav2_spin_cancel_bt_node
    - nav2_back_up_cancel_bt_node
    - nav2_drive_on_heading_cancel_bt_node

bt_navigator_rclcpp_node:
  ros__parameters:
    use_sim_time: false

controller_server:
  ros__parameters:
    use_sim_time: false
    controller_frequency: 20.0
    min_x_velocity_threshold: 0.001
    min_y_velocity_threshold: 0.5
    min_theta_velocity_threshold: 0.001
    failure_tolerance: 0.3
    progress_checker_plugin: "progress_checker"
    goal_checker_plugins: ["general_goal_checker"] # "precise_goal_checker"
    controller_plugins: ["FollowPath"]

    # Progress checker parameters
    progress_checker:
      plugin: "nav2_controller::SimpleProgressChecker"
      required_movement_radius: 0.5
      movement_time_allowance: 10.0
    # Goal checker parameters
    #precise_goal_checker:
    #  plugin: "nav2_controller::SimpleGoalChecker"
    #  xy_goal_tolerance: 0.25
    #  yaw_goal_tolerance: 0.25
    #  stateful: True
    general_goal_checker:
      stateful: True
      plugin: "nav2_controller::SimpleGoalChecker"
      xy_goal_tolerance: 0.25
      yaw_goal_tolerance: 0.25
    # DWB parameters
    FollowPath:
      plugin: "dwb_core::DWBLocalPlanner"
      debug_trajectory_details: True
      min_vel_x: 0.0
      min_vel_y: 0.0
      max_vel_x: 0.26
      max_vel_y: 0.0
      max_vel_theta: 1.0
      min_speed_xy: 0.0
      max_speed_xy: 0.26
      min_speed_theta: 0.0
      # Add high threshold velocity for turtlebot 3 issue.
      # https://github.com/ROBOTIS-GIT/turtlebot3_simulations/issues/75
      acc_lim_x: 2.5
      acc_lim_y: 0.0
      acc_lim_theta: 3.2
      decel_lim_x: -2.5
      decel_lim_y: 0.0
      decel_lim_theta: -3.2
      vx_samples: 20
      vy_samples: 5
      vtheta_samples: 20
      sim_time: 1.7
      linear_granularity: 0.05
      angular_granularity: 0.025
      transform_tolerance: 0.2
      xy_goal_tolerance: 0.25
      trans_stopped_velocity: 0.25
      short_circuit_trajectory_evaluation: True
      stateful: True
      critics: ["RotateToGoal", "Oscillation", "BaseObstacle", "GoalAlign", "PathAlign", "PathDist", "GoalDist"]
      BaseObstacle.scale: 0.02
      PathAlign.scale: 32.0
      PathAlign.forward_point_distance: 0.1
      GoalAlign.scale: 24.0
      GoalAlign.forward_point_distance: 0.1
      PathDist.scale: 32.0
      GoalDist.scale: 24.0
      RotateToGoal.scale: 32.0
      RotateToGoal.slowing_factor: 5.0
      RotateToGoal.lookahead_time: -1.0

controller_server_rclcpp_node:
  ros__parameters:
    use_sim_time: false

local_costmap:
  local_costmap:
    ros__parameters:
      update_frequency: 5.0
      publish_frequency: 2.0
      global_frame: odom
      robot_base_frame: base_link
      use_sim_time: false
      rolling_window: true
      width: 3
      height: 3
      resolution: 0.05
      robot_radius: 0.22
      plugins: ["static_layer", "obstacle_layer", "voxel_layer", "inflation_layer"]
      inflation_layer:
        plugin: "nav2_costmap_2d::InflationLayer"
        cost_scaling_factor: 3.0
        inflation_radius: 0.55
      obstacle_layer:
        plugin: "nav2_costmap_2d::ObstacleLayer"
        enabled: True
        observation_sources: scan
        scan:
          topic: /scan
          max_obstacle_height: 2.0
          clearing: True
          marking: True
          data_type: "LaserScan"
          raytrace_max_range: 3.0
          raytrace_min_range: 0.0
          obstacle_max_range: 2.5
          obstacle_min_range: 0.0
      voxel_layer:
        plugin: "nav2_costmap_2d::VoxelLayer"
        enabled: True
        publish_voxel_map: True
        origin_z: 0.0
        z_resolution: 0.05
        z_voxels: 16
        max_obstacle_height: 2.0
        mark_threshold: 0
        observation_sources: scan
        scan:
          topic: /scan
          max_obstacle_height: 2.0
          clearing: True
          marking: True
          data_type: "LaserScan"
          raytrace_max_range: 3.0
          raytrace_min_range: 0.0
          obstacle_max_range: 2.5
          obstacle_min_range: 0.0
      static_layer:
        plugin: "nav2_costmap_2d::StaticLayer"
        map_subscribe_transient_local: True
      always_send_full_costmap: True

  local_costmap_client:
    ros__parameters:
      use_sim_time: false
  local_costmap_rclcpp_node:
    ros__parameters:
      use_sim_time: false

global_costmap:
  global_costmap:
    ros__parameters:
      update_frequency: 1.0
      publish_frequency: 1.0
      global_frame: map
      robot_base_frame: base_link
      use_sim_time: false
      robot_radius: 0.22
      resolution: 0.05
      track_unknown_space: true
      plugins: ["static_layer", "obstacle_layer", "inflation_layer"]
      obstacle_layer:
        plugin: "nav2_costmap_2d::ObstacleLayer"
        enabled: True
        observation_sources: scan
        scan:
          topic: /scan
          max_obstacle_height: 2.0
          clearing: True
          marking: True
          data_type: "LaserScan"
          raytrace_max_range: 3.0
          raytrace_min_range: 0.0
          obstacle_max_range: 2.5
          obstacle_min_range: 0.0
      static_layer:
        plugin: "nav2_costmap_2d::StaticLayer"
        map_subscribe_transient_local: True
      inflation_layer:
        plugin: "nav2_costmap_2d::InflationLayer"
        cost_scaling_factor: 3.0
        inflation_radius: 0.55
      always_send_full_costmap: True

  global_costmap_client:
    ros__parameters:
      use_sim_time: false
  global_costmap_rclcpp_node:
    ros__parameters:
      use_sim_time: false

map_server:
  ros__parameters:
    use_sim_time: false
    yaml_filename: "house.yaml"

map_saver:
  ros__parameters:
    use_sim_time: false
    save_map_timeout: 5.0
    free_thresh_default: 0.25
    occupied_thresh_default: 0.65
    map_subscribe_transient_local: True

planner_server:
  ros__parameters:
    expected_planner_frequency: 20.0
    use_sim_time: false
    planner_plugins: ["GridBased"]
    GridBased:
      plugin: "nav2_navfn_planner/NavfnPlanner"
      tolerance: 0.5
      use_astar: false
      allow_unknown: true

planner_server_rclcpp_node:
  ros__parameters:
    use_sim_time: false

smoother_server:
  ros__parameters:
    use_sim_time: false
    smoother_plugins: ["simple_smoother"]
    simple_smoother:
      plugin: "nav2_smoother::SimpleSmoother"
      tolerance: 1.0e-10
      max_its: 1000
      do_refinement: True

behavior_server:
  ros__parameters:
    costmap_topic: local_costmap/costmap_raw
    footprint_topic: local_costmap/published_footprint
    cycle_frequency: 10.0
    behavior_plugins: ["spin", "backup", "drive_on_heading", "wait"]
    spin:
      plugin: "nav2_behaviors/Spin"
    backup:
      plugin: "nav2_behaviors/BackUp"
    drive_on_heading:
      plugin: "nav2_behaviors/DriveOnHeading"
    wait:
      plugin: "nav2_behaviors/Wait"
    global_frame: odom
    robot_base_frame: base_link
    transform_tolerance: 0.1
    use_sim_time: false
    simulate_ahead_time: 2.0
    max_rotational_vel: 1.0
    min_rotational_vel: 0.4
    rotational_acc_lim: 3.2

robot_state_publisher:
  ros__parameters:
    use_sim_time: false

waypoint_follower:
  ros__parameters:
    loop_rate: 20
    stop_on_failure: false
    waypoint_task_executor_plugin: "wait_at_waypoint"
    wait_at_waypoint:
      plugin: "nav2_waypoint_follower::WaitAtWaypoint"
      enabled: True
      waypoint_pause_duration: 200

velocity_smoother:
  ros__parameters:
    use_sim_time: false
    smoothing_frequency: 20.0
    scale_velocities: False
    feedback: "OPEN_LOOP"
    max_velocity: [0.26, 0.0, 1.0]
    min_velocity: [-0.26, 0.0, -1.0]
    max_accel: [2.5, 0.0, 3.2]
    max_decel: [-2.5, 0.0, -3.2]
    odom_topic: "odom"
    odom_duration: 0.1
    deadband_velocity: [0.0, 0.0, 0.0]
    velocity_timeout: 1.0
```

  

  

7.  ## å¤šè½¦ç¼–é˜Ÿ
    

  

  

  

  

16.  # Moveit2å·¥ä¸šæœºå™¨äººæœºæ¢°è‡‚
    

https://moveit.ros.org/

1.  ## æœºå™¨äººå­¦
    

https://www.bilibili.com/video/BV1v4411H7ez

https://www.bilibili.com/video/av59243185

1.  ### ç†è®ºåŸºç¡€
    

1.  #### DOF(è‡ªç”±åº¦)
    

ç®€å•æ¥è¯´ï¼Œè‡ªç”±åº¦(ä»¥ä¸‹ç»Ÿç§°ä¸ºdof)æŒ‡çš„æ˜¯ **ç‰©ä½“åœ¨ç©ºé—´é‡Œé¢çš„åŸºæœ¬è¿åŠ¨æ–¹å¼** ï¼Œæ€»å…±æœ‰6ç§ã€‚ä»»ä½•è¿åŠ¨éƒ½å¯ä»¥æ‹†åˆ†æˆè¿™6ç§åŸºæœ¬è¿åŠ¨æ–¹å¼ï¼Œè€Œè¿™6ç§åŸºæœ¬è¿åŠ¨æ–¹å¼åˆå¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼š **ä½ç§»** å’Œ **æ—‹è½¬** ã€‚

ä½ç§»ï¼šXè½´ã€Yè½´ã€Zè½´çš„å¹³åŠ¨

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2RiZDk3NWRjNzZmNzQwNGI3YjcwMTViODVkNTNhNTVfd2pQQnloeW9JaHE4eFVlQVFpbDlMYjRkZUR6SHVROFlfVG9rZW46WGtRTGJabnE2b3JXN0h4NER3WGN3ZldpblpyXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

æ—‹è½¬ï¼šRollæ¨ªæ»šè§’(ç»•Xè½¬åŠ¨)ã€Pitchä¿¯ä»°è§’(ç»•Yè½¬åŠ¨)ã€Yawèˆªå‘è§’(ç»•Zè½¬åŠ¨)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2I2MTJiMmNmYjZiNjYyMTkyZjI0YWJlMzc4ZjcxMDRfSjl2cThKR3YzU0NYckZDUVZXbGhJU0hRckRUM1VLRjJfVG9rZW46TnNYTGJOUHdWb0lSSXJ4czc0WGNwNHVDbjFmXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

  

2.  ### æ•°ç†åŸºç¡€
    

1.  #### ä½å§¿ï¼ˆä½ç½®ä¸å§¿æ€ï¼‰çš„è¡¨ç¤º
    

å€˜è‹¥åœ¨ä¸€ä¸ªç©ºé—´é‡Œæœ‰ä¸€ä¸ªåˆšä½“ï¼ˆframeï¼‰ï¼Œæˆ‘ä»¬å¦‚ä½•ç¡®å®šåˆšä½“åœ¨è¿™ä¸ªç©ºé—´é‡Œçš„ä½å§¿å‘¢ï¼Ÿ

é¦–å…ˆè¦å»ºç«‹ä¸€ä¸ªä¸–ç•Œåæ ‡ç³»ï¼ˆworld frameï¼‰ï¼Œç„¶åè¦åœ¨åˆšä½“ä¸Šå»ºç«‹åˆšä½“åæ ‡ç³»ï¼ˆbody frameï¼‰.

1.  **ä½ç½®çš„æè¿°**
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2M3MGUzMmY1NDFlYWRjZTM1YTZiYzNmNjBlOGUxZjJfenB4S0VmeEJVU2tzTXVLNnBVMzQ5NnFCVjFqUlNkRVZfVG9rZW46TURyU2I0T2tGb2REcEl4dVRKQ2NhNThabm9jXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

æè¿°åˆšä½“çš„è´¨å¿ƒ(ä¸€ä¸ªç‚¹)åœ¨ä¸–ç•Œä¸­çš„ä½ç½®ï¼Œå°±å¯ä»¥ç”¨ä¸€ä¸ª3X1å‘é‡æ¥è¡¨ç¤º.

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDdjMWZhM2E3NzAxOGYyZGEwZDEzMDY3ZGJhZmE4NjFfdnRqeW1hRmx1SUQ0amNqZVFldklXeUpLcXJlbThUSHNfVG9rZW46SEZRcmJwdE5Tb1VKbE14Z2VSSWNSaGVubldkXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

è¿™æ ·å°±çŸ¥é“äº†å¹³åŠ¨çš„ä¸‰ä¸ªDOFã€‚

  

2.  **æ–¹ä½çš„æè¿°**
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTEzYzcxZjdiZGZhZTg0NWUwNmVhMmMyN2E5ZTdiZjhfQUNITFh5M3FMMEJjN3d1WWJ4TnBEWExCSmIwT1NLYmpfVG9rZW46SGJnUWI3dEhTb2dNT3l4cFc2YmM4cng0bkJkXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

è®¾ä¸–ç•Œåæ ‡ç³»ä¸ºAï¼Œåˆšä½“åæ ‡ç³»ä¸ºBã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTE2NzMzYTQ5MzQ1OTkyNjNiMzM2MjZhNGNlNWQxYzVfQm1yTVhaSnY4b0cxb3lkY1lKSDZMM1Zuam5xV0UzOFFfVG9rZW46RW5qS2I2QVBpb2xyT2l4RjJRY2NJVExubjBkXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTgxYmNkOGE5MzZkOTgzOTEwM2M4N2FiYzhmYmU4OThfTFhPQ21XNEpjbmRPdDZEeVpuelg4RlZkRVpxVnR3SVhfVG9rZW46WjNPd2J5RG1vbzBKNFl4V0luZ2NlNEI0bkFnXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

ä¸Šé¢è¿™ä¸ªçŸ©é˜µå°±å«æ—‹è½¬çŸ©é˜µï¼ˆRotation Matrixï¼‰ï¼Œæ˜¯ä¸€ä¸ª3\*3çš„æ­£äº¤çŸ©é˜µï¼ŒABRæè¿°çš„æ˜¯Aä¸ºå‚è€ƒåæ ‡ç³»ï¼ŒBç›¸å¯¹äºAçš„æ–¹å‘ã€‚

æ¯ä¸€ä¸ªåˆ—å‘é‡ï¼Œéƒ½ä»£è¡¨Bçš„å¯¹åº”åæ ‡è½´å„è‡ªæŒ‡å‘çš„æ–¹å‘ã€‚

æ¯ä¸€åˆ—å‘é‡éƒ½æ˜¯Bçš„å¯¹åº”çš„åæ ‡è½´ç›¸å¯¹äºAçš„æ–¹å‘ä½™å¼¦ï¼ˆDirect Cosinesï¼‰ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWYwZjZjMTA0ZWIxOTBkZmVkMDM0MmM4MzZjYmIxMDhfSkYyc0V3ZjBMVFF4STg3UERFR3ZCS1puVGxlMUEycFJfVG9rZW46S3VYaGI1Vkthb3BYMXl4MWROb2MwQ1BPbkpiXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDcxMWRkYzM5YzcyMGJjNDVmZDA0YTNjNTUxYzE1YzVfR0sxYVdHNU1FamJpaHI2WGJ0SUhJUWhUMzFSM1oxaEhfVG9rZW46SmkwbGJ5UWVob25qM0p4cWl0bmNhOVA4bmJmXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzczM2NhZmRiZjNkNTU4OTM5MDg3ZmJkYTg4YjM2ZDdfbzh6eHJ3dkhWaUYxak5wTDNRZ3NVdnZ3RHhlSHF5bUlfVG9rZW46UmtCeGI3Z29Yb3VTaFF4dXRBU2M0N0RZbmJHXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

æ—‹è½¬çŸ©é˜µçš„æ¯ä¸ªå…ƒç´  r ijä»£è¡¨ B çš„ç¬¬ j è½´ä¸ A çš„ç¬¬ i è½´çš„æ–¹å‘ä½™å¼¦.

  

å®åœ¨çœ‹ä¸æ‡‚ï¼Œå…ˆæ¥çœ‹ä¸‹é¢æ¥çœ‹ä¾‹å­ï¼š

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MWE2ODgxZDBmNWMzMTVmZWU2NmQ2ZTFhNDFiNjhhYmVfNnp1eE4zUGNxWUU4OFpHakhZVjlPazBjU3l2dzhhcVVfVG9rZW46Qld0RGJCcE1YbzlueEF4QVlZSGMxNjZubjk4XzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

Bçš„Xè½´åœ¨Aä¸­æ€ä¹ˆè¡¨ç¤ºï¼Ÿå¯ä»¥çœ‹å‡ºæ¥ï¼ŒBçš„Xæ­£å¥½æ˜¯Açš„Zè½´çš„è´ŸåŠè½´ï¼Œé‚£å°±æ˜¯0ï¼Œ0ï¼Œ-1.

Bçš„Yè½´åœ¨Aä¸­æ€ä¹ˆè¡¨ç¤ºï¼Ÿå¯ä»¥çœ‹å‡ºæ¥ï¼ŒBçš„Yæ­£å¥½æ˜¯Açš„Yè½´çš„æ­£åŠè½´ï¼Œé‚£å°±æ˜¯0ï¼Œ1ï¼Œ0.

Bçš„Zè½´åœ¨Aä¸­æ€ä¹ˆè¡¨ç¤ºï¼Ÿå¯ä»¥çœ‹å‡ºæ¥ï¼ŒBçš„Zæ­£å¥½æ˜¯Açš„Xè½´çš„æ­£åŠè½´ï¼Œé‚£å°±æ˜¯1ï¼Œ0ï¼Œ0.

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDQ2NTQ3YTRmN2Q3MTNiY2EzNjg4YmY5MjhiYjhkZDhfenFjbkRNTzZlRm9NdnBYTzN3TkZEbjFuN3l4dU1lZ0dfVG9rZW46T3RIb2JOSmkxb1ZpcUR4bUhIcWMzMWlHblNoXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjdmNDg5ODhhZmJjYzc0ZWUyZTQ3MTc4NWQwM2Q3YjJfRmpXcFhXeUdLSlpMallqZUdJQXU0WW9SUVFjdExJRWNfVG9rZW46R3p3cWJnRHZDbzRkM3d4UWRnR2NjVjByblRkXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2MxM2JkNDg0OGQ5NzA3YmJlZGM2NGI2ODc5NzBjMDNfQ3lYVDJ5SzU3eFB1TlpUSll5Q1VBSU4ybnRDaHJ5d1hfVG9rZW46R050R2Jsald4b2tINnF4YlJrMGMzeVBsbmZnXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

è¿™ä¸ªä¾‹å­é‡Œï¼ŒABçš„Zé‡åˆäº†ï¼Œæ‰€ä»¥æˆ‘ä»¬åªçœ‹ä¸Šè§†å›¾å°±å¯ä»¥äº†ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Njg1ZjE0YWI3ODYzNWZmMDVjYWVhNGZlYTE2NGU1OTVfWGcxZWZPUnlrYnNkYVZQT3BUcExGWm9tSnpNNUZ2NmtfVG9rZW46VEpOUWJKRGc5bzlOUlJ4ZmtEVGNjUVBLbndkXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

å°±æ˜¯æŠŠXBè¿™ä¸ªå•ä½å‘é‡ï¼ŒæŠ•å½±åˆ°Açš„Xå’ŒYä¸Šçœ‹åˆ†é‡å³å¯ã€‚

åŒç†YBä¹Ÿä¸€æ ·ã€‚

ZBå’ŒZAé‡åˆï¼Œæ¯”è¾ƒç®€å•ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDZiMjMzZjViYTkxODVkYjY4NDYxN2U4MGJhYzcxNjhfT3hhME8zNU1YYkN0emtFYnBocXlQNDlQOTAyWHJsd3pfVG9rZW46TE5vbmJLeGk1b1NtWlN4YzZUUWNGT1RzbkZoXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

  

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTlmNzk0YmEzZGRmZWE4YjQ3NjdiYWFkZGFlMjdmYWNfa0pYUklDemVsUW5yV0F4cWNoblJlQXR0STJYWlM4T2RfVG9rZW46U0RqNWJRVVNLb2VmU3B4WVg4QmM2VTZPbkllXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

ç­”æ¡ˆæ˜¯Bã€‚

  

3.  **ä½å§¿çš„æè¿°**
    

é€šè¿‡BFåœ¨WFçš„çŠ¶æ€ï¼Œå°±å¯ä»¥çŸ¥é“åˆšä½“åœ¨ä¸–ç•Œä¸­çš„ä½å§¿ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2JkZWFlNzcwOWNhZjIzNWYyMmM2ZDc1ZWY5YWJmZGFfT3FpN1Y1bTBHTHp6b3FMbGE4cXZXMVhqR0t2d3R2dmFfVG9rZW46Q0NLemJLU3ltb01na294RFBhU2NXVnNCbkV5XzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

  

4.  è¿åŠ¨çš„æè¿°
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGQ0YzgzN2Y0OWMxODQ1MDhlODJiMTBkOTdkM2IwZWZfdFg0Tkp4WlJIdjNzdE9PSWhLRVpFZXlobjd3UjFYeURfVG9rZW46VnhXOGJNNzZkb1c1NVh4VVpnR2NWZmR6bmRkXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

çº¢è‰²æ˜¯åˆšä½“è¿åŠ¨çš„è½¨è¿¹çº¿ï¼Œ

è½¨è¿¹ï¼ˆå¹³åŠ¨DOFï¼‰å¯¹æ—¶é—´çš„å¾®åˆ†(å¯¼æ•°)ï¼Œå°±æ˜¯åˆšä½“çº¿é€Ÿåº¦ã€‚

åˆšä½“é€Ÿåº¦å†å¯¹æ—¶é—´çš„å¾®åˆ†(å¯¼æ•°)ï¼Œå°±æ˜¯åˆšä½“çº¿åŠ é€Ÿåº¦ã€‚

åŒç†,è½¬åŠ¨DOFå¯¹æ—¶é—´çš„å¾®åˆ†(å¯¼æ•°)ï¼Œå°±æ˜¯åˆšä½“çš„è§’é€Ÿåº¦ã€‚

è§’é€Ÿåº¦å†å¯¹æ—¶é—´çš„å¾®åˆ†(å¯¼æ•°)ï¼Œå°±æ˜¯åˆšä½“è§’åŠ é€Ÿåº¦ã€‚

  

2.  #### æ—‹è½¬çŸ©é˜µ
    

ç‰¹æ€§ï¼š

ç”±äºæ—‹è½¬çŸ©é˜µRé‡Œæ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸¤ä¸ªå‘é‡å†…ç§¯ï¼Œå†…ç§¯æ˜¯å¯ä»¥äº¤æ¢ä½ç½®ä¸”æœ€åç»“æœ**æ•°å€¼ä¸å˜**çš„ã€‚

æ‰€ä»¥æˆ‘ä»¬é€‰æ‹©äº¤æ¢ä½ç½®ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGU1MWQ4NGZkMmU0ODhiNTBkNGM3MzFjZjA2MzE5MzBfVWpoQ1Y2eWpxMlMxbFVFaHI2SHFic1JDMnBXR3VLTkpfVG9rZW46V1YxY2JpTjRSb3ExWFV4QXo1OWNMVkJKbkhjXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

åŸå§‹çš„Ræ˜¯æ¯ä¸€ **åˆ—** éƒ½æ˜¯Bçš„æŸä¸€è½´åœ¨Aç³»çš„åˆ†é‡ã€‚

äº¤æ¢ä½ç½®åçš„Ræ˜¯æ¯ä¸€ **è¡Œ** éƒ½æ˜¯Açš„æŸä¸€è½´åœ¨Bç³»çš„åˆ†é‡ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDZiYTU3ODFjNGJmMDhiMzFkMTk5OGY0ZDkyZDY3MDRfNzB4d3NXbDllZEQ1Z2hFTXlGY2ozSkU2TklYTnZzOGpfVG9rZW46Q3BNeGJxZFk3bzV5OXp4RFI5emN6RnZnbmViXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

ç»“è®ºï¼šæ‰€ä»¥è¯´Rab = Rbaçš„Tã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzBkZWY0MjNmYWU0YjM0YmI2MDQ3NDEyMWZhNDIyNTRfNFhLUWwxbVJYRmp3WUZlZlczZmFOTzhiUW5ZMlFZV29fVG9rZW46RWMxN2JyOFJFb1BISmJ4Q2RqcGNlTnZSbkZoXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGU2YTVhYjRlYjgxYzUyOTI1ODk4MTAyNGM3MDkyNGNfWlkzcWJLeWhxS3VlUUtBMFZ1d2RXVExwbXJ6ZFdlQnJfVG9rZW46THBaVWJaT29Ub2NoejN4MllqbmNrOG9zbjlXXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjBlOWI1MDhmNDRjNmUxY2JjNzM4OTljOThiYzcwNjRfa1lCdjl2d3lUSDRXblM3TGNCQm13NjE0Mk9aNlBMYklfVG9rZW46SjZaNGJJdHNPb29Bb2R4SklYTmNPdUxIbnpoXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

ä»–ä¿©æ˜æ˜¾æ˜¯è½¬ç½®å…³ç³»ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTdiNmMzNzUxZTE0ZWNhMGVjZTFhOTJjYjIwODViMTFfaVkyT0ZuRHNlQWhWZllTNDFvUDFLSzJaZngxQUEyZFFfVG9rZW46SWlwQWJmZmdtb2hORTF4QkpjRmN5RUhlblNnXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

RT\*R=I3ï¼ˆ3\*3å•ä½é˜µï¼‰(æ­£äº¤é˜µorthogonal matrixçš„æ€§è´¨)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjA4M2Q0MjNjNzAwMTRlNmQzNzhmYTkwZGRmNzM5YmZfdWFnRHhtdE5KeGd0Qzc3Y3ZsUXM5ZlNjTFp0aG9aUUpfVG9rZW46WHExdmI2SjF4b05CZjN4a1B4WmNOb2JGbk5nXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmEwMDVkM2M5M2FiNjU4Yjk1MzU1NDIxN2FkZTBjYjVfeUpIOXc3a3pqOFZObXJqc0N4bDBxZ0xWYnB1cHVrdW1fVG9rZW46Wm42dWJWY1FRb3FZd1F4NzhwR2NiTGk4blRkXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

è¿˜æœ‰ä¸ªæ€§è´¨å°±æ˜¯|R|=1

è™½ç„¶æœ‰9ä¸ªæ•°å­—ï¼Œä½†æ˜¯å•Šï¼Œå› ä¸ºæ­£äº¤é˜µçš„æ€§è´¨ï¼Œæ‰€ä»¥æ˜¯æœ‰çº¦æŸæ¡ä»¶çš„ï¼Œè¿™9ä¸ªæ•°å­—é‡Œæœ‰6ä¸ªæ•°å­—æ˜¯éšç€å…¶ä»–æ•°å­—å˜åŒ–è€Œå˜åŒ–çš„ï¼Œæ‰€ä»¥è¿™9ä¸ªæ•°å­—å®é™…ä¸Šåªæœ‰3ä¸ªå‚æ•°å¯ä»¥ä»»æ„é€‰æ‹©ï¼Œä¹Ÿå°±æ˜¯æ—‹è½¬çŸ©é˜µå®é™…ä¸Šåªæœ‰3ä¸ªè‡ªç”±åº¦ã€‚(è½¬åŠ¨DOF)

  

  

æ—‹è½¬çŸ©é˜µçš„ä¸€ä¸ªåŠŸèƒ½å¦‚ä¸‹ï¼š

æ¯”å¦‚è¯´å¦ä¸€ä¸ªåæ ‡ç³»Bç›¸å¯¹äºAåæ ‡ç³»ç»•X,Y,Zè½´å„è‡ª**é€†æ—¶é’ˆ**è½¬åŠ¨thetaåº¦çš„æ—‹è½¬çŸ©é˜µã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDgwOWUwNDU0MDVjYWMwNzA5MDYwNDExMzI0ZDQyOGFfa3dJMUQ2RHZibzYwQmVxSnhyTVBWRDRwMFczWW1YUVRfVG9rZW46S1hxTGJpelBGb0kwVld4Y3BuRWMwem1xbmNnXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTc3YjQzNjYxNTk1ZGQ5NGMxYzVlOWM0N2ViYTNjNThfSFZhWGVOVDdjVUx6a2tLbzNtbmJrQm1GZWIwVnJvckRfVG9rZW46SDFhSWJMV2tEb1FhUTZ4dXlkd2N5eThxbm9uXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

åœ¨ä¸­å›½å¤§é™†æ•™æä¸­ï¼Œå¸¸ç”¨R(X,theta)æ¥ä»£æ›¿å›¾ä¸­çš„RXA(theta)ã€‚å›¾ä¸­è¿™ä¸ªAæŒ‡çš„æ˜¯åŸåæ ‡ç³»ï¼Œå¾—å‡ºæ¥çš„AP\`ä¹Ÿæ˜¯åŸåæ ‡ä¸‹çš„åæ ‡ã€‚

è¿™æ ·çš„è¯ï¼ŒAPå·¦ä¹˜ä¸€ä¸ªRå°±å¾—å‡ºæ¥äº†Pè½¬åŠ¨ååœ¨Aç³»çš„åæ ‡ã€‚ï¼ˆä¸€å®šè¦ä¸ä¸‹é¢è®²çš„æ—‹è½¬åæ ‡å˜æ¢åˆ†æ¸…æ¥šï¼Œå¾ˆå®¹æ˜“æ··æ·†ï¼‰

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2U5OTdkMjQ3ZGNiZmZiY2JlZTg5ZThmMWFlYTY1NzVfMjlVZER1QVVGUXU4d2twdDRQQWZhZDhkOUlSOWtLRExfVG9rZW46QTM5M2J1VjV2b0g5OWZ4Zms1N2NsQWdTbmtoXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

Pé€†æ—¶é’ˆè½¬åŠ¨30åº¦åï¼Œåœ¨**åŸåæ ‡ç³»**ä¸­çš„åæ ‡ä¸º002.

  

  

æ€»ç»“ï¼šæ—‹è½¬çŸ©é˜µä¸»è¦æ˜¯ä¸‰ç§ç”¨æ³•ï¼Œå¦‚ä¸‹å›¾ï¼š

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDI4ZmQxZTk4NjZlOTcwOGNlOTNhMGUzZGQxZGU0NDFfdjlNT3FpcFpIcDJ1NTk0NkhGcHRmQWpqdkJTTFJaaFRfVG9rZW46U0tpYWI1Skp1b0J2YUx4N3JORmMxbm42bjZkXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

  

  

  

3.  #### åæ ‡å˜æ¢
    

1.  å¹³ç§»åæ ‡å˜æ¢
    

  

  

2.  æ—‹è½¬åæ ‡å˜æ¢
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmI3N2ZlN2Y2YzAxODAwMzJhZmZjZDM4OWE5N2U4YzBfelZnQjNXNmM2ZzVLNWt1Mko0dmVSQWhvUUFRa3hNM2lfVG9rZW46U21xamIxNThwbzdEd3h4NlQxSWMwV1BvbnRoXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

è¿™é‡Œçš„APXæ˜¯ä¸ªæ•°å€¼ï¼ŒXAç­‰æ˜¯çŸ¢é‡ï¼ŒåŠ æ³•æ˜¯çŸ¢é‡åŠ æ³•ï¼Œæœ€åå¾—å‡ºæ¥çš„æ˜¯APå‘é‡ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzkyNzdlOGIxNzA2NTdjYmRkN2MzZGU2ZTE2MDUzMjNfVkRRanlLQjlPTTJMMXExa3dhZnBxZmYwdWRsZTJuU0FfVG9rZW46VnFUb2JKR21MbzhMNTZ4TDRuc2MyOEg1bnBoXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

é‡è¦ç»“è®ºå°±æ˜¯AP = ABR\*BP.(æ³¨æ„æ˜¯çŸ©é˜µçš„å·¦ä¹˜)

APå°±æ˜¯Påœ¨Aç³»çš„åæ ‡ã€‚

BPå°±æ˜¯Påœ¨Bç³»çš„åæ ‡ã€‚

ABRå°±æ˜¯Aä¸ºå‚è€ƒåæ ‡ç³»ï¼ŒBç›¸å¯¹äºAçš„æ—‹è½¬çŸ©é˜µã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2I3MjE3MmY5ZGYzZDNlMWRlN2VjNDdlZDE1ZTc5MmRfMzVuaE5TS1ltYWxVRGs0OXlnSmFLd1FKZkhSVWhNT3JfVG9rZW46WWc3WmJLSWNSb3h0aW94V1JaQmNUdnhYblFjXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

  

4.  #### ç‰©ä½“çš„å˜æ¢åŠé€†å˜æ¢
    

ç‰©ä½“å¹³åŠ¨çš„é¡ºåºå¯ä»¥äº’ç›¸é¢ å€’,ä½†æ˜¯ç‰©ä½“è½¬åŠ¨çš„é¡ºåºä¸èƒ½äº’ç›¸é¢ å€’,å¦åˆ™å§¿æ€ä¼šä¸ä¸€æ ·.

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzA5MDVhZDAzMmYyYzgzNzNmMTk2MzA1NTIyOWI0OWZfNml4bExxOTNlUVBZOXlHTDc4OXZzcXc1OElVWVlnN2FfVG9rZW46VFoxcmJGYkpkb1JyUDR4U1RVVGNCOGdZbkhiXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

ä¸»è¦æ˜¯ä¸¤ç§æ‹†è§£æ–¹å¼,ä¸€ä¸ªæ˜¯è®¾ä¸€ä¸ªå›ºå®šçš„åæ ‡ç³»,ä¸€ç›´æŒ‰è¿™ä¸ªåæ ‡ç³»è½¬åŠ¨,

å¦ä¸€ä¸ªæ–¹å¼æ˜¯å‡è®¾ç‰©ä½“çš„åæ ‡ç³».

  

  

  

3.  ### æœºæ¢°è‡‚æè¿°æ–¹å¼
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MWQyN2UwZWM2YmY1NmE5YjAyMzlkNzAzMGQ3NmZiMDRfRlhJWExSNnNRT2tOaTdPZGZqVXJkV1ZwbU94ZGJwWFVfVG9rZW46Q3BOTWJkTFNob2RvYm54MG4wYWNkRjhObkhmXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

Link 0ä¸€èˆ¬ä¹Ÿå«base\_Link

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NDFjMWI2ODNlNmE5MGJhMTBlYWU1Mjg3YjJhOTA2MzBfY3pleXVTblg0bnBpWGJtZ29PbkVXVjIyRjg3SDhXN0pfVG9rZW46VWQ2eWJuQXN3b1RMRVZ4WmZMb2NQaFBGbmxmXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

å…ˆçœ‹å¥½ç›¸å¯¹å…³ç³»ï¼ŒAxis i-1çš„åé¢æ‰æ˜¯Link i - 1(å½“ç„¶å…¶ä»–æè¿°ä¹Ÿæˆç«‹)

  

4.  ### æè¿°å„å…³èŠ‚ä¹‹é—´çš„å…³ç³»
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTk3ZGE2YmUxZjM5YzA0NWYwNWVhM2NiZWE4ZDc1ZTNfaEVDOFpKcVQzZUtCNVRkR0FqQjlPQ0J0NU14bmZYcjJfVG9rZW46WWQxZGJwaG1vb1ZTNGl4Vjd1V2NnSTc0bkQ5XzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

ä¹Ÿå°±æ˜¯å…¬å‚çº¿(å”¯ä¸€è§£)ï¼Œå…¶é•¿åº¦ä¸ºLink Lengthè¿æ†é•¿åº¦

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjljNDBjYzI0ZGRkODVmNWRlMGVlYmVlNjZiZmQ0YzNfTkptOU00SkNqSkRScHdMT3BNRTd2aVU2NU1BMXpIdnVfVG9rZW46UHBhMWJLUE8wb0s4S1h4bG44ZWNZM3FzbkxkXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

ç°åœ¨åªæ˜¯é™åˆ¶ä½äº†ä¸¤ä¸ªè½´çš„è·ç¦»ï¼Œä¸¤ä¸ªè½´è¿˜æ˜¯å¯ä»¥è½¬åŠ¨çš„ï¼Œæ‰€ä»¥éœ€è¦ä¸‹ä¸€ä¸ªå‚æ•°ï¼ŒLink Twistè¿æ†æ‰­è§’ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjlmMTNjNDM5NThhNTQzZjliYjQxOGY2MDEyNmNjZTVfeUVGQkdGUXhwNk5yaHE4RU9GYjNUbXlZTXlHNW1ISkxfVG9rZW46WGF0MGJmT1JKb2NkWWt4dVI4aGNGS3dMbmtkXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

è¿™ä¸ªè§’å°±æ˜¯æ²¿ä¸­å‚çº¿ï¼ŒæŠŠåä¸€ä¸ªè½´çº¿æ²¿ä¸­å‚çº¿å¾€å½“å‰è½´ç§»åŠ¨ï¼Œç„¶åå½¢æˆçš„å¤¹è§’å«Link Twistè¿æ†æ‰­è§’ã€‚

ä¹Ÿå°±æ˜¯è¯´ï¼Œé’ˆå¯¹ç©ºé—´ä¸­ä»»æ„ä¸¤ä¸ªè½¬è½´ï¼Œæˆ‘ä»¬éœ€è¦ä¸¤ä¸ªå‚æ•°æ¥è¿›è¡Œæè¿°ï¼Œä¹Ÿå°±æ˜¯Link Lengthå’ŒLink Twistã€‚

  

å¦‚æœæ˜¯å¤šä¸ªä¸²èµ·æ¥çš„è½¬è½´ï¼Œæˆ‘ä»¬å°±æ— æ³•æ‰¾åˆ°å¯¹åº”å…³ç³»äº†ï¼Œæ¯”å¦‚è¯´

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmE3OTVlNTU1MzM5MDYxMTMzNDBlMWQ5MDdkNzEzYWFfMXZ5WThySWdaUTl5a3RpMzU2M2o0VW5WdURSdFU5ZVFfVG9rZW46WE9zdGJiMWNyb0t5b2d4UEt5SGNnaXpMbmNGXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

ä¸Šé¢è¿™ä¸ªå›¾ï¼Œæˆ‘æ²¡æ³•è¡¨ç¤ºai-1ä¸aiåœ¨è½´çº¿Axis iä¸Šçš„ç›¸å¯¹å…³ç³»ä»¥åŠç›¸å¯¹å§¿æ€æ˜¯ä»€ä¹ˆæ ·å­çš„ã€‚

æ‰€ä»¥è¿˜éœ€è¦å…¶ä»–å‚æ•°ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTBmMDg1ZmFmY2VlNmE4ZjQzOWFkZmY2OGE5YTg2MzVfSnJEY0NLbVdjazFKUlU1WVZKRExWOFVPcExhVWtPN1lfVG9rZW46QVdTMmIzd3RMb0V3TGR4c3JVT2NsczRDbjliXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

é¦–å…ˆè‚¯å®šéœ€è¦ä¸€ä¸ªé•¿åº¦ï¼Œä¸¤ä¸ªå…¬å‚çº¿åœ¨Axis iä¸Šçš„è·ç¦»ï¼Œå«åšLink Offsetï¼Œè¿æ†åè·ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjY0NTFhMDMxNjA5MThkMzYwMzk3Yjg3YmU1MmEwNWRfRHJXNDJyVEJXYWdOQXd6d21Ra0ozOUVZbU1ZZ0tjZkZfVG9rZW46REQwbGJEcmRib255THZ4dEtibmNnT0JibktmXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

ç„¶åè¿˜éœ€è¦ä¸€ä¸ªè§’ï¼ŒJoint Angleè¿æ†å¤¹è§’ï¼Œä¹Ÿå«å…³èŠ‚è§’ã€‚

  

å…¶å®å‘ç°ï¼Œè¿™å››ä¸ªå‚æ•°ï¼Œåªæœ‰ä¸€ä¸ªå‚æ•°æ˜¯å˜åŒ–çš„ï¼Œå…¶ä»–éƒ½æ˜¯å›ºå®šçš„ã€‚

å¦‚æœioint typeæ˜¯revolute jointï¼Œé‚£ä¹ˆthetaiå˜åŒ–ï¼Œå…¶ä»–ä¸å˜ã€‚

å¦‚æœjoint typeæ˜¯prismatic jointï¼Œé‚£ä¹ˆdiå˜åŒ–ï¼Œå…¶ä»–ä¸å˜ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTExMTdjYzAzZGUxNjY1ZDlmZDhkNWExZmVkZGVkZjVfNkZoc0dxQ3UzUEV6M1ZLM2wybWw1eU5HSDJXWjIxTzRfVG9rZW46TGdWOGIwd013b3VBc294U282RGNoVFJmbnloXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

æè¿°ä¸¤ä¸ªè½´éœ€è¦2ä¸ªå‚æ•°ï¼Œè¿æ†é•¿åº¦ä¸è¿æ†æ‰­è§’ã€‚

æè¿°å¤šä¸ªè½´ä¸²åœ¨ä¸€èµ·éœ€è¦4ä¸ªå‚æ•°(æ¯ä¸¤ä¸¤æ†ä»¶éƒ½éœ€è¦4ä¸ªå‚æ•°)ï¼Œè¿æ†é•¿åº¦Link Lengthï¼Œè¿æ†æ‰­è§’Link Twistï¼Œè¿æ†åè·Link Offsetï¼Œè¿æ†å¤¹è§’Joint Angleã€‚

  

5.  ### åœ¨jointä¸Šå»ºç«‹frame
    

å’±ä»¬ä¸€èˆ¬æŠŠZæ–¹å‘å®šä¹‰æˆå’Œè½¬è½´çš„æ–¹å‘ä¸€æ ·ï¼ŒZæœä¸Šæˆ–æœä¸‹æ˜¯çœ‹æ€ä¹ˆæœå‘ï¼Œè¿™ä¸¤ä¸ªè½´çš„å¤¹è§’æœ€å°ï¼Œè¿™æ ·å°±èƒ½å¤Ÿç¡®å®šZçš„æ–¹å‘äº†ã€‚

Xiçš„æ–¹å‘æ˜¯æ²¿ç€aiçš„æ–¹å‘ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmYzOTBlZWRiNmQwYWUzNDdhOGUyNWIyODcyZDZkYzZfTWppTTJtazV0SWxleTJScUtvMUF4REptWVh1T01wNlJfVG9rZW46QW1KWWJuTmcxb3hkOGx4aHNxR2NjVFFkbnFmXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjE1MTg3MWQ0OTM5MmZkZmJjZTYxNWM4NTM2NjEzNTlfcHdpcEVPOVRiODdvMWdxd0VFak9tbnpDbWdjV2Jlb0JfVG9rZW46UDQ0MGJEQU1Rb25jR2d4WTNvTGN3UzVGbkloXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

Xiä¸Zi+1å’ŒZiéƒ½å‚ç›´ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGU5MDQ4ZGFmY2QzY2Y4M2RjZmNlMTNhOGE3ZmI4OGZfdFFydXVBd0JzRlN0a1o3UDNPMUlzMXFhT0lHY2M0ckxfVG9rZW46VFFoRmJpRjNDb0xoR0t4ZU5xbmMwSk41bmlXXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NWY2YmU1OGM2YzJjYWViMTg4YmUyZjIzNDhmNmY2ZDBfQnRYMmN5WW1VQW1xRTE3QlFCSEVlblRQaE1OQzlMdnRfVG9rZW46VDdUdGJTekxFb053cEJ4dUhUbWNRS3lJbkVUXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

å³æ‰‹å®šåˆ™ï¼Œåˆ¤æ–­Yæ–¹å‘ã€‚

åŸç‚¹æ˜¯Zå’ŒXçš„äº¤ç‚¹ã€‚

  

  

è‹¥æ˜¯å»ºç«‹base\_link(link0)ä¸link1çš„è¯ï¼Œåˆ™æ˜¯ç‰¹æ®Šæƒ…å†µã€‚ï¼ˆbase\_linkæ˜¯immobileä¸åŠ¨çš„ï¼‰

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2M2MDE3MzNkMmE4ZDAxNGRjMTQxYzkyYTM2YzAzYTJfcWh5NGVsdXhTQmRBSEV5ZXZGVTVCNWJlR2FuRkd6bXFfVG9rZW46TGVRbmJDb2hXb1hNM0J4VVh2amNLOHRjbmNmXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

frame0å’Œframe1é‡å (é‡åˆ)ã€‚é€šå¸¸ï¼Œæ¯”å¦‚è¯´æ˜¯ä¸ªæ—‹è½¬å…³èŠ‚ï¼Œè™½ç„¶è§„å®šthetaæ˜¯arbitraryä»»æ„çš„ï¼Œä½†æ˜¯æˆ‘æŠŠthetaå›ºå®šæˆ0ï¼Œç„¶åè®©frame0å’Œframe1(theta

\= 0)é‡åˆã€‚å¦‚æœæ˜¯å¹³åŠ¨å…³èŠ‚ï¼Œé‚£ä¹ˆåŒç†ä¹Ÿå–d=0çš„æ—¶å€™çš„frame1ã€‚æ³¨æ„ï¼Œè¿™é‡Œæ˜¯é‡å é‡åˆï¼Œå¹¶ä¸æ˜¯å½¢çŠ¶ç›¸åŒï¼Œè€Œæ˜¯å®Œå…¨é‡å çš„åæ ‡ç³»ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MjQ4MzIzMDlmZjc5MDg1NWNmNGE1ODBhMTVjZDg3MDBfbFJGU29yZUQyREd1bGZLaGFtWUIwcWN4UVVkQ2pJT0JfVG9rZW46SGd0MGJlRXVQb2hCV2J4bGJSN2NBSHNBblVlXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

æœ€åä¸€ä¸ªæ†ä»¶ï¼Œä¹Ÿå·®ä¸å¤šï¼Œå› ä¸ºXnå’ŒXn-1éƒ½è¦å‚ç›´äºAxis n(Zn)ï¼Œæ‰€ä»¥æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯è®©Xnä¸Xn-1æ–¹å‘ä¸€è‡´ã€‚

Xnå–Xn-1çš„æ–¹å‘ã€‚ä¹Ÿå°±æ˜¯framenå’Œframen-1æ˜¯å»¶é•¿çš„ã€‚

  

**ä¸‹é¢æ˜¯é‡ç‚¹ä¸­çš„é‡ç‚¹ï¼š(æœ‰å¥½å‡ ç§æ–¹æ³•åˆ¤æ–­ï¼Œå¦‚æœ‰é”™è¯¯è¯·è®¨è®ºåä¿®æ”¹)**

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTk5Njc5NTczMDY2ZDU3MjEzOTlkMDAxYjcyNTMyY2JfVnZEVHVnb1Y5VXd1bnhkSVJnbmpEMzBJVE9FV3I5UlFfVG9rZW46QU9VUmJERmpVb3FSY1F4clM5OWNHTDlVbnZiXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

éœ€è¦çŸ¥é“çš„å¸¸è¯†ï¼š

1.  ä¸€èˆ¬è¿æ†æ‰­è§’æŒ‰é€†æ—¶é’ˆæ˜¯æ­£å€¼ã€‚
    
2.  æˆ‘ä»¬å¸¸è¯´çš„è½¬å‘ï¼Œæ˜¯ä»é€†ç€çš„æ–¹å‘å»çœ‹ï¼Œä¹Ÿå°±æ˜¯è®©ç®­å¤´æŒ‡å‘çœ¼ç›çš„æ–¹å‘å»çœ‹çš„ã€‚
    
3.  ä»è½´çš„é€†æ–¹å‘å»çœ‹å’Œé¡ºç€æ–¹å‘å»çœ‹è½¬å‘ï¼Œæ˜¯å®Œå…¨ç›¸åçš„æ–¹å‘ï¼Œä½†æ˜¯åœ¨å¹³é¢ä¸Šå®¹æ˜“äº§ç”Ÿè§†è§‰é”™è§‰ï¼Œéš¾ä»¥ç†è§£ã€‚å¯ä»¥æ‹¿æ”¯ç¬”æˆ–è€…ç”µæœºï¼Œè½¬åŠ¨ä¸€ä¸‹è¯•è¯•ã€‚
    

  

â‘ alphai-1æ˜¯æ­£å€¼è¿˜æ˜¯è´Ÿå€¼ï¼Œè¦çœ‹Zi-1åˆ°Ziçš„è§’æ˜¯é¡ºæ—¶é’ˆè¿˜æ˜¯é€†æ—¶é’ˆï¼Œä¼¸å‡ºå³æ‰‹ï¼Œè®©æ‹‡æŒ‡æ²¿Xi-1çš„æ–¹å‘ï¼Œå¦‚æœalphai-1é¡ºç€å››æŒ‡æ–¹å‘åˆ™ä¸ºé€†æ—¶é’ˆï¼Œæ­£å€¼ï¼Œåä¹‹ä¸ºé¡ºæ—¶é’ˆï¼Œè´Ÿå€¼ã€‚

æ‰€ä»¥å¦‚å›¾ï¼Œalphai-1æ˜¯é€†æ—¶é’ˆï¼Œæ‰€ä»¥æ˜¯æ­£å€¼ã€‚

  

â‘¡ai-1çš„é•¿åº¦å› ä¸ºæ˜¯é•¿åº¦ï¼Œæ‰€ä»¥æ°¸è¿œæ˜¯æ­£å€¼ï¼Œç„¶åå€¼ä¸ºZè½´é—´çš„ç›¸å¯¹è·ç¦»ã€‚

  

â‘¢thetaiçš„è§’åº¦ä¹ŸåŸºæœ¬åŒç†ï¼Œå°†å³æ‰‹å¤§æ‹‡æŒ‡æ²¿ç€Ziçš„æ–¹å‘ï¼Œè‹¥thetaié¡ºç€å››æŒ‡æ–¹å‘åˆ™ä¸ºé€†æ—¶é’ˆï¼Œé€†ç€åˆ™ä¸ºé¡ºæ—¶é’ˆã€‚

  

â‘£diçš„å¤§å°æ–¹å‘è¦çœ‹ä»ai-1æ²¿ç€ziçš„æ–¹å‘åˆ°aiï¼Œåˆ™æ˜¯æ­£å€¼ï¼Œåä¹‹ä¸ºè´Ÿå€¼ï¼Œå¤§å°å³ä¸ºè·ç¦»ã€‚

  

6.  ### Link Transformations
    

1.  #### ç†è®º
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzJmYTg2MDlhZTkxYjUwM2VlMzQ4MmY3ODEwYTE2N2FfVUpYWlpQcDF3NEs1a1ZKdkVxVDRkTXlWOExoNlRKZ0pfVG9rZW46VGZhSGJaSm9Yb2Flb0d4a2c2bWNqTk53bmVoXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

æˆ‘ä»¬ä¸¤ä¸ªå…³èŠ‚éƒ½æœ‰ä¿©è½´ï¼Œä¸€ä¸ªAxisi-1ä¸€ä¸ªæ˜¯Axisiï¼Œæˆ‘ä»¬ä¹Ÿæœ‰ä¿©frameï¼Œä¸€ä¸ªæ˜¯framei-1ä¸€ä¸ªæ˜¯frameiã€‚

æˆ‘ä»¬éœ€è¦æ‰¾åˆ°ä¸¤ä¸ªframeä¹‹é—´çš„å…³ç³»å¼æ˜¯ä»€ä¹ˆï¼Œä¹Ÿå°±æ˜¯æ‰¾åˆ°å˜æ¢çŸ©é˜µTransformation Matrixã€‚

ç„¶åå°†Trans Matrixé‡åŒ–å³å¯ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDVjZGNhYmQ0YzAxOWRiYmUxOWEwZDVjN2M5MGMxOTlfUzh2bEhvVlJ1SWhsQVNIWFJTdXRpNkV3U2JZbVNYSWJfVG9rZW46SnNJSmI4cEFGb2tBQ1p4ZmdmaWN6UUMxbjdlXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

å‡è®¾è¯´æœ‰ä¸€ä¸ªç‚¹Pï¼Œä»–åœ¨frame iä¸‹çš„è¡¨è¾¾æ˜¯Piï¼Œå¦‚æœæˆ‘ä»¬æ‰¾åˆ°äº†Ti-1 içš„çŸ©é˜µï¼Œé‚£ä¹ˆå°±æœ‰åŠæ³•ï¼Œè·å¾—Påœ¨frame i-1ä¸‹çš„è¡¨è¾¾äº†ã€‚

æ‰€ä»¥æˆ‘ä»¬ç°åœ¨éœ€è¦ï¼Œç”¨åˆšæ‰æ‰¾åˆ°çš„å››ä¸ªå‚æ•°ï¼Œè½¬åŒ–æˆæˆ‘ä»¬çš„Trans Matrixã€‚

è¿™å››ä¸ªå‚æ•°ï¼Œä¹Ÿå°±æ˜¯ai-1ï¼Œalphai-1ï¼Œdiå’Œthetaiï¼Œè¶³ä»¥å¯ä»¥è¡¨è¾¾framei-1åˆ°frameiäº†ã€‚

â‘ é¦–å…ˆåœ¨Axis i-1ä¸Šï¼Œ

å…ˆæè¿°alphaï¼Œå°±æŠŠframei-1çš„Zi-1æ—‹è½¬åˆ°å·®ä¸å¤šZiçš„æ–¹å‘ï¼Œç”ŸæˆFrameRï¼ˆåªæ—‹è½¬Zï¼ŒXä¸åŠ¨ï¼Œç„¶åå³æ‰‹å®šåˆ™åˆ¤æ–­Yï¼‰

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NGU5MzYyYjdlOWJlNGYzMGI3NzVjZjQzYjZjM2RjZDNfd0Uwd3JPcUtXcUpwR2NmdDVPdml6Vlo0TURiZzBzZFNfVG9rZW46SjQ2VGJiQXkyb1huMWR4eVF2N2NwWDFTbjNiXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

â‘¡ç„¶åæè¿°aï¼Œ

å°±æŠŠFrameRæ²¿ç€ai-1çš„æ–¹å‘ç§»åŠ¨åˆ°Ziä¸Šï¼Œ

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTQyYmNhZmMwOGNlOGZjZjNhNjA4NzdkNGY4Y2UzNjVfajVQVEFvQkxaT2l2N1lRSnRnZ1FnNnptSTl0ZE9uTGRfVG9rZW46T1VCeWJnTDFFb2ZmSkR4elN6cGNhQlJPbktnXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

â‘¢å†æè¿°theta

æˆ‘ä»¬è½¬åŠ¨frameRä¸­çš„ZRï¼Œä½¿å…¶ä¸aiæ–¹å‘ç›¸åŒï¼Œç”ŸæˆframePï¼ˆXåŠ¨ï¼ŒZä¸åŠ¨ï¼Œå³æ‰‹å®šåˆ™åˆ¤æ–­Yï¼‰

è¿™æ ·æå®Œä¹‹åï¼ŒXpçš„æ–¹å‘ä¸Xiæ˜¯ç›¸åŒçš„ï¼ŒZpçš„æ–¹å‘ä¹Ÿä¸Ziç›¸åŒã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTMzN2QyZjBiOTkxOWIyZTU2NjNhMTIxYWE5ZmQxMzNfUTdhZkhMckh3RVRaSjZaYTFKN0tWUndrcnJFNFJqSmZfVG9rZW46VWJxTGJHTnRZbzNydlp4cWpXQWNDVWpzbndnXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

â‘£å†æè¿°dï¼Œä¹Ÿå°±æ˜¯æŠŠFramePå¾€ä¸Šæ‹‰ï¼Œæœ€åä¼šä¸Frameié‡åˆã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzZlNGI3ZTNkYjhlMjUzMTkxZjM1OWE0YTMyZGEyNjFfaEwwYWd5bTV6ZGpybnZjU25aREtmelV6MVhVOTJDMnRfVG9rZW46UVVsUWI0eGVLb2taQzZ4bU15Q2NyYTZzbmdlXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

ä¹Ÿå°±æ˜¯ä»Framei - 1åˆ°Frame Rï¼Œç„¶åå†åˆ°Frame Qï¼Œç„¶åå†åˆ°Frame Pï¼Œæœ€ååˆ°Frame iã€‚ä¸€å…±å››æ¬¡è½¬åŒ–ã€‚

åˆšæ‰æˆ‘ä»¬æ¼”ç¤ºçš„æ˜¯ä»Pi-1åˆ°Piï¼Œç°åœ¨æˆ‘ä»¬è¦æ±‚çš„æ˜¯ä»æˆ‘ä»¬çš„Piè¦åˆ°Pi-1ï¼Œé‚£ä¹ˆå°±æ˜¯å€’ç€å·¦ä¹˜ï¼Œå…ˆä¹˜Tp iæ¥ç€å¾€ä¸‹ä»¥æ­¤ç±»æ¨ã€‚

  

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODUzMzE4MmU1NWE5YjZlMDYxYzJjZWE2M2VlMTRlZTBfcnd0ZjVQQ0wwQmg4QlFmTTJXWUNPQnlsY1JUNUsxcXJfVG9rZW46THJ6NGJXTkdUb1RpM094U0RaMGNMWW9VbmZiXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

ä»è¿æ†iåˆ°è¿æ†i-1çš„åæ ‡ç³»é—´çš„é½æ¬¡å˜æ¢çŸ©é˜µT i-1 i=Rot(Xï¼Œaplhai-1)Trans(ai-1,0,0)Rot(Z,thetai)Trans(0,0,di)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTBjNjNmMGNmY2ZjYTkyM2U0ZDRlMGZkZjAzNDZmMmFfZ3ZzcjBrN0cwek9sTW9Ub3FvWVlad2VtQmVRUnFVMDhfVG9rZW46SDV2cmI1SkRFb1N0Mkx4OElQcWN0b1ZvblpnXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

å·¦ä¸Šè§’æ˜¯3X3çš„æ—‹è½¬çŸ©é˜µï¼Œæ‰€ä»¥åªæœ‰è§’åº¦thetaå’Œalphaå‚æ•°ï¼Œ

å³ä¸Šè§’3X1çš„çŸ©é˜µï¼Œä¹Ÿå°±æ˜¯frame içš„åŸç‚¹ç›¸å¯¹äºframe i - 1çš„åŸç‚¹çš„å‘é‡ã€‚ç„¶åæ˜¯ä»frame i - 1å»çœ‹ã€‚æ‰€ä»¥ä»–æ˜¯é•¿åº¦ä¸è§’åº¦çš„å¤åˆã€‚

æœ€åä¸€è¡Œçš„1X4çš„çŸ©é˜µï¼Œæ˜¯0001æ˜¯å›ºå®šæ•°ä¸åŠ¨çš„ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjRkODUzZTlkZjRmNThhMGQwMjFhMGRjYjg2MjZlYmRfRU5TeTQ3MW1sUkRrbExCaXcyblNGVWw0N210UmhDenlfVG9rZW46QUxHNmJHSXFQb2tEQ254OFZYVGNuV0pEbkFmXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

å¯¹äºè¿ç»­çš„æ†ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ä»base\_linkä¸€ç›´ç®—åˆ°linkxï¼Œxæƒ³æ˜¯å‡ å°±æ˜¯å‡ ã€‚

æ¯”å¦‚è¯´ï¼Œç°åœ¨æœ‰ä¸‰ä¸ªæ†ä»¶ï¼Œæˆ‘ä»¬æ‰¾åˆ°T23ï¼ˆ3å¯¹2çš„ï¼‰ï¼ŒT12ï¼ˆ1å¯¹2çš„ï¼‰T01ï¼ˆåœ°å¯¹1çš„ï¼‰ï¼Œå°±å¯ä»¥æ‰¾åˆ°T03ï¼ˆåœ°å¯¹3çš„ï¼‰

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2U5MzAyMDZmZTM3ZWJhNDIxNzgxY2IwMjU0MzI4MzlfeW9jSGpXRUszbHZxZnlLWkp6WDZOZnd1azVHQXVQZ2dfVG9rZW46RHlSZGJ5Nm9ab0VpNU54NHpDTWN6YlVXbkNoXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

2.  #### Example
    

1.  ##### å¹³é¢RRRç±»å‹
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGY3OGJkNjU3ZWYyMmY3OTU2NGJlOTYzOWQ3ZmY5NmJfZTd2MlltdFZXZElHTVlwa1ZLRThDUll1MHRSTm9oRXhfVG9rZW46UDJ3c2IzQlpib280dnR4bXVnYmMwSTNSbnpiXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

â‘ å…ˆæ‰¾åˆ°å…³èŠ‚è½¬è½´Joint Axes

ä¸‰ä¸ªè½¬è½´æ˜¯ä¸‰ä¸ªçº¢ç‚¹ï¼Œæ˜¯ç‚¹çš„è¯ï¼Œä¹Ÿå°±æ˜¯å‡ºçº¸é¢çš„æ–¹å‘ã€‚ï¼ˆå› ä¸ºï¼Œä»–æ˜¯ä¸ªå¹³é¢çš„ï¼Œæ‰€ä»¥è¯´ï¼Œæ¯ä¸ªZè½´ä¹‹é—´çš„è§’åº¦éƒ½æ˜¯0ï¼Œæ‰€ä»¥è¯´Link Twist Alphaæ˜¯0ï¼Œæ‰€ä»¥Zçš„æ–¹å‘éƒ½éšä¾¿å–ï¼Œä½†æ˜¯å’±ä»¬è¿™é‡Œï¼Œå‡è®¾å…³èŠ‚éƒ½æ˜¯é€†æ—¶é’ˆæ—‹è½¬ï¼ŒæŒ‰å³æ‰‹èºæ—‹å®šåˆ™æ¥çœ‹ï¼ŒZå°±éƒ½æœä¸Šï¼‰

â‘¡å†æ‰¾åˆ°å…¬å‚çº¿Common Perpendiculars

ä½†æ˜¯ç”±äºAxiséƒ½æ˜¯äº’ç›¸å¹³è¡Œçš„ï¼Œæ‰€ä»¥è¯´ï¼Œè¿™ä¸ªå…¬å‚çº¿æœ‰æ— æ•°å¤šæ¡ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±åœ¨ä¸€ä¸ªå¹³é¢å†…è¡¨è¾¾å³å¯ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Zjc5NzVjMDc4YWJjODg2ZjZhMmM2MzhlMTA2OTgwMGNfWUJBUDRuZmVuWnRBanBaYUlsSjFXVkdURm41RlNSTU1fVG9rZW46T3lIZmJtNmtQbzlObkN4djJLNWNqWFo5bjRiXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

â‘¢ä¸‹ä¸€æ­¥å®šä¹‰Ziå‘é‡ï¼ˆZæ–¹å‘ä¸è½¬è½´æ–¹å‘ç›¸åŒæ‰€ä»¥ä¹Ÿæ˜¯å‘ä¸Šã€‚ï¼‰

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTE1ZjgwYzlmMDdiZTQ2YjMwOTFmYzVkZDVjYjFkODhfSVR6c2ZGMWlFdElCazY0NGJlV2I2Z1dvVVRHTGhVUFRfVG9rZW46UzJib2J4Ylhob1lLYmx4TEd2d2NIZjI1bnBkXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

â‘£ç„¶ååˆ¤æ–­ä¸­é—´çš„Xiå‘é‡

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTczZDFhZjFiNDAxZWRiNGE0MDdhNTQyZjczNGM5YWNfbWRFTEZGSVdpeGx0eWVUNVNBTm01RTRMZ2lSbk1obkpfVG9rZW46SXhFMGI0aE5Qb05YRWV4MFVLeGNSVlFmbnFlXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

â‘¤ç„¶ååˆ¤æ–­ä¸­é—´çš„Yiå‘é‡

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODVmMDVmMThkNmYxZDFjMGIzNDk4NmJkMzIyMDJiNzBfUUlFRWN3Mk1ndjdnWFoyTjlPZFdKeUtEWXp6cTlQbnBfVG9rZW46QjJ4bGJjWHR2b2o5N0l4ZTdDSWNSenhXbkJiXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

â‘¥ç„¶ååˆ¤æ–­å¤´å’Œå°¾ï¼Œä¹Ÿå°±æ˜¯frame 0 å’Œframe n

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGI2MTVhNTgwMzBmYjZlN2NiZDMzODc2MjMwMGVhMTlfMEUyQmUxeEdVaGVoRGxrc2EzcWhxeVJFRjVsMHdiY0dfVG9rZW46SVZKaGJjeWQzb04zN2h4YjY3TWNwcm1abkxiXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

å…¶å®ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠframe0å’Œframe1å»ºçš„å®Œå…¨é‡åˆï¼Œå°±æ˜¯è®©alphaå’Œthetaéƒ½ä¸º0ï¼Œå¦‚å›¾å¹¶æ²¡æœ‰é‡åˆï¼Œæ‰€ä»¥æœ‰thetaå¤§å°ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjhkN2U2YjM4M2FlMmU0MGU5ZjlhYTk4ODBhNjU0NTBfVzVTN00zVTVVaXRVbkdQM2g4UWRNWHZqcHdQSTNvZVNfVG9rZW46Tml6cmJvdFUybzNuMm94SXl2aWN5Z0JhbmpoXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

æœ€åä¸€ä¸ªæ†ä»¶ä¹Ÿä¸€æ ·ï¼Œå»ºè®®è®©X3çš„æ–¹å‘å’ŒX2æ–¹å‘é‡åˆï¼Œè¿™æ ·çš„è¯ï¼Œthetaå’Œalphaéƒ½æ˜¯0ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzRiOTAyNjdlZWExNjY2OTMzZDk5ZDExMGNmY2M4MTdfVFVpbGlDUUhjeTRVOE5IOXVYV3NGdGZDRDlVcFp2Ym9fVG9rZW46UXpJNGJ0N0xSb1RoZGV4dUE2V2N6bUJCbnFoXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmFiYTc0N2JjMWYxZDE0ZDExN2Q4M2M0ZmUwMjk3NTBfdkNQeHRHcUs4WU5RbVlrWFRzY1pCOE15eFNZTVJYMnlfVG9rZW46QzFKWGI5ellvb0lhTUJ4TGY3eWNzbE1wbjRnXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

å› ä¸ºæ¯ä¸ªè½´éƒ½æ˜¯å¹³è¡Œçš„ï¼Œæ‰€ä»¥alphaæ˜¯0ï¼Œç”±äºaiéƒ½æ˜¯åŒå¹³é¢çš„ï¼Œæ‰€ä»¥dä¹Ÿä¸º0.

å› ä¸ºframe0å’Œframe1é‡åˆï¼Œæ‰€ä»¥a0 = 0ï¼Œç„¶åa1 = L1ï¼Œa2 = L2

ç”±äºå…¨æ˜¯RRRï¼Œæ‰€ä»¥ï¼Œthetaéƒ½æ˜¯å˜åŒ–çš„è§’ã€‚

Pç‚¹æœ«ç«¯æ‰§è¡Œå™¨ï¼Œä¹Ÿå¯ä»¥ç®—å‡ºï¼Œæ²¿X3æ–¹å‘èµ°ï¼Œè·å¾—Påœ¨frame nçš„è¡¨è¾¾ï¼Œç„¶åå°±å¯ä»¥æ¨å‡ºPåœ¨frame 0ä¸­çš„è¡¨è¾¾äº†ã€‚

å¦‚å›¾çš„ï¼ŒPç‚¹åœ¨Frame3é‡Œçš„åæ ‡æ˜¯ï¼ˆL3ï¼Œ0ï¼Œ0ï¼‰

  

2.  ##### RPRç±»å‹
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ODUxY2ZhMzVkOGE2MTUxMmNiNTc5NzhhNThkOTM5NGRfWlZMUU1FaUh5WHpOWUk2ZjRpeFQ1SGJqY0tqUk9RaDhfVG9rZW46UmFkc2I0N2dIbzQ2cGh4eGtTV2NaTzdNbnplXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

â‘ å…ˆæ‰¾åˆ°è½¬è½´

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=N2UwNzEyMGU4ZDI1OTdjMmFhZDY2YjhmZGZkOTYyZGVfVjZkazAzV3pmRHNoem56OWo5cHQ4allHcjY0UmE3VmNfVG9rZW46S2pwRWI4MHJtb0daS2V4a1ZxSWNyM1N1bjhnXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

æŒ‰å³æ‰‹èºæ—‹æ¥ã€‚

â‘¡æ‰¾å…¬å‚çº¿

å› ä¸ºframe1çš„Z1å’Œframe2çš„Z2ç›¸äº¤ï¼Œæ‰€ä»¥ï¼Œæ²¡æœ‰å…¬å‚çº¿ã€‚

frame2çš„Z2å’Œframe3çš„Z3é‡åˆï¼Œæ‰€ä»¥ä¹Ÿæ²¡æœ‰å…¬å‚çº¿ã€‚

ä¹Ÿå°±æ˜¯è¯´aå…¨æ˜¯0.

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2E1MWEyZmVlMDI4OTM0YjZjNDA0YTI4ZGQyNzY3MjFfekdEWUtkRnU0ZmxBVW45OGd5bHgxMllTSlpleXZJZndfVG9rZW46VzFTZ2JPOFZnbzNXTDF4R2NPb2N2NzY2bmtoXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

â‘¢å»ºç«‹Ziå‘é‡

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmExODZiOWQ1NGI4NmIyYzY2YTZiMjUxZDM5ZjQ2YzZfbTdkTDFmRGxFSVRyRWlqckEzZHYzWVVCREllc3cyOFZfVG9rZW46UUlsdGJ1bzZqb0NGckZ4NUx4S2NYT1hGbmVoXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

Ziæ–¹å‘ä¸è½¬è½´æ–¹å‘ç›¸åŒã€‚

â‘£Xiçš„å‘é‡

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzE2MzgwNGEwNDQwOTUyN2M5MTg1YzZhYjE3ZDVjYjNfdW9jejJXdU95RGVkWTBiTGxTQXowYkZqeHdSOUZjRVFfVG9rZW46QkFKcmJQM2U5b09ROGR4aG1nQWNnRjUxblFkXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

å½“Z1å’ŒZ2ç›¸äº¤æ—¶ï¼Œæˆ‘ä»¬æŒ‘Xçš„æ–¹å‘å°±æŒ‘å’ŒZ1å’ŒZ2éƒ½å‚ç›´çš„ï¼Œæœ‰ä¸¤ç§æ–¹æ¡ˆï¼Œè¦ä¹ˆXå¾€å‰ï¼Œè¦ä¹ˆå¾€åï¼Œå¦‚å›¾æ˜¯å¾€åçš„ã€‚

X1å’ŒX2å¿…é¡»å¹³è¡Œï¼Œå› ä¸ºæ˜¯ä¸ªPç±»å‹çš„å…³èŠ‚

â‘¤Yè½´

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGRiYjExN2ExY2JhNjEyODkzNWJjNWY4MmZkNzNiYzVfUzdvdXFqcHNyNHJmMm1SZmxRQjFOU29pcmw4aXc5NVpfVG9rZW46RTd1RGJROW5Rb1F5VjF4aE1laWNlbXJkbnpHXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

â‘¥Frame 0å’Œframe n

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGRhYWU5MDhmNDU2YWUzMmI4MThmNDE5Y2M1ZjY1NGVfY3UxSGc0ZVFVUnZ2MnVNTDQ2eEVPQ0JRSmliRUdscjRfVG9rZW46VjR5Y2J1TWpxbzRkM3l4QUQ3R2NLaGNObnBxXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

frame 0 å’Œframe1é‡åˆ

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTE2NTQ3MjgyNmVhOTU2MjY2OTAwMTdiYzdiNDNjODhfejgwYVE4Wk56cUhQRVJEdVYzYkZqSGgzaVU3cjZwaWlfVG9rZW46SENIV2JXTmI2b3l6VGl4bzYyUWNPZ0JwbjNlXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

è®©X3æ–¹å‘ä¸X2æ–¹å‘ç›¸åŒ

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzM1NWExYzIyNmE3NmNkZjI5ZDEyY2I5NmRkMDhmNDFfOTV0U1c3RkJFbDZ4Wm00UHd2eHhaSlpjWHVlZjg2c2JfVG9rZW46RFNIamJSTVpJb1NaWlF4RkZSc2M0RDhEblFmXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

å¦‚å›¾ï¼Œé©±åŠ¨çš„å…³èŠ‚å‚æ•°åˆ†åˆ«æ˜¯theta1ï¼Œd2ï¼Œtheta3

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTE2MjA4ZmMxMzE4NmMyNDM0MzE2OWE3ZGM2YTg3ZmNfcXppM2pSUVI2c3hvYlFYMTJBS3ExSW9UdzRpZ3NBcTlfVG9rZW46UjNaa2I1dkRzb1VscEZ4M0dYVmMwWDBwbmllXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

ç”±äºframe0å’Œframe1é‡åˆï¼Œé‚£ä¹ˆalpha0 = 0ï¼Œ

ä»Z1åˆ°Z2çš„è§’ï¼Œä¼¸å³æ‰‹å¤§æ‹‡æŒ‡æŒ‡å‘X1ï¼Œç„¶åå››æŒ‡ä¸Z1åˆ°Z2æ–¹å‘ç›¸åŒï¼Œæ‰€ä»¥æ˜¯é€†æ—¶é’ˆï¼Œä¸ºæ­£å€¼ï¼Œæ‰€ä»¥æ˜¯90åº¦ã€‚

ç„¶åfame2åˆ°frame3ï¼ŒZå…±çº¿ï¼Œæ‰€ä»¥alpha2=0

  

ç„¶åç”±äºZiæœ‰çš„ç›¸äº¤ï¼Œæœ‰çš„å…±çº¿ï¼Œæ‰€ä»¥aå…¨æ˜¯0

  

ç„¶åd1æ˜¯0ï¼Œå› ä¸ºframe0å’Œframe1é‡åˆï¼Œ

d2æ˜¯d2ï¼Œd3æ˜¯L2ï¼ˆdæ˜¯Xåœ¨Axisä¸Šçš„è·ç¦»ï¼‰

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTljZTZlYjBmYWJjNGRhZDE3NjZiNjNkMzVlZTg5NTdfNlJmb1FmUzFzV0ZIOE0wZldQcVdxQjlheHlqRzdiVzFfVG9rZW46U2xOSGI4c21Yb25Fdll4MlR6cmNCY2Y0bmlmXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

Pç‚¹åœ¨Frame3ä¸Šçš„åæ ‡ä¸ºï¼ˆ0ï¼Œ0ï¼ŒL3ï¼‰

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTgzZmY5OGVjOTQ4ZmIyYzM3OTc4MWFmYzRiZjIzZjFfU21RR2UySm5sbmJYWWFmdVhLcUhWZ3dRWEhiM0NIOXNfVG9rZW46TDVwZWIxTVowb3F0cFp4bm85VmNNY2NXbnZoXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

å…¶å®Zæ–¹å‘æœ‰ä¿©é€‰æ‹©ï¼ŒXä¹Ÿæœ‰ä¿©é€‰æ‹©ï¼Œä¸€å…±å››ç§é€‰æ‹©ï¼Œé€‰æ‹©è‡ªå·±å¥½ç†è§£ï¼Œå¥½è®¡ç®—çš„æ–¹æ¡ˆå³å¯ã€‚

  

3.  ##### ä¸­å›½å°ç§¯ç”µæ™¶åœ†æœºå™¨äºº(PRRRç±»å‹4ä¸ªè‡ªç”±åº¦)
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWJkMWNiY2YyNGE2YTcyYjlmNDdhYWIzMWZkNTliYWNfa09XNERjZzBhQnRTN1BUNDJEaXNHT1FJeU1aaEZrbThfVG9rZW46TkdQdWJQajdvb1lkbW54U05ScWNWbk1MbmZmXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDllZTQzMzdiNzFlYWUyYTIyYjFkNGVmODMzMzg5NzdfYVVYa2pKb3dLT0lNeGJCODlCOEpDUmZGQTlheVlYNGtfVG9rZW46SkhMMGJoZkREbzBMbWl4SWJDS2M5RFc4blNlXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjFkZTIyZjZlNzU3NTQzM2Q1NWMzZjJhOTJkMjg1MzlfMEJubTN0czAxNHJ1Q3Y2alZ6dDNNQmhtbTA1NmpNQXVfVG9rZW46V1pEeWJPZExvb2ZmcUF4Mm8xSGNiMjdKbjdnXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

4.  ##### SCARAæœºå™¨äºº(RRRPç±»å‹4ä¸ªè‡ªç”±åº¦)
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmI2YjdjYzJlYTY4MzBjMTVlYjk0MmMxMWMyNzJkN2JfSThDUDBENTdMcmNveTM0clY1eVp6S2FmbnJRcmdJTFVfVG9rZW46RXZvUGJteXdVb3NPSUp4ZVZHeWNNamFObmFkXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

è¯¥æœºå™¨äººæœ€åä¸€ä¸ªå…³èŠ‚æ˜¯æ—¢å¯ä»¥Råˆå¯ä»¥Pçš„ï¼Œæ‰€ä»¥æ˜¯ä¸ªRPå…³èŠ‚ï¼Œæ—¢å¯ä»¥å…ˆç®—Rä¹Ÿå¯ä»¥å…ˆç®—Pã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTdiZjExOWE5YWI1ZDliOTFhZWQxMGVlMWNhNDNiMzZfUHNadHRnaFo1aTBac2xXQk9UeUZDeHBBTVFqMnRyZWJfVG9rZW46WUg4eWJqQXBWb3RUR0d4VUFBYWNOSkpBbmloXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGIzZTBkNzE2NWExN2NkODc2Nzc1MGM0NDFlMmUxMDZfM0U0Z0VMeExCNFM1dGtjMk05bm9xdkx6a1loTDlrazhfVG9rZW46RDllSGJWeUpwbzZaaXR4MWo5Q2NzM0RSbkpkXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

5.  ##### RPç±»å‹
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OTk0ZjZlMTAwYzM3ZWNhZDg3YjYxMTY3Y2ExNjc5NTdfcWJCeVhKMEl5ZEdzcndLeGNuSm9uSFk5bllPOXo5cjRfVG9rZW46TTVBT2I2YzJ1b1pic054Z0dQbWN0aVJmbnFlXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDAyMjZjODc4NWZhNzYwMmJmMjI1NjBiMmMyNGU1YzBfVmtOT3A5OTJJWFNRY2I1Z1l0OGZIZDE4ejZ0S01sYllfVG9rZW46RFg0VmJmb3VRb1JMTVl4S01vd2NDSFVrbjBjXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

é€‰Dï¼Œå› ä¸ºä¿©è‡ªç”±åº¦ï¼Œæ‰€ä»¥æœ‰ä¿©é©±åŠ¨å‚æ•°ã€‚

  

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWVlY2EwNmRkMjkyMzBlYjQ5NmU0ZjQ2ZGJhYzU0NDNfcHBjbWU2QnFEaG9yMTdFVDdHY0ZFWVRGbnlua2hZc3lfVG9rZW46UWJ2eGJKRXBrb0ZRa1N4MjhNUmNocHRBbllkXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

7.  ### æ‰§è¡Œå™¨å…³èŠ‚ä¸ç¬›å¡å°”ç©ºé—´(Actuator Joint and Cartesian Spaces)
    

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGRhNTBmMTNmMTAxNzZiNDkyMDA5MDJmZmFkOGZjYWVfQVRWUzZzNzQ3NXNyRVBMdHhjbTRmSzJTdHg0cnN3ek9fVG9rZW46RlZKTmJsY3pXb0ZqMEl4M285c2NMSkVkbldoXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

æˆ‘ä»¬è¿™é‡Œçš„é©±åŠ¨æ˜¯theta1-3ï¼Œ

å½“æˆ‘ä»¬çŸ¥é“theta1-3çš„å€¼ä¹‹åï¼Œæˆ‘ä»¬å°±ä¼šçŸ¥é“Pç‚¹åœ¨ä¸–ç•Œåæ ‡ç³»ä¸Šçš„è¡¨è¾¾ã€‚

è¿™è¢«å«åšæ­£å‘è¿åŠ¨å­¦ï¼ˆForward Kinematicsï¼‰ã€‚

ç”±Pç‚¹ä¸–ç•Œåæ ‡ç³»åç®—å…³èŠ‚è§’åº¦ï¼Œé‚£ä¹ˆå«é€†å‘è¿åŠ¨å­¦ï¼ˆInverse Kinematicsï¼‰ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGNhMmM4YWE3Mzk4NzI4M2E0NjQxMTQzOTBlMWZiM2JfRWRCeVZlRTRRbUJCSUs5RUZSV3loNEpZVVNTSHlVWWpfVG9rZW46SHdtbGJYRWlWb2VUdkp4UktMMmNySWEybmVwXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

Actuator Spaceå°±æ˜¯é©±åŠ¨å™¨ç©ºé—´ï¼Œæ¯”å¦‚ä¸€ä¸ªç”µæœºæ€ä¹ˆæ“æ§èƒ½è½¬joint spaceä¸‹çš„å›ºå®šè§’ï¼ˆç»è¿‡ä¸€ç³»åˆ—è½¬æ¢ï¼‰ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmNkNWRjOTI5NDY1NGRmYmQ2YmRiOWFhMjRiN2ZlYTBfdlJUY3hPb3p6YWRScmhhaUdrd3FRdGxNcFUzTFZGalhfVG9rZW46STBIbmJOYWxxb1hKRXF4TWV4OWNrSUpmbkdmXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzFmNTQzMmYwMGJkNTEwZTAzZWFmYWU3MGNkYmI3MjNfUEdpQmdlRXVSdHpqM1ZxSkVxV0Q1Z1NUMXV3VmRrQ0JfVG9rZW46SzBwdWI5UWJ6b0pmYjJ4eG9jSGNTVnN3bmZoXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDA4ZDg2NzM2NjA0N2ViMjk4ZDE0YWM5M2NjNjY3YzRfbEc1MGc2eTRvVWFzUzdoY3R0VElpeVFOSmtiNTg3c2lfVG9rZW46WW16amJFbk84b1BGR0p4d0d1NWNqZEk1bmtnXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmU0MGZhODBjMzdiZDBiYjM3NjU2M2I1MjQzNmI1NGJfY2hiNVhXSkdnUzRacjIxdXZld0cwMXdQZlI2MTRwSEVfVG9rZW46T3d0QWJZRjVNb0hXWUp4YzZQeWNhSmlZbnhmXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MmZjNThlNzcwYTYyNmVjMzk2ODNlMjhhZmI0MDM2NjFfNU1uYktOVFRmWjNDUjVBT3dzak9BcVpxR3IxWkR5OG5fVG9rZW46VlVaWmJXdFJTb2tFRVR4UzJEQWNtZnpabjJiXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTM2NTZlY2YzMGIyM2ViZmE3NDAzNDBkODZlM2M5NmJfRW5ldnRWTTFGWHJTcmRERUFJdXdlNmxGV3h4Y0FlOGpfVG9rZW46SERKemJDYXRnbzJJQlh4eGk4ZGNseFFsbjNkXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=M2ViNjFmMGZiMTUwODViOTZlZGY5ZTIxOTE4ZmI3NDlfd0hEUUU0SXg3RXVPRVpScE5PMjhONWRDb1VtYUw4WmlfVG9rZW46VzZUQmI5N2xib1NZbEF4bjZVUGN0TzFZbmlmXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MWRlNWU0YmE2ZWE5ZmMzMzVkZTQ4OTIzMjQxZThhYjBfbXZiRHVxOWhMNTBmSHMySXlZNFRiT09KRmRKdGlneE5fVG9rZW46Rk9RdGJNaldVbzF3eDR4blhCdWNHTGNYbndkXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

æœ‰è½¬åŠ¨æœ‰ç§»åŠ¨çš„éƒ¨åˆ†ï¼ˆæ‰€ä»¥éœ€è¦ä¸¤ä¸ªç”µæœºæ¥è¾¾åˆ°è¿™ä¸¤ä¸ªè‡ªç”±åº¦ï¼‰

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDgyY2M1NzhhNDBlOWE3ZWI1OWE2NTc4MTIyZTU5YTVfTmZjVXZyMVVjWGVhOW14SHB2cFRXcTVKV2VDSTZnSGhfVG9rZW46Q2g3bGJhVFFOb3lPZ214MzJGV2NYNkVwbnFlXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MGJkZDlkNDA5ZWIwMDZlZGIwNzk1YTAyZWNhNDljOTJfUWQzYmJKdTRwWUZKa05PczVjMlBkVGEzWm5xTVAyUnFfVG9rZW46VUR4QWJTMThyb29vbW94dUE2cmNOSG9QbnhiXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

åŒæ­¥å¸¦æœºæ„ä½¿å…¶æ—‹è½¬ã€‚ï¼ˆç¬¬ä¸€ä¸ªç”µæœºï¼‰

é½¿è½®é½¿æ¡æœºæ„è¾¾åˆ°ä¸Šä¸‹ç§»åŠ¨ã€‚ï¼ˆç¬¬äºŒä¸ªç”µæœºï¼‰

ä½†æ˜¯ï¼Œè¿™ä¸¤ä¸ªå¹¶ä¸æ˜¯ç‹¬ç«‹çš„ï¼Œå› ä¸ºæ˜¯åŒè½´é©±åŠ¨çš„ï¼Œæ‰€ä»¥æœ‰äº›è´Ÿè·ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YzYwMGZlMDAyMDIwMDkwNGM2OTJjNTAyOTY2YzEyMzlfWmpjUjhDNW5Rc0pzTVF1ZzFDdU5KdUFwOW1zU3hxV1VfVG9rZW46TzloV2JRWEtRbzZ3WUJ4Z0NpbmNMM0ZQbjlKXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

ä¸¤ä¸ªè½¬åŠ¨å˜æˆä¸€ä¸ªè½¬åŠ¨ä¸€ä¸ªç§»åŠ¨ã€‚

  

  

  

  

  

  

  

8.  ### æ­£è¿åŠ¨å­¦
    

**å®šä¹‰** ï¼šå·²çŸ¥æœºå™¨äººå„ä¸ªå…³èŠ‚ï¼ˆæˆ–è½®å­ç­‰é©±åŠ¨å•å…ƒï¼‰çš„è¿åŠ¨å‚æ•°ï¼ˆå¦‚è§’åº¦ã€ä½ç§»ã€é€Ÿåº¦ç­‰ï¼‰ï¼Œè®¡ç®—æœ«ç«¯æ‰§è¡Œå™¨çš„ä½ç½®å’Œå§¿æ€ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTM0ZGU0NzdlNDVhZThiZjYwNDA3MzY4YWFjNzVmZWJfS3lIVHptRjZST01iWlRqVldZenl5Y0NqYzI1SEJUUlFfVG9rZW46UG01RGJhNkxVb01Eall4WTZrNmM5VktVbkdjXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjUwYmIzZTE2NWZiYWJlMmZlOGY0ODFmOWY4MDkzYjRfNTFhbHZwY1hkY1NEblBPMjQxTFZRU0VvU0hKM3Nxb2tfVG9rZW46TjVURGJvSHdGbzg3cmJ4Mlo0YWMyMnVMbk1oXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

ads=dv/dt \* ds = ds/dt \*dv = vdv

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjI3MmUxODU0NzE0MzdkOGJkMzNjZDU3OTY5MGViNjZfR0NOdWhJUDRZdWxiUE1HNXRTaDQ1cm5OVlJIZW5mWVlfVG9rZW46S3BGTmJxS2U4b1FQdzl4NTczdGNRaWs4bjhmXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

ç‰›é¡¿ç¬¬äºŒå®šå¾‹ï¼Œèƒ½é‡å®ˆæ’ï¼Œå†²é‡ä¸åŠ¨é‡

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YjhmOTY4ZjBkOTFhMGEzZTY1MGFlYzZlNGI4OTFhMTRfUDJLSFNOWUs1V3FPdWhpeGZ4bTllSHFQSjBPaGVab3pfVG9rZW46WFoyS2JKM251bzV1N3d4MlREVmM2S1dKbjFjXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

Wpå°±æ˜¯Pç‚¹åœ¨ä¸–ç•Œåæ ‡ç³»ä¸‹çš„åæ ‡

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmVmYTQ5YWY5ZTMwOGQ2ZjgzMDQ5MDgyMDJhMDhhYmRfNGlKa1BaeFhIOTlmem1GdTNXYVI4a1JtaDZkTlM4eHdfVG9rZW46QVJ0TWI1TTNhb0tVZUN4Y0VMZ2NMd3Zwbk5lXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YTk0OTc1YzQ5NzFkMDgzNzIzM2MwNTJkMTRjZjQzNTNfUWMwZUNVbHhkUnUya3FJMGdkd09uR05zSGNjbU5DNk5fVG9rZW46SjhQN2JKZE54b1FOcTF4WWRoc2NsQjN0bkVjXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MWQzZjMzNGEyZWMxMjE1NjAwNDNhNjEwMTQyNmZmNGVfMGxJRHhyZkhENDVwTE51SllXR0hlMlRuT3E2NnpTT0hfVG9rZW46TThjZGJyQ3Yzb3FwWXl4VnludmNXN3QwbmtmXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

å¯ä»¥æ ¹æ®è¯¥å…¬å¼ï¼Œå¾—çŸ¥æœ«ç«¯æ‰§è¡Œå™¨åœ¨ä¸–ç•Œåæ ‡ç³»ä¸­çš„åæ ‡ã€‚

9.  ### é€†è¿åŠ¨å­¦
    

**å®šä¹‰** ï¼šå·²çŸ¥æœ«ç«¯æ‰§è¡Œå™¨çš„ç›®æ ‡ä½ç½®å’Œå§¿æ€ï¼Œè®¡ç®—éœ€è¦è®©å„ä¸ªå…³èŠ‚ï¼ˆæˆ–è½®å­ç­‰é©±åŠ¨å•å…ƒï¼‰è¿åŠ¨åˆ°ä»€ä¹ˆè§’åº¦æˆ–é€Ÿåº¦æ‰èƒ½è¾¾åˆ°è¯¥ç›®æ ‡ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDhiMjBhMzlkMWFlNzZiMDY5MGExMDRhMGEwYjZlN2NfSEU0NGtsZjNUdVNLampTREswSHU2WmM0dDZrS2lpc3lfVG9rZW46UndNZGJKdmlvb1lPUUx4YTVzUWNHd3dsbnJnXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDA2NWRjZTkwYWEyZWFmNDRlY2ZjNDI4Yzk1NTA4MDVfdmNNT2FoTzJhTTcwZmJ0RUdneDk4Tlkwd2d2Mlh6MENfVG9rZW46UUNnUWJCNkNKb2JNTFd4dGV6QWM3N0F1bkhMXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

å…ˆçŸ¥é“æœ«ç«¯æ‰§è¡Œå™¨çš„æŸä¸ªç‚¹Påœ¨ä¸–ç•Œåæ ‡ç³»ä¸­çš„è¡¨è¾¾ï¼Œä¹Ÿå°±æ˜¯ç»™å‡ºPwæˆ–è€…æœ«ç«¯æ‰§è¡Œå™¨æŸä¸ªç‚¹ä¸Šçš„frameHï¼Œ

é€šè¿‡Pwæ±‚å‡ºthetaã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OGM5NTlmNTUzZDQ1MmQ3N2Y1MzA3NWQzM2E3ZjE0YWFfaXhXU1o3NXJabVEyRGhmbTZGS3U5cDFUR3h1aUo1dUlfVG9rZW46QXp2R2JFR2Rab2d5eHN4NVVnOGN5bTlBbkdmXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

è¿™æ ·æ‰‹è‡‚å°±æœ‰6ä¸ªæœªçŸ¥æ•°

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTFhMTMzZmNlNDBiMjAzY2I0MjFiMzhlOTc3OTNjNGRfTzd3UGE5OE02ZXhBeWRlNHdpbFR3aEVIcXJEalN0ZkFfVG9rZW46R21xV2J5SDhlb01QRDF4RVZlZ2NKT1pTbnNjXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

16ä¸ªæ•°å­—ï¼Œè½¬åŠ¨çš„éƒ¨åˆ†å äº†9ä¸ªæ•°å­—ï¼Œä¹Ÿå°±æ˜¯å·¦ä¸Šè§’çš„3X3çš„æ—‹è½¬çŸ©é˜µï¼Œç„¶åå³ä¸Šè§’3X1çš„å‘é‡è¡¨ç¤ºç›¸å¯¹äºåŸç‚¹çš„ä½ç§»é‡æ˜¯ä»€ä¹ˆã€‚ï¼ˆä¹Ÿå°±æ˜¯frame6çš„åŸç‚¹ç›¸å¯¹äºframe0çš„åŸç‚¹ä½ç§»é‡æ˜¯ä»€ä¹ˆï¼‰

ä¸‹é¢çš„0001æ˜¯æ•´æ•°ï¼Œå›ºå®šçš„ï¼Œä¸å˜çš„ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MDFjN2EwODMxOGRkMDhjY2M1MDQ3MWFjNTAxMzg4NTRfS084WmVhd3c2eWtLREtmVVdlTFRNdDZBSlNSS1VFMVJfVG9rZW46TGlPY2J5NWtlb2JLUEl4VWFkTGNKQ2labldNXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

è¿™ä¸ªæ—‹è½¬çŸ©é˜µé‡Œï¼Œæœ‰3ä¸ªé•¿åº¦æ¡ä»¶ï¼Œ3ä¸ªäº’ç›¸å‚ç›´æ¡ä»¶ï¼Œæ‰€ä»¥9ä¸ªæ•°å­—é‡Œï¼Œå°±å‰©3ä¸ªè‡ªç”±åº¦ã€‚ï¼ˆä¹Ÿå°±æ˜¯å‘é‡é•¿åº¦ä¸º1é™åˆ¶3ä¸ªï¼Œå‘é‡ä¸¤ä¸¤å‚ç›´é™åˆ¶3ä¸ªï¼Œæ‰€ä»¥æ˜¯å¹³ç§»çŸ©é˜µï¼Œ3ä¸ªè‡ªç”±åº¦ï¼‰

ç„¶åå³ä¸Šè§’3X1çš„å‘é‡ä¸­ï¼Œç›¸å¯¹åŸç‚¹çš„åæ ‡X,Y,Z,é‚£ä¹ˆå°±æ˜¯3ä¸ªè‡ªç”±åº¦ã€‚

æ‰€ä»¥æ€»å…±æœ‰6ä¸ªè‡ªç”±åº¦ã€‚

  

è¿™12ä¸ªæ–¹ç¨‹å¼å°±æ˜¯é™¤äº†ä½ä¸‹çš„0001ï¼Œä¸Šé¢çš„å‚æ•°éƒ½å¯ä»¥åˆ—ä¸€ä¸ªå¼å­ã€‚æˆ‘ä»¬è¦åšçš„ï¼Œå°±æ˜¯ä»12ä¸ªå¼å­ä¸­æ±‚å‡º6ä¸ªæœªçŸ¥æ•°ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmY3MWVhZGI0MzQ3ZmQ5NTAyOGNhYzA2MWJmZmM3ZGRfY3NTVlNzNldJdDB0UHBHWFhlRkZiR0VFZGZsTGpTYzVfVG9rZW46QWNWMWJKVEpBb2VvTmd4aW5nS2NXNU5lbnhkXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

çµæ´»å·¥ä½œç©ºé—´Dexterous workspaceæ˜¯å¯è¾¾å·¥ä½œç©ºé—´Reachable workspaceçš„å­é›†ã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=OWY1Mzc1ZmU1NGIzYjFkOWZkODk5ODM4MzU0MmI5OWRfcURobFpQNFR3dlMwc2IzVWdNOHVsQk5Yd21Oa25rcEZfVG9rZW46QXdma2JRdTU3b3pDQTN4UDhaRmNQcHVNbmVmXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

å®ƒçš„å¯è¾¾å·¥ä½œç©ºé—´æ˜¯ä¸ªåœ†ç¯ã€‚

å¯¹äºæŸä¸ªç‚¹ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œåªæœ‰1ç§æˆ–2ç§å§¿æ€å¯ä»¥è¾¾åˆ°ã€‚è¿™ä¸ªæœºå™¨äººåªæœ‰RWSï¼Œæ²¡æœ‰DWSã€‚

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NjJjYjAxZDNkNDBkZWIyMmUzMjk1YWY3MjMwYjNmOGVfck16NWhLWUl2TUJrOGdMQTJJbDduOXN2NkNsVkRJcFJfVG9rZW46VW0zUWIxemZCb0dKTGV4OWs2RGN3N3BFbmdGXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

æ‰‹è‡‚ä¸€æ ·é•¿çš„è¯ï¼Œé‚£æ ·å·¥ä½œç©ºé—´å°±æ˜¯ä¸ªåœ†äº†ï¼Œ

æœ‰ä¸€ä¸ªç‚¹å°±æ˜¯DWS,å°±æ˜¯åŸç‚¹ï¼Œå½“æ‰‹è‡‚å†…æŠ˜ï¼Œé‚£ä¹ˆå¯ä»¥ä»¥360åº¦ä»»æ„ä¸€ä¸ªè§’åº¦æ¥è¾¾åˆ°è¿™ä¸ªç‚¹ï¼Œæ‰€ä»¥è¯¥ç‚¹å°±æ˜¯DWSã€‚

  

17.  # MicroROS
    

https://micro.ros.org/

æ²¡å•¥å¿…è¦ï¼Œä¸²å£å¤Ÿç”¨äº†ã€‚

é™¤éä½ æƒ³æä½æˆæœ¬è·‘ROS2,æ¯”å¦‚è¯´è½¦ä¸Šåªæ”¾ä¸€ä¸ªESP32æˆ–è€…STM32è·‘MicroROSï¼Œç„¶åç”µè„‘è·‘ROS2åœ¨æ—è¾¹è¿è¡Œå…¶ä»–éœ€è¦å¤§å‹è®¡ç®—çš„èŠ‚ç‚¹ã€‚

  

18.  # ROS2\_Control
    

å®˜ç½‘:

https://control.ros.org/humble/index.html

ä»“åº“:https://github.com/ros-controls/ros2\_control

ç¬¬ä¸‰æ–¹åŠŸèƒ½åŒ…ï¼ˆå¼€å‘è€…:@brainyuan:https://b23.tv/L0sEXPLï¼‰:https://github.com/Factor-Robotics/odrive\_ros2\_control

  

  

19.  # Webotsä»¿çœŸå¹³å°
    

è¿™ä¸ªå¹³å°ç”¨æ¥æµ‹è¿åŠ¨å­¦å¾ˆèˆ’æœã€‚

  

å¯ä»¥SolidWorksè½¬URDFï¼ˆROSå®˜æ–¹æä¾›sw2udfoå·¥å…·ï¼‰ï¼Œå†URDFè½¬Webotsï¼ˆwebotså®˜æ–¹æä¾›urdf2webotså·¥å…·ï¼‰ã€‚

https://github.com/ros/solidworks\_urdf\_exporter

https://github.com/cyberbotics/urdf2webots

è¿™æ ·çš„è¯ï¼Œè¿ç”µæœºç”šè‡³éƒ½ç»™ä½ é€‰å¥½äº†ï¼Œä½ åªéœ€è¦å†™è¿åŠ¨å­¦å³å¯ã€‚

  

è¿åŠ¨æ§åˆ¶ç¨‹åºå¯ä»¥ç”¨C/C++ã€Pythonã€Javaç­‰è¯­è¨€ç¼–å†™ï¼Œæ§åˆ¶çš„æ—¶å€™åªéœ€è¦æ³¨æ„ä¸€ä¸‹æ§åˆ¶ç”µæœºè§’åº¦å’Œé€Ÿåº¦çš„æ–¹å¼ä»¥åŠå•ä½å³å¯ã€‚

å¦‚æœä½ ç»™ç”µæœºsetPosition(INFINITY)çš„è¯ï¼Œé‚£ä¹ˆè¿™ä¸ªç”µæœºå°†å˜æˆè§’åº¦ç”µæœºï¼Œè€ŒåŸæœ¬è®¾ç½®é€Ÿåº¦çš„å‡½æ•°å°†ä¼šå˜æˆè®¾ç½®è§’é€Ÿåº¦ã€‚

å¦‚æœä½ æ²¡ç»™ç”µæœºè®¾ç½®setPosition(INFINITY)ï¼Œé‚£ä¹ˆè¿™ä¸ªç”µæœºå°±æ˜¯ä¸ªé€Ÿåº¦ç”µæœºã€‚

è§’åº¦å•ä½æ˜¯radï¼ˆå­˜ç–‘ï¼‰

é€Ÿåº¦å•ä½æ˜¯rad/sï¼ˆå­˜ç–‘ï¼‰

```C++
        for (int i = 0;i < 4;i++)
        {
                //èˆµç”µæœºä»¿çœŸä¸­é»˜è®¤é¡ºæ—¶é’ˆä¸ºæ­£
                swerve_motor[i] = robot->getMotor("swerve_joint" + std::to_string(i));
                //swerve_motor[i]->setPosition(INFINITY);       // æ³¨é‡Šæ‰ï¼šä¸å¯ç”¨é€Ÿåº¦æ§åˆ¶
                swerve_motor[i]->setPosition(0.0);       // åˆå§‹è§’åº¦ä¸º0
                swerve_motor[i]->setVelocity(50.0);       // è®¾ç½®è§’é€Ÿåº¦

                //é©±åŠ¨ç”µæœºä»¿çœŸä¸­é»˜è®¤å‘åæ»šä¸ºæ­£
                drive_motor[i] = robot->getMotor("drive_joint" + std::to_string(i));
                drive_motor[i]->setPosition(INFINITY);   // å¯ç”¨é€Ÿåº¦æ§åˆ¶
                drive_motor[i]->setVelocity(-0.0);        // åˆå§‹é€Ÿåº¦ä¸º0
        }
```

  

  

  

20.  # OpenCV
    

1.  ## OpenCV
    

[åŸºç¡€è§†è§‰ç®—æ³•-OpenCVå®ç°](https://sdutvincirobot.feishu.cn/wiki/D50twQJ2UiVvaDky8Sic3aPOnEh)

2.  ## CV\_Bridge
    

cv\_bridgeç»´åŸºç™¾ç§‘ä»‹ç»:

https://wiki.ros.org/cv\_bridge

https://index.ros.org/p/cv\_bridge/

ROS2Humbleçš„cv\_bridgeä»“åº“é“¾æ¥(æ³¨æ„é€‰æ‹©å¯¹åº”ç‰ˆæœ¬çš„åˆ†æ”¯branches):

https://github.com/ros-perception/vision\_opencv/tree/humble

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NTc4MjI2N2MxNWI2N2ZlNmFjMGI4YzBkNWQyYTVjNDNfc0ZvVXh5NkFjYjlvYVZjaExncE1jb0FkZmszS0ZDMjFfVG9rZW46R1NNemJ5YWdZb0g3U294Z0VUeGN5MGgxbjVyXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=YmRiM2I0OGRmYTk1ZWJjM2I4ODViMWVmOTkzMTYyNWJfZ0RQM1pFOER4aW1FbzNaMTllWFhlVFlBd1NMUXZRQmhfVG9rZW46R2pkSWJQWUxUbzFmMlV4Y2ZyemN6ZHY4bnpXXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

1.  ### å®‰è£…
    

æå‰è‡ªå·±ç¼–è¯‘å¥½å¸¦CUDAçš„OpenCV4,è¯¦è§[ç”µæ§ç»„ç¯å¢ƒæ­å»ºå¤§å…¨](https://sdutvincirobot.feishu.cn/wiki/FQszwXIR5iQgCfk7pRwc9rYpnqg)

  

1.  aptå®‰è£…(ä¸å»ºè®®)
    

ç”±äºrosè‡ªå¸¦çš„cv\_bridgeè‡ªåŠ¨é“¾æ¥rosè‡ªå¸¦çš„oepncvç‰ˆæœ¬,æ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬ä¸ä¼šç”¨ros2è‡ªå¸¦çš„cv\_bridge,ä¸€èˆ¬éƒ½éœ€è¦è‡ªå·±æ‰‹åŠ¨ç¼–è¯‘ä¸€ä¸ªcv\_bridge.

```CMake
# é€šç”¨å‘½ä»¤
sudo apt install ros-<ros2-distro>-vision-opencv
# ROS2 Humble
sudo apt install ros-humble-vision-opencv
# ROS2 Jazzy
sudo apt install ros-jazzy-vision-opencv
```

  

2.  æºç ç¼–è¯‘å®‰è£…(å»ºè®®)
    

æœ¬æ•™ç¨‹ä»¥jazzyä¸ºä¾‹å­.

é¦–å…ˆå…‹éš†ä»“åº“,å…‹éš†jazzy,humble,rollingéƒ½å¯ä»¥,åªè¦æ˜¯ROS2çš„åŸºæœ¬éƒ½æ²¡å•¥å¤§å˜åŒ–.ä½†æ˜¯å®˜æ–¹æš‚æ—¶æ²¡å‡ºjazzy,æˆ‘å°±ç›´æ¥å…‹éš†é»˜è®¤çš„rollingäº†.

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjkwYmJmOTA4MDMxMDVhZmEwNjU4ODFiOTRhNjFiNDlfSllDOXl3Y0pCdWRrSXlDcGZKUURQT094dXBYUWdYNVpfVG9rZW46WjBGemJMek5EbzRWbzV4QlV6eWNMUjhwbjFkXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹

```CMake
mkdir ~/ros2_ws/src
cd ~/ros2_ws/src
# å…‹éš†æºç 
git clone https://github.com/ros-perception/vision_opencv.git
cd vision_opencv
# å¦‚æœæ˜¯humbleå»ºè®®:
git checkout humble
```

å®‰è£…ä¾èµ–:

```CMake
sudo apt install python3-numpy
sudo apt install libboost-python-dev
```

ä¿®æ”¹cv\_bridgeçš„CMakeLists

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MzU5OGE0NWEwYTAyYmQyMGM0NWRkZTUzOTQ4YWM0MTFfc2x0RkRaMHgxaXdPSHN6M1lqdWJNVklEdmRuSjBpV2JfVG9rZW46SEhvdmI3dHRIb2JIQzB4SjYycmNIaTBxbjBkXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

å°†åŸæœ¬çš„`find_package(OpenCV 4 QUIET)`æ”¹ä¸ºç²¾ç¡®åŒ¹é…ç‰ˆæœ¬ï¼Œå¹¶æ·»åŠ `EXACT`å‚æ•°ï¼š

EXACTæ˜¯æœªæ‰¾åˆ°ç²¾ç¡®ç‰ˆæœ¬æ—¶ï¼ŒCMakeä¼šæŠ¥é”™å¹¶ç»ˆæ­¢æ„å»º.

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=NzVjZmY4ZTcxYzdmZTY5ZDY5ZGUwNDdhYzQxYTIwZmNfaGVGWHZ4bEZkWm1SNkFvemUyc1R2dVZjWXRaZnlkZ0JfVG9rZW46VWxZVGJ4UXU2b1FoUzZ4anBjZGNYTjBGbkxiXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

```CMake
find_package(OpenCV 4.11 EXACT QUIET
  COMPONENTS
    opencv_core
    opencv_imgproc
    opencv_imgcodecs
  CONFIG
)
```
```CMake
cd ~/ros2_ws
# ä¸‹é¢è¿™ä¸‰ä¸ªæ ¹æ®æƒ…å†µä¸‰é€‰ä¸€,ä¸€èˆ¬æ˜¯ç¬¬ä¸€ä¸ªcolcon build --symlink-install

# å¦‚æœä½ æ›¾ç»æ²¡ç¼–è¯‘è¿‡
colcon build --symlink-install
# å¦‚æœä½ åªæƒ³ç¼–è¯‘cv_bridge
colcon build --symlink-install --packages-select cv_bridge
# å¦‚æœä½ æ›¾ç»ç¼–è¯‘è¿‡ä¸€é,åˆ™éœ€è¦ä¸‹åˆ—å‘½ä»¤
colcon build --symlink-install --packages-select cv_bridge --allow-overriding cv_bridge
```

éªŒè¯:

```CMake
# åˆ—å‡ºcv_bridgeé“¾æ¥çš„opencvç‰ˆæœ¬
ldd ./install/cv_bridge/lib/libcv_bridge.so | grep opencv 
```

å¦‚ä¸‹å›¾,æˆ‘çš„æˆåŠŸé“¾æ¥åˆ°411äº†,ä¹Ÿå°±æ˜¯opencv4.11ç‰ˆæœ¬.

![](https://pcnveplwrxf8.feishu.cn/space/api/box/stream/download/asynccode/?code=MTkxMDczMzY1OTE2NGFjZTg5ZDljNGI3YTVmNjhhMWVfRDNIc1dYUk1NNDNGR1dWTHM2ZVI5ZHFQcU9seXVkdlRfVG9rZW46VmZVc2JxMXdob0VGUjB4ajlvemMxNDh4bk1nXzE3NjA5NTc3NzU6MTc2MDk2MTM3NV9WNA)

æ¥ä¸‹æ¥é…ç½®ç¯å¢ƒ:

```CMake
vim ~/.bashrc
```

åœ¨`source /opt/ros/jazzy/setup.bash`çš„ä¸‹ä¸€è¡ŒåŠ å…¥ä¸‹é¢è¿™å¥

```CMake
source ~/ros2_ws/install/setup.bash
```

è¾“å…¥`:wq`ä¿å­˜

å®Œæˆå®‰è£…ä¸ç¯å¢ƒé…ç½®ç»“æŸ.